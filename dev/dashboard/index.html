<!DOCTYPE html>

<html lang="en-us">

<head>
  <title>GraalVM Dashboard</title>

  <meta charset="UTF-8">
  <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1">
  <link rel="icon" href="css/images/favicon.ico" type="image/x-icon" />

  <!-- This is the main css file for the default theme -->
<!-- injector:theme -->
<link rel="stylesheet" href="css/redwood/9.1.0/web/redwood.min.css" id="css" />
<!-- endinjector -->
  <!-- This contains icon fonts used by the starter template -->
  <link rel="stylesheet" href="css/demo-alta-site-min.css" type="text/css"/>
  <link rel="stylesheet" id="uxiconFont" href="https://static.oracle.com/cdn/fnd/gallery/2010.0.0/images/iconfont/ojuxIconFont.min.css">

  <!-- This is where you would add any app specific styling -->
  <link rel="stylesheet" href="css/app.css" type="text/css" />
  <script>
	const DOC_PAGES = {
	"getting-started.md":`IyBHZXR0aW5nIFN0YXJ0ZWQgR3VpZGUKCkdyYWFsVk0gRGFzaGJvYXJkIGlzIGEgd2ViLWJhc2VkIGRhc2hib2FyZCBmb3IgdmlzdWFsaXppbmcgYXJiaXRyYXJ5IGFzcGVjdHMgb2YKZHluYW1pYyBhbmQgc3RhdGljIGNvbXBpbGF0aW9ucyBpbiBHcmFhbFZNLCBpbiBwYXJ0aWN1bGFyLCBpbgpbR3JhYWxWTSBOYXRpdmUgSW1hZ2VdKGh0dHBzOi8vd3d3LmdyYWFsdm0ub3JnL3JlZmVyZW5jZS1tYW51YWwvbmF0aXZlLWltYWdlLykuClRoZSB0b29sIGhhcyBiZWVuIGRlc2lnbmVkIHRvIGRpc3BsYXkgdGhlIGluZm9ybWF0aW9uIG9uIG1ldGhvZHMgY29tcGlsYXRpb24sCnJlYWNoYWJpbGl0eSwgY2xhc3MgdXNhYmlsaXR5LCBwcm9maWxpbmcgZGF0YSwgYW5kIGV2ZW4gaW5mb3JtYXRpb24gYWJvdXQKZHluYW1pYyBjb21waWxhdGlvbiBwcmVzc3VyZSwgY29tcGlsZWQgY29kZSBsaWZldGltZSwgY29tcGlsYXRpb24gY291bnQsCmRlb3B0aW1pemF0aW9uIGV0Yy4uCgpTb21lIHZpc3VhbGl6YXRpb25zIGV4YW1wbGVzIGluIEdyYWFsVk0gRGFzaGJvYXJkIGFyZToKLSAqKkNvZGUgU2l6ZSBCcmVha2Rvd24qKiAtIHByZXNlbnRzIGEgdmlzdWFsIHN1bW1hcnkgb2YgdGhlIHNpemVzIG9mIHRoZSBkaWZmZXJlbnQgcGFja2FnZXMsCiAgY2xhc3NlcyBhbmQgbWV0aG9kcyB0aGF0IHdlcmUgaW5jbHVkZWQgaW50byBhIG5hdGl2ZSBpbWFnZS4KLSAqKkhlYXAgU2l6ZSBCcmVha2Rvd24qKiAtIHByZXNlbnRzIGEgdmlzdWFsIHN1bW1hcnkgb2YgdGhlIHNpemVzIG9mIHRoZSBvYmplY3RzCiAgb2YgdGhlIGRpZmZlcmVudCBjbGFzc2VzLCB3aGljaCB3ZXJlIGluY2x1ZGVkIGludG8gdGhlIGhlYXAgb2YgYSBuYXRpdmUgaW1hZ2UuCi0gKipQb2ludHMtdG8gRXhwbG9yYXRpb24qKiAtIHRoaXMgY29tcG9uZW50IGlzIHVzZWQgdG8sIHN0YXJ0aW5nIGZyb20gYSBwYXJ0aWN1bGFyIG1ldGhvZCBvZiAiKipDb2RlIFNpemUgQnJlYWtkb3duKioiCiAgdGhhdCBpcyBpbmNsdWRlZCBpbiBhIG5hdGl2ZSBpbWFnZSwgaWxsdXN0cmF0ZSB3aHkgdGhpcyBwYXJ0aWN1bGFyIG1ldGhvZCBvZiB0aGUgcHJvZ3JhbQogIHdhcyBpbmNsdWRlZCBpbiB0aGUgbmF0aXZlIGltYWdlLgogIChHZW5lcmF0ZWQgUG9pbnRzLXRvIEV4cGxvcmF0aW9uIGRpYWdyYW0gY29udGFpbiBhIGxvdCBvZiBkYXRhIGFuZCAqKnNob3VsZCBiZSBhdm9pZGVkIGlmIG5vdCBuZWNjZXNzYXJ5KiouKQoKSGVyZSB5b3UgY2FuIGZpbmQgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGJhc2ljIHVzYWdlIGluc3RydWN0aW9ucy4KCiMjIER1bXBpbmcgdGhlIERhdGEgZm9yIEdyYWFsVk0gRGFzaGJvYXJkCkdyYWFsVk0gRGFzaGJvYXJkIGlzIG9yZ2FuaXplZCBhcm91bmQgdGhlIGNvbmNlcHQgb2YgImRhdGEgZm9ybWF0cyIuIFRvIGdlbmVyYXRlCnJlcG9ydCBmaWxlcyBmb3IgR3JhYWxWTSBEYXNoYm9hcmQsIHlvdSBuZWVkIHRvIHBhc3MgY2VydGFpbiBmbGFncyB3aGVuCmJ1aWxkaW5nIGEgbmF0aXZlIGltYWdlLgoKIyMgR3JhYWxWTSA+IDIwLjIKCiMjIyBNYW5kYXRvcnk6CiogYC1IOkRhc2hib2FyZER1bXA9PHBhdGg+YCAtIHRvIGRlZmluZSB0aGUgcGF0aCBmb3IgdGhlIGR1bXAgZmlsZQoKIyMjIyMgT25lIG9yIG1vcmU6CiogYC1IOitEYXNoYm9hcmRBbGxgIC0gdG8gZHVtcCBhbGwgYXZhaWxhYmxlIGRhdGEKKiAqKmAtSDorRGFzaGJvYXJkSGVhcGAqKiAtIHRvIGR1bXAgdGhlIGJyZWFrZG93biBvZiB0aGUgaW1hZ2UgaGVhcAoqICoqYC1IOitEYXNoYm9hcmRDb2RlYCoqIC0gdG8gZHVtcCB0aGUgYnJlYWtkb3duIG9mIHRoZSBjb2RlIHNpemUgcGVyIG1ldGhvZAoqIGAtSDorRGFzaGJvYXJkUG9pbnRzVG9gIC0gdG8gZHVtcCB0aGUgcG9pbnRzLXRvIGFuYWx5c2lzIGluZm9ybWF0aW9uCgojIyMgT3B0aW9uYWw6CiogYC1IOi1EYXNoYm9hcmRCZ3ZgIC0gdG8gKipOT1QqKiBkdW1wIGluIGBCR1ZgIGZvcm1hdCAoZGVmYXVsdCkKCiMjIyMjIE9uZSBvZjoKKiBgLUg6K0Rhc2hib2FyZEpzb25gIC0gdG8gZHVtcCBpbiBgSlNPTmAgZm9ybWF0CiogYC1IOitEYXNoYm9hcmRQcmV0dHlgIC0gdG8gZHVtcCBpbiBgSlNPTmAgcHJldHR5IHByaW50IGZvcm1hdAoKIyMgR3JhYWxWTSA8PSAyMC4yCgojIyMgTWFuZGF0b3J5OgoqIGAtSDpEYXNoYm9hcmREdW1wPTxwYXRoPi5kdW1wYCAtIHRvIGRlZmluZSB0aGUgcGF0aCBmb3IgdGhlIGR1bXAgZmlsZSBpbiBgSlNPTmAgZm9ybWF0CgojIyMjIyBPbmUgb3IgbW9yZToKKiBgLUg6K0Rhc2hib2FyZEFsbGAgLSB0byBkdW1wIGFsbCBhdmFpbGFibGUgZGF0YQoqICoqYC1IOitEYXNoYm9hcmRIZWFwYCoqIC0gdG8gZHVtcCB0aGUgYnJlYWtkb3duIG9mIHRoZSBpbWFnZSBoZWFwCiogKipgLUg6K0Rhc2hib2FyZENvZGVgKiogLSB0byBkdW1wIHRoZSBicmVha2Rvd24gb2YgdGhlIGNvZGUgc2l6ZSBwZXIgbWV0aG9kCiogYC1IOitEYXNoYm9hcmRQb2ludHNUb2AgLSB0byBkdW1wIHRoZSBwb2ludHMtdG8gYW5hbHlzaXMgaW5mb3JtYXRpb24KCkJ5IHNlbGVjdGluZyBqdXN0IGEgc3Vic2V0IG9mIGFsbCBkYXRhLCB5b3UgcmVjZWl2ZSBhIHNtYWxsZXIgZHVtcCBmaWxlLgpQbGVhc2Ugbm90ZSB0aGF0IERhc2hib2FyZCBpcyAqKmxpbWl0ZWQgYnkgYnJvd3NlciBtZW1vcnkgY2FwYWJpbGl0aWVzKiouCgojIyMgSGVsbG8gV29ybGQgc2FtcGxlIGFwcGxpY2F0aW9uCgpJdCBpcyBwb3NzaWJsZSB0byB0ZXN0IEdyYWFsVk0gRGFzaGJvYXJkIGZlYXR1cmVzIHdpdGggYSBzYW1wbGUgYXBwbGljYXRpb24gcHJvdmlkZWQgaGVyZToKCjEuIERvd25sb2FkIDxhIGhyZWY9L2Rhc2hib2FyZC9kb2NzL3NhbXBsZS9zYW1wbGUuYmd2IGRvd25sb2FkPmBIZWxsb2Agd29ybGQgc2FtcGxlPC9hPiBOYXRpdmUgSW1hZ2UgRHVtcAoyLiBVc2UgIioqTG9hZCBEYXRhKioiIGJ1dHRvbiB0byBvcGVuIGBzYW1wbGUuYmd2YCB5b3UgcmVjZW50bHkgZG93bmxvYWRlZAoKRm9yIGRlbW9uc3RyYXRpb24gcHVycG9zZXMgdGhlIGZvbGxvd2luZyA8YSBocmVmPS9kYXNoYm9hcmQvZG9jcy9zYW1wbGUvc3JjL3NhbXBsZS9IZWxsby5qYXZhIGRvd25sb2FkPmBIZWxsb2A8L2E+IHByb2dyYW0gd2lsbCBiZSB1c2VkOgoKYGBgamF2YQpwdWJsaWMgY2xhc3MgSGVsbG8gewoKICAgIHN0YXRpYyBIZWxsbyBoZWxsbyA9IG5ldyBIZWxsbygpOwogICAgUHJpbnRlciBwcmludGVyOwogICAgcHVibGljIFByaW50ZXIgY3JlYXRlU3RkT3V0UHJpbnRlcigpIHsKICAgICAgICByZXR1cm4gbmV3IFN0ZE91dFByaW50ZXIoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXR1cChTdHJpbmdbXSBhcmdzKSB7CiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMCkgewogICAgICAgICAgICBwcmludGVyID0gY3JlYXRlU3RkT3V0UHJpbnRlcigpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHByaW50ZXIgPSBuZXcgTnVsbFByaW50ZXIoKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oZmluYWwgU3RyaW5nW10gYXJncykgewogICAgICAgIFRocmVhZCB0ID0gbmV3IFRocmVhZChuZXcgUnVubmFibGUoKSB7CiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAgICAgICBoZWxsby5zZXR1cChhcmdzKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHQuc3RhcnQoKTsKICAgICAgICB0cnkgewogICAgICAgICAgICB0LmpvaW4oKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbihlKTsKICAgICAgICB9CiAgICAgICAgZm9yIChTdHJpbmcgcyA6IGFyZ3MpIHsKICAgICAgICAgICAgaGVsbG8ucHJpbnRlci5wcmludChzKTsKICAgICAgICB9CiAgICB9Cn0KCmFic3RyYWN0IGNsYXNzIFByaW50ZXIgewogICAgcHVibGljIGFic3RyYWN0IHZvaWQgcHJpbnQoU3RyaW5nIHMpOwp9CgpjbGFzcyBOdWxsUHJpbnRlciBleHRlbmRzIFByaW50ZXIgewogICAgcHVibGljIHZvaWQgcHJpbnQoU3RyaW5nIHMpIHsKICAgIH0KfQoKY2xhc3MgU3RkT3V0UHJpbnRlciBleHRlbmRzIFByaW50ZXIgewogICAgcHVibGljIHZvaWQgcHJpbnQoU3RyaW5nIHMpIHsKICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4ocyk7CiAgICB9Cn0KYGBgCgpBbiBhYnN0cmFjdCBiYXNlIGBQcmludGVyYCBjbGFzcywgd2hpY2ggaGFzIG9uZSB1bmRlZmluZWQgYFByaW50KClgIG1ldGhvZCB0aGF0CnRha2VzIGEgU3RyaW5nIGFzIGFuIGFyZ3VtZW50LCBhbmQgdHdvIGltcGxlbWVudGF0aW9ucyBvZiB0aGlzIGNsYXNzOgpgTnVsbFByaW50ZXIoKWAgd2hpY2ggcmV0dXJucyBubyBkYXRhIHR5cGUgYW5kIGBTdGRPdXRQcmludGVyKClgIHdoaWNoIHVzZXMgYQpzdGFuZGFyZCBvdXRwdXQgdG8gcHJpbnQgdGhhdCBgU3RyaW5nYCBvdXQuCgpUaGUgYG1haW5gIG1ldGhvZCBmaXJzdCBjcmVhdGVzIGEgdGhyZWFkIHdoaWNoIGluaXRpYWxpemVzIHRoZSBzdGF0ZSBvZiB0aGlzCmBIZWxsb2AgY2xhc3MuIFRoZW4gaXMgc3RhcnRzIHRoYXQgdGhyZWFkIGFuZCB3YWl0cyBmb3IgaXQgdG8gZmluaXNoLiBUaGUKYHNldHVwKClgIG1ldGhvZCB0YWtlcyBhbiBhcmd1bWVudCBmcm9tIHRoZSBjb21tYW5kIGxpbmUgYW5kIGlmIGl0cyBsZW5ndGggaXMKYmlnZ2VyIHRoYW4gemVybywgcHJpbnRzIGl0IHdpdGggYSBzdGFuZGFyZCBvdXRwdXQuIE90aGVyd2lzZSwgY3JlYXRlIGEKYE51bGxQcmludGVyYC4KCkNvbXBpbGUgaXQgYW5kIGJ1aWxkIGEgbmF0aXZlIGltYWdlOgoKIyMjIyMgR3JhYWxWTSA+IDIwLjIKCmBgYApqYXZhYyBIZWxsby5qYXZhCm5hdGl2ZS1pbWFnZSAtSDpEYXNoYm9hcmREdW1wPWRhc2hib2FyZCAtSDorRGFzaGJvYXJkQWxsIEhlbGxvCmBgYAoKIyMjIyMgR3JhYWxWTSA8PSAyMC4yCgpgYGAKamF2YWMgSGVsbG8uamF2YQpuYXRpdmUtaW1hZ2UgLUg6RGFzaGJvYXJkRHVtcD1kYXNoYm9hcmQuZHVtcCAtSDorRGFzaGJvYXJkQWxsIEhlbGxvCmBgYAoKVGhlIGBkYXNoYm9hcmQuYChgYmd2YHxgZHVtcGApIGZpbGUgZHVtcGVkIGR1cmluZyB0aGUgbmF0aXZlIGltYWdlIGJ1aWxkIHdpbGwgYmUgaW4gTmF0aXZlCkltYWdlIER1bXAgRm9ybWF0LgoKIyMgT3BlbmluZyBSZXBvcnQgRmlsZXMgSW4gVGhlIERhc2hib2FyZApUbyBvcGVuIHRoZSBkdW1wZWQgZmlsZSBpbiBHcmFhbFZNIERhc2hib2FyZCwgY2xpY2sgb24gdGhlICIqKkxvYWQgZGF0YSoqIiBidXR0b24Kb24gdGhlIGxlZnQsIHdoaWNoIHdpbGwgb3BlbiBhIGRpYWxvZyBib3guIEhlcmUgeW91IGNhbiBzZWxlY3QgdGhlIGR1bXBlZCBmaWxlLApvYnRhaW5lZCBkdXJpbmcgdGhlIG5hdGl2ZS1pbWFnZSBidWlsZDoKPGJyPgo8aW1nIHNyYz0iL2Rhc2hib2FyZC9kb2NzL2ltcG9ydF9kdW1wX2ZpbGUucG5nIiBhbHQ9ImltcG9ydC1kdW1wIiB3aWR0aD0iNDIwIiBoZWlnaHQ9MzUwLz4KCiMjIyBUZXJtcyBvZiBVc2UKVGhlIHNlcnZlciB0aGF0IGhvc3RzIHRoZSBHcmFhbFZNIHdlYnNpdGUgZGVsaXZlcnMgYW4gYEhUTUxgIHZlcnNpb24gb2YgdGhlIEdyYWFsVk0KRGFzaGJvYXJkIHRvb2wuIEFsbCB0aGUgc3Vic2VxdWVudCBsb2dpYyBoYXBwZW5zIG9mZmxpbmUsIGluIHRoZSBjbGllbnQtc2lkZQpgSFRNTGAgcGFnZS4gTm8gZGF0YSBjb2xsZWN0aW9uIGJ5IE9yYWNsZSwgcmUtdXNlLCBhbmQgc2hhcmluZyB0byBhIHNlcnZlciBoYXBwZW5zCndoZW4gdXNpbmcgdGhlIHRvb2wuCgpBY2NvcmRpbmcgdG8gdGhlIFtUZXJtcyBvZiBVc2VdKGh0dHBzOi8vd3d3Lm9yYWNsZS5jb20vbGVnYWwvdGVybXMuaHRtbCkgZm9yCmFjY2Vzc2luZyBvciB1c2luZyBhbnkgT3JhY2xlIHNpdGUgb3IgdGhlIGNvbnRlbnQsIHRoZSBjb250ZW50IGFjY2Vzc2VkIG9yCm9idGFpbmVkIHRocm91Z2ggdGhlIHVzZSBvZiBHcmFhbFZNIERhc2hib2FyZCBpcyB0byBiZSB1c2VkIGF0IHlvdXIgb3duCmRpc2NyZXRpb24gYW5kIHJpc2suIEdpdmVuIHRoZSBleHBlcmltZW50YWwgc3RhdGUgb2YgdGhlIHRvb2wsIE9yYWNsZSBzaGFsbCBoYXZlCm5vIHJlc3BvbnNpYmlsaXR5IGZvciBhbnkgZGFtYWdlIHRvIHRoZSBwcm9jZXNzZWQgZmlsZSBvciBsb3NzIG9mIGRhdGEuCg==`,
	"code-size-histogram.md":`IyBDb2RlIFNpemUgQnJlYWtkb3duCgpUaGUgQ29kZSBTaXplIEJyZWFrZG93biBjb21wb25lbnQgb2YgR3JhYWxWTSBEYXNoYm9hcmQgZGlzcGxheXMgdGhlIGJyZWFrZG93biBvZgp0aGUgY29kZSBieSBwYWNrYWdlcywgY2xhc3NlcyBhbmQgbWV0aG9kcyB0aGF0IHdlcmUKaW5jbHVkZWQgaW50byBhIG5hdGl2ZSBpbWFnZSB1c2luZyB0aGUgdmlzdWFsaXphdGlvbiBsaWJyYXJ5LiBQYWNrYWdlIHNpemVzIGFyZQpwcm9wb3J0aW9uYWwgdG8gdGhlIHJlcXVpcmVkIG1lbW9yeSBpbiB0aGUgbmF0aXZlIGltYWdlLgoKVGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIHF1aWNrbHkgdW5kZXJzdGFuZCB3aGF0IGlzIGluIHRoZSBuYXRpdmUgaW1hZ2UgYW5kIHRvCmNoYXJhY3Rlcml6ZSB3aGljaCBwYWNrYWdlcyBvciBjbGFzc2VzIGNvbnRyaWJ1dGUgbW9zdCB0byBpdHMgc2l6ZS4gVGhlCmZvbGxvd2luZyBzY3JlZW5zaG90IGRlbW9uc3RyYXRlcyB0aGUgQ29kZSBTaXplIGJyZWFrZG93biBvZiB0aGUgYEhlbGxvYApwcm9ncmFtLiAgCgo8aW1nIHNyYz0iL2Rhc2hib2FyZC9kb2NzL2NvZGUtc2l6ZS1icmVha2Rvd24ucG5nIiBhbHQ9ImNvZGUtc2l6ZSIgd2lkdGg9Ijg1MCIgaGVpZ2h0PSI1MDAiLz4KCk9uIHRoZSBsZWZ0IHlvdSBzZWUgdGhlIHBhcnRpdGlvbiBvZiBwYWNrYWdlcyAoZS5nLiwgYGphdmEubGFuZ2AsIGBqYXZhLnV0aWxgKQpjb21pbmcgZnJvbSB0aGUgSkRLLiBPbiB0aGUgcmlnaHQgeW91IHNlZSBgY29tLm9yYWNsZWAgcGFja2FnZSB3aGljaCBjb3JyZXNwb25kcwp0byB0aGUgbmF0aXZlIGltYWdlLCB0YWtpbmcgbW9zdCBvZiB0aGUgc3BhY2UgKDJNQikuIEV4cGxvcmUgaXQgZnVydGhlciwgYnkKd2Fsa2luZyB0byB0aGUgbGFyZ2VzdCBwYXJ0IG9mIGl0LiBUaGUgYWN0dWFsIGNsYXNzZXMgYW5kIG1ldGhvZHMKKGBOdWxsUHJpbnRlcmAsIGBTdGRPdXRQcmludGVyYCBldGMuKSB0YWtlIHRoZSB0aW55IDE3MSBrQi4gSWYgeW91IGtlZXAKbmF2aWdhdGluZyB0aHJvdWdoIHRoYXQgcGFydGl0aW9uLCBmb3IgZXhhbXBsZSwgdG8gdGhlIGBTdGRPdXRQcmludGVyKClgIG1ldGhvZCwKdGhlIG90aGVyIHZpc3VhbGl6YXRpb24gY29tcG9uZW50IG9mIEdyYWFsVk0gRGFzaGJvYXJkIHdpbGwgb3BlbjogKipQb2ludHMtdG8KRXhwbG9yYXRpb24qKiBkaWFncmFtLiBUaGUgYFN0ZE91dFByaW50ZXIoKWAgbWV0aG9kIHdhcyBpbmNsdWRlZCBpbnRvIHRoZSBuYXRpdmUgaW1hZ2UgYmVjYXVzZSBhCmNhbGwgdG8gaXQgb2NjdXJyZWQgc29tZXdoZXJlLiBJZiB5b3UgaG92ZXIgb3ZlciB0aGUgY2FsbCwgeW91IHdpbGwgc2VlIGFuIGV4YWN0CmxpbmUgaW4gYSBwcm9ncmFtIHdoZXJlIHRoZSBjYWxsIGhhcHBlbmVkIChgSGVsbG8uamF2YTozNGApLiAgCg==`,
	"heap-size-histogram.md":`IyBIZWFwIFNpemUgQnJlYWtkb3duCgpIZWFwIFNpemUgQnJlYWtkb3duIGNvbXBvbmVudCBvZiBHcmFhbFZNIERhc2hib2FyZCBwcmVzZW50cyBhIHZpc3VhbCBzdW1tYXJ5IG9mCnRoZSBzaXplcyBvZiB0aGUgcHJlYWxsb2NhdGVkIG9iamVjdHMgb2YgZGlmZmVyZW50IGNsYXNzZXMsIHdoaWNoIHdlcmUgaW5jbHVkZWQKaW50byBhIG5hdGl2ZSBpbWFnZSBoZWFwLiBUaGUgcHJlYWxsb2NhdGVkIG9iamVjdHMgYXJlIG9iamVjdHMKYWxsb2NhdGVkIGluIGFkdmFuY2UgZHVyaW5nIGEgbmF0aXZlIGltYWdlIGJ1aWxkLCBzdG9yZWQgdG8gYSBzZXBhcmF0ZQpzZWN0aW9uLCBhbmQgZGlyZWN0bHkgbG9hZGVkIGludG8gbWVtb3J5LiBUaGlzIGNvbnRyaWJ1dGVzIHRvIHRoZSBvdmVyYWxsCnNpemUgb2YgYW4gaW1hZ2UuCgpZb3UgY2FuIHVzZSBIZWFwIFNpemUgQnJlYWtkb3duIHRvIGJvaWwgZG93biB0byBkaWZmZXJlbnQgb2JqZWN0cy4gSW4gY2FzZSBvZgp0aGUgYEhlbGxvYCBleGFtcGxlLCBIZWFwIFNpemUgQnJlYWtkb3duIG1heSBub3QgYmUgdmVyeSBoZWxwZnVsIGFzIG1vc3Qgb2YgdGhlCm9iamVjdHMgaW4gdGhlIGhlYXAgYXJlIGludGVybmFsIHRvIE5hdGl2ZSBJbWFnZSBwdWxscy4gVGhlcmUgYXJlIG5vCnByZWFsbG9jYXRlZCBvYmplY3RzIHRoYXQgYmVsb25nIHRvIHRoZSBgSGVsbG9gIGV4YW1wbGUuCgo8aW1nIHNyYz0iL2Rhc2hib2FyZC9kb2NzL2hlYXAtc2l6ZS1icmVha2Rvd24ucG5nIiBhbHQ9ImhlYXAtc2l6ZSIgd2lkdGg9Ijg1MCIgaGVpZ2h0PSI1MDAiLz4K`,
	"points-to-explorer.md":`IyBQb2ludHMtdG8gRXhwbG9yYXRpb24KClRoZSBQb2ludHMtdG8gRXhwbG9yZXIgY29tcG9uZW50IGFsbG93cyBleHBsb3JpbmcgdGhlIHBvaW50cy10byBhbmFseXNpcyBwcm9jZXNzCm9mIGEgbmF0aXZlIGltYWdlIHRvIGZpbmQgb3V0IHdoeSBhIGNlcnRhaW4gbWV0aG9kIHdhcyBpbmNsdWRlZCwgdG8gc2VlIGhvdyB0aGUKc2VxdWVuY2Ugb2YgY2FsbHMgdG8gdGhhdCBtZXRob2QgKG9yIHRoZSBzZXF1ZW5jZSBvZiBkYXRhIGZsb3dzKSBjYW4gYmUKaW50ZXJydXB0ZWQsIHRvIGF2b2lkIHRoaXMgbWV0aG9kIHBvc3NpYmxlIGluY2x1c2lvbiBpbiB0aGUgZnV0dXJlLiBGb3IgZXhhbXBsZSwKaWYgYSBtZXRob2QgaXMgaW5jbHVkZWQgaW50byBhIG5hdGl2ZSBpbWFnZSwgdGhlbiBQb2ludHMtdG8gRXhwbG9yZXIgYWxsb3dzIGEKdXNlciB0byBhc2sgcXVlc3Rpb25zIGxpa2UgIldoZXJlIHdhcyB0aGlzIG1ldGhvZCBjYWxsZWQiLCAiV2h5IGlzIGV4YWN0bHkgdGhpcwppbXBsZW1lbnRhdGlvbiBvZiB0aGUgbWV0aG9kIGNhbGxlZCIgZm9yIHZpcnR1YWwgY2FsbHMuIFRoZSBzZWFyY2ggZXhwYW5kcyB0aGUKZ3JhcGggcmVjdXJzaXZlbHkgdW50aWwgcmVhY2hpbmcgdGhlIGVudHJ5LXBvaW50IGludG8gdGhlIGFwcGxpY2F0aW9uLgoKPGltZyBzcmM9Ii9kYXNoYm9hcmQvZG9jcy9wb2ludHMtdG8tZXhwbG9yYXRpb24ucG5nIiBhbHQ9InBvaW50cy10by1leHBsb3JlciIgd2lkdGg9Ijg1MCIgaGVpZ2h0PTUwMC8+CgpHZW5lcmF0ZWQgUG9pbnRzLXRvIEV4cGxvcmF0aW9uIGRpYWdyYW0gY29udGFpbiBhIGxvdCBvZiBkYXRhIGFuZCAqKnNob3VsZCBiZSBhdm9pZGVkIGlmIG5vdCBuZWNjZXNzYXJ5KiouClBsZWFzZSBub3RlIHRoYXQgRGFzaGJvYXJkIGlzICoqbGltaXRlZCBieSBicm93c2VyIG1lbW9yeSBjYXBhYmlsaXRpZXMqKi4KCkhvdyB0byBhY2Nlc3MgUG9pbnRzLXRvIEV4cGxvcmVyIGNvbXBvbmVudCBzZWUgIioqQ29kZSBTaXplIEJyZWFrZG93bioqIiBoZWxwIHBhZ2UuCgojIyBQb2ludFRvLVNvdXJjZUxpbmUgKFtWUyBDb2RlIGV4dGVuc2lvbl0oaHR0cHM6Ly9tYXJrZXRwbGFjZS52aXN1YWxzdHVkaW8uY29tL2l0ZW1zP2l0ZW1OYW1lPW9yYWNsZS1sYWJzLWdyYWFsdm0uZGFzaGJvYXJkKSkKClRoZSBQb2ludFRvLVNvdXJjZUxpbmUgY29tcG9uZW50IGFsbG93cyBhIHVzZXIgdG8gcXVpY2tseSBuYXZpZ2F0ZSB0byB0aGUgc291cmNlIGxpbmUgZnJvbSBQb2ludHMtdG8gRXhwbG9yYXRpb24uCkV2ZXJ5IG5vZGUgd2l0aCBzb3VyY2UgbGluZSBpbmZvcm1hdGlvbiwgcHJvbXB0cyB0byBvcGVuIChgLmdkc2ApIGZpbGUgd2hlbiBhbHJlYWR5IGV4cGxvcmVkLgpXaGVuIG9wZW5lZCBpbiBWUyBDb2RlIHdpdGggaW5zdGFsbGVkIFBvaW50VG8tU291cmNlTGluZSBleHRlbnNpb24sCnRoaXMgdHJpZXMgdG8gbmF2aWdhdGUgdG8gYSByZXNwZWN0ZnVsIHNvdXJjZSBsaW5lIGluIHRoZSBvcGVuZWQgd29ya3NwYWNlLgoKPGltZyBzcmM9Ii9kYXNoYm9hcmQvZG9jcy9wb2ludHRvLXNvdXJjZWxpbmUucG5nIiBhbHQ9InBvaW50dG8tc291cmNlbGluZSIgd2lkdGg9Ijg1MCIgLz4K`,
	}
</script>    
  <style>
    #beta_tag {
      color: #cc371c;
    }
  </style>
</head>

<body class="oj-web-applayout-body">
  <div id="globalBody" class="oj-web-applayout-page">
    <header role="banner" class="oj-web-applayout-header">
      <div class="oj-flex-bar oj-sm-align-items-center">
        <!-- Offcanvas launch button -->
        <div class="oj-flex-bar-start">
          <oj-button display='icons' chroming='borderless' on-oj-action='[[toggleNavigation]]' title="Application Navigation">
            <span slot='startIcon' class='oj-ux-ico-menu'></span>
            Application Navigation
          </oj-button>
        </div>
        <div class="oj-flex-bar-middle oj-sm-align-items-center">
          <h1 class="oj-sm-only-hide oj-web-applayout-header-title" title="Application Name">
            <oj-bind-text value="[[appName]]"></oj-bind-text>
          </h1>
          <h1 class="oj-sm-only-hide oj-web-applayout-header-title" id="beta_tag"><sup>Beta</sup></h1>
        </div>
        <img src="css/images/oracle_logo.png" alt="Oracle Logo" title="Oracle Logo" class="oj-flex-bar-end"/>
      </div>
    </header>
    <div role="main" class="oj-offcanvas-outer-wrapper oj-web-applayout-content oj-sm-padding-0">
      <!-- Offcanvas Navigation Drawer -->
      <div id="navigationDrawer" class="oj-offcanvas-start oj-panel oj-contrast-background oj-contrast-marker" style="width: 250px">
        <div role="navigation" class="oj-web-applayout-max-width oj-web-applayout-navbar">
          <oj-navigation-list id="navList"
                              drill-mode="collapsible"
                              data="[[navDataProvider]]"
                              selection="{{selection}}"
                              item.selectable="[[itemOnly]]">
            <template slot="itemTemplate" data-oj-as="item">
              <oj-bind-if test="[[item.data.detail]]">
                <li :id="[[item.data.path]]">
                  <a href="#">
                    <oj-bind-if test="[[item.data.detail.iconClass]]">
                      <span :class="[[item.data.detail.iconClass]]"></span>
                    </oj-bind-if>
                    <oj-bind-text value="[[item.data.detail.label]]"></oj-bind-text>
                  </a>
                </li>
              </oj-bind-if>
            </template>
          </oj-navigation-list>
        </div>
      </div>
      <!-- Main Content -->
      <oj-module id="main" config="[[moduleAdapter.koObservableConfig]]">
      </oj-module>  
    </div>
    <footer class="oj-web-applayout-footer" role="contentinfo">
      <div class="oj-web-applayout-footer-item oj-text-secondary-color oj-text-sm">
        Copyright © 2020, 2021, Oracle and/or its affiliates. All rights reserved.
      </div>
    </footer>
  </div>

  <script>/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.3.6 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, https://github.com/requirejs/requirejs/blob/master/LICENSE
 */
//Not using strict: uneven strict support in browsers, #392, and causes
//problems with requirejs.exec()/transpiler plugins that may not be strict.
/*jslint regexp: true, nomen: true, sloppy: true */
/*global window, navigator, document, importScripts, setTimeout, opera */

var requirejs, require, define;
(function (global, setTimeout) {
    var req, s, head, baseElement, dataMain, src,
        interactiveScript, currentlyAddingScript, mainScript, subPath,
        version = '2.3.6',
        commentRegExp = /\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/mg,
        cjsRequireRegExp = /[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,
        jsSuffixRegExp = /\.js$/,
        currDirRegExp = /^\.\//,
        op = Object.prototype,
        ostring = op.toString,
        hasOwn = op.hasOwnProperty,
        isBrowser = !!(typeof window !== 'undefined' && typeof navigator !== 'undefined' && window.document),
        isWebWorker = !isBrowser && typeof importScripts !== 'undefined',
        //PS3 indicates loaded and complete, but need to wait for complete
        //specifically. Sequence is 'loading', 'loaded', execution,
        // then 'complete'. The UA check is unfortunate, but not sure how
        //to feature test w/o causing perf issues.
        readyRegExp = isBrowser && navigator.platform === 'PLAYSTATION 3' ?
                      /^complete$/ : /^(complete|loaded)$/,
        defContextName = '_',
        //Oh the tragedy, detecting opera. See the usage of isOpera for reason.
        isOpera = typeof opera !== 'undefined' && opera.toString() === '[object Opera]',
        contexts = {},
        cfg = {},
        globalDefQueue = [],
        useInteractive = false;

    //Could match something like ')//comment', do not lose the prefix to comment.
    function commentReplace(match, singlePrefix) {
        return singlePrefix || '';
    }

    function isFunction(it) {
        return ostring.call(it) === '[object Function]';
    }

    function isArray(it) {
        return ostring.call(it) === '[object Array]';
    }

    /**
     * Helper function for iterating over an array. If the func returns
     * a true value, it will break out of the loop.
     */
    function each(ary, func) {
        if (ary) {
            var i;
            for (i = 0; i < ary.length; i += 1) {
                if (ary[i] && func(ary[i], i, ary)) {
                    break;
                }
            }
        }
    }

    /**
     * Helper function for iterating over an array backwards. If the func
     * returns a true value, it will break out of the loop.
     */
    function eachReverse(ary, func) {
        if (ary) {
            var i;
            for (i = ary.length - 1; i > -1; i -= 1) {
                if (ary[i] && func(ary[i], i, ary)) {
                    break;
                }
            }
        }
    }

    function hasProp(obj, prop) {
        return hasOwn.call(obj, prop);
    }

    function getOwn(obj, prop) {
        return hasProp(obj, prop) && obj[prop];
    }

    /**
     * Cycles over properties in an object and calls a function for each
     * property value. If the function returns a truthy value, then the
     * iteration is stopped.
     */
    function eachProp(obj, func) {
        var prop;
        for (prop in obj) {
            if (hasProp(obj, prop)) {
                if (func(obj[prop], prop)) {
                    break;
                }
            }
        }
    }

    /**
     * Simple function to mix in properties from source into target,
     * but only if target does not already have a property of the same name.
     */
    function mixin(target, source, force, deepStringMixin) {
        if (source) {
            eachProp(source, function (value, prop) {
                if (force || !hasProp(target, prop)) {
                    if (deepStringMixin && typeof value === 'object' && value &&
                        !isArray(value) && !isFunction(value) &&
                        !(value instanceof RegExp)) {

                        if (!target[prop]) {
                            target[prop] = {};
                        }
                        mixin(target[prop], value, force, deepStringMixin);
                    } else {
                        target[prop] = value;
                    }
                }
            });
        }
        return target;
    }

    //Similar to Function.prototype.bind, but the 'this' object is specified
    //first, since it is easier to read/figure out what 'this' will be.
    function bind(obj, fn) {
        return function () {
            return fn.apply(obj, arguments);
        };
    }

    function scripts() {
        return document.getElementsByTagName('script');
    }

    function defaultOnError(err) {
        throw err;
    }

    //Allow getting a global that is expressed in
    //dot notation, like 'a.b.c'.
    function getGlobal(value) {
        if (!value) {
            return value;
        }
        var g = global;
        each(value.split('.'), function (part) {
            g = g[part];
        });
        return g;
    }

    /**
     * Constructs an error with a pointer to an URL with more information.
     * @param {String} id the error ID that maps to an ID on a web page.
     * @param {String} message human readable error.
     * @param {Error} [err] the original error, if there is one.
     *
     * @returns {Error}
     */
    function makeError(id, msg, err, requireModules) {
        var e = new Error(msg + '\nhttps://requirejs.org/docs/errors.html#' + id);
        e.requireType = id;
        e.requireModules = requireModules;
        if (err) {
            e.originalError = err;
        }
        return e;
    }

    if (typeof define !== 'undefined') {
        //If a define is already in play via another AMD loader,
        //do not overwrite.
        return;
    }

    if (typeof requirejs !== 'undefined') {
        if (isFunction(requirejs)) {
            //Do not overwrite an existing requirejs instance.
            return;
        }
        cfg = requirejs;
        requirejs = undefined;
    }

    //Allow for a require config object
    if (typeof require !== 'undefined' && !isFunction(require)) {
        //assume it is a config object.
        cfg = require;
        require = undefined;
    }

    function newContext(contextName) {
        var inCheckLoaded, Module, context, handlers,
            checkLoadedTimeoutId,
            config = {
                //Defaults. Do not set a default for map
                //config to speed up normalize(), which
                //will run faster if there is no default.
                waitSeconds: 7,
                baseUrl: './',
                paths: {},
                bundles: {},
                pkgs: {},
                shim: {},
                config: {}
            },
            registry = {},
            //registry of just enabled modules, to speed
            //cycle breaking code when lots of modules
            //are registered, but not activated.
            enabledRegistry = {},
            undefEvents = {},
            defQueue = [],
            defined = {},
            urlFetched = {},
            bundlesMap = {},
            requireCounter = 1,
            unnormalizedCounter = 1;

        /**
         * Trims the . and .. from an array of path segments.
         * It will keep a leading path segment if a .. will become
         * the first path segment, to help with module name lookups,
         * which act like paths, but can be remapped. But the end result,
         * all paths that use this function should look normalized.
         * NOTE: this method MODIFIES the input array.
         * @param {Array} ary the array of path segments.
         */
        function trimDots(ary) {
            var i, part;
            for (i = 0; i < ary.length; i++) {
                part = ary[i];
                if (part === '.') {
                    ary.splice(i, 1);
                    i -= 1;
                } else if (part === '..') {
                    // If at the start, or previous value is still ..,
                    // keep them so that when converted to a path it may
                    // still work when converted to a path, even though
                    // as an ID it is less than ideal. In larger point
                    // releases, may be better to just kick out an error.
                    if (i === 0 || (i === 1 && ary[2] === '..') || ary[i - 1] === '..') {
                        continue;
                    } else if (i > 0) {
                        ary.splice(i - 1, 2);
                        i -= 2;
                    }
                }
            }
        }

        /**
         * Given a relative module name, like ./something, normalize it to
         * a real name that can be mapped to a path.
         * @param {String} name the relative name
         * @param {String} baseName a real name that the name arg is relative
         * to.
         * @param {Boolean} applyMap apply the map config to the value. Should
         * only be done if this normalization is for a dependency ID.
         * @returns {String} normalized name
         */
        function normalize(name, baseName, applyMap) {
            var pkgMain, mapValue, nameParts, i, j, nameSegment, lastIndex,
                foundMap, foundI, foundStarMap, starI, normalizedBaseParts,
                baseParts = (baseName && baseName.split('/')),
                map = config.map,
                starMap = map && map['*'];

            //Adjust any relative paths.
            if (name) {
                name = name.split('/');
                lastIndex = name.length - 1;

                // If wanting node ID compatibility, strip .js from end
                // of IDs. Have to do this here, and not in nameToUrl
                // because node allows either .js or non .js to map
                // to same file.
                if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {
                    name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');
                }

                // Starts with a '.' so need the baseName
                if (name[0].charAt(0) === '.' && baseParts) {
                    //Convert baseName to array, and lop off the last part,
                    //so that . matches that 'directory' and not name of the baseName's
                    //module. For instance, baseName of 'one/two/three', maps to
                    //'one/two/three.js', but we want the directory, 'one/two' for
                    //this normalization.
                    normalizedBaseParts = baseParts.slice(0, baseParts.length - 1);
                    name = normalizedBaseParts.concat(name);
                }

                trimDots(name);
                name = name.join('/');
            }

            //Apply map config if available.
            if (applyMap && map && (baseParts || starMap)) {
                nameParts = name.split('/');

                outerLoop: for (i = nameParts.length; i > 0; i -= 1) {
                    nameSegment = nameParts.slice(0, i).join('/');

                    if (baseParts) {
                        //Find the longest baseName segment match in the config.
                        //So, do joins on the biggest to smallest lengths of baseParts.
                        for (j = baseParts.length; j > 0; j -= 1) {
                            mapValue = getOwn(map, baseParts.slice(0, j).join('/'));

                            //baseName segment has config, find if it has one for
                            //this name.
                            if (mapValue) {
                                mapValue = getOwn(mapValue, nameSegment);
                                if (mapValue) {
                                    //Match, update name to the new value.
                                    foundMap = mapValue;
                                    foundI = i;
                                    break outerLoop;
                                }
                            }
                        }
                    }

                    //Check for a star map match, but just hold on to it,
                    //if there is a shorter segment match later in a matching
                    //config, then favor over this star map.
                    if (!foundStarMap && starMap && getOwn(starMap, nameSegment)) {
                        foundStarMap = getOwn(starMap, nameSegment);
                        starI = i;
                    }
                }

                if (!foundMap && foundStarMap) {
                    foundMap = foundStarMap;
                    foundI = starI;
                }

                if (foundMap) {
                    nameParts.splice(0, foundI, foundMap);
                    name = nameParts.join('/');
                }
            }

            // If the name points to a package's name, use
            // the package main instead.
            pkgMain = getOwn(config.pkgs, name);

            return pkgMain ? pkgMain : name;
        }

        function removeScript(name) {
            if (isBrowser) {
                each(scripts(), function (scriptNode) {
                    if (scriptNode.getAttribute('data-requiremodule') === name &&
                            scriptNode.getAttribute('data-requirecontext') === context.contextName) {
                        scriptNode.parentNode.removeChild(scriptNode);
                        return true;
                    }
                });
            }
        }

        function hasPathFallback(id) {
            var pathConfig = getOwn(config.paths, id);
            if (pathConfig && isArray(pathConfig) && pathConfig.length > 1) {
                //Pop off the first array value, since it failed, and
                //retry
                pathConfig.shift();
                context.require.undef(id);

                //Custom require that does not do map translation, since
                //ID is "absolute", already mapped/resolved.
                context.makeRequire(null, {
                    skipMap: true
                })([id]);

                return true;
            }
        }

        //Turns a plugin!resource to [plugin, resource]
        //with the plugin being undefined if the name
        //did not have a plugin prefix.
        function splitPrefix(name) {
            var prefix,
                index = name ? name.indexOf('!') : -1;
            if (index > -1) {
                prefix = name.substring(0, index);
                name = name.substring(index + 1, name.length);
            }
            return [prefix, name];
        }

        /**
         * Creates a module mapping that includes plugin prefix, module
         * name, and path. If parentModuleMap is provided it will
         * also normalize the name via require.normalize()
         *
         * @param {String} name the module name
         * @param {String} [parentModuleMap] parent module map
         * for the module name, used to resolve relative names.
         * @param {Boolean} isNormalized: is the ID already normalized.
         * This is true if this call is done for a define() module ID.
         * @param {Boolean} applyMap: apply the map config to the ID.
         * Should only be true if this map is for a dependency.
         *
         * @returns {Object}
         */
        function makeModuleMap(name, parentModuleMap, isNormalized, applyMap) {
            var url, pluginModule, suffix, nameParts,
                prefix = null,
                parentName = parentModuleMap ? parentModuleMap.name : null,
                originalName = name,
                isDefine = true,
                normalizedName = '';

            //If no name, then it means it is a require call, generate an
            //internal name.
            if (!name) {
                isDefine = false;
                name = '_@r' + (requireCounter += 1);
            }

            nameParts = splitPrefix(name);
            prefix = nameParts[0];
            name = nameParts[1];

            if (prefix) {
                prefix = normalize(prefix, parentName, applyMap);
                pluginModule = getOwn(defined, prefix);
            }

            //Account for relative paths if there is a base name.
            if (name) {
                if (prefix) {
                    if (isNormalized) {
                        normalizedName = name;
                    } else if (pluginModule && pluginModule.normalize) {
                        //Plugin is loaded, use its normalize method.
                        normalizedName = pluginModule.normalize(name, function (name) {
                            return normalize(name, parentName, applyMap);
                        });
                    } else {
                        // If nested plugin references, then do not try to
                        // normalize, as it will not normalize correctly. This
                        // places a restriction on resourceIds, and the longer
                        // term solution is not to normalize until plugins are
                        // loaded and all normalizations to allow for async
                        // loading of a loader plugin. But for now, fixes the
                        // common uses. Details in #1131
                        normalizedName = name.indexOf('!') === -1 ?
                                         normalize(name, parentName, applyMap) :
                                         name;
                    }
                } else {
                    //A regular module.
                    normalizedName = normalize(name, parentName, applyMap);

                    //Normalized name may be a plugin ID due to map config
                    //application in normalize. The map config values must
                    //already be normalized, so do not need to redo that part.
                    nameParts = splitPrefix(normalizedName);
                    prefix = nameParts[0];
                    normalizedName = nameParts[1];
                    isNormalized = true;

                    url = context.nameToUrl(normalizedName);
                }
            }

            //If the id is a plugin id that cannot be determined if it needs
            //normalization, stamp it with a unique ID so two matching relative
            //ids that may conflict can be separate.
            suffix = prefix && !pluginModule && !isNormalized ?
                     '_unnormalized' + (unnormalizedCounter += 1) :
                     '';

            return {
                prefix: prefix,
                name: normalizedName,
                parentMap: parentModuleMap,
                unnormalized: !!suffix,
                url: url,
                originalName: originalName,
                isDefine: isDefine,
                id: (prefix ?
                        prefix + '!' + normalizedName :
                        normalizedName) + suffix
            };
        }

        function getModule(depMap) {
            var id = depMap.id,
                mod = getOwn(registry, id);

            if (!mod) {
                mod = registry[id] = new context.Module(depMap);
            }

            return mod;
        }

        function on(depMap, name, fn) {
            var id = depMap.id,
                mod = getOwn(registry, id);

            if (hasProp(defined, id) &&
                    (!mod || mod.defineEmitComplete)) {
                if (name === 'defined') {
                    fn(defined[id]);
                }
            } else {
                mod = getModule(depMap);
                if (mod.error && name === 'error') {
                    fn(mod.error);
                } else {
                    mod.on(name, fn);
                }
            }
        }

        function onError(err, errback) {
            var ids = err.requireModules,
                notified = false;

            if (errback) {
                errback(err);
            } else {
                each(ids, function (id) {
                    var mod = getOwn(registry, id);
                    if (mod) {
                        //Set error on module, so it skips timeout checks.
                        mod.error = err;
                        if (mod.events.error) {
                            notified = true;
                            mod.emit('error', err);
                        }
                    }
                });

                if (!notified) {
                    req.onError(err);
                }
            }
        }

        /**
         * Internal method to transfer globalQueue items to this context's
         * defQueue.
         */
        function takeGlobalQueue() {
            //Push all the globalDefQueue items into the context's defQueue
            if (globalDefQueue.length) {
                each(globalDefQueue, function(queueItem) {
                    var id = queueItem[0];
                    if (typeof id === 'string') {
                        context.defQueueMap[id] = true;
                    }
                    defQueue.push(queueItem);
                });
                globalDefQueue = [];
            }
        }

        handlers = {
            'require': function (mod) {
                if (mod.require) {
                    return mod.require;
                } else {
                    return (mod.require = context.makeRequire(mod.map));
                }
            },
            'exports': function (mod) {
                mod.usingExports = true;
                if (mod.map.isDefine) {
                    if (mod.exports) {
                        return (defined[mod.map.id] = mod.exports);
                    } else {
                        return (mod.exports = defined[mod.map.id] = {});
                    }
                }
            },
            'module': function (mod) {
                if (mod.module) {
                    return mod.module;
                } else {
                    return (mod.module = {
                        id: mod.map.id,
                        uri: mod.map.url,
                        config: function () {
                            return getOwn(config.config, mod.map.id) || {};
                        },
                        exports: mod.exports || (mod.exports = {})
                    });
                }
            }
        };

        function cleanRegistry(id) {
            //Clean up machinery used for waiting modules.
            delete registry[id];
            delete enabledRegistry[id];
        }

        function breakCycle(mod, traced, processed) {
            var id = mod.map.id;

            if (mod.error) {
                mod.emit('error', mod.error);
            } else {
                traced[id] = true;
                each(mod.depMaps, function (depMap, i) {
                    var depId = depMap.id,
                        dep = getOwn(registry, depId);

                    //Only force things that have not completed
                    //being defined, so still in the registry,
                    //and only if it has not been matched up
                    //in the module already.
                    if (dep && !mod.depMatched[i] && !processed[depId]) {
                        if (getOwn(traced, depId)) {
                            mod.defineDep(i, defined[depId]);
                            mod.check(); //pass false?
                        } else {
                            breakCycle(dep, traced, processed);
                        }
                    }
                });
                processed[id] = true;
            }
        }

        function checkLoaded() {
            var err, usingPathFallback,
                waitInterval = config.waitSeconds * 1000,
                //It is possible to disable the wait interval by using waitSeconds of 0.
                expired = waitInterval && (context.startTime + waitInterval) < new Date().getTime(),
                noLoads = [],
                reqCalls = [],
                stillLoading = false,
                needCycleCheck = true;

            //Do not bother if this call was a result of a cycle break.
            if (inCheckLoaded) {
                return;
            }

            inCheckLoaded = true;

            //Figure out the state of all the modules.
            eachProp(enabledRegistry, function (mod) {
                var map = mod.map,
                    modId = map.id;

                //Skip things that are not enabled or in error state.
                if (!mod.enabled) {
                    return;
                }

                if (!map.isDefine) {
                    reqCalls.push(mod);
                }

                if (!mod.error) {
                    //If the module should be executed, and it has not
                    //been inited and time is up, remember it.
                    if (!mod.inited && expired) {
                        if (hasPathFallback(modId)) {
                            usingPathFallback = true;
                            stillLoading = true;
                        } else {
                            noLoads.push(modId);
                            removeScript(modId);
                        }
                    } else if (!mod.inited && mod.fetched && map.isDefine) {
                        stillLoading = true;
                        if (!map.prefix) {
                            //No reason to keep looking for unfinished
                            //loading. If the only stillLoading is a
                            //plugin resource though, keep going,
                            //because it may be that a plugin resource
                            //is waiting on a non-plugin cycle.
                            return (needCycleCheck = false);
                        }
                    }
                }
            });

            if (expired && noLoads.length) {
                //If wait time expired, throw error of unloaded modules.
                err = makeError('timeout', 'Load timeout for modules: ' + noLoads, null, noLoads);
                err.contextName = context.contextName;
                return onError(err);
            }

            //Not expired, check for a cycle.
            if (needCycleCheck) {
                each(reqCalls, function (mod) {
                    breakCycle(mod, {}, {});
                });
            }

            //If still waiting on loads, and the waiting load is something
            //other than a plugin resource, or there are still outstanding
            //scripts, then just try back later.
            if ((!expired || usingPathFallback) && stillLoading) {
                //Something is still waiting to load. Wait for it, but only
                //if a timeout is not already in effect.
                if ((isBrowser || isWebWorker) && !checkLoadedTimeoutId) {
                    checkLoadedTimeoutId = setTimeout(function () {
                        checkLoadedTimeoutId = 0;
                        checkLoaded();
                    }, 50);
                }
            }

            inCheckLoaded = false;
        }

        Module = function (map) {
            this.events = getOwn(undefEvents, map.id) || {};
            this.map = map;
            this.shim = getOwn(config.shim, map.id);
            this.depExports = [];
            this.depMaps = [];
            this.depMatched = [];
            this.pluginMaps = {};
            this.depCount = 0;

            /* this.exports this.factory
               this.depMaps = [],
               this.enabled, this.fetched
            */
        };

        Module.prototype = {
            init: function (depMaps, factory, errback, options) {
                options = options || {};

                //Do not do more inits if already done. Can happen if there
                //are multiple define calls for the same module. That is not
                //a normal, common case, but it is also not unexpected.
                if (this.inited) {
                    return;
                }

                this.factory = factory;

                if (errback) {
                    //Register for errors on this module.
                    this.on('error', errback);
                } else if (this.events.error) {
                    //If no errback already, but there are error listeners
                    //on this module, set up an errback to pass to the deps.
                    errback = bind(this, function (err) {
                        this.emit('error', err);
                    });
                }

                //Do a copy of the dependency array, so that
                //source inputs are not modified. For example
                //"shim" deps are passed in here directly, and
                //doing a direct modification of the depMaps array
                //would affect that config.
                this.depMaps = depMaps && depMaps.slice(0);

                this.errback = errback;

                //Indicate this module has be initialized
                this.inited = true;

                this.ignore = options.ignore;

                //Could have option to init this module in enabled mode,
                //or could have been previously marked as enabled. However,
                //the dependencies are not known until init is called. So
                //if enabled previously, now trigger dependencies as enabled.
                if (options.enabled || this.enabled) {
                    //Enable this module and dependencies.
                    //Will call this.check()
                    this.enable();
                } else {
                    this.check();
                }
            },

            defineDep: function (i, depExports) {
                //Because of cycles, defined callback for a given
                //export can be called more than once.
                if (!this.depMatched[i]) {
                    this.depMatched[i] = true;
                    this.depCount -= 1;
                    this.depExports[i] = depExports;
                }
            },

            fetch: function () {
                if (this.fetched) {
                    return;
                }
                this.fetched = true;

                context.startTime = (new Date()).getTime();

                var map = this.map;

                //If the manager is for a plugin managed resource,
                //ask the plugin to load it now.
                if (this.shim) {
                    context.makeRequire(this.map, {
                        enableBuildCallback: true
                    })(this.shim.deps || [], bind(this, function () {
                        return map.prefix ? this.callPlugin() : this.load();
                    }));
                } else {
                    //Regular dependency.
                    return map.prefix ? this.callPlugin() : this.load();
                }
            },

            load: function () {
                var url = this.map.url;

                //Regular dependency.
                if (!urlFetched[url]) {
                    urlFetched[url] = true;
                    context.load(this.map.id, url);
                }
            },

            /**
             * Checks if the module is ready to define itself, and if so,
             * define it.
             */
            check: function () {
                if (!this.enabled || this.enabling) {
                    return;
                }

                var err, cjsModule,
                    id = this.map.id,
                    depExports = this.depExports,
                    exports = this.exports,
                    factory = this.factory;

                if (!this.inited) {
                    // Only fetch if not already in the defQueue.
                    if (!hasProp(context.defQueueMap, id)) {
                        this.fetch();
                    }
                } else if (this.error) {
                    this.emit('error', this.error);
                } else if (!this.defining) {
                    //The factory could trigger another require call
                    //that would result in checking this module to
                    //define itself again. If already in the process
                    //of doing that, skip this work.
                    this.defining = true;

                    if (this.depCount < 1 && !this.defined) {
                        if (isFunction(factory)) {
                            //If there is an error listener, favor passing
                            //to that instead of throwing an error. However,
                            //only do it for define()'d  modules. require
                            //errbacks should not be called for failures in
                            //their callbacks (#699). However if a global
                            //onError is set, use that.
                            if ((this.events.error && this.map.isDefine) ||
                                req.onError !== defaultOnError) {
                                try {
                                    exports = context.execCb(id, factory, depExports, exports);
                                } catch (e) {
                                    err = e;
                                }
                            } else {
                                exports = context.execCb(id, factory, depExports, exports);
                            }

                            // Favor return value over exports. If node/cjs in play,
                            // then will not have a return value anyway. Favor
                            // module.exports assignment over exports object.
                            if (this.map.isDefine && exports === undefined) {
                                cjsModule = this.module;
                                if (cjsModule) {
                                    exports = cjsModule.exports;
                                } else if (this.usingExports) {
                                    //exports already set the defined value.
                                    exports = this.exports;
                                }
                            }

                            if (err) {
                                err.requireMap = this.map;
                                err.requireModules = this.map.isDefine ? [this.map.id] : null;
                                err.requireType = this.map.isDefine ? 'define' : 'require';
                                return onError((this.error = err));
                            }

                        } else {
                            //Just a literal value
                            exports = factory;
                        }

                        this.exports = exports;

                        if (this.map.isDefine && !this.ignore) {
                            defined[id] = exports;

                            if (req.onResourceLoad) {
                                var resLoadMaps = [];
                                each(this.depMaps, function (depMap) {
                                    resLoadMaps.push(depMap.normalizedMap || depMap);
                                });
                                req.onResourceLoad(context, this.map, resLoadMaps);
                            }
                        }

                        //Clean up
                        cleanRegistry(id);

                        this.defined = true;
                    }

                    //Finished the define stage. Allow calling check again
                    //to allow define notifications below in the case of a
                    //cycle.
                    this.defining = false;

                    if (this.defined && !this.defineEmitted) {
                        this.defineEmitted = true;
                        this.emit('defined', this.exports);
                        this.defineEmitComplete = true;
                    }

                }
            },

            callPlugin: function () {
                var map = this.map,
                    id = map.id,
                    //Map already normalized the prefix.
                    pluginMap = makeModuleMap(map.prefix);

                //Mark this as a dependency for this plugin, so it
                //can be traced for cycles.
                this.depMaps.push(pluginMap);

                on(pluginMap, 'defined', bind(this, function (plugin) {
                    var load, normalizedMap, normalizedMod,
                        bundleId = getOwn(bundlesMap, this.map.id),
                        name = this.map.name,
                        parentName = this.map.parentMap ? this.map.parentMap.name : null,
                        localRequire = context.makeRequire(map.parentMap, {
                            enableBuildCallback: true
                        });

                    //If current map is not normalized, wait for that
                    //normalized name to load instead of continuing.
                    if (this.map.unnormalized) {
                        //Normalize the ID if the plugin allows it.
                        if (plugin.normalize) {
                            name = plugin.normalize(name, function (name) {
                                return normalize(name, parentName, true);
                            }) || '';
                        }

                        //prefix and name should already be normalized, no need
                        //for applying map config again either.
                        normalizedMap = makeModuleMap(map.prefix + '!' + name,
                                                      this.map.parentMap,
                                                      true);
                        on(normalizedMap,
                            'defined', bind(this, function (value) {
                                this.map.normalizedMap = normalizedMap;
                                this.init([], function () { return value; }, null, {
                                    enabled: true,
                                    ignore: true
                                });
                            }));

                        normalizedMod = getOwn(registry, normalizedMap.id);
                        if (normalizedMod) {
                            //Mark this as a dependency for this plugin, so it
                            //can be traced for cycles.
                            this.depMaps.push(normalizedMap);

                            if (this.events.error) {
                                normalizedMod.on('error', bind(this, function (err) {
                                    this.emit('error', err);
                                }));
                            }
                            normalizedMod.enable();
                        }

                        return;
                    }

                    //If a paths config, then just load that file instead to
                    //resolve the plugin, as it is built into that paths layer.
                    if (bundleId) {
                        this.map.url = context.nameToUrl(bundleId);
                        this.load();
                        return;
                    }

                    load = bind(this, function (value) {
                        this.init([], function () { return value; }, null, {
                            enabled: true
                        });
                    });

                    load.error = bind(this, function (err) {
                        this.inited = true;
                        this.error = err;
                        err.requireModules = [id];

                        //Remove temp unnormalized modules for this module,
                        //since they will never be resolved otherwise now.
                        eachProp(registry, function (mod) {
                            if (mod.map.id.indexOf(id + '_unnormalized') === 0) {
                                cleanRegistry(mod.map.id);
                            }
                        });

                        onError(err);
                    });

                    //Allow plugins to load other code without having to know the
                    //context or how to 'complete' the load.
                    load.fromText = bind(this, function (text, textAlt) {
                        /*jslint evil: true */
                        var moduleName = map.name,
                            moduleMap = makeModuleMap(moduleName),
                            hasInteractive = useInteractive;

                        //As of 2.1.0, support just passing the text, to reinforce
                        //fromText only being called once per resource. Still
                        //support old style of passing moduleName but discard
                        //that moduleName in favor of the internal ref.
                        if (textAlt) {
                            text = textAlt;
                        }

                        //Turn off interactive script matching for IE for any define
                        //calls in the text, then turn it back on at the end.
                        if (hasInteractive) {
                            useInteractive = false;
                        }

                        //Prime the system by creating a module instance for
                        //it.
                        getModule(moduleMap);

                        //Transfer any config to this other module.
                        if (hasProp(config.config, id)) {
                            config.config[moduleName] = config.config[id];
                        }

                        try {
                            req.exec(text);
                        } catch (e) {
                            return onError(makeError('fromtexteval',
                                             'fromText eval for ' + id +
                                            ' failed: ' + e,
                                             e,
                                             [id]));
                        }

                        if (hasInteractive) {
                            useInteractive = true;
                        }

                        //Mark this as a dependency for the plugin
                        //resource
                        this.depMaps.push(moduleMap);

                        //Support anonymous modules.
                        context.completeLoad(moduleName);

                        //Bind the value of that module to the value for this
                        //resource ID.
                        localRequire([moduleName], load);
                    });

                    //Use parentName here since the plugin's name is not reliable,
                    //could be some weird string with no path that actually wants to
                    //reference the parentName's path.
                    plugin.load(map.name, localRequire, load, config);
                }));

                context.enable(pluginMap, this);
                this.pluginMaps[pluginMap.id] = pluginMap;
            },

            enable: function () {
                enabledRegistry[this.map.id] = this;
                this.enabled = true;

                //Set flag mentioning that the module is enabling,
                //so that immediate calls to the defined callbacks
                //for dependencies do not trigger inadvertent load
                //with the depCount still being zero.
                this.enabling = true;

                //Enable each dependency
                each(this.depMaps, bind(this, function (depMap, i) {
                    var id, mod, handler;

                    if (typeof depMap === 'string') {
                        //Dependency needs to be converted to a depMap
                        //and wired up to this module.
                        depMap = makeModuleMap(depMap,
                                               (this.map.isDefine ? this.map : this.map.parentMap),
                                               false,
                                               !this.skipMap);
                        this.depMaps[i] = depMap;

                        handler = getOwn(handlers, depMap.id);

                        if (handler) {
                            this.depExports[i] = handler(this);
                            return;
                        }

                        this.depCount += 1;

                        on(depMap, 'defined', bind(this, function (depExports) {
                            if (this.undefed) {
                                return;
                            }
                            this.defineDep(i, depExports);
                            this.check();
                        }));

                        if (this.errback) {
                            on(depMap, 'error', bind(this, this.errback));
                        } else if (this.events.error) {
                            // No direct errback on this module, but something
                            // else is listening for errors, so be sure to
                            // propagate the error correctly.
                            on(depMap, 'error', bind(this, function(err) {
                                this.emit('error', err);
                            }));
                        }
                    }

                    id = depMap.id;
                    mod = registry[id];

                    //Skip special modules like 'require', 'exports', 'module'
                    //Also, don't call enable if it is already enabled,
                    //important in circular dependency cases.
                    if (!hasProp(handlers, id) && mod && !mod.enabled) {
                        context.enable(depMap, this);
                    }
                }));

                //Enable each plugin that is used in
                //a dependency
                eachProp(this.pluginMaps, bind(this, function (pluginMap) {
                    var mod = getOwn(registry, pluginMap.id);
                    if (mod && !mod.enabled) {
                        context.enable(pluginMap, this);
                    }
                }));

                this.enabling = false;

                this.check();
            },

            on: function (name, cb) {
                var cbs = this.events[name];
                if (!cbs) {
                    cbs = this.events[name] = [];
                }
                cbs.push(cb);
            },

            emit: function (name, evt) {
                each(this.events[name], function (cb) {
                    cb(evt);
                });
                if (name === 'error') {
                    //Now that the error handler was triggered, remove
                    //the listeners, since this broken Module instance
                    //can stay around for a while in the registry.
                    delete this.events[name];
                }
            }
        };

        function callGetModule(args) {
            //Skip modules already defined.
            if (!hasProp(defined, args[0])) {
                getModule(makeModuleMap(args[0], null, true)).init(args[1], args[2]);
            }
        }

        function removeListener(node, func, name, ieName) {
            //Favor detachEvent because of IE9
            //issue, see attachEvent/addEventListener comment elsewhere
            //in this file.
            if (node.detachEvent && !isOpera) {
                //Probably IE. If not it will throw an error, which will be
                //useful to know.
                if (ieName) {
                    node.detachEvent(ieName, func);
                }
            } else {
                node.removeEventListener(name, func, false);
            }
        }

        /**
         * Given an event from a script node, get the requirejs info from it,
         * and then removes the event listeners on the node.
         * @param {Event} evt
         * @returns {Object}
         */
        function getScriptData(evt) {
            //Using currentTarget instead of target for Firefox 2.0's sake. Not
            //all old browsers will be supported, but this one was easy enough
            //to support and still makes sense.
            var node = evt.currentTarget || evt.srcElement;

            //Remove the listeners once here.
            removeListener(node, context.onScriptLoad, 'load', 'onreadystatechange');
            removeListener(node, context.onScriptError, 'error');

            return {
                node: node,
                id: node && node.getAttribute('data-requiremodule')
            };
        }

        function intakeDefines() {
            var args;

            //Any defined modules in the global queue, intake them now.
            takeGlobalQueue();

            //Make sure any remaining defQueue items get properly processed.
            while (defQueue.length) {
                args = defQueue.shift();
                if (args[0] === null) {
                    return onError(makeError('mismatch', 'Mismatched anonymous define() module: ' +
                        args[args.length - 1]));
                } else {
                    //args are id, deps, factory. Should be normalized by the
                    //define() function.
                    callGetModule(args);
                }
            }
            context.defQueueMap = {};
        }

        context = {
            config: config,
            contextName: contextName,
            registry: registry,
            defined: defined,
            urlFetched: urlFetched,
            defQueue: defQueue,
            defQueueMap: {},
            Module: Module,
            makeModuleMap: makeModuleMap,
            nextTick: req.nextTick,
            onError: onError,

            /**
             * Set a configuration for the context.
             * @param {Object} cfg config object to integrate.
             */
            configure: function (cfg) {
                //Make sure the baseUrl ends in a slash.
                if (cfg.baseUrl) {
                    if (cfg.baseUrl.charAt(cfg.baseUrl.length - 1) !== '/') {
                        cfg.baseUrl += '/';
                    }
                }

                // Convert old style urlArgs string to a function.
                if (typeof cfg.urlArgs === 'string') {
                    var urlArgs = cfg.urlArgs;
                    cfg.urlArgs = function(id, url) {
                        return (url.indexOf('?') === -1 ? '?' : '&') + urlArgs;
                    };
                }

                //Save off the paths since they require special processing,
                //they are additive.
                var shim = config.shim,
                    objs = {
                        paths: true,
                        bundles: true,
                        config: true,
                        map: true
                    };

                eachProp(cfg, function (value, prop) {
                    if (objs[prop]) {
                        if (!config[prop]) {
                            config[prop] = {};
                        }
                        mixin(config[prop], value, true, true);
                    } else {
                        config[prop] = value;
                    }
                });

                //Reverse map the bundles
                if (cfg.bundles) {
                    eachProp(cfg.bundles, function (value, prop) {
                        each(value, function (v) {
                            if (v !== prop) {
                                bundlesMap[v] = prop;
                            }
                        });
                    });
                }

                //Merge shim
                if (cfg.shim) {
                    eachProp(cfg.shim, function (value, id) {
                        //Normalize the structure
                        if (isArray(value)) {
                            value = {
                                deps: value
                            };
                        }
                        if ((value.exports || value.init) && !value.exportsFn) {
                            value.exportsFn = context.makeShimExports(value);
                        }
                        shim[id] = value;
                    });
                    config.shim = shim;
                }

                //Adjust packages if necessary.
                if (cfg.packages) {
                    each(cfg.packages, function (pkgObj) {
                        var location, name;

                        pkgObj = typeof pkgObj === 'string' ? {name: pkgObj} : pkgObj;

                        name = pkgObj.name;
                        location = pkgObj.location;
                        if (location) {
                            config.paths[name] = pkgObj.location;
                        }

                        //Save pointer to main module ID for pkg name.
                        //Remove leading dot in main, so main paths are normalized,
                        //and remove any trailing .js, since different package
                        //envs have different conventions: some use a module name,
                        //some use a file name.
                        config.pkgs[name] = pkgObj.name + '/' + (pkgObj.main || 'main')
                                     .replace(currDirRegExp, '')
                                     .replace(jsSuffixRegExp, '');
                    });
                }

                //If there are any "waiting to execute" modules in the registry,
                //update the maps for them, since their info, like URLs to load,
                //may have changed.
                eachProp(registry, function (mod, id) {
                    //If module already has init called, since it is too
                    //late to modify them, and ignore unnormalized ones
                    //since they are transient.
                    if (!mod.inited && !mod.map.unnormalized) {
                        mod.map = makeModuleMap(id, null, true);
                    }
                });

                //If a deps array or a config callback is specified, then call
                //require with those args. This is useful when require is defined as a
                //config object before require.js is loaded.
                if (cfg.deps || cfg.callback) {
                    context.require(cfg.deps || [], cfg.callback);
                }
            },

            makeShimExports: function (value) {
                function fn() {
                    var ret;
                    if (value.init) {
                        ret = value.init.apply(global, arguments);
                    }
                    return ret || (value.exports && getGlobal(value.exports));
                }
                return fn;
            },

            makeRequire: function (relMap, options) {
                options = options || {};

                function localRequire(deps, callback, errback) {
                    var id, map, requireMod;

                    if (options.enableBuildCallback && callback && isFunction(callback)) {
                        callback.__requireJsBuild = true;
                    }

                    if (typeof deps === 'string') {
                        if (isFunction(callback)) {
                            //Invalid call
                            return onError(makeError('requireargs', 'Invalid require call'), errback);
                        }

                        //If require|exports|module are requested, get the
                        //value for them from the special handlers. Caveat:
                        //this only works while module is being defined.
                        if (relMap && hasProp(handlers, deps)) {
                            return handlers[deps](registry[relMap.id]);
                        }

                        //Synchronous access to one module. If require.get is
                        //available (as in the Node adapter), prefer that.
                        if (req.get) {
                            return req.get(context, deps, relMap, localRequire);
                        }

                        //Normalize module name, if it contains . or ..
                        map = makeModuleMap(deps, relMap, false, true);
                        id = map.id;

                        if (!hasProp(defined, id)) {
                            return onError(makeError('notloaded', 'Module name "' +
                                        id +
                                        '" has not been loaded yet for context: ' +
                                        contextName +
                                        (relMap ? '' : '. Use require([])')));
                        }
                        return defined[id];
                    }

                    //Grab defines waiting in the global queue.
                    intakeDefines();

                    //Mark all the dependencies as needing to be loaded.
                    context.nextTick(function () {
                        //Some defines could have been added since the
                        //require call, collect them.
                        intakeDefines();

                        requireMod = getModule(makeModuleMap(null, relMap));

                        //Store if map config should be applied to this require
                        //call for dependencies.
                        requireMod.skipMap = options.skipMap;

                        requireMod.init(deps, callback, errback, {
                            enabled: true
                        });

                        checkLoaded();
                    });

                    return localRequire;
                }

                mixin(localRequire, {
                    isBrowser: isBrowser,

                    /**
                     * Converts a module name + .extension into an URL path.
                     * *Requires* the use of a module name. It does not support using
                     * plain URLs like nameToUrl.
                     */
                    toUrl: function (moduleNamePlusExt) {
                        var ext,
                            index = moduleNamePlusExt.lastIndexOf('.'),
                            segment = moduleNamePlusExt.split('/')[0],
                            isRelative = segment === '.' || segment === '..';

                        //Have a file extension alias, and it is not the
                        //dots from a relative path.
                        if (index !== -1 && (!isRelative || index > 1)) {
                            ext = moduleNamePlusExt.substring(index, moduleNamePlusExt.length);
                            moduleNamePlusExt = moduleNamePlusExt.substring(0, index);
                        }

                        return context.nameToUrl(normalize(moduleNamePlusExt,
                                                relMap && relMap.id, true), ext,  true);
                    },

                    defined: function (id) {
                        return hasProp(defined, makeModuleMap(id, relMap, false, true).id);
                    },

                    specified: function (id) {
                        id = makeModuleMap(id, relMap, false, true).id;
                        return hasProp(defined, id) || hasProp(registry, id);
                    }
                });

                //Only allow undef on top level require calls
                if (!relMap) {
                    localRequire.undef = function (id) {
                        //Bind any waiting define() calls to this context,
                        //fix for #408
                        takeGlobalQueue();

                        var map = makeModuleMap(id, relMap, true),
                            mod = getOwn(registry, id);

                        mod.undefed = true;
                        removeScript(id);

                        delete defined[id];
                        delete urlFetched[map.url];
                        delete undefEvents[id];

                        //Clean queued defines too. Go backwards
                        //in array so that the splices do not
                        //mess up the iteration.
                        eachReverse(defQueue, function(args, i) {
                            if (args[0] === id) {
                                defQueue.splice(i, 1);
                            }
                        });
                        delete context.defQueueMap[id];

                        if (mod) {
                            //Hold on to listeners in case the
                            //module will be attempted to be reloaded
                            //using a different config.
                            if (mod.events.defined) {
                                undefEvents[id] = mod.events;
                            }

                            cleanRegistry(id);
                        }
                    };
                }

                return localRequire;
            },

            /**
             * Called to enable a module if it is still in the registry
             * awaiting enablement. A second arg, parent, the parent module,
             * is passed in for context, when this method is overridden by
             * the optimizer. Not shown here to keep code compact.
             */
            enable: function (depMap) {
                var mod = getOwn(registry, depMap.id);
                if (mod) {
                    getModule(depMap).enable();
                }
            },

            /**
             * Internal method used by environment adapters to complete a load event.
             * A load event could be a script load or just a load pass from a synchronous
             * load call.
             * @param {String} moduleName the name of the module to potentially complete.
             */
            completeLoad: function (moduleName) {
                var found, args, mod,
                    shim = getOwn(config.shim, moduleName) || {},
                    shExports = shim.exports;

                takeGlobalQueue();

                while (defQueue.length) {
                    args = defQueue.shift();
                    if (args[0] === null) {
                        args[0] = moduleName;
                        //If already found an anonymous module and bound it
                        //to this name, then this is some other anon module
                        //waiting for its completeLoad to fire.
                        if (found) {
                            break;
                        }
                        found = true;
                    } else if (args[0] === moduleName) {
                        //Found matching define call for this script!
                        found = true;
                    }

                    callGetModule(args);
                }
                context.defQueueMap = {};

                //Do this after the cycle of callGetModule in case the result
                //of those calls/init calls changes the registry.
                mod = getOwn(registry, moduleName);

                if (!found && !hasProp(defined, moduleName) && mod && !mod.inited) {
                    if (config.enforceDefine && (!shExports || !getGlobal(shExports))) {
                        if (hasPathFallback(moduleName)) {
                            return;
                        } else {
                            return onError(makeError('nodefine',
                                             'No define call for ' + moduleName,
                                             null,
                                             [moduleName]));
                        }
                    } else {
                        //A script that does not call define(), so just simulate
                        //the call for it.
                        callGetModule([moduleName, (shim.deps || []), shim.exportsFn]);
                    }
                }

                checkLoaded();
            },

            /**
             * Converts a module name to a file path. Supports cases where
             * moduleName may actually be just an URL.
             * Note that it **does not** call normalize on the moduleName,
             * it is assumed to have already been normalized. This is an
             * internal API, not a public one. Use toUrl for the public API.
             */
            nameToUrl: function (moduleName, ext, skipExt) {
                var paths, syms, i, parentModule, url,
                    parentPath, bundleId,
                    pkgMain = getOwn(config.pkgs, moduleName);

                if (pkgMain) {
                    moduleName = pkgMain;
                }

                bundleId = getOwn(bundlesMap, moduleName);

                if (bundleId) {
                    return context.nameToUrl(bundleId, ext, skipExt);
                }

                //If a colon is in the URL, it indicates a protocol is used and it is just
                //an URL to a file, or if it starts with a slash, contains a query arg (i.e. ?)
                //or ends with .js, then assume the user meant to use an url and not a module id.
                //The slash is important for protocol-less URLs as well as full paths.
                if (req.jsExtRegExp.test(moduleName)) {
                    //Just a plain path, not module name lookup, so just return it.
                    //Add extension if it is included. This is a bit wonky, only non-.js things pass
                    //an extension, this method probably needs to be reworked.
                    url = moduleName + (ext || '');
                } else {
                    //A module that needs to be converted to a path.
                    paths = config.paths;

                    syms = moduleName.split('/');
                    //For each module name segment, see if there is a path
                    //registered for it. Start with most specific name
                    //and work up from it.
                    for (i = syms.length; i > 0; i -= 1) {
                        parentModule = syms.slice(0, i).join('/');

                        parentPath = getOwn(paths, parentModule);
                        if (parentPath) {
                            //If an array, it means there are a few choices,
                            //Choose the one that is desired
                            if (isArray(parentPath)) {
                                parentPath = parentPath[0];
                            }
                            syms.splice(0, i, parentPath);
                            break;
                        }
                    }

                    //Join the path parts together, then figure out if baseUrl is needed.
                    url = syms.join('/');
                    url += (ext || (/^data\:|^blob\:|\?/.test(url) || skipExt ? '' : '.js'));
                    url = (url.charAt(0) === '/' || url.match(/^[\w\+\.\-]+:/) ? '' : config.baseUrl) + url;
                }

                return config.urlArgs && !/^blob\:/.test(url) ?
                       url + config.urlArgs(moduleName, url) : url;
            },

            //Delegates to req.load. Broken out as a separate function to
            //allow overriding in the optimizer.
            load: function (id, url) {
                req.load(context, id, url);
            },

            /**
             * Executes a module callback function. Broken out as a separate function
             * solely to allow the build system to sequence the files in the built
             * layer in the right sequence.
             *
             * @private
             */
            execCb: function (name, callback, args, exports) {
                return callback.apply(exports, args);
            },

            /**
             * callback for script loads, used to check status of loading.
             *
             * @param {Event} evt the event from the browser for the script
             * that was loaded.
             */
            onScriptLoad: function (evt) {
                //Using currentTarget instead of target for Firefox 2.0's sake. Not
                //all old browsers will be supported, but this one was easy enough
                //to support and still makes sense.
                if (evt.type === 'load' ||
                        (readyRegExp.test((evt.currentTarget || evt.srcElement).readyState))) {
                    //Reset interactive script so a script node is not held onto for
                    //to long.
                    interactiveScript = null;

                    //Pull out the name of the module and the context.
                    var data = getScriptData(evt);
                    context.completeLoad(data.id);
                }
            },

            /**
             * Callback for script errors.
             */
            onScriptError: function (evt) {
                var data = getScriptData(evt);
                if (!hasPathFallback(data.id)) {
                    var parents = [];
                    eachProp(registry, function(value, key) {
                        if (key.indexOf('_@r') !== 0) {
                            each(value.depMaps, function(depMap) {
                                if (depMap.id === data.id) {
                                    parents.push(key);
                                    return true;
                                }
                            });
                        }
                    });
                    return onError(makeError('scripterror', 'Script error for "' + data.id +
                                             (parents.length ?
                                             '", needed by: ' + parents.join(', ') :
                                             '"'), evt, [data.id]));
                }
            }
        };

        context.require = context.makeRequire();
        return context;
    }

    /**
     * Main entry point.
     *
     * If the only argument to require is a string, then the module that
     * is represented by that string is fetched for the appropriate context.
     *
     * If the first argument is an array, then it will be treated as an array
     * of dependency string names to fetch. An optional function callback can
     * be specified to execute when all of those dependencies are available.
     *
     * Make a local req variable to help Caja compliance (it assumes things
     * on a require that are not standardized), and to give a short
     * name for minification/local scope use.
     */
    req = requirejs = function (deps, callback, errback, optional) {

        //Find the right context, use default
        var context, config,
            contextName = defContextName;

        // Determine if have config object in the call.
        if (!isArray(deps) && typeof deps !== 'string') {
            // deps is a config object
            config = deps;
            if (isArray(callback)) {
                // Adjust args if there are dependencies
                deps = callback;
                callback = errback;
                errback = optional;
            } else {
                deps = [];
            }
        }

        if (config && config.context) {
            contextName = config.context;
        }

        context = getOwn(contexts, contextName);
        if (!context) {
            context = contexts[contextName] = req.s.newContext(contextName);
        }

        if (config) {
            context.configure(config);
        }

        return context.require(deps, callback, errback);
    };

    /**
     * Support require.config() to make it easier to cooperate with other
     * AMD loaders on globally agreed names.
     */
    req.config = function (config) {
        return req(config);
    };

    /**
     * Execute something after the current tick
     * of the event loop. Override for other envs
     * that have a better solution than setTimeout.
     * @param  {Function} fn function to execute later.
     */
    req.nextTick = typeof setTimeout !== 'undefined' ? function (fn) {
        setTimeout(fn, 4);
    } : function (fn) { fn(); };

    /**
     * Export require as a global, but only if it does not already exist.
     */
    if (!require) {
        require = req;
    }

    req.version = version;

    //Used to filter out dependencies that are already paths.
    req.jsExtRegExp = /^\/|:|\?|\.js$/;
    req.isBrowser = isBrowser;
    s = req.s = {
        contexts: contexts,
        newContext: newContext
    };

    //Create default context.
    req({});

    //Exports some context-sensitive methods on global require.
    each([
        'toUrl',
        'undef',
        'defined',
        'specified'
    ], function (prop) {
        //Reference from contexts instead of early binding to default context,
        //so that during builds, the latest instance of the default context
        //with its config gets used.
        req[prop] = function () {
            var ctx = contexts[defContextName];
            return ctx.require[prop].apply(ctx, arguments);
        };
    });

    if (isBrowser) {
        head = s.head = document.getElementsByTagName('head')[0];
        //If BASE tag is in play, using appendChild is a problem for IE6.
        //When that browser dies, this can be removed. Details in this jQuery bug:
        //http://dev.jquery.com/ticket/2709
        baseElement = document.getElementsByTagName('base')[0];
        if (baseElement) {
            head = s.head = baseElement.parentNode;
        }
    }

    /**
     * Any errors that require explicitly generates will be passed to this
     * function. Intercept/override it if you want custom error handling.
     * @param {Error} err the error object.
     */
    req.onError = defaultOnError;

    /**
     * Creates the node for the load command. Only used in browser envs.
     */
    req.createNode = function (config, moduleName, url) {
        var node = config.xhtml ?
                document.createElementNS('http://www.w3.org/1999/xhtml', 'html:script') :
                document.createElement('script');
        node.type = config.scriptType || 'text/javascript';
        node.charset = 'utf-8';
        node.async = true;
        return node;
    };

    /**
     * Does the request to load a module for the browser case.
     * Make this a separate function to allow other environments
     * to override it.
     *
     * @param {Object} context the require context to find state.
     * @param {String} moduleName the name of the module.
     * @param {Object} url the URL to the module.
     */
    req.load = function (context, moduleName, url) {
        var config = (context && context.config) || {},
            node;
        if (isBrowser) {
            //In the browser so use a script tag
            node = req.createNode(config, moduleName, url);

            node.setAttribute('data-requirecontext', context.contextName);
            node.setAttribute('data-requiremodule', moduleName);

            //Set up load listener. Test attachEvent first because IE9 has
            //a subtle issue in its addEventListener and script onload firings
            //that do not match the behavior of all other browsers with
            //addEventListener support, which fire the onload event for a
            //script right after the script execution. See:
            //https://connect.microsoft.com/IE/feedback/details/648057/script-onload-event-is-not-fired-immediately-after-script-execution
            //UNFORTUNATELY Opera implements attachEvent but does not follow the script
            //script execution mode.
            if (node.attachEvent &&
                    //Check if node.attachEvent is artificially added by custom script or
                    //natively supported by browser
                    //read https://github.com/requirejs/requirejs/issues/187
                    //if we can NOT find [native code] then it must NOT natively supported.
                    //in IE8, node.attachEvent does not have toString()
                    //Note the test for "[native code" with no closing brace, see:
                    //https://github.com/requirejs/requirejs/issues/273
                    !(node.attachEvent.toString && node.attachEvent.toString().indexOf('[native code') < 0) &&
                    !isOpera) {
                //Probably IE. IE (at least 6-8) do not fire
                //script onload right after executing the script, so
                //we cannot tie the anonymous define call to a name.
                //However, IE reports the script as being in 'interactive'
                //readyState at the time of the define call.
                useInteractive = true;

                node.attachEvent('onreadystatechange', context.onScriptLoad);
                //It would be great to add an error handler here to catch
                //404s in IE9+. However, onreadystatechange will fire before
                //the error handler, so that does not help. If addEventListener
                //is used, then IE will fire error before load, but we cannot
                //use that pathway given the connect.microsoft.com issue
                //mentioned above about not doing the 'script execute,
                //then fire the script load event listener before execute
                //next script' that other browsers do.
                //Best hope: IE10 fixes the issues,
                //and then destroys all installs of IE 6-9.
                //node.attachEvent('onerror', context.onScriptError);
            } else {
                node.addEventListener('load', context.onScriptLoad, false);
                node.addEventListener('error', context.onScriptError, false);
            }
            node.src = url;

            //Calling onNodeCreated after all properties on the node have been
            //set, but before it is placed in the DOM.
            if (config.onNodeCreated) {
                config.onNodeCreated(node, config, moduleName, url);
            }

            //For some cache cases in IE 6-8, the script executes before the end
            //of the appendChild execution, so to tie an anonymous define
            //call to the module name (which is stored on the node), hold on
            //to a reference to this node, but clear after the DOM insertion.
            currentlyAddingScript = node;
            if (baseElement) {
                head.insertBefore(node, baseElement);
            } else {
                head.appendChild(node);
            }
            currentlyAddingScript = null;

            return node;
        } else if (isWebWorker) {
            try {
                //In a web worker, use importScripts. This is not a very
                //efficient use of importScripts, importScripts will block until
                //its script is downloaded and evaluated. However, if web workers
                //are in play, the expectation is that a build has been done so
                //that only one script needs to be loaded anyway. This may need
                //to be reevaluated if other use cases become common.

                // Post a task to the event loop to work around a bug in WebKit
                // where the worker gets garbage-collected after calling
                // importScripts(): https://webkit.org/b/153317
                setTimeout(function() {}, 0);
                importScripts(url);

                //Account for anonymous modules
                context.completeLoad(moduleName);
            } catch (e) {
                context.onError(makeError('importscripts',
                                'importScripts failed for ' +
                                    moduleName + ' at ' + url,
                                e,
                                [moduleName]));
            }
        }
    };

    function getInteractiveScript() {
        if (interactiveScript && interactiveScript.readyState === 'interactive') {
            return interactiveScript;
        }

        eachReverse(scripts(), function (script) {
            if (script.readyState === 'interactive') {
                return (interactiveScript = script);
            }
        });
        return interactiveScript;
    }

    //Look for a data-main script attribute, which could also adjust the baseUrl.
    if (isBrowser && !cfg.skipDataMain) {
        //Figure out baseUrl. Get it from the script tag with require.js in it.
        eachReverse(scripts(), function (script) {
            //Set the 'head' where we can append children by
            //using the script's parent.
            if (!head) {
                head = script.parentNode;
            }

            //Look for a data-main attribute to set main script for the page
            //to load. If it is there, the path to data main becomes the
            //baseUrl, if it is not already set.
            dataMain = script.getAttribute('data-main');
            if (dataMain) {
                //Preserve dataMain in case it is a path (i.e. contains '?')
                mainScript = dataMain;

                //Set final baseUrl if there is not already an explicit one,
                //but only do so if the data-main value is not a loader plugin
                //module ID.
                if (!cfg.baseUrl && mainScript.indexOf('!') === -1) {
                    //Pull off the directory of data-main for use as the
                    //baseUrl.
                    src = mainScript.split('/');
                    mainScript = src.pop();
                    subPath = src.length ? src.join('/')  + '/' : './';

                    cfg.baseUrl = subPath;
                }

                //Strip off any trailing .js since mainScript is now
                //like a module name.
                mainScript = mainScript.replace(jsSuffixRegExp, '');

                //If mainScript is still a path, fall back to dataMain
                if (req.jsExtRegExp.test(mainScript)) {
                    mainScript = dataMain;
                }

                //Put the data-main script in the files to load.
                cfg.deps = cfg.deps ? cfg.deps.concat(mainScript) : [mainScript];

                return true;
            }
        });
    }

    /**
     * The function that handles definitions of modules. Differs from
     * require() in that a string for the module should be the first argument,
     * and the function to execute after dependencies are loaded should
     * return a value to define the module corresponding to the first argument's
     * name.
     */
    define = function (name, deps, callback) {
        var node, context;

        //Allow for anonymous modules
        if (typeof name !== 'string') {
            //Adjust args appropriately
            callback = deps;
            deps = name;
            name = null;
        }

        //This module may not have dependencies
        if (!isArray(deps)) {
            callback = deps;
            deps = null;
        }

        //If no name, and callback is a function, then figure out if it a
        //CommonJS thing with dependencies.
        if (!deps && isFunction(callback)) {
            deps = [];
            //Remove comments from the callback string,
            //look for require calls, and pull them into the dependencies,
            //but only if there are function args.
            if (callback.length) {
                callback
                    .toString()
                    .replace(commentRegExp, commentReplace)
                    .replace(cjsRequireRegExp, function (match, dep) {
                        deps.push(dep);
                    });

                //May be a CommonJS thing even without require calls, but still
                //could use exports, and module. Avoid doing exports and module
                //work though if it just needs require.
                //REQUIRES the function to expect the CommonJS variables in the
                //order listed below.
                deps = (callback.length === 1 ? ['require'] : ['require', 'exports', 'module']).concat(deps);
            }
        }

        //If in IE 6-8 and hit an anonymous define() call, do the interactive
        //work.
        if (useInteractive) {
            node = currentlyAddingScript || getInteractiveScript();
            if (node) {
                if (!name) {
                    name = node.getAttribute('data-requiremodule');
                }
                context = contexts[node.getAttribute('data-requirecontext')];
            }
        }

        //Always save off evaluating the def call until the script onload handler.
        //This allows multiple modules to be in a file without prematurely
        //tracing dependencies, and allows for anonymous module support,
        //where the module name is not known until the script onload event
        //occurs. If no context, use the global queue, and get it processed
        //in the onscript load callback.
        if (context) {
            context.defQueue.push([name, deps, callback]);
            context.defQueueMap[name] = true;
        } else {
            globalDefQueue.push([name, deps, callback]);
        }
    };

    define.amd = {
        jQuery: true
    };

    /**
     * Executes the text. Normally just uses eval, but can be modified
     * to use a better, environment-specific call. Only used for transpiling
     * loader plugins, not for plain JS modules.
     * @param {String} text the text to execute/evaluate.
     */
    req.exec = function (text) {
        /*jslint evil: true */
        return eval(text);
    };

    //Set up with config info.
    req(cfg);
}(this, (typeof setTimeout === 'undefined' ? undefined : setTimeout)));
</script>
  <script>/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojbootstrap',[],function(){"use strict";var e;return{whenDocumentReady:function(){return e||(e="loading"===document.readyState?new Promise(function(e){var n=function(){document.removeEventListener("DOMContentLoaded",n),e()};document.addEventListener("DOMContentLoaded",n)}):Promise.resolve()),e}}});
/*!
 * Knockout JavaScript library v3.5.1
 * (c) The Knockout.js team - http://knockoutjs.com/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */

(function() {(function(n){var A=this||(0,eval)("this"),w=A.document,R=A.navigator,v=A.jQuery,H=A.JSON;v||"undefined"===typeof jQuery||(v=jQuery);(function(n){"function"===typeof define&&define.amd?define('knockout',["exports","require"],n):"object"===typeof exports&&"object"===typeof module?n(module.exports||exports):n(A.ko={})})(function(S,T){function K(a,c){return null===a||typeof a in W?a===c:!1}function X(b,c){var d;return function(){d||(d=a.a.setTimeout(function(){d=n;b()},c))}}function Y(b,c){var d;return function(){clearTimeout(d);
d=a.a.setTimeout(b,c)}}function Z(a,c){c&&"change"!==c?"beforeChange"===c?this.pc(a):this.gb(a,c):this.qc(a)}function aa(a,c){null!==c&&c.s&&c.s()}function ba(a,c){var d=this.qd,e=d[r];e.ra||(this.Qb&&this.mb[c]?(d.uc(c,a,this.mb[c]),this.mb[c]=null,--this.Qb):e.I[c]||d.uc(c,a,e.J?{da:a}:d.$c(a)),a.Ja&&a.gd())}var a="undefined"!==typeof S?S:{};a.b=function(b,c){for(var d=b.split("."),e=a,f=0;f<d.length-1;f++)e=e[d[f]];e[d[d.length-1]]=c};a.L=function(a,c,d){a[c]=d};a.version="3.5.1";a.b("version",
a.version);a.options={deferUpdates:!1,useOnlyNativeEvents:!1,foreachHidesDestroyed:!1};a.a=function(){function b(a,b){for(var c in a)f.call(a,c)&&b(c,a[c])}function c(a,b){if(b)for(var c in b)f.call(b,c)&&(a[c]=b[c]);return a}function d(a,b){a.__proto__=b;return a}function e(b,c,d,e){var l=b[c].match(q)||[];a.a.D(d.match(q),function(b){a.a.Na(l,b,e)});b[c]=l.join(" ")}var f=Object.prototype.hasOwnProperty,g={__proto__:[]}instanceof Array,h="function"===typeof Symbol,m={},k={};m[R&&/Firefox\/2/i.test(R.userAgent)?
"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"];m.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");b(m,function(a,b){if(b.length)for(var c=0,d=b.length;c<d;c++)k[b[c]]=a});var l={propertychange:!0},p=w&&function(){for(var a=3,b=w.createElement("div"),c=b.getElementsByTagName("i");b.innerHTML="\x3c!--[if gt IE "+ ++a+"]><i></i><![endif]--\x3e",c[0];);return 4<a?a:n}(),q=/\S+/g,t;return{Jc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],
D:function(a,b,c){for(var d=0,e=a.length;d<e;d++)b.call(c,a[d],d,a)},A:"function"==typeof Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b)}:function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},Lb:function(a,b,c){for(var d=0,e=a.length;d<e;d++)if(b.call(c,a[d],d,a))return a[d];return n},Pa:function(b,c){var d=a.a.A(b,c);0<d?b.splice(d,1):0===d&&b.shift()},wc:function(b){var c=[];b&&a.a.D(b,function(b){0>a.a.A(c,b)&&c.push(b)});return c},Mb:function(a,
b,c){var d=[];if(a)for(var e=0,l=a.length;e<l;e++)d.push(b.call(c,a[e],e));return d},jb:function(a,b,c){var d=[];if(a)for(var e=0,l=a.length;e<l;e++)b.call(c,a[e],e)&&d.push(a[e]);return d},Nb:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;c<d;c++)a.push(b[c]);return a},Na:function(b,c,d){var e=a.a.A(a.a.bc(b),c);0>e?d&&b.push(c):d||b.splice(e,1)},Ba:g,extend:c,setPrototypeOf:d,Ab:g?d:c,P:b,Ga:function(a,b,c){if(!a)return a;var d={},e;for(e in a)f.call(a,e)&&(d[e]=
b.call(c,a[e],e,a));return d},Tb:function(b){for(;b.firstChild;)a.removeNode(b.firstChild)},Yb:function(b){b=a.a.la(b);for(var c=(b[0]&&b[0].ownerDocument||w).createElement("div"),d=0,e=b.length;d<e;d++)c.appendChild(a.oa(b[d]));return c},Ca:function(b,c){for(var d=0,e=b.length,l=[];d<e;d++){var k=b[d].cloneNode(!0);l.push(c?a.oa(k):k)}return l},va:function(b,c){a.a.Tb(b);if(c)for(var d=0,e=c.length;d<e;d++)b.appendChild(c[d])},Xc:function(b,c){var d=b.nodeType?[b]:b;if(0<d.length){for(var e=d[0],
l=e.parentNode,k=0,f=c.length;k<f;k++)l.insertBefore(c[k],e);k=0;for(f=d.length;k<f;k++)a.removeNode(d[k])}},Ua:function(a,b){if(a.length){for(b=8===b.nodeType&&b.parentNode||b;a.length&&a[0].parentNode!==b;)a.splice(0,1);for(;1<a.length&&a[a.length-1].parentNode!==b;)a.length--;if(1<a.length){var c=a[0],d=a[a.length-1];for(a.length=0;c!==d;)a.push(c),c=c.nextSibling;a.push(d)}}return a},Zc:function(a,b){7>p?a.setAttribute("selected",b):a.selected=b},Db:function(a){return null===a||a===n?"":a.trim?
a.trim():a.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Ud:function(a,b){a=a||"";return b.length>a.length?!1:a.substring(0,b.length)===b},vd:function(a,b){if(a===b)return!0;if(11===a.nodeType)return!1;if(b.contains)return b.contains(1!==a.nodeType?a.parentNode:a);if(b.compareDocumentPosition)return 16==(b.compareDocumentPosition(a)&16);for(;a&&a!=b;)a=a.parentNode;return!!a},Sb:function(b){return a.a.vd(b,b.ownerDocument.documentElement)},kd:function(b){return!!a.a.Lb(b,a.a.Sb)},R:function(a){return a&&
a.tagName&&a.tagName.toLowerCase()},Ac:function(b){return a.onError?function(){try{return b.apply(this,arguments)}catch(c){throw a.onError&&a.onError(c),c;}}:b},setTimeout:function(b,c){return setTimeout(a.a.Ac(b),c)},Gc:function(b){setTimeout(function(){a.onError&&a.onError(b);throw b;},0)},B:function(b,c,d){var e=a.a.Ac(d);d=l[c];if(a.options.useOnlyNativeEvents||d||!v)if(d||"function"!=typeof b.addEventListener)if("undefined"!=typeof b.attachEvent){var k=function(a){e.call(b,a)},f="on"+c;b.attachEvent(f,
k);a.a.K.za(b,function(){b.detachEvent(f,k)})}else throw Error("Browser doesn't support addEventListener or attachEvent");else b.addEventListener(c,e,!1);else t||(t="function"==typeof v(b).on?"on":"bind"),v(b)[t](c,e)},Fb:function(b,c){if(!b||!b.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var d;"input"===a.a.R(b)&&b.type&&"click"==c.toLowerCase()?(d=b.type,d="checkbox"==d||"radio"==d):d=!1;if(a.options.useOnlyNativeEvents||!v||d)if("function"==typeof w.createEvent)if("function"==
typeof b.dispatchEvent)d=w.createEvent(k[c]||"HTMLEvents"),d.initEvent(c,!0,!0,A,0,0,0,0,0,!1,!1,!1,!1,0,b),b.dispatchEvent(d);else throw Error("The supplied element doesn't support dispatchEvent");else if(d&&b.click)b.click();else if("undefined"!=typeof b.fireEvent)b.fireEvent("on"+c);else throw Error("Browser doesn't support triggering events");else v(b).trigger(c)},f:function(b){return a.O(b)?b():b},bc:function(b){return a.O(b)?b.v():b},Eb:function(b,c,d){var l;c&&("object"===typeof b.classList?
(l=b.classList[d?"add":"remove"],a.a.D(c.match(q),function(a){l.call(b.classList,a)})):"string"===typeof b.className.baseVal?e(b.className,"baseVal",c,d):e(b,"className",c,d))},Bb:function(b,c){var d=a.a.f(c);if(null===d||d===n)d="";var e=a.h.firstChild(b);!e||3!=e.nodeType||a.h.nextSibling(e)?a.h.va(b,[b.ownerDocument.createTextNode(d)]):e.data=d;a.a.Ad(b)},Yc:function(a,b){a.name=b;if(7>=p)try{var c=a.name.replace(/[&<>'"]/g,function(a){return"&#"+a.charCodeAt(0)+";"});a.mergeAttributes(w.createElement("<input name='"+
c+"'/>"),!1)}catch(d){}},Ad:function(a){9<=p&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},wd:function(a){if(p){var b=a.style.width;a.style.width=0;a.style.width=b}},Pd:function(b,c){b=a.a.f(b);c=a.a.f(c);for(var d=[],e=b;e<=c;e++)d.push(e);return d},la:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b},Da:function(a){return h?Symbol(a):a},Zd:6===p,$d:7===p,W:p,Lc:function(b,c){for(var d=a.a.la(b.getElementsByTagName("input")).concat(a.a.la(b.getElementsByTagName("textarea"))),
e="string"==typeof c?function(a){return a.name===c}:function(a){return c.test(a.name)},l=[],k=d.length-1;0<=k;k--)e(d[k])&&l.push(d[k]);return l},Nd:function(b){return"string"==typeof b&&(b=a.a.Db(b))?H&&H.parse?H.parse(b):(new Function("return "+b))():null},hc:function(b,c,d){if(!H||!H.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");
return H.stringify(a.a.f(b),c,d)},Od:function(c,d,e){e=e||{};var l=e.params||{},k=e.includeFields||this.Jc,f=c;if("object"==typeof c&&"form"===a.a.R(c))for(var f=c.action,h=k.length-1;0<=h;h--)for(var g=a.a.Lc(c,k[h]),m=g.length-1;0<=m;m--)l[g[m].name]=g[m].value;d=a.a.f(d);var p=w.createElement("form");p.style.display="none";p.action=f;p.method="post";for(var q in d)c=w.createElement("input"),c.type="hidden",c.name=q,c.value=a.a.hc(a.a.f(d[q])),p.appendChild(c);b(l,function(a,b){var c=w.createElement("input");
c.type="hidden";c.name=a;c.value=b;p.appendChild(c)});w.body.appendChild(p);e.submitter?e.submitter(p):p.submit();setTimeout(function(){p.parentNode.removeChild(p)},0)}}}();a.b("utils",a.a);a.b("utils.arrayForEach",a.a.D);a.b("utils.arrayFirst",a.a.Lb);a.b("utils.arrayFilter",a.a.jb);a.b("utils.arrayGetDistinctValues",a.a.wc);a.b("utils.arrayIndexOf",a.a.A);a.b("utils.arrayMap",a.a.Mb);a.b("utils.arrayPushAll",a.a.Nb);a.b("utils.arrayRemoveItem",a.a.Pa);a.b("utils.cloneNodes",a.a.Ca);a.b("utils.createSymbolOrString",
a.a.Da);a.b("utils.extend",a.a.extend);a.b("utils.fieldsIncludedWithJsonPost",a.a.Jc);a.b("utils.getFormFields",a.a.Lc);a.b("utils.objectMap",a.a.Ga);a.b("utils.peekObservable",a.a.bc);a.b("utils.postJson",a.a.Od);a.b("utils.parseJson",a.a.Nd);a.b("utils.registerEventHandler",a.a.B);a.b("utils.stringifyJson",a.a.hc);a.b("utils.range",a.a.Pd);a.b("utils.toggleDomNodeCssClass",a.a.Eb);a.b("utils.triggerEvent",a.a.Fb);a.b("utils.unwrapObservable",a.a.f);a.b("utils.objectForEach",a.a.P);a.b("utils.addOrRemoveItem",
a.a.Na);a.b("utils.setTextContent",a.a.Bb);a.b("unwrap",a.a.f);Function.prototype.bind||(Function.prototype.bind=function(a){var c=this;if(1===arguments.length)return function(){return c.apply(a,arguments)};var d=Array.prototype.slice.call(arguments,1);return function(){var e=d.slice(0);e.push.apply(e,arguments);return c.apply(a,e)}});a.a.g=new function(){var b=0,c="__ko__"+(new Date).getTime(),d={},e,f;a.a.W?(e=function(a,e){var f=a[c];if(!f||"null"===f||!d[f]){if(!e)return n;f=a[c]="ko"+b++;d[f]=
{}}return d[f]},f=function(a){var b=a[c];return b?(delete d[b],a[c]=null,!0):!1}):(e=function(a,b){var d=a[c];!d&&b&&(d=a[c]={});return d},f=function(a){return a[c]?(delete a[c],!0):!1});return{get:function(a,b){var c=e(a,!1);return c&&c[b]},set:function(a,b,c){(a=e(a,c!==n))&&(a[b]=c)},Ub:function(a,b,c){a=e(a,!0);return a[b]||(a[b]=c)},clear:f,Z:function(){return b++ +c}}};a.b("utils.domData",a.a.g);a.b("utils.domData.clear",a.a.g.clear);a.a.K=new function(){function b(b,c){var d=a.a.g.get(b,e);
d===n&&c&&(d=[],a.a.g.set(b,e,d));return d}function c(c){var e=b(c,!1);if(e)for(var e=e.slice(0),k=0;k<e.length;k++)e[k](c);a.a.g.clear(c);a.a.K.cleanExternalData(c);g[c.nodeType]&&d(c.childNodes,!0)}function d(b,d){for(var e=[],l,f=0;f<b.length;f++)if(!d||8===b[f].nodeType)if(c(e[e.length]=l=b[f]),b[f]!==l)for(;f--&&-1==a.a.A(e,b[f]););}var e=a.a.g.Z(),f={1:!0,8:!0,9:!0},g={1:!0,9:!0};return{za:function(a,c){if("function"!=typeof c)throw Error("Callback must be a function");b(a,!0).push(c)},yb:function(c,
d){var f=b(c,!1);f&&(a.a.Pa(f,d),0==f.length&&a.a.g.set(c,e,n))},oa:function(b){a.u.G(function(){f[b.nodeType]&&(c(b),g[b.nodeType]&&d(b.getElementsByTagName("*")))});return b},removeNode:function(b){a.oa(b);b.parentNode&&b.parentNode.removeChild(b)},cleanExternalData:function(a){v&&"function"==typeof v.cleanData&&v.cleanData([a])}}};a.oa=a.a.K.oa;a.removeNode=a.a.K.removeNode;a.b("cleanNode",a.oa);a.b("removeNode",a.removeNode);a.b("utils.domNodeDisposal",a.a.K);a.b("utils.domNodeDisposal.addDisposeCallback",
a.a.K.za);a.b("utils.domNodeDisposal.removeDisposeCallback",a.a.K.yb);(function(){var b=[0,"",""],c=[1,"<table>","</table>"],d=[3,"<table><tbody><tr>","</tr></tbody></table>"],e=[1,"<select multiple='multiple'>","</select>"],f={thead:c,tbody:c,tfoot:c,tr:[2,"<table><tbody>","</tbody></table>"],td:d,th:d,option:e,optgroup:e},g=8>=a.a.W;a.a.ua=function(c,d){var e;if(v)if(v.parseHTML)e=v.parseHTML(c,d)||[];else{if((e=v.clean([c],d))&&e[0]){for(var l=e[0];l.parentNode&&11!==l.parentNode.nodeType;)l=l.parentNode;
l.parentNode&&l.parentNode.removeChild(l)}}else{(e=d)||(e=w);var l=e.parentWindow||e.defaultView||A,p=a.a.Db(c).toLowerCase(),q=e.createElement("div"),t;t=(p=p.match(/^(?:\x3c!--.*?--\x3e\s*?)*?<([a-z]+)[\s>]/))&&f[p[1]]||b;p=t[0];t="ignored<div>"+t[1]+c+t[2]+"</div>";"function"==typeof l.innerShiv?q.appendChild(l.innerShiv(t)):(g&&e.body.appendChild(q),q.innerHTML=t,g&&q.parentNode.removeChild(q));for(;p--;)q=q.lastChild;e=a.a.la(q.lastChild.childNodes)}return e};a.a.Md=function(b,c){var d=a.a.ua(b,
c);return d.length&&d[0].parentElement||a.a.Yb(d)};a.a.fc=function(b,c){a.a.Tb(b);c=a.a.f(c);if(null!==c&&c!==n)if("string"!=typeof c&&(c=c.toString()),v)v(b).html(c);else for(var d=a.a.ua(c,b.ownerDocument),e=0;e<d.length;e++)b.appendChild(d[e])}})();a.b("utils.parseHtmlFragment",a.a.ua);a.b("utils.setHtml",a.a.fc);a.aa=function(){function b(c,e){if(c)if(8==c.nodeType){var f=a.aa.Uc(c.nodeValue);null!=f&&e.push({ud:c,Kd:f})}else if(1==c.nodeType)for(var f=0,g=c.childNodes,h=g.length;f<h;f++)b(g[f],
e)}var c={};return{Xb:function(a){if("function"!=typeof a)throw Error("You can only pass a function to ko.memoization.memoize()");var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);c[b]=a;return"\x3c!--[ko_memo:"+b+"]--\x3e"},bd:function(a,b){var f=c[a];if(f===n)throw Error("Couldn't find any memo with ID "+a+". Perhaps it's already been unmemoized.");try{return f.apply(null,b||[]),!0}finally{delete c[a]}},cd:function(c,e){var f=
[];b(c,f);for(var g=0,h=f.length;g<h;g++){var m=f[g].ud,k=[m];e&&a.a.Nb(k,e);a.aa.bd(f[g].Kd,k);m.nodeValue="";m.parentNode&&m.parentNode.removeChild(m)}},Uc:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:null}}}();a.b("memoization",a.aa);a.b("memoization.memoize",a.aa.Xb);a.b("memoization.unmemoize",a.aa.bd);a.b("memoization.parseMemoText",a.aa.Uc);a.b("memoization.unmemoizeDomNodeAndDescendants",a.aa.cd);a.na=function(){function b(){if(f)for(var b=f,c=0,d;h<f;)if(d=e[h++]){if(h>b){if(5E3<=
++c){h=f;a.a.Gc(Error("'Too much recursion' after processing "+c+" task groups."));break}b=f}try{d()}catch(p){a.a.Gc(p)}}}function c(){b();h=f=e.length=0}var d,e=[],f=0,g=1,h=0;A.MutationObserver?d=function(a){var b=w.createElement("div");(new MutationObserver(a)).observe(b,{attributes:!0});return function(){b.classList.toggle("foo")}}(c):d=w&&"onreadystatechange"in w.createElement("script")?function(a){var b=w.createElement("script");b.onreadystatechange=function(){b.onreadystatechange=null;w.documentElement.removeChild(b);
b=null;a()};w.documentElement.appendChild(b)}:function(a){setTimeout(a,0)};return{scheduler:d,zb:function(b){f||a.na.scheduler(c);e[f++]=b;return g++},cancel:function(a){a=a-(g-f);a>=h&&a<f&&(e[a]=null)},resetForTesting:function(){var a=f-h;h=f=e.length=0;return a},Sd:b}}();a.b("tasks",a.na);a.b("tasks.schedule",a.na.zb);a.b("tasks.runEarly",a.na.Sd);a.Ta={throttle:function(b,c){b.throttleEvaluation=c;var d=null;return a.$({read:b,write:function(e){clearTimeout(d);d=a.a.setTimeout(function(){b(e)},
c)}})},rateLimit:function(a,c){var d,e,f;"number"==typeof c?d=c:(d=c.timeout,e=c.method);a.Hb=!1;f="function"==typeof e?e:"notifyWhenChangesStop"==e?Y:X;a.ub(function(a){return f(a,d,c)})},deferred:function(b,c){if(!0!==c)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");b.Hb||(b.Hb=!0,b.ub(function(c){var e,f=!1;return function(){if(!f){a.na.cancel(e);e=a.na.zb(c);try{f=!0,b.notifySubscribers(n,"dirty")}finally{f=
!1}}}}))},notify:function(a,c){a.equalityComparer="always"==c?null:K}};var W={undefined:1,"boolean":1,number:1,string:1};a.b("extenders",a.Ta);a.ic=function(b,c,d){this.da=b;this.lc=c;this.mc=d;this.Ib=!1;this.fb=this.Jb=null;a.L(this,"dispose",this.s);a.L(this,"disposeWhenNodeIsRemoved",this.l)};a.ic.prototype.s=function(){this.Ib||(this.fb&&a.a.K.yb(this.Jb,this.fb),this.Ib=!0,this.mc(),this.da=this.lc=this.mc=this.Jb=this.fb=null)};a.ic.prototype.l=function(b){this.Jb=b;a.a.K.za(b,this.fb=this.s.bind(this))};
a.T=function(){a.a.Ab(this,D);D.qb(this)};var D={qb:function(a){a.U={change:[]};a.sc=1},subscribe:function(b,c,d){var e=this;d=d||"change";var f=new a.ic(e,c?b.bind(c):b,function(){a.a.Pa(e.U[d],f);e.hb&&e.hb(d)});e.Qa&&e.Qa(d);e.U[d]||(e.U[d]=[]);e.U[d].push(f);return f},notifySubscribers:function(b,c){c=c||"change";"change"===c&&this.Gb();if(this.Wa(c)){var d="change"===c&&this.ed||this.U[c].slice(0);try{a.u.xc();for(var e=0,f;f=d[e];++e)f.Ib||f.lc(b)}finally{a.u.end()}}},ob:function(){return this.sc},
Dd:function(a){return this.ob()!==a},Gb:function(){++this.sc},ub:function(b){var c=this,d=a.O(c),e,f,g,h,m;c.gb||(c.gb=c.notifySubscribers,c.notifySubscribers=Z);var k=b(function(){c.Ja=!1;d&&h===c&&(h=c.nc?c.nc():c());var a=f||m&&c.sb(g,h);m=f=e=!1;a&&c.gb(g=h)});c.qc=function(a,b){b&&c.Ja||(m=!b);c.ed=c.U.change.slice(0);c.Ja=e=!0;h=a;k()};c.pc=function(a){e||(g=a,c.gb(a,"beforeChange"))};c.rc=function(){m=!0};c.gd=function(){c.sb(g,c.v(!0))&&(f=!0)}},Wa:function(a){return this.U[a]&&this.U[a].length},
Bd:function(b){if(b)return this.U[b]&&this.U[b].length||0;var c=0;a.a.P(this.U,function(a,b){"dirty"!==a&&(c+=b.length)});return c},sb:function(a,c){return!this.equalityComparer||!this.equalityComparer(a,c)},toString:function(){return"[object Object]"},extend:function(b){var c=this;b&&a.a.P(b,function(b,e){var f=a.Ta[b];"function"==typeof f&&(c=f(c,e)||c)});return c}};a.L(D,"init",D.qb);a.L(D,"subscribe",D.subscribe);a.L(D,"extend",D.extend);a.L(D,"getSubscriptionsCount",D.Bd);a.a.Ba&&a.a.setPrototypeOf(D,
Function.prototype);a.T.fn=D;a.Qc=function(a){return null!=a&&"function"==typeof a.subscribe&&"function"==typeof a.notifySubscribers};a.b("subscribable",a.T);a.b("isSubscribable",a.Qc);a.S=a.u=function(){function b(a){d.push(e);e=a}function c(){e=d.pop()}var d=[],e,f=0;return{xc:b,end:c,cc:function(b){if(e){if(!a.Qc(b))throw Error("Only subscribable things can act as dependencies");e.od.call(e.pd,b,b.fd||(b.fd=++f))}},G:function(a,d,e){try{return b(),a.apply(d,e||[])}finally{c()}},qa:function(){if(e)return e.o.qa()},
Va:function(){if(e)return e.o.Va()},Ya:function(){if(e)return e.Ya},o:function(){if(e)return e.o}}}();a.b("computedContext",a.S);a.b("computedContext.getDependenciesCount",a.S.qa);a.b("computedContext.getDependencies",a.S.Va);a.b("computedContext.isInitial",a.S.Ya);a.b("computedContext.registerDependency",a.S.cc);a.b("ignoreDependencies",a.Yd=a.u.G);var I=a.a.Da("_latestValue");a.ta=function(b){function c(){if(0<arguments.length)return c.sb(c[I],arguments[0])&&(c.ya(),c[I]=arguments[0],c.xa()),this;
a.u.cc(c);return c[I]}c[I]=b;a.a.Ba||a.a.extend(c,a.T.fn);a.T.fn.qb(c);a.a.Ab(c,F);a.options.deferUpdates&&a.Ta.deferred(c,!0);return c};var F={equalityComparer:K,v:function(){return this[I]},xa:function(){this.notifySubscribers(this[I],"spectate");this.notifySubscribers(this[I])},ya:function(){this.notifySubscribers(this[I],"beforeChange")}};a.a.Ba&&a.a.setPrototypeOf(F,a.T.fn);var G=a.ta.Ma="__ko_proto__";F[G]=a.ta;a.O=function(b){if((b="function"==typeof b&&b[G])&&b!==F[G]&&b!==a.o.fn[G])throw Error("Invalid object that looks like an observable; possibly from another Knockout instance");
return!!b};a.Za=function(b){return"function"==typeof b&&(b[G]===F[G]||b[G]===a.o.fn[G]&&b.Nc)};a.b("observable",a.ta);a.b("isObservable",a.O);a.b("isWriteableObservable",a.Za);a.b("isWritableObservable",a.Za);a.b("observable.fn",F);a.L(F,"peek",F.v);a.L(F,"valueHasMutated",F.xa);a.L(F,"valueWillMutate",F.ya);a.Ha=function(b){b=b||[];if("object"!=typeof b||!("length"in b))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");b=a.ta(b);a.a.Ab(b,
a.Ha.fn);return b.extend({trackArrayChanges:!0})};a.Ha.fn={remove:function(b){for(var c=this.v(),d=[],e="function"!=typeof b||a.O(b)?function(a){return a===b}:b,f=0;f<c.length;f++){var g=c[f];if(e(g)){0===d.length&&this.ya();if(c[f]!==g)throw Error("Array modified during remove; cannot remove item");d.push(g);c.splice(f,1);f--}}d.length&&this.xa();return d},removeAll:function(b){if(b===n){var c=this.v(),d=c.slice(0);this.ya();c.splice(0,c.length);this.xa();return d}return b?this.remove(function(c){return 0<=
a.a.A(b,c)}):[]},destroy:function(b){var c=this.v(),d="function"!=typeof b||a.O(b)?function(a){return a===b}:b;this.ya();for(var e=c.length-1;0<=e;e--){var f=c[e];d(f)&&(f._destroy=!0)}this.xa()},destroyAll:function(b){return b===n?this.destroy(function(){return!0}):b?this.destroy(function(c){return 0<=a.a.A(b,c)}):[]},indexOf:function(b){var c=this();return a.a.A(c,b)},replace:function(a,c){var d=this.indexOf(a);0<=d&&(this.ya(),this.v()[d]=c,this.xa())},sorted:function(a){var c=this().slice(0);
return a?c.sort(a):c.sort()},reversed:function(){return this().slice(0).reverse()}};a.a.Ba&&a.a.setPrototypeOf(a.Ha.fn,a.ta.fn);a.a.D("pop push reverse shift sort splice unshift".split(" "),function(b){a.Ha.fn[b]=function(){var a=this.v();this.ya();this.zc(a,b,arguments);var d=a[b].apply(a,arguments);this.xa();return d===a?this:d}});a.a.D(["slice"],function(b){a.Ha.fn[b]=function(){var a=this();return a[b].apply(a,arguments)}});a.Pc=function(b){return a.O(b)&&"function"==typeof b.remove&&"function"==
typeof b.push};a.b("observableArray",a.Ha);a.b("isObservableArray",a.Pc);a.Ta.trackArrayChanges=function(b,c){function d(){function c(){if(m){var d=[].concat(b.v()||[]),e;if(b.Wa("arrayChange")){if(!f||1<m)f=a.a.Pb(k,d,b.Ob);e=f}k=d;f=null;m=0;e&&e.length&&b.notifySubscribers(e,"arrayChange")}}e?c():(e=!0,h=b.subscribe(function(){++m},null,"spectate"),k=[].concat(b.v()||[]),f=null,g=b.subscribe(c))}b.Ob={};c&&"object"==typeof c&&a.a.extend(b.Ob,c);b.Ob.sparse=!0;if(!b.zc){var e=!1,f=null,g,h,m=0,
k,l=b.Qa,p=b.hb;b.Qa=function(a){l&&l.call(b,a);"arrayChange"===a&&d()};b.hb=function(a){p&&p.call(b,a);"arrayChange"!==a||b.Wa("arrayChange")||(g&&g.s(),h&&h.s(),h=g=null,e=!1,k=n)};b.zc=function(b,c,d){function l(a,b,c){return k[k.length]={status:a,value:b,index:c}}if(e&&!m){var k=[],p=b.length,g=d.length,h=0;switch(c){case "push":h=p;case "unshift":for(c=0;c<g;c++)l("added",d[c],h+c);break;case "pop":h=p-1;case "shift":p&&l("deleted",b[h],h);break;case "splice":c=Math.min(Math.max(0,0>d[0]?p+d[0]:
d[0]),p);for(var p=1===g?p:Math.min(c+(d[1]||0),p),g=c+g-2,h=Math.max(p,g),U=[],L=[],n=2;c<h;++c,++n)c<p&&L.push(l("deleted",b[c],c)),c<g&&U.push(l("added",d[n],c));a.a.Kc(L,U);break;default:return}f=k}}}};var r=a.a.Da("_state");a.o=a.$=function(b,c,d){function e(){if(0<arguments.length){if("function"===typeof f)f.apply(g.nb,arguments);else throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return this}g.ra||
a.u.cc(e);(g.ka||g.J&&e.Xa())&&e.ha();return g.X}"object"===typeof b?d=b:(d=d||{},b&&(d.read=b));if("function"!=typeof d.read)throw Error("Pass a function that returns the value of the ko.computed");var f=d.write,g={X:n,sa:!0,ka:!0,rb:!1,jc:!1,ra:!1,wb:!1,J:!1,Wc:d.read,nb:c||d.owner,l:d.disposeWhenNodeIsRemoved||d.l||null,Sa:d.disposeWhen||d.Sa,Rb:null,I:{},V:0,Ic:null};e[r]=g;e.Nc="function"===typeof f;a.a.Ba||a.a.extend(e,a.T.fn);a.T.fn.qb(e);a.a.Ab(e,C);d.pure?(g.wb=!0,g.J=!0,a.a.extend(e,da)):
d.deferEvaluation&&a.a.extend(e,ea);a.options.deferUpdates&&a.Ta.deferred(e,!0);g.l&&(g.jc=!0,g.l.nodeType||(g.l=null));g.J||d.deferEvaluation||e.ha();g.l&&e.ja()&&a.a.K.za(g.l,g.Rb=function(){e.s()});return e};var C={equalityComparer:K,qa:function(){return this[r].V},Va:function(){var b=[];a.a.P(this[r].I,function(a,d){b[d.Ka]=d.da});return b},Vb:function(b){if(!this[r].V)return!1;var c=this.Va();return-1!==a.a.A(c,b)?!0:!!a.a.Lb(c,function(a){return a.Vb&&a.Vb(b)})},uc:function(a,c,d){if(this[r].wb&&
c===this)throw Error("A 'pure' computed must not be called recursively");this[r].I[a]=d;d.Ka=this[r].V++;d.La=c.ob()},Xa:function(){var a,c,d=this[r].I;for(a in d)if(Object.prototype.hasOwnProperty.call(d,a)&&(c=d[a],this.Ia&&c.da.Ja||c.da.Dd(c.La)))return!0},Jd:function(){this.Ia&&!this[r].rb&&this.Ia(!1)},ja:function(){var a=this[r];return a.ka||0<a.V},Rd:function(){this.Ja?this[r].ka&&(this[r].sa=!0):this.Hc()},$c:function(a){if(a.Hb){var c=a.subscribe(this.Jd,this,"dirty"),d=a.subscribe(this.Rd,
this);return{da:a,s:function(){c.s();d.s()}}}return a.subscribe(this.Hc,this)},Hc:function(){var b=this,c=b.throttleEvaluation;c&&0<=c?(clearTimeout(this[r].Ic),this[r].Ic=a.a.setTimeout(function(){b.ha(!0)},c)):b.Ia?b.Ia(!0):b.ha(!0)},ha:function(b){var c=this[r],d=c.Sa,e=!1;if(!c.rb&&!c.ra){if(c.l&&!a.a.Sb(c.l)||d&&d()){if(!c.jc){this.s();return}}else c.jc=!1;c.rb=!0;try{e=this.zd(b)}finally{c.rb=!1}return e}},zd:function(b){var c=this[r],d=!1,e=c.wb?n:!c.V,d={qd:this,mb:c.I,Qb:c.V};a.u.xc({pd:d,
od:ba,o:this,Ya:e});c.I={};c.V=0;var f=this.yd(c,d);c.V?d=this.sb(c.X,f):(this.s(),d=!0);d&&(c.J?this.Gb():this.notifySubscribers(c.X,"beforeChange"),c.X=f,this.notifySubscribers(c.X,"spectate"),!c.J&&b&&this.notifySubscribers(c.X),this.rc&&this.rc());e&&this.notifySubscribers(c.X,"awake");return d},yd:function(b,c){try{var d=b.Wc;return b.nb?d.call(b.nb):d()}finally{a.u.end(),c.Qb&&!b.J&&a.a.P(c.mb,aa),b.sa=b.ka=!1}},v:function(a){var c=this[r];(c.ka&&(a||!c.V)||c.J&&this.Xa())&&this.ha();return c.X},
ub:function(b){a.T.fn.ub.call(this,b);this.nc=function(){this[r].J||(this[r].sa?this.ha():this[r].ka=!1);return this[r].X};this.Ia=function(a){this.pc(this[r].X);this[r].ka=!0;a&&(this[r].sa=!0);this.qc(this,!a)}},s:function(){var b=this[r];!b.J&&b.I&&a.a.P(b.I,function(a,b){b.s&&b.s()});b.l&&b.Rb&&a.a.K.yb(b.l,b.Rb);b.I=n;b.V=0;b.ra=!0;b.sa=!1;b.ka=!1;b.J=!1;b.l=n;b.Sa=n;b.Wc=n;this.Nc||(b.nb=n)}},da={Qa:function(b){var c=this,d=c[r];if(!d.ra&&d.J&&"change"==b){d.J=!1;if(d.sa||c.Xa())d.I=null,d.V=
0,c.ha()&&c.Gb();else{var e=[];a.a.P(d.I,function(a,b){e[b.Ka]=a});a.a.D(e,function(a,b){var e=d.I[a],m=c.$c(e.da);m.Ka=b;m.La=e.La;d.I[a]=m});c.Xa()&&c.ha()&&c.Gb()}d.ra||c.notifySubscribers(d.X,"awake")}},hb:function(b){var c=this[r];c.ra||"change"!=b||this.Wa("change")||(a.a.P(c.I,function(a,b){b.s&&(c.I[a]={da:b.da,Ka:b.Ka,La:b.La},b.s())}),c.J=!0,this.notifySubscribers(n,"asleep"))},ob:function(){var b=this[r];b.J&&(b.sa||this.Xa())&&this.ha();return a.T.fn.ob.call(this)}},ea={Qa:function(a){"change"!=
a&&"beforeChange"!=a||this.v()}};a.a.Ba&&a.a.setPrototypeOf(C,a.T.fn);var N=a.ta.Ma;C[N]=a.o;a.Oc=function(a){return"function"==typeof a&&a[N]===C[N]};a.Fd=function(b){return a.Oc(b)&&b[r]&&b[r].wb};a.b("computed",a.o);a.b("dependentObservable",a.o);a.b("isComputed",a.Oc);a.b("isPureComputed",a.Fd);a.b("computed.fn",C);a.L(C,"peek",C.v);a.L(C,"dispose",C.s);a.L(C,"isActive",C.ja);a.L(C,"getDependenciesCount",C.qa);a.L(C,"getDependencies",C.Va);a.xb=function(b,c){if("function"===typeof b)return a.o(b,
c,{pure:!0});b=a.a.extend({},b);b.pure=!0;return a.o(b,c)};a.b("pureComputed",a.xb);(function(){function b(a,f,g){g=g||new d;a=f(a);if("object"!=typeof a||null===a||a===n||a instanceof RegExp||a instanceof Date||a instanceof String||a instanceof Number||a instanceof Boolean)return a;var h=a instanceof Array?[]:{};g.save(a,h);c(a,function(c){var d=f(a[c]);switch(typeof d){case "boolean":case "number":case "string":case "function":h[c]=d;break;case "object":case "undefined":var l=g.get(d);h[c]=l!==
n?l:b(d,f,g)}});return h}function c(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++)b(c);"function"==typeof a.toJSON&&b("toJSON")}else for(c in a)b(c)}function d(){this.keys=[];this.values=[]}a.ad=function(c){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return b(c,function(b){for(var c=0;a.O(b)&&10>c;c++)b=b();return b})};a.toJSON=function(b,c,d){b=a.ad(b);return a.a.hc(b,c,d)};d.prototype={constructor:d,save:function(b,c){var d=a.a.A(this.keys,
b);0<=d?this.values[d]=c:(this.keys.push(b),this.values.push(c))},get:function(b){b=a.a.A(this.keys,b);return 0<=b?this.values[b]:n}}})();a.b("toJS",a.ad);a.b("toJSON",a.toJSON);a.Wd=function(b,c,d){function e(c){var e=a.xb(b,d).extend({ma:"always"}),h=e.subscribe(function(a){a&&(h.s(),c(a))});e.notifySubscribers(e.v());return h}return"function"!==typeof Promise||c?e(c.bind(d)):new Promise(e)};a.b("when",a.Wd);(function(){a.w={M:function(b){switch(a.a.R(b)){case "option":return!0===b.__ko__hasDomDataOptionValue__?
a.a.g.get(b,a.c.options.$b):7>=a.a.W?b.getAttributeNode("value")&&b.getAttributeNode("value").specified?b.value:b.text:b.value;case "select":return 0<=b.selectedIndex?a.w.M(b.options[b.selectedIndex]):n;default:return b.value}},cb:function(b,c,d){switch(a.a.R(b)){case "option":"string"===typeof c?(a.a.g.set(b,a.c.options.$b,n),"__ko__hasDomDataOptionValue__"in b&&delete b.__ko__hasDomDataOptionValue__,b.value=c):(a.a.g.set(b,a.c.options.$b,c),b.__ko__hasDomDataOptionValue__=!0,b.value="number"===
typeof c?c:"");break;case "select":if(""===c||null===c)c=n;for(var e=-1,f=0,g=b.options.length,h;f<g;++f)if(h=a.w.M(b.options[f]),h==c||""===h&&c===n){e=f;break}if(d||0<=e||c===n&&1<b.size)b.selectedIndex=e,6===a.a.W&&a.a.setTimeout(function(){b.selectedIndex=e},0);break;default:if(null===c||c===n)c="";b.value=c}}}})();a.b("selectExtensions",a.w);a.b("selectExtensions.readValue",a.w.M);a.b("selectExtensions.writeValue",a.w.cb);a.m=function(){function b(b){b=a.a.Db(b);123===b.charCodeAt(0)&&(b=b.slice(1,
-1));b+="\n,";var c=[],d=b.match(e),p,q=[],h=0;if(1<d.length){for(var x=0,B;B=d[x];++x){var u=B.charCodeAt(0);if(44===u){if(0>=h){c.push(p&&q.length?{key:p,value:q.join("")}:{unknown:p||q.join("")});p=h=0;q=[];continue}}else if(58===u){if(!h&&!p&&1===q.length){p=q.pop();continue}}else if(47===u&&1<B.length&&(47===B.charCodeAt(1)||42===B.charCodeAt(1)))continue;else 47===u&&x&&1<B.length?(u=d[x-1].match(f))&&!g[u[0]]&&(b=b.substr(b.indexOf(B)+1),d=b.match(e),x=-1,B="/"):40===u||123===u||91===u?++h:
41===u||125===u||93===u?--h:p||q.length||34!==u&&39!==u||(B=B.slice(1,-1));q.push(B)}if(0<h)throw Error("Unbalanced parentheses, braces, or brackets");}return c}var c=["true","false","null","undefined"],d=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,e=RegExp("\"(?:\\\\.|[^\"])*\"|'(?:\\\\.|[^'])*'|`(?:\\\\.|[^`])*`|/\\*(?:[^*]|\\*+[^*/])*\\*+/|//.*\n|/(?:\\\\.|[^/])+/w*|[^\\s:,/][^,\"'`{}()/:[\\]]*[^\\s,\"'`{}()/:[\\]]|[^\\s]","g"),f=/[\])"'A-Za-z0-9_$]+$/,g={"in":1,"return":1,"typeof":1},
h={};return{Ra:[],wa:h,ac:b,vb:function(e,f){function l(b,e){var f;if(!x){var k=a.getBindingHandler(b);if(k&&k.preprocess&&!(e=k.preprocess(e,b,l)))return;if(k=h[b])f=e,0<=a.a.A(c,f)?f=!1:(k=f.match(d),f=null===k?!1:k[1]?"Object("+k[1]+")"+k[2]:f),k=f;k&&q.push("'"+("string"==typeof h[b]?h[b]:b)+"':function(_z){"+f+"=_z}")}g&&(e="function(){return "+e+" }");p.push("'"+b+"':"+e)}f=f||{};var p=[],q=[],g=f.valueAccessors,x=f.bindingParams,B="string"===typeof e?b(e):e;a.a.D(B,function(a){l(a.key||a.unknown,
a.value)});q.length&&l("_ko_property_writers","{"+q.join(",")+" }");return p.join(",")},Id:function(a,b){for(var c=0;c<a.length;c++)if(a[c].key==b)return!0;return!1},eb:function(b,c,d,e,f){if(b&&a.O(b))!a.Za(b)||f&&b.v()===e||b(e);else if((b=c.get("_ko_property_writers"))&&b[d])b[d](e)}}}();a.b("expressionRewriting",a.m);a.b("expressionRewriting.bindingRewriteValidators",a.m.Ra);a.b("expressionRewriting.parseObjectLiteral",a.m.ac);a.b("expressionRewriting.preProcessBindings",a.m.vb);a.b("expressionRewriting._twoWayBindings",
a.m.wa);a.b("jsonExpressionRewriting",a.m);a.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",a.m.vb);(function(){function b(a){return 8==a.nodeType&&g.test(f?a.text:a.nodeValue)}function c(a){return 8==a.nodeType&&h.test(f?a.text:a.nodeValue)}function d(d,e){for(var f=d,h=1,g=[];f=f.nextSibling;){if(c(f)&&(a.a.g.set(f,k,!0),h--,0===h))return g;g.push(f);b(f)&&h++}if(!e)throw Error("Cannot find closing comment tag to match: "+d.nodeValue);return null}function e(a,b){var c=d(a,b);return c?
0<c.length?c[c.length-1].nextSibling:a.nextSibling:null}var f=w&&"\x3c!--test--\x3e"===w.createComment("test").text,g=f?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,h=f?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,m={ul:!0,ol:!0},k="__ko_matchedEndComment__";a.h={ea:{},childNodes:function(a){return b(a)?d(a):a.childNodes},Ea:function(c){if(b(c)){c=a.h.childNodes(c);for(var d=0,e=c.length;d<e;d++)a.removeNode(c[d])}else a.a.Tb(c)},va:function(c,d){if(b(c)){a.h.Ea(c);for(var e=
c.nextSibling,f=0,k=d.length;f<k;f++)e.parentNode.insertBefore(d[f],e)}else a.a.va(c,d)},Vc:function(a,c){var d;b(a)?(d=a.nextSibling,a=a.parentNode):d=a.firstChild;d?c!==d&&a.insertBefore(c,d):a.appendChild(c)},Wb:function(c,d,e){e?(e=e.nextSibling,b(c)&&(c=c.parentNode),e?d!==e&&c.insertBefore(d,e):c.appendChild(d)):a.h.Vc(c,d)},firstChild:function(a){if(b(a))return!a.nextSibling||c(a.nextSibling)?null:a.nextSibling;if(a.firstChild&&c(a.firstChild))throw Error("Found invalid end comment, as the first child of "+
a);return a.firstChild},nextSibling:function(d){b(d)&&(d=e(d));if(d.nextSibling&&c(d.nextSibling)){var f=d.nextSibling;if(c(f)&&!a.a.g.get(f,k))throw Error("Found end comment without a matching opening comment, as child of "+d);return null}return d.nextSibling},Cd:b,Vd:function(a){return(a=(f?a.text:a.nodeValue).match(g))?a[1]:null},Sc:function(d){if(m[a.a.R(d)]){var f=d.firstChild;if(f){do if(1===f.nodeType){var k;k=f.firstChild;var h=null;if(k){do if(h)h.push(k);else if(b(k)){var g=e(k,!0);g?k=
g:h=[k]}else c(k)&&(h=[k]);while(k=k.nextSibling)}if(k=h)for(h=f.nextSibling,g=0;g<k.length;g++)h?d.insertBefore(k[g],h):d.appendChild(k[g])}while(f=f.nextSibling)}}}}})();a.b("virtualElements",a.h);a.b("virtualElements.allowedBindings",a.h.ea);a.b("virtualElements.emptyNode",a.h.Ea);a.b("virtualElements.insertAfter",a.h.Wb);a.b("virtualElements.prepend",a.h.Vc);a.b("virtualElements.setDomNodeChildren",a.h.va);(function(){a.ga=function(){this.nd={}};a.a.extend(a.ga.prototype,{nodeHasBindings:function(b){switch(b.nodeType){case 1:return null!=
b.getAttribute("data-bind")||a.j.getComponentNameForNode(b);case 8:return a.h.Cd(b);default:return!1}},getBindings:function(b,c){var d=this.getBindingsString(b,c),d=d?this.parseBindingsString(d,c,b):null;return a.j.tc(d,b,c,!1)},getBindingAccessors:function(b,c){var d=this.getBindingsString(b,c),d=d?this.parseBindingsString(d,c,b,{valueAccessors:!0}):null;return a.j.tc(d,b,c,!0)},getBindingsString:function(b){switch(b.nodeType){case 1:return b.getAttribute("data-bind");case 8:return a.h.Vd(b);default:return null}},
parseBindingsString:function(b,c,d,e){try{var f=this.nd,g=b+(e&&e.valueAccessors||""),h;if(!(h=f[g])){var m,k="with($context){with($data||{}){return{"+a.m.vb(b,e)+"}}}";m=new Function("$context","$element",k);h=f[g]=m}return h(c,d)}catch(l){throw l.message="Unable to parse bindings.\nBindings value: "+b+"\nMessage: "+l.message,l;}}});a.ga.instance=new a.ga})();a.b("bindingProvider",a.ga);(function(){function b(b){var c=(b=a.a.g.get(b,z))&&b.N;c&&(b.N=null,c.Tc())}function c(c,d,e){this.node=c;this.yc=
d;this.kb=[];this.H=!1;d.N||a.a.K.za(c,b);e&&e.N&&(e.N.kb.push(c),this.Kb=e)}function d(a){return function(){return a}}function e(a){return a()}function f(b){return a.a.Ga(a.u.G(b),function(a,c){return function(){return b()[c]}})}function g(b,c,e){return"function"===typeof b?f(b.bind(null,c,e)):a.a.Ga(b,d)}function h(a,b){return f(this.getBindings.bind(this,a,b))}function m(b,c){var d=a.h.firstChild(c);if(d){var e,f=a.ga.instance,l=f.preprocessNode;if(l){for(;e=d;)d=a.h.nextSibling(e),l.call(f,e);
d=a.h.firstChild(c)}for(;e=d;)d=a.h.nextSibling(e),k(b,e)}a.i.ma(c,a.i.H)}function k(b,c){var d=b,e=1===c.nodeType;e&&a.h.Sc(c);if(e||a.ga.instance.nodeHasBindings(c))d=p(c,null,b).bindingContextForDescendants;d&&!u[a.a.R(c)]&&m(d,c)}function l(b){var c=[],d={},e=[];a.a.P(b,function ca(f){if(!d[f]){var k=a.getBindingHandler(f);k&&(k.after&&(e.push(f),a.a.D(k.after,function(c){if(b[c]){if(-1!==a.a.A(e,c))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+e.join(", "));
ca(c)}}),e.length--),c.push({key:f,Mc:k}));d[f]=!0}});return c}function p(b,c,d){var f=a.a.g.Ub(b,z,{}),k=f.hd;if(!c){if(k)throw Error("You cannot apply bindings multiple times to the same element.");f.hd=!0}k||(f.context=d);f.Zb||(f.Zb={});var g;if(c&&"function"!==typeof c)g=c;else{var p=a.ga.instance,q=p.getBindingAccessors||h,m=a.$(function(){if(g=c?c(d,b):q.call(p,b,d)){if(d[t])d[t]();if(d[B])d[B]()}return g},null,{l:b});g&&m.ja()||(m=null)}var x=d,u;if(g){var J=function(){return a.a.Ga(m?m():
g,e)},r=m?function(a){return function(){return e(m()[a])}}:function(a){return g[a]};J.get=function(a){return g[a]&&e(r(a))};J.has=function(a){return a in g};a.i.H in g&&a.i.subscribe(b,a.i.H,function(){var c=(0,g[a.i.H])();if(c){var d=a.h.childNodes(b);d.length&&c(d,a.Ec(d[0]))}});a.i.pa in g&&(x=a.i.Cb(b,d),a.i.subscribe(b,a.i.pa,function(){var c=(0,g[a.i.pa])();c&&a.h.firstChild(b)&&c(b)}));f=l(g);a.a.D(f,function(c){var d=c.Mc.init,e=c.Mc.update,f=c.key;if(8===b.nodeType&&!a.h.ea[f])throw Error("The binding '"+
f+"' cannot be used with virtual elements");try{"function"==typeof d&&a.u.G(function(){var a=d(b,r(f),J,x.$data,x);if(a&&a.controlsDescendantBindings){if(u!==n)throw Error("Multiple bindings ("+u+" and "+f+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");u=f}}),"function"==typeof e&&a.$(function(){e(b,r(f),J,x.$data,x)},null,{l:b})}catch(k){throw k.message='Unable to process binding "'+f+": "+g[f]+'"\nMessage: '+k.message,
k;}})}f=u===n;return{shouldBindDescendants:f,bindingContextForDescendants:f&&x}}function q(b,c){return b&&b instanceof a.fa?b:new a.fa(b,n,n,c)}var t=a.a.Da("_subscribable"),x=a.a.Da("_ancestorBindingInfo"),B=a.a.Da("_dataDependency");a.c={};var u={script:!0,textarea:!0,template:!0};a.getBindingHandler=function(b){return a.c[b]};var J={};a.fa=function(b,c,d,e,f){function k(){var b=p?h():h,f=a.a.f(b);c?(a.a.extend(l,c),x in c&&(l[x]=c[x])):(l.$parents=[],l.$root=f,l.ko=a);l[t]=q;g?f=l.$data:(l.$rawData=
b,l.$data=f);d&&(l[d]=f);e&&e(l,c,f);if(c&&c[t]&&!a.S.o().Vb(c[t]))c[t]();m&&(l[B]=m);return l.$data}var l=this,g=b===J,h=g?n:b,p="function"==typeof h&&!a.O(h),q,m=f&&f.dataDependency;f&&f.exportDependencies?k():(q=a.xb(k),q.v(),q.ja()?q.equalityComparer=null:l[t]=n)};a.fa.prototype.createChildContext=function(b,c,d,e){!e&&c&&"object"==typeof c&&(e=c,c=e.as,d=e.extend);if(c&&e&&e.noChildContext){var f="function"==typeof b&&!a.O(b);return new a.fa(J,this,null,function(a){d&&d(a);a[c]=f?b():b},e)}return new a.fa(b,
this,c,function(a,b){a.$parentContext=b;a.$parent=b.$data;a.$parents=(b.$parents||[]).slice(0);a.$parents.unshift(a.$parent);d&&d(a)},e)};a.fa.prototype.extend=function(b,c){return new a.fa(J,this,null,function(c){a.a.extend(c,"function"==typeof b?b(c):b)},c)};var z=a.a.g.Z();c.prototype.Tc=function(){this.Kb&&this.Kb.N&&this.Kb.N.sd(this.node)};c.prototype.sd=function(b){a.a.Pa(this.kb,b);!this.kb.length&&this.H&&this.Cc()};c.prototype.Cc=function(){this.H=!0;this.yc.N&&!this.kb.length&&(this.yc.N=
null,a.a.K.yb(this.node,b),a.i.ma(this.node,a.i.pa),this.Tc())};a.i={H:"childrenComplete",pa:"descendantsComplete",subscribe:function(b,c,d,e,f){var k=a.a.g.Ub(b,z,{});k.Fa||(k.Fa=new a.T);f&&f.notifyImmediately&&k.Zb[c]&&a.u.G(d,e,[b]);return k.Fa.subscribe(d,e,c)},ma:function(b,c){var d=a.a.g.get(b,z);if(d&&(d.Zb[c]=!0,d.Fa&&d.Fa.notifySubscribers(b,c),c==a.i.H))if(d.N)d.N.Cc();else if(d.N===n&&d.Fa&&d.Fa.Wa(a.i.pa))throw Error("descendantsComplete event not supported for bindings on this node");
},Cb:function(b,d){var e=a.a.g.Ub(b,z,{});e.N||(e.N=new c(b,e,d[x]));return d[x]==e?d:d.extend(function(a){a[x]=e})}};a.Td=function(b){return(b=a.a.g.get(b,z))&&b.context};a.ib=function(b,c,d){1===b.nodeType&&a.h.Sc(b);return p(b,c,q(d))};a.ld=function(b,c,d){d=q(d);return a.ib(b,g(c,d,b),d)};a.Oa=function(a,b){1!==b.nodeType&&8!==b.nodeType||m(q(a),b)};a.vc=function(a,b,c){!v&&A.jQuery&&(v=A.jQuery);if(2>arguments.length){if(b=w.body,!b)throw Error("ko.applyBindings: could not find document.body; has the document been loaded?");
}else if(!b||1!==b.nodeType&&8!==b.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");k(q(a,c),b)};a.Dc=function(b){return!b||1!==b.nodeType&&8!==b.nodeType?n:a.Td(b)};a.Ec=function(b){return(b=a.Dc(b))?b.$data:n};a.b("bindingHandlers",a.c);a.b("bindingEvent",a.i);a.b("bindingEvent.subscribe",a.i.subscribe);a.b("bindingEvent.startPossiblyAsyncContentBinding",a.i.Cb);a.b("applyBindings",a.vc);a.b("applyBindingsToDescendants",a.Oa);
a.b("applyBindingAccessorsToNode",a.ib);a.b("applyBindingsToNode",a.ld);a.b("contextFor",a.Dc);a.b("dataFor",a.Ec)})();(function(b){function c(c,e){var k=Object.prototype.hasOwnProperty.call(f,c)?f[c]:b,l;k?k.subscribe(e):(k=f[c]=new a.T,k.subscribe(e),d(c,function(b,d){var e=!(!d||!d.synchronous);g[c]={definition:b,Gd:e};delete f[c];l||e?k.notifySubscribers(b):a.na.zb(function(){k.notifySubscribers(b)})}),l=!0)}function d(a,b){e("getConfig",[a],function(c){c?e("loadComponent",[a,c],function(a){b(a,
c)}):b(null,null)})}function e(c,d,f,l){l||(l=a.j.loaders.slice(0));var g=l.shift();if(g){var q=g[c];if(q){var t=!1;if(q.apply(g,d.concat(function(a){t?f(null):null!==a?f(a):e(c,d,f,l)}))!==b&&(t=!0,!g.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.");}else e(c,d,f,l)}else f(null)}var f={},g={};a.j={get:function(d,e){var f=Object.prototype.hasOwnProperty.call(g,d)?g[d]:b;f?f.Gd?a.u.G(function(){e(f.definition)}):
a.na.zb(function(){e(f.definition)}):c(d,e)},Bc:function(a){delete g[a]},oc:e};a.j.loaders=[];a.b("components",a.j);a.b("components.get",a.j.get);a.b("components.clearCachedDefinition",a.j.Bc)})();(function(){function b(b,c,d,e){function g(){0===--B&&e(h)}var h={},B=2,u=d.template;d=d.viewModel;u?f(c,u,function(c){a.j.oc("loadTemplate",[b,c],function(a){h.template=a;g()})}):g();d?f(c,d,function(c){a.j.oc("loadViewModel",[b,c],function(a){h[m]=a;g()})}):g()}function c(a,b,d){if("function"===typeof b)d(function(a){return new b(a)});
else if("function"===typeof b[m])d(b[m]);else if("instance"in b){var e=b.instance;d(function(){return e})}else"viewModel"in b?c(a,b.viewModel,d):a("Unknown viewModel value: "+b)}function d(b){switch(a.a.R(b)){case "script":return a.a.ua(b.text);case "textarea":return a.a.ua(b.value);case "template":if(e(b.content))return a.a.Ca(b.content.childNodes)}return a.a.Ca(b.childNodes)}function e(a){return A.DocumentFragment?a instanceof DocumentFragment:a&&11===a.nodeType}function f(a,b,c){"string"===typeof b.require?
T||A.require?(T||A.require)([b.require],function(a){a&&"object"===typeof a&&a.Xd&&a["default"]&&(a=a["default"]);c(a)}):a("Uses require, but no AMD loader is present"):c(b)}function g(a){return function(b){throw Error("Component '"+a+"': "+b);}}var h={};a.j.register=function(b,c){if(!c)throw Error("Invalid configuration for "+b);if(a.j.tb(b))throw Error("Component "+b+" is already registered");h[b]=c};a.j.tb=function(a){return Object.prototype.hasOwnProperty.call(h,a)};a.j.unregister=function(b){delete h[b];
a.j.Bc(b)};a.j.Fc={getConfig:function(b,c){c(a.j.tb(b)?h[b]:null)},loadComponent:function(a,c,d){var e=g(a);f(e,c,function(c){b(a,e,c,d)})},loadTemplate:function(b,c,f){b=g(b);if("string"===typeof c)f(a.a.ua(c));else if(c instanceof Array)f(c);else if(e(c))f(a.a.la(c.childNodes));else if(c.element)if(c=c.element,A.HTMLElement?c instanceof HTMLElement:c&&c.tagName&&1===c.nodeType)f(d(c));else if("string"===typeof c){var h=w.getElementById(c);h?f(d(h)):b("Cannot find element with ID "+c)}else b("Unknown element type: "+
c);else b("Unknown template value: "+c)},loadViewModel:function(a,b,d){c(g(a),b,d)}};var m="createViewModel";a.b("components.register",a.j.register);a.b("components.isRegistered",a.j.tb);a.b("components.unregister",a.j.unregister);a.b("components.defaultLoader",a.j.Fc);a.j.loaders.push(a.j.Fc);a.j.dd=h})();(function(){function b(b,e){var f=b.getAttribute("params");if(f){var f=c.parseBindingsString(f,e,b,{valueAccessors:!0,bindingParams:!0}),f=a.a.Ga(f,function(c){return a.o(c,null,{l:b})}),g=a.a.Ga(f,
function(c){var e=c.v();return c.ja()?a.o({read:function(){return a.a.f(c())},write:a.Za(e)&&function(a){c()(a)},l:b}):e});Object.prototype.hasOwnProperty.call(g,"$raw")||(g.$raw=f);return g}return{$raw:{}}}a.j.getComponentNameForNode=function(b){var c=a.a.R(b);if(a.j.tb(c)&&(-1!=c.indexOf("-")||"[object HTMLUnknownElement]"==""+b||8>=a.a.W&&b.tagName===c))return c};a.j.tc=function(c,e,f,g){if(1===e.nodeType){var h=a.j.getComponentNameForNode(e);if(h){c=c||{};if(c.component)throw Error('Cannot use the "component" binding on a custom element matching a component');
var m={name:h,params:b(e,f)};c.component=g?function(){return m}:m}}return c};var c=new a.ga;9>a.a.W&&(a.j.register=function(a){return function(b){return a.apply(this,arguments)}}(a.j.register),w.createDocumentFragment=function(b){return function(){var c=b(),f=a.j.dd,g;for(g in f);return c}}(w.createDocumentFragment))})();(function(){function b(b,c,d){c=c.template;if(!c)throw Error("Component '"+b+"' has no template");b=a.a.Ca(c);a.h.va(d,b)}function c(a,b,c){var d=a.createViewModel;return d?d.call(a,
b,c):b}var d=0;a.c.component={init:function(e,f,g,h,m){function k(){var a=l&&l.dispose;"function"===typeof a&&a.call(l);q&&q.s();p=l=q=null}var l,p,q,t=a.a.la(a.h.childNodes(e));a.h.Ea(e);a.a.K.za(e,k);a.o(function(){var g=a.a.f(f()),h,u;"string"===typeof g?h=g:(h=a.a.f(g.name),u=a.a.f(g.params));if(!h)throw Error("No component name specified");var n=a.i.Cb(e,m),z=p=++d;a.j.get(h,function(d){if(p===z){k();if(!d)throw Error("Unknown component '"+h+"'");b(h,d,e);var f=c(d,u,{element:e,templateNodes:t});
d=n.createChildContext(f,{extend:function(a){a.$component=f;a.$componentTemplateNodes=t}});f&&f.koDescendantsComplete&&(q=a.i.subscribe(e,a.i.pa,f.koDescendantsComplete,f));l=f;a.Oa(d,e)}})},null,{l:e});return{controlsDescendantBindings:!0}}};a.h.ea.component=!0})();var V={"class":"className","for":"htmlFor"};a.c.attr={update:function(b,c){var d=a.a.f(c())||{};a.a.P(d,function(c,d){d=a.a.f(d);var g=c.indexOf(":"),g="lookupNamespaceURI"in b&&0<g&&b.lookupNamespaceURI(c.substr(0,g)),h=!1===d||null===
d||d===n;h?g?b.removeAttributeNS(g,c):b.removeAttribute(c):d=d.toString();8>=a.a.W&&c in V?(c=V[c],h?b.removeAttribute(c):b[c]=d):h||(g?b.setAttributeNS(g,c,d):b.setAttribute(c,d));"name"===c&&a.a.Yc(b,h?"":d)})}};(function(){a.c.checked={after:["value","attr"],init:function(b,c,d){function e(){var e=b.checked,f=g();if(!a.S.Ya()&&(e||!m&&!a.S.qa())){var k=a.u.G(c);if(l){var q=p?k.v():k,z=t;t=f;z!==f?e&&(a.a.Na(q,f,!0),a.a.Na(q,z,!1)):a.a.Na(q,f,e);p&&a.Za(k)&&k(q)}else h&&(f===n?f=e:e||(f=n)),a.m.eb(k,
d,"checked",f,!0)}}function f(){var d=a.a.f(c()),e=g();l?(b.checked=0<=a.a.A(d,e),t=e):b.checked=h&&e===n?!!d:g()===d}var g=a.xb(function(){if(d.has("checkedValue"))return a.a.f(d.get("checkedValue"));if(q)return d.has("value")?a.a.f(d.get("value")):b.value}),h="checkbox"==b.type,m="radio"==b.type;if(h||m){var k=c(),l=h&&a.a.f(k)instanceof Array,p=!(l&&k.push&&k.splice),q=m||l,t=l?g():n;m&&!b.name&&a.c.uniqueName.init(b,function(){return!0});a.o(e,null,{l:b});a.a.B(b,"click",e);a.o(f,null,{l:b});
k=n}}};a.m.wa.checked=!0;a.c.checkedValue={update:function(b,c){b.value=a.a.f(c())}}})();a.c["class"]={update:function(b,c){var d=a.a.Db(a.a.f(c()));a.a.Eb(b,b.__ko__cssValue,!1);b.__ko__cssValue=d;a.a.Eb(b,d,!0)}};a.c.css={update:function(b,c){var d=a.a.f(c());null!==d&&"object"==typeof d?a.a.P(d,function(c,d){d=a.a.f(d);a.a.Eb(b,c,d)}):a.c["class"].update(b,c)}};a.c.enable={update:function(b,c){var d=a.a.f(c());d&&b.disabled?b.removeAttribute("disabled"):d||b.disabled||(b.disabled=!0)}};a.c.disable=
{update:function(b,c){a.c.enable.update(b,function(){return!a.a.f(c())})}};a.c.event={init:function(b,c,d,e,f){var g=c()||{};a.a.P(g,function(g){"string"==typeof g&&a.a.B(b,g,function(b){var k,l=c()[g];if(l){try{var p=a.a.la(arguments);e=f.$data;p.unshift(e);k=l.apply(e,p)}finally{!0!==k&&(b.preventDefault?b.preventDefault():b.returnValue=!1)}!1===d.get(g+"Bubble")&&(b.cancelBubble=!0,b.stopPropagation&&b.stopPropagation())}})})}};a.c.foreach={Rc:function(b){return function(){var c=b(),d=a.a.bc(c);
if(!d||"number"==typeof d.length)return{foreach:c,templateEngine:a.ba.Ma};a.a.f(c);return{foreach:d.data,as:d.as,noChildContext:d.noChildContext,includeDestroyed:d.includeDestroyed,afterAdd:d.afterAdd,beforeRemove:d.beforeRemove,afterRender:d.afterRender,beforeMove:d.beforeMove,afterMove:d.afterMove,templateEngine:a.ba.Ma}}},init:function(b,c){return a.c.template.init(b,a.c.foreach.Rc(c))},update:function(b,c,d,e,f){return a.c.template.update(b,a.c.foreach.Rc(c),d,e,f)}};a.m.Ra.foreach=!1;a.h.ea.foreach=
!0;a.c.hasfocus={init:function(b,c,d){function e(e){b.__ko_hasfocusUpdating=!0;var f=b.ownerDocument;if("activeElement"in f){var g;try{g=f.activeElement}catch(l){g=f.body}e=g===b}f=c();a.m.eb(f,d,"hasfocus",e,!0);b.__ko_hasfocusLastValue=e;b.__ko_hasfocusUpdating=!1}var f=e.bind(null,!0),g=e.bind(null,!1);a.a.B(b,"focus",f);a.a.B(b,"focusin",f);a.a.B(b,"blur",g);a.a.B(b,"focusout",g);b.__ko_hasfocusLastValue=!1},update:function(b,c){var d=!!a.a.f(c());b.__ko_hasfocusUpdating||b.__ko_hasfocusLastValue===
d||(d?b.focus():b.blur(),!d&&b.__ko_hasfocusLastValue&&b.ownerDocument.body.focus(),a.u.G(a.a.Fb,null,[b,d?"focusin":"focusout"]))}};a.m.wa.hasfocus=!0;a.c.hasFocus=a.c.hasfocus;a.m.wa.hasFocus="hasfocus";a.c.html={init:function(){return{controlsDescendantBindings:!0}},update:function(b,c){a.a.fc(b,c())}};(function(){function b(b,d,e){a.c[b]={init:function(b,c,h,m,k){var l,p,q={},t,x,n;if(d){m=h.get("as");var u=h.get("noChildContext");n=!(m&&u);q={as:m,noChildContext:u,exportDependencies:n}}x=(t=
"render"==h.get("completeOn"))||h.has(a.i.pa);a.o(function(){var h=a.a.f(c()),m=!e!==!h,u=!p,r;if(n||m!==l){x&&(k=a.i.Cb(b,k));if(m){if(!d||n)q.dataDependency=a.S.o();r=d?k.createChildContext("function"==typeof h?h:c,q):a.S.qa()?k.extend(null,q):k}u&&a.S.qa()&&(p=a.a.Ca(a.h.childNodes(b),!0));m?(u||a.h.va(b,a.a.Ca(p)),a.Oa(r,b)):(a.h.Ea(b),t||a.i.ma(b,a.i.H));l=m}},null,{l:b});return{controlsDescendantBindings:!0}}};a.m.Ra[b]=!1;a.h.ea[b]=!0}b("if");b("ifnot",!1,!0);b("with",!0)})();a.c.let={init:function(b,
c,d,e,f){c=f.extend(c);a.Oa(c,b);return{controlsDescendantBindings:!0}}};a.h.ea.let=!0;var Q={};a.c.options={init:function(b){if("select"!==a.a.R(b))throw Error("options binding applies only to SELECT elements");for(;0<b.length;)b.remove(0);return{controlsDescendantBindings:!0}},update:function(b,c,d){function e(){return a.a.jb(b.options,function(a){return a.selected})}function f(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}function g(c,d){if(x&&l)a.i.ma(b,a.i.H);else if(t.length){var e=
0<=a.a.A(t,a.w.M(d[0]));a.a.Zc(d[0],e);x&&!e&&a.u.G(a.a.Fb,null,[b,"change"])}}var h=b.multiple,m=0!=b.length&&h?b.scrollTop:null,k=a.a.f(c()),l=d.get("valueAllowUnset")&&d.has("value"),p=d.get("optionsIncludeDestroyed");c={};var q,t=[];l||(h?t=a.a.Mb(e(),a.w.M):0<=b.selectedIndex&&t.push(a.w.M(b.options[b.selectedIndex])));k&&("undefined"==typeof k.length&&(k=[k]),q=a.a.jb(k,function(b){return p||b===n||null===b||!a.a.f(b._destroy)}),d.has("optionsCaption")&&(k=a.a.f(d.get("optionsCaption")),null!==
k&&k!==n&&q.unshift(Q)));var x=!1;c.beforeRemove=function(a){b.removeChild(a)};k=g;d.has("optionsAfterRender")&&"function"==typeof d.get("optionsAfterRender")&&(k=function(b,c){g(0,c);a.u.G(d.get("optionsAfterRender"),null,[c[0],b!==Q?b:n])});a.a.ec(b,q,function(c,e,g){g.length&&(t=!l&&g[0].selected?[a.w.M(g[0])]:[],x=!0);e=b.ownerDocument.createElement("option");c===Q?(a.a.Bb(e,d.get("optionsCaption")),a.w.cb(e,n)):(g=f(c,d.get("optionsValue"),c),a.w.cb(e,a.a.f(g)),c=f(c,d.get("optionsText"),g),
a.a.Bb(e,c));return[e]},c,k);if(!l){var B;h?B=t.length&&e().length<t.length:B=t.length&&0<=b.selectedIndex?a.w.M(b.options[b.selectedIndex])!==t[0]:t.length||0<=b.selectedIndex;B&&a.u.G(a.a.Fb,null,[b,"change"])}(l||a.S.Ya())&&a.i.ma(b,a.i.H);a.a.wd(b);m&&20<Math.abs(m-b.scrollTop)&&(b.scrollTop=m)}};a.c.options.$b=a.a.g.Z();a.c.selectedOptions={init:function(b,c,d){function e(){var e=c(),f=[];a.a.D(b.getElementsByTagName("option"),function(b){b.selected&&f.push(a.w.M(b))});a.m.eb(e,d,"selectedOptions",
f)}function f(){var d=a.a.f(c()),e=b.scrollTop;d&&"number"==typeof d.length&&a.a.D(b.getElementsByTagName("option"),function(b){var c=0<=a.a.A(d,a.w.M(b));b.selected!=c&&a.a.Zc(b,c)});b.scrollTop=e}if("select"!=a.a.R(b))throw Error("selectedOptions binding applies only to SELECT elements");var g;a.i.subscribe(b,a.i.H,function(){g?e():(a.a.B(b,"change",e),g=a.o(f,null,{l:b}))},null,{notifyImmediately:!0})},update:function(){}};a.m.wa.selectedOptions=!0;a.c.style={update:function(b,c){var d=a.a.f(c()||
{});a.a.P(d,function(c,d){d=a.a.f(d);if(null===d||d===n||!1===d)d="";if(v)v(b).css(c,d);else if(/^--/.test(c))b.style.setProperty(c,d);else{c=c.replace(/-(\w)/g,function(a,b){return b.toUpperCase()});var g=b.style[c];b.style[c]=d;d===g||b.style[c]!=g||isNaN(d)||(b.style[c]=d+"px")}})}};a.c.submit={init:function(b,c,d,e,f){if("function"!=typeof c())throw Error("The value for a submit binding must be a function");a.a.B(b,"submit",function(a){var d,e=c();try{d=e.call(f.$data,b)}finally{!0!==d&&(a.preventDefault?
a.preventDefault():a.returnValue=!1)}})}};a.c.text={init:function(){return{controlsDescendantBindings:!0}},update:function(b,c){a.a.Bb(b,c())}};a.h.ea.text=!0;(function(){if(A&&A.navigator){var b=function(a){if(a)return parseFloat(a[1])},c=A.navigator.userAgent,d,e,f,g,h;(d=A.opera&&A.opera.version&&parseInt(A.opera.version()))||(h=b(c.match(/Edge\/([^ ]+)$/)))||b(c.match(/Chrome\/([^ ]+)/))||(e=b(c.match(/Version\/([^ ]+) Safari/)))||(f=b(c.match(/Firefox\/([^ ]+)/)))||(g=a.a.W||b(c.match(/MSIE ([^ ]+)/)))||
(g=b(c.match(/rv:([^ )]+)/)))}if(8<=g&&10>g)var m=a.a.g.Z(),k=a.a.g.Z(),l=function(b){var c=this.activeElement;(c=c&&a.a.g.get(c,k))&&c(b)},p=function(b,c){var d=b.ownerDocument;a.a.g.get(d,m)||(a.a.g.set(d,m,!0),a.a.B(d,"selectionchange",l));a.a.g.set(b,k,c)};a.c.textInput={init:function(b,c,k){function l(c,d){a.a.B(b,c,d)}function m(){var d=a.a.f(c());if(null===d||d===n)d="";L!==n&&d===L?a.a.setTimeout(m,4):b.value!==d&&(y=!0,b.value=d,y=!1,v=b.value)}function r(){w||(L=b.value,w=a.a.setTimeout(z,
4))}function z(){clearTimeout(w);L=w=n;var d=b.value;v!==d&&(v=d,a.m.eb(c(),k,"textInput",d))}var v=b.value,w,L,A=9==a.a.W?r:z,y=!1;g&&l("keypress",z);11>g&&l("propertychange",function(a){y||"value"!==a.propertyName||A(a)});8==g&&(l("keyup",z),l("keydown",z));p&&(p(b,A),l("dragend",r));(!g||9<=g)&&l("input",A);5>e&&"textarea"===a.a.R(b)?(l("keydown",r),l("paste",r),l("cut",r)):11>d?l("keydown",r):4>f?(l("DOMAutoComplete",z),l("dragdrop",z),l("drop",z)):h&&"number"===b.type&&l("keydown",r);l("change",
z);l("blur",z);a.o(m,null,{l:b})}};a.m.wa.textInput=!0;a.c.textinput={preprocess:function(a,b,c){c("textInput",a)}}})();a.c.uniqueName={init:function(b,c){if(c()){var d="ko_unique_"+ ++a.c.uniqueName.rd;a.a.Yc(b,d)}}};a.c.uniqueName.rd=0;a.c.using={init:function(b,c,d,e,f){var g;d.has("as")&&(g={as:d.get("as"),noChildContext:d.get("noChildContext")});c=f.createChildContext(c,g);a.Oa(c,b);return{controlsDescendantBindings:!0}}};a.h.ea.using=!0;a.c.value={init:function(b,c,d){var e=a.a.R(b),f="input"==
e;if(!f||"checkbox"!=b.type&&"radio"!=b.type){var g=[],h=d.get("valueUpdate"),m=!1,k=null;h&&("string"==typeof h?g=[h]:g=a.a.wc(h),a.a.Pa(g,"change"));var l=function(){k=null;m=!1;var e=c(),f=a.w.M(b);a.m.eb(e,d,"value",f)};!a.a.W||!f||"text"!=b.type||"off"==b.autocomplete||b.form&&"off"==b.form.autocomplete||-1!=a.a.A(g,"propertychange")||(a.a.B(b,"propertychange",function(){m=!0}),a.a.B(b,"focus",function(){m=!1}),a.a.B(b,"blur",function(){m&&l()}));a.a.D(g,function(c){var d=l;a.a.Ud(c,"after")&&
(d=function(){k=a.w.M(b);a.a.setTimeout(l,0)},c=c.substring(5));a.a.B(b,c,d)});var p;p=f&&"file"==b.type?function(){var d=a.a.f(c());null===d||d===n||""===d?b.value="":a.u.G(l)}:function(){var f=a.a.f(c()),g=a.w.M(b);if(null!==k&&f===k)a.a.setTimeout(p,0);else if(f!==g||g===n)"select"===e?(g=d.get("valueAllowUnset"),a.w.cb(b,f,g),g||f===a.w.M(b)||a.u.G(l)):a.w.cb(b,f)};if("select"===e){var q;a.i.subscribe(b,a.i.H,function(){q?d.get("valueAllowUnset")?p():l():(a.a.B(b,"change",l),q=a.o(p,null,{l:b}))},
null,{notifyImmediately:!0})}else a.a.B(b,"change",l),a.o(p,null,{l:b})}else a.ib(b,{checkedValue:c})},update:function(){}};a.m.wa.value=!0;a.c.visible={update:function(b,c){var d=a.a.f(c()),e="none"!=b.style.display;d&&!e?b.style.display="":!d&&e&&(b.style.display="none")}};a.c.hidden={update:function(b,c){a.c.visible.update(b,function(){return!a.a.f(c())})}};(function(b){a.c[b]={init:function(c,d,e,f,g){return a.c.event.init.call(this,c,function(){var a={};a[b]=d();return a},e,f,g)}}})("click");
a.ca=function(){};a.ca.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource");};a.ca.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock");};a.ca.prototype.makeTemplateSource=function(b,c){if("string"==typeof b){c=c||w;var d=c.getElementById(b);if(!d)throw Error("Cannot find template with ID "+b);return new a.C.F(d)}if(1==b.nodeType||8==b.nodeType)return new a.C.ia(b);throw Error("Unknown template type: "+b);};a.ca.prototype.renderTemplate=
function(a,c,d,e){a=this.makeTemplateSource(a,e);return this.renderTemplateSource(a,c,d,e)};a.ca.prototype.isTemplateRewritten=function(a,c){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,c).data("isRewritten")};a.ca.prototype.rewriteTemplate=function(a,c,d){a=this.makeTemplateSource(a,d);c=c(a.text());a.text(c);a.data("isRewritten",!0)};a.b("templateEngine",a.ca);a.kc=function(){function b(b,c,d,h){b=a.m.ac(b);for(var m=a.m.Ra,k=0;k<b.length;k++){var l=b[k].key;if(Object.prototype.hasOwnProperty.call(m,
l)){var p=m[l];if("function"===typeof p){if(l=p(b[k].value))throw Error(l);}else if(!p)throw Error("This template engine does not support the '"+l+"' binding within its templates");}}d="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+a.m.vb(b,{valueAccessors:!0})+" } })()},'"+d.toLowerCase()+"')";return h.createJavaScriptEvaluatorBlock(d)+c}var c=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,
d=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{xd:function(b,c,d){c.isTemplateRewritten(b,d)||c.rewriteTemplate(b,function(b){return a.kc.Ld(b,c)},d)},Ld:function(a,f){return a.replace(c,function(a,c,d,e,l){return b(l,c,d,f)}).replace(d,function(a,c){return b(c,"\x3c!-- ko --\x3e","#comment",f)})},md:function(b,c){return a.aa.Xb(function(d,h){var m=d.nextSibling;m&&m.nodeName.toLowerCase()===c&&a.ib(m,b,h)})}}}();a.b("__tr_ambtns",a.kc.md);(function(){a.C={};a.C.F=function(b){if(this.F=b){var c=
a.a.R(b);this.ab="script"===c?1:"textarea"===c?2:"template"==c&&b.content&&11===b.content.nodeType?3:4}};a.C.F.prototype.text=function(){var b=1===this.ab?"text":2===this.ab?"value":"innerHTML";if(0==arguments.length)return this.F[b];var c=arguments[0];"innerHTML"===b?a.a.fc(this.F,c):this.F[b]=c};var b=a.a.g.Z()+"_";a.C.F.prototype.data=function(c){if(1===arguments.length)return a.a.g.get(this.F,b+c);a.a.g.set(this.F,b+c,arguments[1])};var c=a.a.g.Z();a.C.F.prototype.nodes=function(){var b=this.F;
if(0==arguments.length){var e=a.a.g.get(b,c)||{},f=e.lb||(3===this.ab?b.content:4===this.ab?b:n);if(!f||e.jd){var g=this.text();g&&g!==e.bb&&(f=a.a.Md(g,b.ownerDocument),a.a.g.set(b,c,{lb:f,bb:g,jd:!0}))}return f}e=arguments[0];this.ab!==n&&this.text("");a.a.g.set(b,c,{lb:e})};a.C.ia=function(a){this.F=a};a.C.ia.prototype=new a.C.F;a.C.ia.prototype.constructor=a.C.ia;a.C.ia.prototype.text=function(){if(0==arguments.length){var b=a.a.g.get(this.F,c)||{};b.bb===n&&b.lb&&(b.bb=b.lb.innerHTML);return b.bb}a.a.g.set(this.F,
c,{bb:arguments[0]})};a.b("templateSources",a.C);a.b("templateSources.domElement",a.C.F);a.b("templateSources.anonymousTemplate",a.C.ia)})();(function(){function b(b,c,d){var e;for(c=a.h.nextSibling(c);b&&(e=b)!==c;)b=a.h.nextSibling(e),d(e,b)}function c(c,d){if(c.length){var e=c[0],f=c[c.length-1],g=e.parentNode,h=a.ga.instance,m=h.preprocessNode;if(m){b(e,f,function(a,b){var c=a.previousSibling,d=m.call(h,a);d&&(a===e&&(e=d[0]||b),a===f&&(f=d[d.length-1]||c))});c.length=0;if(!e)return;e===f?c.push(e):
(c.push(e,f),a.a.Ua(c,g))}b(e,f,function(b){1!==b.nodeType&&8!==b.nodeType||a.vc(d,b)});b(e,f,function(b){1!==b.nodeType&&8!==b.nodeType||a.aa.cd(b,[d])});a.a.Ua(c,g)}}function d(a){return a.nodeType?a:0<a.length?a[0]:null}function e(b,e,f,h,m){m=m||{};var n=(b&&d(b)||f||{}).ownerDocument,B=m.templateEngine||g;a.kc.xd(f,B,n);f=B.renderTemplate(f,h,m,n);if("number"!=typeof f.length||0<f.length&&"number"!=typeof f[0].nodeType)throw Error("Template engine must return an array of DOM nodes");n=!1;switch(e){case "replaceChildren":a.h.va(b,
f);n=!0;break;case "replaceNode":a.a.Xc(b,f);n=!0;break;case "ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+e);}n&&(c(f,h),m.afterRender&&a.u.G(m.afterRender,null,[f,h[m.as||"$data"]]),"replaceChildren"==e&&a.i.ma(b,a.i.H));return f}function f(b,c,d){return a.O(b)?b():"function"===typeof b?b(c,d):b}var g;a.gc=function(b){if(b!=n&&!(b instanceof a.ca))throw Error("templateEngine must inherit from ko.templateEngine");g=b};a.dc=function(b,c,h,m,t){h=h||{};if((h.templateEngine||g)==
n)throw Error("Set a template engine before calling renderTemplate");t=t||"replaceChildren";if(m){var x=d(m);return a.$(function(){var g=c&&c instanceof a.fa?c:new a.fa(c,null,null,null,{exportDependencies:!0}),n=f(b,g.$data,g),g=e(m,t,n,g,h);"replaceNode"==t&&(m=g,x=d(m))},null,{Sa:function(){return!x||!a.a.Sb(x)},l:x&&"replaceNode"==t?x.parentNode:x})}return a.aa.Xb(function(d){a.dc(b,c,h,d,"replaceNode")})};a.Qd=function(b,d,g,h,m){function x(b,c){a.u.G(a.a.ec,null,[h,b,u,g,r,c]);a.i.ma(h,a.i.H)}
function r(a,b){c(b,v);g.afterRender&&g.afterRender(b,a);v=null}function u(a,c){v=m.createChildContext(a,{as:z,noChildContext:g.noChildContext,extend:function(a){a.$index=c;z&&(a[z+"Index"]=c)}});var d=f(b,a,v);return e(h,"ignoreTargetNode",d,v,g)}var v,z=g.as,w=!1===g.includeDestroyed||a.options.foreachHidesDestroyed&&!g.includeDestroyed;if(w||g.beforeRemove||!a.Pc(d))return a.$(function(){var b=a.a.f(d)||[];"undefined"==typeof b.length&&(b=[b]);w&&(b=a.a.jb(b,function(b){return b===n||null===b||
!a.a.f(b._destroy)}));x(b)},null,{l:h});x(d.v());var A=d.subscribe(function(a){x(d(),a)},null,"arrayChange");A.l(h);return A};var h=a.a.g.Z(),m=a.a.g.Z();a.c.template={init:function(b,c){var d=a.a.f(c());if("string"==typeof d||"name"in d)a.h.Ea(b);else if("nodes"in d){d=d.nodes||[];if(a.O(d))throw Error('The "nodes" option must be a plain, non-observable array.');var e=d[0]&&d[0].parentNode;e&&a.a.g.get(e,m)||(e=a.a.Yb(d),a.a.g.set(e,m,!0));(new a.C.ia(b)).nodes(e)}else if(d=a.h.childNodes(b),0<d.length)e=
a.a.Yb(d),(new a.C.ia(b)).nodes(e);else throw Error("Anonymous template defined, but no template content was provided");return{controlsDescendantBindings:!0}},update:function(b,c,d,e,f){var g=c();c=a.a.f(g);d=!0;e=null;"string"==typeof c?c={}:(g="name"in c?c.name:b,"if"in c&&(d=a.a.f(c["if"])),d&&"ifnot"in c&&(d=!a.a.f(c.ifnot)),d&&!g&&(d=!1));"foreach"in c?e=a.Qd(g,d&&c.foreach||[],c,b,f):d?(d=f,"data"in c&&(d=f.createChildContext(c.data,{as:c.as,noChildContext:c.noChildContext,exportDependencies:!0})),
e=a.dc(g,d,c,b)):a.h.Ea(b);f=e;(c=a.a.g.get(b,h))&&"function"==typeof c.s&&c.s();a.a.g.set(b,h,!f||f.ja&&!f.ja()?n:f)}};a.m.Ra.template=function(b){b=a.m.ac(b);return 1==b.length&&b[0].unknown||a.m.Id(b,"name")?null:"This template engine does not support anonymous templates nested within its templates"};a.h.ea.template=!0})();a.b("setTemplateEngine",a.gc);a.b("renderTemplate",a.dc);a.a.Kc=function(a,c,d){if(a.length&&c.length){var e,f,g,h,m;for(e=f=0;(!d||e<d)&&(h=a[f]);++f){for(g=0;m=c[g];++g)if(h.value===
m.value){h.moved=m.index;m.moved=h.index;c.splice(g,1);e=g=0;break}e+=g}}};a.a.Pb=function(){function b(b,d,e,f,g){var h=Math.min,m=Math.max,k=[],l,p=b.length,q,n=d.length,r=n-p||1,v=p+n+1,u,w,z;for(l=0;l<=p;l++)for(w=u,k.push(u=[]),z=h(n,l+r),q=m(0,l-1);q<=z;q++)u[q]=q?l?b[l-1]===d[q-1]?w[q-1]:h(w[q]||v,u[q-1]||v)+1:q+1:l+1;h=[];m=[];r=[];l=p;for(q=n;l||q;)n=k[l][q]-1,q&&n===k[l][q-1]?m.push(h[h.length]={status:e,value:d[--q],index:q}):l&&n===k[l-1][q]?r.push(h[h.length]={status:f,value:b[--l],index:l}):
(--q,--l,g.sparse||h.push({status:"retained",value:d[q]}));a.a.Kc(r,m,!g.dontLimitMoves&&10*p);return h.reverse()}return function(a,d,e){e="boolean"===typeof e?{dontLimitMoves:e}:e||{};a=a||[];d=d||[];return a.length<d.length?b(a,d,"added","deleted",e):b(d,a,"deleted","added",e)}}();a.b("utils.compareArrays",a.a.Pb);(function(){function b(b,c,d,h,m){var k=[],l=a.$(function(){var l=c(d,m,a.a.Ua(k,b))||[];0<k.length&&(a.a.Xc(k,l),h&&a.u.G(h,null,[d,l,m]));k.length=0;a.a.Nb(k,l)},null,{l:b,Sa:function(){return!a.a.kd(k)}});
return{Y:k,$:l.ja()?l:n}}var c=a.a.g.Z(),d=a.a.g.Z();a.a.ec=function(e,f,g,h,m,k){function l(b){y={Aa:b,pb:a.ta(w++)};v.push(y);r||F.push(y)}function p(b){y=t[b];w!==y.pb.v()&&D.push(y);y.pb(w++);a.a.Ua(y.Y,e);v.push(y)}function q(b,c){if(b)for(var d=0,e=c.length;d<e;d++)a.a.D(c[d].Y,function(a){b(a,d,c[d].Aa)})}f=f||[];"undefined"==typeof f.length&&(f=[f]);h=h||{};var t=a.a.g.get(e,c),r=!t,v=[],u=0,w=0,z=[],A=[],C=[],D=[],F=[],y,I=0;if(r)a.a.D(f,l);else{if(!k||t&&t._countWaitingForRemove){var E=
a.a.Mb(t,function(a){return a.Aa});k=a.a.Pb(E,f,{dontLimitMoves:h.dontLimitMoves,sparse:!0})}for(var E=0,G,H,K;G=k[E];E++)switch(H=G.moved,K=G.index,G.status){case "deleted":for(;u<K;)p(u++);H===n&&(y=t[u],y.$&&(y.$.s(),y.$=n),a.a.Ua(y.Y,e).length&&(h.beforeRemove&&(v.push(y),I++,y.Aa===d?y=null:C.push(y)),y&&z.push.apply(z,y.Y)));u++;break;case "added":for(;w<K;)p(u++);H!==n?(A.push(v.length),p(H)):l(G.value)}for(;w<f.length;)p(u++);v._countWaitingForRemove=I}a.a.g.set(e,c,v);q(h.beforeMove,D);a.a.D(z,
h.beforeRemove?a.oa:a.removeNode);var M,O,P;try{P=e.ownerDocument.activeElement}catch(N){}if(A.length)for(;(E=A.shift())!=n;){y=v[E];for(M=n;E;)if((O=v[--E].Y)&&O.length){M=O[O.length-1];break}for(f=0;u=y.Y[f];M=u,f++)a.h.Wb(e,u,M)}for(E=0;y=v[E];E++){y.Y||a.a.extend(y,b(e,g,y.Aa,m,y.pb));for(f=0;u=y.Y[f];M=u,f++)a.h.Wb(e,u,M);!y.Ed&&m&&(m(y.Aa,y.Y,y.pb),y.Ed=!0,M=y.Y[y.Y.length-1])}P&&e.ownerDocument.activeElement!=P&&P.focus();q(h.beforeRemove,C);for(E=0;E<C.length;++E)C[E].Aa=d;q(h.afterMove,D);
q(h.afterAdd,F)}})();a.b("utils.setDomNodeChildrenFromArrayMapping",a.a.ec);a.ba=function(){this.allowTemplateRewriting=!1};a.ba.prototype=new a.ca;a.ba.prototype.constructor=a.ba;a.ba.prototype.renderTemplateSource=function(b,c,d,e){if(c=(9>a.a.W?0:b.nodes)?b.nodes():null)return a.a.la(c.cloneNode(!0).childNodes);b=b.text();return a.a.ua(b,e)};a.ba.Ma=new a.ba;a.gc(a.ba.Ma);a.b("nativeTemplateEngine",a.ba);(function(){a.$a=function(){var a=this.Hd=function(){if(!v||!v.tmpl)return 0;try{if(0<=v.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();
this.renderTemplateSource=function(b,e,f,g){g=g||w;f=f||{};if(2>a)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var h=b.data("precompiled");h||(h=b.text()||"",h=v.template(null,"{{ko_with $item.koBindingContext}}"+h+"{{/ko_with}}"),b.data("precompiled",h));b=[e.$data];e=v.extend({koBindingContext:e},f.templateOptions);e=v.tmpl(h,b,e);e.appendTo(g.createElement("div"));v.fragments={};return e};this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+
a+" })()) }}"};this.addTemplate=function(a,b){w.write("<script type='text/html' id='"+a+"'>"+b+"\x3c/script>")};0<a&&(v.tmpl.tag.ko_code={open:"__.push($1 || '');"},v.tmpl.tag.ko_with={open:"with($1) {",close:"} "})};a.$a.prototype=new a.ca;a.$a.prototype.constructor=a.$a;var b=new a.$a;0<b.Hd&&a.gc(b);a.b("jqueryTmplTemplateEngine",a.$a)})()})})();})();

/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojlogger',[],function(){"use strict";var n={LEVEL_NONE:0,LEVEL_ERROR:1,LEVEL_WARN:2,LEVEL_INFO:3,LEVEL_LOG:4,_METHOD_ERROR:"error",_METHOD_WARN:"warn",_METHOD_INFO:"info",_METHOD_LOG:"log"};return n._defaultOptions={level:n.LEVEL_ERROR,writer:null},n._options=n._defaultOptions,n.error=function(o,t){n._write(n.LEVEL_ERROR,n._METHOD_ERROR,arguments)},n.info=function(o,t){n._write(n.LEVEL_INFO,n._METHOD_INFO,arguments)},n.warn=function(o,t){n._write(n.LEVEL_WARN,n._METHOD_WARN,arguments)},n.log=function(o,t){n._write(n.LEVEL_LOG,n._METHOD_LOG,arguments)},n.option=function(o,t){var i,e,r={};if(0===arguments.length){for(e=Object.keys(n._options),i=0;i<e.length;i++)r[e[i]]=n._options[e[i]];return r}if("string"==typeof o&&void 0===t)return void 0===n._options[o]?null:n._options[o];if("string"==typeof o)n._options[o]=t;else{var _=o;for(e=Object.keys(_),i=0;i<e.length;i++)n.option(e[i],_[e[i]])}},n._write=function(o,t,i){if(!(n.option("level")<o)){var e=n._getWriter();if(null!=e){if(1===i.length&&i[0]instanceof Function)i=[i[0]()];e[t]&&e[t].apply?e[t].apply(e,i):e[t]&&(e[t]=Function.prototype.bind.call(e[t],e),n._write(o,t,i))}}},n._getWriter=function(){var o=null;return n.option("writer")?o=n.option("writer"):"undefined"!=typeof window&&void 0!==window.console&&(o=window.console),o},n});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("polyfills",[]),define("promise",["polyfills"],function(){return Promise.polyfill=function(){},Promise}),define('ojs/ojcore-base',["require","ojs/ojlogger","polyfills"],function(e,t){"use strict";var n={};"undefined"!=typeof window?n=window:"undefined"!=typeof self&&(n=self);var r=n.oj,s={version:"9.1.0",revision:"2020-08-05_19-00-35",noConflict:function(){n.oj=r},_registerLegacyNamespaceProp:function(e,t){this[e]=t}};n.oj=s,s.Assert={};s.Assert.forceDebug=function(){s.Assert.DEBUG=!0},s.Assert.clearDebug=function(){s.Assert.DEBUG=!1},s.Assert.isDebug=function(){return!0===s.Assert.DEBUG},s.Assert.assert=function(e,t){if(s.Assert.DEBUG&&!e){var n=t||"";if(arguments.length>2){n+="(";for(var r=2;r<arguments.length;r+=1)n+=arguments[r];n+=")"}s.Assert.assertionFailed(n,1)}},s.Assert.failedInAbstractFunction=function(){s.Assert.DEBUG&&s.Assert.assertionFailed("Abstract function called",1)},s.Assert.assertPrototype=function(e,t,n){if(s.Assert.DEBUG){var r=t.prototype;if(null!=e)s.Assert.assertType(t,"function",null,1,!1),Object.prototype.isPrototypeOf.call(r,e)||s.Assert.assertionFailed("object '"+e+"' doesn't match prototype "+r,1,n);else s.Assert.assertionFailed("null object doesn't match prototype "+r,1,n)}},s.Assert.assertPrototypeOrNull=function(e,t,n){if(s.Assert.DEBUG&&null!=e){s.Assert.assertType(t,"function",null,1,!1);var r=t.prototype;Object.prototype.isPrototypeOf.call(r,e)||s.Assert.assertionFailed("object '"+e+"' doesn't match prototype "+r,1,n)}},s.Assert.assertPrototypes=function(e,t,n,r){if(s.Assert.DEBUG){var o=t.prototype,i=n.prototype,a=Object.prototype.isPrototypeOf;a.call(o,e)||a.call(i,e)||s.Assert.assertionFailed("object '"+e+"' doesn't match prototype "+o+" or "+i,1,r)}},s.Assert.assertDomNodeOrNull=function(e,t){s.Assert.DEBUG&&e&&void 0===e.nodeType&&s.Assert.assertionFailed(e+" is not a DOM Node",t+1)},s.Assert.assertDomNode=function(e,t){s.Assert.DEBUG&&(e&&void 0!==e.nodeType||s.Assert.assertionFailed(e+" is not a DOM Node",t+1))},s.Assert.assertDomElement=function(e,t){s.Assert.DEBUG&&(s.Assert.assertDomNode(e,1),1!==e.nodeType?s.Assert.assertionFailed(e+" is not a DOM Element",1):t&&e.nodeName!==t&&s.Assert.assertionFailed(e+" is not a "+t+" Element",1))},s.Assert.assertDomElementOrNull=function(e,t){s.Assert.DEBUG&&null!=e&&(s.Assert.assertDomNode(e,1),1!==e.nodeType?s.Assert.assertionFailed(e+" is not a DOM Element",1):t&&e.nodeName!==t&&s.Assert.assertionFailed(e+" is not a "+t+" Element",1))},s.Assert.assertType=function(e,t,n,r,o){if(s.Assert.DEBUG&&!(null==e&&o||typeof e===t)){var i=e+" is not of type "+t;n&&(i=n+i),r||(r=0),s.Assert.assertionFailed(i,r+1)}},s.Assert.assertObject=function(e,t){s.Assert.DEBUG&&s.Assert.assertType(e,"object",t,1,!1)},s.Assert.assertObjectOrNull=function(e,t){s.Assert.DEBUG&&s.Assert.assertType(e,"object",t,1,!0)},s.Assert.assertNonEmptyString=function(e,t){s.Assert.DEBUG&&(s.Assert.assertType(e,"string",t,1,!1),s.Assert.assert(e.length>0,"empty string"))},s.Assert.assertString=function(e,t){s.Assert.DEBUG&&s.Assert.assertType(e,"string",t,1,!1)},s.Assert.assertStringOrNull=function(e,t){s.Assert.DEBUG&&s.Assert.assertType(e,"string",t,1,!0)},s.Assert.assertFunction=function(e,t){s.Assert.DEBUG&&s.Assert.assertType(e,"function",t,1,!1)},s.Assert.assertFunctionOrNull=function(e,t){s.Assert.DEBUG&&s.Assert.assertType(e,"function",t,1,!0)},s.Assert.assertBoolean=function(e,t){s.Assert.DEBUG&&s.Assert.assertType(e,"boolean",t,1,!1)},s.Assert.assertNumber=function(e,t){s.Assert.DEBUG&&s.Assert.assertType(e,"number",t,1,!1)},s.Assert.assertNumberOrNull=function(e,t){s.Assert.DEBUG&&s.Assert.assertType(e,"number",t,1,!0)},s.Assert.assertArray=function(e,t){s.Assert.DEBUG&&(Array.isArray(e)||(void 0===t&&(t=e+" is not an array"),s.Assert.assertionFailed(t,1)))},s.Assert.assertArrayOrNull=function(e,t){s.Assert.DEBUG&&null!=e&&(Array.isArray(e)||(void 0===t&&(t=e+" is not an array"),s.Assert.assertionFailed(t,1)))},s.Assert.assertNonNumeric=function(e,t){s.Assert.DEBUG&&(isNaN(e)||(void 0===t&&(t=e+" is convertible to a number"),s.Assert.assertionFailed(t,1)))},s.Assert.assertNumeric=function(e,t){s.Assert.DEBUG&&isNaN(e)&&(void 0===t&&(t=e+" is not convertible to a number"),s.Assert.assertionFailed(t,1))},s.Assert.assertInSet=function(e,t,n){if(null==e||void 0===t[e.toString()]){if(void 0===n){for(var r=" is not in set: {",o=Object.keys(t),i=0;i<o.length;i++){r+=o[i],r+=","}n=e+(r+="}")}s.Assert.assertionFailed(n,1)}},s.Assert.assertionFailed=function(e,t,n){t||(t=0);var r="Assertion";throw n&&(r+=" ("+n+")"),r+=" failed: ",void 0!==e&&(r+=e),new Error(r)};var o=n.__oj_Assert_DEBUG;void 0!==o&&(s.Assert.DEBUG=o),s.CollectionUtils={},s.CollectionUtils.copyInto=function(e,t,n,r,o){return s.CollectionUtils._copyIntoImpl(e,t,n,r,o,0)},s.CollectionUtils.mergeDeep=function(e,...t){if(!t.length)return e;const n=s.CollectionUtils.isPlainObject,r=s.CollectionUtils.mergeDeep,o=t.shift();return n(e)&&n(o)&&Object.keys(o).forEach(t=>{n(o[t])?(e[t]||Object.assign(e,{[t]:{}}),r(e[t],o[t])):Object.assign(e,{[t]:o[t]})}),r(e,...t)},s.CollectionUtils.isPlainObject=function(e){if(null!==e&&"object"==typeof e)try{var t=Object.prototype.hasOwnProperty;if(e.constructor&&t.call(e.constructor.prototype,"isPrototypeOf"))return!0}catch(e){}return!1},s.CollectionUtils._copyIntoImpl=function(e,t,n,r,o,i){var a;if(null==o&&(o=Number.MAX_VALUE),e&&t&&e!==t)for(var l=Object.keys(t),c=0;c<l.length;c++){var u=l[c];a=n?n(u):u;var f=t[u],d=!1;if(r&&i<o){var p=e[a];s.CollectionUtils.isPlainObject(f)&&(null==p||s.CollectionUtils.isPlainObject(p))&&(d=!0,e[a]=p||{},s.CollectionUtils._copyIntoImpl(e[a],f,n,!0,o,i+1))}d||(e[a]=f)}return e},s.Object=function(){this.Init()},s.Object.superclass=null,s.Object._typeName="oj.Object",s.Object._GET_FUNCTION_NAME_REGEXP=/function\s+([\w$][\w$\d]*)\s*\(/,s.Object.prototype={},s.Object.prototype.constructor=s.Object,s.Object.createSubclass=function(e,t,n){s.Assert.assertFunction(e),s.Assert.assertFunctionOrNull(t),s.Assert.assertStringOrNull(n),void 0===t&&(t=s.Object),s.Assert.assert(e!==t,"Class can't extend itself");var r=s.Object._tempSubclassConstructor;r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.superclass=t.prototype,n&&(e._typeName=n)},s.Object.copyPropertiesForClass=function(e,t){s.Assert.assertFunction(e),s.Assert.assert(null!=t,"source object cannot be null");for(var n=Object.keys(t),r=0;r<n.length;r++){var o=n[r];e.prototype[o]=t[o]}},s.Object._tempSubclassConstructor=function(){},s.Object.prototype.getClass=function(e){if(void 0===e)e=this;else if(null===e)return null;return e.constructor},s.Object.prototype.clone=function(){var e=new this.constructor;return s.CollectionUtils.copyInto(e,this),e},s.Object.prototype.toString=function(){return this.toDebugString()},s.Object.prototype.toDebugString=function(){return this.getTypeName()+" Object"},s.Object.getTypeName=function(e){s.Assert.assertFunction(e);var t=e._typeName;if(null==t){var n=e.toString(),r=s.Object._GET_FUNCTION_NAME_REGEXP.exec(n);t=r?r[1]:"anonymous",e._typeName=t}return t},s.Object.prototype.getTypeName=function(){return s.Object.getTypeName(this.constructor)},s.Object.prototype.Init=function(){s.Assert.isDebug()&&s.Assert.assert(this.getTypeName,"Not an oj.Object");var e=this.constructor;e._initialized||s.Object._initClasses(e)},s.Object.ensureClassInitialization=function(e){s.Assert.assertFunction(e),e._initialized||s.Object._initClasses(e)},s.Object.prototype.equals=function(e){return this===e},s.Object.createCallback=function(e,t){return s.Assert.assertFunction(t),t.bind(e)},s.Object._initClasses=function(e){s.Assert.isDebug()&&(s.Assert.assertFunction(e),s.Assert.assert(!e._initialized)),e._initialized=!0;var t=e.superclass;if(t){var n=t.constructor;n&&!n._initialized&&s.Object._initClasses(n)}var r=e.InitClass;r&&r.call(e)},s.Object.compareValues=function(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if(null===e||null===t)return!1;if(e.constructor===t.constructor){if(Array.isArray(e))return s.Object._compareArrayValues(e,t);if(e.constructor===Object)return s.Object.__innerEquals(e,t);if(e.valueOf&&"function"==typeof e.valueOf)return e.valueOf()===t.valueOf()}return!1},s.Object._compareArrayValues=function(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(!s.Object.compareValues(e[n],t[n]))return!1;return!0},s.Object._compareIdIndexObject=function(e,t){if("number"==typeof e&&"number"==typeof t||"string"==typeof e&&"string"==typeof t)return e===t;if("object"==typeof e&&"object"==typeof t){if(e.id&&t.id)return e.id===t.id&&(!e.index||!t.index||e.index===t.index);if(e.index&&t.index)return e.index===t.index}return!1},s.Object._compareArrayIdIndexObject=function(e,t){if(!e)return!t||0===t.length;if(!t)return!e||0===e.length;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){for(var r=!1,o=0;o<t.length;o++)if(s.Object._compareIdIndexObject(e[n],t[o])){r=!0;break}if(!r)return!1}return!0},s.Object.__innerEquals=function(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;if(e.constructor!==t.constructor)return!1;var n,r,o=Object.prototype.hasOwnProperty,i=Object.keys(e);for(r=0;r<i.length;r++)if(n=i[r],o.call(e,n)){if(!o.call(t,n))return!1;if(e[n]!==t[n]){if("object"!=typeof e[n])return!1;if(!s.Object.__innerEquals(e[n],t[n]))return!1}}var a=Object.keys(t);for(r=0;r<a.length;r++)if(n=a[r],o.call(t,n)&&!o.call(e,n))return!1;return 0!==i.length||0!==a.length||JSON.stringify(e)===JSON.stringify(t)},s.Object.isEmpty=function(e){var t;if(null==e)return!0;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},s.__isAmdLoaderPresent=function(){return"function"==typeof define&&define.amd},s.__getRequirePromise=function(e,t){return s.__isAmdLoaderPresent()?new Promise(function(n,r){t([e],n,r)}):null},s.StringUtils={},s.StringUtils._TRIM_ALL_RE=/^\s*|\s*$/g,s.StringUtils.isEmpty=function(e){return null===e||0===s.StringUtils.trim(e).length},s.StringUtils.isEmptyOrUndefined=function(e){return!(void 0!==e&&!s.StringUtils.isEmpty(e))},s.StringUtils.isString=function(e){return null!==e&&("string"==typeof e||e instanceof String)},s.StringUtils.trim=function(e){return s.StringUtils.isString(e)?e.replace(s.StringUtils._TRIM_ALL_RE,""):e},s.StringUtils.hashCode=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t},String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var r=n.lastIndexOf(e,t);return-1!==r&&r===t});var i={accessKey:"accesskey",autocapitalize:"autocapitalize",autofocus:"autofocus",class:"class",contentEditable:"contenteditable",dir:"dir",draggable:"draggable",enterKeyHint:"enterkeyhint",hidden:"hidden",id:"id",inputMode:"inputmode",is:"is",itemid:"itemid",itemprop:"itemprop",itemref:"itemref",itemscope:"itemscope",itemtype:"itemtype",lang:"lang",nonce:"nonce",role:"role",slot:"slot",spellcheck:"spellcheck",style:"style",tabIndex:"tabindex",title:"title",translate:"translate"},a={acceptCharset:"accept-charset",allowFullscreen:"allowfullscreen",allowPaymentRequest:"allowpaymentrequest",colSpan:"colspan",crossOrigin:"crossorigin",dateTime:"datetime",dirName:"dirname",encoding:"enctype",formAction:"formaction",formEnctype:"formenctype",formMethod:"formmethod",formNoValidate:"formnovalidate",formTarget:"formtarget",for:"for",httpEquiv:"http-equiv",imageSizes:"imagesizes",imageSrcset:"imagesrcset",inputMode:"inputmode",isMap:"ismap",maxLength:"maxlength",minLength:"minlength",noModule:"nomodule",noValidate:"novalidate",readOnly:"readonly",referrerPolicy:"referrerpolicy",rowSpan:"rowspan",useMap:"usemap"};s.AgentUtils=function(){},s.AgentUtils.BROWSER={IE:"ie",FIREFOX:"firefox",SAFARI:"safari",CHROME:"chrome",EDGE:"edge",EDGE_CHROMIUM:"edge-chromium",UNKNOWN:"unknown"},s.AgentUtils.ENGINE={TRIDENT:"trident",WEBKIT:"webkit",GECKO:"gecko",BLINK:"blink",EDGE_HTML:"edgehtml",UNKNOWN:"unknown"},s.AgentUtils.OS={WINDOWS:"Windows",SOLARIS:"Solaris",MAC:"Mac",UNKNOWN:"Unknown",ANDROID:"Android",IOS:"IOS",WINDOWSPHONE:"WindowsPhone",LINUX:"Linux"},s.AgentUtils.DEVICETYPE={PHONE:"phone",TABLET:"tablet",OTHERS:"others"},s.AgentUtils.getAgentInfo=function(e){s.StringUtils.isEmptyOrUndefined(e)&&(e=navigator.userAgent),e=e.toLowerCase();var t=s.StringUtils.hashCode(e),n=s.AgentUtils._currAgentInfo;if(n&&n.hashCode===t)return{os:n.os,browser:n.browser,browserVersion:n.browserVersion,deviceType:n.deviceType,engine:n.engine,engineVersion:n.engineVersion,hashCode:n.hashCode};var r=s.AgentUtils.OS.UNKNOWN,o=s.AgentUtils.BROWSER.UNKNOWN,i=0,a=s.AgentUtils.DEVICETYPE.OTHERS,l=s.AgentUtils.ENGINE.UNKNOWN,c=0;return e.indexOf("iphone")>-1||e.indexOf("ipad")>-1?r=s.AgentUtils.OS.IOS:e.indexOf("mac")>-1?r=s.AgentUtils.OS.MAC:e.indexOf("sunos")>-1?r=s.AgentUtils.OS.SOLARIS:e.indexOf("android")>-1?r=s.AgentUtils.OS.ANDROID:e.indexOf("linux")>-1?r=s.AgentUtils.OS.LINUX:e.indexOf("windows phone")>-1?r=s.AgentUtils.OS.WINDOWSPHONE:e.indexOf("win")>-1&&(r=s.AgentUtils.OS.WINDOWS),r===s.AgentUtils.OS.ANDROID?a=e.indexOf("mobile")>-1?s.AgentUtils.DEVICETYPE.PHONE:s.AgentUtils.DEVICETYPE.TABLET:r===s.AgentUtils.OS.IOS&&(a=e.indexOf("iphone")>-1?s.AgentUtils.DEVICETYPE.PHONE:s.AgentUtils.DEVICETYPE.TABLET),e.indexOf("msie")>-1?(o=s.AgentUtils.BROWSER.IE,i=s.AgentUtils._parseFloatVersion(e,/msie (\d+[.]\d+)/),e.indexOf("trident")&&(l=s.AgentUtils.ENGINE.TRIDENT,c=s.AgentUtils._parseFloatVersion(e,/trident\/(\d+[.]\d+)/))):e.indexOf("trident")>-1?(o=s.AgentUtils.BROWSER.IE,i=s.AgentUtils._parseFloatVersion(e,/rv:(\d+[.]\d+)/),e.indexOf("trident")&&(l=s.AgentUtils.ENGINE.TRIDENT,c=s.AgentUtils._parseFloatVersion(e,/trident\/(\d+[.]\d+)/))):e.indexOf("edge")>-1?(o=s.AgentUtils.BROWSER.EDGE,i=c=s.AgentUtils._parseFloatVersion(e,/edge\/(\d+[.]\d+)/),l=s.AgentUtils.ENGINE.EDGE_HTML):e.indexOf("edg")>-1?(o=s.AgentUtils.BROWSER.EDGE_CHROMIUM,i=s.AgentUtils._parseFloatVersion(e,/edg\/(\d+[.]\d+)/),l=s.AgentUtils.ENGINE.BLINK,c=i):e.indexOf("chrome")>-1?(o=s.AgentUtils.BROWSER.CHROME,(i=s.AgentUtils._parseFloatVersion(e,/chrome\/(\d+[.]\d+)/))>=28?(l=s.AgentUtils.ENGINE.BLINK,c=i):(l=s.AgentUtils.ENGINE.WEBKIT,c=s.AgentUtils._parseFloatVersion(e,/applewebkit\/(\d+[.]\d+)/))):e.indexOf("safari")>-1?(o=s.AgentUtils.BROWSER.SAFARI,i=s.AgentUtils._parseFloatVersion(e,/version\/(\d+[.]\d+)/),l=s.AgentUtils.ENGINE.WEBKIT,c=s.AgentUtils._parseFloatVersion(e,/applewebkit\/(\d+[.]\d+)/)):e.indexOf("firefox")>-1&&(o=s.AgentUtils.BROWSER.FIREFOX,i=s.AgentUtils._parseFloatVersion(e,/rv:(\d+[.]\d+)/),l=s.AgentUtils.ENGINE.GECKO,c=s.AgentUtils._parseFloatVersion(e,/gecko\/(\d+)/)),n={hashCode:t,os:r,browser:o,browserVersion:i,deviceType:a,engine:l,engineVersion:c},s.AgentUtils._currAgentInfo=n,{os:n.os,browser:n.browser,browserVersion:n.browserVersion,deviceType:n.deviceType,engine:n.engine,engineVersion:n.engineVersion,hashCode:n.hashCode}},s.AgentUtils._parseFloatVersion=function(e,t){var n=e.match(t);if(n){var r=n[1];if(r)return parseFloat(r)}return 0},function(){var e=/(^array)|(\|array)/,t=/(^object)|(\|object)/,n=/^\s*\[[^]*\]\s*$/,r=/^\s*\{[^]*\}\s*$/,o=/^(?:\{\{)([^]+)(?:\}\})$/,l=/^(?:\[\[)([^]+)(?:\]\])$/,c={};Object.keys(i).forEach(function(e){var t=i[e];e!==t&&(c[t]=e,a[e]=t)}),s.__AttributeUtils={},s.__AttributeUtils.getExpressionInfo=function(e){var t={};if(e){var n=e.trim(),r=o.exec(n);(r=r?r[1]:null)||(t.downstreamOnly=!0,r=(r=l.exec(n))?r[1]:null),t.expr=r}return t},s.__AttributeUtils.attributeToPropertyName=function(e){return e.toLowerCase().replace(/-(.)/g,(e,t)=>t.toUpperCase())},s.__AttributeUtils.propertyNameToAttribute=function(e){return e.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)},s.__AttributeUtils.eventTypeToEventListenerProperty=function(e){return"on"+e.substr(0,1).toUpperCase()+e.substr(1)},s.__AttributeUtils.eventListenerPropertyToEventType=function(e){return/^on[A-Z]/.test(e)?e.substr(2,1).toLowerCase()+e.substr(3):null},s.__AttributeUtils.propertyNameToChangeEventType=function(e){return e+"Changed"},s.__AttributeUtils.eventTriggerToEventType=function(e){return"oj"+e.substr(0,1).toUpperCase()+e.substr(1)},s.__AttributeUtils.coerceValue=function(o,i,a,l){var c=o.tagName.toLowerCase();if(!l)throw new Error(`Unable to parse ${i}='${a}' for ${c} with id '${o.id}'.         This attribute only supports data bound values. Check the API doc for supported types`);var u=l.toLowerCase(),f=n.test(a),d=r.test(a);if(e.test(u)&&f||t.test(u)&&d||"any"===u&&(f||d))try{return JSON.parse(a)}catch(e){throw new Error(`Unable to parse ${i}='${a}' for ${c} with id '${o.id}'           to a JSON Object. Check the value for correct JSON syntax, e.g. double quoted strings. ${e}`)}else{if("boolean"===u)return s.__AttributeUtils.coerceBooleanValue(o,i,a,l);if("number"===u){if(!isNaN(a))return Number(a)}else{if("any"===u)return a;if(u.split("|").filter(e=>"string"===e.trim()).length>0)return a}}throw new Error(`Unable to parse ${i}='${a}' for ${c} with id '${o.id}'       to a ${l}.`)},s.__AttributeUtils.coerceBooleanValue=function(e,t,n,r){if(null==n||"true"===n||""===n||n.toLowerCase()===t)return!0;if("false"===n)return!1;throw new Error("Unable to parse "+t+"='"+n+"' for "+e+" with id "+e.id+" to a "+r+".")},s.__AttributeUtils.isGlobalOrData=function(e){return Object.prototype.hasOwnProperty.call(i,e)||e.startsWith("data-")||e.startsWith("aria-")},s.__AttributeUtils.getGlobalAttrForProp=function(e){return i[e]||e},s.__AttributeUtils.getGlobalPropForAttr=function(e){return c[e]||e},s.__AttributeUtils.getNativeAttr=function(e){return a[e]||e};var u=0;s.__AttributeUtils.getUniqueId=function(e){if(e)return e;var t="_ojcustomelem"+u;return u+=1,t}}(),"undefined"!=typeof window&&window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t,n=(this.document||this.ownerDocument).querySelectorAll(e),r=this;do{for(t=n.length;--t>=0&&n.item(t)!==r;);}while(t<0&&(r=r.parentElement));return r}),function(){function e(e){return function(t,n,r){return e.call(this,t,n,function(e){return"boolean"==typeof e?e:!!e&&e.capture}(r))}}if("undefined"!=typeof window&&!function(){let e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}return e}()){let t;window.EventTarget?t=EventTarget.prototype:window.Node&&(t=Node.prototype),t&&(t.addEventListener=e(t.addEventListener),t.removeEventListener=e(t.removeEventListener))}}(),
/**
   * @license
   * Code taken from
   * https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/queueMicrotask
   * under "When queueMicrotask() isn't available".
   * @ignore
   */
"undefined"!=typeof window&&"function"!=typeof window.queueMicrotask&&(window.queueMicrotask=function(e){Promise.resolve().then(e).catch(function(e){setTimeout(function(){throw e})})}),function(){if("undefined"!=typeof window){var e;if(!((e=document.createEvent("Event")).initEvent("foo",!0,!0),e.preventDefault(),e.defaultPrevented)){var t=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(t.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}"function"!=typeof window.CustomEvent&&(n.prototype=Object.getPrototypeOf(new n("bogusEvent")),window.CustomEvent=n)}function n(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}}(),function(){function e(e){var t=document.createEvent("FocusEvent");return t.initEvent(e,!1,!1),t}"undefined"!=typeof window&&"function"!=typeof window.FocusEvent&&(e.prototype=Object.getPrototypeOf(new e("focus")),window.FocusEvent=e)}(),function(){var e,t;"undefined"!=typeof window&&!window.setImmediate&&window.postMessage&&(window.setImmediate=function(){var r=arguments[0],o=Array.prototype.slice.call(arguments,1);s.Assert.assertFunction(r);var i=(isNaN(t)&&(t=0),t+=1);return e||(e=new Map),e.set(i,{callback:r,args:o}),1===e.size&&window.addEventListener("message",n),window.postMessage({id:i,message:"oj-setImmediate"},"*"),i},window.clearImmediate=r);function n(t){var n=t.data;if(n&&"oj-setImmediate"===n.message){var s=n.id,o=e.get(s);if(r(s),o){var i=o.callback,a=o.args;i.apply(window,a)}}}function r(t){e&&(e.delete(t),e.size<1&&(window.removeEventListener("message",n),e=null))}}(),"undefined"!=typeof window&&(window.Symbol?(window.Symbol.asyncIterator||(window.Symbol.asyncIterator="asyncIterator"),window.Symbol.iterator||(window.Symbol.iterator="iterator")):(window.Symbol={},window.Symbol.asyncIterator="asyncIterator",window.Symbol.iterator="iterator")),function(){if("undefined"!=typeof window&&0===new window.Set([0]).size){var e=window.Set;function t(t){var n=new e;return t&&t.forEach(n.add,n),n}t.prototype=e.prototype,t.prototype.constructor=t,window.Set=t}}(),"undefined"!=typeof window&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),window.DOMTokenList&&!DOMTokenList.prototype.forEach&&(DOMTokenList.prototype.forEach=Array.prototype.forEach)),"undefined"!=typeof window&&"undefined"!==window.Node&&("isConnected"in Node.prototype||Object.defineProperty(Node.prototype,"isConnected",{get(){return!(this.ownerDocument&&this.ownerDocument.compareDocumentPosition(this)&this.DOCUMENT_POSITION_DISCONNECTED)}})),s.ElementUtils={isValidCustomElementName:function(e){var t=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]).has(e),n=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(e);return!t&&n&&!e.startsWith("oj-bind-",0)}},
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
s.EventSource=function(){this.Init()},s.Object.createSubclass(s.EventSource,s.Object,"oj.EventSource"),s.EventSource.prototype.Init=function(){this._eventHandlers=[],s.EventSource.superclass.Init.call(this)},s.EventSource.prototype.on=function(e,t){for(var n=!1,r=0;r<this._eventHandlers.length;r++)if(this._eventHandlers[r].eventType===e&&this._eventHandlers[r].eventHandlerFunc===t){n=!0;break}n||this._eventHandlers.push({eventType:e,eventHandlerFunc:t})},s.EventSource.prototype.off=function(e,t){for(var n=this._eventHandlers.length-1;n>=0;n--)if(this._eventHandlers[n].eventType===e&&this._eventHandlers[n].eventHandlerFunc===t){this._eventHandlers.splice(n,1);break}},s.EventSource.prototype.handleEvent=function(e,t){for(var n=0;n<this._eventHandlers.length;n++){var r=this._eventHandlers[n];if(r.eventType===e&&!1===r.eventHandlerFunc.apply(this,Array.prototype.slice.call(arguments).slice(1)))return!1}return!0},s.KeyUtils={},s.KeyUtils.equals=function(e,t){return s.Object.compareValues(e,t)};var l=n.__ojCheckpointManager;return s.CHECKPOINT_MANAGER={},s.CHECKPOINT_MANAGER.startCheckpoint=function(e,t){l&&l.startCheckpoint(e,t)},s.CHECKPOINT_MANAGER.endCheckpoint=function(e){l&&l.endCheckpoint(e)},s.CHECKPOINT_MANAGER.getRecord=function(e){return l?l.getRecord(e):void 0},s.CHECKPOINT_MANAGER.matchRecords=function(e){return l?l.matchRecords(e):[]},s.CHECKPOINT_MANAGER.dump=function(e){t.info(function(){for(var t="Checkpoint Records:",n=s.CHECKPOINT_MANAGER.matchRecords(e),r=0;r<n.length;r++){var o=n[r];t=t+"\n"+o.name;var i=o.description;null!=i&&(t=t+" ("+i+")"),t=(t+=":\n")+"start: "+o.start+"\tduration: "+o.duration}return t})},s});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojcontext',["ojs/ojcore-base","ojs/ojlogger"],function(e,t){"use strict";
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */e.BusyContext=function(e){this.Init(e)},e.Object.createSubclass(e.BusyContext,e.Object,"oj.BusyContext"),e.BusyContext._defaultTimeout=Number.NaN,e.BusyContext.setDefaultTimeout=function(t){isNaN(t)||(e.BusyContext._defaultTimeout=t)},e.BusyContext.prototype.Init=function(t){e.BusyContext.superclass.Init.call(this),this._hostNode=t,this._statesMap=new Map,this._mediator={getMasterWhenReadyPromise:function(){return this._masterWhenReadyPromise||(this._masterWhenReadyPromise=new Promise(this._captureWhenReadyPromiseResolver.bind(this))),this._masterWhenReadyPromise},resolveMasterWhenReadyPromise:function(){this._masterWhenReadyPromiseResolver&&this._masterWhenReadyPromiseResolver(!0),this._masterWhenReadyPromise=null,this._masterWhenReadyPromiseResolver=null,this._masterWhenReadyPromiseRejecter=null},rejectMasterWhenReadyPromise:function(e){this._masterWhenReadyPromiseRejecter&&this._masterWhenReadyPromiseRejecter(e),this._masterWhenReadyPromise=null,this._masterWhenReadyPromiseRejecter=null,this._masterWhenReadyPromiseResolver=null},getSlaveTimeoutPromise:function(e,t,s){var o,n=new Promise(function(e,n){o=window.setTimeout(function(){n(t())},s)});return this._slaveTimeoutPromiseTimers.push(o),Promise.race([e,n]).then(this._clearAllSlaveTimeouts.bind(this))},getNextTickPromise:function(){return this._nextTickPromise||(this._nextTickPromise=new Promise(function(e){window.setImmediate(function(){this._nextTickPromise=null,e(!0)}.bind(this))}.bind(this))),this._nextTickPromise},_clearAllSlaveTimeouts:function(){var e=this._slaveTimeoutPromiseTimers;this._slaveTimeoutPromiseTimers=[];for(var t=0;t<e.length;t++)window.clearTimeout(e[t]);return!0},_captureWhenReadyPromiseResolver:function(e,t){this._masterWhenReadyPromiseResolver=e,this._masterWhenReadyPromiseRejecter=t},_slaveTimeoutPromiseTimers:[]}},e.BusyContext._log=function(s){if(t.option("level")===t.LEVEL_LOG){t.log(">> Busy states: %d",s.size);var o=e.BusyContext._values(s);o.length>0&&t.log(o.join("\n"))}},e.BusyContext._values=function(e){var t=[];return e.forEach(function(e){t.push(e)}),t},e.BusyContext.prototype.addBusyState=function(s){t.log("BusyContext.addBusyState: start scope='%s'",this._getDebugScope());var o=this._statesMap,n=new e.BusyState(s[e.BusyContext._DESCRIPTION]);return t.log(">> "+n),o.set(n.id,n),this._addBusyStateToParent(),t.log("BusyContext.addBusyState: end scope='%s'",this._getDebugScope()),this._removeBusyState.bind(this,n)},e.BusyContext.prototype.dump=function(s){t.info("BusyContext.dump: start scope='%s' %s",this._getDebugScope(),s||"");var o=this._statesMap;t.info(">> Busy states: %d",o.size);var n=e.BusyContext._values(o);n.length>0&&t.info(n.join("\n")),t.info("BusyContext.dump: start scope='%s' %s",this._getDebugScope(),s||"")},e.BusyContext.prototype.getBusyStates=function(){var t=this._statesMap;return e.BusyContext._values(t)},e.BusyContext.prototype.clear=function(){t.log("BusyContext.clear: start scope='%s'",this._getDebugScope());for(var s=this._statesMap,o=e.BusyContext._values(s),n=0;n<o.length;n++){var i=o[n];try{this._removeBusyState(i)}catch(e){t.log("BusyContext.clear: %o",e)}Object.defineProperty(i,e.BusyContext._OJ_RIP,{value:!0,enumerable:!1})}t.log("BusyContext.clear: end scope='%s'",this._getDebugScope())},e.BusyContext.prototype.whenReady=function(s){var o=this._getDebugScope();t.log("BusyContext.whenReady: start, scope='%s', timeout=%d",o,s);var n=this._statesMap,i=this._mediator,r=i.getNextTickPromise(),a=e.BusyContext._BOOTSTRAP_MEDIATOR.whenReady(),u=Promise.all([r,a]).then(function(){t.log("BusyContext.whenReady: bootstrap mediator ready scope=%s",o);try{e.BusyContext._deliverThrottledUpdates()}catch(e){throw t.error("Fatal exception delivering binding updates: %o",e),e}return 0!==n.size||this._waitingOnNextTickBusynessEval?(t.log("BusyContext.whenReady: busy states returning master scope=%s",o),i.getMasterWhenReadyPromise()):(t.log("BusyContext.whenReady: resolved no busy states scope=%s",o),!0)}.bind(this));if(isNaN(s)&&!isNaN(e.BusyContext._defaultTimeout)&&(s=e.BusyContext._defaultTimeout),!isNaN(s)){u=i.getSlaveTimeoutPromise(u,function(){var i,r="whenReady timeout of "+s+"ms expired ";e.BusyContext._log(n);var a=e.BusyContext._values(n);return(i=e.BusyContext._BOOTSTRAP_MEDIATOR.isReady()?new Error(r+"with the following busy states: "+a.join(", ")):new Error(r+'while the application is loading. Busy state enabled by setting the "window.oj_whenReady = true;" global variable. Application bootstrap busy state is released by calling "oj.Context.getPageContext().getBusyContext().applicationBootstrapComplete();".')).busyStates=a,t.log("BusyContext.whenReady: rejected scope='%s'\n%s",o,i.message),i},s)}return t.log("BusyContext.whenReady: end scope='%s'",this._getDebugScope()),u},e.BusyContext.prototype.isReady=function(){t.log("BusyContext.isReady: start scope='%s'",this._getDebugScope());var s=!1;if(e.BusyContext._BOOTSTRAP_MEDIATOR.isReady()&&!this._waitingOnNextTickBusynessEval){var o=this._statesMap;s=0===o.size,e.BusyContext._log(o)}return t.log("BusyContext.isReady: end scope='%s'",this._getDebugScope()),s},e.BusyContext.prototype._removeBusyState=function(s){var o=this._getDebugScope();t.log("BusyContext._removeBusyState: start scope='%s'",o);var n=this._statesMap;if(s[e.BusyContext._OJ_RIP])t.log("Busy state has been forcefully resolved via clear:\n"+s);else{if(!n.delete(s.id))throw new Error("Busy state has already been resolved:\n"+s);t.log("BusyContext._removeBusyState: resolving busy state:\n"+s),0!==n.size||this._waitingOnNextTickBusynessEval||(this._waitingOnNextTickBusynessEval=!0,window.setImmediate(this._evalBusyness.bind(this))),t.log("BusyContext._removeBusyState: end scope='%s'",o)}},e.BusyContext.prototype._evalBusyness=function(){var s=this._getDebugScope();t.log("BusyContext._evalBusyness: begin scope='%s'",s);try{e.BusyContext._deliverThrottledUpdates()}catch(e){return t.error("Fatal exception delivering binding updates: %o",e),this._mediator.rejectMasterWhenReadyPromise(e),void(this._waitingOnNextTickBusynessEval=!1)}var o=this._statesMap,n=this._mediator;this._waitingOnNextTickBusynessEval=!1,0===o.size?(t.log("BusyContext._evalBusyness: resolving whenReady promises"),n.resolveMasterWhenReadyPromise(),this._resolveBusyStateForParent()):e.BusyContext._log(o),t.log("BusyContext._evalBusyness: end scope='%s'",s)},e.BusyContext.prototype.applicationBootstrapComplete=function(){var s=this._getDebugScope();t.log("BusyContext.applicationBootstrapComplete: begin scope='%s'",s),e.BusyContext._BOOTSTRAP_MEDIATOR.notifyComplete(),t.log("BusyContext.applicationBootstrapComplete: end scope='%s'",s)},e.BusyContext.prototype._getParentBusyContext=function(){if(this._hostNode){var t=e.Context.getContext(e.Context.getParentElement(this._hostNode));if(t)return t.getBusyContext()}return null},e.BusyContext.prototype._addBusyStateToParent=function(){if(!this._parentNotified){this._parentNotified=!0;var t=this._getParentBusyContext();if(t){var s={};s[e.BusyContext._DESCRIPTION]=this._getCompoundDescription.bind(this),this._parentResolveCallback=t.addBusyState(s)}}},e.BusyContext.prototype._resolveBusyStateForParent=function(){this._parentNotified=!1,this._parentResolveCallback&&(this._parentResolveCallback(),this._parentResolveCallback=null)},e.BusyContext.prototype._getCompoundDescription=function(){return"["+e.BusyContext._values(this._statesMap).join(", ")+"]"},e.BusyContext.prototype._getDebugScope=function(){function e(e){var t="undefined";if(e)if(e.id&&e.id.length>0)t="#"+e.id;else{t=e.nodeName,e.hasAttribute("data-oj-context")&&(t+="[data-oj-context]");var s=e.getAttribute("class");s&&(t+="."+s.split(" ").join("."))}return t}return this._debugScope||(this._hostNode?this._debugScope=e(this._hostNode.parentElement)+" > "+e(this._hostNode):this._debugScope="page"),this._debugScope},e.BusyContext.prototype.toString=function(){var e="Busy Context: [scope=";return e+=this._getDebugScope(),e+=" states="+this._getCompoundDescription()+"]"},e.BusyContext._deliverThrottledUpdates=function(){e.ComponentBinding&&e.ComponentBinding.deliverChanges()},e.BusyContext._DESCRIPTION="description",e.BusyContext._OJ_RIP="__ojRip",e.BusyContext._BOOTSTRAP_MEDIATOR=new function(){var e,t,s;"undefined"!=typeof window&&(e=window.oj_whenReady),this.whenReady=function(){return t||(t=e?new Promise(function(e){s=e}):Promise.resolve(!0))},this.isReady=function(){return!e},this.notifyComplete=function(){s?window.setImmediate(function(){e=!1,s(!0),s=null}):e=!1}},
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
e.BusyState=function(t){this._description=t,this._addedWaitTs=e.BusyState._getTs(),this._id=this._addedWaitTs.toString(36)+"_"+Math.random().toString(36)},Object.defineProperties(e.BusyState.prototype,{id:{get:function(){return this._id},enumerable:!0},description:{get:function(){if(this._description)return this._description instanceof Function?this._description():this._description.toString()},enumerable:!0}}),e.BusyState.prototype.toString=function(){var t="Busy state: [description=",s=this.description;return null!==s&&(t+=s),t+=", elapsed="+(e.BusyState._getTs()-this._addedWaitTs)+"]"},e.BusyState._getTs=function(){return window.performance?window.performance.now():(new Date).getTime()};
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var s=function(e){this.Init(e)};return e.Object.createSubclass(s,e.Object,"oj.Context"),s.prototype.Init=function(e){s.superclass.Init.call(this),this._node=e},s.getContext=function(e){for(;e;){var t=e[s._OJ_CONTEXT_INSTANCE];if(t)return t;if(e.hasAttribute(s._OJ_CONTEXT_ATTRIBUTE))return t=new s(e),Object.defineProperty(e,s._OJ_CONTEXT_INSTANCE,{value:t}),t;e=s.getParentElement(e)}return s.getPageContext()},s.getPageContext=function(){return s._pageContext||(s._pageContext=new s),s._pageContext},s.prototype.getBusyContext=function(){return this._busyContext||(this._busyContext=new e.BusyContext(this._node)),this._busyContext},s.setBusyContextDefaultTimeout=function(t){e.BusyContext.setDefaultTimeout(t)},s._OJ_CONTEXT_ATTRIBUTE="data-oj-context",s._OJ_CONTEXT_INSTANCE="__ojContextInstance",s._OJ_SURROGATE_ATTR="data-oj-surrogate-id",s.getParentElement=function(e){if(e&&e.hasAttribute(s._OJ_SURROGATE_ATTR)){var t=document.getElementById(e.getAttribute(s._OJ_SURROGATE_ATTR));if(t)return t.parentElement}return e.parentElement},s});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
/**
 * @license RequireJS i18n 2.0.2 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/i18n for details
 */
!function(){"use strict";var e=/(^.*(^|\/)nls(\/|$))([^/]*)\/?([^/]*)/;function n(e,n,o,a,r,t,l){if(n[e]||(e=e.replace(/^zh-(Hans|Hant)-([^-]+)$/,"zh-$2")),n[e]){if(o.push(e),!0===n[e]||1===n[e]){var u=l?l+e:e;a.push(r+u+"/"+t)}return!0}return!1}function o(e){return"object"==typeof e}function a(e,n){for(var r=Object.keys(n),t=0;t<r.length;t++){var l=r[t];null==e[l]?e[l]=n[l]:o(n[l])&&o(e[l])&&a(e[l],n[l])}}define('ojL10n',["module"],function(o){var r=o.config?o.config():{};return{version:"2.0.1+",load:function(o,t,l,u){var c;(u=u||{}).locale&&(r.locale=u.locale);var i,f,s,v,g,h,p,d,y,m,L,O=e.exec(o),_=O[1],b=O[5],j=[],H={},k="";O[5]?(c=(_=O[1])+b,i=O[4]):(c=o,b=O[4],i=r.locale,"undefined"!=typeof document?(i||(i=u.isBuild?"root":document.documentElement.lang)||(i=void 0===navigator?"root":navigator.systemLanguage||navigator.language||navigator.userLanguage||"root"),r.locale=i):i="root"),f=function(e){var n,o=e.toLowerCase().split(/-|_/),a=[o[0]],r=1;for(n=1;n<o.length;n++){var t=o[n],l=t.length;if(1===l)break;switch(r){case 1:if(r=2,4===l){a.push(t.charAt(0).toUpperCase()+t.slice(1));break}case 2:r=3,a.push(t.toUpperCase());break;default:a.push(t)}}return function(e){if(!("zh"!==e[0]||e.length>1&&4===e[1].length)){var n="Hans",o=e.length>1?e[1]:null;"TW"!==o&&"MO"!==o&&"HK"!==o||(n="Hant"),e.splice(1,0,n)}}(a),a}(i),v=r.noOverlay,g=r.defaultNoOverlayLocale;var x=r.localePrefix;for((y=r.merge)&&(h=y[_+b])&&(O=e.exec(h),p=O[1],d=O[4]),m=[],s=0;s<f.length;s++)k+=(k?"-":"")+f[s],m.push(k);u.isBuild?(j.push(c),h&&j.push(h),t(j,function(){l()})):("query"===r.includeLocale&&(c=t.toUrl(c+".js"),c+=(-1===c.indexOf("?")?"?":"&")+"loc="+i),L=[c],h&&L.push(h),t(L,function(e,o){var r=[],u=function(e,o,a){for(var t=v||!0===e.__noOverlay,l=g||e.__defaultNoOverlayLocale,u=!1,c=m.length-1;c>=0&&(!u||!t);c--)u=n(m[c],e,r,j,o,a,x);var i=1===m.length&&"root"===m[0];t&&(i||!u)&&l&&n(l,e,r,j,o,a,x),i||n("root",e,r,j,o,a,x)};u(e,_,b);var c=r.length;o&&u(o,p,d),t(j,function(){var n=function(e,n,o,l,u){for(var c=n;c<o&&r[c];c++){var i=r[c],f=x?x+i:i,s=e[i];!0!==s&&1!==s||(s=t(l+f+"/"+u)),a(H,s||{})}};n(o,c,r.length,p,d),n(e,0,c,_,b),H._ojLocale_=f.join("-"),l(H)})}))}}})}();
define('ojtranslations/nls/ojtranslations',{root:{"oj-message":{fatal:"Fatal",error:"Error",warning:"Warning",info:"Info",confirmation:"Confirmation","compact-type-summary":"{0}: {1}"},"oj-converter":{summary:"Value is not in the expected format.",detail:"Enter a value in the expected format.","plural-separator":", ",hint:{summary:"Example: {exampleValue}",detail:"Enter a value in this format: '{exampleValue}'.","detail-plural":"Enter a value in these formats: '{exampleValue}'."},optionHint:{detail:"An accepted value for option '{propertyName}' is '{propertyValueValid}'.","detail-plural":"Accepted values for option '{propertyName}' are '{propertyValueValid}'."},optionTypesMismatch:{summary:"A value for the option '{requiredPropertyName}' is required when the option '{propertyName}' is set to '{propertyValue}'."},optionTypeInvalid:{summary:"A value of the expected type was not provided for option '{propertyName}'."},optionOutOfRange:{summary:"Value {propertyValue} is out of range for the option '{propertyName}'."},optionValueInvalid:{summary:"An invalid value '{propertyValue}' was specified for the option '{propertyName}'."},number:{decimalFormatMismatch:{summary:"The provided value is not in the expected number format."},shortLongUnsupportedParse:{summary:"'short' and 'long' are not supported for converter parsing.",detail:"Change component to readonly. readonly fields do not call the converter's parse function."},currencyFormatMismatch:{summary:"The provided value is not in the expected currency format."},percentFormatMismatch:{summary:"The provided value is not in the expected percent format."},invalidNumberFormat:{summary:"The provided value is not a valid number.",detail:"Please provide valid number."}},color:{invalidFormat:{summary:"Invalid color format.",detail:"Invalid color format option specification."},invalidSyntax:{summary:"Invalid color specification.",detail:"Enter a color value that conforms to the CSS3 standard."}},datetime:{datetimeOutOfRange:{summary:"Value '{value}' is out of range for the '{propertyName}'.",detail:"Enter a value between '{minValue}' and '{maxValue}'.",hour:"hour",minute:"minute",second:"second",millisec:"millisec",month:"month",day:"day",year:"year","month name":"month name",weekday:"weekday"},dateFormatMismatch:{summary:"The provided value is not in the expected date format."},invalidTimeZoneID:{summary:"Invalid timezone id {timeZoneID} provided."},nonExistingTime:{summary:"The input time does not exist because it falls during the transition to daylight saving time."},missingTimeZoneData:{summary:"TimeZone data is missing. Please call require 'ojs/ojtimezonedata' in order to load the TimeZone data."},timeFormatMismatch:{summary:"The provided value is not in the expected time format."},datetimeFormatMismatch:{summary:"The provided value is not in the expected date and time format."},dateToWeekdayMismatch:{summary:"Day '{date}' does not fall on a '{weekday}'.",detail:"Enter a weekday that corresponds with the date."},invalidISOString:{invalidRangeSummary:"The value '{value}' is out of range for the '{propertyName}' field in the ISO 8601 string '{isoStr}'.",summary:"The provided '{isoStr}' is not a valid ISO 8601 string.",detail:"Please provide valid ISO 8601 string."}}},"oj-validator":{length:{hint:{min:"Enter {min} or more characters.",max:"Enter {max} or fewer characters.",inRange:"Enter {min} to {max} characters.",exact:"Enter {length} characters."},messageDetail:{tooShort:"Enter {min} or more characters.",tooLong:"Enter no more than {max} characters."},messageSummary:{tooShort:"There are too few characters.",tooLong:"There are too many characters."}},range:{number:{hint:{min:"Enter a number greater than or equal to {min}.",max:"Enter a number less than or equal to {max}.",inRange:"Enter a number between {min} and {max}.",exact:"Enter the number {num}."},messageDetail:{rangeUnderflow:"Enter {min} or a higher number.",rangeOverflow:"Enter {max} or a lower number.",exact:"Enter the number {num}."},messageSummary:{rangeUnderflow:"The number is too low.",rangeOverflow:"The number is too high."}},datetime:{hint:{min:"Enter a date and time on or after {min}.",max:"Enter a date and time on or before {max}.",inRange:"Enter a date and time between {min} and {max}."},messageDetail:{rangeUnderflow:"Enter a date on or after {min}.",rangeOverflow:"Enter a date on or before {max}."},messageSummary:{rangeUnderflow:"Date and time is earlier than the minimum date and time.",rangeOverflow:"Date and time is later than the maximum date and time."}},date:{hint:{min:"Enter a date on or after {min}.",max:"Enter a date on or before {max}.",inRange:"Enter a date between {min} and {max}."},messageDetail:{rangeUnderflow:"Enter a date on or after {min}.",rangeOverflow:"Enter a date on or before {max}."},messageSummary:{rangeUnderflow:"Date is earlier than the minimum date.",rangeOverflow:"Date is later than the maximum date."}},time:{hint:{min:"Enter a time on or after {min}.",max:"Enter a time on or before {max}.",inRange:"Enter a time between {min} and {max}."},messageDetail:{rangeUnderflow:"Enter a time at or after {min}.",rangeOverflow:"Enter a time at or before {max}."},messageSummary:{rangeUnderflow:"Time is earlier than the minimum time.",rangeOverflow:"Time is later than the maximum time."}}},restriction:{date:{messageSummary:"Date {value} is of a disabled entry.",messageDetail:"The date you selected isn't available. Try another date."}},regExp:{summary:"Format is incorrect.",detail:"Enter allowable values described in this regular expression: '{pattern}'."},required:{summary:"Value is required.",detail:"Enter a value."}},"oj-ojEditableValue":{loading:"Loading",requiredText:"Required"},"oj-ojInputDate":{done:"Done",cancel:"Cancel",prevText:"Previous",nextText:"Next",currentText:"Today",weekHeader:"Wk",tooltipCalendar:"Select Date.",tooltipCalendarTime:"Select Date Time.",tooltipCalendarDisabled:"Select Date Disabled.",tooltipCalendarTimeDisabled:"Select Date Time Disabled.",picker:"Picker",weekText:"Week",datePicker:"Date Picker",inputHelp:"Press Key down or Key up for access to Calendar.",inputHelpBoth:"Press Key down or Key up for access to Calendar and Shift + Key down or Shift Key up for access to time drop down.",dateTimeRange:{hint:{min:"",max:"",inRange:""},messageDetail:{rangeUnderflow:"",rangeOverflow:""},messageSummary:{rangeUnderflow:"",rangeOverflow:""}},dateRestriction:{hint:"",messageSummary:"",messageDetail:""}},"oj-ojInputTime":{cancelText:"Cancel",okText:"OK",currentTimeText:"Now",hourWheelLabel:"Hour",minuteWheelLabel:"Minute",ampmWheelLabel:"AMPM",tooltipTime:"Select Time.",tooltipTimeDisabled:"Select Time Disabled.",inputHelp:"Press Key down or Key up for access to time drop down.",dateTimeRange:{hint:{min:"",max:"",inRange:""},messageDetail:{rangeUnderflow:"",rangeOverflow:""},messageSummary:{rangeUnderflow:"",rangeOverflow:""}}},"oj-inputBase":{required:{hint:"",messageSummary:"",messageDetail:""},regexp:{messageSummary:"",messageDetail:""},accessibleMaxLengthExceeded:"Maximum length {len} exceeded.",accessibleMaxLengthRemaining:"{chars} characters left."},"oj-ojInputPassword":{regexp:{messageDetail:"Value must match this pattern: '{pattern}'."}},"oj-ojFilmStrip":{labelAccFilmStrip:"Displaying page {pageIndex} of {pageCount}",labelAccArrowNextPage:"Select Next to display next page",labelAccArrowPreviousPage:"Select Previous to display previous page",tipArrowNextPage:"Next",tipArrowPreviousPage:"Previous"},"oj-ojDataGrid":{accessibleSortAscending:"{id} sorted in ascending order",accessibleSortDescending:"{id} sorted in descending order",accessibleActionableMode:"Enter actionable mode.",accessibleNavigationMode:"Enter navigation mode, press F2 to enter edit or actionable mode.",accessibleEditableMode:"Enter editable mode, press escape to navigate outside the data grid.",accessibleSummaryExact:"This is a data grid with {rownum} rows and {colnum} columns",accessibleSummaryEstimate:"This is a data grid with unknown number of rows and columns",accessibleSummaryExpanded:"There are currently {num} rows expanded",accessibleRowExpanded:"Row expanded",accessibleRowCollapsed:"Row collapsed",accessibleRowSelected:"Row {row} selected",accessibleColumnSelected:"Column {column} selected",accessibleStateSelected:"selected",accessibleMultiCellSelected:"{num} cells selected",accessibleColumnSpanContext:"{extent} wide",accessibleRowSpanContext:"{extent} high",accessibleRowContext:"Row {index}",accessibleColumnContext:"Column {index}",accessibleRowHeaderContext:"Row Header {index}",accessibleColumnHeaderContext:"Column Header {index}",accessibleRowEndHeaderContext:"Row End Header {index}",accessibleColumnEndHeaderContext:"Column End Header {index}",accessibleRowHeaderLabelContext:"Row Header Label {level}",accessibleColumnHeaderLabelContext:"Column Header Label {level}",accessibleRowEndHeaderLabelContext:"Row End Header Label {level}",accessibleColumnEndHeaderLabelContext:"Column End Header Label {level}",accessibleLevelContext:"Level {level}",accessibleRangeSelectModeOn:"Add selected range of cells mode on.",accessibleRangeSelectModeOff:"Add selected range of cells mode off.",accessibleFirstRow:"You have reached the first row.",accessibleLastRow:"You have reached the last row.",accessibleFirstColumn:"You have reached the first column",accessibleLastColumn:"You have reached the last column.",accessibleSelectionAffordanceTop:"Top selection handle.",accessibleSelectionAffordanceBottom:"Bottom selection handle.",msgFetchingData:"Fetching Data...",msgNoData:"No items to display.",labelResize:"Resize",labelResizeWidth:"Resize Width",labelResizeHeight:"Resize Height",labelSortRow:"Sort Row",labelSortRowAsc:"Sort Row Ascending",labelSortRowDsc:"Sort Row Descending",labelSortCol:"Sort Column",labelSortColAsc:"Sort Column Ascending",labelSortColDsc:"Sort Column Descending",labelCut:"Cut",labelPaste:"Paste",labelEnableNonContiguous:"Enable Non-Contiguous Selection",labelDisableNonContiguous:"Disable Non-Contiguous Selection",labelResizeDialogSubmit:"OK",labelResizeDialogCancel:"Cancel"},"oj-ojRowExpander":{accessibleLevelDescription:"Level {level}",accessibleRowDescription:"Level {level}, Row {num} of {total}",accessibleRowExpanded:"Row expanded",accessibleRowCollapsed:"Row collapsed",accessibleStateExpanded:"expanded",accessibleStateCollapsed:"collapsed"},"oj-ojListView":{msgFetchingData:"Fetching Data...",msgNoData:"No items to display.",msgItemsAppended:"{count} items appended to the end.",indexerCharacters:"A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z",accessibleReorderTouchInstructionText:"Double tap and hold.  Wait for the sound then drag to rearrange.",accessibleReorderBeforeItem:"Before {item}",accessibleReorderAfterItem:"After {item}",accessibleReorderInsideItem:"Into {item}",accessibleNavigateSkipItems:"Skipping {numSkip} items",labelCut:"Cut",labelCopy:"Copy",labelPaste:"Paste",labelPasteBefore:"Paste Before",labelPasteAfter:"Paste After"},"oj-_ojLabel":{tooltipHelp:"Help",tooltipRequired:"Required"},"oj-ojLabel":{tooltipHelp:"Help",tooltipRequired:"Required"},"oj-ojInputNumber":{required:{hint:"",messageSummary:"",messageDetail:""},numberRange:{hint:{min:"",max:"",inRange:"",exact:""},messageDetail:{rangeUnderflow:"",rangeOverflow:"",exact:""},messageSummary:{rangeUnderflow:"",rangeOverflow:""}},tooltipDecrement:"Decrement",tooltipIncrement:"Increment"},"oj-ojTable":{accessibleColumnContext:"Column {index}",accessibleColumnHeaderContext:"Column Header {index}",accessibleRowContext:"Row {index}",accessibleSortAscending:"{id} sorted in ascending order",accessibleSortDescending:"{id} sorted in descending order",accessibleStateSelected:"selected",labelAccSelectionAffordanceTop:"Top selection handle",labelAccSelectionAffordanceBottom:"Bottom selection handle",labelEnableNonContiguousSelection:"Enable Non-Contiguous Selection",labelDisableNonContiguousSelection:"Disable Non-Contiguous Selection",labelResize:"Resize",labelResizePopupSubmit:"OK",labelResizePopupCancel:"Cancel",labelResizePopupSpinner:"Resize Column",labelSelectRow:"Select Row",labelEditRow:"Edit Row",labelSelectAndEditRow:"Select And Edit Row",labelSelectColumn:"Select Column",labelSort:"Sort",labelSortAsc:"Sort Ascending",labelSortDsc:"Sort Descending",msgFetchingData:"Fetching Data...",msgNoData:"No data to display.",msgInitializing:"Initializing...",msgColumnResizeWidthValidation:"Width value must be an integer.",msgScrollPolicyMaxCountSummary:"Exceeded maximum rows for table scrolling.",msgScrollPolicyMaxCountDetail:"Please reload with smaller data set.",msgStatusSortAscending:"{0} sorted in ascending order.",msgStatusSortDescending:"{0} sorted in descending order."},"oj-ojTabs":{labelCut:"Cut",labelPasteBefore:"Paste Before",labelPasteAfter:"Paste After",labelRemove:"Remove",labelReorder:"Reorder",removeCueText:"Removable"},"oj-ojCheckboxset":{readonlyNoValue:"",required:{hint:"",messageSummary:"",messageDetail:""}},"oj-ojRadioset":{readonlyNoValue:"",required:{hint:"",messageSummary:"",messageDetail:""}},"oj-ojSelect":{required:{hint:"",messageSummary:"",messageDetail:""},searchField:"Search field",noMatchesFound:"No matches found",oneMatchesFound:"One match found",moreMatchesFound:"{num} matches found",filterFurther:"More results available, please filter further."},"oj-ojSwitch":{SwitchON:"On",SwitchOFF:"Off"},"oj-ojCombobox":{required:{hint:"",messageSummary:"",messageDetail:""},noMatchesFound:"No matches found",oneMatchesFound:"One match found",moreMatchesFound:"{num} matches found",filterFurther:"More results available, please filter further."},"oj-ojSelectSingle":{required:{hint:"",messageSummary:"",messageDetail:""},noMatchesFound:"No matches found",oneMatchFound:"One match found",multipleMatchesFound:"{num} matches found",nOrMoreMatchesFound:"{num} or more matches found",cancel:"Cancel",labelAccOpenDropdown:"expand",labelAccClearValue:"clear value",noResultsLine1:"No results found",noResultsLine2:"We can't find anything matching your search."},"oj-ojInputSearch":{required:{hint:"",messageSummary:"",messageDetail:""},noMatchesFound:"No matches found",oneMatchesFound:"One match found",moreMatchesFound:"{num} matches found"},"oj-ojTree":{stateLoading:"Loading...",labelNewNode:"New Node",labelMultiSelection:"Multiple Selection",labelEdit:"Edit",labelCreate:"Create",labelCut:"Cut",labelCopy:"Copy",labelPaste:"Paste",labelPasteAfter:"Paste After",labelPasteBefore:"Paste Before",labelRemove:"Remove",labelRename:"Rename",labelNoData:"No data"},"oj-ojPagingControl":{labelAccPaging:"Pagination",labelAccPageNumber:"Page {pageNum} content loaded",labelAccNavFirstPage:"First Page",labelAccNavLastPage:"Last Page",labelAccNavNextPage:"Next Page",labelAccNavPreviousPage:"Previous Page",labelAccNavPage:"Page",labelLoadMore:"Show More...",labelLoadMoreMaxRows:"Reached Maximum Limit of {maxRows} rows",labelNavInputPage:"Page",labelNavInputPageMax:"of {pageMax}",fullMsgItemRange:"{pageFrom}-{pageTo} of {pageMax} items",fullMsgItemRangeAtLeast:"{pageFrom}-{pageTo} of at least {pageMax} items",fullMsgItemRangeApprox:"{pageFrom}-{pageTo} of approx {pageMax} items",msgItemRangeNoTotal:"{pageFrom}-{pageTo} items",fullMsgItem:"{pageTo} of {pageMax} items",fullMsgItemAtLeast:"{pageTo} of at least {pageMax} items",fullMsgItemApprox:"{pageTo} of approx {pageMax} items",msgItemNoTotal:"{pageTo} items",msgItemRangeCurrent:"{pageFrom}-{pageTo}",msgItemRangeCurrentSingle:"{pageFrom}",msgItemRangeOf:"of",msgItemRangeOfAtLeast:"of at least",msgItemRangeOfApprox:"of approx.",msgItemRangeItems:"items",tipNavInputPage:"Go To Page",tipNavPageLink:"Go To Page {pageNum}",tipNavNextPage:"Next",tipNavPreviousPage:"Previous",tipNavFirstPage:"First",tipNavLastPage:"Last",pageInvalid:{summary:"The page value entered is invalid.",detail:"Please enter a value greater than 0."},maxPageLinksInvalid:{summary:"Value for maxPageLinks is invalid.",detail:"Please enter a value greater than 4."}},"oj-ojMasonryLayout":{labelCut:"Cut",labelPasteBefore:"Paste Before",labelPasteAfter:"Paste After"},"oj-panel":{labelAccButtonExpand:"Expand",labelAccButtonCollapse:"Collapse",labelAccButtonRemove:"Remove",labelAccFlipForward:"Flip forward",labelAccFlipBack:"Flip back",tipDragToReorder:"Drag to reorder",labelAccDragToReorder:"Drag to reorder, context menu available"},"oj-ojChart":{labelDefaultGroupName:"Group {0}",labelSeries:"Series",labelGroup:"Group",labelDate:"Date",labelValue:"Value",labelTargetValue:"Target",labelX:"X",labelY:"Y",labelZ:"Z",labelPercentage:"Percentage",labelLow:"Low",labelHigh:"High",labelOpen:"Open",labelClose:"Close",labelVolume:"Volume",labelQ1:"Q1",labelQ2:"Q2",labelQ3:"Q3",labelMin:"Min",labelMax:"Max",labelOther:"Other",tooltipPan:"Pan",tooltipSelect:"Marquee select",tooltipZoom:"Marquee zoom",componentName:"Chart"},"oj-dvtBaseGauge":{componentName:"Gauge"},"oj-ojDiagram":{promotedLink:"{0} link",promotedLinks:"{0} links",promotedLinkAriaDesc:"Indirect",componentName:"Diagram"},"oj-ojGantt":{componentName:"Gantt",accessibleDurationDays:"{0} days",accessibleDurationHours:"{0} hours",accessibleTaskInfo:"Start time is {0}, end time is {1}, duration is {2}",accessibleMilestoneInfo:"Time is {0}",accessibleRowInfo:"Row {0}",accessibleTaskTypeMilestone:"Milestone",accessibleTaskTypeSummary:"Summary",accessiblePredecessorInfo:"{0} predecessors",accessibleSuccessorInfo:"{0} successors",accessibleDependencyInfo:"Dependency type {0}, connects {1} to {2}",startStartDependencyAriaDesc:"start to start",startFinishDependencyAriaDesc:"start to finish",finishStartDependencyAriaDesc:"finish to start",finishFinishDependencyAriaDesc:"finish to finish",tooltipZoomIn:"Zoom In",tooltipZoomOut:"Zoom Out",labelLevel:"Level",labelRow:"Row",labelStart:"Start",labelEnd:"End",labelDate:"Date",labelBaselineStart:"Baseline Start",labelBaselineEnd:"Baseline End",labelBaselineDate:"Baseline Date",labelLabel:"Label",labelProgress:"Progress",labelMoveBy:"Move By",labelResizeBy:"Resize By",taskMoveInitiated:"Task move initiated",taskResizeEndInitiated:"Task resize end initiated",taskResizeStartInitiated:"Task resize start initiated",taskMoveSelectionInfo:"{0} others selected",taskResizeSelectionInfo:"{0} others selected",taskMoveInitiatedInstruction:"Use the arrow keys to move",taskResizeInitiatedInstruction:"Use the arrow keys to resize",taskMoveFinalized:"Task move finalized",taskResizeFinalized:"Task resize finalized",taskMoveCancelled:"Task move cancelled",taskResizeCancelled:"Task resize cancelled",taskResizeStartHandle:"Task resize start handle",taskResizeEndHandle:"Task resize end handle"},"oj-ojLegend":{componentName:"Legend",tooltipExpand:"Expand",tooltipCollapse:"Collapse"},"oj-ojNBox":{highlightedCount:"{0}/{1}",labelOther:"Other",labelGroup:"Group",labelSize:"Size",labelAdditionalData:"Additional Data",componentName:"{0} Box"},"oj-ojPictoChart":{componentName:"Picture Chart"},"oj-ojSparkChart":{componentName:"Chart"},"oj-ojSunburst":{labelColor:"Color",labelSize:"Size",tooltipExpand:"Expand",tooltipCollapse:"Collapse",componentName:"Sunburst"},"oj-ojTagCloud":{componentName:"Tag Cloud"},"oj-ojThematicMap":{componentName:"Thematic Map",areasRegion:"Areas",linksRegion:"Links",markersRegion:"Markers"},"oj-ojTimeAxis":{componentName:"Time Axis"},"oj-ojTimeline":{componentName:"Timeline",accessibleItemDesc:"Description is {0}.",accessibleItemEnd:"End time is {0}.",accessibleItemStart:"Start time is {0}.",accessibleItemTitle:"Title is {0}.",labelSeries:"Series",tooltipZoomIn:"Zoom In",tooltipZoomOut:"Zoom Out",labelStart:"Start",labelEnd:"End",labelDate:"Date",labelTitle:"Title",labelDescription:"Description"},"oj-ojTreemap":{labelColor:"Color",labelSize:"Size",tooltipIsolate:"Isolate",tooltipRestore:"Restore",componentName:"Treemap"},"oj-dvtBaseComponent":{labelScalingSuffixThousand:"K",labelScalingSuffixMillion:"M",labelScalingSuffixBillion:"B",labelScalingSuffixTrillion:"T",labelScalingSuffixQuadrillion:"Q",labelInvalidData:"Invalid data",labelNoData:"No data to display",labelClearSelection:"Clear Selection",labelDataVisualization:"Data Visualization",stateSelected:"Selected",stateUnselected:"Unselected",stateMaximized:"Maximized",stateMinimized:"Minimized",stateExpanded:"Expanded",stateCollapsed:"Collapsed",stateIsolated:"Isolated",stateHidden:"Hidden",stateVisible:"Visible",stateDrillable:"Drillable",labelAndValue:"{0}: {1}",labelCountWithTotal:"{0} of {1}"},"oj-ojNavigationList":{defaultRootLabel:"Navigation List",hierMenuBtnLabel:"Hierarchical Menu button",selectedLabel:"selected",previousIcon:"Previous",msgFetchingData:"Fetching Data...",msgNoData:"No items to display.",overflowItemLabel:"More",accessibleReorderTouchInstructionText:"Double tap and hold.  Wait for the sound then drag to rearrange.",accessibleReorderBeforeItem:"Before {item}",accessibleReorderAfterItem:"After {item}",labelCut:"Cut",labelPasteBefore:"Paste Before",labelPasteAfter:"Paste After",labelRemove:"Remove",removeCueText:"Removable"},"oj-ojSlider":{noValue:"ojSlider has no value",maxMin:"Max must not be less than or equal to min",startEnd:"value.start must not be greater than value.end",valueRange:"Value must be within min to max range",optionNum:"{option} option is not a number",invalidStep:"Invalid step; step must be > 0"},"oj-ojDialog":{labelCloseIcon:"Close"},"oj-ojPopup":{ariaLiveRegionInitialFocusFirstFocusable:"Entering pop-up. Press F6 to navigate between the pop-up and associated control.",ariaLiveRegionInitialFocusNone:"Pop-up opened. Press F6 to navigate between the pop-up and associated control.",ariaLiveRegionInitialFocusFirstFocusableTouch:"Entering pop-up. Pop-up can be closed by navigating to the last link within the pop-up.",ariaLiveRegionInitialFocusNoneTouch:"Pop-up opened. Navigate to the next link to establish focus within the pop-up.",ariaFocusSkipLink:"Double tap to navigate to the open pop-up.",ariaCloseSkipLink:"Double tap to close the open pop-up."},"oj-ojRefresher":{ariaRefreshLink:"Activate link to refresh content",ariaRefreshingLink:"Refreshing content",ariaRefreshCompleteLink:"Refresh complete"},"oj-ojSwipeActions":{ariaShowStartActionsDescription:"Show start actions",ariaShowEndActionsDescription:"Show end actions",ariaHideActionsDescription:"Hide actions"},"oj-ojIndexer":{indexerCharacters:"A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z",indexerOthers:"#",ariaDisabledLabel:"No matching group header",ariaOthersLabel:"number",ariaInBetweenText:"Between {first} and {second}",ariaKeyboardInstructionText:"Press enter to select value.",ariaTouchInstructionText:"Double tap and hold to enter gesture mode, then drag up or down to adjust value."},"oj-ojMenu":{labelCancel:"Cancel",ariaFocusSkipLink:"Focus is within the menu, double tap or swipe to move focus to the first menu item."},"oj-ojColorSpectrum":{labelHue:"Hue",labelOpacity:"Opacity",labelSatLum:"Saturation/Luminance",labelThumbDesc:"Color spectrum four way slider."},"oj-ojColorPalette":{labelNone:"None"},"oj-ojColorPicker":{labelSwatches:"Swatches",labelCustomColors:"Custom Colors",labelPrevColor:"Previous Color",labelDefColor:"Default Color",labelDelete:"Delete",labelDeleteQ:"Delete?",labelAdd:"Add",labelAddColor:"Add color",labelMenuHex:"HEX",labelMenuRgba:"RGBa",labelMenuHsla:"HSLa",labelSliderHue:"Hue",labelSliderSaturation:"Saturation",labelSliderSat:"Sat",labelSliderLightness:"Lightness",labelSliderLum:"Luminosity",labelSliderAlpha:"Alpha",labelOpacity:"Opacity",labelSliderRed:"Red",labelSliderGreen:"Green",labelSliderBlue:"Blue"},"oj-ojFilePicker":{dropzoneText:"Drop files here or click to upload",singleFileUploadError:"Upload one file at a time.",singleFileTypeUploadError:"You can't upload files of type {fileType}.",multipleFileTypeUploadError:"You can't upload files of type: {fileTypes}.",dropzonePrimaryText:"Drag and Drop",secondaryDropzoneText:"Select a file or drop one here.",secondaryDropzoneTextMultiple:"Select or drop files here.",unknownFileType:"unknown"},"oj-ojProgressbar":{ariaIndeterminateProgressText:"In Progress"},"oj-ojMessage":{labelCloseIcon:"Close",categories:{error:"Error",warning:"Warning",info:"Information",confirmation:"Confirmation"}},"oj-ojSelector":{checkboxAriaLabel:"Checkbox Select {rowKey}"},"oj-ojMessages":{labelLandmark:"Messages",ariaLiveRegion:{navigationFromKeyboard:"Entering messages region. Press F6 to navigate back to prior focused element.",navigationToTouch:"Messages region has new messages. Use the voice-over rotor to navigate to the messages landmark.",navigationToKeyboard:"Messages region has new messages.  Press F6 to navigate to the most recent message region.",newMessage:"Message category {category}. {summary}. {detail}."}}},ar:1,"ar-XB":1,cs:1,da:1,de:1,el:1,"en-XA":1,"en-XC":1,es:1,et:1,fi:1,fr:1,"fr-CA":1,he:1,hr:1,hu:1,is:1,it:1,ja:1,ko:1,lt:1,lv:1,nl:1,no:1,pl:1,pseudo:1,pt:1,"pt-PT":1,ro:1,ru:1,sk:1,sl:1,sr:1,"sr-Latn":1,sv:1,th:1,tr:1,"zh-Hans":1,"zh-Hant":1});

/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojconfig',["require","ojs/ojcore-base","ojL10n!ojtranslations/nls/ojtranslations"],function(e,n,o){"use strict";var r={getDeviceRenderMode:function(){return document.body.getAttribute("data-oj-device-render-mode")||r.getDeviceType()},getDeviceType:function(){return n.AgentUtils.getAgentInfo().deviceType},getLocale:function(){if(n.__isAmdLoaderPresent()){n.Assert.assert(void 0!==o,"ojtranslations module must be defined");var e=o._ojLocale_;return"root"===e?"en":e}var t=r._locale;return null==t&&((t=document.documentElement.lang)||(t=void 0===navigator?"en":(navigator.language||navigator.userLanguage||"en").toLowerCase()),t=t.toLowerCase(),r._locale=t),t},setLocale:function(t,a){if(n.__isAmdLoaderPresent()){var i="ojL10n!ojtranslations/nls/",s=[i+t+"/ojtranslations"],u=0;if(n.LocaleData&&(s.push(i+t+"/localeElements"),n.TimezoneData)){var l=n.TimezoneData.__getBundleNames();u=l.length,l.forEach(function(e){s.push(i+t+e)})}e(s,function(e,r){o=e,r&&n.LocaleData.__updateBundle(r);for(var t=0;t<u;t++){var i=arguments[t+2];n.TimezoneData.__mergeIntoLocaleElements(i)}a&&a()})}else r._locale=t,a&&a()},getResourceUrl:function(e){if(null==e||/^\/|:/.test(e))return e;var n=r._resourceBaseUrl;null==n&&(n=r._getOjBaseUrl()||"");var o=n.length;return n+(0===o||"/"===n.charAt(o-1)?"":"/")+e},setResourceBaseUrl:function(e){r._resourceBaseUrl=e},setAutomationMode:function(e){r._automationMode=e},getAutomationMode:function(){return r._automationMode},getVersionInfo:function(){var e="Oracle JET Version: "+n.version+"\n";e+="Oracle JET Revision: "+n.revision+"\n";var o="undefined"!=typeof window;return o&&window.navigator&&(e+="Browser: "+window.navigator.userAgent+"\n",e+="Browser Platform: "+window.navigator.platform+"\n"),$&&($.fn&&(e+="jQuery Version: "+$.fn.jquery+"\n"),$.ui&&$.ui.version&&(e+="jQuery UI Version: "+$.ui.version+"\n")),n.ComponentBinding&&(e+="Knockout Version: "+n.ComponentBinding.__getKnockoutVersion()+"\n"),o&&window.require&&(e+="Require Version: "+window.require.version+"\n"),e},logVersionInfo:function(){},_getOjBaseUrl:function(){var o=null;n.__isAmdLoaderPresent()&&(o=e.toUrl("ojs/_foo_").replace(/[^/]*$/,"../"));return o},__getTemplateEngine:function(){if(!r._templateEnginePromise){if(!n.__isAmdLoaderPresent())throw new Error("JET Template engine cannot be loaded with an AMD loader");r._templateEnginePromise=new Promise(function(n,o){e(["./ojtemplateengine"],n,o)})}return r._templateEnginePromise},getConfigBundle:function(){return o},getExpressionEvaluator:function(){return r._expressionEvaluator},setExpressionEvaluator:function(e){if(r._expressionEvaluator)throw new Error("JET Expression evaluator can't be set more than once.");r._expressionEvaluator=e}};return r});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojresponsiveutils',["ojs/ojlogger"],function(e){"use strict";var n=function(){};return n.SCREEN_RANGE={SM:"sm",MD:"md",LG:"lg",XL:"xl",XXL:"xxl"},n.FRAMEWORK_QUERY_KEY={SM_UP:"sm-up",MD_UP:"md-up",LG_UP:"lg-up",XL_UP:"xl-up",XXL_UP:"xxl-up",SM_ONLY:"sm-only",MD_ONLY:"md-only",LG_ONLY:"lg-only",XL_ONLY:"xl-only",MD_DOWN:"md-down",LG_DOWN:"lg-down",XL_DOWN:"xl-down",HIGH_RESOLUTION:"high-resolution"},(n._RANGE={})[n.SCREEN_RANGE.SM]=0,n._RANGE[n.SCREEN_RANGE.MD]=1,n._RANGE[n.SCREEN_RANGE.LG]=2,n._RANGE[n.SCREEN_RANGE.XL]=3,n._RANGE[n.SCREEN_RANGE.XXL]=4,n._getMediaQueryFromClass=function(e){var n=document.getElementsByClassName(e).item(0);return null===n&&((n=document.createElement("meta")).className=e,document.head.appendChild(n)),window.getComputedStyle(n).getPropertyValue("font-family").replace(/^[/\\'"]+|(;\s?})+|[/\\'"]+$/g,"")},n.getFrameworkQuery=function(t){var l=n._getMediaQueryFromClass("oj-mq-"+t);return"null"===l?(e.warn("Framework query not found. Please check that the value of the theming variable$includeResponsiveMediaQueryClasses is set to true, if itis set to false the media queries are not sent down to the browser."),null):l},n.compare=function(e,t){var l=n._RANGE[e],o=n._RANGE[t];if(null==l)throw new Error("size1 param "+e+" illegal, please use one of the screen size constants like oj.ResponsiveUtils.SCREEN_RANGE.MD");if(null==o)throw new Error("size2 param "+t+" illegal, please use one of the screen size constants like oj.ResponsiveUtils.SCREEN_RANGE.MD");return l-o},n});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojthemeutils',["ojs/ojlogger"],function(e){"use strict";var t=function(){};return t.getThemeName=function(){return(t.parseJSONFromFontFamily("oj-theme-json")||{}).name},t.getThemeTargetPlatform=function(){return(t.parseJSONFromFontFamily("oj-theme-json")||{}).targetPlatform},t.clearCache=function(){this._cache=null},t.parseJSONFromFontFamily=function(t){null==this._cache&&(this._cache={},this._null_cache_value={},this._headfontstring=window.getComputedStyle(document.head).getPropertyValue("font-family"));var r=this._cache[t];if(r===this._null_cache_value)return null;if(null!=r)return r;var n=document.createElement("meta");n.className=t,document.head.appendChild(n);var a=window.getComputedStyle(n).getPropertyValue("font-family");if(null!=a)if(a===this._headfontstring)e.warn("parseJSONFromFontFamily: When the selector ",t," is applied the font-family read off the dom element is ",a,". The parent dom elment has the same font-family value."," This is interpreted to mean that no value was sent down for selector ",t,". Null will be returned.");else{var o=a.replace(/^['"]+|\s+|\\|(;\s?})+|['"]$/g,"");if(o)try{r=JSON.parse(o)}catch(a){var l=o.indexOf(","),i=!1;if(l>-1){o=o.substring(l+2);try{r=JSON.parse(o),i=!0}catch(e){}}if(!1===i)throw e.error("Error parsing json for selector "+t+".\nString being parsed is "+o+". Error is:\n",a),document.head.removeChild(n),a}}return document.head.removeChild(n),this._cache[t]=null==r?this._null_cache_value:r,r},t});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojtimerutils',[],function(){"use strict";var n={};function e(){}return e.prototype.getPromise=function(){},e.prototype.clear=function(){},n.getTimer=function(e){return new n._TimerImpl(e)},n._TimerImpl=function(n){var e,t,i;function o(n){i=null,t(n)}this.getPromise=function(){return e},this.clear=function(){window.clearTimeout(i),i=null,o(!1)},e="undefined"==typeof window?Promise.reject():new Promise(function(e){t=e,i=window.setTimeout(o.bind(null,!0),n)})},n});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojtranslation',["ojs/ojcore-base","ojs/ojconfig"],function(e,r){"use strict";var n={setBundle:function(e){n._bundle=e},getResource:function(e){return n._getResourceString(e)},applyParameters:function(e,r){return null==e?null:n._format(e,r)},getTranslatedString:function(e,r){var t=n._getResourceString(e);if(null==t)return e;var u={};return arguments.length>2?u=Array.prototype.slice.call(arguments,1):2===arguments.length&&("object"==typeof(u=arguments[1])||u instanceof Array||(u=[u])),n.applyParameters(t,u)},getComponentTranslations:function(e){var r=n._getBundle()[e];if(null==r)return{};for(var t={},u=Object.keys(r),a=0;a<u.length;a++){var l=u[a];t[l]=r[l]}return t},_getResourceString:function(r){var t=r?r.split("."):[],u=n._getBundle();e.Assert.assertObject(u);for(var a=0;a<t.length&&null!=u;a++){u=u[t[a]]}return null!=u?u:null},_format:function(e,r){var n,t,u=e.length,a=[],l=null,s=!1,o=!1,i=!1,c=!1;for(t=0;t<u;t++){var f=e.charAt(t),g=!1;if(s)g=!0,s=!1;else switch(f){case"$":s=!0;break;case"{":c||(o||(n=!1,l=[]),o=!0);break;case"}":if(o&&l.length>0){var d=r[l.join("")];a.push(void 0===d?"null":d)}o=!1;break;case"[":o||(i?c=!0:i=!0);break;case"]":c?c=!1:i=!1;break;default:g=!0}g&&(o?","===f||" "===f?n=!0:n||l.push(f):c||a.push(f))}return a.join("")},_getBundle:function(){var t=n._bundle;if(t)return t;if(e.__isAmdLoaderPresent()){var u=r.getConfigBundle();return e.Assert.assert(void 0!==u,"ojtranslations module must be defined"),u}return{}}};return n});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojcore',["require","ojs/ojcore-base","ojs/ojcontext","ojs/ojconfig","ojs/ojlogger","ojs/ojresponsiveutils","ojs/ojthemeutils","ojs/ojtimerutils","ojs/ojtranslation"],function(o,s,e,t,i,j,n,r,l){"use strict";return s.Logger=i,s.Context=e,s.Config=t,s.ResponsiveUtils=j,s.ThemeUtils=n,s.TimerUtils=r,s.Translations=l,s});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojhtmlutils',["ojs/ojcore","knockout"],function(e,t){"use strict";var r={};return r.stringToNodeArray=function(e){var t,r,n,o,a,l=["table","caption","colgroup","col","thead","tfoot","th","tbody","tr","td","template","p"];for(t=0;t<l.length;t++)r=l[t],n=e,void 0,void 0,o=new RegExp("<"+r+"(?=\\s|>)","gi"),a=new RegExp("</"+r+"(?=\\s|>)","gi"),e=n.replace(o,"<oj-bind-replace-"+r).replace(a,"</oj-bind-replace-"+r);var i=document.createElement("div");i.innerHTML=e,-1!==e.indexOf("<oj-bind-replace-")&&function e(t){var r=t.childNodes;var n=r.length;for(var o=0;o<n;o++){var a=r[o];e(a);var l,i,c,d=a.nodeName.toLowerCase();if("oj-bind-replace-"===d.substr(0,16)){var p=d.substr(16);for(c=document.createElement(p),l=0;l<a.attributes.length;l++)i=a.attributes[l],c.setAttribute(i.name,i.value);var s=c.content?c.content:c;for(l=0;a.childNodes.length>0;)s.appendChild(a.childNodes[0]);t.replaceChild(c,a)}else if("script"===d||"style"===d){for(c=document.createElement(d),l=0;l<a.attributes.length;l++)i=a.attributes[l],c.setAttribute(i.name,i.value);var u=a.innerHTML;c.innerHTML=u.replace(new RegExp("oj-bind-replace-","g"),""),t.replaceChild(c,a)}else if(8===a.nodeType){var h=a.nodeValue;a.nodeValue=h.replace(new RegExp("oj-bind-replace-","g"),"")}}}(i);var c=i.childNodes,d=[];for(t=c.length;t--;d.unshift(c[t]));return d},r.getTemplateContent=function(e){var t=[];if(1!==e.nodeType||"template"!==e.tagName.toLowerCase())throw new Error("Invalid template node "+e);var r=e.content;return r?t.push(document.importNode(r,!0)):Array.prototype.forEach.call(e.childNodes,function(e){t.push(e.cloneNode(!0))}),t},r});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojmodule-element-utils',["ojs/ojcore","knockout","ojs/ojhtmlutils","ojs/ojlogger"],function(e,i,r,n){"use strict";var t={};return e.ModuleElementUtils=t,t.createView=function(e){if(!e||!e.viewPath)return Promise.resolve([]);var i=new Promise(function(i,r){(e.require?e.require:require)(["text!"+e.viewPath],i,r)});return new Promise(function(e,n){i.then(function(i){var n=r.stringToNodeArray(i);return e(n)},function(e){return n(e)})})},t.createViewModel=function(e){return e&&e.viewModelPath?new Promise(function(i,r){(e.require?e.require:require)([e.viewModelPath],i,r)}).then(function(i){var r=i;return r&&("always"===e.initialize||null!=e.params&&"never"!==e.initialize)&&("function"==typeof r?r=new r(e.params):"function"==typeof r.initialize&&r.initialize(e.params)),r}):Promise.resolve(null)},t.createConfig=function(e){if(!e||!e.name&&!e.viewPath)return Promise.resolve(null);var i=e.viewPath||"views/"+e.name+".html",r=e.viewModelPath||(e.name?"viewModels/"+e.name:null);return Promise.all([t.createView({viewPath:i,require:e.require}),t.createViewModel({viewModelPath:r,require:e.require,params:e.params,initialize:"always"})]).then(function(e){return{view:e[0],viewModel:e[1]}})},{createView:t.createView,createViewModel:t.createViewModel,createConfig:t.createConfig}});
/*! jQuery v3.5.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.5.1",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S="sizzle"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",B=new RegExp(M+"+","g"),$=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp(F),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+xe(l[o]);c=l.join(",")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return g(t.replace($,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+S+"-]").length||v.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",F)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&m(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(B," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,"$1"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace($,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split("").sort(D).join("")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):"string"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var j,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||j,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,j=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),S.ready()}S.fn.ready=function(e){return F.then(e)["catch"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===S.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Y.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ue[s]=u)))):"none"!==n&&(l[c]="none",Y.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement("div")),(fe=E.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML="<option></option>",y.option=!!ce.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}var be=/^key/,we=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Te=/^([^.]*)(?:\.(.+)|)/;function Ce(){return!0}function Ee(){return!1}function Se(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function ke(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)ke(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ee;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Ae(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,Ce)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(P)||[""]).length;while(l--)d=g=(s=Te.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(P)||[""]).length;while(l--)if(d=g=(s=Te.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Ae(t,"click",Ce),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Ae(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ce:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ce,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ce,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ce,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&be.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&we.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return Ae(this,e,Se),!1},trigger:function(){return Ae(this,e),!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return ke(this,e,t,n,r)},one:function(e,t,n,r){return ke(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ee),this.each(function(){S.event.remove(this,e,n,t)})}});var Ne=/<script|<style|<link/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,je=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function qe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Le(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function He(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Oe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function Pe(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&De.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Pe(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,"script"),Le)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,He),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Y.access(u,"globalEval")&&S.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):b(u.textContent.replace(je,""),u,l))}return n}function Re(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Oe(o[r],a[r]);else Oe(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Pe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||qe(this,e).appendChild(e)})},prepend:function(){return Pe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=qe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ne.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Pe(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Me=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Ie=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},We=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Fe=new RegExp(ne.join("|"),"i");function Be(e,t,n){var r,i,o,a,s=e.style;return(n=n||Ie(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Me.test(a)&&Fe.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement("div"),l=E.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px",t.style.height="1px",n.style.height="9px",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=3<parseInt(r.height),re.removeChild(e)),a}}))}();var _e=["Webkit","Moz","ms"],ze=E.createElement("div").style,Ue={};function Xe(e){var t=S.cssProps[e]||Ue[e];return t||(e in ze?e:Ue[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=_e.length;while(n--)if((e=_e[n]+t)in ze)return e}(e)||e)}var Ve=/^(none|table(?!-c[ea]).+)/,Ge=/^--/,Ye={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:"0",fontWeight:"400"};function Je(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ke(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=S.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=S.css(e,"border"+ne[a]+"Width",!0,i))):(u+=S.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=S.css(e,"border"+ne[a]+"Width",!0,i):s+=S.css(e,"border"+ne[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Ze(e,t,n){var r=Ie(e),i=(!y.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=Be(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Me.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Ke(e,t,n||(i?"border":"content"),o,r,a)+"px"}function et(e,t,n,r,i){return new et.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Be(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Ge.test(t),l=e.style;if(u||(t=Xe(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Ge.test(t)||(t=Xe(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Be(e,t,r)),"normal"===i&&t in Qe&&(i=Qe[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ve.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,u,n):We(e,Ye,function(){return Ze(e,u,n)})},set:function(e,t,n){var r,i=Ie(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,i),s=n?Ke(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Ke(e,u,"border",!1,i)-.5)),s&&(r=te.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=S.css(e,u)),Je(0,t,s)}}}),S.cssHooks.marginLeft=$e(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Be(e,"marginLeft"))||e.getBoundingClientRect().left-We(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=Je)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Ie(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=et).prototype={constructor:et,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}}).init.prototype=et.prototype,(et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Xe(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=et.prototype.init,S.fx.step={};var tt,nt,rt,it,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function st(){nt&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(st):C.setTimeout(st,S.fx.interval),S.fx.tick())}function ut(){return C.setTimeout(function(){tt=void 0}),tt=Date.now()}function lt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ft(o,e,t){var n,a,r=0,i=ft.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=tt||ut(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:tt||ut(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=ft.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ct,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(ft,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],ot.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=S.css(e,"display"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,"fxshow"),d)S.style(e,r,d[r])})),u=ct(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=ft(this,S.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&at.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(lt(r,!0),e,t,n)}}),S.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),tt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){nt||(nt=!0,st())},S.fx.stop=function(){nt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},rt=E.createElement("input"),it=E.createElement("select").appendChild(E.createElement("option")),rt.type="checkbox",y.checkOn=""!==rt.value,y.optSelected=it.selected,(rt=E.createElement("input")).value="t",rt.type="radio",y.radioValue="t"===rt.value;var pt,dt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=dt[t]||S.find.attr;dt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=dt[o],dt[o]=r,r=null!=a(e,t,n)?o:null,dt[o]=i),r}});var ht=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match(P)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,yt(this)))});if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,yt(this)))});if(!arguments.length)return this.attr("class","");if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,yt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=mt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=yt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+vt(yt(n))+" ").indexOf(t))return!0;return!1}});var xt=/\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(xt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:vt(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var bt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!bt.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,bt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,wt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,wt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var Tt=C.location,Ct={guid:Date.now()},Et=/\?/;S.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+e),t};var St=/\[\]$/,kt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function Dt(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||St.test(n)?i(n,t):Dt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)Dt(n+"["+t+"]",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)Dt(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Nt.test(this.nodeName)&&!At.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:n.replace(kt,"\r\n")}}).get()}});var jt=/%20/g,qt=/#.*$/,Lt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ot=/^(?:GET|HEAD)$/,Pt=/^\/\//,Rt={},Mt={},It="*/".concat("*"),Wt=E.createElement("a");function Ft(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Bt(t,i,o,a){var s={},u=t===Mt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function $t(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Wt.href=Tt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":It,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$t($t(e,S.ajaxSettings),t):$t(S.ajaxSettings,e)},ajaxPrefilter:Ft(Rt),ajaxTransport:Ft(Mt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Ht.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Tt.href)+"").replace(Pt,Tt.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(P)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Wt.protocol+"//"+Wt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Bt(Rt,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Ot.test(v.type),f=v.url.replace(qt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(jt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(Et.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Lt,"$1"),o=(Et.test(f)?"&":"?")+"_="+Ct.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader("If-Modified-Since",S.lastModified[f]),S.etag[f]&&T.setRequestHeader("If-None-Match",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+It+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Bt(Mt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray("script",v.dataTypes)&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(S.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(S.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var _t={0:200,1223:204},zt=S.ajaxSettings.xhr();y.cors=!!zt&&"withCredentials"in zt,y.ajax=zt=!!zt,S.ajaxTransport(function(i){var o,a;if(y.cors||zt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(_t[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Ut,Xt=[],Vt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||S.expando+"_"+Ct.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Vt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Vt,"$1"+r):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((Ut=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ut.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=vt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,"position"),c=S(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),u=S.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):("number"==typeof f.top&&(f.top+="px"),"number"==typeof f.left&&(f.left+="px"),c.css(f))}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=$e(y.pixelPosition,function(e,t){if(t)return t=Be(e,n),Me.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Gt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Gt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Yt=C.jQuery,Qt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Qt),e&&C.jQuery===S&&(C.jQuery=Yt),S},"undefined"==typeof e&&(C.jQuery=C.$=S),S});

/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojmessaging',["ojs/ojcore","jquery"],function(e,s){"use strict";e.Message=function(e,s,t){this.Init(e,s,t)},e.Message.SEVERITY_TYPE={CONFIRMATION:"confirmation",INFO:"info",WARNING:"warning",ERROR:"error",FATAL:"fatal"},e.Message.SEVERITY_LEVEL={FATAL:5,ERROR:4,WARNING:3,INFO:2,CONFIRMATION:1},e.Object.createSubclass(e.Message,e.Object,"oj.Message"),e.Message.prototype.Init=function(s,t,n){e.Message.superclass.Init.call(this),this.summary=s,this.detail=t,this.severity=n||e.Message.SEVERITY_TYPE.ERROR},e.Message.getSeverityLevel=function(s){var t=s;if(t)if("string"==typeof s){var n=e.Message._LEVEL_TO_TYPE.indexOf(t,1);t=-1===n?e.Message.SEVERITY_LEVEL.ERROR:n}else"number"==typeof t&&(t<e.Message.SEVERITY_LEVEL.CONFIRMATION||t>e.Message.SEVERITY_LEVEL.FATAL)&&(t=e.Message.SEVERITY_LEVEL.ERROR);return t||e.Message.SEVERITY_LEVEL.ERROR},e.Message.getSeverityType=function(s){var t=s;t&&("string"==typeof t?-1===e.Message._LEVEL_TO_TYPE.indexOf(t,1)&&(t=e.Message.SEVERITY_TYPE.ERROR):"number"==typeof t&&(t=t<e.Message.SEVERITY_LEVEL.CONFIRMATION||t>e.Message.SEVERITY_LEVEL.FATAL?e.Message.SEVERITY_TYPE.ERROR:e.Message._LEVEL_TO_TYPE[s]));return t||e.Message.SEVERITY_TYPE.ERROR},e.Message.getMaxSeverity=function(t){var n=-1;return t&&t.length>0&&s.each(t,function(s,t){var o=e.Message.getSeverityLevel(t.severity);n=n<o?o:n}),n},e.Message.isValid=function(s){return!(e.Message.getMaxSeverity(s)>=e.Message.SEVERITY_LEVEL.ERROR)},e.Message._LEVEL_TO_TYPE=["none",e.Message.SEVERITY_TYPE.CONFIRMATION,e.Message.SEVERITY_TYPE.INFO,e.Message.SEVERITY_TYPE.WARNING,e.Message.SEVERITY_TYPE.ERROR,e.Message.SEVERITY_TYPE.FATAL];e.Message;return e.ComponentMessage=function(e,s,t,n){this.Init(e,s,t,n)},e.Object.createSubclass(e.ComponentMessage,e.Message,"oj.ComponentMessage"),e.ComponentMessage.DISPLAY={SHOWN:"shown",HIDDEN:"hidden"},e.ComponentMessage._DEFAULT_OPTIONS={display:e.ComponentMessage.DISPLAY.SHOWN,context:""},e.ComponentMessage.prototype.Init=function(t,n,o,E){e.ComponentMessage.superclass.Init.call(this,t,n,o),this._options=s.extend({},e.ComponentMessage._DEFAULT_OPTIONS,E)},e.ComponentMessage.prototype.clone=function(){return new e.ComponentMessage(this.summary,this.detail,this.severity,this._options)},e.ComponentMessage.prototype.canDisplay=function(){return!(this._options&&this._options.display&&this._options.display===e.ComponentMessage.DISPLAY.HIDDEN)},e.ComponentMessage.prototype._forceDisplayToShown=function(){return!(!this._options||e.ComponentMessage.DISPLAY.HIDDEN!==this._options.display)&&(this._options.display=e.ComponentMessage.DISPLAY.SHOWN,!0)},e.ComponentMessage.prototype._isMessageAddedByComponent=function(){return!(!this._options||!this._options.context)},e.Message});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojmetadatautils',["ojs/ojcore-base"],function(e){"use strict";var t={getDefaultValue:function(r,o){var n=r.value;if(void 0===n){var u=r.properties;if(u){for(var a={},i=Object.keys(u),l=0;l<i.length;l++){var c=t.getDefaultValue(u[i[l]]);void 0!==c&&(a[i[l]]=c)}Object.keys(a).length>0&&(r.value=a,n=a)}}return void 0!==n&&(Array.isArray(n)?n=o?t.deepFreeze(n):n.slice():null!==n&&"object"==typeof n&&(n=o?t.deepFreeze(n):e.CollectionUtils.copyInto({},n,void 0,!0))),n},getDefaultValues:function(e,r){var o={},n=Object.keys(e),u=!1;return n.forEach(function(n){var a=t.getDefaultValue(e[n],r);void 0!==a&&(o[n]=a,u=!0)}),u?o:null},deepFreeze:function(e){if(Object.isFrozen(e))return e;if(Array.isArray(e))e=e.map(e=>t.deepFreeze(e));else if(null!==e&&"object"==typeof e){const r=Object.getPrototypeOf(e);null!==r&&r!==Object.prototype||(Object.keys(e).forEach(function(r){e[r]=t.deepFreeze(e[r])}),Object.freeze(e))}return e}};return t});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdefaultsutils',["ojs/ojmetadatautils"],function(t){"use strict";var e;return function(e){function a(e,a,i){var n;let u=e._staticDefaults;if(void 0===u){if(u=null,a){const e=a.properties,l=null===(n=a.extension)||void 0===n?void 0:n._DEFAULTS;if(l){var f=new l;u=Object.create(f)}else e&&(u=Object.create(t.getDefaultValues(e,i)))}e._staticDefaults=u}return u}function i(t,e){if(t.getDynamicDefaults){const a=t.getDynamicDefaults();if(a)for(let t in a)void 0===e[t]&&(e[t]=a[t])}}e.getFrozenDefault=function(a,i,n){var u=e.getDefaults(i,n,!0);return t.deepFreeze(u[a])},e.getDefaults=function(t,e,n){let u=t._defaults;if(void 0===u){const f=a(t,e,n);i(t,u=Object.create(f)),t._defaults=u}return u},e.getStaticDefaults=a,e.applyDynamicDefaults=i}(e||(e={})),{DefaultsUtils:e}});
(function(){
'use strict';var h=new function(){};var aa=new Set("annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" "));function m(b){var a=aa.has(b);b=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(b);return!a&&b}function n(b){var a=b.isConnected;if(void 0!==a)return a;for(;b&&!(b.__CE_isImportDocument||b instanceof Document);)b=b.parentNode||(window.ShadowRoot&&b instanceof ShadowRoot?b.host:void 0);return!(!b||!(b.__CE_isImportDocument||b instanceof Document))}
function p(b,a){for(;a&&a!==b&&!a.nextSibling;)a=a.parentNode;return a&&a!==b?a.nextSibling:null}
function t(b,a,c){c=c?c:new Set;for(var d=b;d;){if(d.nodeType===Node.ELEMENT_NODE){var e=d;a(e);var f=e.localName;if("link"===f&&"import"===e.getAttribute("rel")){d=e.import;if(d instanceof Node&&!c.has(d))for(c.add(d),d=d.firstChild;d;d=d.nextSibling)t(d,a,c);d=p(b,e);continue}else if("template"===f){d=p(b,e);continue}if(e=e.__CE_shadowRoot)for(e=e.firstChild;e;e=e.nextSibling)t(e,a,c)}d=d.firstChild?d.firstChild:p(b,d)}}function u(b,a,c){b[a]=c};function v(){this.a=new Map;this.s=new Map;this.f=[];this.b=!1}function ba(b,a,c){b.a.set(a,c);b.s.set(c.constructor,c)}function w(b,a){b.b=!0;b.f.push(a)}function x(b,a){b.b&&t(a,function(a){return y(b,a)})}function y(b,a){if(b.b&&!a.__CE_patched){a.__CE_patched=!0;for(var c=0;c<b.f.length;c++)b.f[c](a)}}function z(b,a){var c=[];t(a,function(b){return c.push(b)});for(a=0;a<c.length;a++){var d=c[a];1===d.__CE_state?b.connectedCallback(d):A(b,d)}}
function B(b,a){var c=[];t(a,function(b){return c.push(b)});for(a=0;a<c.length;a++){var d=c[a];1===d.__CE_state&&b.disconnectedCallback(d)}}
function C(b,a,c){c=c?c:{};var d=c.w||new Set,e=c.i||function(a){return A(b,a)},f=[];t(a,function(a){if("link"===a.localName&&"import"===a.getAttribute("rel")){var c=a.import;c instanceof Node&&(c.__CE_isImportDocument=!0,c.__CE_hasRegistry=!0);c&&"complete"===c.readyState?c.__CE_documentLoadHandled=!0:a.addEventListener("load",function(){var c=a.import;if(!c.__CE_documentLoadHandled){c.__CE_documentLoadHandled=!0;var f=new Set(d);f.delete(c);C(b,c,{w:f,i:e})}})}else f.push(a)},d);if(b.b)for(a=0;a<
f.length;a++)y(b,f[a]);for(a=0;a<f.length;a++)e(f[a])}
function A(b,a){if(void 0===a.__CE_state){var c=a.ownerDocument;if(c.defaultView||c.__CE_isImportDocument&&c.__CE_hasRegistry)if(c=b.a.get(a.localName)){c.constructionStack.push(a);var d=c.constructor;try{try{if(new d!==a)throw Error("The custom element constructor did not produce the element being upgraded.");}finally{c.constructionStack.pop()}}catch(r){throw a.__CE_state=2,r;}a.__CE_state=1;a.__CE_definition=c;if(c.attributeChangedCallback)for(c=c.observedAttributes,d=0;d<c.length;d++){var e=c[d],
f=a.getAttribute(e);null!==f&&b.attributeChangedCallback(a,e,null,f,null)}n(a)&&b.connectedCallback(a)}}}v.prototype.connectedCallback=function(b){var a=b.__CE_definition;a.connectedCallback&&a.connectedCallback.call(b)};v.prototype.disconnectedCallback=function(b){var a=b.__CE_definition;a.disconnectedCallback&&a.disconnectedCallback.call(b)};
v.prototype.attributeChangedCallback=function(b,a,c,d,e){var f=b.__CE_definition;f.attributeChangedCallback&&-1<f.observedAttributes.indexOf(a)&&f.attributeChangedCallback.call(b,a,c,d,e)};function D(b,a){this.c=b;this.a=a;this.b=void 0;C(this.c,this.a);"loading"===this.a.readyState&&(this.b=new MutationObserver(this.f.bind(this)),this.b.observe(this.a,{childList:!0,subtree:!0}))}function E(b){b.b&&b.b.disconnect()}D.prototype.f=function(b){var a=this.a.readyState;"interactive"!==a&&"complete"!==a||E(this);for(a=0;a<b.length;a++)for(var c=b[a].addedNodes,d=0;d<c.length;d++)C(this.c,c[d])};function ca(){var b=this;this.b=this.a=void 0;this.f=new Promise(function(a){b.b=a;b.a&&a(b.a)})}function F(b){if(b.a)throw Error("Already resolved.");b.a=void 0;b.b&&b.b(void 0)};function G(b){this.j=!1;this.c=b;this.o=new Map;this.l=function(b){return b()};this.g=!1;this.m=[];this.u=new D(b,document)}
G.prototype.define=function(b,a){var c=this;if(!(a instanceof Function))throw new TypeError("Custom element constructors must be functions.");if(!m(b))throw new SyntaxError("The element name '"+b+"' is not valid.");if(this.c.a.get(b))throw Error("A custom element with name '"+b+"' has already been defined.");if(this.j)throw Error("A custom element is already being defined.");this.j=!0;var d,e,f,r,k;try{var g=function(b){var a=l[b];if(void 0!==a&&!(a instanceof Function))throw Error("The '"+b+"' callback must be a function.");
return a},l=a.prototype;if(!(l instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");d=g("connectedCallback");e=g("disconnectedCallback");f=g("adoptedCallback");r=g("attributeChangedCallback");k=a.observedAttributes||[]}catch(q){return}finally{this.j=!1}a={localName:b,constructor:a,connectedCallback:d,disconnectedCallback:e,adoptedCallback:f,attributeChangedCallback:r,observedAttributes:k,constructionStack:[]};ba(this.c,b,a);this.m.push(a);this.g||
(this.g=!0,this.l(function(){return da(c)}))};G.prototype.i=function(b){C(this.c,b)};function da(b){if(!1!==b.g){b.g=!1;for(var a=b.m,c=[],d=new Map,e=0;e<a.length;e++)d.set(a[e].localName,[]);C(b.c,document,{i:function(a){if(void 0===a.__CE_state){var e=a.localName,f=d.get(e);f?f.push(a):b.c.a.get(e)&&c.push(a)}}});for(e=0;e<c.length;e++)A(b.c,c[e]);for(;0<a.length;){for(var f=a.shift(),e=f.localName,f=d.get(f.localName),r=0;r<f.length;r++)A(b.c,f[r]);(e=b.o.get(e))&&F(e)}}}
G.prototype.get=function(b){if(b=this.c.a.get(b))return b.constructor};G.prototype.whenDefined=function(b){if(!m(b))return Promise.reject(new SyntaxError("'"+b+"' is not a valid custom element name."));var a=this.o.get(b);if(a)return a.f;a=new ca;this.o.set(b,a);this.c.a.get(b)&&!this.m.some(function(a){return a.localName===b})&&F(a);return a.f};G.prototype.v=function(b){E(this.u);var a=this.l;this.l=function(c){return b(function(){return a(c)})}};window.CustomElementRegistry=G;
G.prototype.define=G.prototype.define;G.prototype.upgrade=G.prototype.i;G.prototype.get=G.prototype.get;G.prototype.whenDefined=G.prototype.whenDefined;G.prototype.polyfillWrapFlushCallback=G.prototype.v;var H=window.Document.prototype.createElement,I=window.Document.prototype.createElementNS,ea=window.Document.prototype.importNode,fa=window.Document.prototype.prepend,ga=window.Document.prototype.append,ha=window.DocumentFragment.prototype.prepend,ia=window.DocumentFragment.prototype.append,J=window.Node.prototype.cloneNode,K=window.Node.prototype.appendChild,L=window.Node.prototype.insertBefore,M=window.Node.prototype.removeChild,N=window.Node.prototype.replaceChild,O=Object.getOwnPropertyDescriptor(window.Node.prototype,
"textContent"),P=window.Element.prototype.attachShadow,Q=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),R=window.Element.prototype.getAttribute,S=window.Element.prototype.setAttribute,T=window.Element.prototype.removeAttribute,U=window.Element.prototype.getAttributeNS,ja=window.Element.prototype.setAttributeNS,ka=window.Element.prototype.removeAttributeNS,la=window.Element.prototype.insertAdjacentElement,ma=window.Element.prototype.insertAdjacentHTML,na=window.Element.prototype.prepend,
oa=window.Element.prototype.append,V=window.Element.prototype.before,pa=window.Element.prototype.after,qa=window.Element.prototype.replaceWith,ra=window.Element.prototype.remove,sa=window.HTMLElement,W=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),ta=window.HTMLElement.prototype.insertAdjacentElement,ua=window.HTMLElement.prototype.insertAdjacentHTML;function va(){var b=X;window.HTMLElement=function(){function a(){var a=this.constructor,d=b.s.get(a);if(!d)throw Error("The custom element being constructed was not registered with `customElements`.");var e=d.constructionStack;if(!e.length)return e=H.call(document,d.localName),Object.setPrototypeOf(e,a.prototype),e.__CE_state=1,e.__CE_definition=d,y(b,e),e;var d=e.length-1,f=e[d];if(f===h)throw Error("The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.");
e[d]=h;Object.setPrototypeOf(f,a.prototype);y(b,f);return f}a.prototype=sa.prototype;Object.defineProperty(a.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:a});return a}()};function Y(b,a,c){function d(a){return function(c){for(var e=[],d=0;d<arguments.length;++d)e[d-0]=arguments[d];for(var d=[],f=[],l=0;l<e.length;l++){var q=e[l];q instanceof Element&&n(q)&&f.push(q);if(q instanceof DocumentFragment)for(q=q.firstChild;q;q=q.nextSibling)d.push(q);else d.push(q)}a.apply(this,e);for(e=0;e<f.length;e++)B(b,f[e]);if(n(this))for(e=0;e<d.length;e++)f=d[e],f instanceof Element&&z(b,f)}}c.h&&(a.prepend=d(c.h));c.append&&(a.append=d(c.append))};function wa(){var b=X;u(Document.prototype,"createElement",function(a){if(this.__CE_hasRegistry){var c=b.a.get(a);if(c)return new c.constructor}a=H.call(this,a);y(b,a);return a});u(Document.prototype,"importNode",function(a,c){a=ea.call(this,a,c);this.__CE_hasRegistry?C(b,a):x(b,a);return a});u(Document.prototype,"createElementNS",function(a,c){if(this.__CE_hasRegistry&&(null===a||"http://www.w3.org/1999/xhtml"===a)){var d=b.a.get(c);if(d)return new d.constructor}a=I.call(this,a,c);y(b,a);return a});
Y(b,Document.prototype,{h:fa,append:ga})};function xa(){var b=X;function a(a,d){Object.defineProperty(a,"textContent",{enumerable:d.enumerable,configurable:!0,get:d.get,set:function(a){if(this.nodeType===Node.TEXT_NODE)d.set.call(this,a);else{var e=void 0;if(this.firstChild){var c=this.childNodes,k=c.length;if(0<k&&n(this))for(var e=Array(k),g=0;g<k;g++)e[g]=c[g]}d.set.call(this,a);if(e)for(a=0;a<e.length;a++)B(b,e[a])}}})}u(Node.prototype,"insertBefore",function(a,d){if(a instanceof DocumentFragment){var e=Array.prototype.slice.apply(a.childNodes);
a=L.call(this,a,d);if(n(this))for(d=0;d<e.length;d++)z(b,e[d]);return a}e=n(a);d=L.call(this,a,d);e&&B(b,a);n(this)&&z(b,a);return d});u(Node.prototype,"appendChild",function(a){if(a instanceof DocumentFragment){var c=Array.prototype.slice.apply(a.childNodes);a=K.call(this,a);if(n(this))for(var e=0;e<c.length;e++)z(b,c[e]);return a}c=n(a);e=K.call(this,a);c&&B(b,a);n(this)&&z(b,a);return e});u(Node.prototype,"cloneNode",function(a){a=J.call(this,a);this.ownerDocument.__CE_hasRegistry?C(b,a):x(b,a);
return a});u(Node.prototype,"removeChild",function(a){var c=n(a),e=M.call(this,a);c&&B(b,a);return e});u(Node.prototype,"replaceChild",function(a,d){if(a instanceof DocumentFragment){var e=Array.prototype.slice.apply(a.childNodes);a=N.call(this,a,d);if(n(this))for(B(b,d),d=0;d<e.length;d++)z(b,e[d]);return a}var e=n(a),f=N.call(this,a,d),c=n(this);c&&B(b,d);e&&B(b,a);c&&z(b,a);return f});O&&O.get?a(Node.prototype,O):w(b,function(b){a(b,{enumerable:!0,configurable:!0,get:function(){for(var a=[],b=
0;b<this.childNodes.length;b++)a.push(this.childNodes[b].textContent);return a.join("")},set:function(a){for(;this.firstChild;)M.call(this,this.firstChild);K.call(this,document.createTextNode(a))}})})};function ya(b){var a=Element.prototype;function c(a){return function(e){for(var c=[],d=0;d<arguments.length;++d)c[d-0]=arguments[d];for(var d=[],k=[],g=0;g<c.length;g++){var l=c[g];l instanceof Element&&n(l)&&k.push(l);if(l instanceof DocumentFragment)for(l=l.firstChild;l;l=l.nextSibling)d.push(l);else d.push(l)}a.apply(this,c);for(c=0;c<k.length;c++)B(b,k[c]);if(n(this))for(c=0;c<d.length;c++)k=d[c],k instanceof Element&&z(b,k)}}V&&(a.before=c(V));V&&(a.after=c(pa));qa&&u(a,"replaceWith",function(a){for(var e=
[],c=0;c<arguments.length;++c)e[c-0]=arguments[c];for(var c=[],d=[],k=0;k<e.length;k++){var g=e[k];g instanceof Element&&n(g)&&d.push(g);if(g instanceof DocumentFragment)for(g=g.firstChild;g;g=g.nextSibling)c.push(g);else c.push(g)}k=n(this);qa.apply(this,e);for(e=0;e<d.length;e++)B(b,d[e]);if(k)for(B(b,this),e=0;e<c.length;e++)d=c[e],d instanceof Element&&z(b,d)});ra&&u(a,"remove",function(){var a=n(this);ra.call(this);a&&B(b,this)})};function za(){var b=X;function a(a,c){Object.defineProperty(a,"innerHTML",{enumerable:c.enumerable,configurable:!0,get:c.get,set:function(a){var e=this,d=void 0;n(this)&&(d=[],t(this,function(a){a!==e&&d.push(a)}));c.set.call(this,a);if(d)for(var f=0;f<d.length;f++){var r=d[f];1===r.__CE_state&&b.disconnectedCallback(r)}this.ownerDocument.__CE_hasRegistry?C(b,this):x(b,this);return a}})}function c(a,c){u(a,"insertAdjacentElement",function(a,e){var d=n(e);a=c.call(this,a,e);d&&B(b,e);n(a)&&z(b,e);
return a})}function d(a,c){function e(a,e){for(var c=[];a!==e;a=a.nextSibling)c.push(a);for(e=0;e<c.length;e++)C(b,c[e])}u(a,"insertAdjacentHTML",function(a,b){a=a.toLowerCase();if("beforebegin"===a){var d=this.previousSibling;c.call(this,a,b);e(d||this.parentNode.firstChild,this)}else if("afterbegin"===a)d=this.firstChild,c.call(this,a,b),e(this.firstChild,d);else if("beforeend"===a)d=this.lastChild,c.call(this,a,b),e(d||this.firstChild,null);else if("afterend"===a)d=this.nextSibling,c.call(this,
a,b),e(this.nextSibling,d);else throw new SyntaxError("The value provided ("+String(a)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.");})}P&&u(Element.prototype,"attachShadow",function(a){return this.__CE_shadowRoot=a=P.call(this,a)});Q&&Q.get?a(Element.prototype,Q):W&&W.get?a(HTMLElement.prototype,W):w(b,function(b){a(b,{enumerable:!0,configurable:!0,get:function(){return J.call(this,!0).innerHTML},set:function(a){var b="template"===this.localName,e=b?this.content:this,
c=I.call(document,this.namespaceURI,this.localName);for(c.innerHTML=a;0<e.childNodes.length;)M.call(e,e.childNodes[0]);for(a=b?c.content:c;0<a.childNodes.length;)K.call(e,a.childNodes[0])}})});u(Element.prototype,"setAttribute",function(a,c){if(1!==this.__CE_state)return S.call(this,a,c);var e=R.call(this,a);S.call(this,a,c);c=R.call(this,a);b.attributeChangedCallback(this,a,e,c,null)});u(Element.prototype,"setAttributeNS",function(a,c,d){if(1!==this.__CE_state)return ja.call(this,a,c,d);var e=U.call(this,
a,c);ja.call(this,a,c,d);d=U.call(this,a,c);b.attributeChangedCallback(this,c,e,d,a)});u(Element.prototype,"removeAttribute",function(a){if(1!==this.__CE_state)return T.call(this,a);var c=R.call(this,a);T.call(this,a);null!==c&&b.attributeChangedCallback(this,a,c,null,null)});u(Element.prototype,"removeAttributeNS",function(a,c){if(1!==this.__CE_state)return ka.call(this,a,c);var d=U.call(this,a,c);ka.call(this,a,c);var e=U.call(this,a,c);d!==e&&b.attributeChangedCallback(this,c,d,e,a)});ta?c(HTMLElement.prototype,
ta):la?c(Element.prototype,la):console.warn("Custom Elements: `Element#insertAdjacentElement` was not patched.");ua?d(HTMLElement.prototype,ua):ma?d(Element.prototype,ma):console.warn("Custom Elements: `Element#insertAdjacentHTML` was not patched.");Y(b,Element.prototype,{h:na,append:oa});ya(b)};/*

 Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
 This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 Code distributed by Google as part of the polymer project is also
 subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
var Z=window.customElements;if(!Z||Z.forcePolyfill||"function"!=typeof Z.define||"function"!=typeof Z.get){var X=new v;va();wa();Y(X,DocumentFragment.prototype,{h:ha,append:ia});xa();za();document.__CE_hasRegistry=!0;var customElements=new G(X);Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:customElements})};
}).call(self);

//# sourceMappingURL=custom-elements.min.js.map
;
define("customElements", function(){});

/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojcustomelement',["ojs/ojcore","require","ojs/ojlogger","ojs/ojcontext","ojs/ojmetadatautils","customElements"],function(e,t,r,n,i){"use strict";e.BaseCustomElementBridge={},e.BaseCustomElementBridge.proto={getClass:function(t){var r=Object.create(HTMLElement.prototype);this.InitializePrototype(r);var n=this.GetMetadata(t);e.BaseCustomElementBridge._enumerateMetadataForKey(r,n,"properties",this.DefinePropertyCallback.bind(this)),e.BaseCustomElementBridge._enumerateMetadataForKey(r,n,"methods",this.DefineMethodCallback.bind(this)),this.AddComponentMethods(r),r.setProperties=function(t){e.BaseCustomElementBridge.getInstance(this)._setProperties(this,t)},Object.defineProperty(r,"set",{value:function(e,t){this.setProperty(e,t)}}),Object.defineProperty(r,"unset",{value:function(e){this.setProperty(e,void 0)}}),r.attributeChangedCallback=this.AttributeChangedCallback,r.connectedCallback=this._connectedCallback,r.disconnectedCallback=this._detachedCallback;var i=function(){var e=window.Reflect;return void 0!==e?e.construct(HTMLElement,[],this.constructor):HTMLElement.call(this)},o=this;return Object.defineProperty(i,"observedAttributes",{get:function(){return o.GetAttributes(n)}}),Object.defineProperty(r,"constructor",{value:i,writable:!0,configurable:!0}),i.prototype=r,Object.setPrototypeOf(i,HTMLElement),i},playbackEarlyPropertySets:function(e){this._bCanSetProperty=!0,this.PlaybackEarlyPropertySets(e)},resolveBindingProvider:function(e){this._bpResolve?this._bpResolve(e):this._bpInst=e},disposeBindingProvider:function(e){this._bDisposed=!0,!this._complete&&this._bConnected&&this._resolveBusyState(e)},resolveDelayedReadyPromise:function(){this.GetDelayedReadyPromise().resolvePromise()},whenCreated:function(){return this._whenCreatedPromise},AddComponentMethods:function(e){},AttributeChangedCallback:function(t,n,i){if(n!==i){var o=e.BaseCustomElementBridge.getInstance(this);if("disabled"===t&&o.ShouldRemoveDisabled()&&o._isDisabledAttributeRemoved())return void(null!=i&&(r.warn("Ignoring 'disabled' attribute change after component initialization. Use element property setter instead."),o._removeDisabledAttribute(this)));if(o.ShouldHandleAttributeChanged(this)){var s=e.__AttributeUtils.attributeToPropertyName(t),a=e.BaseCustomElementBridge.__GetPropertyMetadata(s,e.BaseCustomElementBridge.getProperties(o));e.BaseCustomElementBridge.__CheckOverlappingAttribute(this,t),null===i&&(i=void 0);var l={detail:{attribute:t,value:i,previousValue:n}};this.dispatchEvent(new CustomEvent("attribute-changed",l)),e.__AttributeUtils.getExpressionInfo(i).expr||(a&&this.setProperty(s,e.BaseCustomElementBridge.__ParseAttrValue(this,t,s,i,a)),o.HandleAttributeChanged(this,t,n,i))}}},CreateComponent:function(e){},DefineMethodCallback:function(e,t,r){},DefinePropertyCallback:function(e,t,r){},GetDelayedReadyPromise:function(){return this._delayedReady||(this._delayedReady=new e.BaseCustomElementBridge.__DelayedPromise),this._delayedReady},GetAttributes:function(t){return t?e.BaseCustomElementBridge.getAttributes(t.properties):[]},GetMetadata:function(t){return t[e.BaseCustomElementBridge.DESC_KEY_META]||{}},GetAliasForProperty:function(e){return e},GetTrackChildrenOption:function(e){return this.METADATA.extension&&this.METADATA.extension._TRACK_CHILDREN?this.METADATA.extension._TRACK_CHILDREN:"none"},ShouldHandleAttributeChanged:function(e){return this._bCreateCalled},ShouldCallHandleAttributeChanged:function(e){return this.ShouldHandleAttributeChanged()},HandleAttributeChanged:function(e,t,r,n){},HandleBindingsApplied:function(e,t){},HandleDetached:function(e){},HandleReattached:function(e){},InitializeElement:function(e){},InitializePrototype:function(e){},BatchedPropertySet:function(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var i=r[n];e.setProperty(i,t[i])}},GetEventListenerProperty:function(t){var r=e.__AttributeUtils.eventListenerPropertyToEventType(t),n=this._eventListeners[r];if(n)return n.getListener()},GetProperty:function(t,r,n){var i=e.__AttributeUtils.eventListenerPropertyToEventType(r),o=e.BaseCustomElementBridge.__GetPropertyMetadata(r,e.BaseCustomElementBridge.getProperties(this));return i||!o||-1===r.indexOf(".")?n[r]:e.BaseCustomElementBridge.__GetProperty(n,r)},InitializeBridge:function(e,t){this.METADATA=this.GetMetadata(t),this._eventListeners={}},PlaybackEarlyPropertySets:function(e){if(this._earlySets)for(;this._earlySets.length;){var t=this._earlySets.shift();e.setProperty(t.property,t.value)}},SaveEarlyPropertySet:function(e,t){return!this.__INITIALIZING_PROPS&&!this._bCanSetProperty&&(this._earlySets||(this._earlySets=[]),this._earlySets.push({property:e,value:t}),!0)},SetEventListenerProperty:function(t,r,n){var i=e.__AttributeUtils.eventListenerPropertyToEventType(r),o=this._eventListeners[i];o||(o=this._createEventListenerWrapper(),this._eventListeners[i]=o,t.addEventListener(i,o)),null==n||n instanceof Function?o.setListener(n):e.BaseCustomElementBridge.__ThrowTypeError(t,r,n,"function")},SetProperty:function(t,r,n,i,o){var s=e.__AttributeUtils.eventListenerPropertyToEventType(r),a=e.BaseCustomElementBridge.__GetPropertyMetadata(r,e.BaseCustomElementBridge.getProperties(this));if(s||!a)t[r]=n;else{var l=t.getProperty(r),u=r.split(".")[0],d=i[u];if(e.CollectionUtils.isPlainObject(d)&&(d=e.CollectionUtils.copyInto({},d,void 0,!0)),!e.BaseCustomElementBridge.__CompareOptionValues(r,a,n,l)){var m=-1!==r.indexOf(".");if(m&&(this._SKIP_PROP_CHANGE_EVENT=!0),o?this.ValidateAndSetProperty(this.GetAliasForProperty.bind(this),i,r,n,t):e.BaseCustomElementBridge.__SetProperty(this.GetAliasForProperty.bind(this),i,r,n),this._SKIP_PROP_CHANGE_EVENT=!1,m){var c={};c.path=r,c.value=n,c.previousValue=l;var g=o?"external":"internal";e.BaseCustomElementBridge.__FirePropertyChangeEvent(t,u,i[u],d,g,c)}return{property:u,propertySet:!0,isSubproperty:m}}}return{property:null,propertySet:!1,isSubproperty:!1}},ShouldRemoveDisabled:function(){return!0},ValidateAndSetProperty:function(t,r,n,i,o){var s=this.ValidatePropertySet(o,n,i);e.BaseCustomElementBridge.__SetProperty(t,r,n,s)},ValidatePropertySet:function(t,n,i){var o=e.BaseCustomElementBridge.getProperties(this),s=e.BaseCustomElementBridge.__GetPropertyMetadata(n,o),a=n.split(".");if(s)return o[a[0]].readOnly&&this.throwError(t,"Read-only property '"+n+"' cannot be set."),e.BaseCustomElementBridge.checkEnumValues(t,n,i,s),null!=i?e.BaseCustomElementBridge.checkType(t,n,i,s):i;r.warn(e.BaseCustomElementBridge.getElementInfo(t)+": Ignoring property set for undefined property '"+n+"'.")},GetPreCreatePromise:function(t){var r=this._getBindingProvider(t);return"none"!==e.BaseCustomElementBridge.getTrackChildrenOption(t)&&(r=r.then(function(e){return this._whenChildrenCreated(t,e)}.bind(this))),r},PostCreate:function(e){e.hasAttribute("disabled")&&this.ShouldRemoveDisabled()&&!this._isDisabledAttributeRemoved()&&this._removeDisabledAttribute(e)},_connected:function(e){if(this._bConnected=!0,this._bCreateCalled)this._complete?this.HandleReattached(e):this._registerBusyState(e);else{this._bCreateCalled=!0,this._registerBusyState(e),this._monitorReadyPromise(e),this.InitializeElement(e);var t=this;this._whenCreatedPromise=this.GetPreCreatePromise(e).then(function(){try{t._bDisposed?t._bCreateCalled=!1:(t.CreateComponent(e),t.PostCreate(e))}catch(r){t.throwError(e,"Error while rendering component.",r)}})}},_connectedCallback:function(){e.BaseCustomElementBridge.getInstance(this)._connected(this)},_detachedCallback:function(){var t=e.BaseCustomElementBridge.getInstance(this);t._bConnected=!1,t._complete?t.HandleDetached(this):t._bDisposed||t._resolveBusyState(this)},_createEventListenerWrapper:function(){var e,t=function(t){e&&e(t)};return t.setListener=function(t){e=t},t.getListener=function(){return e},t},_monitorReadyPromise:function(e){var t=this,r=function(){!t._complete&&t._bConnected&&(t._resolveBusyState(e),t._complete=!0)};this.GetDelayedReadyPromise().getPromise().then(function(){e.classList.add("oj-complete"),r()},function(){e.classList.add("oj-incomplete"),r()})},_registerBusyState:function(t){var r=n.getContext(t).getBusyContext();this._initCompleteCallback=r.addBusyState({description:e.BaseCustomElementBridge.getElementInfo(t)+" is being upgraded."})},_resolveBusyState:function(e){var t=this._initCompleteCallback;t||this.throwError(e,"Unexpected call to _resolveBusyState()."),this._initCompleteCallback=null,t()},_setProperties:function(e,t){for(var r=[],n={},i=!1,o=Object.keys(t),s=0;s<o.length;s++){var a=o[s];a.indexOf(".")>=0?r.push(a):(n[a]=t[a],i=!0)}i&&this.BatchedPropertySet(e,n);for(var l=0;l<r.length;l++){var u=r[l];e.setProperty(u,t[u])}},throwError:function(t,r,n){this.GetDelayedReadyPromise().rejectPromise();var i=e.BaseCustomElementBridge.getElementInfo(t)+": "+r;throw n&&(i=i+" "+(n.stack?n.stack:n)),new Error(i)},_setBpResolver:function(e){this._bpResolve=e},_getBindingProvider:function(t){var r=this._getBindingProviderName(t);return r===e.BaseCustomElementBridge._NO_BINDING_PROVIDER?(this.playbackEarlyPropertySets(t),Promise.resolve(null)):"knockout"===r?this._bpInst?Promise.resolve(this._bpInst):new Promise(this._setBpResolver.bind(this)):void this.throwError(t,"Unknown binding provider '"+r+"'.")},_getBindingProviderName:function(t){var r=t._ojBndgPrv;if(r)return r;if(!(r=t.getAttribute("data-oj-binding-provider")||e.BaseCustomElementBridge._getCompositeBindingProviderName(t))){var n=t.parentElement;null==n?t===document.documentElement?r="knockout":this.throwError(t,"Cannot determine binding provider for a disconnected subtree."):r=n._vcomp?e.BaseCustomElementBridge._NO_BINDING_PROVIDER:this._getBindingProviderName(n)}return Object.defineProperty(t,"_ojBndgPrv",{value:r}),r},_getChildrenToTrack:function(t,r,n){for(var i=t.childNodes,o=0;o<i.length;o++){var s=i[o];e.ElementUtils.isValidCustomElementName(s.localName)?n.push(s):"nearestCustomElement"===r&&this._getChildrenToTrack(s,r,n)}return n},_whenChildrenCreated:function(t,i){var o=e.BaseCustomElementBridge.getTrackChildrenOption(t),s=n.getContext(t).getBusyContext(),a=this._getChildrenToTrack(t,o,[]).map(function(t){if(!i){var n=s.addBusyState({description:"Waiting for element "+t.localName+" to be defined."}),o=setInterval(function(){r.warn("Warning: waiting for element "+t.localName+" to be defined.")},2e4);return customElements.whenDefined(t.localName).then(function(){return n(),clearInterval(o),e.BaseCustomElementBridge.getRegistered(t.tagName)?e.BaseCustomElementBridge.getInstance(t).whenCreated():null}).catch(function(e){throw n(),clearInterval(o),new Error("Error defining element "+t.localName+" : "+e)})}return e.BaseCustomElementBridge.getRegistered(t.tagName)?e.BaseCustomElementBridge.getInstance(t).whenCreated():null});return Promise.all(a)},_isDisabledAttributeRemoved:function(){return!0===this._disabledProcessed},_removeDisabledAttribute:function(e){this._disabledProcessed=!0,e.removeAttribute("disabled")}},e.BaseCustomElementBridge.getAttributes=function(t){var r=[];return e.BaseCustomElementBridge._getAttributesFromProperties("",t,r),r},e.BaseCustomElementBridge.getTrackChildrenOption=function(t){var r=e.BaseCustomElementBridge.getInstance(t);return r?r.GetTrackChildrenOption(t):"none"},e.BaseCustomElementBridge._getAttributesFromProperties=function(t,r,n){if(r)for(var i=Object.keys(r),o=0;o<i.length;o++){var s=i[o],a=r[s];if(!a.readOnly){var l=t+s;n.push(e.__AttributeUtils.propertyNameToAttribute(l)),a.properties&&e.BaseCustomElementBridge._getAttributesFromProperties(l+".",a.properties,n)}}},e.BaseCustomElementBridge.getElementInfo=function(e){return e?e.tagName.toLowerCase()+" with id '"+e.id+"'":""},e.BaseCustomElementBridge.getInstance=function(t){var n=t[e.BaseCustomElementBridge._INSTANCE_KEY];if(!n){var i=e.BaseCustomElementBridge._registry[t.tagName.toLowerCase()];i||r.error(e.BaseCustomElementBridge.getElementInfo(t)+" Attempt to interact with the custom element before it has been registered."),n=Object.create(i.bridgeProto);var o=e.BaseCustomElementBridge.__GetDescriptor(t.tagName);n.InitializeBridge(t,o),Object.defineProperty(t,e.BaseCustomElementBridge._INSTANCE_KEY,{value:n})}return n},e.BaseCustomElementBridge.getProperties=function(e){return e.METADATA.properties},e.BaseCustomElementBridge.getRegistered=function(t){if(t){var r=e.BaseCustomElementBridge._registry[t.toLowerCase()];if(r)return{composite:r.composite}}return null},e.BaseCustomElementBridge.getSlotMap=function(t){for(var r={},n=t.childNodes,i=0;i<n.length;i++){var o=n[i];if(e.BaseCustomElementBridge.isSlotable(o)){var s=e.BaseCustomElementBridge.getSlotAssignment(o);r[s]||(r[s]=[]),r[s].push(o)}}return r},e.BaseCustomElementBridge.getSlotAssignment=function(e){var t=null!=e.__oj_slots?e.__oj_slots:e.getAttribute&&e.getAttribute("slot");return t||(t=""),t},e.BaseCustomElementBridge.isSlotable=function(e){return 1===e.nodeType||3===e.nodeType&&e.nodeValue.trim()},e.BaseCustomElementBridge._NO_BINDING_PROVIDER="none",e.BaseCustomElementBridge._enumerateMetadataForKey=function(e,t,r,n){if(t&&t[r]){var i=t[r];Object.keys(i).forEach(function(t){n(e,t,i[t])})}},e.BaseCustomElementBridge._getCompositeBindingProviderName=function(t){return e.Composite?e.Composite.getBindingProviderName(t.parentElement):null},e.BaseCustomElementBridge.checkEnumValues=function(t,r,n,i){if("string"==typeof n&&i){var o=i.enumValues;if(o&&-1===o.indexOf(n))e.BaseCustomElementBridge.getInstance(t).throwError(t,"Invalid value '"+n+"' found for property '"+r+"'. Expected one of the following '"+o.toString()+"'.")}},e.BaseCustomElementBridge.checkType=function(t,r,n,i){var o=i.type;if(o){var s=(o=o.toLowerCase()).split("|"),a=typeof n;if(1===s.length)("array"===o.substring(0,5)&&!Array.isArray(n)||"object"===o.substring(0,6)&&"object"!==a||"number"===o&&("number"!=typeof n||!isFinite(n))||"string"===o&&"string"!==a)&&e.BaseCustomElementBridge.__ThrowTypeError(t,r,n,o),"boolean"===o&&(n=!!n);else if(2===s.length){var l,u=s.indexOf("string"),d=s.indexOf("promise");-1!==u&&"string"!==a?("function"===(l=0===u?s[1]:s[0])&&"function"!==a||"array"===l.substring(0,5)&&!Array.isArray(n)||"object"===l.substring(0,6)&&"object"!==a)&&e.BaseCustomElementBridge.__ThrowTypeError(t,r,n,o):-1===d||n instanceof Promise||"array"!==(l=0===d?s[1]:s[0]).substring(0,5)||Array.isArray(n)||e.BaseCustomElementBridge.__ThrowTypeError(t,r,n,o)}}return n},e.BaseCustomElementBridge.__CompareOptionValues=function(t,r,n,i){return r.writeback?e.Object.compareValues(n,i):n===i},e.BaseCustomElementBridge.__ThrowTypeError=function(t,r,n,i){e.BaseCustomElementBridge.getInstance(t).throwError(t,"Invalid type '"+typeof n+"' found for property '"+r+"'. Expected value of type '"+i+"'.")},e.BaseCustomElementBridge.__GetDescriptor=function(t){return e.BaseCustomElementBridge._registry[t.toLowerCase()].descriptor},e.BaseCustomElementBridge.__GetCache=function(t){return t?e.BaseCustomElementBridge._registry[t.toLowerCase()].cache:null},e.BaseCustomElementBridge.__CheckOverlappingAttribute=function(t,r){var n=r.split(".");if(n.length>1)for(n.pop();n.length;){var i=n.join(".");if(t.hasAttribute(i))e.BaseCustomElementBridge.getInstance(t).throwError(t,"Cannot set overlapping attributes '"+r+"' and '"+i+"'.");n.pop()}},e.BaseCustomElementBridge.__GetPropertyMetadata=function(e,t){for(var r=t,n=e.split("."),i=0;i<n.length&&(r=r[n[i]])&&(!(n.length>1&&i<n.length-1)||(r=r.properties));i++);return r},e.BaseCustomElementBridge.__InitProperties=function(t,r){var n=e.BaseCustomElementBridge.getInstance(t);n.__INITIALIZING_PROPS=!0;var i=e.BaseCustomElementBridge.getProperties(n);if(i)for(var o=t.attributes,s=0;s<o.length;s++){var a=o[s],l=e.__AttributeUtils.attributeToPropertyName(a.nodeName),u=e.BaseCustomElementBridge.__GetPropertyMetadata(l,i);if(u&&!u.readOnly)if(e.BaseCustomElementBridge.__CheckOverlappingAttribute(t,a.nodeName),!e.__AttributeUtils.getExpressionInfo(a.value).expr){var d=e.BaseCustomElementBridge.__ParseAttrValue(t,a.nodeName,l,a.value,u);n.ValidateAndSetProperty(n.GetAliasForProperty.bind(n),r,l,d,t)}}n.__INITIALIZING_PROPS=!1},e.BaseCustomElementBridge.__SetProperty=function(e,t,r,n){var i,o=t,s=r.split("."),a=e(s[0]);s.length>1&&!t[a]&&(o=i={});for(var l=0;l<s.length;l++){var u=e(s[l]);l===s.length-1?o[u]=n:o[u]||(o[u]={}),o=o[u]}i&&(t[a]=i[a])},e.BaseCustomElementBridge.__GetProperty=function(e,t){for(var r=e,n=t.split("."),i=0;i<n.length;i++){var o=n[i];if(i===n.length-1)return r[o];if(!r[o])return;r=r[o]}},e.BaseCustomElementBridge.__ParseAttrValue=function(t,r,n,i,o){if(null==i)return i;var s=o.type,a=e.BaseCustomElementBridge.getInstance(t);function l(n){var i;try{i=e.__AttributeUtils.coerceValue(t,r,n,s)}catch(e){a.throwError(t,"Error parsing attribute value.",e)}return i}var u=e.BaseCustomElementBridge.__GetDescriptor(t.tagName).parseFunction;return u?u(i,n,o,function(e){return l(e)}):l(i)},e.BaseCustomElementBridge.__ProcessEventListeners=function(t){var r=e.CollectionUtils.copyInto({},t,void 0,!0,1);return r.properties=r.properties||{},e.BaseCustomElementBridge._enumerateMetadataForKey(null,r,"properties",function(t,n){var i=e.__AttributeUtils.propertyNameToChangeEventType(n),o=e.__AttributeUtils.eventTypeToEventListenerProperty(i);r.properties[o]={_derived:!0,_eventListener:!0}}),e.BaseCustomElementBridge._enumerateMetadataForKey(null,r,"events",function(t,n){var i=e.__AttributeUtils.eventTypeToEventListenerProperty(n);r.properties[i]={_derived:!0,_eventListener:!0}}),r},e.BaseCustomElementBridge.__Register=function(t,n,i,o){var s=t.toLowerCase();return!e.BaseCustomElementBridge._registry[s]&&(n||r.error("Cannot register "+t+". Missing a descriptor."),e.BaseCustomElementBridge._registry[s]={descriptor:n,bridgeProto:i,composite:o,cache:{}},!0)},e.BaseCustomElementBridge.__FirePropertyChangeEvent=function(t,r,n,i,o,s){var a=e.BaseCustomElementBridge.getInstance(t);if(!a._SKIP_PROP_CHANGE_EVENT){var l={};s&&(l.subproperty=s),l.value=n,l.previousValue=i,l.updatedFrom=o,a.beforePropertyChangedEvent&&a.beforePropertyChangedEvent(t,r,l),("external"!==o||a.__READY_TO_FIRE)&&t.dispatchEvent(new CustomEvent(r+"Changed",{detail:l}))}},e.BaseCustomElementBridge.__DefineDynamicObjectProperty=function(e,t,r,n){Object.defineProperty(e,t,{enumerable:!0,get:r,set:n})},e.BaseCustomElementBridge._registry={},e.BaseCustomElementBridge.DESC_KEY_CSS="css",e.BaseCustomElementBridge.DESC_KEY_META="metadata",e.BaseCustomElementBridge.DESC_KEY_PARSE_FUN="parseFunction",e.BaseCustomElementBridge.DESC_KEY_VIEW="view",e.BaseCustomElementBridge.DESC_KEY_VIEW_MODEL="viewModel",e.BaseCustomElementBridge._INSTANCE_KEY="_ojBridge",e.BaseCustomElementBridge.__DelayedPromise=function(){var e,t,r;this.getPromise=function(){return e||(e=new Promise(function(e,n){t=e,r=n})),e},this.rejectPromise=function(e){r&&r(e)},this.resolvePromise=function(e){t&&t(e)}}});
!function(e){"function"==typeof define&&define.amd?define('jqueryui-amd/version',["jquery"],e):e(jQuery)}((function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"}));
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(t){"function"==typeof define&&define.amd?define('jqueryui-amd/widget',["jquery","./version"],t):t(jQuery)}((function(t){var e,i=0,s=Array.prototype.slice;return t.cleanData=(e=t.cleanData,function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)try{(s=t._data(n,"events"))&&s.remove&&t(n).triggerHandler("remove")}catch(t){}e(i)}),t.widget=function(e,i,s){var n,o,a,r={},l=e.split(".")[0],u=l+"-"+(e=e.split(".")[1]);return s||(s=i,i=t.Widget),t.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr[":"][u.toLowerCase()]=function(e){return!!t.data(e,u)},t[l]=t[l]||{},n=t[l][e],o=t[l][e]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},t.extend(o,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),(a=new i).options=t.widget.extend({},a.options),t.each(s,(function(e,s){t.isFunction(s)?r[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function n(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=n,e=s.apply(this,arguments),this._super=i,this._superApply=o,e}}():r[e]=s})),o.prototype=t.widget.extend(a,{widgetEventPrefix:n&&a.widgetEventPrefix||e},r,{constructor:o,namespace:l,widgetName:e,widgetFullName:u}),n?(t.each(n._childConstructors,(function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,o,i._proto)})),delete n._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var i,n,o=s.call(arguments,1),a=0,r=o.length;a<r;a++)for(i in o[a])n=o[a][i],o[a].hasOwnProperty(i)&&void 0!==n&&(t.isPlainObject(n)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],n):t.widget.extend({},n):e[i]=n);return e},t.widget.bridge=function(e,i){var n=i.prototype.widgetFullName||e;t.fn[e]=function(o){var a="string"==typeof o,r=s.call(arguments,1),l=this;return a?this.length||"instance"!==o?this.each((function(){var i,s=t.data(this,n);return"instance"===o?(l=s,!1):s?t.isFunction(s[o])&&"_"!==o.charAt(0)?(i=s[o].apply(s,r))!==s&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")})):l=void 0:(r.length&&(o=t.widget.extend.apply(null,[o].concat(r))),this.each((function(){var e=t.data(this,n);e?(e.option(o||{}),e._init&&e._init()):t.data(this,n,new i(o,this))}))),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,(function(t,i){e._removeClass(i,t)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},s=e.split("."),e=s.shift(),s.length){for(n=a[e]=t.widget.extend({},this.options[e]),o=0;o<s.length-1;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,n;for(i in e)n=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&n&&n.length&&(s=t(n.get()),this._removeClass(n,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var i=[],s=this;function n(n,o){var a,r;for(r=0;r<n.length;r++)a=s.classesElementLookup[n[r]]||t(),a=e.add?t(t.unique(a.get().concat(e.element.get()))):t(a.not(e.element).get()),s.classesElementLookup[n[r]]=a,i.push(n[r]),o&&e.classes[n[r]]&&i.push(e.classes[n[r]])}return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&n(e.keys.match(/\S+/g)||[],!0),e.extra&&n(e.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,(function(s,n){-1!==t.inArray(e.target,n)&&(i.classesElementLookup[s]=t(n.not(e.target).get()))}))},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s="boolean"==typeof s?s:i;var n="string"==typeof t||null===t,o={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(e,i,s){var n,o=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,(function(s,a){function r(){if(e||!0!==o.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+o.eventNamespace,h=l[2];h?n.on(u,h,r):i.on(u,r)}))},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var i=this;return setTimeout((function(){return("string"==typeof t?i[t]:t).apply(i,arguments)}),e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&!1===a.apply(this.element[0],[i].concat(s))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){var a;"string"==typeof n&&(n={effect:n});var r=n?!0===n||"number"==typeof n?i:n.effect||i:e;"number"==typeof(n=n||{})&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue((function(i){t(this)[e](),o&&o.call(s[0]),i()}))}})),t.widget}));
/*!
 * jQuery UI Unique ID 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(i){"function"==typeof define&&define.amd?define('jqueryui-amd/unique-id',["jquery","./version"],i):i(jQuery)}((function(i){return i.fn.extend({uniqueId:(n=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++n)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&i(this).removeAttr("id")}))}});var n}));
/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(E){"function"==typeof define&&define.amd?define('jqueryui-amd/keycode',["jquery","./version"],E):E(jQuery)}((function(E){return E.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}));
/*!
 * jQuery UI Focusable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(e){"function"==typeof define&&define.amd?define('jqueryui-amd/focusable',["jquery","./version"],e):e(jQuery)}((function(e){return e.ui.focusable=function(i,t){var n,a,r,s,o,u=i.nodeName.toLowerCase();return"area"===u?(a=(n=i.parentNode).name,!(!i.href||!a||"map"!==n.nodeName.toLowerCase())&&((r=e("img[usemap='#"+a+"']")).length>0&&r.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(u)?(s=!i.disabled)&&(o=e(i).closest("fieldset")[0])&&(s=!o.disabled):s="a"===u&&i.href||t,s&&e(i).is(":visible")&&function(e){var i=e.css("visibility");for(;"inherit"===i;)e=e.parent(),i=e.css("visibility");return"hidden"!==i}(e(i)))},e.extend(e.expr[":"],{focusable:function(i){return e.ui.focusable(i,null!=e.attr(i,"tabindex"))}}),e.ui.focusable}));
/*!
 * jQuery UI Tabbable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(e){"function"==typeof define&&define.amd?define('jqueryui-amd/tabbable',["jquery","./version","./focusable"],e):e(jQuery)}((function(e){return e.extend(e.expr[":"],{tabbable:function(n){var t=e.attr(n,"tabindex"),u=null!=t;return(!u||t>=0)&&e.ui.focusable(n,u)}})}));
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdomutils',["ojs/ojcore-base","jquery","ojs/ojthemeutils"],function(e,t,n){"use strict";var o,i,r,a,l,s,c={};return e.DomUtils=c,c._HTML_START_TAG="<html>",c._HTML_END_TAG="</html>",c._LEGAL_ELEMENTS={SPAN:1,B:1,I:1,EM:1,BR:1,HR:1,LI:1,OL:1,UL:1,P:1,TT:1,BIG:1,SMALL:1,PRE:1},c._LEGAL_ATTRIBUTES={class:1,style:1},c.isHTMLContent=function(e){return 0===e.indexOf(c._HTML_START_TAG)&&e.lastIndexOf(c._HTML_END_TAG)===e.length-7},c.cleanHtml=function(e){var n=t(document.createElement("span")).get(0);return n.innerHTML=e,e&&e.indexOf("<")>=0&&c._cleanElementHtml(n),n},c._cleanElementHtml=function(e){for(var n=e.childNodes,o=n.length-1;o>=0;o--){var i=n.item(o);if(i&&1===i.nodeType)if(c._LEGAL_ELEMENTS[i.nodeName]){for(var r=i.attributes,a=r.length-1;a>=0;a--){var l=r[a];void 0!==t(i).attr(l.name)&&(c._LEGAL_ATTRIBUTES[l.name]||i.removeAttribute(l.nodeName))}c._cleanElementHtml(i)}else i&&e.removeChild(i)}},c.isAncestor=function(e,t){for(var n=t.parentNode;n;){if(n===e)return!0;n=n.parentNode}return!1},c.isAncestorOrSelf=function(e,t){return t===e||c.isAncestor(e,t)},c.addResizeListener=function(e,n,o){var i=t(e),r=i.data(c._RESIZE_TRACKER_KEY);null==r&&(r=new c._ResizeTracker(e),i.data(c._RESIZE_TRACKER_KEY,r),r.start()),r.addListener(n,o)},c.removeResizeListener=function(e,n){var o=t(e),i=o.data(c._RESIZE_TRACKER_KEY);null!=i&&(i.removeListener(n),i.isEmpty()&&(i.stop(),o.removeData(c._RESIZE_TRACKER_KEY)))},c.fixResizeListeners=function(e){t(e).find(".oj-helper-detect-expansion").parent().each(function(e,n){var o=t(n).data(c._RESIZE_TRACKER_KEY);null!=o&&o.init(!0)})},c.isMetaKeyPressed=function(t){var n=e.AgentUtils.getAgentInfo();return e.AgentUtils.OS.MAC===n.os?t.metaKey:t.ctrlKey},c.dispatchEvent=function(e,t){var n="disabled",o=e[n];try{e[n]=!1,e.dispatchEvent(t)}finally{e[n]=o}},c._invokeAfterPaint=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,0)}).bind(window),c._cancelInvokeAfterPaint=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||function(e){return window.clearTimeout(e)}).bind(window),c._ResizeTracker=function(e){var n=t.Callbacks(),o=[],i=[],r=2,a=0,l=null,s=null,u=null,f=null,d=null,v=null,h=null;function E(e){var t=!1;if(null!=f.offsetParent){var n=f.offsetWidth,o=f.offsetHeight;s===n&&u===o||(a=r,g(n,o),t=!0,e&&m(!0))}return t}function m(t){var i=e.offsetWidth,r=e.offsetHeight;n.has()&&(t?(null!==l&&c._cancelInvokeAfterPaint(l),l=c._invokeAfterPaint(function(){l=null,n.fire(i,r)})):n.fire(i,r));for(var a=0;a<o.length;a++)o[a].getCallback()(i,r)}function g(e,t){s=e,u=t;var n=f.firstChild.style,o=1;do{n.width=e+o+"px",n.height=t+o+"px",f.scrollLeft=o,f.scrollTop=o,o+=1}while((0===f.scrollTop||0===f.scrollLeft)&&o<=5);d.scrollLeft=e,d.scrollTop=t}this.addListener=function(e,t){void 0===t||0===t?n.add(e):(o.push(new c._collapsingListenerManager(e,t)),i.push(e))},this.removeListener=function(e){var t=i.indexOf(e);t>=0?(i.splice(t,1),o.splice(t,1)[0].stop()):n.remove(e)},this.isEmpty=function(){return!n.has()&&0===i.length},this.start=function(){if(h=function(e){e.stopPropagation(),E(!0)||a>0&&null!=f.offsetParent&&(0===f.scrollLeft||0===f.scrollTop)&&(a-=1,g(s,u))}.bind(this),e.attachEvent)v=function(){m(!1)}.bind(this),e.attachEvent("onresize",v);else{var t=e.childNodes[0];(f=document.createElement("div")).className="oj-helper-detect-expansion";var n=document.createElement("div");f.appendChild(n),null!=t?e.insertBefore(f,t):e.appendChild(f),f.addEventListener("scroll",h,!1),(d=document.createElement("div")).className="oj-helper-detect-contraction";var o=document.createElement("div");o.style.width="200%",o.style.height="200%",d.appendChild(o),e.insertBefore(d,f),d.addEventListener("scroll",h,!1),this.init(!1)}},this.stop=function(){null!=l&&(c._cancelInvokeAfterPaint(l),l=null),null!=f?(f.removeEventListener("scroll",h),d.removeEventListener("scroll",h),f.parentNode&&e.removeChild(f),d.parentNode&&e.removeChild(d)):e.detachEvent("onresize",v)},this.init=function(e){var t=E(e);e&&!t&&null!=f.offsetParent&&g(s,u)}},c._RESIZE_TRACKER_KEY="_ojResizeTracker",c.isValidIdentifier=function(e){return/^[A-Za-z][0-9A-Z_a-z-]*$/.test(e)},c._collapsingListenerManager=function(e,t){var n=null,o=null,i=function(){e.apply(null,n),o=null},r=function(){n=Array.prototype.slice.call(arguments),null==o&&(o=window.setTimeout(i,t))};this.getCallback=function(){return r},this.stop=function(){null!=o&&(window.clearTimeout(o),o=null)}},c.isTouchSupported=function(){return"ontouchstart"in window||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints>0},c.setInKoCleanExternal=function(e){c._koCleanNode=e},c.unwrap=function(e,t){var n=c._koCleanNode;n&&e.get(0)===n||(t?t.replaceWith(e):e.unwrap())},c.isChromeEvent=function(n){function o(e){var n=e.target,o=t(n),i=n.getBoundingClientRect(),r=c.getScrollBarWidth(),a="ltr"===c.getReadingDirection();return!(!a||"HTML"!==n.nodeName&&"visible"===o.css("overflow-x")||!(e.clientX>i.right-r))||(!a&&"HTML"===n.nodeName&&e.clientX>i.left-r||(!a&&"visible"!==o.css("overflow-x")&&e.clientX<i.left+r||("HTML"===n.nodeName||"visible"!==o.css("overflow-y"))&&e.clientY>i.bottom-r))}if(!("clientX"in n&&"clientY"in n))return!1;var i=e.AgentUtils.getAgentInfo();return e.AgentUtils.OS.ANDROID!==i.os&&e.AgentUtils.OS.IOS!==i.os&&(e.AgentUtils.ENGINE.GECKO===i.engine?function(e){try{return!e.originalTarget.localName}catch(e){return!0}}(n):e.AgentUtils.ENGINE.WEBKIT===i.engine||e.AgentUtils.ENGINE.BLINK===i.engine?o(n):e.AgentUtils.BROWSER.IE===i.browser&&o(n))},c.getScrollBarWidth=function(){var e=c._scrollBarWidth;if(t.isNumeric(e))return e;var n=t("<div></div>");t(document.body).append(n),n.width(50).height(50).css({overflow:"scroll",visibility:"hidden",position:"absolute"});var o=t("<div></div>");o.height(1),n.append(o);var i=o.width(),r=n.width();return n.remove(),e=r-i,c._scrollBarWidth=e,e},c.getReadingDirection=function(){var e=document.documentElement.getAttribute("dir");return e&&(e=e.toLowerCase()),"rtl"===e?"rtl":"ltr"},c.getScrollLeft=function(t){if("rtl"===c.getReadingDirection()){var n=e.AgentUtils.getAgentInfo().browser;return n===e.AgentUtils.BROWSER.FIREFOX||n===e.AgentUtils.BROWSER.IE||n===e.AgentUtils.BROWSER.EDGE?Math.abs(t.scrollLeft):Math.max(0,t.scrollWidth-t.clientWidth-t.scrollLeft)}return t.scrollLeft},c.setScrollLeft=function(t,n){if("rtl"===c.getReadingDirection()){var o=e.AgentUtils.getAgentInfo().browser;o===e.AgentUtils.BROWSER.FIREFOX?t.scrollLeft=-n:o===e.AgentUtils.BROWSER.IE||o===e.AgentUtils.BROWSER.EDGE?t.scrollLeft=n:t.scrollLeft=Math.max(0,t.scrollWidth-t.clientWidth-n)}else t.scrollLeft=n},c.getCSSLengthAsInt=function(e){if(!isNaN(e))return parseInt(e,10);if(e&&e.length>0&&"auto"!==e){var t=parseInt(e,10);return isNaN(t)&&(t=0),t}return 0},c.getCSSLengthAsFloat=function(e){if(!isNaN(e))return parseFloat(e);if(e&&e.length>0){var t=parseFloat(e);return isNaN(t)&&(t=0),t}return 0},c._LOGICAL_PARENT_DATA="oj-logical-parent",c.getLogicalParent=function(e){if(e)return e.data(c._LOGICAL_PARENT_DATA)},c.setLogicalParent=function(e,t){e&&(null===t?e.removeData(c._LOGICAL_PARENT_DATA):e.data(c._LOGICAL_PARENT_DATA,t))},c.isLogicalAncestorOrSelf=function(n,o){e.Assert.assertDomElement(n),e.Assert.assertDomElement(o);for(var i=o;i;){if(i===n)return!0;var r=c.getLogicalParent(t(i));i=r?r[0]:i.parentNode}return!1},c.validateURL=function(e,t){var n=t||["http:","https:"],o=document.createElement("a");o.href=e;var i=o.protocol;if(null!=i&&(i=i.toLowerCase()),n.indexOf(i)<0&&""!==i)throw new Error(i+" is not a valid URL protocol")},c._supressNativeContextMenu=function(){t(document.body).hasClass("oj-hybrid")&&document.body.addEventListener("contextmenu",function(e){"INPUT"!==e.target.nodeName&&e.preventDefault()},!0)},c._supressNativeContextMenu(),c.PRESS_HOLD_THRESHOLD=750,c.recentTouchEnd=function(){var e=0;function t(){e=Date.now()}return document.addEventListener("touchend",t,!0),document.addEventListener("touchcancel",t,!0),function(){return Date.now()-e<500}}(),c.recentTouchStart=function(){var e=0,t=c.PRESS_HOLD_THRESHOLD+50;return document.addEventListener("touchstart",function(){e=Date.now()},{passive:!0,capture:!0}),function(){return Date.now()-e<t}}(),c.recentPointer=(i=0,r=c.PRESS_HOLD_THRESHOLD+600,document.addEventListener("mousedown",function(){var e=Date.now();(!o||e>i+c.PRESS_HOLD_THRESHOLD)&&(i=e,o=!1)},!0),document.addEventListener("touchstart",function(){i=Date.now(),o=!0},{passive:!0,capture:!0}),document.addEventListener("mouseup",function(){i=Date.now(),o=!1},!0),document.addEventListener("touchend",function(){i=Date.now(),o=!1},!0),function(){return Date.now()-i<(o?r:600)}),c.makeFocusable=(a=0,l=(n.parseJSONFromFontFamily("oj-focus-config")||{}).focusHighlightPolicy,s=function(e,t){switch(e?e():l){case"all":return!0;case"none":return!1;default:return!(c.recentPointer()||t&&t())}},function(e){var n=e.element,o="ojFocusable";if(e.remove){n.removeClass("oj-focus oj-focus-highlight");var i=n.data(o);if(null==i)return;var r=".ojFocusable"+(""+i).split(",").join(" .ojFocusable");n.off(r).removeData(o)}else{var l=e.afterToggle||t.noop,c=e.applyHighlight?function(t){t.addClass("oj-focus"),s(e.getFocusHighlightPolicy,e.recentPointer)&&t.addClass("oj-focus-highlight"),l("focusin")}:function(e){e.addClass("oj-focus"),l("focusin")},u=!1;(e.setupHandlers||function(i,r){var l=e.component,s=function(e){i(t(e.currentTarget)),u=!0},c=function(e){u&&(r(t(e.currentTarget)),u=!1)};if(l)l._on(n,{focusin:s,focusout:c});else{var f=a;a+=1;var d=n.data(o);n.data(o,null==d?f:d+","+f);var v={},h=".ojFocusable"+f;v["focusin"+h]=s,v["focusout"+h]=c,n.on(v)}})(c,function(e){e.removeClass("oj-focus oj-focus-highlight"),l("focusout")})}}),c});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojfocusutils',["ojs/ojcore-base","jquery","ojs/ojdomutils"],function(e,t,n){"use strict";var r={};return e.FocusUtils=r,r._TABBABLE=":tabbable,iframe",r.containsFocus=function(e){var t=document.activeElement;return!(!e||!t)&&n.isAncestorOrSelf(e,t)},r.focusElement=function(e){e.focus()},r.focusFirstTabStop=function(e){var t=r.getFirstTabStop(e);return t&&r.focusElement(t),t},r.isFirstActiveElement=function(e){var n=t(e).find(r._TABBABLE);if(null==n||0===n.length)return!1;var i=n[0];return document.activeElement===i||i.name===document.activeElement.name&&"radio"===i.type&&"radio"===document.activeElement.type},r.isLastActiveElement=function(e){var n=t(e).find(r._TABBABLE);if(null==n||0===n.length)return!1;var i=n[n.length-1];return document.activeElement===i||i.name===document.activeElement.name&&"radio"===i.type&&"radio"===document.activeElement.type},r.getFirstTabStop=function(e){var n=t(e);if(n.is(r._TABBABLE))return e;var i=n.find(r._TABBABLE);if(i&&i.length>0){if(i[0].classList.contains("oj-radio")){var o=i.filter(".oj-selected.oj-radio");return o&&o.length?o[0]:i[0]}return i[0]}return null},r.getLastTabStop=function(e){var n=t(e).find(r._TABBABLE);if(n&&n.length>0){if(n[n.length-1].classList.contains("oj-radio")){var i=n.filter(".oj-selected.oj-radio");return i&&i.length?i[i.length-1]:n[n.length-1]}return n[n.length-1]}return null},r.isFocusable=function(n){return!!t(n).is(":focusable")&&!("A"===n.nodeName&&!n.hasAttribute("tabindex")&&e.AgentUtils.getAgentInfo().browser===e.AgentUtils.BROWSER.SAFARI)},r});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojcomponentcore',["ojs/ojcore","ojs/ojtranslation","jquery","ojs/ojmessaging","ojs/ojlogger","ojs/ojmetadatautils","ojs/ojdefaultsutils","ojs/ojcustomelement","jqueryui-amd/widget","jqueryui-amd/unique-id","jqueryui-amd/keycode","jqueryui-amd/focusable","jqueryui-amd/tabbable","ojs/ojdomutils","ojs/ojfocusutils"],function(t,e,n,i,s,o,r){"use strict";var a=r.DefaultsUtils;t.Components={};t.Components;t.Components._OJ_CONTAINER_ATTR="data-oj-container";var u="oj-component-names",l="oj-component-initnode",c="oj-subtree-hidden",g="oj-pending-subtree-hidden";function _(t,e){var i=function(){var t=n(this),i=t.data(u);if(null!=i)for(var s=0;s<i.length;s++){var o=t.data("oj-"+i[s]);null!=o&&e(o)}},s=n(t);s.hasClass(l)&&i.call(t),s.find("."+l).each(i)}function p(t,e,i){function s(t){if(e&&t.classList.contains(l)){var s=n(t),o=s.data(u);if(null!=o)for(var r=0;r<o.length;r++){var a=s.data("oj-"+o[r]);null!=a&&e(a)}}if(i&&"oj-defer"===t.tagName.toLowerCase()){if(!t._activate)throw new Error("subtreeShown called before module ojs/ojdefer was loaded");t._activate()}}if(!function(t){for(var e=t;e;){if(e.nodeType===Node.DOCUMENT_NODE)return!1;if(e.nodeType===Node.ELEMENT_NODE&&e.classList.contains(c))return!0;e=e.parentNode}return!0}(t)){s(t);var o=["."+l];i&&o.push("oj-defer");var r=[];o.forEach(function(t){r.push("."+c+" "+t),r.push("."+g+" "+t)});for(var a=o.join(","),_=r.join(","),p=function(t,e){for(var n=[],i=0,s=0;s<e.length;s++){for(var o=e[s];i<t.length&&t[i]!==o;)n.push(t[i]),i+=1;i+=1}for(;i<t.length;)n.push(t[i]),i+=1;return n}(t.querySelectorAll(a),t.querySelectorAll(_)),h=0;h<p.length;h++)s(p[h])}}function h(t){this.getCallback=function(){return t}}function d(t,e,n){return Object.keys(e).forEach(function(i){var s=t[i]||[],o=e[i];n?s=s.concat(o):s.push(o),t[i]=s}),t}function E(e){return t.BaseCustomElementBridge.getRegistered(e.tagName)}function m(e){return!!t.Components.__GetWidgetConstructor(e)}function f(t){return E(t)||m(t)}t.Components.setDefaultOptions=function(e){var n=t.Components._defaultProperties||{};Object.keys(e).forEach(function(i){var s=e[i];if(!t.CollectionUtils.isPlainObject(s))throw new Error("Invalid default options");n[i]=d(n[i]||{},s,!1)}),t.Components._defaultProperties=n},t.Components.getDefaultOptions=function(){return t.Components._defaultProperties||{}},t.Components.createDynamicPropertyGetter=function(t){return new h(t)},t.Components.getWidgetConstructor=function(e,n){return e&&!t.BaseCustomElementBridge.getRegistered(e.tagName)?t.Components.__GetWidgetConstructor(e,n):null},t.Components.__GetWidgetConstructor=function(t,e){var i=n(t),s=i.data(u);if(s&&(null==e?e=s[0]:s.indexOf(e)<0&&(e=void 0),null!=e)){var o=i[e];if("function"==typeof o)return o.bind(i)}return null},t.Components.subtreeAttached=function(e){t.DomUtils.fixResizeListeners(e),_(e,function(t){t.__handleSubtreeAttached()})},t.Components.subtreeDetached=function(t){_(t,function(t){t.__handleSubtreeDetached()})},t.Components.subtreeShown=function(e,i){var s=n(e)[0];if(s.nodeType===Node.ELEMENT_NODE){var o=(i||{}).initialRender;o||t.DomUtils.fixResizeListeners(s),s.classList.remove(c),p(s,function(t){o?t._NotifyInitShown():t._NotifyShown()},!0)}},t.Components.subtreeHidden=function(t){var e=n(t)[0];e.nodeType===Node.ELEMENT_NODE&&(p(e,function(t){t._NotifyHidden()},!1),e.classList.add(c))},t.Components.markPendingSubtreeHidden=function(t){t.classList.add(g)},t.Components.unmarkPendingSubtreeHidden=function(t){t.classList.remove(g)},t.Components.isComponentInitialized=function(t,e){var i=t.data(u);return!!(n.isArray(i)&&i.indexOf(e)>-1&&t.is("."+l))},t.Components.__getDefaultOptions=function(e){for(var n={},i=t.Components.getDefaultOptions(),s=e.length-1;s>=0;s--){var o=i[e[s]];void 0!==o&&(n=d(n,o,!0))}return n},t.Components.getComponentElementByNode=function(e){return function e(n,i){if(null==n)return null;var s=1===n.nodeType;var o=t.Composite&&!i?t.Composite.getContainingComposite(n):null;if(o)return o;if(s&&n.hasAttribute("data-oj-internal"))return n.parentNode instanceof Element&&n.parentNode.hasAttribute("data-oj-surrogate-id")?(n=document.querySelector("[data-oj-popup-"+n.id+"-parent]"),e(n,i)):e(n.parentNode,i);if(f(n))return n;if(s&&n.classList.contains("oj-component")){if(m(n=n.querySelector(".oj-component-initnode:not([data-oj-internal])")||n))return n}else if(s&&n.hasAttribute("data-oj-containerid"))return n=document.getElementById(n.getAttribute("data-oj-containerid")),e(n,i);return e(n.parentNode,i)}(e,!!(arguments.length>1&&arguments[1]))},t.Components.getSubIdByNode=function(e,n){return t.Components.callComponentMethod(e,"getSubIdByNode",n)},t.Components.getNodeBySubId=function(e,n){return t.Components.callComponentMethod(e,"getNodeBySubId",n)},t.Components.getComponentOption=function(e,n){if(!f(e))throw new Error("node is not a component element");return E(e)?e.getProperty?e.getProperty.call(e,n):void 0:t.Components.__GetWidgetConstructor(e)("option",n)},t.Components.setComponentOption=function(e,n,i){if(!f(e))throw new Error("node is not a component element");E(e)?e.setProperty&&e.setProperty.call(e,n,i):t.Components.__GetWidgetConstructor(e)("option",n,i)},t.Components.callComponentMethod=function(e,i,s){if(!f(e))throw new Error("node is not a component element");return E(e)?e[i]?e[i].apply(e,[].slice.call(arguments,2)):void 0:t.Components.__GetWidgetConstructor(e).apply(n(e),[].slice.call(arguments,1))};var v,C,y={isDefaultPrevented:function(){return!1},preventDefault:function(){this.isDefaultPrevented=N},stopPropagation:function(){this.isPropagationStopped=N},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=N}};function T(t,e,n,i,s,o,r){var a=n,u=!1,l={};delete i[s],Object.defineProperty(i,s,{get:function(){if(u)return a;if(null!=t._settingNestedKey)return a;var n=o(r?r():s);return A([e,n,a],l)},set:function(e){a=e,null!=t._settingNestedKey?l[t._settingNestedKey]=!0:u=!0},enumerable:!0})}function S(t){if(1===t.length){var e=t[0];return e instanceof h?e.getCallback():null}for(var n=!1,i=0;i<t.length&&!n;i++){var s=t[i];null!=s&&s instanceof h&&(n=!0)}if(n){return function(e){var n=[];return t.forEach(function(t){null!=t&&t instanceof h?n.push(t.getCallback()(e)):n.push(t)}),A(n)}}return null}function A(t,e){for(var i,s=0;s<t.length;s++){var o=t[s];if(void 0!==o)if(n.isPlainObject(o))i=M({},n.isPlainObject(i)?[i,o]:[o],s===t.length-1?null:e,null);else i=o}return i}function M(t,e,i,s){for(var o=e.length,r=0;r<o;r++)for(var a=e[r],u=Object.keys(a),l=0;l<u.length;l++){var c,g=u[l];if(c=null==i?null:null==s?g:s+"."+g,null==i||!i[c]){var _=a[g];if(void 0!==_)if(n.isPlainObject(_)){var p=n.isPlainObject(t[g])?[t[g],_]:[_];t[g]=M({},p,i,c)}else t[g]=_}}return t}function N(){return!0}n.widget("oj.baseComponent",{options:{contextMenu:null,rootAttributes:null,optionChange:void 0,destroy:void 0},refresh:function(){this._propertyContext=null,this._SetupContextMenu()},_createWidget:function(t,e){t&&(this.OuterWrapper=t._wrapper),this._originalDefaults=this.options||{},this._constructorOptions=t||{},this._super(t,e),this._AfterCreateEvent()},_SetRootAttributes:function(){var t=this.options.rootAttributes;if(t){var e=this.widget();if(null==e)return;var i=t.class;i&&e.addClass(i);var s=t.style;if(s){var o=e.attr("style");o?e.attr("style",o+";"+s):e.attr("style",s)}delete(t=n.extend({},t)).class,delete t.style,e.attr(t),delete t.id;var r=Object.keys(t);if(r.length)throw new Error("Unsupported values passed to rootAttributes option: "+r.toString())}},_create:function(){this._SaveAttributes(this.element),this._InitOptions(this._originalDefaults,this._constructorOptions),delete this._originalDefaults,delete this._constructorOptions,this._ComponentCreate(),this._AfterCreate(),this._SetupResources(),this.element.addClass(l)},_InitOptions:function(t,e){this._setupDefaultOptions(t,e),this._initContextMenuOption(e)},_ComponentCreate:function(){var t,e,n;t=this.element,e=this.widgetName,(n=t.data(u))||(n=[],t.data(u,n)),n.indexOf(e)<0&&n.push(e),this.activeableEventNamespace=this.eventNamespace+"activeable",this.hoverableEventNamespace=this.eventNamespace+"hoverable"},_AfterCreate:function(){this._SetRootAttributes(),this.contextMenuEventNamespace=this.eventNamespace+"contextMenu",this.activeableEventNamespace=this.eventNamespace+"activeable",this.hoverableEventNamespace=this.eventNamespace+"hoverable"},_AfterCreateEvent:n.noop,_setOptionClasses:function(){},_setOptionDisabled:function(){},_classes:function(){return""},_removeClass:function(){return this},_addClass:function(){return this},_toggleClass:function(){return this},_SaveAttributes:function(t){},_SaveAllAttributes:function(t){var e=this;this._savedAttributes=[],n.each(t,function(t,i){var s={},o={element:i,attributes:s},r=i.attributes;e._savedAttributes.push(o),n.each(r,function(t,e){var n=e.name;s[n]={attr:e.value}})})},_GetSavedAttributes:function(t){var e=this._savedAttributes;if(void 0===e)return null;for(var n=t[0],i=0,s=e.length;i<s;i++){var o=e[i];if(o.element===n)return o.attributes}return{}},_RestoreAttributes:function(){},_RestoreAllAttributes:function(){n.each(this._savedAttributes,function(t,e){var i=n(e.element),s=e.attributes;if(1===i.length){var o,r,a=e.element.attributes,u=[];for(o=0,r=a.length;o<r;o++)a[o].name in s||u.push(a[o].name);for(o=0,r=u.length;o<r;o++)i.removeAttr(u[o]);var l=Object.keys(s);for(o=0;o<l.length;o++){var c=l[o];i.attr(c,s[c].attr)}}})},_GetTranslationsSectionName:function(){return this.widgetFullName},_CompareOptionValues:function(e,n,i){return this._IsCustomElement()&&this._getWritebackOption(e)?t.Object.compareValues(n,i):n===i},getTranslatedString:function(t,n){var i={};arguments.length>2?i=Array.prototype.slice.call(arguments,1):2===arguments.length&&("object"==typeof(i=arguments[1])||i instanceof Array||(i=[i]));var s=this.option("translations."+t);return null==s?t:e.applyParameters(s.toString(),i)},getNodeBySubId:function(t){return null!=t&&null!=t.subId||!this.element?null:this.element[0]},getSubIdByNode:function(t){return null},destroy:function(){if(this._IsCustomElement())throw new Error("destroy cannot be called on a custom element");this._trigger("destroy"),t.DomUtils.dispatchEvent(this.element[0],new CustomEvent("_ojDestroy")),this._ReleaseResources(),this._super(),this.element.removeClass(l),this.widget().removeClass("oj-disabled"),this._removeStateClasses(this.element),function(t,e){var n=t.data(u);if(n){var i=n.indexOf(e);i>=0&&(n.splice(i,1),0===n.length&&t.removeData(u))}}(this.element,this.widgetName),this._RestoreAttributes(),this._initialCmDomAttr?this.element.attr("contextmenu",this._initialCmDomAttr):this.element.removeAttr("contextmenu"),this._propertyContext=null},option:function(e,i){if(0===arguments.length)return n.widget.extend({},this.options);var o,r=arguments[0],a=r,u=null,l={};if("string"==typeof r){a={};var c=r.split(".");if(r=c.shift(),c.length){var g;u=c.join(".");try{arguments.length>1&&(this._settingNestedKey=u),g=n.widget.extend({},this.options[r]),a[r]=g}finally{this._settingNestedKey=null}for(o=0;o<c.length-1;o++)g[c[o]]=g[c[o]]||{},g=g[c[o]];if(r=c.pop(),1===arguments.length)return void 0===g[r]?null:g[r];g[r]=i}else{if(1===arguments.length)return void 0===this.options[r]?null:this.options[r];a[r]=i}l=arguments[2]||l}else l=arguments[1]||l;if(null!=u){var _={path:e,value:i};l=n.widget.extend({},l,{subkey:u,subproperty:_})}var p=l?l._context:null,h=!!p&&p.internalSet,d={},E=Object.keys(a);for(o=0;o<E.length;o++){var m=E[o],f=a[m],v=this.options[m];l&&l.changed||!this._CompareOptionValues(m,v,f)?d[m]=f:this._IsCustomElement()&&s.info(t.BaseCustomElementBridge.getElementInfo(this.element[0])+": Ignoring property set for property '"+m+"' with same value.")}return Object.keys(d).length>0&&(h?this._internalSetOptions(d,l):this._setOptions(d,l)),this},_internalSetOptions:function(t,e){for(var n=Object.keys(t),i=0;i<n.length;i++){var s=n[i],o=t[s],r=this.options[s];this.options[s]=o,this._optionChanged(s,o,r,e)}},_setOptions:function(t,e){for(var n=Object.keys(t),i=0;i<n.length;i++){var s=n[i],o=t[s];this._setOption(s,o,e)}return this},_setOption:function(t,e,n){var i=this.options[t];if("disabled"===t)this.options[t]=e,this.widget().toggleClass("oj-disabled",!!e).attr("aria-disabled",e),e&&this._removeStateClasses(this.widget());else{try{var s=null==n?null:n.subkey;null!=s&&(this._settingNestedKey=s),this._super(t,e)}finally{this._settingNestedKey=null}"contextMenu"===t&&this._SetupContextMenu()}return this._optionChanged(t,e,i,n),this},_optionChanged:function(t,e,i,s){var o,r=null,a=!1,u=!1,l=null,c="external",g=null;if(s&&(r=s._context)){if(r.skipEvent)return;l=r.originalEvent,a=void 0===r.writeback?null!=l:r.writeback,u=r.readOnly,g=r.optionMetadata,o=r.extraData,r.internalSet&&(c="internal")}(g=g||{}).writeback=a?"shouldWrite":"shouldNotWrite",u&&(g.readOnly=!0);var _={option:t,previousValue:i,value:e,optionMetadata:g,updatedFrom:c},p=null==s?null:s.subkey;if(p){var h=p.split("."),d=i;h.forEach(function(t){d&&(d=d[t])});var E=s.subproperty;E.previousValue=d,_.subproperty=E}null!=o&&(_=n.extend({},o,_)),this._trigger("optionChange",l,_)},_SetupResources:function(){this._SetupContextMenu()},_ReleaseResources:function(){this._ReleaseContextMenu()},_trigger:function(t,e,n){return this._trigger2(t,e,n).proceed},_trigger2:function(t,e,i){var s=i||{};if(this._IsCustomElement())return this._triggerCustomEvent(t,e,s);var o=this.options[t],r=n.Event(e,y);return r.type=(this.widgetEventPrefix+t).toLowerCase(),r.target=this.element[0],this.element.trigger(r,s),{proceed:!(n.isFunction(o)&&!1===o.apply(this.element[0],[r].concat(s))||r.isDefaultPrevented()),event:r}},_triggerCustomEvent:function(e,i,s){var o,r,a,u={},l=this._getRootElement();if("optionChange"===e){var c=t.CustomElementBridge.getPropertyForAlias(l,s.option);if(!t.CustomElementBridge.isKnownProperty(l,c))return{proceed:!0,event:null};o=t.__AttributeUtils.propertyNameToChangeEventType(c);for(var g=Object.keys(s),_=0;_<g.length;_++){var p=g[_];if("option"!==p)if("optionMetadata"===p)for(var h=Object.keys(s[p]),d=0;d<h.length;d++){var E=h[d];"writeback"!==E&&"component"!==E&&(u[E]=s[p][E])}else u[p]=s[p]}}else{if(o=t.__AttributeUtils.eventTriggerToEventType(e),!t.CustomElementBridge.isKnownEvent(l,o))return{proceed:!0,event:null};r=!0,a=!0,u=this._resolveJQueryObjects(s)}i&&(u.originalEvent=i instanceof n.Event?i.originalEvent:i);var m={detail:u};r&&(m.bubbles=!0),a&&(m.cancelable=!0);var f=new CustomEvent(o,m);return l.dispatchEvent(f),{proceed:!f.defaultPrevented,event:f}},_resolveJQueryObjects:function(e){for(var i=t.CollectionUtils.copyInto({},e),s=Object.keys(i),o=0;o<s.length;o++){var r=s[o],a=i[r];a&&a instanceof n&&(0===a.length?i[r]=null:1===a.length?i[r]=a[0]:i=a.toArray())}return i},_initContextMenuOption:function(t){var e=this.element.attr("contextmenu");this._initialCmDomAttr=e,!e||"contextMenu"in t||this.option("contextMenu",document.getElementById(e),{_context:{internalSet:!0}})},_handleContextMenuGesture:function(e,i,s){if(!this._IsEffectivelyDisabled()){var o;if("OJ-MENU"===e.tagName)o=e;else{var r=t.Components.__GetWidgetConstructor(e,"ojMenu");if(!(o=r&&r("instance")))throw new Error("Invalid JET Menu.")}this._NotifyContextMenuGesture(o,i,s),n(e).is(":visible")&&i.preventDefault()}},_SetupContextMenu:function(){var e=this._GetContextMenu();if(e||(e=this._GetDefaultContextMenu()),e&&void 0===this._contextMenuGestureInit){this._contextMenuGestureInit=e;var n=this;t.GestureUtils.startDetectContextMenuGesture(this.widget()[0],function(t,i){n._handleContextMenuGesture(e,t,i)})}},_ReleaseContextMenu:function(){this._contextMenuGestureInit=void 0,t.GestureUtils.stopDetectContextMenuGesture(this.widget()[0])},_GetContextMenu:function(){if(this._IsCustomElement()){var e=t.BaseCustomElementBridge.getSlotMap(this._getRootElement()).contextMenu;if(e&&e.length>0)return e[0]}else if(this.options.contextMenu)return n(this.options.contextMenu).first()[0];return null},_NotifyContextMenuGesture:function(t,e,n){this._OpenContextMenu(e,n)},_OpenContextMenu:function(e,i,s,o,r){var a=this._GetContextMenu();if(a||(a=this._contextMenuGestureInit&&n(this._contextMenuGestureInit).is(":visible")?this._contextMenuGestureInit:this._GetDefaultContextMenu()),a){var u={mouse:{my:"start top",at:"start bottom",of:e,collision:"flipfit"},touch:{my:"start>40 center",at:"start bottom",of:e,collision:"flipfit"},keyboard:{my:"start top",at:"start bottom",of:"launcher",collision:"flipfit"}},l={launcher:this.element,position:u[i]},c={initialFocus:"menu"},g=r?n.extend(l,s,c):n.extend(!0,l,s,c);if(a.__openingContextMenu=!0,"OJ-MENU"===a.tagName)a.open(e,g,o);else{var _=t.Components.__GetWidgetConstructor(a,"ojMenu");(_&&_("instance")).open(e,g,o);var p=function(t){t.preventDefault()};a.addEventListener("contextmenu",p),window.setTimeout(function(){a.removeEventListener("contextmenu",p)},50)}a.__openingContextMenu=!1}},_GetDefaultContextMenu:function(){return null},_removeStateClasses:function(t){t.removeClass("oj-hover oj-focus oj-focus-highlight oj-active"),t.find(".oj-hover").removeClass("oj-hover"),t.find(".oj-focus").removeClass("oj-focus"),t.find(".oj-focus-highlight").removeClass("oj-focus-highlight"),t.find(".oj-active").removeClass("oj-active")},_isRealMouseEvent:function(){return!t.DomUtils.recentTouchEnd()},_AddHoverable:function(t){var e;n.isPlainObject(t)?e=t.element:(e=t,t={});var i=t.afterToggle||n.noop;e.on("mouseenter"+this.hoverableEventNamespace,this._hoverStartHandler.bind(this,i)).on("mouseleave"+this.hoverableEventNamespace,this._hoverAndActiveEndHandler.bind(this,"oj-hover",i))},_RemoveHoverable:function(t){t&&t.off(this.hoverableEventNamespace)},_AddActiveable:function(e){var i;n.isPlainObject(e)?i=e.element:(i=e,e={});var s=e.afterToggle||n.noop;t.DomUtils.isTouchSupported()&&(i[0]&&(this._touchstartListener=this._activeStartHandler.bind(this,s),i[0].addEventListener("touchstart",this._touchstartListener,{passive:!0})),i.on("touchend"+this.activeableEventNamespace+" touchcancel"+this.activeableEventNamespace,this._hoverAndActiveEndHandler.bind(this,"oj-active",s))),i.on("mousedown"+this.activeableEventNamespace,this._activeStartHandler.bind(this,s)).on("mouseup"+this.activeableEventNamespace,this._hoverAndActiveEndHandler.bind(this,"oj-active",s)).on("mouseenter"+this.activeableEventNamespace,this._activeStartHandler.bind(this,s)).on("mouseleave"+this.activeableEventNamespace,this._hoverAndActiveEndHandler.bind(this,"oj-active",s))},_RemoveActiveable:function(t){t&&(t[0]&&(t[0].removeEventListener("touchstart",this._touchstartListener,{passive:!0}),delete this._touchstartListener),t.off(this.activeableEventNamespace),v=null)},_activeStartHandler:function(t,e){var i=n(e.currentTarget);("mouseenter"!==e.type||this._isTargetInActiveElement(e.currentTarget))&&(i.hasClass("oj-disabled")||"touchstart"!==e.type&&!this._isRealMouseEvent(e)||(i.addClass("oj-active"),t(e.type),"mousedown"===e.type&&(v=e.currentTarget,this.document.one("mouseup",function(){v=null}))))},_hoverStartHandler:function(t,e){var i=n(e.currentTarget);!i.hasClass("oj-disabled")&&this._isRealMouseEvent(e)&&(i.addClass("oj-hover"),t(e.type))},_hoverAndActiveEndHandler:function(t,e,i){("oj-active"!==t||"mouseleave"!==i.type||this._isTargetInActiveElement(i.currentTarget))&&(n(i.currentTarget).removeClass(t),e(i.type))},_isTargetInActiveElement:function(t){return v===t||null!=v&&n.contains(v,t)},_hoverable:function(){},_focusable:function(e){n.isPlainObject(e)||(e={element:e}),e.component=this,t.DomUtils.makeFocusable(e)},_UnregisterChildNode:function(t){if(t){n(t).off(this.eventNamespace);var e=this.bindings;e&&(this.bindings=n(e.not(t)))}},_GetReadingDirection:function(){return t.DomUtils.getReadingDirection()},_NotifyAttached:function(){this._propertyContext=null},_NotifyDetached:function(){this._propertyContext=null,this._removeStateClasses(this.widget())},_NotifyInitShown:function(){},_NotifyShown:function(){},_NotifyHidden:function(){},_IsEffectivelyDisabled:function(){return!(!this.options.disabled&&!this._ancestorDisabled)},__setAncestorComponentDisabled:function(t){this._ancestorDisabled=t},_getTranslationSectionLoader:function(){var t=[],i=this,s=0;this._traverseWidgetHierarchy(function(o){var r=0===s?i._GetTranslationsSectionName():o.widgetFullName;s+=1;var a=e.getComponentTranslations(r);null==a||n.isEmptyObject(a)||t.push(r)});var o=t.length;return o>0?function(){if(1===o)return e.getComponentTranslations(t[0]);for(var i={},s=o-1;s>=0;s--)n.widget.extend(i,e.getComponentTranslations(t[s]));return i}:null},_getDynamicPropertyContext:function(){if(!this._propertyContext){var e={};this._propertyContext=e;var n=this.element[0];e.containers=function(e){for(var n=e,i=[];n;){var s=n.getAttribute,o=s?s.call(n,t.Components._OJ_CONTAINER_ATTR):null;null!=o&&i.push(o),n=n.parentNode}return i}(n),e.element=n,e.isCustomElement=this._IsCustomElement(),e.isCustomElement&&(e.customElement=this._getRootElement())}return this._propertyContext},_setupDefaultOptions:function(t,e){var i=this.options,s=this._getTranslationSectionLoader(),o=e.translations;null==s||void 0!==o&&!n.isPlainObject(o)||T(this,void 0,e.translations,i,"translations",s),this._loadGlobalDefaultOptions(t,e)},_loadGlobalDefaultOptions:function(e,i){var s=this.options,o=[];this._traverseWidgetHierarchy(function(t){o.push(t.widgetName)}),o.push("default");var r=t.Components.__getDefaultOptions(o);if(!n.isEmptyObject(r))for(var a=this,u=function(){return a._getDynamicPropertyContext()},l=Object.keys(r),c=0;c<l.length;c++){var g=l[c],_=i[g];if(void 0===_||n.isPlainObject(_)){var p=r[g];if(p){var h=S(p);if(h)T(this,e[g],_,s,g,h,u);else{var d=[e[g]].concat(p);d.push(_),s[g]=A(d)}}}}},_traverseWidgetHierarchy:function(t){for(var e=this.constructor.prototype;null!=e&&"oj"===e.namespace;)t(e),e=Object.getPrototypeOf(e)},_getRootElement:function(){return this.OuterWrapper||this.element[0]},_IsCustomElement:function(){return null!=t.BaseCustomElementBridge.getRegistered(this._getRootElement().tagName)},_FixRendererContext:function(e){if(this._IsCustomElement()){var n=t.CollectionUtils.copyInto({},e);return delete n.component,n.componentElement=this._getRootElement(),n}return e},_WrapCustomElementRenderer:function(t){return this._IsCustomElement()&&"function"==typeof t?function(e){var n=t(e);return n&&n.insert?n.insert:null}:t},__saveWritebackOptions:function(t){this._writebackOptions=t},_getWritebackOption:function(t){return!(!this._writebackOptions||!this._writebackOptions[t])},__handleSubtreeAttached:function(){this._IsCustomElement()||this._NotifyAttached()},__handleSubtreeDetached:function(){this._IsCustomElement()||this._NotifyDetached()},_VerifyConnectedForSetup:function(){return!1},__handleConnected:function(){this._NotifyAttached(),this.__delayConnectDisconnect(0)||this._SetupResources()},__handleDisconnected:function(){this.__delayConnectDisconnect(1)||this._ReleaseResources(),this._NotifyDetached()},__delayConnectDisconnect:function(t){return!!this._VerifyConnectedForSetup()&&(void 0===this.connectedState&&window.queueMicrotask(function(){this.connectedState===t&&(0===t?this._SetupResources():this._ReleaseResources()),this.connectedState=void 0}.bind(this)),this.connectedState=t,!0)},__handleWatchedAttribute:function(t,e,n){this._WatchedAttributeChanged(t,e,n)},_WatchedAttributeChanged:function(t,e,n){},__getFocusElement:function(){return this.GetFocusElement()},GetFocusElement:function(){return this.element[0]}}),delete n.fn.baseComponent,t.__registerWidget=function(t,e,i,s){if(n.widget(t,e,i),s){var o=t.split(".")[1];delete n.fn[o]}if("oj.oj"===t.substring(0,5)||"oj._oj"===t.substring(0,6)){var r,a=t.split("."),u=a[0],l=a[1],c=u+"-"+l;r="_"===l.substring(0,1)?"_"+u+"-"+l.substring(3):u+"-"+l.substring(2),n.expr.pseudos[r.toLowerCase()]=function(t){return!!n.data(t,c)}}},t.ComponentMessaging=function(t){this.Init(t)},t.Object.createSubclass(t.ComponentMessaging,t.Object,"oj.ComponentMessaging"),t.ComponentMessaging._STRATEGY_TYPE={NONE:"none",NOTEWINDOW:"notewindow",PLACEHOLDER:"placeholder",INLINE:"inline",LABEL_EDGE_INSIDE:"inside",LABEL_EDGE_INSIDE_FORM_CNTRL:"insideformcontrol",USER_ASSISTANCE_INLINE:"userassistanceinline"},t.ComponentMessaging._STRATEGY_TYPE_TO_CALLBACK={},t.ComponentMessaging.registerMessagingStrategy=function(e,n){e&&"function"==typeof n&&(t.ComponentMessaging._STRATEGY_TYPE_TO_CALLBACK[e]=n)},t.ComponentMessaging.prototype.Init=function(e){t.ComponentMessaging.superclass.Init.call(this),this._component=e,this._activated=!1,this._initializeMessagingStrategies()},t.ComponentMessaging.prototype.activate=function(e,i,s){var o=this;t.Assert.assertObject(s),this._launcher=e,this._contentElement=i,this._messagingContent=t.CollectionUtils.copyInto(this._messagingContent||{},s),this._isActive()?this._reactivate():(n.each(this._strategies,function(t,e){e.activate(o)}),this._activated=!0)},t.ComponentMessaging.prototype.update=function(e){t.Assert.assertObject(e),t.Assert.assertBoolean(this._activated),this._messagingContent=t.CollectionUtils.copyInto(this._messagingContent||{},e),this._activated&&n.each(this._strategies,function(t,n){n.shouldUpdate(e)&&n.update()})},t.ComponentMessaging.prototype.deactivate=function(){n.each(this._strategies,function(t,e){e.deactivate()}),this._activated=!1,this._component=null,this._launcher=null,this._contentElement=null,this._strategies={}},t.ComponentMessaging.prototype.close=function(){this._activated&&n.each(this._strategies,function(t,e){e.close()})},t.ComponentMessaging.prototype._createMessagingStrategy=function(e,n){return new(t.ComponentMessaging._STRATEGY_TYPE_TO_CALLBACK[e]||t.ComponentMessaging._STRATEGY_TYPE_TO_CALLBACK[t.ComponentMessaging._STRATEGY_TYPE.NONE])(n)},t.ComponentMessaging.prototype._getComponent=function(){return this._component||null},t.ComponentMessaging.prototype._getLauncher=function(){return this._launcher||null},t.ComponentMessaging.prototype._getContentElement=function(){return this._contentElement||null},t.ComponentMessaging.prototype._getMessagingContent=function(){return this._messagingContent||{}},t.ComponentMessaging.prototype._setMessagingContent=function(e){t.Assert.assertObject(e),this._messagingContent=t.CollectionUtils.copyInto(this._messagingContent||{},e)},t.ComponentMessaging.prototype._isActive=function(){return this._activated},t.ComponentMessaging.prototype._getResolvedMessagingDisplayOptions=function(e){for(var i={},s=!1,o=this._component.options,r={},a=Object.keys(e),u=0;u<a.length;u++){var l=a[u],c=e[l];s=!1;var g=l+"";if(Array.isArray(c))for(var _=0;_<c.length;_++){var p=c[_];s||(s=this._resolveStrategyTypeForArtifact(g,p,o,r))}else"string"==typeof c&&(s||(s=this._resolveStrategyTypeForArtifact(g,c,o,r)));s||(r[g]=t.ComponentMessaging._STRATEGY_TYPE.NONE)}return this._addLabelStrategy(r),n.each(t.ComponentMessaging._STRATEGY_TYPE,function(t,e){i[e]=[]}),n.each(r,function(t,e){i[e].push(t)}),i},t.ComponentMessaging.prototype._getUserAssistanceStrategyToArtifactsObj=function(){var e={},n=this._component.options.displayOptions||{},i={},s=Object.keys(n);for(let e=0;e<s.length;e++){let o=s[e],r=n[o],a=o+"";i[a]="string"==typeof r&&"none"===r?t.ComponentMessaging._STRATEGY_TYPE.NONE:t.ComponentMessaging._STRATEGY_TYPE.USER_ASSISTANCE_INLINE}return this._addLabelStrategy(i),Object.keys(t.ComponentMessaging._STRATEGY_TYPE).forEach(function(n){let i=t.ComponentMessaging._STRATEGY_TYPE[n];e[i]=[]}),Object.keys(i).forEach(function(t){let n=i[t];e[n].push(t)}),e},t.ComponentMessaging.prototype._addLabelStrategy=function(e){var n=this._component._ResolveLabelEdgeStrategyType();this._resolveStrategyTypeForArtifact("labelEdge",n,this._component.options,e)||(e.labelEdge=t.ComponentMessaging._STRATEGY_TYPE.NONE)},t.ComponentMessaging.prototype._resolveStrategyTypeForArtifact=function(e,n,i,s){var o=!1,r=i.placeholder;switch(n){case t.ComponentMessaging._STRATEGY_TYPE.PLACEHOLDER:"converterHint"===e&&(o||r||(s[e]=n,o=!0));break;case t.ComponentMessaging._STRATEGY_TYPE.INLINE:"messages"===e&&(o||(s[e]=n,o=!0));break;case t.ComponentMessaging._STRATEGY_TYPE.LABEL_EDGE_INSIDE:case t.ComponentMessaging._STRATEGY_TYPE.LABEL_EDGE_INSIDE_FORM_CNTRL:"labelEdge"!==e||o||t.StringUtils.isEmptyOrUndefined(i.labelHint)||(s[e]=n,o=!0);break;default:o||"labelEdge"===e||(s[e]=n,o=!0)}return o},t.ComponentMessaging.prototype._initializeMessagingStrategies=function(){var e=this._strategyToArtifacts(),n=e[t.ComponentMessaging._STRATEGY_TYPE.NOTEWINDOW],i=e[t.ComponentMessaging._STRATEGY_TYPE.NONE],s=e[t.ComponentMessaging._STRATEGY_TYPE.PLACEHOLDER],o=e[t.ComponentMessaging._STRATEGY_TYPE.INLINE],r=e[t.ComponentMessaging._STRATEGY_TYPE.LABEL_EDGE_INSIDE],a=e[t.ComponentMessaging._STRATEGY_TYPE.LABEL_EDGE_INSIDE_FORM_CNTRL],u=e[t.ComponentMessaging._STRATEGY_TYPE.USER_ASSISTANCE_INLINE],l={};n.length>0&&(l[t.ComponentMessaging._STRATEGY_TYPE.NOTEWINDOW]=this._createMessagingStrategy(t.ComponentMessaging._STRATEGY_TYPE.NOTEWINDOW,n)),s.length>0&&0===r.length&&(l[t.ComponentMessaging._STRATEGY_TYPE.PLACEHOLDER]=this._createMessagingStrategy(t.ComponentMessaging._STRATEGY_TYPE.PLACEHOLDER,s)),o.length>0&&(l[t.ComponentMessaging._STRATEGY_TYPE.INLINE]=this._createMessagingStrategy(t.ComponentMessaging._STRATEGY_TYPE.INLINE,o)),u.length>0&&(l[t.ComponentMessaging._STRATEGY_TYPE.USER_ASSISTANCE_INLINE]=this._createMessagingStrategy(t.ComponentMessaging._STRATEGY_TYPE.USER_ASSISTANCE_INLINE,u)),r.length>0?l[t.ComponentMessaging._STRATEGY_TYPE.LABEL_EDGE_INSIDE]=this._createMessagingStrategy(t.ComponentMessaging._STRATEGY_TYPE.LABEL_EDGE_INSIDE,r):a.length>0&&(l[t.ComponentMessaging._STRATEGY_TYPE.LABEL_EDGE_INSIDE_FORM_CNTRL]=this._createMessagingStrategy(t.ComponentMessaging._STRATEGY_TYPE.LABEL_EDGE_INSIDE_FORM_CNTRL,a)),l[t.ComponentMessaging._STRATEGY_TYPE.NONE]=this._createMessagingStrategy(t.ComponentMessaging._STRATEGY_TYPE.NONE,i),this._strategies=l},t.ComponentMessaging.prototype._reactivate=function(){var e,i=this._strategyToArtifacts(),s=this;n.each(i,function(n,i){n+="",e=s._strategies[n],i&&i.length>0?e?e&&e.reactivate(i):(e=s._createMessagingStrategy(n,i),s._strategies[n]=e,e.activate(s)):e&&t.ComponentMessaging._STRATEGY_TYPE.NONE!==n&&(e.deactivate(),delete s._strategies[n])})},t.ComponentMessaging.prototype._strategyToArtifacts=function(){let t,e=this._component._getResolvedUserAssistance();if("compact"!==e&&"displayOptions"!==e)t=this._getUserAssistanceStrategyToArtifactsObj();else{let n=this._component.options.displayOptions||{};"compact"===e?(n.messages="notewindow",t=this._getResolvedMessagingDisplayOptions(n)):t=this._getResolvedMessagingDisplayOptions(n)}return t},t.MessagingStrategy=function(t){this.Init(t)},t.Object.createSubclass(t.MessagingStrategy,t.Object,"oj.MessagingStrategy"),t.MessagingStrategy.prototype.Init=function(e){t.Assert.assertArray(e),t.MessagingStrategy.superclass.Init.call(this),this._displayOptions=e},t.MessagingStrategy.prototype.activate=function(t){this._componentMessaging=t},t.MessagingStrategy.prototype.deactivate=function(){},t.MessagingStrategy.prototype.close=function(){},t.MessagingStrategy.prototype.reactivate=function(t){this.Init(t)},t.MessagingStrategy.prototype.shouldUpdate=function(t){return!0},t.MessagingStrategy.prototype.update=function(){},t.MessagingStrategy.prototype.GetLauncher=function(){return this._componentMessaging._getLauncher()},t.MessagingStrategy.prototype.GetContentElement=function(){return this._componentMessaging._getContentElement()},t.MessagingStrategy.prototype.GetComponent=function(){return this._componentMessaging._getComponent()},t.MessagingStrategy.prototype.setHasValidatorHints=function(t){this._hasValidatorHints=t},t.MessagingStrategy.prototype.getHasValidatorHints=function(){return!0===this._hasValidatorHints},t.MessagingStrategy.prototype.GenerateIdIfNeeded=function(e){isNaN(t.MessagingStrategy._uidCounter)&&(t.MessagingStrategy._uidCounter=0);var n=e;n.id||(n.id="ojms_"+t.MessagingStrategy._uidCounter,t.MessagingStrategy._uidCounter+=1)},t.MessagingStrategy.prototype.GetMessages=function(){return this.GetValidityState().getMessages()},t.MessagingStrategy.prototype.GetMaxSeverity=function(){return this.GetValidityState().getMaxSeverity()},t.MessagingStrategy.prototype.GetConverterHint=function(){var t=[],e=this._getMessagingContent(),n=e&&e.converterHint;return n&&t.push(n),t},t.MessagingStrategy.prototype.GetValidatorHints=function(){if(!this.getHasValidatorHints()){this.setHasValidatorHints(!0);let t=this.GetComponent();this._setMessagingContent(t._getValidatorHintsMC()),t._initAsyncValidatorMessagingHint()}var t=this._getMessagingContent();return t&&t.validatorHint||[]},t.MessagingStrategy.prototype.GetTitle=function(){var t=this._getMessagingContent();return t&&t.title||""},t.MessagingStrategy.prototype.GetValidityState=function(){var t=this._getMessagingContent();return t&&t.validityState||null},t.MessagingStrategy.prototype.HasMessages=function(){var t=this.GetMessages();return!!(t&&t.length>0)},t.MessagingStrategy.prototype.ShowMessages=function(){return-1!==this._displayOptions.indexOf("messages")},t.MessagingStrategy.prototype.ShowConverterHint=function(){return-1!==this._displayOptions.indexOf("converterHint")},t.MessagingStrategy.prototype.ShowValidatorHint=function(){return-1!==this._displayOptions.indexOf("validatorHint")},t.MessagingStrategy.prototype.ShowTitle=function(){return-1!==this._displayOptions.indexOf("title")||-1!==this._displayOptions.indexOf("helpInstruction")},t.MessagingStrategy.prototype.IsInvalid=function(){return this.GetValidityState().isInvalid()},t.MessagingStrategy.prototype.AddAriaDescribedByForInlineMessaging=function(e){let i=this.GetContentElement();t.Assert.assertPrototype(i,n);let s=n(e).uniqueId()[0].getAttribute("id");i.each(function(){let t=this.getAttribute("aria-describedby"),e=t?t.split(/\s+/):[];-1===e.indexOf(s)&&e.push(s);let n=e.join(" ").trim();this.setAttribute("aria-describedby",n)})},t.MessagingStrategy.prototype.AddDescribedByToElement=function(t,e){const n=t.getAttribute("described-by");let i,s=n?n.split(/\s+/):[];-1===s.indexOf(e)&&s.push(e),i=s.join(" ").trim(),t.setAttribute("described-by",i)},t.MessagingStrategy.prototype.RemoveAriaDescribedByForInlineMessaging=function(e){let i=this.GetContentElement();t.Assert.assertPrototype(i,n);let s=e.getAttribute("id");i.each(function(){let t=this.getAttribute("aria-describedby"),e=t?t.split(/\s+/):[],n=e.indexOf(s);-1!==n&&e.splice(n,1);let i=e.join(" ").trim();i?this.setAttribute("aria-describedby",i):this.removeAttribute("aria-describedby")})},t.MessagingStrategy.prototype._getMessagingContent=function(){return this._componentMessaging?this._componentMessaging._getMessagingContent():{}},t.MessagingStrategy.prototype._setMessagingContent=function(t){return this._componentMessaging?this._componentMessaging._setMessagingContent(t):{}},t.DefaultMessagingStrategy=function(t){this.Init(t)},t.ComponentMessaging.registerMessagingStrategy(t.ComponentMessaging._STRATEGY_TYPE.NONE,t.DefaultMessagingStrategy),t.DefaultMessagingStrategy._SELECTOR_STATE_INVALID="oj-invalid",t.DefaultMessagingStrategy._SELECTOR_STATE_WARNING="oj-warning",t.Object.createSubclass(t.DefaultMessagingStrategy,t.MessagingStrategy,"oj.DefaultMessagingStrategy"),t.DefaultMessagingStrategy.prototype.update=function(){t.DefaultMessagingStrategy.superclass.update.call(this);var e=this.GetLauncher(),n=this.GetMaxSeverity(),s=[],o=[],r=!1,a=this.GetComponent().widget();e&&(this.IsInvalid()?(s.push(t.DefaultMessagingStrategy._SELECTOR_STATE_WARNING),o.push(t.DefaultMessagingStrategy._SELECTOR_STATE_INVALID),r=!0):this.HasMessages()&&n===i.SEVERITY_LEVEL.WARNING?(s.push(t.DefaultMessagingStrategy._SELECTOR_STATE_INVALID),o.push(t.DefaultMessagingStrategy._SELECTOR_STATE_WARNING)):(s.push(t.DefaultMessagingStrategy._SELECTOR_STATE_INVALID),s.push(t.DefaultMessagingStrategy._SELECTOR_STATE_WARNING)),a.removeClass(s.join(" ")).addClass(o.join(" ")),this.GetContentElement().attr({"aria-invalid":r}))},t.DefaultMessagingStrategy.prototype.deactivate=function(){this.GetComponent().widget().removeClass(t.DefaultMessagingStrategy._SELECTOR_STATE_INVALID).removeClass(t.DefaultMessagingStrategy._SELECTOR_STATE_WARNING),this.GetContentElement().removeAttr("aria-invalid"),t.DefaultMessagingStrategy.superclass.deactivate.call(this)},t.PlaceholderMessagingStrategy=function(t){this.Init(t)},t.ComponentMessaging.registerMessagingStrategy(t.ComponentMessaging._STRATEGY_TYPE.PLACEHOLDER,t.PlaceholderMessagingStrategy),t.Object.createSubclass(t.PlaceholderMessagingStrategy,t.MessagingStrategy,"oj.PlaceholderMessagingStrategy"),t.PlaceholderMessagingStrategy.prototype.Init=function(e){t.PlaceholderMessagingStrategy.superclass.Init.call(this,e)},t.PlaceholderMessagingStrategy.prototype.activate=function(e){t.PlaceholderMessagingStrategy.superclass.activate.call(this,e),this._refreshPlaceholder()},t.PlaceholderMessagingStrategy.prototype.reactivate=function(e){t.PlaceholderMessagingStrategy.superclass.reactivate.call(this,e),this._refreshPlaceholder()},t.PlaceholderMessagingStrategy.prototype.shouldUpdate=function(t){return!(!t||void 0===t.converterHint)},t.PlaceholderMessagingStrategy.prototype.update=function(){t.PlaceholderMessagingStrategy.superclass.update.call(this),this._refreshPlaceholder()},t.PlaceholderMessagingStrategy.prototype._refreshPlaceholder=function(){var e=this.GetLauncher();if(this.ShowPlaceholderContent()&&e){var n=this.GetConverterHint(),i=n.length?n[0]:"";if(t.StringUtils.isEmptyOrUndefined(i))return;var s={internalMessagingSet:!0};this.GetComponent().option({placeholder:i},{_context:s})}},t.PlaceholderMessagingStrategy.prototype.ShowPlaceholderContent=function(){return this.ShowConverterHint()},t.ComponentValidity=function(t,e){this.Init(t,e)},t.ComponentValidity.isInvalid=function(t){return i.getMaxSeverity(t)>=i.SEVERITY_LEVEL.ERROR},t.Object.createSubclass(t.ComponentValidity,t.Object,"oj.ComponentValidity"),t.ComponentValidity.prototype.Init=function(e,n){t.ComponentValidity.superclass.Init.call(this),this._initialize(e,n)},t.ComponentValidity.prototype.isInvalid=function(){return this._invalid},t.ComponentValidity.prototype.getMessages=function(){return this._messages},t.ComponentValidity.prototype.getMaxSeverity=function(){return this._maxSeverity},t.ComponentValidity.prototype.update=function(t,e){this._initialize(t,e)},t.ComponentValidity.prototype._initialize=function(e,n){this._compValid=e,this._compMessages=n,this._messages=this._getImmediateMessages(),this._maxSeverity=i.getMaxSeverity(this._messages),this._invalid=t.ComponentValidity.isInvalid(this._messages)},t.ComponentValidity.prototype._getImmediateMessages=function(){for(var e=this._compMessages||[],n=[],i=0;i<e.length;i++){var s=e[i];s instanceof t.ComponentMessage&&!s.canDisplay()||n.push(s)}return n},t.CustomElementBridge={},t.CustomElementBridge.proto=Object.create(t.BaseCustomElementBridge.proto),t.CollectionUtils.copyInto(t.CustomElementBridge.proto,{AddComponentMethods:function(e){e.setProperty=function(e,n){var i=t.BaseCustomElementBridge.getInstance(this);i.SaveEarlyPropertySet(e,n)||(i._setEventProperty(this,e,n)||i._validateAndSetCopyProperty(this,e,n,null)||(t.BaseCustomElementBridge.__GetPropertyMetadata(e,t.BaseCustomElementBridge.getProperties(i))?t.CustomElementBridge._getPropertyAccessor(this,e)(n):this[e]=n))},e.getProperty=function(e){var n=t.BaseCustomElementBridge.getInstance(this),i=t.BaseCustomElementBridge.__GetPropertyMetadata(e,t.BaseCustomElementBridge.getProperties(n));if(t.__AttributeUtils.eventListenerPropertyToEventType(e)||!i)return this[e];var s=i?i.extension:null;return s&&s._COPY_TO_INNER_ELEM?n._getCopyProperty(this,e,i):t.CustomElementBridge._getPropertyAccessor(this,e)()},e.focus=function(){var e=t.BaseCustomElementBridge.getInstance(this);if(e._WIDGET_INSTANCE){var n=e._WIDGET_INSTANCE.__getFocusElement();n&&(n!==this?n.focus():HTMLElement.prototype.focus.call(this))}else HTMLElement.prototype.focus.call(this)},e.blur=function(){var e=t.BaseCustomElementBridge.getInstance(this);if(e._WIDGET_INSTANCE){var n=e._WIDGET_INSTANCE.__getFocusElement();n&&(n!==this?n.blur():HTMLElement.prototype.blur.call(this))}else HTMLElement.prototype.focus.call(this)}},BatchedPropertySet:function(e,n){var i,s=Object.keys(n),o={};for(i=0;i<s.length;i++){var r=s[i],a=n[r];this._setEventProperty(e,r,a)||this._validateAndSetCopyProperty(e,r,a,null)||(a=this.ValidatePropertySet(e,r,a),o[r=this.GetAliasForProperty(r)]=a)}var u=t.Components.__GetWidgetConstructor(this._WIDGET_ELEM);if(u)u("option",o);else for(i=0;i<s.length;i++){var l=s[i];e.setProperty(l,n[l])}},CreateComponent:function(e){var i=this._INNER_DOM_FUNCTION;if(this._WIDGET_ELEM=t.CustomElementBridge._getWidgetElement(e,i?i(e):this._EXTENSION._INNER_ELEM),this._WIDGET_ELEM!==e){for(var s=this._EXTENSION._GLOBAL_TRANSFER_ATTRS||[],o=0;o<s.length;o++){var r=s[o];e.hasAttribute(r)&&(this._WIDGET_ELEM.setAttribute(r,e.getAttribute(r)),this._removingTransfer=!0,e.removeAttribute(r))}this._copyProperties()}t.Components.unmarkPendingSubtreeHidden(e);var a=n(this._WIDGET_ELEM),u=n(this._WIDGET_ELEM)[this._EXTENSION._WIDGET_NAME].bind(a);u(this._PROPS),this._WIDGET=u,this._WIDGET_INSTANCE=u("instance"),this._WRITEBACK_PROPS&&this._WIDGET_INSTANCE.__saveWritebackOptions(this._WRITEBACK_PROPS);var l=function(t){return function(n){e.dispatchEvent(new FocusEvent(t,{relatedTarget:n.relatedTarget}))}},c=this._WIDGET_INSTANCE.__getFocusElement();c&&c!==e&&(c.addEventListener("focus",l("focus")),c.addEventListener("blur",l("blur"))),this.__READY_TO_FIRE=!0,this.resolveDelayedReadyPromise()},DefineMethodCallback:function(e,n,i){e[n]=function(){var e=t.BaseCustomElementBridge.getInstance(this),s=i.internalName||n;return e._WIDGET.apply(null,[s].concat([].slice.call(arguments)))}},DefinePropertyCallback:function(e,n,i){var s=i.extension;Object.defineProperty(e,n,{enumerable:!0,get:function(){var e=t.BaseCustomElementBridge.getInstance(this);return i._eventListener?e.GetEventListenerProperty(n):s&&s._COPY_TO_INNER_ELEM?e._getCopyProperty(this,n,i):t.CustomElementBridge._getPropertyAccessor(this,n)()},set:function(e){var s=t.BaseCustomElementBridge.getInstance(this);if(!s.SaveEarlyPropertySet(n,e))if(i._eventListener)s.SetEventListenerProperty(this,n,e);else if(!s._validateAndSetCopyProperty(this,n,e,i)){var r={};if(void 0===e&&(r={_context:{skipEvent:!0}},e=o.getDefaultValue(i),s.__READY_TO_FIRE)){var a=this[n];t.BaseCustomElementBridge.__FirePropertyChangeEvent(this,n,void 0,a,"external")}t.CustomElementBridge._getPropertyAccessor(this,n,r)(e)}}})},GetAttributes:function(e){var n=t.BaseCustomElementBridge.getAttributes(e.properties);return e.extension._GLOBAL_TRANSFER_ATTRS&&(n=n.concat(e.extension._GLOBAL_TRANSFER_ATTRS)),e.extension._WATCHED_ATTRS&&(n=n.concat(e.extension._WATCHED_ATTRS)),n},GetAliasForProperty:function(t){var e=this._EXTENSION._ALIASED_PROPS;return e&&e[t]?e[t]:t},InitializeElement:function(e){t.BaseCustomElementBridge.proto.InitializeElement.call(this,e),this._EXTENSION._CONTROLS_SUBTREE_HIDDEN&&t.Components.markPendingSubtreeHidden(e),t.BaseCustomElementBridge.__InitProperties(e,this._PROPS)},HandleAttributeChanged:function(t,e,n,i){var s=this._EXTENSION._GLOBAL_TRANSFER_ATTRS,o=s&&-1!==s.indexOf(e),r=this._EXTENSION._WATCHED_ATTRS,a=r&&-1!==r.indexOf(e);o&&this._WIDGET_ELEM?this._removingTransfer?this._removingTransfer&&(this._removingTransfer=!1):(this._WIDGET_ELEM.setAttribute(e,i),this._removingTransfer=!0,t.removeAttribute(e)):a&&n!==i&&this._WIDGET_INSTANCE&&this._WIDGET_INSTANCE.__handleWatchedAttribute(e,n,i)},HandleDetached:function(e){t.BaseCustomElementBridge.proto.HandleDetached.call(this,e),t.Components.__GetWidgetConstructor(this._WIDGET_ELEM)&&this._WIDGET_INSTANCE&&this._WIDGET_INSTANCE.__handleDisconnected()},HandleReattached:function(e){t.BaseCustomElementBridge.proto.HandleReattached.call(this,e),this._WIDGET_INSTANCE&&this._WIDGET_INSTANCE.__handleConnected()},InitializeBridge:function(e,n){t.BaseCustomElementBridge.proto.InitializeBridge.call(this,e,n),this._INNER_DOM_FUNCTION=n.innerDomFunction,this._EXTENSION=this.METADATA.extension||{},this._PROPS=this._EXTENSION._INNER_ELEM||this._INNER_DOM_FUNCTION?{_wrapper:e}:{},this._setupPropertyAccumulator(e,this._PROPS),this._processProperties()},_copyProperties:function(){if(this._COPY_ATTRS)for(var e=0;e<this._COPY_ATTRS.length;e++){var n=this._COPY_ATTRS[e],i=t.__AttributeUtils.attributeToPropertyName(n);if(Object.prototype.hasOwnProperty.call(this._PROPS,i)){var s=this._PROPS[i];this._setCopyProperty(n,s),delete this._PROPS[i]}}},_getCopyProperty:function(e,n,i){var s=t.__AttributeUtils.propertyNameToAttribute(n);if(i.extension._ATTRIBUTE_ONLY){if(this._WIDGET_ELEM.hasAttribute(s)){var o,r=this._WIDGET_ELEM.getAttribute(s);try{o=t.__AttributeUtils.coerceValue(e,s,r,i.type)}catch(t){this.throwError(e,"Error parsing attribute value.",t)}return o}return null}return this._WIDGET_ELEM[n]},_processProperties:function(){var e=t.BaseCustomElementBridge.getProperties(this);if(e)for(var n=Object.keys(e),i=0;i<n.length;i++){var s=n[i],o=e[s];o.writeback&&(this._WRITEBACK_PROPS||(this._WRITEBACK_PROPS={}),this._WRITEBACK_PROPS[s]=!0);var r=o.extension;r&&r._COPY_TO_INNER_ELEM&&(this._COPY_ATTRS||(this._COPY_ATTRS=[]),this._COPY_ATTRS.push(s))}},_setCopyProperty:function(t,e){null==e||!1===e?this._WIDGET_ELEM.removeAttribute(t):!0===e?this._WIDGET_ELEM.setAttribute(t,""):this._WIDGET_ELEM.setAttribute(t,e)},_setupPropertyAccumulator:function(e,n){this._WIDGET=function(i,s,o){if("option"===i)return t.BaseCustomElementBridge.__SetProperty(this.GetAliasForProperty.bind(this),n,s,o),n[s];throw this.throwError(e,"Cannot access methods before element is upgraded.")}},_validateAndSetCopyProperty:function(e,n,i,s){var o=t.__AttributeUtils.propertyNameToAttribute(n),r=this._COPY_ATTRS&&-1!==this._COPY_ATTRS.indexOf(o);if(r)if(i=this.ValidatePropertySet(e,n,i),this._WIDGET_ELEM){s||(s=t.BaseCustomElementBridge.__GetPropertyMetadata(n,t.BaseCustomElementBridge.getProperties(this)));var a=this._getCopyProperty(e,n,s);this._setCopyProperty(o,i),t.BaseCustomElementBridge.__FirePropertyChangeEvent(e,n,this._getCopyProperty(e,n,s),a,"external")}else this._PROPS[o]=i;return r},_setEventProperty:function(e,n,i){var s=!1;return t.__AttributeUtils.eventListenerPropertyToEventType(n)&&(e[n]=i,s=!0),s}}),t.CustomElementBridge.getMetadata=function(e){return t.CustomElementBridge._METADATA_MAP[e.toLowerCase()]},t.CustomElementBridge.isKnownEvent=function(e,n){var i=t.BaseCustomElementBridge.getInstance(e);return null!=(i.METADATA.events&&i.METADATA.events[n])},t.CustomElementBridge.isKnownProperty=function(e,n){var i=t.BaseCustomElementBridge.getInstance(e);return null!=(i.METADATA.properties&&i.METADATA.properties[n])},t.CustomElementBridge.getPropertyForAlias=function(e,n){var i=t.BaseCustomElementBridge.getInstance(e)._EXTENSION._COMPONENT_TO_ELEMENT_ALIASES;return i&&i[n]?i[n]:n},t.CustomElementBridge.register=function(e,n){var i=n[t.BaseCustomElementBridge.DESC_KEY_META];i=t.BaseCustomElementBridge.__ProcessEventListeners(i),n[t.BaseCustomElementBridge.DESC_KEY_META]=i,t.CustomElementBridge._METADATA_MAP[e.toLowerCase()]=i;var s=i.extension,o=s&&s._WIDGET_NAME?t.CustomElementBridge.proto:t.DefinitionalElementBridge.proto,r=s._ALIASED_PROPS;r&&(s._COMPONENT_TO_ELEMENT_ALIASES={},Object.keys(r).forEach(function(t){s._COMPONENT_TO_ELEMENT_ALIASES[r[t]]=t}));t.BaseCustomElementBridge.__Register(e,n,o)&&customElements.define(e.toLowerCase(),o.getClass(n))},t.CustomElementBridge._getPropertyAccessor=function(e,n,i){return function(s){var o=t.BaseCustomElementBridge.getInstance(e);return 1===arguments.length?(s=o.ValidatePropertySet(e,n,s),n=o.GetAliasForProperty(n),void o._WIDGET("option",n,s,i)):(n=o.GetAliasForProperty(n),o._WIDGET("option",n))}.bind(e)},t.CustomElementBridge._getWidgetElement=function(e,n){var i=e;if(n){var s=e.firstElementChild;if(s&&s.tagName.toLowerCase()===n)i=s;else{i=document.createElement(n);for(var o=[],r=e.childNodes,a=0;a<r.length;a++)o.push(r[a]);for(e.appendChild(i);o.length;){var u=o.shift();t.BaseCustomElementBridge.getSlotAssignment(u)||i.appendChild(u)}}i.setAttribute("data-oj-internal","")}return i},t.CustomElementBridge._METADATA_MAP={};return t.DataProviderFeatureChecker=class{static isDataProvider(t){return!!t.fetchFirst}static isTreeDataProvider(t){return!!t.getChildDataProvider}},
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
t.DefinitionalElementBridge={},t.DefinitionalElementBridge.proto=Object.create(t.BaseCustomElementBridge.proto),t.CollectionUtils.copyInto(t.DefinitionalElementBridge.proto,{beforePropertyChangedEvent:function(t,e,n){var i=e,s=n.value;n.subproperty&&(i=n.subproperty.path,s=n.subproperty.value),this._partialRender(t,i,s)},AddComponentMethods:function(e){e.refresh=function(){t.BaseCustomElementBridge.getInstance(this)._fullRender(this)},e.setProperty=function(e,n){var i=t.BaseCustomElementBridge.getInstance(this);i.SaveEarlyPropertySet(e,n)||i.SetProperty(this,e,n,this,!0)},e.getProperty=function(e){return t.BaseCustomElementBridge.getInstance(this).GetProperty(this,e,this)},e._propsProto.setProperty=function(t,e){this._BRIDGE.SetProperty(this._ELEMENT,t,e,this,!1)},e._propsProto.getProperty=function(t){return this._BRIDGE.GetProperty(this,t,this)}},CreateComponent:function(e){if(t.Components.unmarkPendingSubtreeHidden(e),!this._INSTANCE&&this._EXTENSION._CONSTRUCTOR){var n=t.__AttributeUtils.getUniqueId();this._CONTEXT={element:e,props:this._PROPS_PROXY,unique:n},this._CONTEXT.uniqueId=e.id?e.id:n,this._INSTANCE=new this._EXTENSION._CONSTRUCTOR(this._CONTEXT),this._INSTANCE.createDOM&&this._INSTANCE.createDOM(),this._INSTANCE.updateDOM&&this._INSTANCE.updateDOM()}this.__READY_TO_FIRE=!0,this.resolveDelayedReadyPromise()},DefineMethodCallback:function(e,n,i){e[n]=function(){var e=t.BaseCustomElementBridge.getInstance(this);if(e._INSTANCE){var s=i.internalName||n;return e._INSTANCE[s].apply(e._INSTANCE,arguments)}}},DefinePropertyCallback:function(e,n,i){function o(e,o){if(!this._BRIDGE.SaveEarlyPropertySet(n,e)){var r=this._BRIDGE._PROPS[n];t.BaseCustomElementBridge.__CompareOptionValues(n,i,e,r)?s.info(t.BaseCustomElementBridge.getElementInfo(this._ELEMENT)+": Ignoring property set for property '"+n+"' with same value."):(o&&(e=this._BRIDGE.ValidatePropertySet(this._ELEMENT,n,e)),i._eventListener?(this._BRIDGE.SetEventListenerProperty(this._ELEMENT,n,e),this._BRIDGE._PROPS[n]=e):(this._BRIDGE._PROPS[n]=e,t.BaseCustomElementBridge.__FirePropertyChangeEvent(this._ELEMENT,n,e,r,o?"external":"internal")))}}function r(){var t=this._BRIDGE._PROPS[n];return void 0===t&&(t=this._BRIDGE._getDefaultValue(n,i),this._BRIDGE._PROPS[n]=t),t}i._derived||t.BaseCustomElementBridge.__DefineDynamicObjectProperty(e._propsProto,n,function(){return r.bind(this)()},function(t){o.bind(this)(t,!1)}),t.BaseCustomElementBridge.__DefineDynamicObjectProperty(e,n,function(){var e=t.BaseCustomElementBridge.getInstance(this);return r.bind(e._PROPS_PROXY)()},function(e){var n=t.BaseCustomElementBridge.getInstance(this);o.bind(n._PROPS_PROXY)(e,!0)})},InitializeElement:function(e){t.BaseCustomElementBridge.proto.InitializeElement.call(this,e),this._EXTENSION._CONTROLS_SUBTREE_HIDDEN&&t.Components.markPendingSubtreeHidden(e),t.BaseCustomElementBridge.__InitProperties(e,e)},InitializePrototype:function(e){t.BaseCustomElementBridge.proto.InitializePrototype.call(this,e),Object.defineProperty(e,"_propsProto",{value:{}})},InitializeBridge:function(e,n){t.BaseCustomElementBridge.proto.InitializeBridge.call(this,e,n),this._EXTENSION=this.METADATA.extension||{},this._PROPS={},e._propsProto&&(this._PROPS_PROXY=Object.create(e._propsProto),this._PROPS_PROXY._BRIDGE=this,this._PROPS_PROXY._ELEMENT=e)},ShouldRemoveDisabled:function(){return!0===this._EXTENSION._SHOULD_REMOVE_DISABLED},_fullRender:function(t){this._INSTANCE&&this._INSTANCE.updateDOM&&this._INSTANCE.updateDOM()},_partialRender:function(t,e,n){if(this._INSTANCE){var i=this._INSTANCE.handlePropertyChanged;(!i||!i(e,n))&&this._INSTANCE.updateDOM&&this._INSTANCE.updateDOM()}},_getDefaultValue:function(t,e){return this._EXTENSION._CONSTRUCTOR?a.getDefaults(this._EXTENSION._CONSTRUCTOR,this.METADATA,!1)[t]:o.getDefaultValue(e)}}),t.GestureUtils={},t.GestureUtils._EVENT_NAMESPACE=".contextMenu",t.GestureUtils.stopDetectContextMenuGesture=function(e){e._clickListener&&(n(e).off(t.GestureUtils._EVENT_NAMESPACE).removeClass("oj-menu-context-menu-launcher")[0].removeEventListener("click",e._clickListener,!0),clearTimeout(e._contextMenuPressHoldTimer),delete e._clickListener,delete e._contextMenuPressHoldTimer),e._touchStartAndMouseDownListener&&(e.removeEventListener("touchstart",e._touchStartAndMouseDownListener,{passive:!1}),delete e._touchStartAndMouseDownListener),e._touchMoveListener&&(e.removeEventListener("touchmove",e._touchMoveListener,{passive:!0}),delete e._touchMoveListener)},t.GestureUtils.startDetectContextMenuGesture=function(e,i){var s,o,r,a,u=t.DomUtils.PRESS_HOLD_THRESHOLD,l=!1,c=!1,g=300,_=null,p=t.GestureUtils._EVENT_NAMESPACE,h=!1;function d(t,s,o){if((l=o)&&n(e).one("touchend"+p,function(){h=!0,setTimeout(function(){h=!1},50)}),"touchstart"===_&&"contextmenu"===t.type||"contextmenu"===_&&"touchstart"===t.type||"keydown"===_&&"contextmenu"===t.type)return"keydown"===_&&"contextmenu"===t.type&&t.preventDefault(),_=null,void clearTimeout(a);t.isDefaultPrevented&&t.isDefaultPrevented()||t.originalEvent&&t.originalEvent.defaultPrevented||t.defaultPrevented||("touchstart"!==t.type&&"touchmove"!==t.type||(t.originalEvent=t),i(t,s),(t.isDefaultPrevented&&t.isDefaultPrevented()||t.defaultPrevented)&&("touchstart"!==t.type&&"contextmenu"!==t.type&&"keydown"!==t.type||(_=t.type,a=setTimeout(function(){_=null},g))))}var E=function(t){l&&(t.preventDefault(),t.stopPropagation(),l=!1)};e._clickListener=E,e.addEventListener("click",E,!0);var m=function(t){if("mousedown"!==t.type||!h){if(l=!1,"touchstart"===t.type&&1===t.touches.length){var n=t.touches[0];o=n.pageX,r=n.pageY,c=!0,s=setTimeout(d.bind(void 0,t,"touch",!0),u),e._contextMenuPressHoldTimer=s}return!0}};e._touchStartAndMouseDownListener=m,e.addEventListener("touchstart",m,{passive:!1});var f=function(t){var e=t.touches[0];return(Math.abs(o-e.pageX)>5||Math.abs(r-e.pageY)>5)&&(c=!1,clearTimeout(s)),!0};e._touchMoveListener=f,e.addEventListener("touchmove",f,{passive:!0}),n(e).on("mousedown"+p,m).on("touchend"+p+" touchcancel"+p,function(){return c=!1,clearTimeout(s),!0}).on("keydown"+p+" contextmenu"+p,function(t){("contextmenu"===t.type||121===t.which&&t.shiftKey)&&d(t,c?"touch":"keydown"===t.type?"keyboard":"mouse",!1);return!0}),t.DomUtils.isTouchSupported()&&n(e).addClass("oj-menu-context-menu-launcher")},n(document).ready(function(){!function(){var t=document.createElement("div");t.style.border="1px solid",t.style.borderColor="red green",t.style.position="absolute",t.style.top="-999px",t.style.backgroundImage="url(data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACwAAAAAAQABAAACAkQBADs=)";var e=document.body;e.appendChild(t);var n=window.getComputedStyle(t),i=n.backgroundImage;n.borderTopColor!==n.borderRightColor&&(null==i||"none"!==i&&"url (invalid-url:)"!==i)||e.classList.add("oj-hicontrast"),e.removeChild(t)}()}),t.Test={},t.Test.ready=!1,t.Test.domNodeForLocator=function(e){var i=e;if(t.StringUtils.isString(e)){var s=e;try{i=JSON.parse(s)}catch(t){return null}}if(i&&i.element){var o=n(i.element);if(o&&o.length>0){delete i.element;var r=i;return t.Components.getNodeBySubId(o[0],r)}}return null},t.Test.getOpenPopupCount=function(){return t.ZOrderUtils.getOpenPopupCount()},t.Test.findOpenPopups=function(){return t.ZOrderUtils.findOpenPopups()},t.Test.compareStackingContexts=function(e,n){return t.ZOrderUtils.compareStackingContexts(e,n)},n.cleanData=(C=n.cleanData,function(e){for(var n=[],i=0;i<e.length;i++){var s=e[i];if(null==s)break;var o=!1,r=t.Components.__GetWidgetConstructor(s);if(r&&!(o=r("instance")._IsCustomElement())){var a=t.Components.getComponentElementByNode(s);o=a&&t.BaseCustomElementBridge.getRegistered(a.tagName)}o||n.push(s)}n.length>0&&C(n)}),t.Components});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojanimation',["ojs/ojcore","jquery","ojs/ojthemeutils","ojs/ojlogger","ojs/ojcomponentcore"],function(t,i,n,e){"use strict";t.AnimationUtils={};t.AnimationUtils;return t.AnimationUtils._getName=function(i,n){if(!t.AnimationUtils._nameMap){t.AnimationUtils._nameMap={};var e=t.AnimationUtils._nameMap,a=i.style;e.backfaceVisibility=void 0!==a.webkitBackfaceVisibility?"webkitBackfaceVisibility":"backfaceVisibility",e.transform=void 0!==a.webkitTransform?"webkitTransform":"transform",e.transformOrigin=void 0!==a.webkitTransformOrigin?"webkitTransformOrigin":"transformOrigin",e.transition=void 0!==a.webkitTransition?"webkitTransition":"transition",e.transitionend=void 0!==a.webkitTransition?"webkitTransitionEnd":"transitionend"}return t.AnimationUtils._nameMap[n]||n},t.AnimationUtils._getElementStyle=function(i,n){return i.style[t.AnimationUtils._getName(i,n)]},t.AnimationUtils._setElementStyle=function(i,n,e){i.style[t.AnimationUtils._getName(i,n)]=e},t.AnimationUtils._animate=function(n,e,a,o,s,l){var r=[].concat(s),m=function(i,m){var f=function(i){var n=0===i.propertyName.indexOf("-webkit-")?i.propertyName.substr(8):i.propertyName;n=t.AnimationUtils._getCamelCasePropName(n);var e=r.indexOf(n);e>-1&&(r.length>1?r.splice(e,1):u())},c=0,d=!1;function u(){d||(c&&(window.cancelAnimationFrame(c),c=0),n.removeEventListener(t.AnimationUtils._getName(n,"transitionend"),f),i&&i(!0),d=!0)}null==a&&(a={}),null==a.css&&(a.css={}),a.css.transition=t.AnimationUtils._createTransitionValue(n,s,o);var p=t.AnimationUtils._saveStyle(n,e,a,o,l||s);t.AnimationUtils._applyState(n,e,p>1),n.addEventListener(t.AnimationUtils._getName(n,"transitionend"),f);var A=o.duration,g=o.delay,h=o._skipPromise;function v(){c=0,t.AnimationUtils._applyState(n,a,p>1)}null==e?v():(o._noReflow||(t.AnimationUtils._x=n.offsetWidth),c=window.requestAnimationFrame(v));var U=t.AnimationUtils._getTotalTiming(A,g);h||setTimeout(u,U+100)};return o._skipPromise?(m(null),null):new Promise(m).then(function(){e&&e.addClass&&i(n).removeClass(e.addClass),a&&a.addClass&&i(n).removeClass(a.addClass),t.AnimationUtils._restoreStyle(n)})},t.AnimationUtils._saveCssValues=function(i,n,e,a){for(var o=Object.keys(n),s=Object.prototype.hasOwnProperty,l=0;l<o.length;l++){var r=o[l];s.call(e,r)||a&&-1!==a.indexOf(r)||(e[r]=t.AnimationUtils._getElementStyle(i,r))}},t.AnimationUtils._saveStyle=function(i,n,e,a,o){var s=i._ojSavedStyle||{},l=n&&n.css?n.css:{},r=e&&e.css?e.css:{},m=o;a&&"all"===a.persist||(m=null),t.AnimationUtils._saveCssValues(i,l,s,m),t.AnimationUtils._saveCssValues(i,r,s,m),i._ojSavedStyle=s;var f=i._ojEffectCount||0;return f+=1,i._ojEffectCount=f,f},t.AnimationUtils._restoreStyle=function(i){var n=i,e=n._ojEffectCount;if(e>1)n._ojEffectCount=e-1;else{var a=n._ojSavedStyle;if(a){for(var o=Object.keys(a),s=0;s<o.length;s++){var l=o[s];t.AnimationUtils._setElementStyle(n,l,a[l])}delete n._ojSavedStyle,delete n._ojEffectCount}}},t.AnimationUtils._getCamelCasePropName=function(t){if(t.indexOf("-")>=0){for(var i="",n=t.split("-"),e=0;e<n.length;e++){var a=n[e];a&&(i?i+=a.charAt(0).toUpperCase()+a.slice(1):i=a)}return i}return t},t.AnimationUtils._getHyphenatedPropName=function(t){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return 0===i.indexOf("webkit")&&(i="-"+i),i},t.AnimationUtils._concatMultiValue=function(i,n,e,a,o){if(n.css[e]){var s=t.AnimationUtils._getElementStyle(i,e);s&&0!==s.indexOf(a)&&(n.css[e]=s+o+n.css[e])}},t.AnimationUtils._splitTransform=function(t){var i=[];if(t&&"none"!==t)for(var n=t,e=n.indexOf(")");e>0;){var a=n.substr(0,e+1);i.push(a.trim()),e=(n=n.slice(e+1)).indexOf(")")}return i},t.AnimationUtils._getTransformFuncName=function(t){var i=t.indexOf("(");return i>=1?t.substr(0,i):t},t.AnimationUtils._applyTransform=function(i,n){for(var e=t.AnimationUtils._getElementStyle(i,"transform"),a=t.AnimationUtils._splitTransform(e),o=t.AnimationUtils._splitTransform(n),s=[],l=0;l<o.length;l++){var r=t.AnimationUtils._getTransformFuncName(o[l]),m=!1;if(r)for(var f=0;f<a.length;f++)0===a[f].indexOf(r+"(")&&(a[f]=o[l],m=!0);m||s.push(o[l])}return(a=a.concat(s)).join(" ")},t.AnimationUtils._applyState=function(n,e,a){if(e){if(e.css){a&&t.AnimationUtils._concatMultiValue(n,e,"transition","all",", "),e.css.transform&&(e.css.transform=t.AnimationUtils._applyTransform(n,e.css.transform));for(var o=e.css,s=Object.keys(o),l=0;l<s.length;l++){var r=s[l];t.AnimationUtils._setElementStyle(n,r,o[r])}}e.addClass&&i(n).addClass(e.addClass),e.removeClass&&i(n).removeClass(e.removeClass)}},t.AnimationUtils._getTimingValue=function(t){var i=parseFloat(t);return isNaN(i)?0:t.indexOf("ms")>-1?i:1e3*i},t.AnimationUtils._getTotalTiming=function(i,n){var e=t.AnimationUtils._getTimingValue(i);return e>0?e+(n?t.AnimationUtils._getTimingValue(n):0):0},t.AnimationUtils._calcCssTime=function(i,n,e){for(var a=i.split(","),o=n.split(","),s=e.split(","),l=a.length,r=o.length,m=s.length,f=0,c=0;c<l;c++){var d=s[c%m],u=o[c%r],p=t.AnimationUtils._getTotalTiming(d,u);f=Math.max(f,p)}return f},t.AnimationUtils._calcEffectTime=function(i){var n,e,a,o=window.getComputedStyle(i);n=o.animationName||o.webkitAnimationName,e=o.animationDelay||o.webkitAnimationDelay,a=o.animationDuration||o.webkitAnimationDuration;var s=t.AnimationUtils._calcCssTime(n,e,a);n=o.transitionProperty||o.webkitTransitionProperty,e=o.transitionDelay||o.webkitTransitionDelay,a=o.transitionDuration||o.webkitTransitionDuration;var l=t.AnimationUtils._calcCssTime(n,e,a);return Math.max(s,l)},t.AnimationUtils._fillEmptyOptions=function(t,i){t.delay=t.delay||i.delay,t.duration=t.duration||i.duration,t.timingFunction=t.timingFunction||i.timingFunction,t.persist=t.persist||i.persist},t.AnimationUtils._triggerEvent=function(t,i,n,e){var a;if(e&&e._trigger)a=!e._trigger(i,null,n);else{var o="oj"+i.substr(0,1).toUpperCase()+i.substr(1),s=new CustomEvent(o,{detail:n,bubbles:!0,cancelable:!0}),l=e||t;l.dispatchEvent&&l.dispatchEvent(s),a=s.defaultPrevented}return a},t.AnimationUtils.startAnimation=function(n,e,a,o){return n=i(n)[0],new Promise(function(s,l){var r=i(n),m="oj-animate-"+e,f=m+"-active",c=!1,d=!1,u=function(){if(c&&d){r.removeClass(m),r.removeClass(f),t.AnimationUtils._restoreStyle(n),s(!0);var i={action:e,element:n};t.AnimationUtils._triggerEvent(n,"animateEnd",i,o)}},p=function(){c=!0,u()},A=function(){d=!0,u()};t.AnimationUtils._saveStyle(n,null,null,null,null);var g={action:e,element:n,endCallback:p};if(!t.AnimationUtils._triggerEvent(n,"animateStart",g,o)){for(var h=[].concat(a),v=[],U={},_=0;_<h.length;_++){var y,x=h[_],C="";null!=x&&"none"!==x&&("string"==typeof x?(C=x,y={}):"object"==typeof x&&(C=x.effect,y=i.extend({},x)),t.AnimationUtils._fillEmptyOptions(y,U),U=i.extend({},y)),C&&t.AnimationUtils[C]&&v.push(t.AnimationUtils[C](n,y))}v.length?Promise.all(v).then(p):p()}r.addClass(m);var b=window.requestAnimationFrame(function(){b=0,r.addClass(f);var i=t.AnimationUtils._calcEffectTime(n);i>0?setTimeout(A,i+100):A()});setTimeout(function(){b&&(window.cancelAnimationFrame(b),b=0,A())},1e3)})},t.AnimationUtils._mergeOptions=function(e,a){return null==t.AnimationUtils._defaultOptions&&(t.AnimationUtils._defaultOptions=n.parseJSONFromFontFamily("oj-animation-effect-default-options")),i.extend({duration:"400ms"},t.AnimationUtils._defaultOptions?t.AnimationUtils._defaultOptions[e]:null,a)},t.AnimationUtils._createTransitionValue=function(i,n,e){var a="";if(n)for(var o=0;o<n.length;o++){var s=t.AnimationUtils._getName(i,n[o]);a+=(o>0?", ":"")+t.AnimationUtils._getHyphenatedPropName(s)+" "+e.duration,e.timingFunction&&(a+=" "+e.timingFunction),e.delay&&(a+=" "+e.delay)}return a},t.AnimationUtils._fade=function(i,n,e,a,o){var s=t.AnimationUtils._mergeOptions(e,n),l={css:{opacity:a}},r={css:{opacity:o}};return s&&(s.startOpacity&&(l.css.opacity=s.startOpacity),s.endOpacity&&(r.css.opacity=s.endOpacity)),t.AnimationUtils._animate(i,l,r,s,["opacity"])},t.AnimationUtils.fadeIn=function(i,n){return t.AnimationUtils._fade(i,n,"fadeIn",0,1)},t.AnimationUtils.fadeOut=function(i,n){return t.AnimationUtils._fade(i,n,"fadeOut",1,0)},t.AnimationUtils.expand=function(i,n){return t.AnimationUtils._expandCollapse(i,n,!0)},t.AnimationUtils.collapse=function(i,n){return t.AnimationUtils._expandCollapse(i,n,!1)},t.AnimationUtils._wrapRowContent=function(t,i){var n,e,a=[],o=t.children,s=[],l=[];for(t._ojSavedHeight=t.style.height,e=0;e<o.length;e++){n=o[e];var r=window.getComputedStyle(n);s.push(r.padding),l.push(r.textAlign),n._ojSavedPadding=n.style.padding}for(e=0;e<o.length;e++){n=o[e];var m=document.createElement("div");m.style.overflow="hidden;";var f=document.createElement("div");for(f.style.display="table-cell",f.style.verticalAlign="middle",f.style.boxSizing="border-box",f.style.height=i,f.style.padding=s[e],f.style.textAlign=l[e],m.appendChild(f);n.firstChild;)f.appendChild(n.firstChild);n.appendChild(m),n.style.padding="0",a.push(m)}return t.style.height="0",a},t.AnimationUtils._unwrapRowContent=function(t){for(var i=t.children,n=0;n<i.length;n++){var e=i[n],a=e.children[0];if(a){var o=a.children[0];if(o)for(;o.firstChild;)e.appendChild(o.firstChild);e.removeChild(a)}e.style.padding=e._ojSavedPadding,delete e._ojSavedPadding}t.style.height=t._ojSavedHeight,delete t._ojSavedHeight},t.AnimationUtils._expandCollapseRow=function(n,e,a){var o,s=n.offsetHeight+"px",l=t.AnimationUtils._wrapRowContent(n,s),r=i.extend({},e);if(a?r.endMaxHeight||(r.endMaxHeight=s):r.startMaxHeight||(r.startMaxHeight=s),r.persist="all",r._noReflow=!0,l.length)for(var m=0;m<l.length;m++)0===m?(r._skipPromise=!1,o=t.AnimationUtils._expandCollapse(l[m],r,a)):(r._skipPromise=!0,t.AnimationUtils._expandCollapse(l[m],r,a));else o=Promise.resolve();return o.then(function(){null!=e&&"all"===e.persist||t.AnimationUtils._unwrapRowContent(n)})},t.AnimationUtils._getSizeLimit=function(t,i,n,e,a){var o=n;if(!o)if(e)o="0";else{var s=a?i.maxWidth:i.maxHeight;o="none"!==s?s:(a?t.offsetWidth:t.offsetHeight)+"px"}return o},t.AnimationUtils._expandCollapse=function(i,n,e){if(i&&"TR"===i.tagName)return t.AnimationUtils._expandCollapseRow(i,n,e);var a=t.AnimationUtils._mergeOptions(e?"expand":"collapse",n),o={css:{}},s={css:{}},l=a.direction||"height",r=o.css,m=s.css,f=window.getComputedStyle(i),c=[];if("both"===l||"height"===l){var d=t.AnimationUtils._getSizeLimit(i,f,a.startMaxHeight,e,!1),u=t.AnimationUtils._getSizeLimit(i,f,a.endMaxHeight,!e,!1);r.maxHeight=d,m.maxHeight=u,c.push("maxHeight")}if("both"===l||"width"===l){var p=t.AnimationUtils._getSizeLimit(i,f,a.startMaxWidth,e,!0),A=t.AnimationUtils._getSizeLimit(i,f,a.endMaxWidth,!e,!0);r.maxWidth=p,m.maxWidth=A,c.push("maxWidth")}r.overflow=a.overflow?a.overflow:"hidden";var g=[].concat(c);return g.push("overflow"),t.AnimationUtils._animate(i,o,s,a,c,g)},t.AnimationUtils.zoomIn=function(i,n){return t.AnimationUtils._zoom(i,n,!0)},t.AnimationUtils.zoomOut=function(i,n){return t.AnimationUtils._zoom(i,n,!1)},t.AnimationUtils._zoom=function(i,n,e){var a,o=t.AnimationUtils._mergeOptions(e?"zoomIn":"zoomOut",n),s={css:{}},l={css:{}},r=o.axis||"both";a="both"===r?"scale":"x"===r?"scaleX":"scaleY";var m=s.css,f=l.css;return m.transform=a+"("+(e?0:1)+") translateZ(0)",f.transform=a+"("+(e?1:0)+") translateZ(0)",m.transformOrigin=o.transformOrigin||"center",t.AnimationUtils._animate(i,s,l,o,["transform"])},t.AnimationUtils.slideIn=function(i,n){return t.AnimationUtils._slide(i,n,!0)},t.AnimationUtils.slideOut=function(i,n){return t.AnimationUtils._slide(i,n,!1)},t.AnimationUtils._slide=function(i,n,e){var a=t.AnimationUtils._mergeOptions(e?"slideIn":"slideOut",n),o={css:{}},s={css:{}},l=a.direction||"start",r="0",m="0",f=o.css,c=s.css;if(a.offsetX||a.offsetY)a.offsetX&&(r=a.offsetX),a.offsetY&&(m=a.offsetY);else{var d="rtl"===t.DomUtils.getReadingDirection();switch(l){case"left":r=(e?i.offsetWidth:-i.offsetWidth)+"px";break;case"right":r=(e?-i.offsetWidth:i.offsetWidth)+"px";break;case"top":m=(e?i.offsetHeight:-i.offsetHeight)+"px";break;case"bottom":m=(e?-i.offsetHeight:i.offsetHeight)+"px";break;case"end":r=(e?-i.offsetWidth:i.offsetWidth)*(d?-1:1)+"px";break;default:r=(e?i.offsetWidth:-i.offsetWidth)*(d?-1:1)+"px"}}return e?(f.transform="translate("+r+","+m+") translateZ(0)",c.transform="translate(0,0) translateZ(0)"):(f.transform="translate(0,0) translateZ(0)",c.transform="translate("+r+","+m+") translateZ(0)"),t.AnimationUtils._animate(i,o,s,a,["transform"])},t.AnimationUtils.ripple=function(n,e){var a=t.AnimationUtils._mergeOptions("ripple",e),o={css:{}},s={css:{}},l=n.offsetWidth,r=n.offsetHeight,m=i("<div>").css({position:"absolute",overflow:"hidden"}),f=i("<div class='oj-animation-effect-ripple oj-animation-rippler'>"),c="static"===window.getComputedStyle(n).position?{left:n.offsetLeft,top:n.offsetTop}:{left:0,top:0};n.insertBefore(m[0],n.firstChild),m.css({left:c.left+"px",top:c.top+"px",width:l+"px",height:r+"px"}),m.prepend(f);var d=o.css,u=s.css;return t.AnimationUtils._setRippleOptions(d,f,m,a),d.transform="scale(0) translateZ(0)",d.opacity=a.startOpacity||f.css("opacity"),u.transform="scale(1) translateZ(0)",u.opacity=a.endOpacity||0,a.persist="all",t.AnimationUtils._animate(f[0],o,s,a,["transform","opacity"]).then(function(){m.remove()})},t.AnimationUtils._setRippleOptions=function(i,n,e,a){var o=i,s=n.width(),l=e.width(),r=e.height();if(a.diameter){var m=a.diameter,f=parseInt(m,10);isNaN(f)||(s="%"===m.charAt(m.length-1)?Math.floor(Math.min(l,r)*(f/100)):f,o.width=s+"px",o.height=s+"px")}var c,d="static"===e.css("position")?e.position():{left:0,top:0};null!=(c=t.AnimationUtils._calcRippleOffset(a.offsetX,s,l,d.left))&&(o.left=c+"px"),null!=(c=t.AnimationUtils._calcRippleOffset(a.offsetY,s,r,d.top))&&(o.top=c+"px"),a.color&&(o.backgroundColor=a.color)},t.AnimationUtils._calcRippleOffset=function(t,i,n,e){var a,o=t||"50%",s=parseInt(o,10);return isNaN(s)||(a="%"===o.charAt(o.length-1)?n*(s/100)-i/2:s-i/2,a=Math.floor(a+e)),a},t.AnimationUtils._removeRipple=function(n,a){var o=a||{},s=o.removeEffect||"fadeOut",l=i(".oj-animation-rippler",n);if(0!==l.length)return s in{fadeOut:1,collapse:1,zoomOut:1,slideOut:1}?t.AnimationUtils[s](l,o).then(function(){l.remove()}):l.remove();e.warn("No rippler so returning")},t.AnimationUtils._calcBackfaceAngle=function(t){var i,n=t.match(/^([+-]?\d*\.?\d*)(.*)$/),a=parseFloat(n[1]),o=n[2];switch(o){case"deg":i=a-180+o;break;case"grad":i=a-200+o;break;case"rad":i=a-3.1416+o;break;case"turn":i=a-.5+o;break;default:e.error("Unknown angle unit in flip animation: "+o)}return i},t.AnimationUtils._flip=function(n,e,a,o,s){if(e&&"children"===e.flipTarget){var l,r=[],m=i(n).children(),f=i.extend({},e);delete f.flipTarget;var c=i.extend({},f);c.startAngle=t.AnimationUtils._calcBackfaceAngle(e.startAngle||o),c.endAngle=t.AnimationUtils._calcBackfaceAngle(e.endAngle||s);for(var d=0;d<m.length;d++)l=i(m[d]).hasClass("oj-animation-backface")?c:f,r.push(t.AnimationUtils._flip(m[d],l,a,o,s));return Promise.all(r)}var u,p={},A={},g={css:p},h={css:A},v="rotateY(",U="2000px",_="hidden",y="center";(e=t.AnimationUtils._mergeOptions(a,e))&&("x"===e.axis&&(v="rotateX("),e.startAngle&&(o=e.startAngle),e.endAngle&&(s=e.endAngle),e.perspective&&(U=e.perspective),e.backfaceVisibility&&(_=e.backfaceVisibility),e.transformOrigin&&(y=e.transformOrigin)),u="perspective("+U+") "+v;return p.transform=u+o+")",p.backfaceVisibility=_,p.transformOrigin=y,A.transform=u+s+")",t.AnimationUtils._animate(n,g,h,e,["transform"],["transform","backfaceVisibility","transformOrigin"])},t.AnimationUtils.flipIn=function(i,n){return t.AnimationUtils._flip(i,n,"flipIn","-180deg","0deg")},t.AnimationUtils.flipOut=function(i,n){return t.AnimationUtils._flip(i,n,"flipOut","0deg","180deg")},t.AnimationUtils.addTransition=function(i,n){var e=t.AnimationUtils._mergeOptions("addTransition",n);return t.AnimationUtils._animate(i,null,null,e,e.transitionProperties)},t.AnimationUtils._createHeroParent=function(){var t=document.createElement("div"),i=document.body;i.appendChild(t),t.style.position="absolute",t.style.height=i.offsetHeight+"px",t.style.width=i.offsetWidth+"px",t.style.left=i.offsetLeft+"px",t.style.top=i.offsetTop+"px",t.style.zIndex=2e3,t.className="oj-animation-host-viewport";var n=document.createElement("div");return n.className="oj-animation-host",t.appendChild(n),n},t.AnimationUtils._removeHeroParent=function(t){if(t){var i=t.parentNode;i&&i.parentNode&&i.parentNode.removeChild(i)}},t.AnimationUtils._defaultHeroCreateClonedElement=function(t){return t.fromElement.cloneNode(!0)},t.AnimationUtils._defaultHeroHideFromAndToElements=function(t){var i=t.fromElement,n=t.toElement;i.style.visibility="hidden",n.style.visibility="hidden"},t.AnimationUtils._defaultHeroAnimateClonedElement=function(i){return new Promise(function(n){var e=i.clonedElement.style;e.transformOrigin="left top",e.transform="translate(0, 0) scale(1, 1)",requestAnimationFrame(function(){e.transitionDelay=i.delay,e.transitionDuration=i.duration,e.transitionTimingFunction=i.timingFunction,e.transitionProperty="transform";var a="translate("+i.translateX+"px,"+i.translateY+"px)";a+=" scale("+i.scaleX.toFixed(2)+","+i.scaleY.toFixed(2)+")",e.transform=a;var o=t.AnimationUtils._getTimingValue(i.delay)+t.AnimationUtils._getTimingValue(i.duration);setTimeout(function(){n()},o)})})},t.AnimationUtils._defaultHeroShowToElement=function(t){t.toElement.style.visibility="visible"},t.AnimationUtils._doAnimateHero=function(i,n,e,a,o,s){var l=document.querySelector(n);if(null!=l){var r=i.getBoundingClientRect(),m=l.getBoundingClientRect(),f=m.left-r.left,c=m.top-r.top,d=m.width/r.width,u=m.height/r.height,p={fromElement:i,toElement:l,clonedElement:null,translateX:f,translateY:c,scaleX:d,scaleY:u,toElementElapsedTime:a,delay:e.delay,duration:e.duration,timingFunction:e.timingFunction},A=e.createClonedElement(p);p.clonedElement=A;var g=t.AnimationUtils._createHeroParent(),h=g.getBoundingClientRect();g.appendChild(A),A.style.position="absolute",A.style.left=r.left-h.left+"px",A.style.top=r.top-h.top+"px",e.hideFromAndToElements(p),A.style.visibility="visible",e.animateClonedElement(p).then(function(){v(),o()}).catch(function(t){v(),s(t)})}else{a+100>e.toElementWaitTime?s("toElement not found in DOM after toElementWaitTime has expired"):setTimeout(function(){t.AnimationUtils._doAnimateHero(i,n,e,a+100,o,s)},100)}function v(){e.showToElement(p),t.AnimationUtils._removeHeroParent(g)}},t.AnimationUtils.animateHero=function(i,n){var e=i,a={toElementWaitTime:5e3,createClonedElement:t.AnimationUtils._defaultHeroCreateClonedElement,hideFromAndToElements:t.AnimationUtils._defaultHeroHideFromAndToElements,animateClonedElement:t.AnimationUtils._defaultHeroAnimateClonedElement,showToElement:t.AnimationUtils._defaultHeroShowToElement,delay:"0s",duration:"400ms",timingFunction:"ease"};return Object.assign(a,n),new Promise(function(i,o){e?n.toElementSelector?t.AnimationUtils._doAnimateHero(e,n.toElementSelector,a,0,i,o):o("No options.toElementSelector specified"):o("No element specified")})},t.AnimationUtils});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojmoduleanimations',["ojs/ojcore","knockout","jquery","ojs/ojthemeutils","ojs/ojanimation"],function(n,e,t,i,o){"use strict";n.ModuleAnimations={};n.ModuleAnimations;return n.ModuleAnimations._addContainedElements=function(n,t){for(var i=e.virtualElements.firstChild(n);i;)1===i.nodeType?t.push(i):8===i.nodeType&&this._addContainedElements(i,t),i=e.virtualElements.nextSibling(i)},n.ModuleAnimations._cacheVirtualViewRoot=function(n,e){n._ojOldRoot=e},n.ModuleAnimations._getVirtualViewRoot=function(n){return n._ojOldRoot},n.ModuleAnimations._defaultCanAnimate=function(e){if(e.isInitial)return!1;if(1===e.node.nodeType)return!0;if(8===e.node.nodeType){var t=[];if(n.ModuleAnimations._addContainedElements(e.node,t),t&&1===t.length)return n.ModuleAnimations._cacheVirtualViewRoot(e,t[0]),!0}return!1},n.ModuleAnimations._getOldView=function(e){var t;return 1===e.node.nodeType?t=e.node:8===e.node.nodeType&&(t=n.ModuleAnimations._getVirtualViewRoot(e)),t},n.ModuleAnimations._createViewParent=function(n){var e=t(document.createElement("div")),i={position:"absolute",height:n.offsetHeight+"px",width:n.offsetWidth+"px",left:n.offsetLeft+"px",top:n.offsetTop+"px"};e.appendTo(n.offsetParent),e.css(i),e.addClass("oj-animation-host-viewport");var o=document.createElement("div");return o.className="oj-animation-host",e.append(o),o},n.ModuleAnimations.createAnimation=function(e,t,i){return{canAnimate:n.ModuleAnimations._defaultCanAnimate,prepareAnimation:function(o){var a={},l=n.ModuleAnimations._getOldView(o);return t&&!i&&(a.newViewParent=n.ModuleAnimations._createViewParent(l)),e&&(a.oldViewParent=n.ModuleAnimations._createViewParent(l)),t&&i&&(a.newViewParent=n.ModuleAnimations._createViewParent(l)),a},animate:function(i){var a=i.oldViewParent,l=i.newViewParent,m=[];return a&&e&&("function"==typeof e?m.push(e(a)):m.push(o.startAnimation(a,"close",e))),l&&t&&("function"==typeof t?m.push(t(l)):m.push(o.startAnimation(l,"open",t))),Promise.all(m).then(function(){n.ModuleAnimations._postAnimationProcess(i)}).catch(function(){n.ModuleAnimations._postAnimationProcess(i)})}}},n.ModuleAnimations._removeViewParent=function(n,e){var t=n[e];if(t){var i=t.parentNode;i&&i.parentNode&&i.parentNode.removeChild(i)}},n.ModuleAnimations._postAnimationProcess=function(e){e.removeOldView(),e.insertNewView(),n.ModuleAnimations._removeViewParent(e,"newViewParent"),n.ModuleAnimations._removeViewParent(e,"oldViewParent")},n.ModuleAnimations._getModuleEffect=function(e){return null==n.ModuleAnimations._moduleEffects&&(n.ModuleAnimations._moduleEffects=i.parseJSONFromFontFamily("oj-animation-module-effects")),n.ModuleAnimations._moduleEffects?n.ModuleAnimations._moduleEffects[e]:null},n.ModuleAnimations._getImplementation=function(e){var t=n.ModuleAnimations._getModuleEffect(e);return t?n.ModuleAnimations.createAnimation(t.oldViewEffect,t.newViewEffect,t.newViewOnTop):null},n.ModuleAnimations._getNavigateMethod=function(e,t){return null==n.ModuleAnimations._navigateMethods&&(n.ModuleAnimations._navigateMethods=i.parseJSONFromFontFamily("oj-animation-navigate-methods")),n.ModuleAnimations._navigateMethods?n.ModuleAnimations._navigateMethods[t]:null},n.ModuleAnimations._navigateCanAnimate=function(e,t){var i=n.ModuleAnimations._getNavigateMethod(e,t);return!!n.ModuleAnimations[i]&&(null==n.ModuleAnimations[i].canAnimate||n.ModuleAnimations[i].canAnimate(e))},n.ModuleAnimations._navigatePrepareAnimation=function(e,t){var i=n.ModuleAnimations._getNavigateMethod(e,t);return n.ModuleAnimations[i]&&n.ModuleAnimations[i].prepareAnimation?n.ModuleAnimations[i].prepareAnimation(e):null},n.ModuleAnimations._navigateAnimate=function(e,t){var i=n.ModuleAnimations._getNavigateMethod(e,t);return n.ModuleAnimations[i]&&n.ModuleAnimations[i].animate?n.ModuleAnimations[i].animate(e):Promise.resolve()},n.ModuleAnimations._getNavigateImplementation=function(e){return{canAnimate:function(t){return n.ModuleAnimations._navigateCanAnimate(t,e)},prepareAnimation:function(t){return n.ModuleAnimations._navigatePrepareAnimation(t,e)},animate:function(t){return n.ModuleAnimations._navigateAnimate(t,e)}}},n.ModuleAnimations.coverLeft=n.ModuleAnimations._getImplementation("coverLeft"),n.ModuleAnimations.coverRight=n.ModuleAnimations._getImplementation("coverRight"),n.ModuleAnimations.revealLeft=n.ModuleAnimations._getImplementation("revealLeft"),n.ModuleAnimations.revealRight=n.ModuleAnimations._getImplementation("revealRight"),n.ModuleAnimations.coverStart="rtl"===n.DomUtils.getReadingDirection()?n.ModuleAnimations.coverRight:n.ModuleAnimations.coverLeft,n.ModuleAnimations.revealEnd="rtl"===n.DomUtils.getReadingDirection()?n.ModuleAnimations.revealLeft:n.ModuleAnimations.revealRight,n.ModuleAnimations.coverUp=n.ModuleAnimations._getImplementation("coverUp"),n.ModuleAnimations.revealDown=n.ModuleAnimations._getImplementation("revealDown"),n.ModuleAnimations.zoomIn=n.ModuleAnimations._getImplementation("zoomIn"),n.ModuleAnimations.zoomOut=n.ModuleAnimations._getImplementation("zoomOut"),n.ModuleAnimations.fade=n.ModuleAnimations._getImplementation("fade"),n.ModuleAnimations.pushStart=n.ModuleAnimations._getImplementation("pushStart"),n.ModuleAnimations.pushEnd=n.ModuleAnimations._getImplementation("pushEnd"),n.ModuleAnimations.navChild=n.ModuleAnimations._getNavigateImplementation("navChild"),n.ModuleAnimations.navParent=n.ModuleAnimations._getNavigateImplementation("navParent"),n.ModuleAnimations.drillIn=n.ModuleAnimations.navChild,n.ModuleAnimations.drillOut=n.ModuleAnimations.navParent,n.ModuleAnimations.navSiblingEarlier=n.ModuleAnimations._getNavigateImplementation("navSiblingEarlier"),n.ModuleAnimations.navSiblingLater=n.ModuleAnimations._getNavigateImplementation("navSiblingLater"),n.ModuleAnimations.switcher=function(e){return new function(){var t;function i(n){return function(e){return t[n].call(t,e)}}var o=this;this.canAnimate=function(a){var l=e(a);if(!(t=null==l?null:n.ModuleAnimations[l]))return!1;for(var m=["prepareAnimation","animate"],u=0;u<m.length;u++){var r=m[u];o[r]=i(r)}return i("canAnimate")(a)}}},n.ModuleAnimations});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojmodulerouter-adapter',["knockout","ojs/ojmodule-element-utils","ojs/ojmoduleanimations","ojs/ojlogger"],function(e,t,n,i){"use strict";return function(r,a){var o=r,l=a||{},u=null,s=null,c=null,v=e.observable({view:[],viewModel:null});function d(e){return e?l.pathKey?e.detail[l.pathKey]:e.path:null}var f,m=l.animationCallback?(f=function(e){var t={node:e.node,previousViewModel:e.oldViewModel,viewModel:e.newViewModel,previousState:u,state:s};return l.animationCallback(t)},new function(){var e;function t(t){return function(n){return e[t].call(e,n)}}this.canAnimate=function(i){var r=f(i);return!!(e="string"==typeof r?n[r]:r)&&(["prepareAnimation","animate"].forEach(function(e){this[e]=t(e)}.bind(this)),t("canAnimate")(i))}.bind(this)}):null;o.beforeStateChange.subscribe(function(e){var t=v().viewModel,n=t&&t.canExit?t.canExit():Promise.resolve();e.accept(n)}),o.currentState.subscribe(function(e){var n,r=d(e?e.state:null);if(r){if(r===d(s)&&v().viewModel&&v().viewModel.parametersChanged)return v().viewModel.parametersChanged(e.state.params),void(s=e.state);var a=l.viewPath||"views/",f=l.viewModelPath||"viewModels/";n=t.createConfig({require:l.require,viewPath:a+r+".html",viewModelPath:f+r,params:{parentRouter:o,params:e.state.params,router:o,routerState:e.state}})}else n=Promise.resolve({view:[],viewModel:null});e.complete(n),c=n,n.then(function(t){c===n&&(u=s,s=e.state,v(t))},function(e){i.error("Error creating oj-module config : ",e)})});var w={};return Object.defineProperties(w,{koObservableConfig:{get:function(){return v}},animation:{get:function(){return m}}}),w}});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojobservable',[],function(){"use strict";var e=function(e){this.observers=[],this._value=e};e.prototype.subscribe=function(e,s,i){let r=e;"function"==typeof r?r={next:e,error:s,complete:i}:"object"!=typeof r&&(r={}),this.observers.push(r);let o=new t(this,r);return o&&!o.closed&&r.next(this._value),o},e.prototype.next=function(e){this._value=e;let{observers:t}=this,s=t.length,i=t.slice();for(let t=0;t<s;t++)i[t].next(e)};var t=function(e,t){this.subject=e,this.subscriber=t,this.closed=!1};return t.prototype.unsubscribe=function(){if(this.closed)return;this.closed=!0;let e=this.subject.observers;if(this.subject=null,!e||0===e.length)return;let t=e.indexOf(this.subscriber);-1!==t&&e.splice(t,1)},t.prototype.closed=function(){return this.closed},{BehaviorSubject:e}});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojurlpathadapter',["ojs/ojcore","ojs/ojlogger"],function(t,n){"use strict";return function(){function t(t){var n=t;return n&&!n.match(/\/$/)&&(n+="/"),n}function n(t){var n=[];return Object.keys(t).sort().forEach(function(o){var r=t[o];null!=r&&n.push(";"+o+"="+function(t){return encodeURIComponent(t)}(r))}),n.join("")}function o(t){var n=t.split(";"),o={path:r(n.shift()),params:{}};return n.forEach(function(t){if(t){var n=t.split("=");o.params[n[0]]=r(n[1])}}),o}function r(t){return decodeURIComponent(t)}function e(n){this._baseUrl=t(void 0!==n?n:document.location.pathname)}return e.prototype.getRoutesForUrl=function(t){var n=void 0!==t?t:document.location.pathname,r=this._baseUrl,e=n.substring(r.length).split("/"),u=[];return e.forEach(function(t){var n=o(t);u.push(n)}),u.length||u.push(o("")),u},e.prototype.getUrlForRoutes=function(o){var r=[];o.forEach(function(t){let o=n(t.params||{});r.push(t.path+o)});var e=this._baseUrl,u=r.join("/");return u&&(e=t(e)),e+u+document.location.search},e}()});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojcorerouter',["ojs/ojcore","ojs/ojobservable","ojs/ojurlpathadapter","ojs/ojlogger"],function(t,e,r,i){"use strict";return function(){var t,o,n=[];function s(i,n,s){if(n=n||{},this._name="/",this._offset=0,this.beforeStateChange=new e.BehaviorSubject({accept:function(){}}),this.currentState=new e.BehaviorSubject({complete:function(){}}),this._noHistory=s&&s._noHistory||"skip"===n.history,this._noHistoryOffset=0,this._parentRouter=s,s)this._name=s._name+s._activeState.path+"/",this._offset=s._offset+1,s._noHistory&&(this._noHistoryOffset=s._noHistoryOffset+1);else{if(t)throw Error("Only one root CoreRouter instance may exist at a time");t=this,o=n.urlAdapter||new r,this._setupNavigationListener()}this._configure(i)}return s.prototype._configure=function(t){this._states=[],t&&t.forEach(function(t){var e=t.path,r=e;if("string"==typeof e)r=new RegExp("^"+e+"$");else if(!(e instanceof RegExp))throw Error("Router path must be a string or RegExp");var i={path:e,detail:t.detail,params:{},_match:r,_redirect:t.redirect};this._states.push(i)},this)},s.prototype.sync=function(){var t=this._getRouteSegment();return this._execute(t||{path:"",params:{}}).then(t=>{var e=t,r=this._childRouter;return r?e=r.sync():this._noHistory||(n=[]),e})},s.prototype._getRouteSegment=function(){var t;this._noHistory?t=n[this._noHistoryOffset]:t=o.getRoutesForUrl()[this._offset];return t},s.prototype.go=function(){var e,r=Array.prototype.slice.call(arguments,0);if(r.forEach(function(t){var r=t.params;r&&Object.keys(r).forEach(function(t){"object"==typeof r[t]&&(e=Promise.reject('"params" object may only contain scalar values'))})}),!e){const s=r.map(t=>t.path).join("/"),a=function(){let e=t;const r=[];let i;for(;e;)(i=e._activeState)&&r.push({path:i.path||"",params:i.params}),e=e._childRouter;return r}(),h=o.getUrlForRoutes(a),c=a.slice(0,this._offset).concat(r),u=o.getUrlForRoutes(c);this._noHistory?(i.info(`Navigating non-history tracking router(${this._name}) to ${s}`),n=n.slice(0,this._noHistoryOffset).concat(r)):h!==u&&(i.info(`Navigating router(${this._name}) to ${s}`),window.history.pushState(null,"path",u)),e=this.sync()}return e},s.prototype._execute=function(t){var e,r=this._getPendingState(t);return r?(e=this._prepublish(r),this._isCurrentState(r)||(e=e.then(function(){Promise.resolve(!1);return this._publish(r)}.bind(this)))):e=Promise.reject("Router("+this._name+') has no state matching "'+t.path+'"'),e},s.prototype._prepublish=function(e){var r=[];this.beforeStateChange.next({state:e,accept:function(t){r.push(t)}});var n=Promise.all(r).then(function(){return e}),s=this._childRouter;return s&&(n=n.then(function(){return s._prepublish(e)})),n=n.then(function(t){return n!==this._activeSync?Promise.reject():t}.bind(this),function(e){if(n===this._activeSync){i.info("Router sync failed: "+e);var r=function(){for(var e=t,r=[];e;){var i=e._activeState;r.push(i),e=e._childRouter}return o.getUrlForRoutes(r)}();window.history.replaceState(null,"path",r)}return Promise.reject(e)}.bind(this)),this._activeSync=n,n},s.prototype._publish=function(t){var e=[];return this._childRouter=null,this._activeState=t,this.currentState.next({state:t,complete:function(t){e.push(t)}}),Promise.all(e).then(()=>t)},s.prototype._setupNavigationListener=function(){this===t&&(this._popstateHandler=this.sync.bind(this),window.addEventListener("popstate",this._popstateHandler,!1))},s.prototype._isCurrentState=function(t){var e,r,i=this._activeState;return!!i&&(e=i,r=t,o.getUrlForRoutes([e])===o.getUrlForRoutes([r]))},s.prototype._getPendingState=function(t){var e,r,i=t.path,o=t.params||{};return this._states.some(function(t){return!!t._match.test(i)&&(e=t,!0)}),e&&e._redirect&&(i=e._redirect,e=this._getPendingState({path:i,params:o})),e&&(r={path:i,detail:e.detail,params:o,_match:e._match,_redirect:e._redirect},Object.freeze(r)),r},s.prototype.createChildRouter=function(t,e){var r=this._activeState;if(!r)throw Error("Router("+this._name+") has no current state. Call sync() on the router first.");if(this._childRouter)throw Error("Router("+this._name+") state("+r.path+") already has a child router");var i=new s(t,e,this);return this._childRouter=i,i},s.prototype.destroy=function(){this===t&&(window.removeEventListener("popstate",this._popstateHandler,!1),t=null)},s}()});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojurlparamadapter',["ojs/ojcore","ojs/ojurlpathadapter","ojs/ojlogger"],function(t,r,n){"use strict";return function(){var t="ojr",n="_ojCoreRouter";function o(){var t=document.location.search?document.location.search.substring(1):"",r=[];return t&&t.split("&").forEach(function(t){var n=t.split("=");r.push(n)}),r}function e(){var t,r=o().find(function(t){return t[0]===n});return r&&(t=r[1],decodeURIComponent(t))}function u(t){var r=encodeURIComponent(t),e=o(),u=e.find(function(t){return t[0]===n});return u?u[1]=r:e.push([n,r]),e.map(function(t){return t[0]+"="+t[1]}).join("&")}function i(){this._pathAdapter=new r(""),void 0===e()&&(n=t)}return i.prototype.getRoutesForUrl=function(){var t=e()||"";return this._pathAdapter.getRoutesForUrl(t)},i.prototype.getUrlForRoutes=function(t){var r=this._pathAdapter.getUrlForRoutes(t);return r.indexOf("?")>-1&&(r=r.substring(0,r.indexOf("?"))),"?"+u(r)},i}()});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojkeysetimpl',["ojs/ojcore"],function(t){"use strict";return function(e){this.NOT_A_KEY={},this.has=function(t){return this.get(t)!==this.NOT_A_KEY},this.get=function(e){var i,s,n=this.NOT_A_KEY,o=this;if(this._keys.has(e))return e;if(e!==Object(e))return this.NOT_A_KEY;if("function"==typeof Symbol&&"function"==typeof Set.prototype[Symbol.iterator])for(s=(i=this._keys[Symbol.iterator]()).next();!s.done;){if(t.KeyUtils.equals(s.value,e))return s.value;s=i.next()}else this._keys.forEach(function(i){n===o.NOT_A_KEY&&t.KeyUtils.equals(i,e)&&(n=i)});return n},this.InitializeWithKeys=function(t){this._keys=new Set(t)},this.InitializeWithKeys(e)}});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojset',["ojs/ojcore","ojs/ojkeysetimpl"],function(e,t){return class{constructor(e){this.initialKeys=e;let s=this;this._set=new Set,this._keyset=new t,e&&e.forEach(function(e){s.add(e)}),Object.defineProperty(this,"size",{get:function(){return this._set.size}}),this[Symbol.iterator]=function(){return this._set[Symbol.iterator]()}}clear(){this._set.clear(),this._keyset._keys.clear()}delete(e){var t=this._keyset.get(e);return t!==this._keyset.NOT_A_KEY&&(this._keyset._keys.delete(t),this._set.delete(t))}forEach(e,t){this._set.forEach(e,t)}keys(){return this._set.keys()}values(){return this._set.values()}entries(){return this._set.entries()}has(e){return this._keyset.has(e)}add(e){return this._keyset.get(e)===this._keyset.NOT_A_KEY&&(this._keyset._keys.add(e),this._set.add(e)),this}get[Symbol.toStringTag](){return Set[Symbol.toStringTag]()}}});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojmap',["ojs/ojcore","ojs/ojkeysetimpl"],function(e,t){"use strict";var s=function(){this._map=new Map,this._keyset=new t},i=s.prototype;return Object.defineProperty(i,"size",{get:function(){return this._map.size}}),i.clear=function(){this._map.clear(),this._keyset._keys.clear()},i.delete=function(e){var t=this._keyset.get(e);return t!==this._keyset.NOT_A_KEY&&(this._keyset._keys.delete(t),this._map.delete(t))},i.forEach=function(e){this._map.forEach(e)},i.get=function(e){var t=this._keyset.get(e);return this._map.get(t)},i.has=function(e){return this._keyset.has(e)},i.set=function(e,t){var s=this._keyset.get(e);return s===this._keyset.NOT_A_KEY?(this._keyset._keys.add(e),this._map.set(e,t)):this._map.set(s,t),this},s});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojeventtarget',["ojs/ojcore"],function(e){"use strict";class t{addEventListener(e,t){this._eventListeners||(this._eventListeners=[]),this._eventListeners.push({type:e.toLowerCase(),listener:t})}removeEventListener(e,t){if(this._eventListeners){let s;for(s=this._eventListeners.length-1;s>=0;s--)this._eventListeners[s].type==e&&this._eventListeners[s].listener==t&&this._eventListeners.splice(s,1)}}dispatchEvent(e){if(this._eventListeners){var t,s=this._eventListeners.slice(0);for(t=0;t<s.length;t++){var i=s[t];if(e&&e.type&&i.type==e.type.toLowerCase()&&!1===i.listener.apply(this,[e]))return!1}}return!0}static applyMixin(e){[t].forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(s=>{"constructor"!==s&&(e.prototype[s]=t.prototype[s])})})}}e.EventTargetMixin=t;e.GenericEvent=class{constructor(e,t){this.type=e,this.options=t,null!=t&&(this.detail=t.detail)}}});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdataprovider',["ojs/ojcore","ojs/ojeventtarget"],function(t){"use strict";var e,r,i=t.GenericEvent;
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */!function(t){let e;!function(t){t.$co="$co",t.$eq="$eq",t.$ew="$ew",t.$pr="$pr",t.$gt="$gt",t.$ge="$ge",t.$lt="$lt",t.$le="$le",t.$ne="$ne",t.$regex="$regex",t.$sw="$sw"}(e=t.AttributeOperator||(t.AttributeOperator={}))}(e||(e={})),t.AttributeFilterOperator=e,t.AttributeFilterOperator.AttributeOperator=e.AttributeOperator,function(t){let e;!function(t){t.$and="$and",t.$or="$or"}(e=t.CompoundOperator||(t.CompoundOperator={}))}(r||(r={})),t.CompoundFilterOperator=r,t.CompoundFilterOperator.CompoundOperator=r.CompoundOperator;
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
class a{constructor(){this._handleMutationAdd=function(e){var r,i;let n=this,s=e[a._BEFOREKEYS],o=e[a._KEYS],l=[];o.forEach(function(t){l.push(t)});let f=e[a._DATA],u=e[a._METADATA],c=e[a._INDEXES];if(l&&l.length>0)if(c)l.forEach(function(t,e){n._items.splice(c[e],0,new n.Item(u[e],f[e]))});else if(s){let o,c,h,p,_,y=Object.assign([],s),d=Object.assign(new Set,e[a._KEYS]),m=Object.assign([],e[a._DATA]),g=Object.assign([],e[a._METADATA]),E=[];for(o=0;o<s.length;o++){if(h=s[o],_=!0,null!=h){for(c=0;c<l.length;c++)if(t.Object.compareValues(l[c],h)){_=!1;break}if(_)for(c=0;c<n._items.length;c++)if(t.Object.compareValues(null===(i=null===(r=n._items[c])||void 0===r?void 0:r.metadata)||void 0===i?void 0:i.key,h)){_=!1;break}}else _=!1;_&&E.push(h)}let b=s.length;for(;b>0;){for(o=0;o<s.length;o++)if(p=s[o],E.indexOf(p)>=0){E.push(p);break}b--}for(o=y.length-1;o>=0;o--)E.indexOf(y[o])>=0&&(delete y[o],d.delete(y[o]),delete m[o],delete g[o]);y.forEach(function(e,r){var i,a;if(null===e)n._items.push(new n.Item(u[r],f[r]));else for(o=0;o<n._items.length;o++)if(t.Object.compareValues(null===(a=null===(i=n._items[o])||void 0===i?void 0:i.metadata)||void 0===a?void 0:a.key,e)){n._items.splice(o,0,new n.Item(u[r],f[r]));break}})}else if(n._fetchParams&&null!=n._fetchParams.sortCriteria){let t=n._fetchParams.sortCriteria;if(t){let e,r,i,a=n._getSortComparator(t),s=[];f.forEach(function(t,o){for(e=0;e<n._items.length;e++)if(r=n._items[e].data,(i=a(t,r))<0){n._items.splice(e,0,new n.Item(u[o],f[o])),s.push(o);break}}),f.forEach(function(t,e){s.indexOf(e)<0&&n._items.push(new n.Item(u[e],f[e]))})}}else f.forEach(function(t,e){n._items.push(new n.Item(u[e],f[e]))})},this._handleMutationRemove=function(e){let r=this,i=e[a._KEYS];if(i&&i.size>0){let e;i.forEach(function(i){for(e=r._items.length-1;e>=0;e--)if(t.Object.compareValues(r._items[e].metadata.key,i)){r._items.splice(e,1);break}})}},this._handleMutationUpdate=function(e){let r=this,i=e[a._KEYS],n=e[a._DATA],s=e[a._METADATA];if(n&&n.length>0){let e,a=0;i.forEach(function(i){for(e=r._items.length-1;e>=0;e--)if(t.Object.compareValues(r._items[e].metadata.key,i)){r._items.splice(e,1,new r.Item(s[a],n[a]));break}a++})}},this.Item=class{constructor(t,e){this.metadata=t,this.data=e,this[a._METADATA]=t,this[a._DATA]=e}},this.FetchByKeysResults=class{constructor(t,e){this.fetchParameters=t,this.results=e,this[a._FETCHPARAMETERS]=t,this[a._RESULTS]=e}},this.FetchByOffsetResults=class{constructor(t,e,r){this.fetchParameters=t,this.results=e,this.done=r,this[a._FETCHPARAMETERS]=t,this[a._RESULTS]=e,this[a._DONE]=r}},this._items=[]}addListResult(t){let e=this,r=[];t.value.data.forEach(function(i,a){r.push(new e.Item(t.value.metadata[a],i))}),this._items=this._items.concat(r),this._done=t.done}getDataList(t,e){this._fetchParams=t;let r=25;null!=t.size&&(r=-1==t.size?this.getSize():t.size);let i=this._items.slice(e,e+r),a=[],n=[];return i.forEach(function(t){a.push(t.data),n.push(t.metadata)}),{fetchParameters:t,data:a,metadata:n}}getDataByKeys(t){let e=this,r=new Map;if(t&&t.keys){let i;t.keys.forEach(function(t){for(i=0;i<e._items.length;i++)if(e._items[i].metadata.key==t){r.set(t,e._items[i]);break}})}return new this.FetchByKeysResults(t,r)}getDataByOffset(t){let e=[];return t&&(e=this._items.slice(t.offset,t.offset+t.size)),new this.FetchByOffsetResults(t,e,!0)}processMutations(t){null!=t.remove&&this._handleMutationRemove(t.remove),null!=t.add&&this._handleMutationAdd(t.add),null!=t.update&&this._handleMutationUpdate(t.update)}reset(){this._items=[],this._done=!1}getSize(){return this._items.length}isDone(){return this._done}_getSortComparator(t){let e=this;return function(r,i){let n,s,o,l,f,u;for(n=0;n<t.length;n++){s=t[n][a._DIRECTION],o=t[n][a._ATTRIBUTE],l=null,f=e._getVal(r,o),u=e._getVal(i,o);let c=0,h="string"==typeof f?f:new String(f).toString(),p="string"==typeof u?u:new String(u).toString();if(0!=(c="ascending"==s?h.localeCompare(p,void 0,{numeric:!0,sensitivity:"base"}):p.localeCompare(h,void 0,{numeric:!0,sensitivity:"base"})))return c}return 0}}_getVal(t,e){if("string"==typeof e){let r=e.indexOf(".");if(r>0){let i=e.substring(0,r),a=e.substring(r+1),n=t[i];if(n)return this._getVal(n,a)}}return"function"==typeof t[e]?t[e]():t[e]}}a._DATA="data",a._METADATA="metadata",a._ITEMS="items",a._BEFOREKEYS="addBeforeKeys",a._KEYS="keys",a._INDEXES="indexes",a._FROM="from",a._OFFSET="offset",a._REFRESH="refresh",a._MUTATE="mutate",a._SIZE="size",a._FETCHPARAMETERS="fetchParameters",a._SORTCRITERIA="sortCriteria",a._DIRECTION="direction",a._ATTRIBUTE="attribute",a._VALUE="value",a._DONE="done",a._RESULTS="results",a._CONTAINSPARAMETERS="containsParameters",a._DEFAULT_SIZE=25,a._CONTAINSKEYS="containsKeys",a._FETCHBYKEYS="fetchByKeys",a._FETCHBYOFFSET="fetchByOffset",a._FETCHFIRST="fetchFirst",a._FETCHATTRIBUTES="attributes",t.DataCache=a;
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
class n extends i{constructor(t){let e={};e[n._DETAIL]=t,super("mutate",e)}}n._DETAIL="detail",t.DataProviderMutationEvent=n,t.DataProviderMutationEvent=n;
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
class s extends i{constructor(){super("refresh")}}t.DataProviderRefreshEvent=s,t.DataProviderRefreshEvent=s,
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
t.DataProvider=function(){};
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
class o{fetchByKeys(t){let e=0,r=this.getIterationLimit?this.getIterationLimit():-1,i={size:25},a=new Map,n=this.fetchFirst(i)[Symbol.asyncIterator]();return function t(i,a,n){return a.next().then(function(s){let o=s.value,l=o.data,f=o.metadata,u=f.map(function(t){return t.key}),c=!0;return i.keys.forEach(function(t){n.has(t)||u.map(function(e,r){e==t&&n.set(e,{metadata:f[r],data:l[r]})}),n.has(t)||(c=!1)}),e+=l.length,c||s.done?n:-1!=r&&e>=r?n:t(i,a,n)})}(t,n,a).then(function(e){let r=new Map;return e.forEach(function(t,e){let i=[t];r.set(e,i[0])}),{fetchParameters:t,results:r}})}containsKeys(t){return this.fetchByKeys(t).then(function(e){let r=new Set;return t.keys.forEach(function(t){null!=e.results.get(t)&&r.add(t)}),Promise.resolve({containsParameters:t,results:r})})}getCapability(t){if("fetchByKeys"==t)return{implementation:"iteration"};let e=null;if(!0!==this._ojSkipLastCapability){this._ojSkipLastCapability=!0;let r=1;for(;this["_ojLastGetCapability"+r];)++r;for(--r;r>0&&!(e=this["_ojLastGetCapability"+r](t));r--);delete this._ojSkipLastCapability}return e}static applyMixin(t){let e=t.prototype.getCapability;if([o].forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(r=>{"constructor"!==r&&(t.prototype[r]=e.prototype[r])})}),e){let r=1;for(;t.prototype["_ojLastGetCapability"+r];)++r;t.prototype["_ojLastGetCapability"+r]=e}}}t.FetchByKeysMixin=o,t.FetchByKeysMixin.applyMixin=o.applyMixin;
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
class l{fetchByOffset(t){let e=t&&t.size>0?t.size:25,r=t?t.sortCriteria:null,i=t&&t.offset>0?t.offset:0,a=0,n=this.getIterationLimit?this.getIterationLimit():-1,s=!1,o={};o.size=e,o.sortCriteria=r;let l=new Array,f=this.fetchFirst(o)[Symbol.asyncIterator]();return function t(r,o,l){return o.next().then(function(f){s=f.done;let u=f.value,c=u.data,h=u.metadata,p=c.length;if(i<a+p)for(let t=i<=a?0:i-a;t<p&&l.length!=e;t++)l.push({metadata:h[t],data:c[t]});return a+=p,l.length<e&&!s?-1!=n&&a>=n?l:t(r,o,l):l})}(t,f,l).then(function(e){return{fetchParameters:t,results:e,done:s}})}getCapability(t){if("fetchByOffset"==t)return{implementation:"iteration"};let e=null;if(!0!==this._ojSkipLastCapability){this._ojSkipLastCapability=!0;let r=1;for(;this["_ojLastGetCapability"+r];)++r;for(--r;r>0&&!(e=this["_ojLastGetCapability"+r](t));r--);delete this._ojSkipLastCapability}return e}static applyMixin(t){let e=t.prototype.getCapability;if([l].forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(r=>{"constructor"!==r&&(t.prototype[r]=e.prototype[r])})}),e){let r=1;for(;t.prototype["_ojLastGetCapability"+r];)++r;t.prototype["_ojLastGetCapability"+r]=e}}}t.FetchByOffsetMixin=l,t.FetchByOffsetMixin.applyMixin=l.applyMixin;
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
class f{constructor(t){t=t||{},this._textFilterAttributes=t.filterOptions?t.filterOptions.textFilterAttributes:null;let e=t.filterDef;e&&(e.op?(this.op=e.op,e.value?(this.value=e.value,e.attribute&&(this.attribute=e.attribute)):e.criteria&&(this.criteria=e.criteria)):e.text&&(this.text=e.text))}filter(e,r,i){return t.FilterUtils.satisfy(f._transformFilter(this),e)}static _transformFilter(t){let e;if(t){let r,i=t.op;if(t.text?i="$regex":"$le"===i?i="$lte":"$ge"===i?i="$gte":"$pr"===i&&(i="$exists"),"$and"!=i&&"$or"!=i){r=t.text?new RegExp(t.text.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),"i"):t.value,e={};let a=t.attribute;if(a){let t={};"$sw"!==i&&"$ew"!==i&&"$co"!==i||(i="$regex",r=f._fixStringExpr(i,r)),t[i]=r,e[a]=t}else if(t.text){let a={};if(a[i]=r,t._textFilterAttributes){let r=[];t._textFilterAttributes.forEach(function(t){let e={};e[t]=a,r.push(e)}),e.$or=r}else e["*"]=a}else{let t=[];f._transformObjectExpr(r,i,null,t),e.$and=t}}else{let r=[];t.criteria.forEach(function(t){r.push(f._transformFilter(t))}),(e={})[i]=r}}return e}static _transformObjectExpr(t,e,r,i){if(Object.keys(t).length>0)Object.keys(t).forEach(function(a){let n=t[a],s=r?r+"."+a:a;if(n instanceof Object)f._transformObjectExpr(n,e,s,i);else{let t={};"$sw"!==e&&"$ew"!==e&&"$co"!==e||(e="$regex",n=f._fixStringExpr(e,n)),t[e]=n;let r={};r[s]=t,i.push(r)}});else{let a={};a[e]=t;let n={};n[r]=a,i.push(n)}}static _fixStringExpr(t,e){return("string"==typeof e||e instanceof String)&&("$sw"===t?e="^"+e:"$ew"===t&&(e+="$")),e}}t.FilterFactory=class{static getFilter(t){return new f(t)}},
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
t.FilterUtils=function(){function t(t,e){var r=!1;for(var a in e)if(e.hasOwnProperty(a)){var n=e[a];if(r||!i(a))throw new Error("parsing error "+e);t.operator=a,t.right=n,r=!0}}function e(t,e,r){var i;if("$lt"===t)return(r=(i=n(r,e))[0])<(e=i[1]);if("$gt"===t)return(r=(i=n(r,e))[0])>(e=i[1]);if("$lte"===t)return(r=(i=n(r,e))[0])<=(e=i[1]);if("$gte"===t)return(r=(i=n(r,e))[0])>=(e=i[1]);if("$eq"===t)return r===e;if("$ne"===t)return r!==e;if("$regex"===t){if(r){if("string"!=typeof r&&!(r instanceof String))if(r instanceof Object){if("[object Object]"==(r=r.toString()))return!1}else r=new String(r);return null!==r.match(e)}return!1}if("$exists"===t)return e?null!=r:null==r;throw new Error("not a valid expression! "+expTree)}function r(t){return"$and"===t||"$or"===t}function i(t){return"$lt"===t||"$gt"===t||"$lte"===t||"$gte"===t||"$eq"===t||"$ne"===t||"$regex"===t||"$exists"===t}function a(t){return null!=t&&(t instanceof String||"string"==typeof t)}function n(t,e){return a(t)&&null==e?e="":a(e)&&null==t&&(t=""),[t,e]}function s(t,e){for(var r=t.split("."),i=e,a=0;a<r.length;a++)i=i[r[a]];return i}return{satisfy:function(a,n){return!a||function t(a,n){var o=a.operator;if(r(o)){if(!a.left&&a.array instanceof Array){for(var l,f=a.array,u=0;u<f.length;u++){var c=t(f[u],n);if("$or"===o&&!0===c)return!0;if("$and"===o&&!1===c)return!1;l=c}return l}throw new Error("invalid expression tree!"+a)}if(i(o)){var h,p=a.right;if("*"!=a.left)return h=s(a.left,n),e(o,p,h);var _,y=Object.keys(n);for(_=0;_<y.length;_++)if(h=s(y[_],n),e(o,p,h))return!0;return!1}throw new Error("not a valid expression!"+a)}(function e(a){var n,s=[];for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];if(0===o.indexOf("$")){if(r(o)){if(!(l instanceof Array))throw new Error("not a valid expression: "+a);n={operator:o,array:[]};for(var f=0;f<l.length;f++){var u=e(l[f]);n.array.push(u)}}else if(i(o))throw new Error("not a valid expression: "+a)}else if("object"!=typeof l)s.push({left:o,right:l,operator:"$eq"});else{var c={left:o};t(c,l),s.push(c)}}return s.length>1?n={operator:"$and",array:s}:1===s.length&&(n=s[0]),n}(a),n)},getValue:s,assembleObject:function(t,e){var r;if(e){r={};for(var i=0;i<e.length;i++)for(var a=r,n=t,s=e[i].split("."),o=0;o<s.length;o++)n=n[s[o]],!a[s[o]]&&o<s.length-1&&(a[s[o]]={}),o===s.length-1?a[s[o]]=n:a=a[s[o]]}else r=t;return r}}}();
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var u={};return u.FetchByKeysMixin=t.FetchByKeysMixin,u.FetchByOffsetMixin=t.FetchByOffsetMixin,u.FilterFactory=t.FilterFactory,u.DataProviderRefreshEvent=t.DataProviderRefreshEvent,u.DataProviderMutationEvent=t.DataProviderMutationEvent,u.AttributeFilterOperator=t.AttributeFilterOperator,u.CompoundFilterOperator=t.CompoundFilterOperator,u.DataCache=t.DataCache,u});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojarraydataprovider',["ojs/ojcore","jquery","ojs/ojset","ojs/ojmap","ojs/ojdataprovider","ojs/ojlogger","ojs/ojeventtarget"],function(t,e,i,s,n,r){class a{constructor(t,e){this.data=t,this.options=e,this.Item=class{constructor(t,e,i){this._parent=t,this.metadata=e,this.data=i,this[a._METADATA]=e,this[a._DATA]=i}},this.ItemMetadata=class{constructor(t,e){this._parent=t,this.key=e,this[a._KEY]=e}},this.FetchByKeysResults=class{constructor(t,e,i){this._parent=t,this.fetchParameters=e,this.results=i,this[a._FETCHPARAMETERS]=e,this[a._RESULTS]=i}},this.ContainsKeysResults=class{constructor(t,e,i){this._parent=t,this.containsParameters=e,this.results=i,this[a._CONTAINSPARAMETERS]=e,this[a._RESULTS]=i}},this.FetchByOffsetResults=class{constructor(t,e,i,s){this._parent=t,this.fetchParameters=e,this.results=i,this.done=s,this[a._FETCHPARAMETERS]=e,this[a._RESULTS]=i,this[a._DONE]=s}},this.FetchListParameters=class{constructor(t,e,i,s,n){this._parent=t,this.size=e,this.sortCriteria=i,this.filterCriterion=s,this.attributes=n,this[a._SIZE]=e,this[a._SORTCRITERIA]=i,this[a._FILTERCRITERION]=s,this[a._ATTRIBUTES]=n}},this.FetchListResult=class{constructor(t,e,i,s){this._parent=t,this.fetchParameters=e,this.data=i,this.metadata=s,this[a._FETCHPARAMETERS]=e,this[a._DATA]=i,this[a._METADATA]=s}},this.AsyncIterable=class{constructor(t,e){this._parent=t,this._asyncIterator=e,this[Symbol.asyncIterator]=function(){return this._asyncIterator}}},this.AsyncIterator=class{constructor(t,e,i,s){this._parent=t,this._nextFunc=e,this._params=i,this._offset=s,this._clientId=i&&i.clientId||Symbol(),t._mapClientIdToOffset.set(this._clientId,s),this._cacheObj={},this._cacheObj[a._MUTATIONSEQUENCENUM]=t._mutationSequenceNum}next(){const t=this._parent._mapClientIdToOffset.get(this._clientId);let e=this._nextFunc(this._params,t,this._cacheObj);return this._parent._mapClientIdToOffset.set(this._clientId,e.offset),Promise.resolve(e.result)}},this.AsyncIteratorYieldResult=class{constructor(t,e){this._parent=t,this.value=e,this[a._VALUE]=e,this[a._DONE]=!1}},this.AsyncIteratorReturnResult=class{constructor(t,e){this._parent=t,this.value=e,this[a._VALUE]=e,this[a._DONE]=!0}},this.DataProviderMutationEventDetail=class{constructor(t,e,i,s){this._parent=t,this.add=e,this.remove=i,this.update=s,this[a._ADD]=e,this[a._REMOVE]=i,this[a._UPDATE]=s}},this.DataProviderOperationEventDetail=class{constructor(t,e,i,s,n){this._parent=t,this.keys=e,this.metadata=i,this.data=s,this.indexes=n,this[a._KEYS]=e,this[a._METADATA]=i,this[a._DATA]=s,this[a._INDEXES]=n}},this.DataProviderAddOperationEventDetail=class{constructor(t,e,i,s,n,r,l){this._parent=t,this.keys=e,this.afterKeys=i,this.addBeforeKeys=s,this.metadata=n,this.data=r,this.indexes=l,this[a._KEYS]=e,this[a._AFTERKEYS]=i,this[a._ADDBEFOREKEYS]=s,this[a._METADATA]=n,this[a._DATA]=r,this[a._INDEXES]=l}},this._cachedIndexMap=[],this._sequenceNum=0,this._mutationSequenceNum=0,this._mapClientIdToOffset=new Map,this._subscribeObservableArray(t),null!=e&&null!=e[a._KEYS]&&(this._keysSpecified=!0,this._keys=e[a._KEYS])}containsKeys(t){let e=this;return this.fetchByKeys(t).then(function(s){let n=new i;return t[a._KEYS].forEach(function(t){null!=s[a._RESULTS].get(t)&&n.add(t)}),Promise.resolve(new e.ContainsKeysResults(e,t,n))})}fetchByKeys(e){let i=this;this._generateKeysIfNeeded();let n,r=new s,l=this._getKeys(),o=null!=e?e[a._ATTRIBUTES]:null,u=0;if(e){let s=i._getRowData();return e[a._KEYS].forEach(function(e){for(n=null,u=0;u<l.length;u++)if(t.Object.compareValues(l[u],e)){n=u;break}if(null!=n&&n>=0){let t=s[n];if(o&&o.length>0){let e={};i._filterRowAttributes(o,t,e),t=e}r.set(e,new i.Item(i,new i.ItemMetadata(i,e),t))}}),Promise.resolve(new i.FetchByKeysResults(i,e,r))}return Promise.reject("Keys are a required parameter")}fetchByOffset(t){let e=this,i=null!=t?t[a._SIZE]:-1,s=null!=t?t[a._SORTCRITERIA]:null,n=null!=t&&t[a._OFFSET]>0?t[a._OFFSET]:0,r=null!=t?t[a._ATTRIBUTES]:null,l=null!=t?t[a._FILTERCRITERION]:null;this._generateKeysIfNeeded();let o=[],u=!0;if(t){let h=new this.FetchListParameters(this,i,s,l,r),_=this._fetchFrom(h,n).result,c=_[a._VALUE];u=_[a._DONE];let f=c[a._DATA],d=c[a._METADATA].map(function(t){return t[a._KEY]});return o=f.map(function(t,i){return new e.Item(e,new e.ItemMetadata(e,d[i]),t)}),Promise.resolve(new this.FetchByOffsetResults(this,t,o,u))}return Promise.reject("Offset is a required parameter")}fetchFirst(t){return new this.AsyncIterable(this,new this.AsyncIterator(this,this._fetchFrom.bind(this),t,0))}getCapability(t){return a.getCapability(t)}static getCapability(t){if("sort"==t)return{attributes:"multiple"};if("fetchByKeys"==t)return{implementation:"lookup"};if("fetchByOffset"==t)return{implementation:"randomAccess"};if("fetchCapability"==t){let t=new Set;return t.add("exclusion"),{caching:"all",attributeFilter:{expansion:{},ordering:{},defaultShape:{features:t}}}}return"filter"==t?{operators:["$co","$eq","$ew","$pr","$gt","$ge","$lt","$le","$ne","$regex","$sw"],attributeExpression:["*"],textFilter:{}}:null}getTotalSize(){return Promise.resolve(this._getRowData().length)}isEmpty(){return this._getRowData().length>0?"no":"yes"}createOptimizedKeySet(t){return new i(t)}createOptimizedKeyMap(t){if(t){let e=new s;return t.forEach(function(t,i){e.set(i,t)}),e}return new s}_getRowData(){return this[a._DATA]instanceof Array?this[a._DATA]:this[a._DATA]()}_getKeys(){return null==this._keys||this._keys instanceof Array?this._keys:this._keys()}_indexOfKey(e){let i,s=this._getKeys(),n=-1;for(i=0;i<s.length;i++)if(t.Object.compareValues(s[i],e)){n=i;break}return n}_adjustIteratorOffset(t,e){this._mapClientIdToOffset.forEach((i,s)=>{let n=0,r=0;t&&t.forEach(function(t){t<i&&++r}),i-=r,e&&e.forEach(function(t){t<i&&++n}),i+=n,this._mapClientIdToOffset.set(s,i)})}_subscribeObservableArray(e){if(!(e instanceof Array)){if(!this._isObservableArray(e))throw new Error("Invalid data type. ArrayDataProvider only supports Array or observableArray.");let s=this;e.subscribe(function(e){let n,a,l,o,u,h=[],_=[],c=[],f=[],d=[];s._mutationSequenceNum++;let E=!0,A=!0;e.forEach(function(t){"deleted"===t.status?(E=!1,0):"added"===t.status&&(A=!1,0)});let p=[],T=[],m=null,y=null,R=null,I=s._generateKeysIfNeeded();if(!E&&!A){for(n=0;n<e.length;n++){o=e[n].index,u=e[n].status;let i=s._getId(e[n].value);for(a=0;a<e.length;a++)a!=n&&o===e[a].index&&u!==e[a].status&&p.indexOf(n)<0&&T.indexOf(n)<0&&(null==i||t.Object.compareValues(i,s._getId(e[a].value)))&&("deleted"===u?(T.push(n),p.push(a)):(T.push(a),p.push(n)))}for(n=0;n<e.length;n++)if(p.indexOf(n)>=0){let t=s._getKeys()[e[n].index];_.push(t),h.push(e[n].value),c.push(e[n].index)}if(_.length>0){f=_.map(function(t){return new s.ItemMetadata(s,t)});let t=new i;_.map(function(e){t.add(e)}),m=new s.DataProviderOperationEventDetail(s,t,f,h,c)}}if(h=[],_=[],c=[],!E){for(n=0;n<e.length;n++)"deleted"===e[n].status&&p.indexOf(n)<0&&T.indexOf(n)<0&&(_.push(s._getKeys()[e[n].index]),h.push(e[n].value),c.push(e[n].index));if(_.length>0&&_.map(function(t){let e=s._indexOfKey(t);s._keys.splice(e,1)}),_.length>0){f=_.map(function(t){return new s.ItemMetadata(s,t)});let t=new i;_.map(function(e){t.add(e)}),R=new s.DataProviderOperationEventDetail(s,t,f,h,c)}}if(h=[],_=[],c=[],!A){let t=null==s._getKeys()||!(s._getKeys().length>0);for(n=0;n<e.length;n++)"added"===e[n].status&&p.indexOf(n)<0&&T.indexOf(n)<0&&(null==(l=s._getId(e[n].value))&&(I||s._keysSpecified)&&(l=s._getKeys()[e[n].index]),null==l?(l=s._sequenceNum++,s._keys.splice(e[n].index,0,l)):t||-1===s._indexOfKey(l)?s._keys.splice(e[n].index,0,l):I||(r.warn("added row has duplicate key "+l),s._keys.splice(e[n].index,0,l)),_.push(l),h.push(e[n].value),c.push(e[n].index));for(n=0;n<e.length;n++)if("added"===e[n].status&&p.indexOf(n)<0&&T.indexOf(n)<0){let t=s._getKeys()[e[n].index+1];t=null==t?null:t,d.push(t)}if(_.length>0){f=_.map(function(t){return new s.ItemMetadata(s,t)});let t=new i;_.map(function(e){t.add(e)});let e=new i;d.map(function(t){e.add(t)}),y=new s.DataProviderAddOperationEventDetail(s,t,e,d,f,h,c)}}s._fireMutationEvent(y,R,m)},null,"arrayChange"),e.subscribe(function(e){var i,n,r,a;if(s._mutationEvent){const t=s._mutationEvent.detail;s._adjustIteratorOffset(null===(i=t.remove)||void 0===i?void 0:i.indexes,null===(n=t.add)||void 0===n?void 0:n.indexes),s.dispatchEvent(s._mutationEvent)}else if(s._mutationRemoveEvent||s._mutationAddEvent||s._mutationUpdateEvent){if(s._mutationRemoveEvent){const t=s._mutationRemoveEvent.detail;s._adjustIteratorOffset(null===(r=t.remove)||void 0===r?void 0:r.indexes,null),s.dispatchEvent(s._mutationRemoveEvent)}if(s._mutationAddEvent){const t=s._mutationAddEvent.detail;s._adjustIteratorOffset(null,null===(a=t.add)||void 0===a?void 0:a.indexes),s.dispatchEvent(s._mutationAddEvent)}s._mutationUpdateEvent&&s.dispatchEvent(s._mutationUpdateEvent)}else s.dispatchEvent(new t.DataProviderRefreshEvent);s._mutationEvent=null,s._mutationRemoveEvent=null,s._mutationAddEvent=null,s._mutationUpdateEvent=null},null,"change")}}_fireMutationEvent(e,i,s){let n=new this.DataProviderMutationEventDetail(this,e,i,s);this._mutationEvent=new t.DataProviderMutationEvent(n)}_hasSamePropValue(e,i,s){const n="_hasSamePropValue is true";try{e&&e[s]&&e[s].forEach(function(e){i&&i[s]&&i[s].forEach(function(i){if(t.Object.compareValues(e,i))throw n})})}catch(t){if(t===n)return!0;throw t}return!1}_isObservableArray(t){return"function"==typeof t&&t.subscribe&&!(void 0===t.destroyAll)}_generateKeysIfNeeded(){if(null==this._keys){let t=null!=this.options?this.options[a._KEYATTRIBUTES]||this.options[a._IDATTRIBUTE]:null;this._keys=[];let e,i=this._getRowData(),s=0;for(s=0;s<i.length;s++)null!=(e=this._getId(i[s]))&&"@index"!=t||(e=this._sequenceNum++),this._keys[s]=e;return!0}return!1}_getId(t){let e,i=null!=this.options?this.options[a._KEYATTRIBUTES]||this.options[a._IDATTRIBUTE]:null;if(null!=i){if(Array.isArray(i)){let s;for(e=[],s=0;s<i.length;s++)e[s]=this._getVal(t,i[s])}else e="@value"==i?this._getAllVals(t):this._getVal(t,i);return e}return null}_getVal(t,e){if("string"==typeof e){let i=e.indexOf(".");if(i>0){let s=e.substring(0,i),n=e.substring(i+1),r=t[s];if(r)return this._getVal(r,n)}}return"function"==typeof t[e]?t[e]():t[e]}_getAllVals(t){let e=this;return Object.keys(t).map(function(i){return e._getVal(t,i)})}_fetchFrom(t,e,i){let s=this,r=null!=t?t[a._ATTRIBUTES]:null;this._generateKeysIfNeeded();let l=null!=t?t[a._SORTCRITERIA]:null,o=this._getCachedIndexMap(l,i),u=this._getRowData(),h=o.map(function(t){return u[t]}),_=o.map(function(t){return s._getKeys()[t]}),c=null!=t?t[a._SIZE]>0?t[a._SIZE]:t[a._SIZE]<0?s._getKeys().length:25:25,f=e+c<h.length,d=this._mergeSortCriteria(l);null!=d&&((t=t||{})[a._SORTCRITERIA]=d);let E,A=[],p=[],T=0;if(null!=t&&t[a._FILTERCRITERION]){let i=null;i=n.FilterFactory.getFilter({filterDef:t[a._FILTERCRITERION],filterOptions:this.options});let s=0;for(;A.length<c&&s<h.length;)i.filter(h[s])&&(T>=e&&(A.push(h[s]),p.push(_[s])),T++),s++;f=s<h.length}else A=h.slice(e,e+c),p=_.slice(e,e+c);T=e+A.length,E=A.map(function(t){if(r&&r.length>0){let e={};s._filterRowAttributes(r,t,e),t=e}return t});let m=p.map(function(t){return new s.ItemMetadata(s,t)}),y=new this.FetchListResult(this,t,E,m);return f?{result:new this.AsyncIteratorYieldResult(this,y),offset:T}:{result:new this.AsyncIteratorReturnResult(this,y),offset:T}}_getCachedIndexMap(t,e){if(e&&e.indexMap&&e[a._MUTATIONSEQUENCENUM]===this._mutationSequenceNum)return e.indexMap;let i=this._getRowData().map(function(t,e){return e}),s=this._sortData(i,t);return e&&(e.indexMap=s,e[a._MUTATIONSEQUENCENUM]=this._mutationSequenceNum),s}_sortData(t,e){let i=this._getRowData(),s=t.map(function(t){return{index:t,value:i[t]}});return null!=e&&s.sort(this._getSortComparator(e)),s.map(function(t){return t.index})}_getSortComparator(t){let e=this;return function(i,s){let n,r,l,o,u,h,_=null!=e.options?e.options[a._SORTCOMPARATORS]:null;for(n=0;n<t.length;n++)if(r=t[n][a._DIRECTION],l=t[n][a._ATTRIBUTE],o=null,null!=_&&(o=_[a._COMPARATORS].get(l)),u=e._getVal(i.value,l),h=e._getVal(s.value,l),null!=o){let t="descending"==r?-1:1,e=o(u,h)*t;if(0!=e)return e}else{let t=0,e="string"==typeof u?u:new String(u).toString(),i="string"==typeof h?h:new String(h).toString();if(0!=(t="ascending"==r?e.localeCompare(i,void 0,{numeric:!0,sensitivity:"base"}):i.localeCompare(e,void 0,{numeric:!0,sensitivity:"base"})))return t}return 0}}_mergeSortCriteria(t){let e=null!=this.options?this.options[a._IMPLICITSORT]:null;if(null!=e){if(null==t)return e;let i,s,n,r=t.slice(0);for(i=0;i<e.length;i++){for(n=!1,s=0;s<r.length;s++)r[s][a._ATTRIBUTE]==e[i][a._ATTRIBUTE]&&(n=!0);n||r.push(e[i])}return r}return t}_filterRowAttributes(t,e,i){let s=this;if(Array.isArray(t)){let n,r=!1;t.forEach(function(t){t!=a._ATDEFAULT&&t.name!=a._ATDEFAULT||(r=!0)}),Object.keys(e).forEach(function(a){if(r){let r,l=!1,o=a;for(n=0;n<t.length;n++)if((r=t[n]instanceof Object?t[n].name:t[n]).startsWith("!")){if((r=r.substr(1,r.length-1))==a){l=!0;break}}else if(r==a){o=t[n];break}l||s._filterRowAttributes(o,e,i)}else t.forEach(function(t){let n;(n=t instanceof Object?t.name:t).startsWith("!")||n!=a||s._filterRowAttributes(t,e,i)})})}else if(t instanceof Object){let n=t.name,r=t.attributes;if(n&&!n.startsWith("!"))if(e[n]instanceof Object&&!Array.isArray(e[n])&&r){let t={};s._filterRowAttributes(r,e[n],t),i[n]=t}else if(Array.isArray(e[n])&&r){let t;i[n]=[],e[n].forEach(function(e,a){t={},s._filterRowAttributes(r,e,t),i[n][a]=t})}else s._proxyAttribute(i,e,n)}else s._proxyAttribute(i,e,t)}_proxyAttribute(t,e,i){t&&e&&Object.defineProperty(t,i,{get:function(){return e[i]},set:function(t){e[i]=t},enumerable:!0})}}
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
return a._KEY="key",a._KEYS="keys",a._AFTERKEYS="afterKeys",a._ADDBEFOREKEYS="addBeforeKeys",a._DIRECTION="direction",a._ATTRIBUTE="attribute",a._ATTRIBUTES="attributes",a._SORT="sort",a._SORTCRITERIA="sortCriteria",a._FILTERCRITERION="filterCriterion",a._DATA="data",a._METADATA="metadata",a._INDEXES="indexes",a._OFFSET="offset",a._SIZE="size",a._IDATTRIBUTE="idAttribute",a._IMPLICITSORT="implicitSort",a._KEYATTRIBUTES="keyAttributes",a._SORTCOMPARATORS="sortComparators",a._COMPARATORS="comparators",a._COMPARATOR="comparator",a._RESULTS="results",a._CONTAINS="contains",a._FETCHPARAMETERS="fetchParameters",a._CONTAINSPARAMETERS="containsParameters",a._VALUE="value",a._DONE="done",a._ADD="add",a._REMOVE="remove",a._UPDATE="update",a._DETAIL="detail",a._FETCHLISTRESULT="fetchListResult",a._ATDEFAULT="@default",a._MUTATIONSEQUENCENUM="mutationSequenceNum",t.ArrayDataProvider=a,t.EventTargetMixin.applyMixin(a),a});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojtreedataprovider',["ojs/ojcore","ojs/ojeventtarget","ojs/ojdataprovider"],function(e){"use strict";
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */e.TreeDataProvider=function(){};e.TreeDataProvider;return e.TreeDataProvider});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojarraytreedataprovider',["ojs/ojcore","jquery","ojs/ojarraydataprovider","ojs/ojeventtarget","ojs/ojtreedataprovider"],function(e,t){"use strict";e.ArrayDataProvider;class r{constructor(t,r,a){this.treeData=t,this.options=r,this._rootDataProvider=a,this.TreeAsyncIterator=class{constructor(e,t){this._parent=e,this._baseIterable=t}next(){let e=this;return this._baseIterable[Symbol.asyncIterator]().next().then(function(t){let r=t.value.metadata;for(let a=0;a<r.length;a++)r[a]=e._parent._getNodeMetadata(t.value.data[a]);return t})}},this.TreeAsyncIterable=class{constructor(e,t){this._parent=e,this._asyncIterator=t,this[Symbol.asyncIterator]=function(){return this._asyncIterator}}},this._baseDataProvider=new e.ArrayDataProvider(t,r),this._mapKeyToNode=new Map,this._mapNodeToKey=new Map,this._mapArrayToSequenceNum=new Map,this._mapKoArrayToSubscriptions=new Map,null==a&&this._processTreeArray(t,[])}containsKeys(e){return this.fetchByKeys(e).then(function(t){let r=new Set;return e.keys.forEach(function(e){null!=t.results.get(e)&&r.add(e)}),Promise.resolve({containsParameters:e,results:r})})}getCapability(e){return this._baseDataProvider.getCapability(e)}getTotalSize(){return this._baseDataProvider.getTotalSize()}isEmpty(){return this._baseDataProvider.isEmpty()}getChildDataProvider(e,t){let a=this._getNodeForKey(e);if(a){let e=this._getChildren(a);if(e){return new r(e,this.options,this._getRootDataProvider())}}return null}fetchFirst(e){if(e&&e.filterCriterion){let r=t.extend({},e);r.filterCriterion=this._getLeafNodeFilter(r.filterCriterion),r.filterCriterion.filter=e.filterCriterion.filter,e=r}let r=this._baseDataProvider.fetchFirst(e);return new this.TreeAsyncIterable(this,new this.TreeAsyncIterator(this,r))}fetchByOffset(e){let t=this._baseDataProvider.fetchByOffset(e),r=this;return t.then(function(e){let t=e.results,a=[];for(let e=0;e<t.length;e++){let s=t[e].metadata,i=t[e].data;s=r._getNodeMetadata(i),a.push({data:i,metadata:s})}return{done:e.done,fetchParameters:e.fetchParameters,results:a}})}fetchByKeys(e){let t=this,r=new Map;return e.keys.forEach(function(e){let a=t._getNodeForKey(e);a&&r.set(e,{metadata:{key:e},data:a})}),Promise.resolve({fetchParameters:e,results:r})}_getChildren(e){let t=this.options&&this.options.childrenAttribute?this.options.childrenAttribute:"children";return this._getVal(e,t,!0)}_getRootDataProvider(){return this._rootDataProvider?this._rootDataProvider:this}_subscribeObservableArray(t,r){if("function"!=typeof t||!t.subscribe||void 0===t.destroyAll)throw new Error("Invalid data type. ArrayTreeDataProvider only supports Array or observableArray.");var a=this,s=null,i=new Array(2);i[0]=t.subscribe(function(i){let n,o,l,u=[],d=[],h=[],y=[],p=[],c=null,f=null,_=null,g=[];for(n=0;n<i.length;n++){l=i[n].index,status=i[n].status;let t=a._getId(i[n].value);if(t)for(o=0;o<i.length;o++)if(o!=n&&l===i[o].index&&status!==i[o].status&&p.indexOf(n)<0&&g.indexOf(n)<0){let r=a._getId(i[o].value);e.Object.compareValues(t,r)&&("deleted"===status?(g.push(n),p.push(o),a._releaseNode(i[n].value)):(g.push(o),p.push(n)))}}for(n=0;n<i.length;n++)if("deleted"===i[n].status&&p.indexOf(n)<0&&g.indexOf(n)<0){let e=i[n].value,t=a._getKeyForNode(e);d.push(t),u.push(e),h.push(i[n].index),a._releaseNode(e)}if(d.length>0){y=d.map(function(e){return{key:e}});let e=new Set;d.map(function(t){e.add(t)}),_={data:u,indexes:h,keys:e,metadata:y}}u=[],d=[],h=[],y=[];let b=t(),v=[],m=[],A=[],N=[];for(n=0;n<i.length;n++)if("added"===i[n].status&&g.indexOf(n)<0){let e=i[n].value,s=a._processNode(e,r,t);p.indexOf(n)<0?(d.push(s.key),u.push(e),h.push(i[n].index),y.push({key:s.key})):(v.push(s.key),m.push(e),A.push(i[n].index),N.push({key:s.key}))}if(d.length>0){let e=new Set;d.map(function(t){e.add(t)});let t,s=new Set,i=[],n=[];t=a.options&&a.options.keyAttributes&&"siblings"!==a.options.keyAttributesScope?r.length>0?r[r.length-1]:null:r.length>0?r:null,h.map(function(e){let r;r=e>=b.length-1?"":a._getKeyForNode(b[e+1]),s.add(r),i.push(r),n.push(t)}),f={afterKeys:s,addBeforeKeys:i,parentKeys:n,data:u,indexes:h,keys:e,metadata:y}}if(v.length>0){let e=new Set;v.map(function(t){e.add(t)}),c={data:m,indexes:A,keys:e,metadata:N}}s=new e.DataProviderMutationEvent({add:f,remove:_,update:c})},null,"arrayChange"),i[1]=t.subscribe(function(t){s?a.dispatchEvent(s):a.dispatchEvent(new e.DataProviderRefreshEvent),s=null},null,"change"),this._mapKoArrayToSubscriptions.set(t,i)}_unsubscribeObservableArray(e){if("function"==typeof e&&e.subscribe&&void 0!==e.destroyAll){var t=this._mapKoArrayToSubscriptions.get(e);t&&(t[0].dispose(),t[1].dispose(),this._mapKoArrayToSubscriptions.delete(e))}}_processTreeArray(e,t){let r,a=this;e instanceof Array?r=e:(this._subscribeObservableArray(e,t),r=e()),r.forEach(function(r,s){a._processNode(r,t,e)})}_releaseTreeArray(e){let t,r=this;e instanceof Array?t=e:(this._unsubscribeObservableArray(e),t=e()),t.forEach(function(e,t){r._releaseNode(e)})}_processNode(e,t,r){let a=this,s=a._createKeyObj(e,t,r);a._setMapEntry(s.key,e);let i=a._getChildren(e);return i&&a._processTreeArray(i,s.keyPath),s}_releaseNode(e){let t=this,r=this._getKeyForNode(e);t._deleteMapEntry(r,e);let a=t._getChildren(e);a&&t._releaseTreeArray(a)}_createKeyObj(e,t,r){let a=this._getId(e),s=t?t.slice():[];return null==a?(s.push(this._incrementSequenceNum(r)),a=s):(s.push(a),this.options&&"siblings"==this.options.keyAttributesScope&&(a=s)),{key:a,keyPath:s}}_getId(e){let t,r=null!=this.options?this.options.keyAttributes:null;if(null!=r){var a;if(Array.isArray(r))for(t=[],a=0;a<r.length;a++)t[a]=this._getVal(e,r[a]);else t="@value"==r?this._getAllVals(e):this._getVal(e,r);return t}return null}_getVal(e,t,r){if("string"==typeof t){let r=t.indexOf(".");if(r>0){let a=t.substring(0,r),s=t.substring(r+1),i=e[a];if(i)return this._getVal(i,s)}}return!0!==r&&"function"==typeof e[t]?e[t]():e[t]}_getAllVals(e){let t=this;return Object.keys(e).map(function(r){return t._getVal(e,r)})}_getNodeMetadata(e){return{key:this._getKeyForNode(e)}}_getNodeForKey(e){return this._getRootDataProvider()._mapKeyToNode.get(JSON.stringify(e))}_getKeyForNode(e){return this._getRootDataProvider()._mapNodeToKey.get(e)}_setMapEntry(e,t){let r=this._getRootDataProvider();r._mapKeyToNode.set(JSON.stringify(e),t),r._mapNodeToKey.set(t,e)}_deleteMapEntry(e,t){let r=this._getRootDataProvider();r._mapKeyToNode.delete(JSON.stringify(e)),r._mapNodeToKey.delete(t)}_incrementSequenceNum(e){let t=this._getRootDataProvider(),r=t._mapArrayToSequenceNum.get(e)||0;return t._mapArrayToSequenceNum.set(e,r+1),r}_getLeafNodeFilter(e){let t;if(e&&e.text){t={op:"$regex",attribute:"*",value:new RegExp(e.text,"i")}}else t=e;let r=this.options&&this.options.childrenAttribute?this.options.childrenAttribute:"children";return{op:"$or",criteria:[t,{op:"$and",criteria:[{op:"$ne",attribute:r,value:null},{op:"$ne",attribute:r,value:void 0}]}]}}}
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
return e.ArrayTreeDataProvider=r,e.ArrayTreeDataProvider=r,e.EventTargetMixin.applyMixin(r),r});
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(j(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(b,c,d){var e="DEPRECATED METHOD: "+c+"\n"+d+" AT \n";return function(){var c=new Error("get-stack-trace"),d=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",f=a.console&&(a.console.warn||a.console.log);return f&&f.call(a.console,e,d),b.apply(this,arguments)}}function i(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&la(d,c)}function j(a,b){return function(){return a.apply(b,arguments)}}function k(a,b){return typeof a==oa?a.apply(b?b[0]||d:d,b):a}function l(a,b){return a===d?b:a}function m(a,b,c){g(q(b),function(b){a.addEventListener(b,c,!1)})}function n(a,b,c){g(q(b),function(b){a.removeEventListener(b,c,!1)})}function o(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function p(a,b){return a.indexOf(b)>-1}function q(a){return a.trim().split(/\s+/g)}function r(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function s(a){return Array.prototype.slice.call(a,0)}function t(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];r(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function u(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ma.length;){if(c=ma[g],e=c?c+f:b,e in a)return e;g++}return d}function v(){return ua++}function w(b){var c=b.ownerDocument||b;return c.defaultView||c.parentWindow||a}function x(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){k(a.options.enable,[a])&&c.handler(b)},this.init()}function y(a){var b,c=a.options.inputClass;return new(b=c?c:xa?M:ya?P:wa?R:L)(a,z)}function z(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&Ea&&d-e===0,g=b&(Ga|Ha)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,A(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function A(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=D(b)),e>1&&!c.firstMultiple?c.firstMultiple=D(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=E(d);b.timeStamp=ra(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=I(h,i),b.distance=H(h,i),B(c,b),b.offsetDirection=G(b.deltaX,b.deltaY);var j=F(b.deltaTime,b.deltaX,b.deltaY);b.overallVelocityX=j.x,b.overallVelocityY=j.y,b.overallVelocity=qa(j.x)>qa(j.y)?j.x:j.y,b.scale=g?K(g.pointers,d):1,b.rotation=g?J(g.pointers,d):0,b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length,C(c,b);var k=a.element;o(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k}function B(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};b.eventType!==Ea&&f.eventType!==Ga||(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function C(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ha&&(i>Da||h.velocity===d)){var j=b.deltaX-h.deltaX,k=b.deltaY-h.deltaY,l=F(i,j,k);e=l.x,f=l.y,c=qa(l.x)>qa(l.y)?l.x:l.y,g=G(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function D(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:pa(a.pointers[c].clientX),clientY:pa(a.pointers[c].clientY)},c++;return{timeStamp:ra(),pointers:b,center:E(b),deltaX:a.deltaX,deltaY:a.deltaY}}function E(a){var b=a.length;if(1===b)return{x:pa(a[0].clientX),y:pa(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:pa(c/b),y:pa(d/b)}}function F(a,b,c){return{x:b/a||0,y:c/a||0}}function G(a,b){return a===b?Ia:qa(a)>=qa(b)?0>a?Ja:Ka:0>b?La:Ma}function H(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function I(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function J(a,b){return I(b[1],b[0],Ra)+I(a[1],a[0],Ra)}function K(a,b){return H(b[0],b[1],Ra)/H(a[0],a[1],Ra)}function L(){this.evEl=Ta,this.evWin=Ua,this.pressed=!1,x.apply(this,arguments)}function M(){this.evEl=Xa,this.evWin=Ya,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=$a,this.evWin=_a,this.started=!1,x.apply(this,arguments)}function O(a,b){var c=s(a.touches),d=s(a.changedTouches);return b&(Ga|Ha)&&(c=t(c.concat(d),"identifier",!0)),[c,d]}function P(){this.evTarget=bb,this.targetIds={},x.apply(this,arguments)}function Q(a,b){var c=s(a.touches),d=this.targetIds;if(b&(Ea|Fa)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=s(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return o(a.target,i)}),b===Ea)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ga|Ha)&&delete d[g[e].identifier],e++;return h.length?[t(f.concat(h),"identifier",!0),h]:void 0}function R(){x.apply(this,arguments);var a=j(this.handler,this);this.touch=new P(this.manager,a),this.mouse=new L(this.manager,a),this.primaryTouch=null,this.lastTouches=[]}function S(a,b){a&Ea?(this.primaryTouch=b.changedPointers[0].identifier,T.call(this,b)):a&(Ga|Ha)&&T.call(this,b)}function T(a){var b=a.changedPointers[0];if(b.identifier===this.primaryTouch){var c={x:b.clientX,y:b.clientY};this.lastTouches.push(c);var d=this.lastTouches,e=function(){var a=d.indexOf(c);a>-1&&d.splice(a,1)};setTimeout(e,cb)}}function U(a){for(var b=a.srcEvent.clientX,c=a.srcEvent.clientY,d=0;d<this.lastTouches.length;d++){var e=this.lastTouches[d],f=Math.abs(b-e.x),g=Math.abs(c-e.y);if(db>=f&&db>=g)return!0}return!1}function V(a,b){this.manager=a,this.set(b)}function W(a){if(p(a,jb))return jb;var b=p(a,kb),c=p(a,lb);return b&&c?jb:b||c?b?kb:lb:p(a,ib)?ib:hb}function X(){if(!fb)return!1;var b={},c=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(d){b[d]=c?a.CSS.supports("touch-action",d):!0}),b}function Y(a){this.options=la({},this.defaults,a||{}),this.id=v(),this.manager=null,this.options.enable=l(this.options.enable,!0),this.state=nb,this.simultaneous={},this.requireFail=[]}function Z(a){return a&sb?"cancel":a&qb?"end":a&pb?"move":a&ob?"start":""}function $(a){return a==Ma?"down":a==La?"up":a==Ja?"left":a==Ka?"right":""}function _(a,b){var c=b.manager;return c?c.get(a):a}function aa(){Y.apply(this,arguments)}function ba(){aa.apply(this,arguments),this.pX=null,this.pY=null}function ca(){aa.apply(this,arguments)}function da(){Y.apply(this,arguments),this._timer=null,this._input=null}function ea(){aa.apply(this,arguments)}function fa(){aa.apply(this,arguments)}function ga(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ha(a,b){return b=b||{},b.recognizers=l(b.recognizers,ha.defaults.preset),new ia(a,b)}function ia(a,b){this.options=la({},ha.defaults,b||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=a,this.input=y(this),this.touchAction=new V(this,this.options.touchAction),ja(this,!0),g(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ja(a,b){var c=a.element;if(c.style){var d;g(a.options.cssProps,function(e,f){d=u(c.style,f),b?(a.oldCssProps[d]=c.style[d],c.style[d]=e):c.style[d]=a.oldCssProps[d]||""}),b||(a.oldCssProps={})}}function ka(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var la,ma=["","webkit","Moz","MS","ms","o"],na=b.createElement("div"),oa="function",pa=Math.round,qa=Math.abs,ra=Date.now;la="function"!=typeof Object.assign?function(a){if(a===d||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var e=arguments[c];if(e!==d&&null!==e)for(var f in e)e.hasOwnProperty(f)&&(b[f]=e[f])}return b}:Object.assign;var sa=h(function(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a},"extend","Use `assign`."),ta=h(function(a,b){return sa(a,b,!0)},"merge","Use `assign`."),ua=1,va=/mobile|tablet|ip(ad|hone|od)|android/i,wa="ontouchstart"in a,xa=u(a,"PointerEvent")!==d,ya=wa&&va.test(navigator.userAgent),za="touch",Aa="pen",Ba="mouse",Ca="kinect",Da=25,Ea=1,Fa=2,Ga=4,Ha=8,Ia=1,Ja=2,Ka=4,La=8,Ma=16,Na=Ja|Ka,Oa=La|Ma,Pa=Na|Oa,Qa=["x","y"],Ra=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(w(this.element),this.evWin,this.domHandler)}};var Sa={mousedown:Ea,mousemove:Fa,mouseup:Ga},Ta="mousedown",Ua="mousemove mouseup";i(L,x,{handler:function(a){var b=Sa[a.type];b&Ea&&0===a.button&&(this.pressed=!0),b&Fa&&1!==a.which&&(b=Ga),this.pressed&&(b&Ga&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:Ba,srcEvent:a}))}});var Va={pointerdown:Ea,pointermove:Fa,pointerup:Ga,pointercancel:Ha,pointerout:Ha},Wa={2:za,3:Aa,4:Ba,5:Ca},Xa="pointerdown",Ya="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Xa="MSPointerDown",Ya="MSPointerMove MSPointerUp MSPointerCancel"),i(M,x,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Va[d],f=Wa[a.pointerType]||a.pointerType,g=f==za,h=r(b,a.pointerId,"pointerId");e&Ea&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ga|Ha)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Za={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},$a="touchstart",_a="touchstart touchmove touchend touchcancel";i(N,x,{handler:function(a){var b=Za[a.type];if(b===Ea&&(this.started=!0),this.started){var c=O.call(this,a,b);b&(Ga|Ha)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}}});var ab={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},bb="touchstart touchmove touchend touchcancel";i(P,x,{handler:function(a){var b=ab[a.type],c=Q.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}});var cb=2500,db=25;i(R,x,{handler:function(a,b,c){var d=c.pointerType==za,e=c.pointerType==Ba;if(!(e&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)S.call(this,b,c);else if(e&&U.call(this,c))return;this.callback(a,b,c)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var eb=u(na.style,"touchAction"),fb=eb!==d,gb="compute",hb="auto",ib="manipulation",jb="none",kb="pan-x",lb="pan-y",mb=X();V.prototype={set:function(a){a==gb&&(a=this.compute()),fb&&this.manager.element.style&&mb[a]&&(this.manager.element.style[eb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){k(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),W(a.join(" "))},preventDefaults:function(a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=p(d,jb)&&!mb[jb],f=p(d,lb)&&!mb[lb],g=p(d,kb)&&!mb[kb];if(e){var h=1===a.pointers.length,i=a.distance<2,j=a.deltaTime<250;if(h&&i&&j)return}return g&&f?void 0:e||f&&c&Na||g&&c&Oa?this.preventSrc(b):void 0},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var nb=1,ob=2,pb=4,qb=8,rb=qb,sb=16,tb=32;Y.prototype={defaults:{},set:function(a){return la(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=_(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=_(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=_(a,this),-1===r(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=_(a,this);var b=r(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(b,a)}var c=this,d=this.state;qb>d&&b(c.options.event+Z(d)),b(c.options.event),a.additionalEvent&&b(a.additionalEvent),d>=qb&&b(c.options.event+Z(d))},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=tb)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(tb|nb)))return!1;a++}return!0},recognize:function(a){var b=la({},a);return k(this.options.enable,[this,b])?(this.state&(rb|sb|tb)&&(this.state=nb),this.state=this.process(b),void(this.state&(ob|pb|qb|sb)&&this.tryEmit(b))):(this.reset(),void(this.state=tb))},process:function(a){},getTouchAction:function(){},reset:function(){}},i(aa,Y,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(ob|pb),e=this.attrTest(a);return d&&(c&Ha||!e)?b|sb:d||e?c&Ga?b|qb:b&ob?b|pb:ob:tb}}),i(ba,aa,{defaults:{event:"pan",threshold:10,pointers:1,direction:Pa},getTouchAction:function(){var a=this.options.direction,b=[];return a&Na&&b.push(lb),a&Oa&&b.push(kb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Na?(e=0===f?Ia:0>f?Ja:Ka,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ia:0>g?La:Ma,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return aa.prototype.attrTest.call(this,a)&&(this.state&ob||!(this.state&ob)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=$(a.direction);b&&(a.additionalEvent=this.options.event+b),this._super.emit.call(this,a)}}),i(ca,aa,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&ob)},emit:function(a){if(1!==a.scale){var b=a.scale<1?"in":"out";a.additionalEvent=this.options.event+b}this._super.emit.call(this,a)}}),i(da,Y,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[hb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ga|Ha)&&!f)this.reset();else if(a.eventType&Ea)this.reset(),this._timer=e(function(){this.state=rb,this.tryEmit()},b.time,this);else if(a.eventType&Ga)return rb;return tb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===rb&&(a&&a.eventType&Ga?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=ra(),this.manager.emit(this.options.event,this._input)))}}),i(ea,aa,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&ob)}}),i(fa,aa,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Na|Oa,pointers:1},getTouchAction:function(){return ba.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Na|Oa)?b=a.overallVelocity:c&Na?b=a.overallVelocityX:c&Oa&&(b=a.overallVelocityY),this._super.attrTest.call(this,a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&qa(b)>this.options.velocity&&a.eventType&Ga},emit:function(a){var b=$(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),i(ga,Y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ib]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&Ea&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Ga)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||H(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=rb,this.tryEmit()},b.interval,this),ob):rb}return tb},failTimeout:function(){return this._timer=e(function(){this.state=tb},this.options.interval,this),tb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==rb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ha.VERSION="2.0.7",ha.defaults={domEvents:!1,touchAction:gb,enable:!0,inputTarget:null,inputClass:null,preset:[[ea,{enable:!1}],[ca,{enable:!1},["rotate"]],[fa,{direction:Na}],[ba,{direction:Na},["swipe"]],[ga],[ga,{event:"doubletap",taps:2},["tap"]],[da]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ub=1,vb=2;ia.prototype={set:function(a){return la(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?vb:ub},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&rb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===vb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(ob|pb|qb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof Y)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;if(a=this.get(a)){var b=this.recognizers,c=r(b,a);-1!==c&&(b.splice(c,1),this.touchAction.update())}return this},on:function(a,b){if(a!==d&&b!==d){var c=this.handlers;return g(q(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this}},off:function(a,b){if(a!==d){var c=this.handlers;return g(q(a),function(a){b?c[a]&&c[a].splice(r(c[a],b),1):delete c[a]}),this}},emit:function(a,b){this.options.domEvents&&ka(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ja(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},la(ha,{INPUT_START:Ea,INPUT_MOVE:Fa,INPUT_END:Ga,INPUT_CANCEL:Ha,STATE_POSSIBLE:nb,STATE_BEGAN:ob,STATE_CHANGED:pb,STATE_ENDED:qb,STATE_RECOGNIZED:rb,STATE_CANCELLED:sb,STATE_FAILED:tb,DIRECTION_NONE:Ia,DIRECTION_LEFT:Ja,DIRECTION_RIGHT:Ka,DIRECTION_UP:La,DIRECTION_DOWN:Ma,DIRECTION_HORIZONTAL:Na,DIRECTION_VERTICAL:Oa,DIRECTION_ALL:Pa,Manager:ia,Input:x,TouchAction:V,TouchInput:P,MouseInput:L,PointerEventInput:M,TouchMouseInput:R,SingleTouchInput:N,Recognizer:Y,AttrRecognizer:aa,Tap:ga,Pan:ba,Swipe:fa,Pinch:ca,Rotate:ea,Press:da,on:m,off:n,each:g,merge:ta,extend:sa,assign:la,inherit:i,bindFn:j,prefixed:u});var wb="undefined"!=typeof a?a:"undefined"!=typeof self?self:{};wb.Hammer=ha,"function"==typeof define&&define.amd?define('hammerjs',[],function(){return ha}):"undefined"!=typeof module&&module.exports?module.exports=ha:a[c]=ha}(window,document,"Hammer");
//# sourceMappingURL=hammer.min.js.map;
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojjquery-hammer',["ojs/ojcore","jquery","hammerjs","ojs/ojlogger"],function(e,t,a,r){"use strict";var o;a?(t.fn.ojHammer=function(e){switch(e){case"instance":return this.data("ojHammer");case"destroy":return this.each(function(){var e=t(this),a=e.data("ojHammer");a&&(a.destroy(),e.removeData("ojHammer"))});default:return this.each(function(){var r=t(this);r.data("ojHammer")||r.data("ojHammer",new a.Manager(r[0],e))})}},a.Manager.prototype.emit=(o=a.Manager.prototype.emit,function(e,a){o.call(this,e,a),t(this.element).trigger({type:e,gesture:a})})):r.warn("Hammer jQuery extension loaded without Hammer.")});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojoffcanvas',["ojs/ojcore","jquery","hammerjs","ojs/ojcontext","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojlogger","ojs/ojjquery-hammer"],function(a,s,t,n,f,e,i){"use strict";a.OffcanvasUtils={};var r=a.OffcanvasUtils;return a.OffcanvasUtils._DATA_EDGE_KEY="oj-offcanvasEdge",a.OffcanvasUtils._DATA_OFFCANVAS_KEY="oj-offcanvas",a.OffcanvasUtils._DATA_MEDIA_QUERY_KEY="oj-mediaQueryListener",a.OffcanvasUtils._DATA_HAMMER_KEY="oj-offcanvasHammer",a.OffcanvasUtils.SELECTOR_KEY="selector",a.OffcanvasUtils.CONTENT_KEY="content",a.OffcanvasUtils.EDGE_START="start",a.OffcanvasUtils.EDGE_END="end",a.OffcanvasUtils.EDGE_TOP="top",a.OffcanvasUtils.EDGE_BOTTOM="bottom",a.OffcanvasUtils.DISPLAY_MODE_KEY="displayMode",a.OffcanvasUtils.DISPLAY_MODE_PUSH="push",a.OffcanvasUtils.DISPLAY_MODE_OVERLAY="overlay",a.OffcanvasUtils.DISPLAY_MODE_REFLOW="reflow",a.OffcanvasUtils.MODALITY_KEY="modality",a.OffcanvasUtils.MODALITY_NONE="none",a.OffcanvasUtils.MODALITY_MODAL="modal",a.OffcanvasUtils.DISMISS_HANDLER_KEY="_dismissHandler",a.OffcanvasUtils.OPEN_PROMISE_KEY="_openPromise",a.OffcanvasUtils.CLOSE_PROMISE_KEY="_closePromise",a.OffcanvasUtils.GLASS_PANE_KEY="_glassPane",a.OffcanvasUtils.SURROGATE_KEY="_surrogate",a.OffcanvasUtils.ANIMATE_WRAPPER_KEY="_animateWrapper",a.OffcanvasUtils.ANIMATE_KEY="_animate",a.OffcanvasUtils.SURROGATE_ATTR="data-oj-offcanvas-surrogate-id",a.OffcanvasUtils.OUTER_WRAPPER_SELECTOR="oj-offcanvas-outer-wrapper",a.OffcanvasUtils.OPEN_SELECTOR="oj-offcanvas-open",a.OffcanvasUtils.TRANSITION_SELECTOR="oj-offcanvas-transition",a.OffcanvasUtils.REFLOW_WRAPPER_SELECTOR="oj-offcanvas-pin",a.OffcanvasUtils.REFLOW_TRANSITION_SELECTOR="oj-offcanvas-pin-transition",a.OffcanvasUtils.GLASSPANE_SELECTOR="oj-offcanvas-glasspane",a.OffcanvasUtils.GLASSPANE_DIM_SELECTOR="oj-offcanvas-glasspane-dim",a.OffcanvasUtils.VETO_BEFOREOPEN_MSG="ojbeforeopen veto",a.OffcanvasUtils.VETO_BEFORECLOSE_MSG="ojbeforeclose veto",a.OffcanvasUtils._shiftSelector={start:"oj-offcanvas-shift-start",end:"oj-offcanvas-shift-end",top:"oj-offcanvas-shift-down",bottom:"oj-offcanvas-shift-up"},a.OffcanvasUtils._drawerSelector={start:"oj-offcanvas-start",end:"oj-offcanvas-end",top:"oj-offcanvas-top",bottom:"oj-offcanvas-bottom"},a.OffcanvasUtils._getDisplayMode=function(s){var t=s[a.OffcanvasUtils.DISPLAY_MODE_KEY];return t!==a.OffcanvasUtils.DISPLAY_MODE_OVERLAY&&t!==a.OffcanvasUtils.DISPLAY_MODE_PUSH&&t!==a.OffcanvasUtils.DISPLAY_MODE_REFLOW&&(t=(f.parseJSONFromFontFamily("oj-offcanvas-option-defaults")||{}).displayMode),t},a.OffcanvasUtils._getDrawer=function(t){return s(t[a.OffcanvasUtils.SELECTOR_KEY])},a.OffcanvasUtils._isModal=function(s){return s[a.OffcanvasUtils.MODALITY_KEY]===a.OffcanvasUtils.MODALITY_MODAL},a.OffcanvasUtils._isOpen=function(s){return s.hasClass(a.OffcanvasUtils.OPEN_SELECTOR)},a.OffcanvasUtils._getOuterWrapper=function(s){return s.closest("."+a.OffcanvasUtils.OUTER_WRAPPER_SELECTOR)},a.OffcanvasUtils._getAnimateWrapper=function(s){var t=a.OffcanvasUtils._getDrawer(s);return a.OffcanvasUtils._noInnerWrapper(s)||s[a.OffcanvasUtils.DISPLAY_MODE_KEY]===a.OffcanvasUtils.DISPLAY_MODE_OVERLAY?t:s[a.OffcanvasUtils.ANIMATE_WRAPPER_KEY]?t.closest("."+s[a.OffcanvasUtils.ANIMATE_WRAPPER_KEY]):t.parent()},a.OffcanvasUtils._getShiftSelector=function(s){var t=a.OffcanvasUtils._shiftSelector[s];if(!t)throw new Error("Invalid edge: "+s);return t},a.OffcanvasUtils._isRTL=function(){return"rtl"===a.DomUtils.getReadingDirection()},a.OffcanvasUtils._setTransform=function(a,s){a.css({"-webkit-transform":s,transform:s})},a.OffcanvasUtils._getTranslationX=function(s,t,n){var f=s===a.OffcanvasUtils.EDGE_END;return(a.OffcanvasUtils._isRTL()||n)&&(f=!f),"translate3d("+(f?"-":"")+t+", 0, 0)"},a.OffcanvasUtils._setTranslationX=function(s,t,n){a.OffcanvasUtils._setTransform(s,a.OffcanvasUtils._getTranslationX(t,n,!1))},a.OffcanvasUtils._getTranslationY=function(s,t){return"translate3d(0, "+(s===a.OffcanvasUtils.EDGE_BOTTOM?"-":"")+t+", 0)"},a.OffcanvasUtils._setTranslationY=function(s,t,n){a.OffcanvasUtils._setTransform(s,a.OffcanvasUtils._getTranslationY(t,n))},a.OffcanvasUtils._getTranslationY2=function(a,s){return"translate3d(0, "+(s?"-":"")+a+", 0)"},a.OffcanvasUtils._setAnimateClass=function(s,t,n,f,e){t.addClass(a.OffcanvasUtils.TRANSITION_SELECTOR),a.OffcanvasUtils._setTransform(t,f),n.addClass(a.OffcanvasUtils.TRANSITION_SELECTOR),a.OffcanvasUtils._setTransform(n,e)},a.OffcanvasUtils._saveEdge=function(t){var n=t.edge,f=a.OffcanvasUtils._getDrawer(t);return n&&n.length||(n=f.hasClass("oj-offcanvas-start")?a.OffcanvasUtils.EDGE_START:f.hasClass("oj-offcanvas-end")?a.OffcanvasUtils.EDGE_END:f.hasClass("oj-offcanvas-top")?a.OffcanvasUtils.EDGE_TOP:f.hasClass("oj-offcanvas-bottom")?a.OffcanvasUtils.EDGE_BOTTOM:a.OffcanvasUtils.EDGE_START),s.data(f[0],a.OffcanvasUtils._DATA_EDGE_KEY,n),n},a.OffcanvasUtils._getEdge=function(t){return s.data(t[0],a.OffcanvasUtils._DATA_EDGE_KEY)},a.OffcanvasUtils._toggleClass=function(s,t,n){var f=s[a.OffcanvasUtils.DISPLAY_MODE_KEY],e=a.OffcanvasUtils._getDrawer(s),i=a.OffcanvasUtils.OPEN_SELECTOR,r=f===a.OffcanvasUtils.DISPLAY_MODE_OVERLAY?a.OffcanvasUtils.TRANSITION_SELECTOR+" oj-offcanvas-overlay":a.OffcanvasUtils.TRANSITION_SELECTOR;if(n)e.addClass(i),void 0===s[a.OffcanvasUtils.ANIMATE_KEY]&&t.addClass(r);else{s.makeFocusable&&a.DomUtils.makeFocusable({element:e,remove:!0});var l=s.tabindex;void 0===l?e.removeAttr("tabindex"):e.attr("tabindex",l),e.removeClass(i),t.removeClass(r)}},a.OffcanvasUtils._setFocus=function(s){var t,n=s,f=a.OffcanvasUtils._getDrawer(n),e=f.find("[autofocus]");if(0===e.length&&(e=f.find(":tabbable")),0===e.length){var i=f.attr("tabindex");void 0!==i&&(n.tabindex=i),f.attr("tabindex","-1"),t=f,a.DomUtils.makeFocusable({element:f,applyHighlight:!0}),n.makeFocusable=!0}else t=e[0];a.FocusUtils.focusElement(t)},a.OffcanvasUtils._isAutoDismiss=function(a){return"none"!==a.autoDismiss},a.OffcanvasUtils._calcTransitionTime=function(a){for(var s=a.css("transitionProperty").split(","),t=a.css("transitionDelay").split(","),n=a.css("transitionDuration").split(","),f=0,e=0;e<s.length;e++){var i=n[e%n.length],r=i.indexOf("ms")>-1?parseFloat(i):1e3*parseFloat(i);if(r>0){var l=t[e%t.length],o=l.indexOf("ms")>-1?parseFloat(l):1e3*parseFloat(l);f=Math.max(f,o+r)}}return f+100},a.OffcanvasUtils._onTransitionEnd=function(s,t){var n,f="transitionend.oc webkitTransitionEnd.oc",e=function(){n&&(clearTimeout(n),n=void 0),s.off(f,e),t(s)};s.on(f,e),n=setTimeout(e,a.OffcanvasUtils._calcTransitionTime(s))},a.OffcanvasUtils._closeWithCatch=function(s){a.OffcanvasUtils.close(s).catch(function(a){i.warn("Offcancas close failed: "+a)})},a.OffcanvasUtils._registerCloseHandler=function(t){var n=t;if(a.OffcanvasUtils._unregisterCloseHandler(n),a.OffcanvasUtils._isAutoDismiss(n)){var f=a.OffcanvasUtils._getDrawer(n),e=function(t){var e=t.target;a.DomUtils.isChromeEvent(t)||"focus"===t.type&&!s(e).is(":focusable")||(null!=s.data(f[0],a.OffcanvasUtils._DATA_OFFCANVAS_KEY)?a.DomUtils.isLogicalAncestorOrSelf(f[0],e)||a.OffcanvasUtils._closeWithCatch(n):a.OffcanvasUtils._unregisterCloseHandler(n))};n[a.OffcanvasUtils.DISMISS_HANDLER_KEY]=e;var i=document.documentElement;a.DomUtils.isTouchSupported()&&i.addEventListener("touchstart",e,{passive:!0,capture:!0}),i.addEventListener("mousedown",e,!0),i.addEventListener("focus",e,!0)}a.OffcanvasUtils._registerSwipeHandler(n)},a.OffcanvasUtils._unregisterCloseHandler=function(s){var t=s,n=t[a.OffcanvasUtils.DISMISS_HANDLER_KEY];if(n){var f=document.documentElement;a.DomUtils.isTouchSupported()&&f.removeEventListener("touchstart",n,{passive:!0,capture:!0}),f.removeEventListener("mousedown",n,!0),f.removeEventListener("focus",n,!0),delete t[a.OffcanvasUtils.DISMISS_HANDLER_KEY],t[a.OffcanvasUtils.DISMISS_HANDLER_KEY]=null}a.OffcanvasUtils._unregisterSwipeHandler(t)},a.OffcanvasUtils._registerSwipeHandler=function(n){if(a.DomUtils.isTouchSupported()){var f,e,i,r=n,l=r[a.OffcanvasUtils.SELECTOR_KEY],o=s(l),c=a.OffcanvasUtils._getEdge(o);c===a.OffcanvasUtils.EDGE_START&&!a.OffcanvasUtils._isRTL()||c===a.OffcanvasUtils.EDGE_END&&a.OffcanvasUtils._isRTL()?(e={recognizers:[[t.Swipe,{direction:t.DIRECTION_LEFT}]]},f="swipeleft"):c===a.OffcanvasUtils.EDGE_START&&a.OffcanvasUtils._isRTL()||c===a.OffcanvasUtils.EDGE_END&&!a.OffcanvasUtils._isRTL()?(e={recognizers:[[t.Swipe,{direction:t.DIRECTION_RIGHT}]]},f="swiperight"):c===a.OffcanvasUtils.EDGE_TOP?(e={recognizers:[[t.Swipe,{direction:t.DIRECTION_UP}]]},f="swipeup"):c===a.OffcanvasUtils.EDGE_BOTTOM&&(e={recognizers:[[t.Swipe,{direction:t.DIRECTION_DOWN}]]},f="swipedown"),i=o.ojHammer(e).on(f,function(s){s.target===o[0]&&(s.preventDefault(),a.OffcanvasUtils._closeWithCatch(r))}),s.data(s(l)[0],a.OffcanvasUtils._DATA_HAMMER_KEY,{event:f,hammer:i})}},a.OffcanvasUtils._unregisterSwipeHandler=function(t){var n=a.OffcanvasUtils._getDrawer(t);if(n.length>0){var f=s.data(n[0],a.OffcanvasUtils._DATA_HAMMER_KEY);f&&f.hammer.off(f.event)}},a.OffcanvasUtils._isFixed=function(s){return a.OffcanvasUtils._getOuterWrapper(s).hasClass("oj-offcanvas-page")},a.OffcanvasUtils._isReflow=function(s){return s[a.OffcanvasUtils.DISPLAY_MODE_KEY]===a.OffcanvasUtils.DISPLAY_MODE_REFLOW},a.OffcanvasUtils._noInnerWrapper=function(s){return s[a.OffcanvasUtils.CONTENT_KEY]||a.OffcanvasUtils._isFixed(a.OffcanvasUtils._getDrawer(s))||a.OffcanvasUtils._isReflow(s)},a.OffcanvasUtils._toggleOuterWrapper=function(t,n,f){var e=a.OffcanvasUtils._getEdge(n),i=a.OffcanvasUtils._getShiftSelector(e),r=a.OffcanvasUtils._getOuterWrapper(n);a.Assert.assertPrototype(r,s);var l=r.hasClass(i);return f||r.toggleClass(i,!l),l},a.OffcanvasUtils._afterCloseHandler=function(t){var n=a.OffcanvasUtils._getAnimateWrapper(t);if(""===n.get(0).style.transform){a.OffcanvasUtils._unregisterCloseHandler(t);var f=a.OffcanvasUtils._getDrawer(t),e=a.OffcanvasUtils._isReflow(t),i=null;try{i=s.data(f[0],a.OffcanvasUtils._DATA_OFFCANVAS_KEY)}catch(a){}i===t&&(e?f.removeClass(a.OffcanvasUtils.OPEN_SELECTOR+" "+a.OffcanvasUtils.REFLOW_TRANSITION_SELECTOR):a.OffcanvasUtils._toggleClass(t,n,!1),a.OffcanvasUtils._removeModality(t),e&&a.OffcanvasUtils._getOuterWrapper(f).removeClass(a.OffcanvasUtils.REFLOW_WRAPPER_SELECTOR),f.trigger("ojclose",t),s.removeData(f[0],a.OffcanvasUtils._DATA_OFFCANVAS_KEY))}},a.OffcanvasUtils._setVisible=function(t,n,f){var e=s(t),i=!!n;i&&a.OffcanvasUtils._isOpen(e)&&a.OffcanvasUtils._close(t,!1),e.toggleClass(a.OffcanvasUtils._drawerSelector[f],!i)},a.OffcanvasUtils.setupResponsive=function(t){var n=t.query;if(null!==n){var f=t[a.OffcanvasUtils.SELECTOR_KEY],e=window.matchMedia(n),i=a.OffcanvasUtils._saveEdge(t),r=function(s){a.OffcanvasUtils._setVisible(f,s.matches,i)};e.addListener(r),a.OffcanvasUtils._setVisible(f,e.matches,i),s.data(s(f)[0],a.OffcanvasUtils._DATA_MEDIA_QUERY_KEY,{mqList:e,mqListener:r})}},a.OffcanvasUtils.tearDownResponsive=function(t){var n=a.OffcanvasUtils._getDrawer(t),f=s.data(n[0],a.OffcanvasUtils._DATA_MEDIA_QUERY_KEY);f&&(f.mqList.removeListener(f.mqListener),s.removeData(n[0],a.OffcanvasUtils._DATA_MEDIA_QUERY_KEY))},a.OffcanvasUtils._openPush=function(t,n,f,e){var i=a.OffcanvasUtils._getDrawer(t),r=s(t[a.OffcanvasUtils.CONTENT_KEY]);a.Assert.assertPrototype(r,s);var l,o=!0,c=t.size,O=function(s){s.removeClass(a.OffcanvasUtils.TRANSITION_SELECTOR),o?o=!1:(e!==a.OffcanvasUtils.EDGE_END&&e!==a.OffcanvasUtils.EDGE_BOTTOM||a.OffcanvasUtils._setFocus(t),i.trigger("ojopen",t),a.OffcanvasUtils._registerCloseHandler(t),n(!0))};i.addClass(a.OffcanvasUtils.OPEN_SELECTOR),window.setTimeout(function(){e===a.OffcanvasUtils.EDGE_START||e===a.OffcanvasUtils.EDGE_END?(void 0===c&&(c=i.outerWidth(!0)+"px"),l=a.OffcanvasUtils._getTranslationX(e,c,!1)):(void 0===c&&(c=i.outerHeight(!0)+"px"),a.OffcanvasUtils._setTransform(i,a.OffcanvasUtils._getTranslationY2(c,e===a.OffcanvasUtils.EDGE_TOP)),l=a.OffcanvasUtils._getTranslationY2(c,e!==a.OffcanvasUtils.EDGE_TOP)),window.setTimeout(function(){a.OffcanvasUtils._setAnimateClass(t,i,r,"translate3d(0, 0, 0)",l),a.OffcanvasUtils._toggleOuterWrapper(t,i,!1),a.OffcanvasUtils._onTransitionEnd(r,O),a.OffcanvasUtils._onTransitionEnd(i,O)},0)},0),a.OffcanvasUtils._applyModality(t,i),e!==a.OffcanvasUtils.EDGE_START&&e!==a.OffcanvasUtils.EDGE_TOP||a.OffcanvasUtils._setFocus(t)},a.OffcanvasUtils._openOverlay=function(s,t,n,f){var e=a.OffcanvasUtils._getDrawer(s);a.OffcanvasUtils._toggleClass(s,e,!0);var i=s.size;i&&(f===a.OffcanvasUtils.EDGE_START||f===a.OffcanvasUtils.EDGE_END?a.OffcanvasUtils._setTransform(e,a.OffcanvasUtils._getTranslationX(f,i,!0)):a.OffcanvasUtils._setTransform(e,a.OffcanvasUtils._getTranslationY(f,i))),window.setTimeout(function(){a.OffcanvasUtils._toggleOuterWrapper(s,e,!1)},20),a.OffcanvasUtils._applyModality(s,e),f!==a.OffcanvasUtils.EDGE_START&&f!==a.OffcanvasUtils.EDGE_TOP||a.OffcanvasUtils._setFocus(s),a.OffcanvasUtils._onTransitionEnd(e,function(){e.removeClass(a.OffcanvasUtils.TRANSITION_SELECTOR),f!==a.OffcanvasUtils.EDGE_END&&f!==a.OffcanvasUtils.EDGE_BOTTOM||a.OffcanvasUtils._setFocus(s),e.trigger("ojopen",s),a.OffcanvasUtils._registerCloseHandler(s),t(!0)})},a.OffcanvasUtils._closePush=function(t,n,f,e,i){var r=s(t[a.OffcanvasUtils.CONTENT_KEY]),l=!0,o=function(){l||(r.removeClass(a.OffcanvasUtils.TRANSITION_SELECTOR),a.OffcanvasUtils._setTransform(r,""),a.OffcanvasUtils._afterCloseHandler(t),n(!0)),l=!1};a.OffcanvasUtils._setTransform(e,""),a.OffcanvasUtils._setTransform(r,""),a.OffcanvasUtils._toggleOuterWrapper(t,e,!1),a.OffcanvasUtils._isModal(t)&&t[a.OffcanvasUtils.GLASS_PANE_KEY].removeClass(a.OffcanvasUtils.GLASSPANE_DIM_SELECTOR),i?(r.addClass(a.OffcanvasUtils.TRANSITION_SELECTOR),e.addClass(a.OffcanvasUtils.TRANSITION_SELECTOR),a.OffcanvasUtils._onTransitionEnd(e,o),a.OffcanvasUtils._onTransitionEnd(r,o)):(l=!1,o())},a.OffcanvasUtils._closeOverlay=function(s,t,n,f,e){var i=function(){a.OffcanvasUtils._afterCloseHandler(s),t(!0)};a.OffcanvasUtils._toggleOuterWrapper(s,f,!1),a.OffcanvasUtils._isModal(s)&&s[a.OffcanvasUtils.GLASS_PANE_KEY].removeClass(a.OffcanvasUtils.GLASSPANE_DIM_SELECTOR),e?(f.addClass(a.OffcanvasUtils.TRANSITION_SELECTOR),a.OffcanvasUtils._onTransitionEnd(f,i)):i()},a.OffcanvasUtils._openOldDrawer=function(t,n,f,e,i){var r,l=a.OffcanvasUtils._getDrawer(t),o=a.OffcanvasUtils._getAnimateWrapper(t);a.Assert.assertPrototype(o,s),a.OffcanvasUtils._toggleClass(t,o,!0),e===a.OffcanvasUtils.EDGE_START||e===a.OffcanvasUtils.EDGE_END?(r=void 0===r?l.outerWidth(!0)+"px":r,i===a.OffcanvasUtils.DISPLAY_MODE_PUSH&&a.OffcanvasUtils._setTranslationX(o,e,r)):(r=void 0===r?l.outerHeight(!0)+"px":r,i===a.OffcanvasUtils.DISPLAY_MODE_PUSH&&a.OffcanvasUtils._setTranslationY(o,e,r)),window.setTimeout(function(){a.OffcanvasUtils._toggleOuterWrapper(t,l,!1)},10),a.OffcanvasUtils._applyModality(t,l),e!==a.OffcanvasUtils.EDGE_START&&e!==a.OffcanvasUtils.EDGE_TOP||a.OffcanvasUtils._setFocus(t),a.OffcanvasUtils._onTransitionEnd(o,function(){o.removeClass(a.OffcanvasUtils.TRANSITION_SELECTOR),e!==a.OffcanvasUtils.EDGE_END&&e!==a.OffcanvasUtils.EDGE_BOTTOM||a.OffcanvasUtils._setFocus(t),l.trigger("ojopen",t),a.OffcanvasUtils._registerCloseHandler(t),n(!0)})},a.OffcanvasUtils._closeOldDrawer=function(s,t,n,f,e){var i=s[a.OffcanvasUtils.DISPLAY_MODE_KEY],r=a.OffcanvasUtils._getAnimateWrapper(s),l=function(){a.OffcanvasUtils._afterCloseHandler(s),t(!0)};i===a.OffcanvasUtils.DISPLAY_MODE_PUSH&&a.OffcanvasUtils._setTransform(r,""),a.OffcanvasUtils._toggleOuterWrapper(s,f,!1),a.OffcanvasUtils._isModal(s)&&s[a.OffcanvasUtils.GLASS_PANE_KEY].removeClass(a.OffcanvasUtils.GLASSPANE_DIM_SELECTOR),e?(r.addClass(a.OffcanvasUtils.TRANSITION_SELECTOR),a.OffcanvasUtils._onTransitionEnd(r,l)):l()},a.OffcanvasUtils.open=function(t){var f,i=a.OffcanvasUtils._getDrawer(t),r=s.data(i[0],a.OffcanvasUtils._DATA_OFFCANVAS_KEY);if(r){if(r[a.OffcanvasUtils.CLOSE_PROMISE_KEY])return r[a.OffcanvasUtils.CLOSE_PROMISE_KEY];if(r[a.OffcanvasUtils.OPEN_PROMISE_KEY])return r[a.OffcanvasUtils.OPEN_PROMISE_KEY]}var l=!1,o=new Promise(function(e,r){a.Assert.assertPrototype(i,s);var o=a.OffcanvasUtils._saveEdge(t),c=s.Event("ojbeforeopen");if(i.trigger(c,t),!1===c.result)return r(a.OffcanvasUtils.VETO_BEFOREOPEN_MSG),void(l=!0);var O=a.OffcanvasUtils._getDisplayMode(t),v=a.OffcanvasUtils._isReflow(t);!v||o!==a.OffcanvasUtils.EDGE_TOP&&o!==a.OffcanvasUtils.EDGE_BOTTOM||(O=a.OffcanvasUtils.DISPLAY_MODE_PUSH);var _=s.extend({},t);if(_[a.OffcanvasUtils.DISPLAY_MODE_KEY]=O,s.data(i[0],a.OffcanvasUtils._DATA_OFFCANVAS_KEY,_),t[a.OffcanvasUtils.CONTENT_KEY]){if(!a.OffcanvasUtils._noInnerWrapper(t))throw new Error("Error: Both main content selector and the inner wrapper <div class='oj-offcanvas-inner-wrapper'> are provided. Please remove the inner wrapper.");var E=n.getContext(i[0]).getBusyContext();f=E.addBusyState({description:"The offcanvas selector ='"+t[a.OffcanvasUtils.SELECTOR_KEY]+"' doing the open animation."}),v||(O===a.OffcanvasUtils.DISPLAY_MODE_PUSH?a.OffcanvasUtils._openPush(_,e,r,o):a.OffcanvasUtils._openOverlay(_,e,r,o))}else a.OffcanvasUtils._openOldDrawer(_,e,r,o,O)});if(o=o.then(function(a){return f&&f(),a},function(a){throw f&&f(),a}),!l){var c=s.data(i[0],a.OffcanvasUtils._DATA_OFFCANVAS_KEY);c&&(c[a.OffcanvasUtils.OPEN_PROMISE_KEY]=o,e.subtreeShown(i[0]))}return o},a.OffcanvasUtils.close=function(s){return a.OffcanvasUtils._close(s[a.OffcanvasUtils.SELECTOR_KEY],void 0===s[a.OffcanvasUtils.ANIMATE_KEY])},a.OffcanvasUtils._close=function(t,f){var i=s(t);a.Assert.assertPrototype(i,s);var r,l=s.data(i[0],a.OffcanvasUtils._DATA_OFFCANVAS_KEY);if(l&&l[a.OffcanvasUtils.CLOSE_PROMISE_KEY])return l[a.OffcanvasUtils.CLOSE_PROMISE_KEY];var o=!1,c=new Promise(function(e,c){if(a.OffcanvasUtils._isOpen(i)){t!==l[a.OffcanvasUtils.SELECTOR_KEY]&&e(!0),a.OffcanvasUtils._toggleOuterWrapper(l,i,!0)||e(!0);var O=s.Event("ojbeforeclose");if(i.trigger(O,l),!1===O.result)return c(a.OffcanvasUtils.VETO_BEFORECLOSE_MSG),void(o=!0);if(f){var v=n.getContext(i[0]).getBusyContext();r=v.addBusyState({description:"The offcanvas selector ='"+l[a.OffcanvasUtils.SELECTOR_KEY]+"' doing the close animation."})}var _=l[a.OffcanvasUtils.DISPLAY_MODE_KEY];l[a.OffcanvasUtils.CONTENT_KEY]?_===a.OffcanvasUtils.DISPLAY_MODE_PUSH?a.OffcanvasUtils._closePush(l,e,c,i,f):a.OffcanvasUtils._closeOverlay(l,e,c,i,f):a.OffcanvasUtils._closeOldDrawer(l,e,c,i,f)}else e(!0)});return c=c.then(function(a){return r&&r(),a},function(a){throw r&&r(),a}),o||(l=s.data(i[0],a.OffcanvasUtils._DATA_OFFCANVAS_KEY))&&(l[a.OffcanvasUtils.CLOSE_PROMISE_KEY]=c,e.subtreeHidden(i[0])),c},a.OffcanvasUtils.toggle=function(t){var n=a.OffcanvasUtils._getDrawer(t);return a.Assert.assertPrototype(n,s),a.OffcanvasUtils._isOpen(n)?a.OffcanvasUtils.close(t):a.OffcanvasUtils.open(t)},a.OffcanvasUtils._addGlassPane=function(t){var n=s("<div>");return n.addClass(a.OffcanvasUtils.GLASSPANE_SELECTOR),n.attr("role","presentation"),n.attr("aria-hidden","true"),n.appendTo(t.parent()),n.on("keydown keyup keypress mousedown mouseup mouseover mouseout click focusin focus",function(a){a.stopPropagation(),a.preventDefault()}),n},a.OffcanvasUtils._createSurrogate=function(t){var n,f=s("<span></span>").css("display","none").attr("aria-hidden","true"),e=t.attr("id");return e?(n=[e,"surrogate"].join("_"),f.attr("id",n)):n=f.uniqueId(),f.insertBefore(t),t.attr(a.OffcanvasUtils.SURROGATE_ATTR,n),f},a.OffcanvasUtils._swapOrder=function(s,t){s[a.OffcanvasUtils.SURROGATE_KEY]=a.OffcanvasUtils._createSurrogate(t),t.appendTo(t.parent())},a.OffcanvasUtils._restoreOrder=function(s){var t=a.OffcanvasUtils._getDrawer(s),n=s[a.OffcanvasUtils.SURROGATE_KEY];t&&n&&t.attr(a.OffcanvasUtils.SURROGATE_ATTR)===n.attr("id")&&(t.insertAfter(n),t.removeAttr(a.OffcanvasUtils.SURROGATE_ATTR),n.remove())},a.OffcanvasUtils._applyModality=function(t,n){var f=t;a.OffcanvasUtils._isModal(f)&&(f[a.OffcanvasUtils.GLASS_PANE_KEY]=a.OffcanvasUtils._addGlassPane(n),a.OffcanvasUtils._swapOrder(f,n),s(f[a.OffcanvasUtils.CONTENT_KEY]).attr("aria-hidden","true"),window.setTimeout(function(){f[a.OffcanvasUtils.GLASS_PANE_KEY].addClass(a.OffcanvasUtils.GLASSPANE_DIM_SELECTOR)},0))},a.OffcanvasUtils._removeModality=function(t){a.OffcanvasUtils._isModal(t)&&(t[a.OffcanvasUtils.GLASS_PANE_KEY].remove(),a.OffcanvasUtils._restoreOrder(t),s(t[a.OffcanvasUtils.CONTENT_KEY]).removeAttr("aria-hidden"))},a.OffcanvasUtils.setupPanToReveal=function(f){var e,i,r,l,o,c,O,v,_,E,U,T,u,d=f;null==s(d).attr("oj-data-pansetup")&&(s(d).attr("oj-data-pansetup","true"),d.displayMode="push",e=a.OffcanvasUtils._getDrawer(d),r=a.OffcanvasUtils._getOuterWrapper(e),o={recognizers:[[t.Pan,{direction:t.DIRECTION_HORIZONTAL}]]},a.AgentUtils.getAgentInfo().os===a.AgentUtils.OS.IOS&&(o.inputClass=t.TouchInput),c=!1,s(r).ojHammer(o).on("panstart",function(f){switch(O=null,f.gesture.direction){case t.DIRECTION_LEFT:Math.abs(f.gesture.deltaY)<Math.abs(f.gesture.deltaX)&&(O=a.OffcanvasUtils._isRTL()?"end":"start");break;case t.DIRECTION_RIGHT:Math.abs(f.gesture.deltaY)<Math.abs(f.gesture.deltaX)&&(O=a.OffcanvasUtils._isRTL()?"start":"end")}null!==O&&(f.gesture.angle<0&&(f.gesture.deltaX<-100||f.gesture.deltaY<-100)||(v={direction:O,distance:Math.abs(f.gesture.deltaX)},_=s.Event("ojpanstart"),e.trigger(_,v),_.isDefaultPrevented()||(n.getContext(r.get(0)).getBusyContext().whenReady().then(function(){null==(i=d.size)&&(i=e.outerWidth(),d.size=i),c=!0}),d._closePromise=null,(l=a.OffcanvasUtils._getAnimateWrapper(d)).off(".oc"),a.OffcanvasUtils._toggleClass(d,l,!0),f.gesture.srcEvent.stopPropagation(),f.gesture.srcEvent.preventDefault(),f.stopPropagation())))}).on("panmove",function(t){c&&(E=t.gesture.deltaX,"start"===O&&E>0||"end"===O&&E<0?a.OffcanvasUtils._setTranslationX(l,"start","0px"):(e.css("width",Math.abs(E)),l.removeClass(a.OffcanvasUtils.TRANSITION_SELECTOR),a.OffcanvasUtils._setTranslationX(l,"start",E+"px"),v={direction:O,distance:Math.abs(E)},_=s.Event("ojpanmove"),e.trigger(_,v),t.gesture.srcEvent.stopPropagation(),t.stopPropagation()))}).on("panend",function(t){if(c){if(c=!1,E=Math.abs(t.gesture.deltaX),v={distance:E},_=s.Event("ojpanend"),e.trigger(_,v),t.stopPropagation(),!_.isDefaultPrevented())return null==(U=d.edge)&&(U=e.hasClass("oj-offcanvas-start")?"start":"end"),a.OffcanvasUtils._animateWrapperAndDrawer(l,e,U,i,d),s.data(e[0],a.OffcanvasUtils._DATA_OFFCANVAS_KEY,d),s.data(e[0],a.OffcanvasUtils._DATA_EDGE_KEY,U),void a.OffcanvasUtils._registerCloseHandler(d);if("translate3d(0px, 0px, 0px)"===l[0].style.transform)return a.OffcanvasUtils._toggleClass(d,l,!1),l.removeClass(a.OffcanvasUtils.TRANSITION_SELECTOR),void e.trigger("ojclose",d);T="transitionend webkitTransitionEnd otransitionend oTransitionEnd",u=function(){a.OffcanvasUtils._toggleClass(d,l,!1),l.removeClass(a.OffcanvasUtils.TRANSITION_SELECTOR),l.off(T,u),e.trigger("ojclose",d)},l.on(T,u),l.addClass(a.OffcanvasUtils.TRANSITION_SELECTOR),a.OffcanvasUtils._setTranslationX(l,"start","0px")}}))},a.OffcanvasUtils._animateWrapperAndDrawer=function(s,t,n,f,e){var i,r,l,o,c,O,v,_,E,U,T,u;if(s.removeClass(a.OffcanvasUtils.TRANSITION_SELECTOR),i=Math.round(1e3/60),"none"!==(r=s.css("transform"))){l=r.split("(")[1].split(")")[0].split(",");var d=a.AgentUtils.getAgentInfo(),A="ie"===d.browser&&11===d.browserVersion?12:4;o=parseInt(l[A],10),c=o,O="end"===n?0-f:f,_=Math.max(1,Math.abs(O-o)/(400/i)),E=(new Date).getTime(),U=function(){c===o||""!==s.get(0).style.transform?(T=(new Date).getTime(),u=Math.max(_,_*Math.max((T-E)/i)),E=T,o<O?o=Math.min(O,o+u):o>O&&(o=Math.max(O,o-u)),a.OffcanvasUtils._setTranslationX(s,n,Math.abs(o)+"px"),t.css("width",Math.abs(o)+"px"),o===O?(window.cancelAnimationFrame(v),s.addClass(a.OffcanvasUtils.TRANSITION_SELECTOR),t.trigger("ojopen",e)):v=window.requestAnimationFrame(U)):window.cancelAnimationFrame(v)},v=window.requestAnimationFrame(U)}},a.OffcanvasUtils.tearDownPanToReveal=function(t){var n=a.OffcanvasUtils._getDrawer(t),f=a.OffcanvasUtils._getOuterWrapper(n);s(f).off("panstart panmove panend")},r});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojkoshared',["ojs/ojconfig","knockout","ojs/ojlogger"],function(e,t,n){"use strict";function r(){this.Init()}function i(n,r){return function(i,o,s,a){var u=e.getExpressionEvaluator();return u?function(e,n,r,i){var o=i[e];if(!o){var s=t.expressionRewriting.preProcessBindings(e,n);o=r.createEvaluator("{"+s+"}").evaluate,i[e]=o}return o}(i,a,u,r)([o.$data||{},o,{$element:s}]):n(i,o,s,a)}}return oj.Object.createSubclass(r,oj.Object,"ComponentBinding.GlobalChangeQueue"),r.prototype.Init=function(){r.superclass.Init.call(this),this._trackers=[],this._queue=[]},r.prototype.registerComponentChanges=function(e){-1===this._trackers.indexOf(e)&&(this._trackers.push(e),this._delayTimer||(this._delayTimer=setTimeout(oj.Object.createCallback(this,this._deliverChangesImpl),1),this._delayPromise=new Promise(function(e){this._delayPromiseResolver=e}.bind(this))))},r.prototype.deliverChanges=function(){this._delayTimer&&clearTimeout(this._delayTimer),this._deliverChangesImpl()},r.prototype.getThrottlePromise=function(){return this._delayPromise||Promise.resolve()},r.prototype._deliverChangesImpl=function(){this._delayTimer=null,this._resolveDelayPromise();var e=this._trackers;this._trackers=[];for(var t=0;t<e.length;t++){var n=e[t];this._queue.push({tracker:n,changes:n.flushChanges()})}for(;this._queue.length>0;){var r=this._queue.shift();r.tracker.applyChanges(r.changes)}},r.prototype._resolveDelayPromise=function(){this._delayPromise&&(this._delayPromiseResolver(),this._delayPromiseResolver=null,this._delayPromise=null)},(new function(){var o=new WeakMap,s={},a={},u={},c="_ojExtended",l="_ojCacheScope",d=new r;function p(t){var n,r=e.getExpressionEvaluator();if(r){var i=r.createEvaluator(t).evaluate;return function(e,t){return i([e,e.$data||{},{$element:t}])}}try{n=new Function("$context","$element","with($context.$data||{}){with($context){return "+t+"}}")}catch(e){throw new Error(e.message+' in expression "'+t+'"')}return n}function h(e,t,n){if(!n)return e(t,n);var r,i=o,s=n[l]||n;(r=i.get(s))||(r={},i.set(s,r));var a=r[t];return a||(a=e(t,n),r[t]=a),a}function f(e,t,n){var r=t.getBindingsString;if(r)return r.call(t,e,n);switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:var i=e.nodeValue.match(/^\s*ko(?:\s+([\s\S]+))?\s*$/);return i?i[1]:null;default:return null}}this.install=function(){var e=t.bindingProvider,r=e.instance;if(!r.getBindingAccessors)return n.error("JET's Knockout bindings are not compatible with the current binding provider since it does not implement getBindingAccessors()"),this;var o={getWrapped:function(){return r}};e.instance=o;var l=[];return l.push("getBindingAccessors","nodeHasBindings","getBindings"),l.forEach(function(e){o[e]=function(e,n,r){var i="nodeHasBindings"===n;return function(o){if(i){var a=o.nodeType;if(1!==a&&8!==a)return!1}var u=r(n,e[n]),c=u?u.apply(e,arguments):null,l=s[n];if(null!=l){var d=arguments;l.forEach(function(n){var r=Array.prototype.slice.call(d);r.push(c,e),c=t.ignoreDependencies(n,null,r)})}return c}}(r,e,function(e,n){return"getBindingAccessors"!==e?n:function(e,n){return function(r,i){if(i[c]){var o=f(r,n,i),s=o?function(e,n){return h(function(e){var n=t.expressionRewriting.preProcessBindings(e,{valueAccessors:!0});return p("{"+n+"}")},e,n)}(o,i)(i,r):null;if(1===r.nodeType&&t.components.isRegistered(r.tagName.toLowerCase())){var a=e.call(n,r,i),u=a.component;u&&((s=s||{}).component=u)}return s}return e.call(n,r,i)}}(n,r)})}),o.preprocessNode=function(e){var n=e.preprocessNode;return function(r){var i,o,s=null;return 1===r.nodeType&&(i=a[r.nodeName.toLowerCase()]),i||(i=n,s=e),i&&(o=t.ignoreDependencies(i,s,[r])),Array.isArray(o)&&(o=function(e,n){for(var r=t.bindingProvider.instance,i=n.slice(0),o=n[0],s=0,a=0;s>=0;){var u=t.virtualElements.nextSibling(o);if(o!==e){var c=r.preprocessNode(o);Array.isArray(c)&&(i.splice.apply(i,[a,1].concat(c)),a+=c.length-1)}a+=1;var l=s+1;s=(o=u)?n.indexOf(o,l):-1,a+=s-l}return i}(r,o)),o}}(r),function(e){var t=e.nativeTemplateEngine.prototype,n="renderTemplateSource",r=t[n];t[n]=function(e,t,n,i){return r.call(this,e,t,n,i||document)}}(t),function(e){e.components.loaders.unshift({loadTemplate:function(t,n,r){if("string"==typeof n){var i=e.utils.parseHtmlFragment(n,document);e.components.defaultLoader.loadTemplate(t,i,r)}else r(null)}})}(t),function(e){for(var r,o=t.bindingProvider.instance;o&&!r;){var s=o.parseBindingsString;s?(r=!0,o.parseBindingsString=i(s.bind(o),e)):o=o.getWrapped?o.getWrapped():null}r||n.error("Unable to patch KO expression evaluation implementation. If you have a custom binding provider, make sure it implements the getWrapped() method that returns the default binding provider instance.")}(u),this},this.addPostprocessor=function(e){Object.keys(e).forEach(function(t){s[t]=s[t]||[],s[t].push(e[t])})},this.registerPreprocessor=function(e,t){a[e]=t},this.getBindingsString=function(e,t,n){return f(e,t,n)},this.extendBindingContext=function(e,t,n,r,i){var o={$current:t,$root:void 0,$parent:void 0,$parents:void 0};return n&&(o[n]=t),r&&(o[r]=t),e?o=e.extend(o):o.$data={},Object.defineProperty(o,l,{value:i}),Object.defineProperty(o,c,{value:!0}),o},this.createBindingExpressionEvaluator=function(t,n){if(n[c])return p(t);var r,i=e.getExpressionEvaluator();if(i){var o=i.createEvaluator(t).evaluate;return function(e){return o([e.$data||{},e])}}try{r=new Function("$context","with($context){with($data||{}){return "+t+";}}")}catch(e){throw new Error(e.message+' in expression "'+t+'"')}return r},this.createEvaluator=function(e,t){return h(this.createBindingExpressionEvaluator,e,t)},this.getGlobalChangeQueue=function(){return d},this.getThrottlePromise=function(){return this.getGlobalChangeQueue().getThrottlePromise()}}).install()});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojtemplateengine',["knockout","ojs/ojcore","ojs/ojkoshared","ojs/ojhtmlutils","ojs/ojlogger"],function(t,e,n,r,o){"use strict";return new function(){this.execute=function(e,n,r,o){var i=a(n),s=n.getAttribute("data-oj-as");return t.applyBindingsToDescendants(u(e,n,r,o,s),i),Array.prototype.slice.call(i.childNodes,0)},this.clean=function(e){return t.cleanNode(e)},this.resolveProperties=function(r,o,s,c,l,f,d,p){var v=u(r,o,l,f,o.getAttribute("data-oj-as"));return function(n,r,o){return i=t.pureComputed(function(){var i={};n.evalMap.forEach(function(e,n){var a=t.utils.unwrapObservable(e(r));o&&o(n,a),i[n[0]]=function(t,e,n){if(e.length<2)return n;for(var r=t[e[0]]||{},o=r,i=e.length-1,a=1;a<i;a++){var u=e[a],s=o[u]||{};o[u]=s,o=s}return o[e[i]]=n,r}(i,n,a)});var a=e.CollectionUtils.copyInto,u=a({},n.staticMap,null,!0);return u=a(u,i,null,!0)}),a={},["peek","subscribe","dispose"].forEach(function(t){a[t]=i[t].bind(i)}),a;var i,a}(function(t,r,o,u,s){var c=i.get(t);if(!c){c={},i.set(t,c);var l=a(t),f=l.querySelector(o);c.evalMap=function(t,r,o){for(var i=new Map,a=t?t.attributes:[],u=0;u<a.length;u++){var s=a[u],c=e.__AttributeUtils.attributeToPropertyName(s.name),l=c.split(".");if(r.has(l[0])){var f=e.__AttributeUtils.getExpressionInfo(s.value),d=f.expr;d&&i.set(l,n.createBindingExpressionEvaluator(d,o))}}return i}(f,u,r),c.staticMap=function(t,e,n){var r={};if(t){var o=t.style;o.display="none",o.position="absolute",t.setAttribute("data-oj-binding-provider","none"),n.appendChild(t),e.forEach(function(e){void 0!==t[e]&&(r[e]=t[e])}),n.removeChild(t)}return r}(f,u,s)}return c}(o,v,s,c,p||r),v,d)},this.defineTrackableProperty=function(e,n,r,o){!function(e,n,r,o){var i=t.observable(r);Object.defineProperty(e,n,{get:function(){return i()},set:function(t){i(t),o&&o(t)},enumerable:!0})}(e,n,r,o)},this.getThrottlePromise=function(){return n.getThrottlePromise()};var i=new WeakMap;function a(t){for(var e=document.createElement("div"),n=r.getTemplateContent(t),o=0;o<n.length;o++)e.appendChild(n[o]);return e}function u(e,r,i,a,u){var s=r.__ojBindingContext?r.__ojBindingContext:t.contextFor(r);return s||(o.info("Binding context not found when processing template for element with id: "+e.id+". Using binding context for element instead."),s=t.contextFor(e)),n.extendBindingContext(s,i,a,u,e)}}});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojcomposite-knockout',["ojs/ojcore","knockout","ojs/ojtemplateengine","ojs/ojlogger","ojs/ojkoshared"],function(e,o,t,n,r){"use strict";!function(){function o(e,o){var n,r,i=["name","slot"],l=!1;if(o?(l=!0,i.push("data"),i.push("as"),r="ko _ojBindTemplateSlot_:{"):(l=!0,i.push("index"),r="ko _ojBindSlot_:{"),l){for(var s=[],d=0;d<i.length;d++){var a=i[d],p=t(e.getAttribute(a));p&&s.push(a+":"+p)}r+=s.join(","),r+="}";var u=document.createComment(r),m=document.createComment("/ko");n=[u];var c=e.parentNode;for(c.insertBefore(u,e);e.childNodes.length>0;){var _=e.childNodes[0];c.insertBefore(_,e),n.push(_)}n.push(m),c.replaceChild(m,e)}return n}function t(o){if(null!=o){var t=e.__AttributeUtils.getExpressionInfo(o).expr;return null==t&&(t="'"+o+"'"),t}return null}r.registerPreprocessor("oj-bind-slot",o),r.registerPreprocessor("oj-slot",o),r.registerPreprocessor("oj-bind-template-slot",function(e){return o(e,!0)})}(),e.CompositeTemplateRenderer={},e.CompositeTemplateRenderer.renderTemplate=function(t,n,r){var i=e.CompositeTemplateRenderer._storeNodes(n,r);o.virtualElements.setDomNodeChildren(n,r),e.CompositeTemplateRenderer.invokeViewModelMethod(n,t.viewModel,"attached",[t.viewModelContext]),e.CompositeTemplateRenderer.invokeViewModelMethod(n,t.viewModel,"connected",[t.viewModelContext]);var l=e.CompositeTemplateRenderer._getKoBindingContext().createChildContext(t.viewModel,void 0,function(o){o[e.Composite.__COMPOSITE_PROP]=n,o.__oj_slots=t.slotMap,o.__oj_nodestorage=i,o.$slotNodeCounts=t.slotNodeCounts,o.$slotCounts=t.slotNodeCounts,o.$props=t.props,o.$properties=t.props,o.$unique=t.unique,o.$uniqueId=t.uniqueId,o.$parent=null,o.$parentContext=null,o.$parents=null,o.$provided=null});o.applyBindingsToDescendants(l,n),e.CompositeTemplateRenderer.invokeViewModelMethod(n,t.viewModel,"bindingsApplied",[t.viewModelContext])},e.CompositeTemplateRenderer.getEnclosingComposite=function(t){for(var n=null,r=o.contextFor(t);r&&!n;r=r.$parentContext)n=r[e.Composite.__COMPOSITE_PROP];return n},e.CompositeTemplateRenderer.createTracker=function(){return o.observable()},e.CompositeTemplateRenderer.invokeViewModelMethod=function(e,t,n,r){if(null!=t){var i=t[n];if("function"==typeof i)try{return o.ignoreDependencies(i,t,r)}catch(o){throw new Error("Error while invoking "+n+" callback for "+e.tagName.toLowerCase()+" with id '"+e.id+"'.")}}},e.CompositeTemplateRenderer._storeNodes=function(o,t){var n,r=o.childNodes;if(r){(n=document.createElement("div")).setAttribute("data-bind","_ojNodeStorage_"),n.style.display="none",t.push(n);for(var i=[],l=0;l<r.length;l++){var s=r[l];e.BaseCustomElementBridge.isSlotable(s)&&i.push(s)}i.forEach(function(e){n.appendChild(e)}),e.Components&&e.Components.subtreeHidden(n)}return n},e.CompositeTemplateRenderer._getKoBindingContext=function(){if(!e.CompositeTemplateRenderer._BINDING_CONTEXT){var t=document.createElement("div");o.applyBindings(null,t),e.CompositeTemplateRenderer._BINDING_CONTEXT=o.contextFor(t),o.cleanNode(t)}return e.CompositeTemplateRenderer._BINDING_CONTEXT},e.CompositeTemplateRenderer._BINDING_CONTEXT=null,o.bindingHandlers._ojNodeStorage_={init:function(){return{controlsDescendantBindings:!0}}},o.bindingHandlers._ojBindSlot_={init:function(t,n,r,l,s){o.utils.domNodeDisposal.addDisposeCallback(t,i.cleanup.bind(null,t,s));var d=s.__oj_slots,a=n(),p=o.utils.unwrapObservable,u=p(a.name)||"",m=p(a.slot)||"",c=p(a.index),_=null!=c?[d[u][c]]:d[u];if(_){var C;for(C=0;C<_.length;C++){_[C].__oj_slots=m}if(o.virtualElements.setDomNodeChildren(t,_),e.Components)for(C=0;C<_.length;C++){var v=_[C];1===v.nodeType&&e.Components.subtreeShown(v)}return{controlsDescendantBindings:!0}}o.virtualElements.childNodes(t).forEach(function(e){var o;(1===(o=e).nodeType||3===o.nodeType&&o.nodeValue.trim())&&(e.__oj_slots=m)})}},o.virtualElements.allowedBindings._ojBindSlot_=!0;var i={cleanup:function(t,n){var r=n.__oj_nodestorage;if(r)for(var i=o.virtualElements.firstChild(t);i;){var l=o.virtualElements.nextSibling(i);null!=i.__oj_slots&&(r.appendChild(i),e.Components&&1===i.nodeType&&e.Components.subtreeHidden(i)),i=l}}};o.bindingHandlers._ojBindTemplateSlot_={init:function(r,l,s,d,a){o.utils.domNodeDisposal.addDisposeCallback(r,i.cleanup.bind(null,r,a));var p=a.__oj_slots,u=l(),m=o.utils.unwrapObservable,c=m(u.name)||"",_=p[c],C=_&&_[_.length-1],v=!1;if(!C)for(var f=o.virtualElements.childNodes(r),g=0;g<f.length;g++)if("TEMPLATE"===f[g].tagName){v=!0,C=f[g];break}if(C){var h=a[e.Composite.__COMPOSITE_PROP];"TEMPLATE"!==C.tagName&&n.error("Slot content for slot '"+c+"' under "+h.tagName.toLowerCase()+" with id '"+h.id+"' should be wrapped inside a <template> node."),C.__oj_slots=m(u.slot)||"",o.computed(function(){var e=m(u.data),n=m(u.as),i=t.execute(v?r:h,C,e,v?n:null);o.virtualElements.setDomNodeChildren(r,i)})}else o.virtualElements.setDomNodeChildren(r,[]);return{controlsDescendantBindings:!0}}},o.virtualElements.allowedBindings._ojBindTemplateSlot_=!0});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojcomposite',["ojs/ojcore","ojs/ojhtmlutils","ojs/ojlogger","ojs/ojmetadatautils","ojs/ojcustomelement","ojs/ojcomposite-knockout"],function(e,t,o,r){"use strict";e.Composite={};e.Composite;return e.Composite.getMetadata=function(t){var o=e.Composite.getComponentMetadata(t);return o?Promise.resolve(o):null},e.Composite.getComponentMetadata=function(t){var o=e.BaseCustomElementBridge.getRegistered(t);return o&&o.composite?e.BaseCustomElementBridge.__GetDescriptor(t)[e.BaseCustomElementBridge.DESC_KEY_META]:null},e.Composite.register=function(t,o){e.CompositeElementBridge.register(t,o)},e.Composite.getContainingComposite=function(t,o){for(var r=null,i=t;i;)if((i=e.CompositeTemplateRenderer.getEnclosingComposite(i))&&"oj-module"!==i.nodeName.toLowerCase()){if(o&&!(16&t.compareDocumentPosition(o)))break;r=i}return r},e.Composite.getBindingProviderName=function(t){return t?t[e.Composite.__BINDING_PROVIDER]:null},e.Composite.__COMPOSITE_PROP="__oj_composite",e.Composite.__BINDING_PROVIDER="__oj_binding_prvdr",e.CompositeElementBridge={},e.CompositeElementBridge.proto=Object.create(e.BaseCustomElementBridge.proto),e.CollectionUtils.copyInto(e.CompositeElementBridge.proto,{beforePropertyChangedEvent:function(t,o,r){var i={property:o};e.CollectionUtils.copyInto(i,r),e.CompositeTemplateRenderer.invokeViewModelMethod(t,this._VIEW_MODEL,"propertyChanged",[i])},AddComponentMethods:function(t){var o=function(t,o,r,i,n,s){if(!o.SaveEarlyPropertySet(r,i)){var a=o.SetProperty(t,r,i,n,s);if(a.propertySet)if(a.isSubproperty)e.CompositeElementBridge._getPropertyTracker(o,a.property).valueHasMutated()}};t.setProperty=function(t,r){var i=e.BaseCustomElementBridge.getInstance(this);o(this,i,t,r,this,!0)},t.getProperty=function(t){return e.BaseCustomElementBridge.getInstance(this).GetProperty(this,t,this)},t._propsProto.setProperty=function(e,t){o(this._ELEMENT,this._BRIDGE,e,t,this,!1)},t._propsProto.getProperty=function(e){return this._BRIDGE.GetProperty(this,e,this)},t.getNodeBySubId=function(t){var o=e.BaseCustomElementBridge.getInstance(this),r=o._getViewModel(this);return r.getNodeBySubId?r.getNodeBySubId(t,o._getNodeBySubId.bind(this)):o._getNodeBySubId.bind(this)(t)},t.getSubIdByNode=function(t){var o=e.BaseCustomElementBridge.getInstance(this),r=o._getViewModel(this);return r.getSubIdByNode?r.getSubIdByNode(t,o._getSubIdByNode.bind(this)):o._getSubIdByNode.bind(this)(t)}},CreateComponent:function(t){for(var o={},r=e.BaseCustomElementBridge.getSlotMap(t),i=Object.keys(r),n=0;n<i.length;n++){var s=i[n];o[s]=r[s].length}this._SLOT_MAP=r;var a=e.__AttributeUtils.getUniqueId(),d={element:t,props:Promise.resolve(this._PROPS),properties:this._PROPS,slotNodeCounts:Promise.resolve(o),slotCounts:o,unique:a};d.uniqueId=t.id?t.id:a,this._VM_CONTEXT=d;var m=e.BaseCustomElementBridge.__GetDescriptor(t.tagName)[e.BaseCustomElementBridge.DESC_KEY_VIEW_MODEL];m="function"==typeof m?new m(d):e.CompositeTemplateRenderer.invokeViewModelMethod(t,m,"initialize",[d])||m,this._VIEW_MODEL=m;var u=e.CompositeTemplateRenderer.invokeViewModelMethod(t,m,"activated",[d])||Promise.resolve(!0),l=this;u.then(function(){var r={props:l._PROPS,slotMap:l._SLOT_MAP,slotNodeCounts:o,unique:l._VM_CONTEXT.unique,uniqueId:l._VM_CONTEXT.uniqueId,viewModel:l._VIEW_MODEL,viewModelContext:l._VM_CONTEXT};Object.defineProperty(t,e.Composite.__BINDING_PROVIDER,{value:"knockout"}),e.Components&&e.Components.unmarkPendingSubtreeHidden(t);var i=e.BaseCustomElementBridge.__GetCache(t.tagName),n=e.CompositeElementBridge._getDomNodes(i.view,t);e.CompositeTemplateRenderer.renderTemplate(r,t,n),l.__READY_TO_FIRE=!0,l.resolveDelayedReadyPromise()}).catch(function(e){l.throwError(t,"Error while creating component.",e)})},DefineMethodCallback:function(t,o,r){t[o]=function(){var t=r.internalName||o,i=e.BaseCustomElementBridge.getInstance(this)._getViewModel(this);return i[t].apply(i,arguments)}},DefinePropertyCallback:function(t,i,n){var s=function(t,r){if(!this._BRIDGE.SaveEarlyPropertySet(i,t)){var s=e.CompositeElementBridge._getPropertyTracker(this._BRIDGE,i),a=s.peek();if(e.BaseCustomElementBridge.__CompareOptionValues(i,n,t,a))o.info(e.BaseCustomElementBridge.getElementInfo(this._ELEMENT)+": Ignoring property set for property '"+i+"' with same value.");else if(r&&(t=this._BRIDGE.ValidatePropertySet(this._ELEMENT,i,t)),n._eventListener&&this._BRIDGE.SetEventListenerProperty(this._ELEMENT,i,t),s(t),!n._derived){var d=r?"external":"internal";e.BaseCustomElementBridge.__FirePropertyChangeEvent(this._ELEMENT,i,t,a,d)}}},a=function(t){var o=e.CompositeElementBridge._getPropertyTracker(this._BRIDGE,i),s=t?o.peek():o();return void 0===s&&o(s=r.getDefaultValue(n)),s};n._derived||e.BaseCustomElementBridge.__DefineDynamicObjectProperty(t._propsProto,i,function(){return a.bind(this,!1)()},function(e){s.bind(this)(e,!1)}),e.BaseCustomElementBridge.__DefineDynamicObjectProperty(t,i,function(){var t=e.BaseCustomElementBridge.getInstance(this);return a.bind(t._PROPS,!0)()},function(t){var o=e.BaseCustomElementBridge.getInstance(this);s.bind(o._PROPS)(t,!0)})},GetMetadata:function(e){return e._metadata||{}},GetTrackChildrenOption:function(e){return"immediate"},HandleDetached:function(t){e.BaseCustomElementBridge.proto.HandleDetached.call(this,t),e.CompositeTemplateRenderer.invokeViewModelMethod(t,this._VIEW_MODEL,"detached",[t]),e.CompositeTemplateRenderer.invokeViewModelMethod(t,this._VIEW_MODEL,"disconnected",[t])},HandleReattached:function(t){e.BaseCustomElementBridge.proto.HandleReattached.call(this,t),e.CompositeTemplateRenderer.invokeViewModelMethod(t,this._VIEW_MODEL,"connected",[this._VM_CONTEXT])},InitializeElement:function(t){var o;e.BaseCustomElementBridge.proto.InitializeElement.call(this,t),e.Components&&e.Components.markPendingSubtreeHidden(t);var r=e.BaseCustomElementBridge.__GetCache(t.tagName);if(!r.view){var i=(o=e.BaseCustomElementBridge.__GetDescriptor(t.tagName))[e.BaseCustomElementBridge.DESC_KEY_VIEW];r.view||(r.view="string"==typeof i?e.CompositeElementBridge._getDomNodes(i,t):i)}if(!r.css){o||(o=e.BaseCustomElementBridge.__GetDescriptor(t.tagName));var n=o[e.BaseCustomElementBridge.DESC_KEY_CSS];if(n){var s=document.createElement("style");s.type="text/css",s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n)),document.head.appendChild(s),r.css=!0}}e.BaseCustomElementBridge.__InitProperties(t,t)},InitializePrototype:function(t){e.BaseCustomElementBridge.proto.InitializePrototype.call(this,t),Object.defineProperty(t,"_propsProto",{value:{}})},InitializeBridge:function(t,o){e.BaseCustomElementBridge.proto.InitializeBridge.call(this,t,o),t._propsProto&&(this._PROPS=Object.create(t._propsProto),this._PROPS._BRIDGE=this,this._PROPS._ELEMENT=t)},ShouldRemoveDisabled:function(){var e=this.METADATA.extension;return!!e&&!0===e._SHOULD_REMOVE_DISABLED},_getNodeBySubId:function(t){var o=e.CompositeElementBridge.__GetSubIdMap(this)[t.subId];if(o){if(o.alias){var r=e.CollectionUtils.copyInto({},t,void 0,!0);r.subId=o.alias;var i=o.node;return i.getNodeBySubId?i.getNodeBySubId(r):e.Components.__GetWidgetConstructor(i)("getNodeBySubId",r)}return o.node}return null},_getSubIdByNode:function(t){if(!this.contains(t))return null;var o,r,i,n=e.CompositeElementBridge.__GetNodeMap(this),s=e.Composite.getContainingComposite(t,this);if(null!=s){if((r=n[o=s.node.getAttribute("data-oj-subid-map")])&&s.getSubIdByNode&&(i=s.getSubIdByNode(t))){var a=r.map[i.subId];return i.subId=a,i}return null}for(var d=t;d!==this&&!(o=d.getAttribute("data-oj-subid-map")||d.getAttribute("data-oj-subid"));)d=d.parentNode;if(r=n[o]){if(!r.map)return{subId:o};var m=r.node;if(i=m.getSubIdByNode?m.getSubIdByNode(t):e.Components.__GetWidgetConstructor(m)("getSubIdByNode",t))return i.subId=r.map[i.subId],i}return null},_getViewModel:function(e){return this._VIEW_MODEL||this.throwError(e,"Cannot access methods before element is upgraded."),this._VIEW_MODEL}}),e.CompositeElementBridge.register=function(t,r){var i={};if(i[e.BaseCustomElementBridge.DESC_KEY_META]=e.CompositeElementBridge._getResource(t,r,e.BaseCustomElementBridge.DESC_KEY_META),i[e.BaseCustomElementBridge.DESC_KEY_VIEW]=e.CompositeElementBridge._getResource(t,r,e.BaseCustomElementBridge.DESC_KEY_VIEW),i[e.BaseCustomElementBridge.DESC_KEY_CSS]=e.CompositeElementBridge._getResource(t,r,e.BaseCustomElementBridge.DESC_KEY_CSS),i[e.BaseCustomElementBridge.DESC_KEY_VIEW_MODEL]=e.CompositeElementBridge._getResource(t,r,e.BaseCustomElementBridge.DESC_KEY_VIEW_MODEL),i[e.BaseCustomElementBridge.DESC_KEY_PARSE_FUN]=r[e.BaseCustomElementBridge.DESC_KEY_PARSE_FUN],e.BaseCustomElementBridge.__Register(t,i,e.CompositeElementBridge.proto,!0)){var n=i[e.BaseCustomElementBridge.DESC_KEY_META];if(n||(o.warn("Composite registered'"+t.toLowerCase()+"' without Metadata."),n={}),null==i[e.BaseCustomElementBridge.DESC_KEY_VIEW])throw new Error("Cannot register composite '"+t.toLowerCase()+"' without a View.");i._metadata=e.BaseCustomElementBridge.__ProcessEventListeners(n,!1),customElements.define(t.toLowerCase(),e.CompositeElementBridge.proto.getClass(i))}},e.CompositeElementBridge._getDomNodes=function(o,r){var i,n;if("string"==typeof o)return t.stringToNodeArray(o);if(e.CompositeElementBridge._isDocumentFragment(o)){n=o.cloneNode(!0);var s=[];for(i=0;i<n.childNodes.length;i++)s.push(n.childNodes[i]);return s}if(Array.isArray(o)){for(n=[],i=0;i<o.length;i++)n.push(o[i].cloneNode(!0));return n}e.BaseCustomElementBridge.getInstance(r).throwError(r,"The composite View is not one of the following supported types: string, Array of DOM nodes, DocumentFragment")},e.CompositeElementBridge._generateSubIdMap=function(t,o){if(!t._SUBID_MAP){for(var r={},i={},n=o.children,s=0;s<n.length;s++)e.CompositeElementBridge._walkSubtree(r,i,n[s]);t._NODE_MAP=i,t._SUBID_MAP=r}},e.CompositeElementBridge._walkSubtree=function(t,o,r){if(!r.hasAttribute("slot")&&(e.CompositeElementBridge._addNodeToSubIdMap(t,o,r),!e.BaseCustomElementBridge.getRegistered(r.tagName)&&!e.Components.__GetWidgetConstructor(r)))for(var i=r.children,n=0;n<i.length;n++)e.CompositeElementBridge._walkSubtree(t,o,i[n])},e.CompositeElementBridge._addNodeToSubIdMap=function(e,t,o){var r=o.getAttribute("data-oj-subid"),i=o.getAttribute("data-oj-subid-map");if(i){var n=JSON.parse(i);if("object"==typeof n&&!(n instanceof Array)){for(var s=n,a={},d=Object.keys(s),m=0;m<d.length;m++){var u=d[m];e[u]={alias:s[u],node:o},a[s[u]]=u}t[i]={map:a,node:o}}}else r&&(e[r]={node:o},t[r]={node:o})},e.CompositeElementBridge.__GetSubIdMap=function(t){var o=e.BaseCustomElementBridge.getInstance(t);return e.CompositeElementBridge._generateSubIdMap(o,t),o._SUBID_MAP},e.CompositeElementBridge.__GetNodeMap=function(t){var o=e.BaseCustomElementBridge.getInstance(t);return e.CompositeElementBridge._generateSubIdMap(o,t),o._NODE_MAP},e.CompositeElementBridge._getPropertyTracker=function(t,o){return t._TRACKERS||(t._TRACKERS={}),t._TRACKERS[o]||(t._TRACKERS[o]=e.CompositeTemplateRenderer.createTracker()),t._TRACKERS[o]},e.CompositeElementBridge._getResource=function(e,t,o){var r=t[o];if(null!=r){var i=Object.prototype.hasOwnProperty;if(i.call(r,"inline"))return r.inline;if(i.call(r,"promise"))throw new Error("Error while registering "+e+". The resource type for descriptor key '"+o+"' is no longer supported. The resource should be passed directly as the value instead.");return r}},e.CompositeElementBridge._isDocumentFragment=function(e){return window.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType},e.Composite});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojmodule',["ojs/ojcore","knockout","ojs/ojlogger","ojs/ojcontext"],function(e,n,i,o){"use strict";e.ModuleBinding={};e.ModuleBinding;return e.ModuleBinding.defaults={viewPath:"text!views/",viewSuffix:".html",modelPath:"viewModels/",initializeMethod:"initialize",disposeMethod:"dispose",activatedHandler:"handleActivated",attachedHandler:"handleAttached",detachedHandler:"handleDetached",bindingsAppliedHandler:"handleBindingsApplied",deactivatedHandler:"handleDeactivated",transitionCompletedHandler:"handleTransitionCompleted"},e.ModuleBinding._EMPTY_MODULE="oj:blank",function(){function t(e,i,o){var t=i||e,l=[];o&&e===t&&(o.parentNode.removeChild(o),l.push(o)),n.virtualElements.setDomNodeChildren(t,l)}function l(e,n){e.forEach(function(e){n.appendChild(e)})}function r(e,i){for(var o,t=0;t<e.length&&!(o=n.contextFor(e[t]));t++);return o&&o.$module&&o.$module===i}function d(e,n,i){var o={};i[0]&&(o.viewModel=i[0]),i[1]&&(o.view=i[1]);var t=new CustomEvent(n,{detail:o});e.dispatchEvent(t)}function a(e,i,o){if(e&&e[i]){var t={element:o[0],valueAccessor:o[1]};return o.length>2&&(t.viewModel=o[2],o.length>3&&(t["boolean"==typeof o[3]?"fromCache":"cachedNodes"]=o[3])),n.ignoreDependencies(e[i],e,[t])}}function u(i,o,t){if(null!=i){var l=e.ModuleBinding.defaults[o];if(null!=l&&i){var r,d=i[l];if("function"==typeof d)return t&&(r={element:t[0],valueAccessor:t[1]},t.length>2&&(r["boolean"==typeof t[2]?"fromCache":"cachedNodes"]=t[2])),n.ignoreDependencies(d,i,[r])}}}function s(e,i){if(e&&i){var o=e[i];"function"==typeof o&&n.ignoreDependencies(o,e)}}function c(e,i,o){for(var t=e;null!=t;){var l=n.virtualElements.nextSibling(t),r=t.nodeType;t===i||1!==r&&8!==r||o(t),t=l}}function f(e,i){for(var o=i.length-1;o>=0;o--)n.virtualElements.prepend(e,i[o])}function v(e,n){if(n)for(var i=0;i<e.length;i++){var o=e[i];1===o.nodeType&&n(o)}}function p(e,n,o){var t=e||require,l=new Promise(function(e,n){t([o],e,n)});return l=l.catch(function(e){throw i.error("ojModule failed to load "+o),e})}n.bindingHandlers.ojModule={init:function(h,m,w,g,M){var C,b,E,y,N,P,j,V,D={},A=-1,B=h.parentNode&&"OJ-MODULE"===h.parentNode.nodeName,H=B?function(){}:u,$=B?function(){}:a,x=B?s:function(){},T=B?d:function(){};function _(){P&&(P(),P=null)}var O=function(e){H(e,"disposeMethod",[h,m])},F=function(){O(C)};n.utils.domNodeDisposal.addDisposeCallback(h,function(){F();for(var e=Object.keys(D),n=0;n<e.length;n++){var i=D[e[n]].model;O(i)}_()});var S=new Error("Promise cancelled because ojModule is fetching new View and ViewModel"),k=function(e){if(e!==A)throw S},L=h;return 8===h.nodeType&&(L=h.parentNode,n.virtualElements.setDomNodeChildren(h,[]),N=h.nextSibling),n.computed(function(){if(A+=1,!P){var d=o.getContext(L).getBusyContext();P=d.addBusyState({description:"ojModule binding on a node with the Id "+h.id+"is loading the module. Binding evaluator: "+m.toString()})}var a,u,s,w,g,O,q,I,U,z,J,Y,K,R,W=0===A,G=n.utils.unwrapObservable,Q=G(m());"string"==typeof Q?a=Q:(a=G(Q.name),u=G(Q.viewName),s=G(Q.params),w=G(Q.viewModelFactory),g=G(Q.createViewFunction),O=G(Q.cacheKey),q=G(Q.lifecycleListener),I=G(Q.animation),Y=G(Q.view),K=G(Q.viewModel),U=G(Q.require),R=G(Q.cleanupMode)),null==U||U instanceof Function||(J=U.viewPath,z=U.modelPath,U=U.instance),u=null==u?a:u;var X,Z,ee,ne,ie=e.ModuleBinding._EMPTY_MODULE===u,oe=$(q,"activated",[h,m]);if(T(L,"ojTransitionStart",[K]),ie?(X=Promise.resolve([]),Z=Promise.resolve(null)):null!=(ee=null==O?null:D[O])&&(delete D[O],X=Promise.resolve(ee.view),Z=Promise.resolve(ee.model)),null==X&&null!=Y&&(X=Promise.resolve(Y)),null==Z&&(null!=K?Z=Promise.resolve(K):null!=w&&(Z=n.ignoreDependencies(w.createViewModel,w,[s,m])),null==Z&&null!=a&&(null==z&&(z=e.ModuleBinding.defaults.modelPath),Z=p(U,"viewModel",z+a)),null!=Z&&(Z=Z.then(function(e,n){return k(e),n="function"==typeof n?new n(s):H(n,"initializeMethod",[h,m])||n}.bind(null,A)),null==X&&null!=g&&(X=Z.then(function(e,n){if(k(e),null==n)throw _(),new Error("createViewFunction option cannot be used when the ViewModel is null");var i=n[g];if(null==i)throw _(),new Error("function specified by the createViewFunction option was not found on the ViewModel");return i.call(n)}.bind(null,A)))),null==X)){if(null==u)throw _(),new Error("View name or view instance must be specified");null==J&&(J=e.ModuleBinding.defaults.viewPath),X=p(U,"view",J+u+e.ModuleBinding.defaults.viewSuffix)}if(null==X)throw _(),new Error("ojModule is missing a View");null!=Z&&(ne=Z.then(function(e,n){return k(e),H(n,"activatedHandler",[h,m])}.bind(null,A))),Promise.all([X,Z,oe,ne,b]).then(function(o,d){if(o===A){var a=d[0];if(null==a)throw _(),new Error("The module's View was resolved to null");var u=function(e,i){var o=e;if("string"==typeof o)o=n.utils.parseHtmlFragment(o,document);else if(function(e){if(window.DocumentFragment)return e instanceof DocumentFragment;return e&&11===e.nodeType}(o))o=n.utils.arrayPushAll([],o.childNodes);else{if(!Array.isArray(o))throw i(),new Error("The View ("+o+") has an unsupported type");o=n.utils.arrayPushAll([],o)}return o}(a,_),p=d[1];!function(e,n,i,o,t){if(o&&n.length>0&&!r(n,i)){if(n[0]._oj_module_used_view)throw t(),new Error("The oj-module with id '"+e.id+"' cannot apply binding on a previously cleaned view.");Object.defineProperty(n[0],"_oj_module_used_view",{value:!0})}}(h,u,p,B,_);var w,g=!1,P=function(e,i,o){for(var t=[],l=n.virtualElements.firstChild(e);null!=l&&l!==o;l=l.nextSibling)l!==i&&t.push(l);return t}(h,y,N),S=function(e,i){var o=[];return c(n.virtualElements.firstChild(e),i,function(e){o.push(e)}),o}(h,y);null==E||j?B&&(w=P):(g=!0,w=P,y||((y=document.createElement("div")).className="oj-helper-module-cache",n.virtualElements.prepend(h,y)));var k=!1,U=function(i){if(!k){if(k=!0,g)l(P,y),t(h,i||h,y);else if(B&&"none"===V)for(var o=0;o<w.length;o++){var r=w[o];r.parentNode.removeChild(r)}else S.forEach(function(e){n.cleanNode(e)}),t(h,i||h,y);W||($(q,"detached",[h,m,C,w]),H(C,"detachedHandler",[h,m,w]),x(C,"disconnected"),T(L,"ojViewDisconnected",[C,w]),$(q,"deactivated",[h,m,C]),H(C,"deactivatedHandler",[h,m])),g?(v(w,e.Components?e.Components.subtreeHidden:null),D[E]={model:C,view:w}):B&&"none"===V?v(w,e.Components?e.Components.subtreeDetached:null):F(),C=p,E=O,j=ie,V=R}},z=function(){$(q,"transitionCompleted",[h,m,p]),H(p,"transitionCompletedHandler",[h,m]),x(p,"transitionCompleted"),T(L,"ojTransitionEnd",[p]),_()};if(null!=I){var J=function(o,t,r,d,a,u,s){var c,p,h=o,m=t.canAnimate;if(null!=m&&!m.call(t,h))return;var w=t.prepareAnimation.call(t,h);w&&(c=w.newViewParent,p=w.oldViewParent);var g=c||r;p&&p!==r?l(d,p):g===r&&u(null);g!==r&&n.virtualElements.setDomNodeChildren(g,[]);a(g);var M=Array.prototype.slice.call(g.childNodes),C=!1,b=function(){if(!C&&(C=!0,r!==g)){f(r,M);var n=r.parentNode&&"OJ-MODULE"===r.parentNode.nodeName;e.Components&&!n&&(v(M,e.Components.subtreeDetached),v(M,e.Components.subtreeAttached))}},E=u.bind(null,p);h.newViewParent=c,h.oldViewParent=p,h.oldViewNodes=d,h.removeOldView=E,h.insertNewView=b;var y=function(){E(),b(),s()};return t.animate.call(t,h).then(y,function(){y(),i.error("ojModule animation promise was rejected")})}(function(e,n,i,o,t,l){return{node:l?e.parentNode:e,valueAccessor:l?null:n,isInitial:i,oldViewModel:o,newViewModel:t}}(h,m,W,C,p,B),I,h,P,Y,U,z);b=function(e){if(!e)return e;return new Promise(function(n,i){e.then(n,n)})}(J)}else b=void 0;b||(U(null),Y(null),z())}function Y(i){var o=i||h,t=B&&r(u,p);f(o,u);var l=null!=ee;if(l?v(u,e.Components?e.Components.subtreeShown:null):t&&v(u,e.Components?e.Components.subtreeAttached:null),$(q,"attached",[o,m,p,l]),H(p,"attachedHandler",[o,m,l]),x(p,"connected"),T(L,"ojViewConnected",[p]),!l&&!t){var d=M.createChildContext(p,void 0,function(e){e.$module=p,e.$params=s});B&&(d.$parent=void 0,d.$parents=void 0,d.$parentContext=void 0,d.$props=void 0,d.$properties=void 0,d.$slotNodeCounts=void 0,d.$slotCounts=void 0,d.$unique=void 0,d.$uniqueId=void 0,d.$provided=void 0),function(e,i,o,t){var l=n.bindingProvider.instance,r=l.preprocessNode;r&&(c(i,t,function(e){r.call(l,e)}),i=n.virtualElements.firstChild(e));c(i,t,function(e){n.applyBindings(o,e)})}(o,u[0],d,y),$(q,"bindingsApplied",[o,m,p]),H(p,"bindingsAppliedHandler",[o,m])}}}.bind(null,A),function(e,n){n!==S&&null!=n&&(_(),i.error(n))}.bind(null,A))},null,{disposeWhenNodeIsRemoved:h}),{controlsDescendantBindings:!0}}},n.virtualElements.allowedBindings.ojModule=!0}(),e.ModuleBinding});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojmodule-element',["ojs/ojcore","knockout","ojs/ojcontext","ojs/ojcomposite","ojs/ojmodule"],function(e,o,n,i){"use strict";i.register("oj-module",{view:'\x3c!-- ko ojModule: {"view":config().view, "viewModel":config().viewModel,"cleanupMode":config().cleanupMode,"animation":animation} --\x3e\x3c!-- /ko --\x3e',metadata:{properties:{animation:{type:"object"},config:{type:"object|Promise",properties:{cleanupMode:{type:"string",enumValues:["none","onDisconnect"],value:"onDisconnect"},view:{type:"Array<Node>"},viewModel:{type:"object"}}}},events:{ojViewDisconnected:{},ojTransitionStart:{},ojViewConnected:{},ojTransitionEnd:{}},extension:{}},viewModel:function(e){var i=e.element,t=e.properties,c=this;function s(){c.busyCallback||(c.busyCallback=n.getContext(i).getBusyContext().addBusyState({description:"oj-module is waiting on config Promise resolution"}));var e=Promise.resolve(t.config);c.configPromise=e,e.then(function(o){e===c.configPromise&&(c.config(o),c.busyCallback(),c.busyCallback=null)},function(o){if(e===c.configPromise)throw c.busyCallback(),c.busyCallback=null,o})}function a(e,n){var i=e&&e[n];"function"==typeof i&&o.ignoreDependencies(i,e)}function l(e,o,n){var t={};o&&(t.viewModel=o),n&&(t.view=n);var c=new CustomEvent(e,{detail:t});i.dispatchEvent(c)}this.animation=e.properties.animation,this.config=o.observable({view:[]}),this.configPromise=null,this.propertyChanged=function(e){"animation"===e.property?c.animation=e.value:"config"===e.property&&s()},s(),this.connected=function(){var e,o,n=this.config();(o=(e=n)?e.view:null)&&o.length>0&&i.contains(o[0])&&(a(n.viewModel,"connected"),l("ojViewConnected",n.viewModel))}.bind(this),this.disconnected=function(){var e=this.config();a(e.viewModel,"disconnected"),l("ojViewDisconnected",e.viewModel,e.view)}.bind(this)}})});
var __importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e};define('appController',["require","exports","ojs/ojmodulerouter-adapter","ojs/ojcorerouter","ojs/ojurlparamadapter","ojs/ojarraytreedataprovider","ojs/ojoffcanvas","knockout","ojs/ojmodule-element"],(function(require,t,e,a,r,o,i,n){"use strict";return n=__importStar(n),new(function(){function t(){var t=this,s=[{path:"",redirect:"dashboard"},{path:"dashboard",detail:{label:"Dashboard",module:"x-dashboard",iconClass:"oj-navigationlist-item-icon oj-ux-ico-bar-chart"}},{path:"help",detail:{label:"Help",module:"x-help",iconClass:"oj-navigationlist-item-icon oj-ux-ico-help"},children:Object.keys(DOC_PAGES).map((function(t){return{path:"help/"+t,detail:{label:(e=t,a=e.indexOf("."),a>=0&&(e=e.substring(0,a)),(e=e.replace(/-/g," ")).replace(/\w\S*/g,(function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})))}};var e,a}))}],u=new a(s,{urlAdapter:new r});u.sync(),this.moduleAdapter=new e(u,{pathKey:"module"}),this.state=n.observable("dashboard"),this.selection=n.pureComputed({read:function(){return t.state()},write:function(t){if(t){var e=t.indexOf("/");e<0?u.go({path:t}):u.go({path:t.substring(0,e),params:{topic:t.substring(e+1)}})}}}),u.currentState.subscribe((function(e){var a=e.state;a&&(a.params.topic?t.state(a.path+"/"+a.params.topic):t.state(a.path))})),this.navDataProvider=new o(s.slice(1),{keyAttributes:"path"}),this.appName=n.observable("GraalVM Dashboard"),this.navigationDrawer={displayMode:"push",selector:"#navigationDrawer",content:"#main",autoDismiss:"focusLoss"},this.toggleNavigation=function(){return i.toggle(t.navigationDrawer)}}return t.prototype.itemOnly=function(t){var e;return null!==(e=null==t?void 0:t.leaf)&&void 0!==e&&e},t}())}));
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojknockouttemplateutils',["jquery","knockout"],function(e,t){"use strict";var n={getRenderer:function(n,r){var a=function(a){var l=a._parentElement||a.parentElement,o=t.contextFor(a.componentElement);if(o){var c=o.createChildContext(a.data,null,function(e){e.$context=a});t.renderTemplate(n,c,{afterRender:function(t){e(t)._ojDetectCleanData()}},l,r?"replaceNode":"replaceChildren")}return null};return function(t){if(t.componentElement.classList&&t.componentElement.classList.contains("oj-dvtbase")){var r=document.createElement("div");r.style.display="none",r._dvtcontext=t._dvtcontext,t.componentElement.appendChild(r),Object.defineProperty(t,"_parentElement",{value:r,enumerable:!1}),Object.defineProperty(t,"_templateCleanup",{value:function(){e(r).remove()},enumerable:!1}),Object.defineProperty(t,"_templateName",{value:n,enumerable:!1}),a(t);var l=r.children[0];return l?(r.removeChild(l),e(r).remove(),{insert:l}):{preventDefault:!0}}return a(t)}}};return n});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojresponsiveknockoututils',["ojs/ojcore","jquery","ojs/ojresponsiveutils","knockout"],function(e,r,n,t){"use strict";var a={createMediaQueryObservable:function(e){if(null==e)throw new Error("ResponsiveKnockoutUtils.createMediaQueryObservable: aborting, queryString is null");var n=window.matchMedia(e),a=t.observable(n.matches);return n.addListener(function(e){a(e.matches)}),-1!==navigator.userAgent.indexOf("WebKit")&&-1===navigator.userAgent.indexOf("Chrome")&&r(window).resize(function(){var e="oj-webkit-bug-123293";0===r("body").has("."+e).length&&r("body").append('<div aria-hidden="true" class="oj-helper-hidden-accessible '+e+'">'),r("."+e).text((new Date).getMilliseconds().toString())}),a},createScreenRangeObservable:function(){var e=n.getFrameworkQuery(n.FRAMEWORK_QUERY_KEY.XXL_UP),r=n.getFrameworkQuery(n.FRAMEWORK_QUERY_KEY.XL_UP),i=n.getFrameworkQuery(n.FRAMEWORK_QUERY_KEY.LG_UP),u=n.getFrameworkQuery(n.FRAMEWORK_QUERY_KEY.MD_UP),l=n.getFrameworkQuery(n.FRAMEWORK_QUERY_KEY.SM_UP),o=null==e?null:a.createMediaQueryObservable(e),s=null==r?null:a.createMediaQueryObservable(r),E=null==i?null:a.createMediaQueryObservable(i),c=null==u?null:a.createMediaQueryObservable(u),R=null==l?null:a.createMediaQueryObservable(l);return t.computed(function(){if(o&&o())return n.SCREEN_RANGE.XXL;if(s&&s())return n.SCREEN_RANGE.XL;if(E&&E())return n.SCREEN_RANGE.LG;if(c&&c())return n.SCREEN_RANGE.MD;if(R&&R())return n.SCREEN_RANGE.SM;throw new Error(" NO MATCH in ResponsiveKnockoutUtils.createScreenRangeObservable")})}};return a});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojknockout',["ojs/ojcore","jquery","ojs/ojcontext","knockout","ojs/ojkeysetimpl","ojs/ojknockouttemplateutils","ojs/ojresponsiveknockoututils","ojs/ojlogger","ojs/ojkoshared","ojs/ojtemplateengine","jqueryui-amd/widget"],function(e,t,n,r,i,o,a,s,u,l){"use strict";function d(e,t){var n={};return n.value=t.value,n}var c,p,f,h;function g(e,t,n){return"pieCenter"===e&&t.template&&(t._renderer=B(n,t.template)),{pieCenter:t}}function m(e,t,n){return"optionTemplate"===e&&null!==t?{optionRenderer:function(e,t){return function(n){var i=n.parentElement,o=e.createChildContext(n.data,null,function(e){e.$optionContext=n});return r.renderTemplate(t,o,null,i),null}}(n,String(t))}:null}function v(e,t){this.Init(e,t)}function _(e,t){var n={};return function(r){var i=r.parentElement,o=e.createChildContext(r.data,null,function(e){e.$key=r.key,e.$metadata=r.metadata,e.$headerContext=r});return y(r,t,i,o,n),null}}function C(e,t){var n={};return function(r){var i=r.parentElement,o=e.createChildContext(r.data,null,function(e){e.$keys=r.keys,e.$metadata=r.metadata,e.$cellContext=r,e.$cell=r.cell});return y(r,t,i,o,n),null}}function y(e,n,i,o,a){var s=function(e,t){var n=t[e];null==n&&(n=r.utils.parseHtmlFragment(document.getElementById(e).innerHTML,document),t[e]=n);return n.map(function(e){return e.cloneNode(!0)})}(function(e,t){if("function"==typeof e)return e(t);return e}(n,e),a);r.virtualElements.setDomNodeChildren(i,s),r.applyBindingsToDescendants(o,i);for(var u=0;u<i.childNodes.length;u++)if(1===i.childNodes[u].nodeType){t(i.childNodes[u])._ojDetectCleanData({cleanParent:!0});break}}function b(e,t,n){return"template"===e?{_templateFunction:A(n,t)}:null}function E(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=r.key,o=r.value;if(null!=i&&null!=o&&t(i.trim(),o.trim()))break}}function B(e,n){return function(i){var o=e.createChildContext(i.context);return r.renderTemplate(n,o,{afterRender:function(e){t(e)._ojDetectCleanData()}},i.parentElement),null}}function A(e,n){return function(i){var o=e.createChildContext(i.data);return r.renderTemplate(n,o,{afterRender:function(e){t(e)._ojDetectCleanData()}},i.parentElement),null}}function D(e,t,n){return"tooltip"===e&&t.template&&(t._renderer=B(n,t.template)),{tooltip:t}}function x(e,n,i){if("item"===e){var o=n.template;return null!=o&&(n.renderer=function(e,n){return function(i){var o=i.parentElement,a=e.createChildContext(i.data,null,function(e){e.$itemContext=i});return r.renderTemplate(n,a,{afterRender:function(e){t(e)._ojDetectCleanData()}},o,"replaceNode"),null}}(i,o)),{item:n}}return null}function N(e,t,n){return"center"===e&&t.template&&(t._renderer=B(n,t.template)),{center:t}}function j(e,t,n){return"rootNodeContent"===e&&t.template&&(t._renderer=B(n,t.template)),{rootNodeContent:t}}e.ComponentBinding=function(e,t){this.Init(e,t)},e.Object.createSubclass(e.ComponentBinding,e.Object,"oj.ComponentBinding"),e.ComponentBinding.create=function(t,n){if(null==t)throw new Error("Binding name is required!");for(var i=new e.ComponentBinding(t,n),o=r.bindingHandlers,a=Array.isArray(t)?t:[t],s=0;s<a.length;s++){var u=a[s];e.ComponentBinding._REGISTERED_NAMES.push(u),o[u]=i}return i},e.ComponentBinding.getDefaultInstance=function(){return e.ComponentBinding._INSTANCE},e.ComponentBinding.prototype.setupManagedAttributes=function(e){var t=e.for;t=null==t?"@global":t;var n=this._managedAttrOptions[t]||[];n.push(e),this._managedAttrOptions[t]=n},e.ComponentBinding.deliverChanges=function(){u.getGlobalChangeQueue().deliverChanges()},e.ComponentBinding.prototype.Init=function(t,n){e.ComponentBinding.superclass.Init.call(this),"string"==typeof n&&(n={componentName:n}),this._bindingOptions=n||{},this._bindingNames=Array.isArray(t)?t:[t],this.init=this._init.bind(this),this.update=this._update.bind(this),this._managedAttrOptions={}},e.ComponentBinding.prototype._getBindingOptions=function(){return this._bindingOptions},e.ComponentBinding.prototype._init=function(e,t,n,i,o){return r.applyBindingsToDescendants(o,e),{controlsDescendantBindings:!0}},e.ComponentBinding.prototype._update=function(n,i,o,a,l){var d,c,p=[],f=0,h=t(n);function g(t){p.forEach(function(e){e.dispose()}),p=[],t&&d&&(d("destroy"),d=null),c&&(c.dispose(),c=null),h.off(e.ComponentBinding._HANDLER_NAMESPACE)}function m(t,r,i){if(null!=t){var a=h[t];if("function"==typeof a){a=a.bind(h);c=new v(function(t){var n=e.ComponentBinding.__removeDotNotationOptions(t);a("option",t);for(var r=Object.keys(n),i=0;i<r.length;i++){var o=r[i];a("option",o,n[o])}},u.getGlobalChangeQueue());var f=Object.keys(i).filter(function(e){return!(null==e||e===r)}),g={component:a,changeTracker:c,componentName:t,specifiedOptions:f,computeds:p,valueAccessor:function(){return i},allBindingsAccessor:o,bindingContext:l,destroyCallback:function(){d=null},readOnlyProperties:{}};d=this._initComponent(n,g)}else s.error("Component %s is not found",t)}}r.ignoreDependencies(function(){r.computed(function(){var t=r.utils.unwrapObservable(i());"object"!=typeof t&&s.error("ojComponent binding should evaluate to an object");var n,o=this._bindingOptions.componentName,a=!1;if(null==o&&null!=t){for(var u=[e.ComponentBinding._COMPONENT_OPTION,"role"],l=0;!a&&l<u.length;l++)(n=u[l])in t&&(a=!0,o=t[n]);a||s.error("component attribute is required for the ojComponent binding"),o=r.utils.unwrapObservable(o)}0===f?f=1:r.ignoreDependencies(g,this,[!0]),r.ignoreDependencies(m,this,[o,n,t])},this,{disposeWhenNodeIsRemoved:n})},this),r.utils.domNodeDisposal.addDisposeCallback(n,g.bind(this,!1))},e.ComponentBinding.prototype._initComponent=function(n,i){var o=!1,a=0,s={},u=t(n),l=i.component,d=i.componentName,c=this,p=function(t){if(t.target&&t.target===n){i.destroyCallback();var r=c._bindingOptions.beforeDestroy;r&&r(n,l,i.valueAccessor,i.allBindingsAccessor,i.bindingContext),e.ComponentBinding._deliverCreateDestroyEventToManagedProps(!1,s,n,l,i.valueAccessor,i.allBindingsAccessor,i.bindingContext),o=!0,i.changeTracker.dispose(),n.removeEventListener("_ojDestroy",p)}};n.addEventListener("_ojDestroy",p);var f=e.ComponentBinding._resolveManagedAttributes(this._managedAttrOptions,i.specifiedOptions,d),h=e.ComponentBinding.getDefaultInstance();if(this!==h){var g=h._getManagedAttributes(i.specifiedOptions,d);e.CollectionUtils.copyInto(g,f),f=g}for(var m={},v=function(){var t=this._property,r=e.ComponentBinding._toJS(i.valueAccessor()[t]);if(0===a){var u=f[t];if(null!=u){s[t]=u;var d=u.init;if(null!=d)for(var c=d(t,r,n,l,i.valueAccessor,i.allBindingsAccessor,i.bindingContext)||{},p=Object.keys(c),h=0;h<p.length;h++){var g=p[h];m[g]=e.ComponentBinding.__cloneIfArray(c[g])}}else m[t]=e.ComponentBinding.__cloneIfArray(r)}else if(!o)if(null!=f[t]){var v=f[t].update;if(null!=v)for(var _=v(t,r,n,l,i.valueAccessor,i.allBindingsAccessor,i.bindingContext)||{},C=Object.keys(_),y=0;y<C.length;y++){var b=C[y];i.changeTracker.addChange(b,e.ComponentBinding.__cloneIfArray(_[b]))}}else i.readOnlyProperties[t]||i.changeTracker.addChange(t,e.ComponentBinding.__cloneIfArray(r))},_=0;_<i.specifiedOptions.length;_++)i.computeds.push(r.computed(v,{_property:i.specifiedOptions[_]}));a=1,e.ComponentBinding._registerWritebacks(u,i);var C=e.ComponentBinding.__removeDotNotationOptions(m);l(m),Object.keys(C).forEach(function(e){l("option",e,C[e])});var y=this._bindingOptions.afterCreate;return y&&y(n,l,i.valueAccessor,i.allBindingsAccessor,i.bindingContext),e.ComponentBinding._deliverCreateDestroyEventToManagedProps(!0,s,n,l,i.valueAccessor,i.allBindingsAccessor,i.bindingContext),m=null,l},e.ComponentBinding.prototype._getManagedAttributes=function(t,n){return e.ComponentBinding._resolveManagedAttributes(this._managedAttrOptions,t,n)},e.ComponentBinding._resolveManagedAttributes=function(e,n,r){var i={},o=[],a=function(t,n){var r=e[t];if(null!=r)for(var i=r.length-1;i>=0;i--){var s=r[i];if(null!=s.attributes&&o.push(s),n){var u=s.use;if(null!=u){u=Array.isArray(u)?u:[u];for(var l=0;l<u.length;l++)a(u[l],!0)}}}};a(r,!0);var s=t.oj[r];if(null!=s)for(var u=Object.getPrototypeOf(s.prototype);null!=u&&"oj"===u.namespace;)a(u.widgetName,!0),u=Object.getPrototypeOf(u);if(a("@global",!1),o.length>0)for(var l=0;l<n.length;l++)for(var d=n[l],c=0;c<o.length;c++){var p=o[c];if(p.attributes.indexOf(d)>=0){i[d]={init:p.init,update:p.update,afterCreate:p.afterCreate,beforeDestroy:p.beforeDestroy};break}}return i},e.ComponentBinding._HANDLER_NAMESPACE=".oj_ko",e.ComponentBinding._registerWritebacks=function(t,n){for(var r={"^slider$":[{event:"slidechange",getter:d}],"^oj*":[{event:"ojoptionchange",getter:function(e,t,n){var r={},i=n.optionMetadata;if(i&&"shouldWrite"===i.writeback){var o=n.option;r[o]=n.value,i.readOnly&&(e.readOnlyProperties[o]=!0)}return r}.bind(void 0,n)}]},i={},o=Object.keys(r),a=0;a<o.length;a++){var s=o[a];if(n.componentName.match(s)){for(var u=r[s],l=0;l<u.length;l++){var c=u[l];t.on(c.event+e.ComponentBinding._HANDLER_NAMESPACE,{getter:c.getter},function(r,o){if(r.target===t[0])for(var a=r.data.getter(r,o),s=n.valueAccessor(),u=Object.keys(a),l=0;l<u.length;l++){var d=u[l];n.changeTracker.suspend(d);try{if(n.specifiedOptions.indexOf(d)>=0){var c=s[e.ComponentBinding._OPTION_MAP],p=null==c?null:c[d],f=s[d];e.ComponentBinding._writeValueToProperty(d,f,a[d],p,n.bindingContext,i)}}finally{n.changeTracker.resume(d)}}})}break}}},e.ComponentBinding._writeValueToProperty=function(t,n,i,o,a,s){if(null!=n&&r.isObservable(n))r.isWriteableObservable(n)&&n(e.ComponentBinding.__cloneIfArray(i));else{if(!(t in s)){var l=null,d=e.__ExpressionUtils.getPropertyWriterExpression(o);null!=d&&(l=u.createEvaluator(d,a)),s[t]=l}var c=s[t];if(c)e.__ExpressionUtils.getWriter(c(a))(e.ComponentBinding.__cloneIfArray(i))}},e.ComponentBinding._toJS=function(t){var n=r.utils.unwrapObservable(t);return(Array.isArray(n)||e.CollectionUtils.isPlainObject(n))&&n.ojConvertToJS&&(n=r.toJS(n)),n},e.ComponentBinding.__cloneIfArray=function(e){return Array.isArray(e)&&(e=e.slice()),e},e.ComponentBinding.__removeDotNotationOptions=function(e){for(var t={},n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];i.indexOf(".")>=0&&(t[i]=e[i],delete e[i])}return t},e.ComponentBinding._deliverCreateDestroyEventToManagedProps=function(e,t,n,r,i,o,a){for(var s=Object.keys(t),u=0;u<s.length;u++){var l=s[u],d=t[l],c=e?d.afterCreate:d.beforeDestroy;c&&c(l,n,r,i,o,a)}},e.ComponentBinding.__getKnockoutVersion=function(){return e.__isAmdLoaderPresent()&&r?r.version:""},e.ComponentBinding._isNameRegistered=function(t){return e.ComponentBinding._REGISTERED_NAMES.indexOf(t)>=0},e.ComponentBinding._REGISTERED_NAMES=[],e.ComponentBinding._COMPONENT_OPTION="component",e.ComponentBinding._OPTION_MAP="_ojOptions",c="cleanExternalData",p=r.utils.domNodeDisposal,f=p[c],p[c]=function(t){var n=e.DomUtils?e.DomUtils.setInKoCleanExternal:null;n&&n(t);try{f(t)}finally{n&&n(null)}},e.ComponentBinding._INSTANCE=e.ComponentBinding.create(["ojComponent","jqueryUI"]),t.widget("oj._ojDetectCleanData",{options:{cleanParent:!1},_destroy:function(){var e=r.utils.domNodeDisposal,t=e.cleanExternalData;e.cleanExternalData=function(){};try{this.options.cleanParent&&null!=this.element[0].parentNode?r.cleanNode(this.element[0].parentNode):r.cleanNode(this.element[0])}finally{e.cleanExternalData=t}}}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["pieCenter"],init:function(e,t,n,r,i,o,a){return g(e,t,a)},update:function(e,t,n,r,i,o,a){return g(e,t,a)},for:"ojChart"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["optionTemplate"],init:function(e,t,n,r,i,o,a){var s=m(e,t,a);if(null!==s)return s},update:function(e,t,n,r,i,o,a){return m(e,t,a)},for:"ComboboxOptionRenderer"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"ojCombobox",use:"ComboboxOptionRenderer"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"ojSelect",use:"ComboboxOptionRenderer"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"ojInputSearch",use:"ComboboxOptionRenderer"}),e.Object.createSubclass(v,e.Object,"ComponentBinding.ComponentChangeTracker"),v.prototype.Init=function(e,t){v.superclass.Init.call(this),this._updateCallback=e,this._queue=t,this._changes={},this._suspendCountMap={}},v.prototype.addChange=function(e,t){this._isSuspended(e)||this._disposed||(this._changes[e]=t,this._queue.registerComponentChanges(this))},v.prototype.dispose=function(){this._disposed=!0},v.prototype.resume=function(e){var t=this._suspendCountMap[e]||0;(t-=1)<0?s.error("ComponentChangeTracker suspendCount underflow"):0===t?delete this._suspendCountMap[e]:this._suspendCountMap[e]=t},v.prototype.suspend=function(e){var t=this._suspendCountMap[e]||0;this._suspendCountMap[e]=t+1},v.prototype.applyChanges=function(e){this._disposed||this._updateCallback(e)},v.prototype.flushChanges=function(){var e=this._changes;return this._changes={},e},v.prototype._isSuspended=function(e){return(this._suspendCountMap[e]||0)>=1},r.bindingHandlers.ojContextMenu={update:function(n,i,o,a,s){var u,l,d=".ojContextMenu",c=t(n),p=750,f=!1,h=!1,g=300,m=null;c.off(d).removeClass("oj-menu-context-menu-launcher")[0].removeEventListener("click",b,!0),c[0].removeEventListener("touchstart",N,{passive:!1}),clearTimeout(u);var v=c.data("_ojLastContextMenu");v&&D(v.selector,v.id).off(d);var _=!1,C=r.utils.unwrapObservable(i()),y=t.isPlainObject(C)?n.getAttribute("contextmenu"):null;function b(e){if(f)return e.preventDefault(),e.stopPropagation(),f=!1,!1}function E(e){121===e.which&&e.shiftKey&&A().is(":visible")&&e.preventDefault()}function B(){var t=e.Components.__GetWidgetConstructor(A()[0],"ojMenu"),n=t&&t("instance");if(!n)throw new Error('ojContextMenu binding bound to "'+(y||C)+'", which does not reference a valid JET Menu.');return _||(n.widget().on("ojclose"+d,function(){document.removeEventListener("keyup",E)}),_=!0),n}function A(){return D(C,y)}function D(e,n){return n?t(document.getElementById(n)):t(e).first()}function x(e,t,n){f=n;var r=B();if(f&&c.one("touchend"+d,function(){r.__contextMenuPressHoldJustEnded(!0),setTimeout(function(){r.__contextMenuPressHoldJustEnded(!1)},50)}),"touchstart"===m&&"contextmenu"===e.type||"contextmenu"===m&&"touchstart"===e.type)return m=null,void clearTimeout(l);if(!e.isDefaultPrevented()){var i={launcher:c,initialFocus:"menu",position:{mouse:{my:"start top",at:"start bottom",of:e},touch:{my:"start>40 center",at:"start bottom",of:e,collision:"flipfit"},keyboard:{my:"start top",at:"start bottom",of:"launcher"}}[t]};r.__openingContextMenu=!0,r.open(e,i),r.__openingContextMenu=!1,r.widget().is(":visible")&&(e.preventDefault(),document.addEventListener("keyup",E),"touchstart"!==e.type&&"contextmenu"!==e.type||(m=e.type,l=setTimeout(function(){m=null},g)))}}function N(e){if("touchstart"===e.type&&(e=t.Event(e)),"mousedown"!==e.type||!B().__contextMenuPressHoldJustEnded())return f=!1,"touchstart"===e.type&&(h=!0,u=setTimeout(x.bind(void 0,e,"touch",!0),p)),!0}c.data("_ojLastContextMenu",{selector:C,id:y}),n.addEventListener("click",b,!0),c[0].addEventListener("touchstart",N,{passive:!1}),c.on("mousedown"+d+" keydown"+d+" ",N).on("touchend"+d+" touchcancel"+d,function(){return h=!1,clearTimeout(u),!0}).on("keydown"+d+" contextmenu"+d,function(e){("contextmenu"===e.type||121===e.which&&e.shiftKey)&&x(e,h?"touch":"keydown"===e.type?"keyboard":"mouse",!1);return!0}).addClass(e.DomUtils.isTouchSupported()?"oj-menu-context-menu-launcher":"")}},e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["header","cell"],init:function(e,t,n,r,i,o,a){if("header"===e){var s=t.row;if(null!=s){var u=s.template;null!=u&&(s.renderer=_(a,u))}var l=t.column;if(null!=l){var d=l.template;null!=d&&(l.renderer=_(a,d))}var c=t.rowEnd;if(null!=c){var p=c.template;null!=p&&(c.renderer=_(a,p))}var f=t.columnEnd;if(null!=f){var h=f.template;null!=h&&(f.renderer=_(a,h))}return{header:t}}if("cell"===e){var g=t.template;return null!=g&&(t.renderer=C(a,g)),{cell:t}}},update:function(e,t,n,r,i,o,a){if("header"===e){var s=t.row;if(null!=s){var u=s.template;null!=u&&(s.renderer=_(a,u))}var l=t.column;if(null!=l){var d=l.template;null!=d&&(l.renderer=_(a,d))}var c=t.rowEnd;if(null!=c){var p=c.template;null!=p&&(c.renderer=_(a,p))}var f=t.columnEnd;if(null!=f){var h=f.template;null!=h&&(f.renderer=_(a,h))}return{header:t}}if("cell"===e){var g=t.template;return null!=g&&(t.renderer=C(a,g)),{cell:t}}return null},for:"ojDataGrid"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["template"],init:function(e,t,n,r,i,o,a){return b(e,t,a)},update:function(e,t,n,r,i,o,a){return b(e,t,a)},for:"ojDiagram"}),h=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,e.__ExpressionUtils={},e.__ExpressionUtils.getPropertyWriterExpression=function(e){if(null==e||["true","false","null","undefined"].indexOf(e)>=0)return null;var t=(e=e.trim()).match(h);return null===t?null:"{_ko_property_writers: function(v){"+(t[1]?"Object("+t[1]+")"+t[2]:e)+"=v;}}"},e.__ExpressionUtils.getWriter=function(e){return e._ko_property_writers},e.KnockoutTemplateUtils=o,e.ResponsiveKnockoutUtils=a,u.addPostprocessor({getBindingAccessors:function(t,n,i,o){if(null==i)return null;var a=function(t){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];if(e.ComponentBinding._isNameRegistered(i))return i}return null}(i);null!=a&&(i=function(t,n,i,o,a){var s=function(e,t,n,i){var o=null,a=u.getBindingsString(e,n,i),s=r.jsonExpressionRewriting.parseObjectLiteral(a),l=null;E(s,function(e,n){return e===t&&(l=n,!0)}),null!=l&&0===l.indexOf("{")&&(o=r.jsonExpressionRewriting.parseObjectLiteral(l));return{attrList:o,bindingExpr:l}}(t,n,i,o),l=s.attrList;if(null==l)return a;var d={};return E(l,function(e,t){d[e]=t}),(a=e.CollectionUtils.copyInto({},a))[n]=function(t,n,r){var i=function(){var r={};return Object.keys(n).forEach(function(e){var i=n[e],o=u.createEvaluator(i,t).bind(null,t);Object.defineProperty(r,e,{get:o,enumerable:!0})}),Object.defineProperty(r,e.ComponentBinding._OPTION_MAP,{value:n}),r};return i.toString=function(){return r},i}(o,d,s.bindingExpr),a}(t,a,o,n,i));return i}}),u.addPostprocessor({nodeHasBindings:function(t,n){return e.BaseCustomElementBridge?n||1===t.nodeType&&e.BaseCustomElementBridge.getRegistered(t.nodeName):n},getBindingAccessors:function(t,n,r){if(1===t.nodeType&&e.BaseCustomElementBridge){var i=t.nodeName,o=e.BaseCustomElementBridge.getRegistered(i);o&&((r=r||{})._ojCustomElement=function(){return{composite:o.composite}})}return r}}),function(){r.bindingHandlers._ojCustomElement={after:["attr"],init:function(a,s,u,l,d){var c,p;const f=e.BaseCustomElementBridge.getInstance(a),h=e.BaseCustomElementBridge.getProperties(f)||{},{provide:g,consume:m,cleanup:v}=function(t,a){const s=Object.create(null),u=Object.create(null),l=Object.create(null),d=function(e,t){const n=e.localName;let r=i[n];if(void 0!==r)return r;return r=null,Object.keys(t).forEach(e=>{const n=t[e],i=o(n,["binding","provide"]),a=o(n,["binding","consume"]);if(i||a){if(n.properties)throw new Error("Propagating complex properties is not supported!");(r=r||Object.create(null))[e]=[i,a]}}),i[n]=r,r}(t,a);if(null!==d){const i=Object.keys(d);i.forEach(i=>{const[o,c]=d[i];if(void 0!==o){const u=e.__AttributeUtils.propertyNameToAttribute(i),d=t.hasAttribute(u),c=[],p=[];if(o.forEach(e=>{const t=e.name;if(void 0===t)throw new Error("name attribute for the binding/provide metadata is required!");const n=e.default,i=function(e,t){const n=r.observable(t);if(e)return r.pureComputed({write:t=>n(e.hasOwnProperty(t)?e[t]:t),read:()=>n()});return n}(e.transform,n);c.push(i),p.push({name:t,obs:i})}),p.length>0){const r=function(e){return t=>e.forEach(e=>e(t))}(c);s[i]={set:r,vars:p};const o=function(e){return t=>e(t.detail.value)}(r),f=i+n;if(t.addEventListener(f,o),l[f]=o,d){const n=t.getAttribute(u);e.__AttributeUtils.getExpressionInfo(n).expr||r(e.__AttributeUtils.coerceValue(t,u,n,a[i].type))}}}if(void 0!==c){const e=c.name;if(void 0===e)throw new Error("'name' property on the binding/consume metadata is required!");u[i]=e}})}return{provide:s,consume:u,cleanup:function(){Object.keys(l).forEach(e=>t.removeEventListener(e,l[e]))}}}(a,h);function _(){c&&(c.teardown(),c=null),p&&(a.removeEventListener(t,p),p=null),e._KnockoutBindingProvider.getInstance().__NotifyBindingsDisposed(a)}r.computed(function(){var n=s().composite;const i=r.computedContext.isInitial();i||_(),function(n,r){c=new e.__ExpressionPropertyUpdater(a,d,n);var i={_domListener:!0};f.__INITIALIZING_PROPS=!0;for(var o=a.attributes,s=0;s<o.length;s++){var u=o[s],l=e.__AttributeUtils.attributeToPropertyName(u.nodeName);let t,n;const a=e.__AttributeUtils.eventListenerPropertyToEventType(l)&&!h[l];if(!a){n=l.split(".")[0];const e=g[n];t=r&&e?e.set:void 0}c.setupPropertyBinding(u.value,l,a?i:h[n],t)}Object.keys(m).forEach(t=>{if(!a.hasAttribute(e.__AttributeUtils.propertyNameToAttribute(t))){const e=g[t],n=r&&e?e.set:void 0;c.setupPropertyBinding(void 0,t,h[t],n,m[t])}}),f.__INITIALIZING_PROPS=!1,p=function(t){var n=t.detail,r=n.attribute,o=e.__AttributeUtils.attributeToPropertyName(r),a=e.__AttributeUtils.eventListenerPropertyToEventType(o)&&!h[o]?i:h[o.split(".")[0]];c.setupPropertyBinding(n.value,o,a,void 0,m[o])},a.addEventListener(t,p)}(n,i),f.playbackEarlyPropertySets(a)},null,{disposeWhenNodeIsRemoved:a}),r.utils.domNodeDisposal.addDisposeCallback(a,function(){_(),v()});const C=function(e,t){let n=e;const r=Object.keys(t);if(r.length>0){const i=e.$provided,o=void 0===i?{}:Object.assign({},i);r.forEach(e=>{const n=t[e].vars;n.forEach(e=>{o[e.name]=e.obs})}),n=e.extend({$provided:o})}return n}(d,g);return r.applyBindingsToDescendants(C,a),e._KnockoutBindingProvider.getInstance().__NotifyBindingsApplied(a),{controlsDescendantBindings:!0}}};const t="attribute-changed",n="Changed",i=Object.create(null);function o(e,t){let n=e;return t.some(e=>null==(n=n[e]))?void 0:n}}(),e.__ExpressionPropertyUpdater=function(t,n,i){var o=function(){if(i)return null;return new v(function(e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];g(i)}try{t.setProperties(e)}finally{for(var o=0;o<n.length;o++){var a=n[o];m(a)}}},u.getGlobalChangeQueue())}(),a={},l={},d={},c={},p="Changed";function f(e){return e.$current||e.$data}function h(n,r,i){var o=a[r];if(o||(o=function(e){var t,n=f(e),r=function(r){t&&t(r,n,e)};return r.setListener=function(e){t=e},r}(n),a[r]=o,t.addEventListener(r,o)),null==i||i instanceof Function)o.setListener(i);else{var s=e.__AttributeUtils.eventTypeToEventListenerProperty(r),u="Invalid type '"+typeof i+"' found for attribute '"+e.__AttributeUtils.propertyNameToAttribute(s)+"'. Expected value of type 'function'.";if(!e.BaseCustomElementBridge||!e.BaseCustomElementBridge.getRegistered(t.tagName)){var l=t.tagName.toLowerCase()+" with id '"+t.id+"'";throw new Error(l+": "+u)}e.BaseCustomElementBridge.getInstance(t).throwError(t,u)}}function g(e){var t=c[e]||0;t+=1,c[e]=t}function m(e){var t=c[e];t?(t-=1,c[e]=0===t?null:t):s.error("Property count undefrlow")}this.setupPropertyBinding=function(i,a,v,_,C){if(!v)return;if(!function(e,t){var n=e.split("."),r=t;n.shift();for(var i=0;i<n.length&&(r=r.properties);i++)r=r[n[i]];return r}(a,v))return;var y=l[a];y&&(y.dispose(),l[a]=null);var b=d[a];if(b&&(t.removeEventListener(a+p,b),d[a]=null),v._domListener){var E=e.__AttributeUtils.eventListenerPropertyToEventType(a);h(n,E,null)}let B,A,D;if(void 0===i){const e=void 0===C?null:(n.$provided||{})[C];e&&(B=(()=>e()))}else{const t=e.__AttributeUtils.getExpressionInfo(i);(A=t.expr)&&(B=u.createEvaluator(A,n),D=t.downstreamOnly)}if(B){if(!v.readOnly){var x=!0;r.ignoreDependencies(function(){l[a]=r.computed(function(){var i,s,u,l=B(n),d=r.utils.unwrapObservable(l);if(v._domListener){var c=e.__AttributeUtils.eventListenerPropertyToEventType(a);h(n,c,d)}else Array.isArray(d)&&(d=d.slice()),v._eventListener&&d&&d instanceof Function&&(s=d,u=f(i=n),d=function(e){s(e,u,i)}),!x&&o?o.addChange(a,d):function(e,n){g(e);try{t.setProperty(e,n)}finally{m(e)}}(a,d),x&&_&&_(d)})}),x=!1}void 0!==A&&v.writeback&&!D&&(d[a]=function(i,o,a){var l=i.split("."),d=l[0],f=function(t){if(!function(e){return c[e]}(d)){var p,f=!1;r.ignoreDependencies(function(){for(var i=t.detail.value,s=1;s<l.length;s++){var d=l[s];i=i[d]}var c=a(n);if(r.isObservable(c))r.isWriteableObservable(c)?(c(e.ComponentBinding.__cloneIfArray(i)),f=!0):p="the observable is not writeable";else{var h=e.__ExpressionUtils.getPropertyWriterExpression(o);if(null!=h){var g=u.createEvaluator(h,n),m=e.__ExpressionUtils.getWriter(g(n));m(e.ComponentBinding.__cloneIfArray(i)),f=!0}else p="the expression is not a valid update target"}}),f||p&&s.info("The expression '%s' for property '%s' was not updated because %s.",o,i,p)}};return t.addEventListener(d+p,f),f}(a,A,B))}},this.teardown=function(){var e,n=Object.keys(l);for(e=0;e<n.length;e++){var r=l[n[e]];r&&r.dispose()}for(l={},n=Object.keys(d),e=0;e<n.length;e++){var i=n[e].split(".")[0];t.removeEventListener(i+p,d[i])}for(d={},n=Object.keys(a),e=0;e<n.length;e++){var s=n[e];t.removeEventListener(s,a[s])}a={},o&&o.dispose()}},function(){var t="_ojbindingsobj";function n(e,t,n,r){var a=o(e.getAttribute(n),r);if(a)return i(e,t,"ko "+t+":"+a)}function i(e,t,n){for(var r=e.tagName.toLowerCase(),i=r,o=e.attributes,a=0;a<o.length;a++){var s=o[a];i+=" ",i+=s.name,i+="='",i+=s.value,i+="'"}var u=e.parentNode,l=document.createComment(i),d=document.createComment("/"+r);u.insertBefore(l,e);var c=document.createComment(n),p=document.createComment("/ko");u.insertBefore(c,e);var f,h=[l,c];if("if"===t)for(;e.childNodes.length>0;)f=e.childNodes[0],u.insertBefore(f,e),h.push(f);else if("_ojBindForEach_"===t)for(;e.childNodes.length>0;)f=e.childNodes[0],u.insertBefore(f,e),h.push(f);return u.insertBefore(p,e),h.push(p),u.replaceChild(d,e),h.push(d),h}function o(t,n){if(null!=t){var r=e.__AttributeUtils.getExpressionInfo(t).expr;return null==r&&(r=n?"'"+t+"'":t),r}return null}function a(t,n,i,o,a){var s,l,d,c=e.__AttributeUtils.getExpressionInfo(o).expr;if(null==c)l=e.__AttributeUtils.coerceValue(i,"class",o,"any"),d=Array.isArray(l),s=function(){return d?l.join(" "):l};else{var p=(s=u.createEvaluator(c,a).bind(null,a))();"function"==typeof p?(l=p(),(d=Array.isArray(l))&&(s=r.pureComputed(function(){return p().join(" ")}))):(l=p,(d=Array.isArray(l))&&(s=function(){return l.join(" ")}))}"string"==typeof l||d?n.class=s:t.css=s}function s(t,n,r,i,o){var a=e.__AttributeUtils.getExpressionInfo(r).expr;return null==a?function(){return"object"===o?e.__AttributeUtils.coerceValue(t,n,r,o):r}:u.createEvaluator(a,i).bind(null,i)}function l(e){return function(){for(var t={},n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];t[i]=e[i]()}return t}}function d(n){if(1!==n.nodeType)return{};if(!n[t]){for(var r=!!e.BaseCustomElementBridge&&!!e.BaseCustomElementBridge.getRegistered(n.nodeName),i={},o=[],a=[],s=[],u=n.attributes,l=0;l<u.length;l++){var d=u[l],p=c(d.name);p&&("style"===p?i._STYLE_BIND=p:"style."===p.substring(0,6)?a.push(p):o.push(p)),r||"on-"!==d.name.substring(0,3)||s.push(d)}if(a.length){if(i._STYLE_BIND)throw new Error("Cannot have both style and style.* data bound attributes on "+n.tagName+" with id "+n.id);i._STYLE_BIND=a}o.length&&(i._ATTR_BIND=o),s.length&&(i._EVENT_BIND=s),Object.defineProperty(n,t,{value:i})}return n[t]}function c(e){return e&&":"===e.charAt(0)?e.slice(1):null}function p(e){return":"+e}u.registerPreprocessor("oj-bind-text",function(e){return n(e,"text","value",!0)}),u.registerPreprocessor("oj-bind-if",function(e){return n(e,"if","test",!1)}),u.registerPreprocessor("oj-bind-for-each",function(t){var n=t.getAttribute("data"),r=e.__AttributeUtils.getExpressionInfo(n).expr;if(!r)try{var a=JSON.parse(n);if(!Array.isArray(a))throw new Error("got value "+n);r=n}catch(e){throw new Error("The value on the oj-bind-for-each data attribute should be either a JSON array or an expression : "+e)}var s=o(t.getAttribute("as"),!0);if(!r)return;var u="ko _ojBindForEach_:{data:"+r;return i(t,"_ojBindForEach_",u+=s?",as:"+s+"}":"}")}),u.addPostprocessor({nodeHasBindings:function(e,t){var n=d(e);return t||null!=n._ATTR_BIND||null!=n._STYLE_BIND||null!=n._EVENT_BIND},getBindingAccessors:function(t,n,i){if(1===t.nodeType){i=i||{};var o,u,c=d(t),f=c._STYLE_BIND;if(f){if(i.style)throw new Error("Cannot have both style data-bind and JET style binding on "+t.tagName+" with id "+t.id);if("style"===f)i[f]=s(t,f,t.getAttribute(p(f)),n,"object");else{var h={};for(o=0;o<f.length;o++){u=f[o],h[e.__AttributeUtils.attributeToPropertyName(u.substring(6))]=s(t,u,t.getAttribute(p(u)),n,"string")}i.style=l(h)}}var g=c._ATTR_BIND;if(g){if(i.attr)throw new Error("Cannot have both attr data-bind and JET attribute binding on "+t.tagName+" with id "+t.id);var m={};for(o=0;o<g.length;o++)"class"===(u=g[o])?a(i,m,t,t.getAttribute(p(u)),n):m[u]=s(t,u,t.getAttribute(p(u)),n,"string");i.attr=l(m)}var v=c._EVENT_BIND;if(v){var _=new e.__ExpressionPropertyUpdater(t,n,!0);for(o=0;o<v.length;o++){var C=v[o],y=e.__AttributeUtils.attributeToPropertyName(C.nodeName);_.setupPropertyBinding(C.value,y,{_domListener:!0})}r.utils.domNodeDisposal.addDisposeCallback(t,function(){_&&(_.teardown(),_=null)})}}return i}})}(),e._KnockoutBindingProvider=function(){this._resolveWhenChildrenBindingsApplied=function(t,n){var r=this._getChildrenBindingsAppliedPromises(t);if("none"===n||0===r.length)e.BaseCustomElementBridge.getInstance(t).resolveBindingProvider(this);else{for(var i=[];r.length>0;){var o=r.shift();("nearestCustomElement"===n||"immediate"===n&&!0===o.immediate)&&i.push(o.promiseCallback)}Promise.all(i).then(function(){this._resolveWhenChildrenBindingsApplied(t,n)}.bind(this))}},this._getChildrenBindingsAppliedPromises=function(e,t){return!e._whenChildrenBindingsApplied&&t&&Object.defineProperty(e,"_whenChildrenBindingsApplied",{value:[],enumerable:!1}),e._whenChildrenBindingsApplied||[]},this.__RegisterBindingAppliedPromiseForChildren=function(e,t){var n=null;if(e){var r=new Promise(function(e){n=e});this._getChildrenBindingsAppliedPromises(e,!0),e._whenChildrenBindingsApplied.push({immediate:t,promiseCallback:r})}return n},this.__NotifyBindingsApplied=function(t){var n=e.BaseCustomElementBridge.getTrackChildrenOption(t);this._resolveWhenChildrenBindingsApplied(t,n)},this.__NotifyBindingsDisposed=function(t){e.BaseCustomElementBridge.getInstance(t).disposeBindingProvider(t)}},e._KnockoutBindingProvider.getInstance=function(){return e._KnockoutBindingProvider._instance},e._KnockoutBindingProvider._instance=new e._KnockoutBindingProvider,e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["tooltip"],init:function(e,t,n,r,i,o,a){return D(e,t,a)},update:function(e,t,n,r,i,o,a){return D(e,t,a)},for:"tooltipOptionRenderer"}),function(){for(var t=["ojChart","ojDiagram","ojNBox","ojPictoChart","ojSunburst","ojTagCloud","ojThematicMap","ojTreemap","ojDialGauge","ojLedGauge","ojRatingGauge","ojSparkChart","ojStatusMeterGauge","ojGantt"],n=0;n<t.length;n++)e.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:t[n],use:"tooltipOptionRenderer"})}(),
/**
 * @license
 * Knockout Fast Foreach v0.6.0 (2016-07-28T11:02:54.197Z)
 * By: Brian M Hunt (C) 2015 | License: MIT
 *
 * Adds `fastForEach` to `ko.bindingHandlers`.
 *
 * Modification notice: The code is obtained from https://github.com/brianmhunt/knockout-fast-foreach
 * and modified by Oracle JET team to be included into Oracle JET project.
 * @ignore
 */
function(){var t=document&&"function"==typeof document.createDocumentFragment;function o(e,t,n){return{status:"added",value:e,index:t,key:n}}function a(e){return{status:"deleted",value:{},index:e}}function u(e,t){var n;if(e){var r=e.length;n=new Array(r);for(var i=0;i<r;i++)n[i]=t(e[i],i,e)}return n}var d="_ko_ffe_pending_delete_index",c="oj-bind-for-each: abandoned promise";function p(e,t,n){this.element=t.element||e,r.applyBindingsToDescendants(n,this.element),this.element._templateNode=function(e){for(var t,n=0;n<e.length;n++){var r=e[n];if(1===r.nodeType&&"template"===r.nodeName.toLowerCase()){if(t)throw new Error("Multiple templates found: oj-bind-for-each requires a single template element as its direct child");t=r}}if(!t)throw new Error("Template not found: oj-bind-for-each requires a single template element as its direct child");return t}(r.virtualElements.childNodes(this.element)),this.element._templateNode.__ojBindingContext=r.contextFor(this.element._templateNode),this.data=t.data,this.as=t.as,this.changeQueue=[],this.firstLastNodesList=[],this.indexesToDelete=[],this.rendering_queued=!1,this.pendingDeletes=[],this.headDataPromise=null,this.tailDataPromise=null,r.virtualElements.emptyNode(this.element),this._initChildrenBindingsAppliedPromise();var i=r.unwrap(this.data);i.fetchFirst?(this.currentDataProvider=i,this.fetchData()):this.onArrayChange(u(i,o)),this.addSubscriptions()}p.PENDING_DELETE_INDEX_KEY=d,p.prototype.addSubscriptions=function(){var e=r.isObservable(this.data);this.currentDataProvider?(this.dataMutateHandler=this.handleDataMutateEvent.bind(this),this.dataRefreshHandler=this.handleDataRefreshEvent.bind(this),this.currentDataProvider.addEventListener("mutate",this.dataMutateHandler),this.currentDataProvider.addEventListener("refresh",this.dataRefreshHandler),e&&(this.changeSubs=this.data.subscribe(this.onDataChange,this,"change"))):e&&(this.data.indexOf||(this.data=this.data.extend({trackArrayChanges:!0})),this.changeArraySubs=this.data.subscribe(this.onArrayDataChange,this,"arrayChange"),this.changeSubs=this.data.subscribe(this.onDataChange,this,"change"))},p.prototype.removeSubscriptions=function(){this.changeSubs&&this.changeSubs.dispose(),this.changeArraySubs&&this.changeArraySubs.dispose(),this.currentDataProvider&&(this.currentDataProvider.removeEventListener("mutate",this.dataMutateHandler),this.currentDataProvider.removeEventListener("refresh",this.dataRefreshHandler))},p.prototype.onArrayDataChange=function(e){this.arrayChangeSet=e},p.prototype.onDataChange=function(e){this.arrayChangeSet?(this.onArrayChange(this.arrayChangeSet),this.arrayChangeSet=null):(this.setData({data:this.data,dataProvider:e.fetchFirst?e:null}),this.recreateContent(e))},p.prototype.recreateContent=function(e){this.changeQueue=[],this.firstLastNodesList=[],this.indexesToDelete=[],this.rendering_queued=!1,this.pendingDeletes=[],r.virtualElements.emptyNode(this.element),e.fetchFirst?this.fetchData():this.onArrayChange(u(e,o))},p.prototype.registerBusyState=function(){var e=this.element.parentNode;return n.getContext(e).getBusyContext().addBusyState({description:"oj-bind-for-each binding on a node with the Id "+e.id+"is loading data."})},p.prototype._initChildrenBindingsAppliedPromise=function(){var t=this.element._templateNode.__ojBindingContext.$current,n=t?{_nearestCustomParent:t._nearestCustomParent,_immediate:t._immediate}:null,r=function(t,n){for(var r=t.parentNode;r&&!e.ElementUtils.isValidCustomElementName(r.localName);)r=r.parentNode;return r||(r=n?n._nearestCustomParent:null),r}(this.element,n),i=function(e,t,n){var r=!1,i=!!n;return e.parentNode===t?r=!0:i&&!e.parentNode.parentNode&&(r=n._immediate),r}(this.element,r,n);this.trackingContext={_nearestCustomParent:r,_immediate:i},this._childrenBindingsPromiseResolver=e._KnockoutBindingProvider.getInstance().__RegisterBindingAppliedPromiseForChildren(r,i)},p.prototype._resolveChildrenBindingsAppliedPromise=function(){this._childrenBindingsPromiseResolver&&(this._childrenBindingsPromiseResolver(),this._childrenBindingsPromiseResolver=null)},p.prototype.resetChainIfCompleted=function(e){e===this.tailDataPromise&&(this.headDataPromise=null,this.tailDataPromise=null)},p.prototype.promiseRejectHelper=function(e,t,n){if(t(),this.resetChainIfCompleted(n),!e._CAUGHT_PROMISE_REJECTION&&e.message!==c){if(e instanceof Error)throw e._CAUGHT_PROMISE_REJECTION=!0,e;throw new Error(e)}s.info(e)},p.prototype.fetchData=function(){var e,t,n,r=this.registerBusyState(),i=this.currentDataProvider.fetchFirst({size:-1})[Symbol.asyncIterator](),a=function(s,u,l){return function(d){if(l.headDataPromise===n){for(var p=d.value,f=s.length,h=0;h<p.metadata.length&&h<p.data.length;h++)s.push(o(p.data[h],f,p.metadata[h].key)),f+=1;d.done?(u.call(l,s),r(),e(),l.resetChainIfCompleted(n)):i.next().then(a(s,u,l),function(e){r(),t(e),l.resetChainIfCompleted(n)})}else r(),t(new Error(c))}};(n=new Promise(function(o,s){e=o,t=s,i.next().then(a([],this.onArrayChange,this),function(e){r(),t(e),this.resetChainIfCompleted(n)}.bind(this))}.bind(this))).catch(function(e){if(e.message!==c){if(e instanceof Error)throw e._CAUGHT_PROMISE_REJECTION=!0,e;throw new Error(e)}}),this.headDataPromise=n,this.tailDataPromise=n},p.prototype.getIndexesForEvent=function(e,t){var n,r=[];if(Array.isArray(e))for(n=0;n<e.length;n++)r.push(e[n]);else if(t){var o=Array.isArray(t)?t.length:t.size,a=new i(t),s=new Map,u=0;for(n=0;n<this.firstLastNodesList.length&&u<o;n++){var l=this.firstLastNodesList[n].key,d=a.get(l);d!==a.NOT_A_KEY&&(s.set(d,n),u+=1)}t.forEach(function(e){r.push(s.get(e))})}return r},p.prototype.handleDataMutateEvent=function(e){var t,n,r={},i=this;this.tailDataPromise?(t=this.registerBusyState(),(n=this.tailDataPromise.then(function(){return t(),i.getDataMutationHelper(e,r)})).catch(function(e){i.promiseRejectHelper(e,t,n)})):(n=this.getDataMutationHelper(e,r),this.headDataPromise=n),this.tailDataPromise=n,r.head=this.headDataPromise,r.current=n},p.prototype.getDataMutationHelper=function(e,t){var n,r,i,s,u,l=e.detail.add,d=e.detail.remove,p=e.detail.update,f=[],h=this;if(l){var g=l.data;n=l.keys,i=this.getIndexesForEvent(l.indexes,l.addBeforeKeys?l.addBeforeKeys:l.afterKeys);var m=function(e){var t=i.length>e?i[e]:this.firstLastNodesList.length+e;return void 0===t?this.firstLastNodesList.length:t};Array.isArray(g)?(r=0,n.forEach(function(e){f.push(o(g[r],m(r),e)),r+=1},this)):(s=this.registerBusyState(),(u=this.currentDataProvider.fetchByKeys({keys:n}).then(function(e){if(t.head!==h.headDataPromise)throw s(),new Error(c);if(e.results.size>0){var r=0;n.forEach(function(t){var n=e.results.get(t).data;f.push(o(n,m(r),t)),r+=1}),h.onArrayChange(f)}s(),h.resetChainIfCompleted(t.current)})).catch(function(e){h.promiseRejectHelper(e,s,t.current)}))}else d?(i=(i=this.getIndexesForEvent(d.indexes,d.keys)).filter(function(e){return void 0!==e}),f=i.map(a)):p&&(n=p.keys,i=this.getIndexesForEvent(p.indexes,n),Array.isArray(p.data)?(r=0,n.forEach(function(e){void 0!==i[r]&&(f.push(a(i[r])),f.push(o(p.data[r],i[r],e))),r+=1})):(s=this.registerBusyState(),(u=this.currentDataProvider.fetchByKeys({keys:n}).then(function(e){if(t.head!==h.headDataPromise)throw s(),new Error(c);var r=0;e.results.size>0&&(n.forEach(function(t){if(void 0!==i[r]){var n=e.results.get(t).data;f.push(a(i[r])),f.push(o(n,i[r],t))}r+=1}),h.onArrayChange(f)),s(),h.resetChainIfCompleted(t.current)})).catch(function(e){h.promiseRejectHelper(e,s,t.current)})));return f.length>0&&this.onArrayChange(f),u},p.prototype.handleDataRefreshEvent=function(){this.recreateContent(this.currentDataProvider)},p.prototype.onArrayChange=function(e){for(var t={added:[],deleted:[]},n=0,r=e.length;n<r;n++)if(t.added.length&&"added"===e[n].status){var i=t.added[t.added.length-1];(i.isBatch?i.index+i.values.length-1:i.index)+1===e[n].index?(i.isBatch||(i={isBatch:!0,status:"added",index:i.index,values:[i.value],keys:[i.key]},t.added.splice(t.added.length-1,1,i)),i.values.push(e[n].value),i.keys.push(e[n].key)):t[e[n].status].push(e[n])}else t[e[n].status].push(e[n]);t.deleted.length>0&&(this.changeQueue.push.apply(this.changeQueue,t.deleted),this.changeQueue.push({status:"clearDeletedIndexes"})),this.changeQueue.push.apply(this.changeQueue,t.added),this.changeQueue.length>0&&!this.rendering_queued&&(this.rendering_queued=!0,this.processQueue()),this._resolveChildrenBindingsAppliedPromise()},p.prototype.processQueue=function(){var e=this,t=9007199254740991;r.utils.arrayForEach(this.changeQueue,function(n){"number"==typeof n.index&&(t=Math.min(t,n.index)),e[n.status](n)}),this.flushPendingDeletes(),this.rendering_queued=!1,this.updateIndexes(t),this.changeQueue=[]},p.prototype.added=function(e){for(var t=e.index,n=e.isBatch?e.values:[e.value],i=e.isBatch?e.keys:[e.key],o=this.getLastNodeBeforeIndex(t),a=[],s=0,u=n.length;s<u;++s){var d,c,p=this.getPendingDeleteFor(n[s]);p&&p.nodesets.length?(d=p.nodesets.pop(),c=p.currentChildContext):(c={data:n[s],index:t+s,observableIndex:r.observable()},Object.defineProperties(c,{_nearestCustomParent:{value:this.trackingContext._nearestCustomParent,enumerable:!1},_immediate:{value:this.trackingContext._immediate,enumerable:!1}}),d=l.execute(this.element,this.element._templateNode,c,this.as)),a.push.apply(a,Array.prototype.slice.call(d)),this.firstLastNodesList.splice(t+s,0,{first:d[0],last:d[d.length-1],key:i?i[s]:null,currentChildContext:c})}this.insertAllAfter(a,o)},p.prototype.getNodesForIndex=function(e){var t=[],n=this.firstLastNodesList[e].first,r=this.firstLastNodesList[e].last;for(t.push(n);n&&n!==r;)n=n.nextSibling,t.push(n);return t},p.prototype.getLastNodeBeforeIndex=function(e){return e<1||e-1>=this.firstLastNodesList.length?null:this.firstLastNodesList[e-1].last},p.prototype.insertAllAfter=function(e,n){var i,o,a=this.element;if(1===e.length)r.virtualElements.insertAfter(a,e[0],n);else if(t){var s=document.createDocumentFragment();for(o=0,i=e.length;o!==i;++o)s.appendChild(e[o]);r.virtualElements.insertAfter(a,s,n)}else for(o=e.length-1;o>=0;--o){var u=e[o];if(!u)break;r.virtualElements.insertAfter(a,u,n)}return e},p.prototype.shouldDelayDeletion=function(e){return e&&("object"==typeof e||"function"==typeof e)},p.prototype.getPendingDeleteFor=function(e){var t=e&&e[d];return void 0===t?null:this.pendingDeletes[t]},p.prototype.getOrCreatePendingDeleteFor=function(e){var t=this.getPendingDeleteFor(e);return t||(t={data:e,nodesets:[]},e[d]=this.pendingDeletes.length,this.pendingDeletes.push(t),t)},p.prototype.deleted=function(e){if(this.shouldDelayDeletion(e.value)){var t=this.getOrCreatePendingDeleteFor(e.value);t.nodesets.push(this.getNodesForIndex(e.index)),t.currentChildContext=this.firstLastNodesList[e.index].currentChildContext}else this.removeNodes(this.getNodesForIndex(e.index));this.indexesToDelete.push(e.index)},p.prototype.removeNodes=function(e){if(e.length){!function(){for(var t=e[0].parentNode,n=e.length-1;n>=0;--n)l.clean(e[n]),t.removeChild(e[n])}()}},p.prototype.flushPendingDeletes=function(){for(var e=0,t=this.pendingDeletes.length;e!==t;++e){for(var n=this.pendingDeletes[e];n.nodesets.length;)this.removeNodes(n.nodesets.pop());n.data&&void 0!==n.data[d]&&delete n.data[d]}this.pendingDeletes=[]},p.prototype.clearDeletedIndexes=function(){for(var e=this.indexesToDelete.length-1;e>=0;--e)this.firstLastNodesList.splice(this.indexesToDelete[e],1);this.indexesToDelete=[]},p.prototype.updateIndexes=function(e){for(var t=e,n=this.firstLastNodesList.length;t<n;++t){var r=this.firstLastNodesList[t].currentChildContext;r&&r.observableIndex&&r.observableIndex(t)}},p.prototype.getData=function(){return{data:this.data,dataProvider:this.currentDataProvider}},p.prototype.setData=function(e){this.removeSubscriptions(),this.data=e.data,this.currentDataProvider=e.dataProvider,this.addSubscriptions()},r.bindingHandlers._ojBindForEach_={init:function(e,t,n,i,o){var a,s;return r.computed(function(){if(s=t(),a){var e,n,i=s.data,o=a.getData().data;if(r.ignoreDependencies(function(){e=r.unwrap(o),n=r.unwrap(i)}),a.setData({data:i,dataProvider:n.fetchFirst?n:null}),Array.isArray(e)&&Array.isArray(n)){var u=r.utils.compareArrays(e,n,{sparse:!0,dontLimitMoves:!0});a.onArrayChange(u)}else a.recreateContent(n)}},null,{disposeWhenNodeIsRemoved:e}),a=new p(e,s,o),r.utils.domNodeDisposal.addDisposeCallback(e,function(){a.removeSubscriptions()}),{controlsDescendantBindings:!0}}},r.virtualElements.allowedBindings._ojBindForEach_=!0}(),e.koStringTemplateEngine={},e.koStringTemplateEngine.install=function(){if(!r.templates){var e={},t={},n=new r.nativeTemplateEngine;n.makeTemplateSource=function(n,i){if("string"==typeof n){var o=(i=i||document).getElementById(n);return o?new r.templateSources.domElement(o):new function(n){this._templateName=n,this.text=function(t){if(!t)return e[this._templateName];e[this._templateName]=t},this.data=function(e,n){if(t[this._templateName]||(t[this._templateName]={}),1===arguments.length)return t[this._templateName][e];t[this._templateName][e]=n}}(n)}if(n&&1===n.nodeType||8===n.nodeType)return new r.templateSources.anonymousTemplate(n)},r.templates=e,r.setTemplateEngine(n)}},e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["item"],init:function(e,t,n,r,i,o,a){var s=x(e,t,a);if(null!=s)return s},update:function(e,t,n,r,i,o,a){return x(e,t,a)},for:"ojListViewRenderer"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"ojListView",use:"ojListViewRenderer"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"ojNavigationList",use:"ojListViewRenderer"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["center"],init:function(e,t,n,r,i,o,a){return N(e,t,a)},update:function(e,t,n,r,i,o,a){return N(e,t,a)},for:"ojStatusMeterGauge"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["rootNodeContent"],init:function(e,t,n,r,i,o,a){return j(e,t,a)},update:function(e,t,n,r,i,o,a){return j(e,t,a)},for:"ojSunburst"});function P(e,n,i){var o,a;return o=i,a=n,function(n){var i=null,s=null;if("header"===a)i=e.createChildContext(null,null,function(e){e.$columnIndex=n.columnIndex,e.$headerContext=n.headerContext,e.$data=n.data}),s=n.headerContext.parentElement;else if("cell"===a){var u=n.row;i=e.createChildContext(u,null,function(e){e.$columnIndex=n.columnIndex,e.$cellContext=n.cellContext}),s=n.cellContext.parentElement}"footer"===a&&(i=e.createChildContext(null,null,function(e){e.$columnIndex=n.columnIndex,e.$footerContext=n.footerContext}),s=n.footerContext.parentElement),r.renderTemplate(o,i,{afterRender:function(e){t(e)._ojDetectCleanData()}},s,"replaceNode")}}function I(e,n){return function(i){var o=i.row,a=e.createChildContext(o,null,function(e){e.$rowContext=i.rowContext});r.renderTemplate(n,a,{afterRender:function(e){t(e)._ojDetectCleanData()}},i.rowContext.parentElement,"replaceNode")}}function T(e,t,n){var r,i;if("areaLayers"===e){for(r=0;r<t.length;r++){var o=t[r].areaDataLayer;o&&null!=(i=o.template)&&(o._templateRenderer=A(n,i))}return{areaLayers:t}}if("pointDataLayers"===e){for(r=0;r<t.length;r++)null!=(i=t[r].template)&&(t[r]._templateRenderer=A(n,i));return{pointDataLayers:t}}return null}function w(e,t,n){return"nodeContent"===e&&t.template&&(t._renderer=B(n,t.template)),{nodeContent:t}}e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["columns","columnsDefault","rowTemplate"],init:function(e,t,n,r,i,o,a){if("columns"===e||"columnsDefault"===e){for(var s=0;s<t.length;s++){var u=t[s],l=u.template,d=u.footerTemplate,c=u.headerTemplate;null!=l&&(u.renderer=P(a,"cell",l)),null!=d&&(u.footerRenderer=P(a,"footer",d)),null!=c&&(u.headerRenderer=P(a,"header",c))}return"columns"===e?{columns:t}:{columnsDefault:t}}if("rowTemplate"===e)return{rowRenderer:I(a,t)}},update:function(e,t,n,r,i,o,a){if("columns"===e||"columnsDefault"===e){for(var s=0;s<t.length;s++){var u=t[s],l=u.template,d=u.footerTemplate,c=u.headerTemplate;null!=l&&(u.renderer=P(a,"cell",l)),null!=d&&(u.footerRenderer=P(a,"footer",d)),null!=c&&(u.headerRenderer=P(a,"header",c))}r("columns"===e?{columns:t}:{columnsDefault:t})}else if("rowTemplate"===e)return{rowRenderer:I(a,t)};return null},for:"ojTable"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["areaLayers","pointDataLayers"],init:function(e,t,n,r,i,o,a){return T(e,t,a)},update:function(e,t,n,r,i,o,a){return T(e,t,a)},for:"ojThematicMap"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["nodeContent"],init:function(e,t,n,r,i,o,a){return w(e,t,a)},update:function(e,t,n,r,i,o,a){return w(e,t,a)},for:"ojTreemap"})});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdatacollection-common',["ojs/ojcore","jquery"],function(e,t){"use strict";var E=function(){};return E._TAB_INDEX="tabIndex",E._DATA_OJ_TABMOD="data-oj-tabmod",E.getFocusableElementsInNode=function(e,t){for(var n=[],_=e.querySelectorAll("input, select, button, a[href], textarea, object, [tabIndex]:not([tabIndex='-1'])"),r=_.length,i=0;i<r;i++){var l=_[i];if(!l.disabled&&(t||"none"!==l.style.display)){var o=parseInt(l.getAttribute(E._TAB_INDEX),10);(isNaN(o)||o>=0)&&n.push(l)}}return n},E.disableAllFocusableElements=function(e,t,n){for(var _=[],r=E.getFocusableElementsInNode(e,t),i=0;i<r.length;i++)if(!n||r[i]!==document.activeElement){var l=parseInt(r[i].getAttribute(E._TAB_INDEX),10);r[i].setAttribute(E._DATA_OJ_TABMOD,l),r[i].setAttribute(E._TAB_INDEX,-1),_.push(r[i])}return _},E.enableAllFocusableElements=function(e){for(var t=e.querySelectorAll("["+E._DATA_OJ_TABMOD+"]"),n=0;n<t.length;n++){var _=parseInt(t[n].getAttribute(E._DATA_OJ_TABMOD),10);t[n].removeAttribute(E._DATA_OJ_TABMOD),isNaN(_)?t[n].removeAttribute(E._TAB_INDEX):t[n].setAttribute(E._TAB_INDEX,_)}return t},E.handleActionableTab=function(e,t){var n=E.getFocusableElementsInNode(t);return n.length>0&&e.target===n[n.length-1]&&(n[0].focus(),!0)},E.handleActionablePrevTab=function(e,t){var n=E.getFocusableElementsInNode(t);return n.length>0&&e.target===n[0]&&(n[n.length-1].focus(),!0)},E.getDefaultScrollBarWidth=function(e){var t;if(e&&e.style){var E=e.style.visibility,n=e.style.position,_=e.style.overflowY,r=e.style.height,i=e.style.width;e.style.visibility="hidden",e.style.position="absolute",e.style.overflowY="hidden",e.style.height="50px",e.style.width="50px";var l=e.offsetWidth-e.clientWidth;e.style.overflowY="scroll",t=e.offsetWidth-e.clientWidth-l,e.style.width=i,e.style.height=r,e.style.overflowY=_,e.style.position=n,e.style.visibility=E}return t},E.disableDefaultBrowserStyling=function(e){e.setAttribute("x-ms-format-detection","none")},E.applyMergedInlineStyles=function(e,t,n){var _=E.convertStringToStyleObj(n),r=E.convertStringToStyleObj(t),i=Object.assign({},_,r);E.applyStyleObj(e,i)},E.convertStringToStyleObj=function(e){var t={};if(e.split)for(var E=e.split(";"),n=0;n<E.length;n++){var _=E[n];if(""!==_){var r=_.split(":");2===r.length&&(t[r[0].trim()]=r[1].trim())}}return t},E.applyStyleObj=function(e,t){for(var E=Object.keys(t),n=Object.values(t),_=0;_<E.length;_++)e.style[E[_]]=n[_]},E.areKeySetsEqual=function(t,E){if(t===E)return!0;var n,_,r=t.isAddAll();if(r!==E.isAddAll())return!1;if(r?(n=t.deletedValues(),_=E.deletedValues()):(n=t.values(),_=E.values()),n.size!==_.size)return!1;for(var i=n.values(),l=_.values(),o=i.next(),s=l.next();!o.done;){if(!e.KeyUtils.equals(o.value,s.value))return!1;o=i.next(),s=l.next()}return!0},E.KEYBOARD_KEYS={_SPACEBAR:" ",_SPACEBAR_IE:"SpaceBar",_SPACEBAR_CODE:32,_ENTER:"Enter",_ENTER_CODE:13,_UP:"ArrowUp",_UP_IE:"Up",_UP_CODE:38,_DOWN:"ArrowDown",_DOWN_IE:"Down",_DOWN_CODE:40,_LEFT:"ArrowLeft",_LEFT_IE:"Left",_LEFT_CODE:37,_RIGHT:"ArrowRight",_RIGHT_IE:"Right",_RIGHT_CODE:39,_HOME:"Home",_HOME_CODE:36,_END:"End",_END_CODE:35,_TAB:"Tab",_TAB_CODE:9,_ESCAPE:"Escape",_ESCAPE_IE:"Esc",_ESCAPE_CODE:27,_F2:"F2",_F2_CODE:113},E.isEnterKeyEvent=function(e){return e===E.KEYBOARD_KEYS._ENTER||e===E.KEYBOARD_KEYS._ENTER_CODE},E.isSpaceBarKeyEvent=function(e){return e===E.KEYBOARD_KEYS._SPACEBAR||e===E.KEYBOARD_KEYS._SPACEBAR_IE||e===E.KEYBOARD_KEYS._SPACEBAR_CODE},E.isEscapeKeyEvent=function(e){return e===E.KEYBOARD_KEYS._ESCAPE||e===E.KEYBOARD_KEYS._ESCAPE_IE||e===E.KEYBOARD_KEYS._ESCAPE_CODE},E.isTabKeyEvent=function(e){return e===E.KEYBOARD_KEYS._TAB||e===E.KEYBOARD_KEYS._TAB_CODE},E.isF2KeyEvent=function(e){return e===E.KEYBOARD_KEYS._F2||e===E.KEYBOARD_KEYS._F2_CODE},E.isHomeKeyEvent=function(e){return e===E.KEYBOARD_KEYS._HOME||e===E.KEYBOARD_KEYS._HOME_CODE},E.isEndKeyEvent=function(e){return e===E.KEYBOARD_KEYS._END||e===E.KEYBOARD_KEYS._END_CODE},E.isArrowUpKeyEvent=function(e){return e===E.KEYBOARD_KEYS._UP||e===E.KEYBOARD_KEYS._UP_IE||e===E.KEYBOARD_KEYS._UP_CODE},E.isArrowDownKeyEvent=function(e){return e===E.KEYBOARD_KEYS._DOWN||e===E.KEYBOARD_KEYS._DOWN_IE||e===E.KEYBOARD_KEYS._DOWN_CODE},E.isArrowLeftKeyEvent=function(e){return e===E.KEYBOARD_KEYS._LEFT||e===E.KEYBOARD_KEYS._LEFT_IE||e===E.KEYBOARD_KEYS._LEFT_CODE},E.isArrowRightKeyEvent=function(e){return e===E.KEYBOARD_KEYS._RIGHT||e===E.KEYBOARD_KEYS._RIGHT_IE||e===E.KEYBOARD_KEYS._RIGHT_CODE},E});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojchildmutationobserver',["ojs/ojcore","ojs/ojcustomelement"],function(e){"use strict";return function(t,n){var r=t,o=n,a=e.BaseCustomElementBridge.getRegistered(t.tagName)?e.BaseCustomElementBridge.getTrackChildrenOption(t):"none",s=function(t){var n=function(t){for(var n=[],o=0;o<t.length;o++)for(var s=t[o],i="childList"===s.type?s.target:s.target.parentNode;i;)i===r?(n.push(s),i=null):i="nearestCustomElement"!==a||e.ElementUtils.isValidCustomElementName(i.localName)?null:i.parentNode;return n}(t);n.length>0&&o(n)},i=new MutationObserver(s);return{observe:function(){"none"!==a&&i.observe(r,{attributes:!0,childList:!0,subtree:!0,characterData:!0})},disconnect:function(){var e=i.takeRecords();e&&e.length>0&&s(e),i.disconnect()}}}});
/*!
 * jQuery UI Position 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
!function(t){"function"==typeof define&&define.amd?define('jqueryui-amd/position',["jquery","./version"],t):t(jQuery)}((function(t){return function(){var i,o=Math.max,e=Math.abs,n=/left|center|right/,l=/top|center|bottom/,f=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,h=/%$/,r=t.fn.position;function p(t,i,o){return[parseFloat(t[0])*(h.test(t[0])?i/100:1),parseFloat(t[1])*(h.test(t[1])?o/100:1)]}function c(i,o){return parseInt(t.css(i,o),10)||0}function a(i){var o=i[0];return 9===o.nodeType?{width:i.width(),height:i.height(),offset:{top:0,left:0}}:t.isWindow(o)?{width:i.width(),height:i.height(),offset:{top:i.scrollTop(),left:i.scrollLeft()}}:o.preventDefault?{width:0,height:0,offset:{top:o.pageY,left:o.pageX}}:{width:i.outerWidth(),height:i.outerHeight(),offset:i.offset()}}t.position={scrollbarWidth:function(){if(void 0!==i)return i;var o,e,n=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),l=n.children()[0];return t("body").append(n),o=l.offsetWidth,n.css("overflow","scroll"),o===(e=l.offsetWidth)&&(e=n[0].clientWidth),n.remove(),i=o-e},getScrollInfo:function(i){var o=i.isWindow||i.isDocument?"":i.element.css("overflow-x"),e=i.isWindow||i.isDocument?"":i.element.css("overflow-y"),n="scroll"===o||"auto"===o&&i.width<i.element[0].scrollWidth;return{width:"scroll"===e||"auto"===e&&i.height<i.element[0].scrollHeight?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(i){var o=t(i||window),e=t.isWindow(o[0]),n=!!o[0]&&9===o[0].nodeType;return{element:o,isWindow:e,isDocument:n,offset:!e&&!n?t(i).offset():{left:0,top:0},scrollLeft:o.scrollLeft(),scrollTop:o.scrollTop(),width:o.outerWidth(),height:o.outerHeight()}}},t.fn.position=function(i){if(!i||!i.of)return r.apply(this,arguments);i=t.extend({},i);var h,d,g,u,m,w,W=t(i.of),v=t.position.getWithinInfo(i.within),y=t.position.getScrollInfo(v),H=(i.collision||"flip").split(" "),b={};return w=a(W),W[0].preventDefault&&(i.at="left top"),d=w.width,g=w.height,u=w.offset,m=t.extend({},u),t.each(["my","at"],(function(){var t,o,e=(i[this]||"").split(" ");1===e.length&&(e=n.test(e[0])?e.concat(["center"]):l.test(e[0])?["center"].concat(e):["center","center"]),e[0]=n.test(e[0])?e[0]:"center",e[1]=l.test(e[1])?e[1]:"center",t=f.exec(e[0]),o=f.exec(e[1]),b[this]=[t?t[0]:0,o?o[0]:0],i[this]=[s.exec(e[0])[0],s.exec(e[1])[0]]})),1===H.length&&(H[1]=H[0]),"right"===i.at[0]?m.left+=d:"center"===i.at[0]&&(m.left+=d/2),"bottom"===i.at[1]?m.top+=g:"center"===i.at[1]&&(m.top+=g/2),h=p(b.at,d,g),m.left+=h[0],m.top+=h[1],this.each((function(){var n,l,f=t(this),s=f.outerWidth(),r=f.outerHeight(),a=c(this,"marginLeft"),w=c(this,"marginTop"),x=s+a+c(this,"marginRight")+y.width,T=r+w+c(this,"marginBottom")+y.height,L=t.extend({},m),P=p(b.my,f.outerWidth(),f.outerHeight());"right"===i.my[0]?L.left-=s:"center"===i.my[0]&&(L.left-=s/2),"bottom"===i.my[1]?L.top-=r:"center"===i.my[1]&&(L.top-=r/2),L.left+=P[0],L.top+=P[1],n={marginLeft:a,marginTop:w},t.each(["left","top"],(function(o,e){t.ui.position[H[o]]&&t.ui.position[H[o]][e](L,{targetWidth:d,targetHeight:g,elemWidth:s,elemHeight:r,collisionPosition:n,collisionWidth:x,collisionHeight:T,offset:[h[0]+P[0],h[1]+P[1]],my:i.my,at:i.at,within:v,elem:f})})),i.using&&(l=function(t){var n=u.left-L.left,l=n+d-s,h=u.top-L.top,p=h+g-r,c={target:{element:W,left:u.left,top:u.top,width:d,height:g},element:{element:f,left:L.left,top:L.top,width:s,height:r},horizontal:l<0?"left":n>0?"right":"center",vertical:p<0?"top":h>0?"bottom":"middle"};d<s&&e(n+l)<d&&(c.horizontal="center"),g<r&&e(h+p)<g&&(c.vertical="middle"),o(e(n),e(l))>o(e(h),e(p))?c.important="horizontal":c.important="vertical",i.using.call(this,t,c)}),f.offset(t.extend(L,{using:l}))}))},t.ui.position={fit:{left:function(t,i){var e,n=i.within,l=n.isWindow?n.scrollLeft:n.offset.left,f=n.width,s=t.left-i.collisionPosition.marginLeft,h=l-s,r=s+i.collisionWidth-f-l;i.collisionWidth>f?h>0&&r<=0?(e=t.left+h+i.collisionWidth-f-l,t.left+=h-e):t.left=r>0&&h<=0?l:h>r?l+f-i.collisionWidth:l:h>0?t.left+=h:r>0?t.left-=r:t.left=o(t.left-s,t.left)},top:function(t,i){var e,n=i.within,l=n.isWindow?n.scrollTop:n.offset.top,f=i.within.height,s=t.top-i.collisionPosition.marginTop,h=l-s,r=s+i.collisionHeight-f-l;i.collisionHeight>f?h>0&&r<=0?(e=t.top+h+i.collisionHeight-f-l,t.top+=h-e):t.top=r>0&&h<=0?l:h>r?l+f-i.collisionHeight:l:h>0?t.top+=h:r>0?t.top-=r:t.top=o(t.top-s,t.top)}},flip:{left:function(t,i){var o,n,l=i.within,f=l.offset.left+l.scrollLeft,s=l.width,h=l.isWindow?l.scrollLeft:l.offset.left,r=t.left-i.collisionPosition.marginLeft,p=r-h,c=r+i.collisionWidth-s-h,a="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,d="left"===i.at[0]?i.targetWidth:"right"===i.at[0]?-i.targetWidth:0,g=-2*i.offset[0];p<0?((o=t.left+a+d+g+i.collisionWidth-s-f)<0||o<e(p))&&(t.left+=a+d+g):c>0&&((n=t.left-i.collisionPosition.marginLeft+a+d+g-h)>0||e(n)<c)&&(t.left+=a+d+g)},top:function(t,i){var o,n,l=i.within,f=l.offset.top+l.scrollTop,s=l.height,h=l.isWindow?l.scrollTop:l.offset.top,r=t.top-i.collisionPosition.marginTop,p=r-h,c=r+i.collisionHeight-s-h,a="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,d="top"===i.at[1]?i.targetHeight:"bottom"===i.at[1]?-i.targetHeight:0,g=-2*i.offset[1];p<0?((n=t.top+a+d+g+i.collisionHeight-s-f)<0||n<e(p))&&(t.top+=a+d+g):c>0&&((o=t.top-i.collisionPosition.marginTop+a+d+g-h)>0||e(o)<c)&&(t.top+=a+d+g)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position}));
define('ojs/ojvcomponent',["exports","ojs/ojcore-base","ojs/ojcontext","ojs/ojdefaultsutils","ojs/ojcustomelement"],function(t,e,n,o,r){"use strict";
/**
     * @license
     * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
     * The Universal Permissive License (UPL), Version 1.0
     * as shown at https://oss.oracle.com/licenses/upl/
     * @ignore
     */
/**
     * @license
     * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
     * The Universal Permissive License (UPL), Version 1.0
     * as shown at https://oss.oracle.com/licenses/upl/
     * @ignore
     */const i=Object.freeze({});function s(t){return t?"string"==typeof t?t.split(" ").reduce((t,e)=>(e&&(t[e]=!0),t),{}):t:i}var l;!function(t){t.LISTENER_OPTIONS_SYMBOL=Symbol();const n=new Set(["key","ref","children"]),r=Array.isArray,l=function(t){return t&&(null!=t.type||null!=t._text||t._node)},u=function(t){return(null==t?void 0:t.mount)&&(null==t?void 0:t.patch)&&(null==t?void 0:t.notifyUnmounted)&&(null==t?void 0:t.notifyMounted)};function c(t,e){for(let n=0;n<t.length;n++){const o=t[n];if(r(o))return a(t,n,t.slice(0,n),e);l(o)?e&&!o.isSVG&&(o.isSVG=!0):t[n]={_text:null==o?"":o}}return t}function a(t,e,n,o){for(let i=e;i<t.length;i++){const e=t[i];r(e)?a(e,0,n,o):l(e)?(o&&!e.isSVG&&(e.isSVG=!0),n.push(e)):null==e||"string"==typeof e?n.push({_text:null==e?"":e}):n.push(e)}return n}t.h=function(t,n,...o){let s,a,_=!1,d=!1;if("string"!=typeof t)a=(d="function"==typeof t&&u(t.prototype))&&t.prototype.mountContent,s=o;else{a=!(_="svg"===t)&&e.ElementUtils.isValidCustomElementName(t);const n=o.length;if(1===n){const t=o[0];r(t)?s=c(t,_):l(t)?(t.isSVG=_,s=[t]):s=[{_text:null==t?"":t}]}else s=n>1?c(o,_):o}const p=d||a;return{type:t,isSVG:_,isComponent:d,isCustomElement:a,key:null==n?void 0:n.key,props:n||(p?Object.create(null):i),content:s,ref:null==n?void 0:n.ref}};const _="http://www.w3.org/2000/svg",d="http://www.w3.org/1999/xlink",p={show:d,actuate:d,href:d};function h(t,e,n,o){if(n!==o)return!0;for(let n in t)if(t[n]!==e[n])return!0;return!1}function f(t,n=!1){let o;if(t._node)return t._node;if(null!=t._text)o=document.createTextNode(t._text);else{const r=t.type,i=t.props,s=t.content,l=t.isSVG;if("string"==typeof r)S(o=l?document.createElementNS(_,r):document.createElement(r),i,null,n||t.isCustomElement),E(o)?C(o,s):v(o,s);else if("function"==typeof r)if(t.isComponent){let n;const l=r,u=b(l,i,t.isCustomElement);t._uncontrolled=u.uncontrolled,(n=new l(u.controlled))._uniqueId=e.__AttributeUtils.getUniqueId(i.id),o=n.mount(u.controlled,s,u.uncontrolled),t._data=n}else{const e=r(i,s);o=f(e),t._data=e}}if(null==o)throw new Error("Unknown node type!");return t._node=o,o}function m(t){let e;if(null!=t._text)e=document.createTextNode(t._text);else{const o=t.type,r=t.props,i=t.content,s=t.isSVG;"string"==typeof o&&(function(t,e,o,r){if(e){const o=Object.keys(e);o.forEach(function(o){if(n.has(o))return;const r=e[o];t.setAttribute(o,r)})}}(e=s?document.createElementNS(_,o):document.createElement(o),r,0,t.isCustomElement),C(e,i))}if(null==e)throw new Error("content inside <template> elements is limited to HTML elements and text");return t._node=e,e}function E(t){return"TEMPLATE"===t.nodeName}function P(t){if(t.isComponent){const e=t._data;x(t.ref,e),x(e._vnode.props.ref,t._node),t.isCustomElement||e.notifyMounted()}else"function"!=typeof t.type&&x(t.ref,t._node)}function v(t,n,o=0,r=n.length-1,i=null){for(;o<=r;){const r=n[o++];if(r._node){const n=r._node;G(t,r,i),1===n.nodeType&&e.Components&&e.Components.subtreeShown(n)}else G(t,r,i)}}function C(t,e,n=0,o=e.length-1,r=null){for(;n<=o;){const o=e[n++];m(o),G(t,o,r)}}function y(t,e,n=0,o=e.length-1){let r=void 0;for(t.childNodes.length===o-n+1&&(t.textContent="",r=!0);n<=o;){let o=e[n++];r||F(t,o)}}function g(t){if(r(t))for(let e=0;e<t.length;e++)g(t[e]);else{if(t.isComponent){t._data.notifyUnmounted(t._node)}else null!=t.content&&g(t.content);(t.isComponent||"function"!=typeof t.type)&&x(t.ref,null)}}function O(t,e){var n,o;const r=t.metadata;return null!=(null===(o=null===(n=null==r?void 0:r.extension)||void 0===n?void 0:n._ROOT_PROPS_MAP)||void 0===o?void 0:o[e])}function b(t,n,r){const i=o.DefaultsUtils.getStaticDefaults(t,t.metadata,!0),s={controlled:Object.create(i),uncontrolled:{}};for(let o in n){const i=n[o];void 0!==i&&(r&&e.__AttributeUtils.isGlobalOrData(o)&&!O(t,o)?s.uncontrolled[o]=i:s.controlled[o]=i)}return s}function S(t,e,o,r){e&&function(t,e,o,r){Object.keys(e).forEach(function(s){if(n.has(s))return;const l=e[s],u=o[s];l!==u&&("style"===s?R(t.style,l||i,u||i,""):"class"===s?T(t,l,u,r):A(t,s,l,u)||N(t,s,l,r)||(t[s]=l))})}(t,e,o||i,r),o&&function(t,e,n,o){Object.keys(n).forEach(function(r){if("key"===r||"ref"===r)return;const s=n[r];r in e||("style"===r?R(t.style,i,s||i,""):"class"===r?T(t,null,s,o):A(t,r,null,s)||N(t,r,null,o)||(t[r]=void 0))})}(t,e||i,o,r)}function R(t,e,n,o){for(let o in e){const r=n[o],i=e[o];r!==i&&(t[o]=i)}for(let r in n)r in e||(t[r]=o)}function T(t,e,n,o){o?function(t,e,n){const o=s(n),r=s(e);for(let e in o)o[e]&&!r[e]&&t.classList.remove(e);for(let e in r)r[e]&&!o[e]&&t.classList.add(e)}(t,e,n):function(t,e){if(e){const n="object"==typeof e?Object.keys(e).filter(t=>e[t]).join(" "):e;t.setAttribute("class",n)}else t.removeAttribute("class")}(t,e)}function A(e,n,o,r){if(o||r){const i=function(t){if(/^on[A-Z]/.test(t))return t.substr(2,1).toLowerCase()+t.substr(3);return null}(n);if(i)return function(e,n,o,r){r&&e.removeEventListener(n,r,r[t.LISTENER_OPTIONS_SYMBOL]);o&&e.addEventListener(n,o,o[t.LISTENER_OPTIONS_SYMBOL])}(e,i,o,r),!0}return!1}function N(t,n,o,r){if(r&&e.__AttributeUtils.isGlobalOrData(n)||!r&&"value"!==n&&"checked"!==n){const r=e.__AttributeUtils.getNativeAttr(n);if(!0===o)t.setAttribute(r,"");else if(!1===o)t.removeAttribute(r);else if(null!=o){const e=p[r];void 0!==e?t.setAttributeNS(e,r,o):t.setAttribute(r,o)}else t.removeAttribute(r);return!0}return!1}function U(t,e,n,o=!1){let r,i,s=e._node;if(e===t)return s;if(E(s))return t._node=s,s;if(t._node)return s!==t._node&&V(n,t,e),t._node;if(null!=(r=e._text)&&null!=(i=t._text))r!==i&&(s.nodeValue=i);else if(e.type===t.type&&e.isSVG===t.isSVG){const r=e.type;if("function"==typeof r)if(e.isComponent){const n=e._data,o=b(r,t.props,t.isCustomElement);t._uncontrolled=o.uncontrolled,n.patch(o.controlled,t.content,o.uncontrolled,e._uncontrolled),t._data=n,x(t.ref,n,e.ref)}else{if((r.shouldUpdate||h)(t.props,e.props,t.content,e.content)){const o=r(t.props,t.content);s=U(o,e._data,n),t._data=o}else t._data=e._data}else{if("string"!=typeof r)throw new Error(`Error while patching. Unknown node type '${r}'.`);e.isCustomElement&&function(t,e){if(t===e)return!1;if(t.length!==e.length)return!0;return t.some(function(t,n){var o,r;const i=e[n];return t.type!==i.type||(null===(o=t.props)||void 0===o?void 0:o.slot)!==(null===(r=i.props)||void 0===r?void 0:r.slot)})}(t.content,e.content)?s=V(n,t,e):(S(s,t.props,e.props,o||e.isCustomElement),B(s,t.content,e.content),x(t.ref,s,e.ref))}}else n&&(s=V(n,t,e));return t._node=s,s}function k(t,e){return null==t.key&&null==e.key||t.key===e.key}function B(t,e,n,o=0,r=e.length-1,i=0,s=n.length-1){if(e===n)return;let l,u=function(t,e,n,o,r,i,s,l){let u,c,a=0;for(;n<=o&&r<=i&&s(u=t[n],c=e[r]);)l&&U(u,c,l),n++,r++,a++;return a}(e,n,o,r,i,s,k,t);if(s-=u=function(t,e,n,o,r,i,s,l){let u,c,a=0;for(;n<=o&&r<=i&&s(u=t[o],c=e[i]);)l&&U(u,c,l),o--,i--,a++;return a}(e,n,o+=u,r,i+=u,s,k,t),o>(r-=u)&&i>s)return;if(o<=r&&i>s)return void v(t,e,o,r,l=n[i]);if(i<=s&&o>r)return void y(t,n,i,s);const c=s-i+1,a=r-o+1;if(u=-1,c<a){if((u=M(e,n,o,r,i,s,k))>=0){v(t,e,o,u-1,l=n[i]);const a=u+c;for(o=u;o<a;)U(e[o++],n[i++],t);return void v(t,e,o,r,n[s+1])}}else if(c>a&&(u=M(n,e,i,s,o,r,k))>=0){y(t,n,i,u-1);const r=u+a;for(i=u;i<r;)U(e[o++],n[i++],t);return void y(t,n,i,s)}return i===s?(F(t,n[i]),void v(t,e,o,r,n[i+1])):o===r?(y(t,n,i,s),void G(t,e[o],n[s+1])):void(function(t,e,n,o=0,r=e.length-1,i=0,s=n.length-1){const l=r-o+1,u=s-i+1,c=l+u,a=[];let _,d,p,h,f,m,E;t:for(_=0;_<=c;_++){if(_>50)return!0;for(E=_-1,f=_?a[_-1]:[0,0],m=a[_]=[],d=-_;d<=_;d+=2){for(h=d===-_||d!==_&&f[E+d-1]<f[E+d+1]?f[E+d+1]:f[E+d-1]+1,p=h-d;h<u&&p<l&&k(n[i+h],e[o+p]);)h++,p++;if(h===u&&p===l)break t;m[_+d]=h}}const P=Array(_/2+c/2),v={};let C,y=P.length-1;for(_=a.length-1;_>=0;_--){for(;h>0&&p>0&&k(n[i+h-1],e[o+p-1]);)P[y--]=L,h--,p--;if(!_)break;E=_-1,f=_?a[_-1]:[0,0],(d=h-p)===-_||d!==_&&f[E+d-1]<f[E+d+1]?(p--,P[y--]=D):(h--,P[y--]=I,null!=(C=n[i+h]).key&&(v[C.key]=i+h))}j(t,P,e,n,o,i,v)}(t,e,n,o,r,i,s)&&function(t,e,n,o,r,i,s){const l=r-o+1,u=s-i+1,c=Math.min(l,u),a=Array(c+1);a[0]=-1;for(let t=1;t<a.length;t++)a[t]=s+1;const _=Array(c),d={},p=[];for(let t=i;t<=s;t++){let e=n[t],o=e.key;null!=o?d[o]=t:p.push(t)}let h=0;for(let t=o;t<=r;t++){const n=e[t],o=null==n.key?p[h++]:d[n.key];if(null!=o){let e=w(a,o);e>=0&&(a[e]=o,_[e]={newi:t,oldi:o,prev:_[e-1]})}}let f=a.length-1;for(;a[f]>s;)f--;let m=_[f];const E=Array(u+l-f);let P=r,v=s,C=E.length-1;for(;m;){let t=m,e=t.newi,n=t.oldi;for(;P>e;)E[C--]=D,P--;for(;v>n;)E[C--]=I,v--;E[C--]=L,P--,v--,m=m.prev}for(;P>=o;)E[C--]=D,P--;for(;v>=i;)E[C--]=I,v--;j(t,E,e,n,o,i,d)}(t,e,n,o,r,i,s))}t.mountCustomElement=function(t,e){const n=t.type,o=t.props,r=t.content,i=document.createElement(n);return S(i,e,null,!0),S(i,o,null,!0),v(i,r),t._node=i,i},t.mountCustomElementContent=function(t,e){const n=t._node;S(n,t.props,e,!0),v(n,t.content),x(t.ref,n)},t.mount=f,t.mounted=function t(e){if(r(e))for(let n=0;n<e.length;n++)t(e[n]);else e.isComponent?e._data.notifyMounted():null!=e.content&&t(e.content)},t.unmount=g,t.patchCustomElement=function(t,e,n,o){const r=e._node;e!==t&&(S(r,n,o,!0),S(r,t.props,e.props,!0),B(r,t.content,e.content),x(t.ref,r,e.ref))},t.patchCustomElementContent=function(t,n,o){const r=n._node;if(n===t)return;const i={},s=n.props;for(let t in s)t=t,(null!==e.__AttributeUtils.eventListenerPropertyToEventType(t)||"class"===t||"style"===t)&&(i[t]=s[t]);var l;Object.assign(i,o),S(r,t.props,i,!0),B(r,t.content,n.content),x(t.ref,r,n.ref)},t.patch=U;const L=2,D=4,I=8;function j(t,e,n,o,r,i,s){const l={};for(let n=0,r=i;n<e.length;n++){const i=e[n];if(i===L)r++;else if(i===I){const e=o[r++];null!=e.key&&null!=l[e.key]||F(t,e)}}for(let u=0,c=r,a=i;u<e.length;u++){const r=e[u];if(r===L)U(n[c++],o[a++],t);else if(r===D){const e=n[c++];let r=null;null!=e.key&&(r=s[e.key]),null!=r&&(U(e,o[r],t),l[e.key]=r),G(t,e,a<o.length?o[a]:null)}else r===I&&a++}}function w(t,e){let n=1,o=t.length-1;for(;n<=o;){let r=Math.ceil((n+o)/2);e<t[r]?o=r-1:n=r+1}return n}function M(t,e,n,o,r,i,s){let l=r,u=-1;const c=i-r+1;for(;n<=o&&o-n+1>=c;){if(s(t[n],e[l])){if(u<0&&(u=n),++l>i)return u}else u=-1,l=r;n++}return-1}function V(t,e,n){n._clean&&n._clean();const o=null==e._node;o&&f(e);const r=e._node;return q(t).replaceChild(r,n._node),g(n),n._node=r,o&&P(e),r}function F(t,e){e._clean&&e._clean(),q(t).removeChild(e._node),g(e)}function G(t,e,n){const o=null==e._node;o&&f(e);const r=e._node;q(t).insertBefore(r,(null==n?void 0:n._node)||null),o&&P(e)}function x(t,e,n=null){n!==t&&("function"==typeof n&&n(null),"function"==typeof t&&t(e))}function q(t){if(E(t)){const e=t.content;if(e)return e}return t}}(l||(l={}));const u=l.h,c={};
/**
     * @license
     * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
     * The Universal Permissive License (UPL), Version 1.0
     * as shown at https://oss.oracle.com/licenses/upl/
     * @ignore
     */var a;function _(t,e){switch(t.nodeType){case Node.COMMENT_NODE:return{_node:t};case Node.TEXT_NODE:return{_text:t.nodeValue,_node:t};case Node.ELEMENT_NODE:var n=[];t.childNodes.forEach(function(t){var e=_(t);e&&n.push(e)});var o={type:t.tagName.toLowerCase(),_node:t,props:t,content:n};return null!=e&&o.props.slot!==e&&(o.props.slot=e),o;default:return null}}function d(t,e){return function(n){if(n){var o=(r=e[0])&&r._node;if("TEMPLATE"===o.nodeName){if(!a)throw new Error("Unexpected call to render a template slot");return a.execute(t,o,n).map(t=>{const e=_(t);return e._clean=a.clean.bind(null,t),e})}}var r;return e}}c._DEFAULT_SLOT_PROP="children",c.proto=Object.create(e.BaseCustomElementBridge.proto),e.CollectionUtils.copyInto(c.proto,{AddComponentMethods:function(t){t.setProperty=function(t,n){var o=e.BaseCustomElementBridge.getInstance(this);o.SaveEarlyPropertySet(t,n)||o.SetProperty(this,t,n,this,!0)},t.getProperty=function(t){return e.BaseCustomElementBridge.getInstance(this).GetProperty(this,t,this)}},AttributeChangedCallback:function(t,n,o){if(e.BaseCustomElementBridge.proto.AttributeChangedCallback.call(this,t,n,o),n!==o){var r=e.BaseCustomElementBridge.getInstance(this);if(!r.ShouldHandleAttributeChanged(this)&&e.BaseCustomElementBridge.proto.ShouldHandleAttributeChanged.call(r,this)){var i=this._vcomp;i&&!i.isCustomElementFirst()||r.HandleAttributeChanged(this,t,n,o)}}},CreateComponent:function(t){if(!t._vcomp){e.Components&&e.Components.unmarkPendingSubtreeHidden(t);var n=e.BaseCustomElementBridge.__GetDescriptor(t.tagName),o=e.BaseCustomElementBridge.getSlotMap(t);this._initializeControlledProps(t);var r=this._getVComponentProps(),i=new n._CONSTRUCTOR(r);i._uniqueId=e.__AttributeUtils.getUniqueId(t.id),Object.defineProperty(t,"_vcomp",{value:i,enumerable:!1}),i.setCallbacks(this._getCallbacks(t)),this._mountCustomElement(t,t._vcomp,r,o)}t._vcomp.mounted(),this.__READY_TO_FIRE=!0,this.resolveDelayedReadyPromise()},DefineMethodCallback:function(t,n,o){t[n]=function(){this._vcomp||e.BaseCustomElementBridge.getInstance(this).throwError(this,"Cannot access methods before element is upgraded.");return this._vcomp[n].apply(this._vcomp,arguments)}},DefinePropertyCallback:function(t,n,o){function r(t,e){var r={isOuter:e,name:n,value:t,meta:o};this._BRIDGE._updateProperty(this._ELEMENT,r,!0)}function i(){var t=this._BRIDGE._PROPS[n];return void 0===t&&(t=this._BRIDGE._getDefaultValue(n,o),this._BRIDGE._PROPS[n]=t),t}o._derived||e.BaseCustomElementBridge.__DefineDynamicObjectProperty(t._propsProto,n,function(){return i.bind(this)()},function(t){r.bind(this)(t,!1)}),e.BaseCustomElementBridge.__DefineDynamicObjectProperty(t,n,function(){var t=this._vcomp;if(!t||t.isCustomElementFirst()){var n=e.BaseCustomElementBridge.getInstance(this);return i.bind(n._PROPS_PROXY)()}},function(t){var n=this._vcomp,o=e.BaseCustomElementBridge.getInstance(this);!n||n.isCustomElementFirst()?r.bind(o._PROPS_PROXY)(t,!0):n&&!n.isCustomElementFirst()&&o.throwError(this,"Cannot set properties on a VComponent-first element.")})},GetAttributes:function(t){var n=e.BaseCustomElementBridge.proto.GetAttributes.call(this,t),o=t.extension&&t.extension._ROOT_PROPS_MAP;return o&&Object.keys(o).forEach(function(t){n.push(e.__AttributeUtils.getGlobalAttrForProp(t))}),n},GetTrackChildrenOption:function(t){return t._vcomp?"none":"immediate"},ShouldHandleAttributeChanged:function(t){if(!e.BaseCustomElementBridge.proto.ShouldHandleAttributeChanged.call(this,t))return!1;var n=t._vcomp;return!n||n.isCustomElementFirst()&&!n.isPatching()},HandleAttributeChanged:function(t,n,o,r){var i=t._vcomp,s=this._EXTENSION._ROOT_PROPS_MAP;if(i&&s){var l=e.__AttributeUtils.getGlobalPropForAttr(n)||n;if(s[l]&&o!==r){if(null==r)delete this._LIVE_CONTROLLED_PROPS[l],i.isPatching()||delete this._VCOMP_CONTROLLED_PROPS[l];else{var u=t[l];this._LIVE_CONTROLLED_PROPS[l]=null!=u?u:r,i.isPatching()||(this._VCOMP_CONTROLLED_PROPS[l]=this._LIVE_CONTROLLED_PROPS[l])}i.isPatching()||this._queueRender(t)}}},HandleReattached:function(t){this._verifyConnectDisconnect(t,1)},HandleDetached:function(t){this._verifyConnectDisconnect(t,0)},_verifyConnectDisconnect:function(t,e){-1===this._verifyingState&&window.queueMicrotask(function(){this._verifyingState===e&&(0===this._verifyingState?t._vcomp.unmounted():t._vcomp.mounted()),this._verifyingState=-1}.bind(this)),this._verifyingState=e},InitializeElement:function(t){t._vcomp||(e.Components&&e.Components.markPendingSubtreeHidden(t),e.BaseCustomElementBridge.__InitProperties(t,t),this.InitializeEventCallbacks(t))},InitializePrototype:function(t){e.BaseCustomElementBridge.proto.InitializePrototype.call(this,t),Object.defineProperty(t,"_propsProto",{value:{}})},InitializeBridge:function(t,n){e.BaseCustomElementBridge.proto.InitializeBridge.call(this,t,n),this._verifyingState=-1,this._EXTENSION=this.METADATA.extension||{},this._CONSTRUCTOR=n._CONSTRUCTOR,this._PROPS={},this._PROP_CHANGE_QUEUE=[],this._PROP_CHANGE_EVENT_QUEUE=[],t._propsProto&&(this._PROPS_PROXY=Object.create(t._propsProto),this._PROPS_PROXY._BRIDGE=this,this._PROPS_PROXY._ELEMENT=t),this._LIVE_CONTROLLED_PROPS={},this._VCOMP_CONTROLLED_PROPS={}},InitializeEventCallbacks:function(t){const n=this.METADATA.events;n&&Object.keys(n).forEach(o=>{const r=n[o],i=e.__AttributeUtils.eventTypeToEventListenerProperty(o);this._PROPS[i]=(e=>{const n=Object.assign({},e),i=!!r.cancelable,s=[];i&&(n.accept=(t=>{s.push(t)}));const l={detail:n,bubbles:!!r.bubbles,cancelable:i},u=new CustomEvent(o,l);if(t.dispatchEvent(u),i)return u.defaultPrevented?Promise.reject():Promise.all(s).then(()=>Promise.resolve(),t=>Promise.reject(t))})})},PlaybackEarlyPropertySets:function(t){t._vcomp||e.BaseCustomElementBridge.proto.PlaybackEarlyPropertySets.call(this,t)},GetPreCreatePromise:function(t){var n=e.BaseCustomElementBridge.proto.GetPreCreatePromise.call(this,t);return!a&&function(t){for(var e=t.childNodes,n=0;n<e.length;n++){var o=e[n];if("template"===o.localName)return!0}return!1}(t)&&(n=n.then(function(){return new Promise(function(t,e){require(["ojs/ojtemplateengine"],function(e){a=e,t(e)},e)})})),n},ValidateAndSetProperty:function(t,e,n,o,r){var i=this.ValidatePropertySet(r,n,o);c.__SetProperty(t,e,n,i)},_mountCustomElement:function(t,e,n,o){this._content=c._processSlotContent(t,o);var r=Object.assign({},this._LIVE_CONTROLLED_PROPS);e.mountContent(n,this._content,t,r)},_queuePropertyUpdate:function(t,e,n,o){this._PROPS_PROXY[e]=n,o&&this._queueRender(t)},_updateProperty:function(t,e,n){this._PROP_CHANGE_QUEUE.push(e),n?this._processPropertyQueue(t):this._propsProcessingQueued||(this._propsProcessingQueued=!0,window.queueMicrotask(function(){this._processPropertyQueue(t),this._propsProcessingQueued=!1}.bind(this)))},_processPropertyQueue:function(t){for(var n=this._PROP_CHANGE_QUEUE.shift();n;){var o=n.name,r=n.value,i=n.meta;if(!this.SaveEarlyPropertySet(o,r)){var s=this._PROPS[o];e.BaseCustomElementBridge.__CompareOptionValues(o,i,r,s)||(n.isOuter&&(r=this.ValidatePropertySet(t,o,r)),void 0===r?delete this._PROPS[o]:this._PROPS[o]=r,n.previousValue=s,this._PROP_CHANGE_EVENT_QUEUE.push(n),t._vcomp&&n.isOuter&&this._queueRender(t))}n=this._PROP_CHANGE_QUEUE.shift()}this._firePropertyChangeEvents(t)},_firePropertyChangeEvents:function(t){for(var n=this._PROP_CHANGE_EVENT_QUEUE.shift();n;)e.BaseCustomElementBridge.__FirePropertyChangeEvent(t,n.name,n.value,n.previousValue,n.isOuter?"external":"internal"),n=this._PROP_CHANGE_EVENT_QUEUE.shift()},_queueRender:function(t){t._vcomp.queueRender(t,"propsUpdate")},_getVComponentProps:function(){var t=o.DefaultsUtils.getStaticDefaults(this._CONSTRUCTOR,this.METADATA,!0),e=Object.create(t);return Object.assign(e,this._PROPS,this._VCOMP_CONTROLLED_PROPS)},_getCallbacks:function(t){return{_updateProperty:this._queuePropertyUpdate.bind(this,t),getPropsForRender:()=>this._getVComponentProps(),patch:e=>{var n=Object.assign({},this._LIVE_CONTROLLED_PROPS);t._vcomp.patchContent(e,n,this._content),c._storeUnslottedNodes(t,this._slotVNodes)},convertChildrenToSlotProps:e=>{if(!this._slotProps){this._slotVNodes=e;var n=function(t,e,n){var o=e.slots||{},r=n._DYNAMIC_SLOT_PROP,i={};return t.forEach(function(t){var e=t.props?t.props.slot:"";let n=c._DEFAULT_SLOT_PROP;if(e&&(n=o[e]?e:r),n===r){if(!r)return;i[n]||(i[n]={[e]:[]}),i[n][e]||(i[n][e]=[]),i[n][e].push(t)}else n&&(i[n]||(i[n]=[]),i[n].push(t))}),i}(e,this.METADATA,this._EXTENSION);this._slotProps=function(t,e){var n={};return Object.keys(e).forEach(o=>{var r=e[o];o===c._DEFAULT_SLOT_PROP?n[o]=r:Array.isArray(r)?n[o]=d(t,r):(n[o]||(n[o]={}),Object.keys(r).forEach(e=>{n[o][e]=d(t,r[e])}))}),n}(t,n)}return this._slotProps}}},_initializeControlledProps:function(t){var n=this._EXTENSION._ROOT_PROPS_MAP;if(n){var o=this._LIVE_CONTROLLED_PROPS,r=this._VCOMP_CONTROLLED_PROPS;Object.keys(n).forEach(function(n){var i=e.__AttributeUtils.getGlobalAttrForProp(n);if(t.hasAttribute(i)){var s=t[n];o[n]=null!=s?s:t.getAttribute(i),r[n]=o[n]}})}},_getDefaultValue:function(t){return o.DefaultsUtils.getFrozenDefault(t,this._CONSTRUCTOR,this.METADATA)}}),c.register=function(t,n){var o=n.metadata,r={};r[e.BaseCustomElementBridge.DESC_KEY_META]=o,r._CONSTRUCTOR=n,e.BaseCustomElementBridge.__Register(t,r,c.proto)&&customElements.define(t.toLowerCase(),c.proto.getClass(r))},c._processSlotContent=function(t,n){var o=[];if(t.childNodes){t._nodeStorage||(t._nodeStorage=document.createElement("div"),t._nodeStorage.style.display="none",t.appendChild(t._nodeStorage));var r=[];Object.entries(n).forEach(function(t){var e=t[0];t[1].forEach(function(t){o.push(_(t,e)),r.push(t)})}),r.forEach(function(n){t._nodeStorage.appendChild(n),e.Components&&e.Components.subtreeHidden(n)})}return o},c.__SetProperty=function(t,n,o,r){var i,s=n,l=o.split("."),u=t(l[0]);l.length>1&&!n[u]&&(s=i={});for(var c=0;c<l.length;c++){var a=t(l[c]),_=s[a];c===l.length-1?s[a]=r:_?Object.isFrozen(_)&&(s[a]=e.CollectionUtils.copyInto({},_,void 0,!0)):s[a]={},s=s[a]}i&&(n[u]=i[u])},c._storeUnslottedNodes=function(t,n){n&&t._nodeStorage&&n.forEach(function(n){var o=n._node;o.isConnected||(t._nodeStorage.appendChild(o),e.Components&&e.Components.subtreeHidden(o))})},t.VComponent=class{constructor(t){this._pendingPropsUpdate=!1,this.props=t}updated(t,e){}mounted(){}unmounted(){}uniqueId(){return this._uniqueId}_updateProperty(t,e,n=!1){this.props[t]!==e&&this._getCallback("_updateProperty")(t,e,n)}updateState(t){this._pendingStateUpdaters||(this._pendingStateUpdaters=[]),this._pendingStateUpdaters.push(t),this.queueRender(this._ref,"stateUpdate")}mount(t,e,n={}){return this._vnode=this._renderForMount(t,e),this._ref=l.mount(this._vnode,!0)}patch(t,e,n,o){const r=this.props,i=this.state,s=this._vnode;this._vnode=this._renderForPatch(t,e),l.patch(this._vnode,s,this._ref.parentNode,!0),this.updated(r,i)}notifyMounted(){l.mounted(this._vnode),this.mounted()}notifyUnmounted(t){l.unmount(this._vnode),this.unmounted()}queueRender(t,e){if("propsUpdate"===e&&(this._pendingPropsUpdate=!0),!this._busyStateCallbackForRender){var o=n.getContext(t).getBusyContext();this._busyStateCallbackForRender=o.addBusyState({description:this.uniqueId()+" is waiting to render."}),window.requestAnimationFrame(()=>{const t=this._busyStateCallbackForRender,e=this._pendingPropsUpdate,n=this._pendingStateUpdaters;this._busyStateCallbackForRender=null,this._pendingPropsUpdate=!1,this._pendingStateUpdaters=null;try{const o=this._getCallback("getPropsForRender")(),r=this._doUpdateState(o,n);(e||r&&!this._areStatesEqual(this.state,r))&&(this._pendingState=r,this._getCallback("patch")(o,this._ref.parentNode))}catch(t){throw t}finally{t(),this._pendingState=null}})}}_renderForMount(t,e){if(this.state){const e=this.constructor.initStateFromProps;if(e){const n=e.call(this.constructor,t,this.state);this.state=this._getNewState(n)}}return this._render(t,e)}_renderForPatch(t,e){if(this.state){const e=this.constructor.updateStateFromProps;let n;e&&(n=e.call(this.constructor,t,this._pendingState||this.state,this.props)),this.state=this._getNewState(n,this._pendingState)}return this._render(t,e)}_render(t,e){return e&&e.length&&Object.assign(t,this._getCallback("convertChildrenToSlotProps")(e)),this.props=t,this.render()}_doUpdateState(t,e){return e&&0!==e.length?e.reduce((e,n)=>{const o="function"==typeof n?n(e,t):n;return Object.assign(e,o)},Object.assign({},this.state)):null}_areStatesEqual(t,e){return Object.keys(e).every(n=>t[n]===e[n])}_getCallback(t){return this._callbacks||(this._callbacks=this._getBuiltInCallbacks()),this._callbacks[t]}_getBuiltInCallbacks(){const t={_updateProperty:(t,n)=>{var o,r;const i=e.__AttributeUtils.propertyNameToChangeEventType(t),s=e.__AttributeUtils.eventTypeToEventListenerProperty(i);null===(r=(o=this.props)[s])||void 0===r||r.call(o,{value:n,previousValue:this.props[t],updatedFrom:"internal"})},getPropsForRender:()=>this.props,patch:(t,e)=>{this.patch(t,e)},convertChildrenToSlotProps:function(t){return{children:t}},_vcomp:!0};return t}_getNewState(t,e=null){return t||e?Object.assign({},e||this.state,t):this.state}},t._writeback=function({readOnly:t}={readOnly:!1}){return(t,e)=>{}},t.classPropToObject=s,t.customElement=function(t){return function(n){const o=n.prototype.render;function r(t,n){var o,r=(null===(o=n.extension)||void 0===o?void 0:o._ROOT_PROPS_MAP)||{};return{class:!0,style:!0,ref:!0,key:!0}[t]||r[t]||null!==e.__AttributeUtils.eventListenerPropertyToEventType(t)}n.prototype.render=function(){let e=o.call(this);return e.type!==t&&(e=l.h(t,null,e)),function(t,e){for(var n in t)if(!r(n,e))throw new Error("Component can only render controlled global properties or DOM event listeners on the root custom element. "+n+" will not be rendered.")}(e.props,n.metadata),e},n.prototype.mount=function(t,e,n){this._vnode=this._renderForMount(t,e);const o=this._ref=l.mountCustomElement(this._vnode,n);return Object.defineProperty(o,"_vcomp",{value:this,enumerable:!1}),o},n.prototype.patch=function(t,e,n,o){const r=this.props,i=this.state,s=this._vnode;this._vnode=this._renderForPatch(t,e),this._vnode._node=this._ref,this._patching=!0;try{l.patchCustomElement(this._vnode,s,n,o)}finally{this._patching=!1}this.updated(r,i)},n.prototype.mountContent=function(t,e,n,o){this._isCustomElementFirst=!0,this._ref=n,this._vnode=this._renderForMount(t,e),this._vnode._node=n,this._patching=!0;try{l.mountCustomElementContent(this._vnode,o)}finally{this._patching=!1}},n.prototype.patchContent=function(t,e,n){const o=this.props,r=this.state,i=this._vnode;this._vnode=this._renderForPatch(t,n),this._vnode._node=this._ref,this._patching=!0;try{l.patchCustomElementContent(this._vnode,i,e)}finally{this._patching=!1}this.updated(o,r)},n.prototype.setCallbacks=function(t){this._callbacks=t},n.prototype.isCustomElementFirst=function(){return!0===this._isCustomElementFirst},n.prototype.isPatching=function(){return this._patching},c.register(t,n)}},t.dynamicDefault=function(t){return(e,n)=>{const o=Symbol();return{get(){const e=this[o];return void 0===e?t():e},set(t){this[o]=t}}}},t.event=function({bubbles:t}={bubbles:!1}){return(t,e)=>{}},t.h=u,t.listener=function(t){return function(e,n,o){let r=null==o?void 0:o.value;return{configurable:!0,get(){const e=r.bind(this);return e[l.LISTENER_OPTIONS_SYMBOL]=t,Object.defineProperty(this,n,{configurable:!0,get:()=>e,set(t){r=t,delete this[n]}}),e},set(t){r=t}}}},t.method=function(){return function(t,e,n){}},t.rootProperty=function(){return(t,e)=>{}},Object.defineProperty(t,"__esModule",{value:!0})});
define('ojs/ojpopupcore',["exports","ojs/ojcore-base","jquery","ojs/ojcomponentcore","ojs/ojlogger","jqueryui-amd/position","ojs/ojcontext","ojs/ojvcomponent"],function(e,t,r,o,n,i,s,a){"use strict";r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;
/**
   * @license
   * Copyright (c) 2004 2020, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
const l=function(e){this._tapCallback=e,this.Init()};t._registerLegacyNamespaceProp("SimpleTapRecognizer",l),t.Object.createSubclass(l,t.Object,"oj.SimpleTapRecognizer"),l.prototype.Init=function(){l.superclass.Init.call(this);var e=this._eventHandler.bind(this);this._eventHandlerCallback=e;for(var t,r=document.documentElement,o=0;o<l._TOUCHEVENTS.length;o++)"touchstart"===(t=l._TOUCHEVENTS[o])||"touchmove"===t?r.addEventListener(t,e,{passive:!1,capture:!0}):r.addEventListener(t,e,!0)},l.prototype._eventHandler=function(e){var t=this._tapCallback,r=e.type;if("touchstart"===r)this._touchStartEvent=e,this._touchStartEvent._tapStart=(new Date).getTime();else if("touchmove"===r||"touchcancel"===r)this._touchStartEvent=null;else if("touchend"===r){if(this._touchStartEvent){var o=this._touchStartEvent._tapStart;if(isNaN(o))t(this._touchStartEvent);else(new Date).getTime()-o<l._PRESSHOLDTHRESSHOLD&&t(this._touchStartEvent)}this._touchStartEvent=null}},l.prototype.destroy=function(){this._tapCallback=null;var e=this._eventHandlerCallback;this._eventHandlerCallback=null;for(var t,r=document.documentElement,o=0;o<l._TOUCHEVENTS.length;o++)"touchstart"===(t=l._TOUCHEVENTS[o])||"touchmove"===t?r.removeEventListener(t,e,{passive:!1,capture:!0}):r.removeEventListener(t,e,!0)},l._TOUCHEVENTS=["touchstart","touchmove","touchcancel","touchend"],l._PRESSHOLDTHRESSHOLD=700;const p=function(){this.Init()};t._registerLegacyNamespaceProp("PopupService",p),t.Object.createSubclass(p,t.Object,"oj.PopupService");const c=function(){this.Init()},u={};p.prototype.Init=function(){p.superclass.Init.call(this)},p.getInstance=function(e){return p._popupService||(p._popupService=new c),p._popupService},p.prototype.open=function(e){t.Assert.failedInAbstractFunction()},p.prototype.close=function(e){t.Assert.failedInAbstractFunction()},p.prototype.changeOptions=function(e){t.Assert.failedInAbstractFunction()},p.prototype.triggerOnDescendents=function(e,r,o){t.Assert.failedInAbstractFunction()},p.prototype.destroy=function(){p._popupService=null},p.MODALITY={NONE:"none",MODAL:"modal",MODELESS:"modeless"},p.EVENT={POPUP_REMOVE:"ojPopupRemove",POPUP_CLOSE:"ojPopupClose",POPUP_REFRESH:"ojPopupRefresh",POPUP_AUTODISMISS:"ojPopupAutoDismiss",POPUP_BEFORE_OPEN:"ojPopupBeforeOpen",POPUP_AFTER_OPEN:"ojPopupAfterOpen",POPUP_BEFORE_CLOSE:"ojPopupBeforeClose",POPUP_AFTER_CLOSE:"ojPopupAfterClose"},p.LAYER_LEVEL={TOP_LEVEL:"topLevel",NEAREST_ANCESTOR:"nearestAncestor"},p.OPTION={POPUP:"popup",EVENTS:"events",MODALITY:"modality",LAUNCHER:"launcher",POSITION:"position",LAYER_SELECTORS:"layerSelectors",LAYER_LEVEL:"layerLevel",CONTEXT:"context",CUSTOM_ELEMENT:"customElement"},t.__registerWidget("oj.ojSurrogate",r.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{beforeDestroy:null},_ComponentCreate:function(){this._super(),this.element.uniqueId()},_invokeBeforeDestroy:function(){var e=this.options.beforeDestroy;this.options.beforeDestroy=null,e&&e()},_destroy:function(){this._invokeBeforeDestroy(),this.element.removeUniqueId(),this._super()},_NotifyDetached:function(){this._invokeBeforeDestroy(),this._super()}});t.CustomElementBridge.register("oj-surrogate",{metadata:{properties:{beforeDestroy:{type:"function"}},extension:{_WIDGET_NAME:"ojSurrogate"}}}),t._registerLegacyNamespaceProp("PopupServiceImpl",c),t.Object.createSubclass(c,p,"oj.PopupServiceImpl"),c.prototype.open=function(e){t.Assert.assertObject(e);var i=e[p.OPTION.POPUP];t.Assert.assertPrototype(i,r);var s=u.getStatus(i);if(s===u.STATUS.UNKNOWN||s===u.STATUS.BEFORE_OPEN||s===u.STATUS.CLOSE){var a=e[p.OPTION.LAUNCHER];t.Assert.assertPrototype(a,r);var l=e[p.OPTION.POSITION];t.Assert.assertObjectOrNull(l);var _=e[p.OPTION.EVENTS];t.Assert.assertObject(_);var E=e[p.OPTION.MODALITY];(!E||p.MODALITY.MODELESS!==E&&p.MODALITY.MODAL!==E)&&(E=p.MODALITY.NONE);var h=e[p.OPTION.LAYER_SELECTORS];t.Assert.assertString(h);var f=e[p.OPTION.CUSTOM_ELEMENT],d=e[p.OPTION.LAYER_LEVEL];(!d||p.LAYER_LEVEL.TOP_LEVEL!==d&&p.LAYER_LEVEL.NEAREST_ANCESTOR!==d)&&(d=p.LAYER_LEVEL.NEAREST_ANCESTOR);var T=_[p.EVENT.POPUP_BEFORE_OPEN];T&&r.isFunction(T)||(T=c._defaultBeforeOpenCallback);var v=_[p.EVENT.POPUP_AFTER_OPEN];u.setStatus(i,u.STATUS.OPENING),t.DomUtils.setLogicalParent(i,a),u.addToAncestorLayer(i,a,E,h,d,f);var O,S=function(){try{i.removeAttr("aria-hidden"),this._assertEventSink(),o.subtreeShown(i[0])}catch(e){n.error("Error opening popup:\n%o",e)}finally{u.setStatus(i,u.STATUS.OPEN),v&&v(e);var s=u.getFirstAncestorLayer(i);if(t.Assert.assertPrototype(s,r),u.applyEvents(s,_),!u._getSurrogate(s)&&r.isFunction(_[p.EVENT.POPUP_REMOVE]))(0,_[p.EVENT.POPUP_REMOVE])()}};S=S.bind(this);try{O=T(e)}catch(e){n.error("Error before open popup:\n%o",e)}finally{O&&O instanceof Promise?O.then(S):S()}}else this._assertEventSink()},c._defaultBeforeOpenCallback=function(e){var o=e[p.OPTION.POPUP];t.Assert.assertPrototype(o,r);var n=e[p.OPTION.POSITION];o.show(),n&&o.position(n)},c.prototype.close=function(e){t.Assert.assertObject(e);var i=e[p.OPTION.POPUP];t.Assert.assertPrototype(i,r);var s=u.getOpenPopupLayer(i);t.Assert.assertPrototype(s,r);var a=e[p.OPTION.EVENTS];a?a=r.extend(u.getEvents(s),a):(a=u.getEvents(s),e[p.OPTION.EVENTS]=a);var l=u.getStatus(i);if(l!==u.STATUS.OPEN&&l!==u.STATUS.BEFORE_CLOSE||!a)this._assertEventSink();else{var _=a[p.EVENT.POPUP_BEFORE_CLOSE];_&&r.isFunction(_)||(_=c._defaultBeforeCloseCallback);var E=a[p.EVENT.POPUP_AFTER_CLOSE];u.setStatus(i,u.STATUS.CLOSING),u.applyEvents(s,{});var h,f=function(){try{i.hide(),i.attr("aria-hidden","true"),i.css({top:"auto",bottom:"auto",left:"auto",right:"auto"}),u.removeFromAncestorLayer(i),t.DomUtils.setLogicalParent(i,null),this._assertEventSink(),o.subtreeHidden(i[0])}catch(e){n.error("Error closing popup:\n%o",e)}finally{u.setStatus(i,u.STATUS.CLOSE),E&&r.isFunction(E)&&E(e)}};f=f.bind(this);try{h=_(e)}catch(e){n.error("Error before close popup:\n%o",e)}finally{h&&h instanceof Promise?h.then(f):f()}}},c._defaultBeforeCloseCallback=function(e){var o=e[p.OPTION.POPUP];t.Assert.assertPrototype(o,r),o.hide()},c.prototype.changeOptions=function(e){t.Assert.assertObject(e);var o=e[p.OPTION.POPUP];if(t.Assert.assertPrototype(o,r),u.getStatus(o)===u.STATUS.OPEN){var n=u.getOpenPopupLayer(o);t.Assert.assertPrototype(n,r);var i=e[p.OPTION.EVENTS];i&&u.applyEvents(n,i);var s=e[p.OPTION.MODALITY];s&&u.applyModality(n,s);var a=e[p.OPTION.LAYER_SELECTORS];t.StringUtils.isEmptyOrUndefined(a)||n.attr("class",a)}},c.prototype.triggerOnDescendents=function(e,t,r){if(u.isPopupOpen(e)){var o={};o.event=t,o.argsArray=r;var n=u.getFirstAncestorLayer(e);u.postOrderVisit(n,this._triggerOnDescendentsVisitCallback,o)}},c.prototype._triggerOnDescendentsVisitCallback=function(e,t){var o=t.event,n=t.argsArray,i=u.getEvents(e);return i&&r.isFunction(i[o])&&i[o].apply(this,n),u.VISIT_RESULT.ACCEPT},c.prototype._assertEventSink=function(){var e,r,o,n=u.hasPopupsOpen(),i=this._callbackEventFilter;if(!n&&i){for(window.removeEventListener("resize",c._refreshCallback,!0),window.removeEventListener("scroll",c._refreshCallback,!0),(r=document.documentElement).removeEventListener("mousewheel",c._refreshCallback,{passive:!0,capture:!0}),r.removeEventListener("DOMMouseScroll",c._refreshCallback,!0),this._callbackEventFilter=null,e=0;e<c._REDISTRIBUTE_EVENTS.length;e++)o=c._REDISTRIBUTE_EVENTS[e],r.removeEventListener(o,i,!0);var s=this._simpleTapRecognizer;s&&(s.destroy(),this._simpleTapRecognizer=null)}else if(n&&!i){for(window.addEventListener("resize",c._refreshCallback,!0),window.addEventListener("scroll",c._refreshCallback,!0),(r=document.documentElement).addEventListener("mousewheel",c._refreshCallback,{passive:!0,capture:!0}),r.addEventListener("DOMMouseScroll",c._refreshCallback,!0),i=this._eventFilterCallback.bind(this),this._callbackEventFilter=i,e=0;e<c._REDISTRIBUTE_EVENTS.length;e++)o=c._REDISTRIBUTE_EVENTS[e],r.addEventListener(o,i,!0);t.DomUtils.isTouchSupported()&&(this._simpleTapRecognizer=new l(i))}},c.prototype._eventFilterCallback=function(e){var o=r(e.target);if(u.hasPopupsOpen()){if(!t.DomUtils.isChromeEvent(e)&&("focus"!==e.type||o.is(":focusable"))){var n=u.getDefaultLayer();if("keydown"!==e.type||!u.hasModalDialogOpen()||t.DomUtils.isAncestor(n[0],o[0])){var i,s=u.getFirstAncestorLayer(o);if(n[0]!==s[0]?s.hasClass(c._FOCUS_WITHIN_SELECTOR)||((i=this._lastFocusLayer)&&i.removeClass(c._FOCUS_WITHIN_SELECTOR),s.addClass(c._FOCUS_WITHIN_SELECTOR),this._lastFocusLayer=s):(i=this._lastFocusLayer)&&(i.removeClass(c._FOCUS_WITHIN_SELECTOR),this._lastFocusLayer=null),"focus"!==e.type||"-1"!==o.attr("tabindex")){for(var a={},l=c._COPY_SAFE_EVENT_PROPERTIES,p={},_=0;_<l.length;_++){var E=l[_],h=e[E];void 0===h||r.isFunction(h)||(p[E]=h)}a.event=r.Event(e,p),u.postOrderVisit(n,c._redistributeVisitCallback,a)}}else u.eatEvent(e)}}else this._assertEventSink()},c._redistributeVisitCallback=function(e,t){var o=u.getEvents(e),n=t.event;return o&&r.isFunction(o[p.EVENT.POPUP_AUTODISMISS])&&o[p.EVENT.POPUP_AUTODISMISS](n),u.VISIT_RESULT.ACCEPT},c._refreshCallback=function(e){isNaN(c._refreshTimerId)&&(c._refreshTimerId=window.setTimeout(function(){c._refreshTimerId=Number.NaN;var e=u.getDefaultLayer();r.isFunction(window.requestAnimationFrame)?c._afRequestId=window.requestAnimationFrame(function(){c._afRequestId=null,u.postOrderVisit(e,c._refreshVisitCallback)}):u.postOrderVisit(e,c._refreshVisitCallback)},c._REFRESH_DELAY))},c._refreshVisitCallback=function(e,t){if(t.level>0)return u.VISIT_RESULT.REJECT;var o=u.getEvents(e);return o&&r.isFunction(o[p.EVENT.POPUP_REFRESH])&&o[p.EVENT.POPUP_REFRESH](),u.VISIT_RESULT.ACCEPT},c.prototype.destroy=function(){c.superclass.destroy.call(this)},c._FOCUS_WITHIN_SELECTOR="oj-focus-within",c._REDISTRIBUTE_EVENTS=["focus","mousedown","keydown"],c._COPY_SAFE_EVENT_PROPERTIES=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","relatedTarget","shiftKey","target","timeStamp","view","which","button","buttons","clientX","clientY","offsetX","offsetY","pageX","pageY","screenX","screenY","toElement","char","charCode","key","keyCode"],c._REFRESH_DELAY=10,t._registerLegacyNamespaceProp("ZOrderUtils",u),u.STATUS={UNKNOWN:0,BEFORE_OPEN:.5,OPENING:1,OPEN:2,BEFORE_CLOSE:2.5,CLOSING:3,CLOSE:4},u._STATUS_DATA="oj-popup-status",u.getStatus=function(e){e instanceof Element&&(e=r(e));var t=e.data(u._STATUS_DATA);return isNaN(t)?u.STATUS.UNKNOWN:t},u.setStatus=function(e,t){e instanceof Element&&(e=r(e)),t>u.STATUS.UNKNOWN&&t<=u.STATUS.CLOSE&&e.data(u._STATUS_DATA,t)},u.getFirstAncestorLayer=function(e){if(!e)return u.getDefaultLayer();for(var t=e;t&&t.length>0&&t.attr(u._SURROGATE_ATTR)!==u._DEFAULT_LAYER_ID;){if(u._hasSurrogate(t[0]))return t;t=t.parent()}return u.getDefaultLayer()},u.getDefaultLayer=function(){var e=r(document.getElementById(u._DEFAULT_LAYER_ID));return e.length>0?e:((e=r("<div>")).attr("role","presentation"),e.attr("id",u._DEFAULT_LAYER_ID),e.prependTo(r(document.body)),e)},u.addToAncestorLayer=function(e,n,i,s,a,l){var c=e[0];if(u._hasSurrogate(c.parentNode))throw new Error("JET Popup is already open - id: "+c.getAttribute("id"));var _=u.getFirstAncestorLayer(a===p.LAYER_LEVEL.TOP_LEVEL?null:n),E=r("<div>"),h=e.attr("id");t.StringUtils.isEmptyOrUndefined(h)?E.uniqueId():E.attr("id",[h,"layer"].join("_")),E.attr("role","presentation"),E.addClass(s),e.after(E),u._createSurrogate(E,l),o.subtreeDetached(c),e.appendTo(E),e.data(u._LAYER_ID_DATA,E.attr("id")),E.appendTo(_),o.subtreeAttached(c),u.applyModality(E,i)},u._getSurrogate=function(e){var t=e.attr(u._SURROGATE_ATTR);if(t)return document.getElementById(t)},u.applyEvents=function(e,t,n){n||(n=r(u._getSurrogate(e))),e.data(u._EVENTS_DATA,t),n.length>0&&t&&r.isFunction(t[p.EVENT.POPUP_REMOVE])&&o.setComponentOption(n[0],"beforeDestroy",t[p.EVENT.POPUP_REMOVE])},u.getEvents=function(e){return e.data(u._EVENTS_DATA)},u._createSurrogate=function(e,o){var n="script";o&&(n="oj-surrogate");var i=r(document.createElement(n)),s=e.attr("id");t.StringUtils.isEmptyOrUndefined(s)||i.attr("id",[s,"surrogate"].join("_")),o&&i.attr("data-oj-binding-provider","none"),i.insertBefore(e),o||i.ojSurrogate();var a=i.attr("id");return e.attr(u._SURROGATE_ATTR,a),i},u._removeSurrogate=function(e){var t=e.attr(u._SURROGATE_ATTR);e.removeAttr(u._SURROGATE_ATTR);var n=r(document.getElementById(t)),i=n.length>0;return i&&(e.insertAfter(n),o.setComponentOption(n[0],"beforeDestroy",null),n.remove()),i},u.getOpenPopupLayer=function(e){var t=e.parent();if(!t||0===t.length){var o=e.data(u._LAYER_ID_DATA);t=r(document.getElementById(o))}return t},u.removeFromAncestorLayer=function(e){var r=u.getOpenPopupLayer(e);u.preOrderVisit(r,u._closeDescendantPopupsCallback),u._removeOverlayFromAncestorLayer(r),r.removeData(u._EVENTS_DATA),r.removeData(u._MODALITY_DATA),e.removeData(u._LAYER_ID_DATA);var n=e[0];o.subtreeDetached(n),u._removeSurrogate(r)&&n&&n.parentElement?(t.DomUtils.unwrap(e,r),o.subtreeAttached(n)):r.remove()},u._closeDescendantPopupsCallback=function(e,t){if(t.level>0)return u.VISIT_RESULT.REJECT;var o=e.data(u._EVENTS_DATA);return o&&r.isFunction(o[p.EVENT.POPUP_CLOSE])&&o[p.EVENT.POPUP_CLOSE](),u.VISIT_RESULT.ACCEPT},u.applyModality=function(e,r){var o=e.data(u._MODALITY_DATA);e.data(u._MODALITY_DATA,r),t.StringUtils.isEmptyOrUndefined(o)?p.MODALITY.MODAL===r?u._addOverlayToAncestorLayer(e):u._removeOverlayFromAncestorLayer(e):o!==r&&(r!==o&&r===p.MODALITY.MODAL?u._addOverlayToAncestorLayer(e):u._removeOverlayFromAncestorLayer(e)),r===p.MODALITY.MODAL?e.attr("aria-modal","true"):e.removeAttr("aria-modal")},u.hasModalDialogOpen=function(){for(var e=u.getDefaultLayer().children(),t=e.length-1;t>-1;t--){if(r(e[t]).hasClass(u._OVERLAY_SELECTOR))return!0}return!1},u._addOverlayToAncestorLayer=function(e){var o=r("<div>");o.addClass(u._OVERLAY_SELECTOR),o.addClass(e[0].className),o.attr("role","presentation");var n=e.attr("id");t.StringUtils.isEmptyOrUndefined(n)?o.uniqueId():o.attr("id",[n,"overlay"].join("_")),e.before(o);var i=o.attr("id");e.attr(u._OVERLAY_ATTR,i)},u._removeOverlayFromAncestorLayer=function(e){var o=e.attr(u._OVERLAY_ATTR);t.StringUtils.isEmptyOrUndefined(o)||(e.removeAttr(u._OVERLAY_ATTR),r(document.getElementById(o)).remove())},u.VISIT_RESULT={ACCEPT:0,REJECT:1,COMPLETE:2},u._VISIT_TRAVERSAL={PRE_ORDER:0,POST_ORDER:1},u.postOrderVisit=function(e,t,r){var o=r;r||(o={}),o.level=0,o.type=u._VISIT_TRAVERSAL.POST_ORDER,u._visitTree(e,t,o)},u.preOrderVisit=function(e,t,r){var o=r;r||(o={}),o.level=0,o.type=u._VISIT_TRAVERSAL.PRE_ORDER,u._visitTree(e,t,o)},u._visitTree=function(e,t,o){for(var n=o.level,i=e.children(),s=i.length-1;s>-1;s--){var a=r(i[s]);if(u._hasSurrogate(a[0])){var l;if(o.type===u._VISIT_TRAVERSAL.PRE_ORDER){if((l=t(a,o))===u.VISIT_RESULT.COMPLETE)return l;if(l===u.VISIT_RESULT.REJECT)break}if(o.level=n+1,l=u._visitTree(a,t,o),o.level=n,l===u.VISIT_RESULT.COMPLETE)return l;if(o.type===u._VISIT_TRAVERSAL.POST_ORDER){if((l=t(a,o))===u.VISIT_RESULT.COMPLETE)return l;if(l===u.VISIT_RESULT.REJECT)break}}}return u.VISIT_RESULT.ACCEPT},u._hasSurrogate=function(e){return!(!e||1!==e.nodeType||!e.hasAttribute(u._SURROGATE_ATTR))},u.hasPopupsOpen=function(){return u.getDefaultLayer().children().length>0},u.getOpenPopupCount=function(){var e={popupCount:0},t=u.getDefaultLayer();return u.preOrderVisit(t,u._openPopupCountCallback,e),e.popupCount},u._openPopupCountCallback=function(e,t){return t.popupCount+=1,u.VISIT_RESULT.ACCEPT},u.findOpenPopups=function(){var e={},t=[];e.popups=t;var o=u.getDefaultLayer();return u.preOrderVisit(o,u._openPopupsCallback,e),t=e.popups,r(t)},u._openPopupsCallback=function(e,t){return t.popups.push(e[0]),u.VISIT_RESULT.ACCEPT},u.isAboveTopModalLayer=function(e){if(!e||!u.hasPopupsOpen())return!0;var o=function(){var e={topLayer:null},t=u.getDefaultLayer();if(u.preOrderVisit(t,function(e,t){if(t.level>0)return u.VISIT_RESULT.REJECT;var o=t.topLayer;return o?u.compareStackingContexts(r(e),r(o))>0&&(t.topLayer=e):t.topLayer=e,u.VISIT_RESULT.ACCEPT},e),e.topLayer)return e.topLayer[0]}();if(!o)return!0;var n=function(e){var t={topModalPopup:null};if(e.hasAttribute(u._OVERLAY_ATTR)&&(t.topModalPopup=r(e)),u.postOrderVisit(r(e),function(e,t){return e[0].hasAttribute(u._OVERLAY_ATTR)?(t.topModalPopup=e,u.VISIT_RESULT.COMPLETE):u.VISIT_RESULT.ACCEPT},t),t.topModalPopup)return t.topModalPopup[0]}(o);return!n||(t.DomUtils.isAncestorOrSelf(n,e)||u.compareStackingContexts(r(n),r(e))<0)},u.compareStackingContexts=function(e,o){function n(e,o){var n,i=["absolute","relative","fixed"],s=e.parents(),a=[];for(n=s.length-1;n>-1;n--)a.push(r(s[n]));(s=a).push(e);var l=[],p=0;for(n=0;n<s.length;n++){var c=s[n],u=c.css("position"),_=t.DomUtils.getCSSLengthAsFloat(c.css("opacity")),E=t.DomUtils.getCSSLengthAsInt(c.css("z-index")),h=r.inArray(c[0],c.parent().children());r.inArray(u,i)>-1&&E>0?(l.push({weight:[p,E,h],order:[h]}),p+=1):_<1?(l.push({weight:[p,1,h],order:[h]}),p+=1):o&&l.push({weight:[0,0,h],order:[h]})}return l}function i(e,t){for(var r=Math.max(e.length,t.length),o=0;o<r;o++){var n=o<e.length?e[o]:0,i=o<t.length?t[o]:0;if(n!==i)return n<i?-1:1}return 0}t.Assert.assertPrototype(e,r),t.Assert.assertPrototype(o,r);var s,a,l=n(e,!1),p=n(o,!1),c=Math.max(l.length,p.length);for(s=0;s<c;s++)if(0!==(a=i(s<l.length?l[s].weight:[-1],s<p.length?p[s].weight:[-1])))return a;for(l=n(e,!0),p=n(o,!0),c=Math.max(l.length,p.length),s=0;s<c;s++)if(0!==(a=i(s<l.length?l[s].order:[-1],s<p.length?p[s].order:[-1])))return a;return 0},u.eatEvent=function(e){e.stopPropagation(),e.preventDefault()},u.isPopupOpen=function(e){var t=e.parent();return!(!t||1!==t.length||!u._hasSurrogate(t[0]))},u._EVENTS_DATA="oj-popup-events",u._MODALITY_DATA="oj-popup-modality",u._DEFAULT_LAYER_ID="__oj_zorder_container",u._SURROGATE_ATTR="data-oj-surrogate-id",u._LAYER_ID_DATA="oj-popup-layer-id",u._OVERLAY_ATTR="data-oj-overlayid",u._OVERLAY_SELECTOR="oj-component-overlay";const _={};t._registerLegacyNamespaceProp("PositionUtils",_),_.normalizeHorizontalAlignment=function(e,o){for(var n=r.extend({},e),i=0;i<_._ALIGN_RULE_PROPERTIES.length;i++){var s=_._ALIGN_RULE_PROPERTIES[i],a=n[s];if(a)if(t.StringUtils.isString(a))n[s]=a.replace("start",o?"right":"left").replace("end",o?"left":"right").replace("<",o?"+":"-").replace(">",o?"-":"+");else for(var l=0;l<_._SUB_ALIGN_RULE_PROPERTIES.length;l++){var p=_._SUB_ALIGN_RULE_PROPERTIES[l],c=a[p];t.StringUtils.isString(c)&&(a[p]=c.replace("start",o?"right":"left").replace("end",o?"left":"right").replace("<",o?"+":"-").replace(">",o?"-":"+"))}}return n},_.normalizePositionOf=function(e,t,r){return"event"===e?r:null==e||"launcher"===e?t:e},_._normalizeEventForPosition=function(e){r.each(["pageX","pageY"],function(t,r){if(e&&void 0===e[r]&&e.originalEvent){var o,n=e.originalEvent,i=n.type;if(o="touchstart"===i||"touchmove"===i?"touches":"touchend"===i?"changedTouches":null){var s=n[o][0];s&&(e[r]=s[r])}}})},_._ALIGN_RULE_PROPERTIES=["my","at"],_._SUB_ALIGN_RULE_PROPERTIES=["vertical","horizontal"],_.isAligningPositionClipped=function(e){if(e.target&&e.target.height>0&&e.target.width>0){var t=e.target.element;return!_.isWithinViewport(t)}return!1},_.isWithinViewport=function(e){function o(e,r){var o;if(["hidden","scroll","auto"].indexOf(r.overflowY)>-1){if(e.bottom-r.top<-1)return!1;if(o="auto"===r.overflowX&&r.scrollWidth>r.innerWidth||"scroll"===r.overflowX?t.DomUtils.getScrollBarWidth():0,r.bottom-o-e.top<1)return!1}return!(["hidden","scroll","auto"].indexOf(r.overflowX)>-1&&(o="auto"===r.overflowY&&r.scrollHeight>r.innerHeight||"scroll"===r.overflowY?t.DomUtils.getScrollBarWidth():0,e.right-(r.left+("rtl"===t.DomUtils.getReadingDirection()?o:0))<-1||e.left-(r.right-("ltr"===t.DomUtils.getReadingDirection()?o:0))>-1))}function n(e){var t=e[0];if(1===t.nodeType){var o=r.extend({},t.getBoundingClientRect());return o.overflowX=e.css("overflow-x"),o.overflowY=e.css("overflow-y"),o.innerHeight=e.innerHeight(),o.innerWidth=e.innerWidth(),o.scrollHeight=t.scrollHeight,o.scrollWidth=t.scrollWidth,o}return{height:0,width:0}}function i(e){return["fixed","absolute","relative"].indexOf(e.css("position"))>-1&&(Math.abs(t.DomUtils.getCSSLengthAsInt(e.css("top")))>0||Math.abs(t.DomUtils.getCSSLengthAsInt(e.css("bottom")))>0||Math.abs(t.DomUtils.getCSSLengthAsInt(e.css("left")))>0||Math.abs(t.DomUtils.getCSSLengthAsInt(e.css("right")))>0)}if(!e)return!1;if(r.isWindow(e[0])||i(e))return!0;for(var s,a=n(e),l=!0,p=e.parent();l&&p&&p.length>0&&"BODY"!==p[0].nodeName&&1===p[0].nodeType&&!i(p);){if("visible"!==(s=p).css("overflow-x")||"visible"!==s.css("overflow-y")){var c=n(p);c.height>0&&c.width>0&&(l=o(a,c))}p=p.parent()}return l},_._ANIMATION_TRANSFORM_ORIGIN_RULES={"right-top":"right top","right-middle":"right center","right-bottom":"right bottom","left-top":"left top","left-middle":"left center","left-bottom":"left bottom","center-top":"center top","center-middle":"center center","center-bottom":"center bottom"},_._ALIGN_MNEMONIC_DATA="oj-popup-align-mnemonic",_.captureTransformOriginAnimationEffectsOption=function(e,t){var r=[t.horizontal,t.vertical].join("-");e.data(_._ALIGN_MNEMONIC_DATA,r)},_.addTransformOriginAnimationEffectsOption=function(e,r){var o,n;t.StringUtils.isString(r)?(n=!0,o=r):(n=!1,o=JSON.stringify(r));var i=/#myPosition/g;if(o.match(i)){var s=e.data(_._ALIGN_MNEMONIC_DATA);t.StringUtils.isEmptyOrUndefined(s)&&(s="center-middle");var a=_._ANIMATION_TRANSFORM_ORIGIN_RULES[s];o=o.replace(i,a),r=n?o:JSON.parse(o)}return r},_._JQUI_MNEMONIC_GRP_REGX=/^(\w+)(\+|-)?(\d+)?/,_._VERTICAL_ENUM_TST_REGX=/^top$|^center$|^bottom$/,_._HORIZONTAL_ENUM_TST_REGX=/^start$|^left$|^center$|^end$|^right$/,_._COLLISION_ENUM_TST_REGX=/^none$|^flip$|^flipfit$|^fit$|^flipcenter$/,_._parsePositionNmnemonic=function(e,t){var r=[null,Number.NaN],o=_._JQUI_MNEMONIC_GRP_REGX.exec(e);if(o[1]&&t.test(o[1])&&(r[0]=o[1],o[2])){var n=parseInt(o[3],10);isNaN(n)||(n*="-"===o[2]?-1:1,r[1]=n)}return r},_._parseJSON=function(e){if(t.StringUtils.isString(e)&&/^{/.test(e)&&/}$/.test(e))try{return JSON.parse(e)}catch(e){}return null},_._coerceMyAtToJet=function(e,o,n,i){var s=_._parseJSON(o);s&&(o=s),(s=_._parseJSON(n))&&(n=s),i||(i={});var a,l=r.extend({},i),p={x:0,y:0};if(n&&"x"in n&&"y"in n&&(p.x=t.DomUtils.getCSSLengthAsInt(n.x),p.y=t.DomUtils.getCSSLengthAsInt(n.y)),t.StringUtils.isString(o)){var c=o.split(/\s/);c.length>0&&!t.StringUtils.isEmpty(c[0])&&(a=_._parsePositionNmnemonic(c[0],_._HORIZONTAL_ENUM_TST_REGX))[0]&&(l.horizontal=a[0],isNaN(a[1])||(p.x=a[1])),c.length>1&&!t.StringUtils.isEmpty(c[1])&&(a=_._parsePositionNmnemonic(c[1],_._VERTICAL_ENUM_TST_REGX))[0]&&(l.vertical=a[0],isNaN(a[1])||(p.y=a[1]))}else o&&("horizontal"in o&&(a=_._parsePositionNmnemonic(o.horizontal,_._HORIZONTAL_ENUM_TST_REGX))[0]&&(l.horizontal=a[0],isNaN(a[1])||(p.x=a[1])),"vertical"in o&&(a=_._parsePositionNmnemonic(o.vertical,_._VERTICAL_ENUM_TST_REGX))[0]&&(l.vertical=a[0],isNaN(a[1])||(p.y=a[1])));var u={};return u[e]=l,u.offset=p,u},_._coerceCollisionToJet=function(e,t){var r=t;return _._COLLISION_ENUM_TST_REGX.test(e)&&(r=e),{collision:r}},_._coerceOfToJet=function(e,o){var n=_._parseJSON(e);n&&(e=n);var i=o;if(t.StringUtils.isString(e))i=e;else if(r.isWindow(e))i="window";else if(e instanceof Element||e instanceof r){(e=r(e)).uniqueId(),i="#"+function(e){for(var t=[],r=/\w|_|-/,o=0;o<e.length;o++){var n=e.substring(o,o+1);r.test(n)?t.push(n):t.push("\\"+n)}return t.join("")}(e.attr("id"))}else e instanceof Event||e instanceof r.Event?("pageX"in e||"pageY"in e)&&((i={}).x=t.DomUtils.getCSSLengthAsFloat(e.pageX),i.y=t.DomUtils.getCSSLengthAsFloat(e.pageY)):e&&("x"in e||"y"in e)&&((i={}).x=t.DomUtils.getCSSLengthAsFloat(e.x),i.y=t.DomUtils.getCSSLengthAsFloat(e.y));return{of:i}},_.coerceToJet=function(e,t){e||(e={});var o=_._parseJSON(e);o&&(e=o),t||(t={});var n=t.my,i=t.at,s=t.collision,a=t.of,l=_._coerceMyAtToJet("my",e.my,e.offset,n),p=_._coerceMyAtToJet("at",e.at,null,i),c={offset:{x:l.offset.x+p.offset.x,y:l.offset.y+p.offset.y}};return delete l.offset,delete p.offset,r.extend({},l,p,c,_._coerceCollisionToJet(e.collision,s),_._coerceOfToJet(e.of,a),function(e,t){return{using:r.isFunction(e)?e:t}}(e.using,void 0))},_.coerceToJqUi=function(e){function o(t,r){var o=[];if(e[t][r]?o.push(e[t][r]):o.push("center"),"my"===t&&e.offset){var n="horizontal"===r?"x":"y",i=e.offset[n];isNaN(i)||0===i||(o.push(i>0?"+":""),o.push(Math.floor(i).toString()))}return o.join("")}var n={};["my","at"].forEach(function(t){if(e[t]){var r=[];r.push(o(t,"horizontal")),r.push(" "),r.push(o(t,"vertical")),n[t]=r.join("")}});var i=e.of;if(t.StringUtils.isString(i))n.of="window"===i?window:i;else if(i&&!t.StringUtils.isString(i)&&"x"in i&&"y"in i){var s=i.x,a=i.y,l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,1,s,a,s,a,!1,!1,!1,!1,0,null),n.of=r.Event(l,{pageX:s,pageY:a})}else n.of=i;return e.collision&&(n.collision=e.collision),e.using&&(n.using=e.using),n},r.ui.position.flipcenter={left:function(e,o){var n=e.left;r.ui.position.flip.left.call(this,e,o);var i=o.within,s=i.isWindow?i.scrollLeft:i.offset.left,a=i.width,l=e.left-o.collisionPosition.marginLeft,p=s-l,c=l+o.collisionWidth-a-s;(p>0||c>0)&&("right"===o.at[0]?n-=o.targetWidth/2:"left"===o.at[0]&&(n+=o.targetWidth/2),n-=("rtl"===t.DomUtils.getReadingDirection()?-1:1)*(o.elemWidth/2),e.left=Math.max(0,n))},top:function(e,t){var o=e.top;r.ui.position.flip.top.call(this,e,t);var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,a=e.top-t.collisionPosition.marginTop,l=i-a,p=a+t.collisionHeight-s-i;(l>0||p>0)&&("top"===t.at[1]?o+=t.targetHeight/2:"bottom"===t.at[1]&&(o-=t.targetHeight/2),o+=t.elemHeight/2,e.top=Math.max(0,o))}};var E=r.ui.position.flip.left;r.ui.position.flip={left:E.bind(null),top:function(e,t){var r,o,n=t.within,i=n.offset.top+n.scrollTop,s=n.height,a=n.isWindow?n.scrollTop:n.offset.top,l=e.top-t.collisionPosition.marginTop,p=l-a,c=l+t.collisionHeight-s-a;r="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,o="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0;var u,_,E=-2*t.offset[1];p<0?((u=e.top+r+o+E+t.collisionHeight-s-i)<0||u<Math.abs(p))&&c<0&&p>c&&(e.top+=r+o+E):c>0&&((_=e.top-t.collisionPosition.marginTop+r+o+E-a)>0||Math.abs(_)<c)&&(e.top+=r+o+E)}};
/**
   * @license
   * Copyright (c) 2004 2020, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
const h=function(){this.Init()};t._registerLegacyNamespaceProp("PopupLiveRegion",h),t.Object.createSubclass(h,t.Object,"oj.PopupLiveRegion"),h.prototype.Init=function(){h.superclass.Init.call(this),isNaN(h._refCounter)?h._refCounter=1:h._refCounter+=1},h.prototype.destroy=function(){if(!isNaN(h._refCounter)&&(h._refCounter-=1)<1){var e=r(document.getElementById(h._POPUP_LIVE_REGION_ID));e.length>0&&e.remove()}},h.prototype.announce=function(e){if(!t.StringUtils.isEmpty(e)){var o=h._getLiveRegion();o.children().remove(),r("<div>").text(e).appendTo(o)}},h._getLiveRegion=function(){var e=r(document.getElementById(h._POPUP_LIVE_REGION_ID));return 0===e.length&&((e=r("<div>")).attr({id:h._POPUP_LIVE_REGION_ID,role:"log","aria-live":"polite","aria-relevant":"additions"}),e.addClass("oj-helper-hidden-accessible"),e.appendTo(document.body)),e},h._POPUP_LIVE_REGION_ID="__oj_popup_arialiveregion";
/**
   * @license
   * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
const f=function(e,o,n,i,s){t.Assert.assertPrototype(e,r),t.Assert.assertString(o),t.Assert.assertFunction(n),t.Assert.assertStringOrNull(i),this._options={insertBefore:!1,preventKeyEvents:!0},s&&(this._options=Object.assign({},this._options,s)),this._sibling=e,this._message=o,this._callback=n,this._id=i,this.Init()};t._registerLegacyNamespaceProp("PopupSkipLink",f),t.Object.createSubclass(f,t.Object,"oj.PopupSkipLink"),f.prototype.Init=function(){f.superclass.Init.call(this);var e=this._sibling,t=this._callback,o=this._message,n=this._options.insertBefore,i=this._options.preventKeyEvents;this._message=null;var s=this._id;this._id=null;var a=r(document.getElementById(s));a.length<1&&(a=r("<a>").attr({tabindex:"-1",href:"#",role:"link"})),a.attr("id",s),a.addClass("oj-helper-hidden-accessible"),a.text(o),n?a.insertBefore(e):a.insertAfter(e),a.on("click",f._activateHandler.bind(this,t)),i&&a.on("keydown keyup keypress",f._keyHandler),e.data(f._SKIPLINK_ATTR,a)},f._activateHandler=function(e,t){u.eatEvent(t),window.setImmediate(e)},f._keyHandler=function(e){e.keyCode===r.ui.keyCode.ENTER&&u.eatEvent(e)},f.prototype.destroy=function(){var e=this._sibling;if(delete this._sibling,delete this._callback,e){var t=e.data(f._SKIPLINK_ATTR);e.removeData(f._SKIPLINK_ATTR),t&&(t.off("click keydown keyup keypress"),t.remove())}},f.prototype.getLink=function(){var e,t=this._sibling;return t&&(e=t.data(f._SKIPLINK_ATTR)),e},f._SKIPLINK_ATTR="oj-skiplink";
/**
   * @license
   * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
const d=function(e,t,r,o){this._element=e,this._operation=t,this._widgetName=r,this._isCustomElement=!!o,this.Init()};t._registerLegacyNamespaceProp("PopupWhenReadyMediator",d),t.Object.createSubclass(d,t.Object,"oj.PopupWhenReadyMediator"),d.prototype.Init=function(){d.superclass.Init.call(this),this._resolvedQueue=[],this._callback=this._eventHandler.bind(this);var e=this._operation,t=["oj"];this._isCustomElement?(t.push(e.charAt(0).toUpperCase()),t.push(e.slice(1))):t.push(e);var r=t.join("");this._eventType=r,this._element.on(r,this._callback);var o=s.getContext(this._element[0]).getBusyContext(),n={description:this._getBusyStateDescription.bind(this,this._element,this._operation,this._widgetName)},i=o.addBusyState(n);this.AddPromiseExecutor(i),this._whenReadyPromise=new Promise(this.AddPromiseExecutor.bind(this))},d.prototype._getBusyStateDescription=function(e,t,r){return r+" identified by '"+e.attr("id")+"' is busy animating on the '"+t+"' operation."},d.prototype._deliverResolved=function(e){var t=this._resolvedQueue;this._resolvedQueue=null;var r=e||this._operation;this._operation=null;for(var o=0;o<t.length;o++)try{t[o](r)}catch(e){n.error("Error resolving whenReady promises:\n%o",e)}this._whenReadyPromise=Promise.resolve("none")},d.prototype.destroy=function(){if(this._resolvedQueue&&this._deliverResolved("none"),this._callback){var e=this._eventType;this._element.off(e,this._callback)}this._callback=null,this._element=null,this._operation=null,this._whenReadyPromise=null,this._widgetName=null,this._eventType=null},d.prototype.getWhenReadyPromise=function(){return this._whenReadyPromise},d.prototype._eventHandler=function(e){e.target===this._element[0]&&(this._element.off(e.type,this._callback),this._deliverResolved(),this._callback=null)},d.prototype._getPendingOperation=function(){return this._operation?this._operation:"none"},d.prototype.AddPromiseExecutor=function(e,t){this._resolvedQueue&&this._resolvedQueue.push(e)},d.prototype.isOperationPending=function(e,t,r,o){var i=!1,s=this._widgetName,a=this._getPendingOperation();if(t===a)n.info("An %s instance invoked a '%s' operation while pending animation of the same type of operation.  The second request will be ignored.",s,t),i=!0;else if("none"!==a){n.info("An %s instance invoked a '%s' operation while pending animation of a '%s' operation. The second request will be invoked after the pending operation completes.",s,t,a),new Promise(this.AddPromiseExecutor.bind(this)).then(function(){this[r].apply(this,o)}.bind(e)),i=!0}return i};class T extends a.VComponent{constructor(e){super(e),this._setRootRef=this._setRootRef.bind(this)}render(){return a.h("div",{style:{display:"none"},ref:this._setRootRef},this.props.children)}mounted(){this._popup=r(this._rootRef.firstChild);const e={[p.OPTION.POPUP]:this._popup,[p.OPTION.EVENTS]:{[p.EVENT.POPUP_AUTODISMISS]:this.props.autoDismiss,[p.EVENT.POPUP_REFRESH]:function(){this._popup.position(this._getPosition())}.bind(this)},[p.OPTION.LAYER_SELECTORS]:this.props.layerSelectors,[p.OPTION.CUSTOM_ELEMENT]:!0,[p.OPTION.LAUNCHER]:r(this._rootRef),[p.OPTION.POSITION]:this._getPosition()};p.getInstance().open(e)}unmounted(){p.getInstance().close({[p.OPTION.POPUP]:this._popup})}updated(){this._popup.position(this._getPosition())}_setRootRef(e){this._rootRef=e}_getPosition(){return _.normalizeHorizontalAlignment(this.props.position,"rtl"===t.DomUtils.getReadingDirection())}}T.metadata={extension:{_DEFAULTS:class{constructor(){this.autoDismiss=null,this.layerSelectors="",this.position={}}}}},e.VPopup=T,Object.defineProperty(e,"__esModule",{value:!0})});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojpopup',["ojs/ojcore","jquery","ojs/ojcontext","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojanimation","ojs/ojpopupcore"],function(e,t,i,s,o,n){"use strict";var r,a,l={properties:{autoDismiss:{type:"string",enumValues:["focusLoss","none"],value:"focusLoss"},chrome:{type:"string",enumValues:["default","none"],value:"default"},initialFocus:{type:"string",enumValues:["auto","firstFocusable","none","popup"],value:"auto"},modality:{type:"string",enumValues:["modal","modeless"],value:"modeless"},position:{type:"object",properties:{at:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"],value:"start"},vertical:{type:"string",enumValues:["bottom","center","top"],value:"bottom"}}},collision:{type:"string",enumValues:["fit","flip","flipcenter","flipfit","none"],value:"flip"},my:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"],value:"start"},vertical:{type:"string",enumValues:["bottom","center","top"],value:"top"}}},of:{type:"string|object"},offset:{type:"object",properties:{x:{type:"number",value:0},y:{type:"number",value:0}}}}},tail:{type:"string",enumValues:["none","simple"],value:"none"},translations:{type:"object",value:{},properties:{ariaCloseSkipLink:{type:"string"},ariaFocusSkipLink:{type:"string"},ariaLiveRegionInitialFocusFirstFocusable:{type:"string"},ariaLiveRegionInitialFocusFirstFocusableTouch:{type:"string"},ariaLiveRegionInitialFocusNone:{type:"string"},ariaLiveRegionInitialFocusNoneTouch:{type:"string"}}}},methods:{open:{},close:{},isOpen:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojBeforeOpen:{},ojOpen:{},ojBeforeClose:{},ojClose:{},ojFocus:{},ojAnimateStart:{},ojAnimateEnd:{}},extension:{}};
/*!
 * jQuery UI Popup @VERSION
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 *
 * Depends:
 *  jquery.ui.core.js
 *  jquery.ui.widget.js
 *  jquery.ui.position.js
 */
/*!
 * jQuery UI Popup @VERSION
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 *
 * Depends:
 *  jquery.ui.core.js
 *  jquery.ui.widget.js
 *  jquery.ui.position.js
 */
r=["oj-left","oj-center","oj-right","oj-top","oj-middle","oj-bottom"],a={"right-top":"oj-right oj-top","right-middle":"oj-right oj-middle","right-bottom":"oj-right oj-bottom","left-top":"oj-left oj-top","left-middle":"oj-left oj-middle","left-bottom":"oj-left oj-bottom","center-top":"oj-center oj-top","center-middle":"oj-left oj-middle","center-bottom":"oj-center oj-bottom"},e.__registerWidget("oj.ojPopup",t.oj.baseComponent,{widgetEventPrefix:"oj",options:{animation:null,autoDismiss:"focusLoss",chrome:"default",initialFocus:"auto",position:{my:{horizontal:"start",vertical:"top"},offset:{x:0,y:0},at:{horizontal:"start",vertical:"bottom"},of:void 0,collision:"flip"},tail:"none",modality:"modeless",role:"tooltip",beforeOpen:null,open:null,beforeClose:null,close:null,focus:null,animateStart:null,animateEnd:null},_ComponentCreate:function(){this._super();var i=this._getRootStyle(),s=this.element;s.hide().addClass(i).attr("aria-hidden","true"),s.addClass("oj-component");var o=t("<div>");o.addClass([i,"content"].join("-")),o.attr("role","presentation"),o.append(s[0].childNodes),o.appendTo(s),this._content=o,this._setChrome(),this._setupFocus(s);var n=this.options;n.position=e.PositionUtils.coerceToJet(n.position)},_AfterCreate:function(){this._super(),this.element.uniqueId(),this._createTail()},_destroy:function(){e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly(),this._setWhenReady("none"),this._destroyTail(),delete this._popupServiceEvents;var t=this.element;t.hide().attr("aria-hidden","true").removeUniqueId();var i=this._content;delete this._content,t.append(i[0].childNodes),i.remove();var s=this._closeDelayTimer;s&&(delete this._closeDelayTimer,s()),this._super()},open:function(t,i){if(!this._isOperationPending("open",[t,i])){e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly();var s=this.element,o=e.ZOrderUtils.getStatus(s);if(o===e.ZOrderUtils.STATUS.CLOSE||o===e.ZOrderUtils.STATUS.UNKNOWN)if(e.ZOrderUtils.setStatus(s,e.ZOrderUtils.STATUS.BEFORE_OPEN),!1!==this._trigger("beforeOpen")){this._setWhenReady("open"),this._setLauncher(t);var n=this._launcher,r=this.options;(i=i||r.position).of||(this._hasPositionOfLauncherOverride=!0,i.of=n),this._setPosition(i),this._setAutoDismiss(r.autoDismiss),this._addDescribedBy(),this._IsCustomElement()&&s[0].hasAttribute("role")||s.attr("role",r.role);var a=this._getPositionAsJqUi(),l=this._getRootStyle(),u=[l,"layer"].join("-"),c=r.tail;"none"!==c&&(u+=" "+[l,"tail",c].join("-"));var p={};p[e.PopupService.OPTION.POPUP]=s,p[e.PopupService.OPTION.LAUNCHER]=n,p[e.PopupService.OPTION.POSITION]=a,p[e.PopupService.OPTION.EVENTS]=this._getPopupServiceEvents(),p[e.PopupService.OPTION.LAYER_SELECTORS]=u,p[e.PopupService.OPTION.MODALITY]=r.modality,p[e.PopupService.OPTION.CUSTOM_ELEMENT]=this._IsCustomElement(),e.PopupService.getInstance().open(p)}else e.ZOrderUtils.setStatus(this.element,o)}},_beforeOpenHandler:function(t){var i=t[e.PopupService.OPTION.POPUP],s=t[e.PopupService.OPTION.POSITION];i.show(),i.position(s);var o=this.options.animation;if(o&&o.open){var r=o.actionPrefix,a=r?[r,"open"].join("-"):"open";return n.startAnimation(i[0],a,e.PositionUtils.addTransformOriginAnimationEffectsOption(i,o.open),this)}},_afterOpenHandler:function(t){var i=t[e.PopupService.OPTION.POPUP],s=t[e.PopupService.OPTION.LAUNCHER];this._initVoiceOverAssist(),this._trigger("open"),this._intialFocus(),this._on(i,{keydown:this._keyHandler}),s&&s.length>0&&this._on(s,{keydown:this._keyHandler})},_GetContextMenu:function(){if(!this._IsCustomElement())return this._super();var t=e.BaseCustomElementBridge.getSlotMap(this._content[0]).contextMenu;return t&&t.length>0?t[0]:void 0},close:function(){if(!this._isOperationPending("close",[])){var t=this.element,i=e.ZOrderUtils.getStatus(t);if(i===e.ZOrderUtils.STATUS.OPEN)if(e.ZOrderUtils.setStatus(t,e.ZOrderUtils.STATUS.BEFORE_CLOSE),!1!==this._trigger("beforeClose")||this._ignoreBeforeCloseResultant){this._setWhenReady("close");var s=this._launcher;this._off(t,"keydown"),s&&s.length>0&&this._off(s,"keydown"),this._restoreFocus(),this._destroyVoiceOverAssist();var o={};o[e.PopupService.OPTION.POPUP]=t,e.PopupService.getInstance().close(o)}else e.ZOrderUtils.setStatus(t,i)}},_beforeCloseHandler:function(t){var i=t[e.PopupService.OPTION.POPUP],s=this.options.animation;if(!this._ignoreBeforeCloseResultant&&s&&s.close){var o=s.actionPrefix,r=o?[o,"close"].join("-"):"close";return n.startAnimation(i[0],r,e.PositionUtils.addTransformOriginAnimationEffectsOption(i,s.close),this).then(function(){i.hide()})}i.hide()},_afterCloseHandler:function(e){this._removeDescribedBy(),this._setAutoDismiss(),delete this._launcher,this._trigger("close"),this._hasPositionOfLauncherOverride&&(this.options.position.of=null,delete this._hasPositionOfLauncherOverride)},isOpen:function(){var t=e.ZOrderUtils.getStatus(this.element);return t===e.ZOrderUtils.STATUS.OPENING||t===e.ZOrderUtils.STATUS.OPEN||t===e.ZOrderUtils.STATUS.BEFORE_CLOSE||t===e.ZOrderUtils.STATUS.CLOSING},refresh:function(){if(this._super(),e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN&&this._reposition()){var t=this.element;e.PopupService.getInstance().triggerOnDescendents(t,e.PopupService.EVENT.POPUP_REFRESH)}},_setOption:function(t,i){var s=this.options;switch(t){case"tail":i!==s.tail&&this._setTail(i);break;case"chrome":i!==s.chrome&&this._setChrome(i);break;case"position":return this._setPosition(i),void this.refresh();case"autoDismiss":e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN&&i!==s.autoDismiss&&this._setAutoDismiss(i);break;case"modality":if(e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN){var o=this.element,n={};n[e.PopupService.OPTION.POPUP]=o,n[e.PopupService.OPTION.MODALITY]=i,e.PopupService.getInstance().changeOptions(n)}}this._superApply(arguments)},_getRootStyle:function(){return"oj-popup"},_setTail:function(e){this._destroyTail(),this._createTail(e),this._reposition()},_createTail:function(i){var s=i||this.options.tail;if("none"!==s){var o=this._getRootStyle(),n=[o,"tail"].join("-"),r=[n,s].join("-"),a=t("<div>").hide();a.addClass(n).addClass(r),a.attr("role","presentation"),this._tailId=a.attr("id",this._getSubId("tail")).attr("id");var l=this.element;if(a.appendTo(l),l.addClass(r),e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN){var u=[o,"layer"].join("-");u+=" "+r;var c={};c[e.PopupService.OPTION.POPUP]=l,c[e.PopupService.OPTION.LAYER_SELECTORS]=u,e.PopupService.getInstance().changeOptions(c)}}},_getTail:function(){var e=this._tailId;return e?t(document.getElementById(e)):null},_destroyTail:function(){var t=this._getTail();t&&t.remove(),delete this._tailId;var i=this.options.tail,s=this._getRootStyle(),o=[s,"tail",i].join("-"),n=this.element;if(n.removeClass(o),e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN){var r=[s,"layer"].join("-"),a={};a[e.PopupService.OPTION.POPUP]=n,a[e.PopupService.OPTION.LAYER_SELECTORS]=r,e.PopupService.getInstance().changeOptions(a)}},_setChrome:function(e){var t=e||this.options.chrome,i=[this._getRootStyle(),"no-chrome"].join("-"),s=this.element;"default"===t&&s.hasClass(i)?s.removeClass(i):"none"!==t||s.hasClass(i)||s.addClass(i)},_setLauncher:function(i){var s=i;if(s?"string"===t.type(s)?s=t(s):1===s.nodeType&&(s=t(s)):s=t(document.activeElement),s instanceof t&&s.length>1)for(var o=this.element,n=0;n<s.length;n++){var r=s[0];if(!e.DomUtils.isAncestorOrSelf(o[0],r)){s=t(r);break}}else s instanceof t&&!(s instanceof t&&0===s.length)||(s=t(document.activeElement));this._launcher=s},_setPosition:function(t){var i=this.options;t&&(i.position=e.PositionUtils.coerceToJet(t,i.position))},_getPositionAsJqUi:function(){var i=this.options,s=e.PositionUtils.coerceToJqUi(i.position),o="rtl"===this._GetReadingDirection(),n=(s=e.PositionUtils.normalizeHorizontalAlignment(s,o)).using;return n=t.isFunction(n)?n:null,s.using=this._usingHandler.bind(this,n),s},_resolveBusyStateAndCloseImplicitly:function(e){e(),delete this._closeDelayTimer,this._closeImplicitly()},_resolveBusyStateAndCancelDelayedClosure:function(e,t){window.clearTimeout(e),t()},_usingHandler:function(t,s,o){var n=o.element.element;if(s.top!==n.css("top")||s.left!==n.css("left")){var l=this._getTail();if(l){l.hide();for(var u=0;u<r.length;u++)l.removeClass(r[u]),n.removeClass(r[u]);if(l.removeAttr("style"),o.target&&0===o.target.height&&0===o.target.width){var c="rtl"===this._GetReadingDirection(),p=e.PositionUtils.normalizeHorizontalAlignment(this.options.position,c).my;if(!e.StringUtils.isEmptyOrUndefined(p)){var h="center"===p.horizontal?p.horizontal:o.horizontal,d="center"===p.vertical?"middle":p.vertical;o.horizontal=h,o.vertical=d}}var f,_,v=[o.horizontal,o.vertical].join("-"),m=a[v];if(l.addClass(m),n.addClass(m),l.show(),"left"===o.horizontal?(f=l.outerWidth(),f-=f+e.DomUtils.getCSSLengthAsInt(l.css("left")),s.left+=f-2):"right"===o.horizontal&&(f=l.outerWidth(),f-=f+e.DomUtils.getCSSLengthAsInt(l.css("right")),s.left-=f-2),"top"===o.vertical?(_=l.outerHeight(),_-=_+e.DomUtils.getCSSLengthAsInt(l.css(o.vertical)),s.top+=_-2):"bottom"===o.vertical&&(_=l.outerHeight(),_-=_+e.DomUtils.getCSSLengthAsInt(l.css(o.vertical)),s.top-=_-2),n.css(s),"center"===o.horizontal&&"middle"!==o.vertical){var g=n.width(),O=Math.round((g/2-l.outerWidth()/2)/g*100);l.css({left:O+"%"})}else if("middle"===o.vertical){var S=n.height(),P=Math.round((S/2-l.outerHeight()/2)/S*100);l.css({top:P+"%"})}}else n.css(s);if(e.PositionUtils.captureTransformOriginAnimationEffectsOption(n,o),t&&t(s,o),"focusLoss"===this.options.autoDismiss&&e.PositionUtils.isAligningPositionClipped(o)){this._ignoreRestoreFocus=!0;var y=i.getContext(this.element[0]).getBusyContext(),T={description:["ojPopup identified by '",this.element.attr("id"),"' is pending implicit closure."].join("")},U=y.addBusyState(T),E=window.setTimeout(this._resolveBusyStateAndCloseImplicitly.bind(this,U),0);this._closeDelayTimer=this._resolveBusyStateAndCancelDelayedClosure.bind(this,E,U)}}},_reposition:function(){var i=this.element,s=this._getPositionAsJqUi();if(e.StringUtils.isString(s.of)){var o=t(s.of);if(0===o.length)return!1;s.of=o}return i.position(s),!0},_intialFocus:function(e){var t=this._deriveInitialFocus();(e||"none"!==t)&&(this.GetFocusElement().focus(),this._trigger("focus"))},GetFocusElement:function(){var i=document.activeElement;if(i&&this._isFocusInPopup(i))return i;var s,o=this._deriveInitialFocus();if("none"===o&&(o="popup"),"firstFocusable"===o){for(var n=this._content.find(":focusable"),r=0;r<n.length;r++)if(e.FocusUtils.isFocusable(n[r])){s=t(n[r]);break}s||(o="popup")}if("popup"===o){var a=this._closeSkipLink;a?s=a.getLink():(s=this.element).attr("tabindex","-1")}return s[0]},_deriveInitialFocus:function(){var t=this.options,i=t.initialFocus;return"auto"===i&&(i="modal"===t.modality?e.DomUtils.isTouchSupported()?"popup":"firstFocusable":"none"),i},_isFocusInPopup:function(t,i){if(t||(t=document.activeElement),!t)return!1;var s=this.element;return i&&(s=s.parent()),e.DomUtils.isAncestorOrSelf(s[0],t)},_isFocusInLauncher:function(t){t||(t=document.activeElement);var i=this._launcher;return e.DomUtils.isAncestorOrSelf(i[0],t)},_restoreFocus:function(){this._ignoreRestoreFocus?delete this._ignoreRestoreFocus:this._isFocusInPopup(null,!0)&&this._launcher.focus()},_keyHandler:function(e){if(!e.isDefaultPrevented()){var i=this._content,s=e.target;if(e.keyCode===t.ui.keyCode.ESCAPE&&(this._isFocusInPopup(s)||this._isFocusInLauncher(s)))e.preventDefault(),this.close();else if(117===e.keyCode||"F6"===e.key)this._isFocusInPopup(s)?"modeless"===this.options.modality?(e.preventDefault(),this._launcher.focus()):this.close():this._isFocusInLauncher(s)&&(e.preventDefault(),this._intialFocus(!0));else if(e.keyCode===t.ui.keyCode.TAB&&this._isFocusInPopup(s)){var o=i.find(":tabbable");if(o.length>0){var n=o[0],r=o[o.length-1],a=this.element;n!==s&&a[0]!==s||!e.shiftKey?r!==s||e.shiftKey||(e.preventDefault(),r===n?(a.attr("tabindex","-1"),a.focus()):t(n).focus()):(e.preventDefault(),n===r&&n===s?(a.attr("tabindex","-1"),a.focus()):t(r).focus())}else e.preventDefault(),"modeless"===this.options.modality?this._launcher.focus():this.close()}}},_setAutoDismiss:function(t){var i=this._focusLossCallback,s=this._getPopupServiceEvents();if(i&&(delete s[e.PopupService.EVENT.POPUP_AUTODISMISS],delete this._focusLossCallback),"focusLoss"===t&&(i=this._dismissalHandler.bind(this),this._focusLossCallback=i,s[e.PopupService.EVENT.POPUP_AUTODISMISS]=i),e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN){var o=this.element,n={};n[e.PopupService.OPTION.POPUP]=o,n[e.PopupService.OPTION.EVENTS]=s,e.PopupService.getInstance().changeOptions(n)}},_dismissalHandler:function(t){if(e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN){var i=this._launcher,s=this.element.parent(),o=t.target,n=this._focusSkipLink;if(n){var r=n.getLink();if(r&&e.DomUtils.isAncestorOrSelf(r[0],o))return}if(!e.DomUtils.isAncestorOrSelf(i[0],o)&&!e.DomUtils.isAncestorOrSelf(s[0],o)){if(e.FocusUtils.isFocusable(o)){if("mousedown"===t.type||"touchstart"===t.type)return;this._ignoreRestoreFocus=!0}this.close()}}},_addDescribedBy:function(){var e=this._launcher,i=this.element.attr("id"),s=e.attr("aria-describedby"),o=s?s.split(/\s+/):[];o.push(i),s=t.trim(o.join(" ")),e.attr("aria-describedby",s)},_removeDescribedBy:function(){var e=this._launcher,i=this.element;if(e&&0!==e.length){var s=i.attr("id"),o=e.attr("aria-describedby"),n=o?o.split(/\s+/):[],r=t.inArray(s,n);-1!==r&&n.splice(r,1),(o=t.trim(n.join(" ")))?e.attr("aria-describedby",o):e.removeAttr("aria-describedby")}},_initVoiceOverAssist:function(){var t,i=e.AgentUtils.getAgentInfo().os===e.AgentUtils.OS.IOS||e.AgentUtils.getAgentInfo().os===e.AgentUtils.OS.ANDROID,s=this._liveRegion;s||(s=new e.PopupLiveRegion,this._liveRegion=s);var o=this._deriveInitialFocus();if(t=i?this.getTranslatedString("none"===o?"ariaLiveRegionInitialFocusNoneTouch":"ariaLiveRegionInitialFocusFirstFocusableTouch"):this.getTranslatedString("none"===o?"ariaLiveRegionInitialFocusNone":"ariaLiveRegionInitialFocusFirstFocusable"),s.announce(t),i){var n=this._getSubId("focusSkipLink"),r=this._launcher,a=this._intialFocus.bind(this,!0);t=this.getTranslatedString("ariaFocusSkipLink"),this._focusSkipLink=new e.PopupSkipLink(r,t,a,n);var l=this._content,u=this._getSubId("closeSkipLink");a=this._closeImplicitly.bind(this),t=this.getTranslatedString("ariaCloseSkipLink"),this._closeSkipLink=new e.PopupSkipLink(l,t,a,u)}},_destroyVoiceOverAssist:function(){this._liveRegion.destroy(),delete this._liveRegion;var e=this._focusSkipLink;e&&(e.destroy(),delete this._focusSkipLink);var t=this._closeSkipLink;t&&(t.destroy(),delete this._closeSkipLink)},_getSubId:function(t){var i=this.element.attr("id");return e.StringUtils.isEmptyOrUndefined(i)&&(i=this.uuid),[i,t].join("_")},_surrogateRemoveHandler:function(){var t=this.element;e.ZOrderUtils.getStatus(t)===e.ZOrderUtils.STATUS.OPEN&&t.remove()},_getPopupServiceEvents:function(){if(!this._popupServiceEvents){var t={};this._popupServiceEvents=t,t[e.PopupService.EVENT.POPUP_CLOSE]=this._closeImplicitly.bind(this),t[e.PopupService.EVENT.POPUP_REMOVE]=this._surrogateRemoveHandler.bind(this),t[e.PopupService.EVENT.POPUP_REFRESH]=this.refresh.bind(this),t[e.PopupService.EVENT.POPUP_BEFORE_OPEN]=this._beforeOpenHandler.bind(this),t[e.PopupService.EVENT.POPUP_AFTER_OPEN]=this._afterOpenHandler.bind(this),t[e.PopupService.EVENT.POPUP_BEFORE_CLOSE]=this._beforeCloseHandler.bind(this),t[e.PopupService.EVENT.POPUP_AFTER_CLOSE]=this._afterCloseHandler.bind(this)}return this._popupServiceEvents},_closeImplicitly:function(){this._ignoreBeforeCloseResultant=!0,this.close(),delete this._ignoreBeforeCloseResultant},_setWhenReady:function(t){var i=this._whenReadyMediator;i&&(i.destroy(),delete this._whenReadyMediator),["open","close"].indexOf(t)<0||(this._whenReadyMediator=new e.PopupWhenReadyMediator(this.element,t,"ojPopup",this._IsCustomElement()))},_isOperationPending:function(e,t){var i=this._whenReadyMediator;return!!i&&i.isOperationPending(this,e,e,t)},_setupFocus:function(e){var i=this;this._focusable({applyHighlight:!0,setupHandlers:function(s,o){i._on(e,{focus:function(e){s(t(e.currentTarget))},blur:function(e){o(t(e.currentTarget))}})}})},_NotifyDetached:function(){e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly(),this._super()}}),o.setDefaultOptions({ojPopup:{modality:o.createDynamicPropertyGetter(function(){return(s.parseJSONFromFontFamily("oj-popup-option-defaults")||{}).modality}),animation:o.createDynamicPropertyGetter(function(){return(s.parseJSONFromFontFamily("oj-popup-option-defaults")||{}).animation})}}),l.extension._WIDGET_NAME="ojPopup",e.CustomElementBridge.register("oj-popup",{metadata:l})});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojlabel',["ojs/ojcore","jquery","hammerjs","ojs/ojlogger","ojs/ojcontext","ojs/ojjquery-hammer","ojs/ojcomponentcore","ojs/ojpopup"],function(e,t,i,n,o){"use strict";var s={properties:{for:{type:"string"},help:{type:"object",value:{definition:null,source:null},properties:{definition:{type:"string"},source:{type:"string"}}},labelId:{type:"string"},showRequired:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{tooltipHelp:{type:"string"},tooltipRequired:{type:"string"}}}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};e.__registerWidget("oj.ojLabel",t.oj.baseComponent,{version:"1.0.0",defaultElement:"<label>",widgetEventPrefix:"oj",options:{for:null,help:{definition:null,source:null},labelId:null,showRequired:!1,rootAttributes:null},_BUNDLE_KEY:{_TOOLTIP_HELP:"tooltipHelp",_TOOLTIP_REQUIRED:"tooltipRequired"},widget:function(){return this.uiLabel},refresh:function(){this._super(),this._refreshRequired(),this._refreshHelp(),this._addIdsToDom()},_InitOptions:function(e,t){this._super(e,t),this._isCustomElement=this._IsCustomElement(),this._checkRequiredOption()},_ComponentCreate:function(){this._super(),this._touchEatClickNamespace=this.eventNamespace+"TouchEatClick",this._touchEatContextMenuNamespace=this.eventNamespace+"TouchEatContextMenu",this._helpDefPopupNamespace=this.eventNamespace+"HelpDefPopup",this._bTouchSupported=e.DomUtils.isTouchSupported(),this._drawOnCreate()},_AfterCreate:function(){var e,t,i,s=this,r=this.options.for,l=this.options.showRequired;if(this.OuterWrapper&&(e=this.OuterWrapper.getAttribute("data-oj-input-id"),t=this.OuterWrapper.getAttribute("data-oj-set-id")),e?this.element[0].setAttribute("for",e):t&&(this._targetElement=document.getElementById(t),i=this._targetElement,this._needsHelpIcon()&&s._addHelpSpanIdOnTarget(s.helpSpanId,i),s.options.showRequired&&s._addRequiredDescribedByOnCustomFormElement(i)),r&&this._isCustomElement){var a=o.getContext(this.OuterWrapper).getBusyContext().addBusyState({description:"The oj-label id='"+this.OuterWrapper.id+"' is looking for its form component with id "+r});Promise.resolve().then(()=>{if(s._targetElement=document.getElementById(r),s._targetElement){if(i=s._targetElement,s._needsHelpIcon()&&s._addHelpSpanIdOnTarget(s.helpSpanId,i),l&&s._addRequiredDescribedByOnCustomFormElement(i),!e)if(s._isElementCustomElement(i)){var t=s.OuterWrapper.id;s._addElementAttribute(i,t,"labelled-by")}else s.element[0].setAttribute("for",r)}else n.info("could not find an element with forOption "+r);a()})}else this._isCustomElement&&this.options.labelId&&(this._targetElement=this._getTargetElementFromLabelledAttr("aria-labelledby",this.options.labelId),(i=this._targetElement)&&this._needsHelpIcon()&&this._addHelpSpanIdOnTarget(this.helpSpanId,i))},_SaveAttributes:function(e){this._IsCustomElement()||(this._savedClasses=e.attr("class"))},_RestoreAttributes:function(){this._IsCustomElement()||(this._savedClasses?this.element.attr("class",this._savedClasses):this.element.removeAttr("class"))},_NotifyDetached:function(){this._superApply(arguments),this._handleCloseHelpDefPopup()},_NotifyHidden:function(){this._superApply(arguments),this._handleCloseHelpDefPopup()},_GetTranslationsSectionName:function(){return this._IsCustomElement(),"oj-ojLabel"},_WatchedAttributeChanged:function(e,t,i){switch(this._superApply(arguments),e){case"data-oj-input-id":this.element[0].setAttribute("for",i);break;case"data-oj-set-id":if(t&&!i){let e=document.getElementById(t);this._removeDescribedByWithPrefix(e,this.OuterWrapper.id)}else{this._targetElement=document.getElementById(i);var n=this._targetElement,s=this._needsHelpIcon(),r=this.options.showRequired;if(s||r){var l=o.getContext(this.OuterWrapper).getBusyContext().addBusyState({description:"The oj-label is writing described-by on its target."}),a=this;Promise.resolve().then(()=>{s&&a._addHelpSpanIdOnTarget(a.helpSpanId,n),a.options.showRequired&&a._addRequiredDescribedByOnCustomFormElement(n),l()})}}}},_removeDescribedByWithPrefix:function(e,t){var i;(i=((i=e.getAttribute("described-by"))?i.split(/\s+/):[]).filter(function(e){return-1===e.indexOf(t)}).join(" ").trim())?e.setAttribute("described-by",i):e.removeAttribute("described-by")},_drawOnCreate:function(){var e,i=null;this.OuterWrapper?(this.uiLabel=t(this.OuterWrapper).append(this.element.wrap(this._createOjLabelGroupDom()).parent()),this.uiLabel.addClass("oj-label oj-component")):this.uiLabel=this.element.wrap(this._createRootDomElement()).closest(".oj-component"),this._addIdsToDom(),e=this.element[0].id,this.helpSpanId=e+"_helpIcon",this.requiredSpanId=e+"_requiredIcon",this._isCustomElement||this._moveLabelStyleClassesToRootDom(),this.options.showRequired&&this._createRequiredIconSpanDom(),this._needsHelpIcon()&&(i=this._createIconSpan(this.helpSpanId,!0),this._createHelp(i))},_addRequiredDescribedByOnCustomFormElement:function(e){e&&this._isElementCustomElementAriaRequiredUnsupported(e)&&this._addElementAttribute(e,this.requiredSpanId,"described-by")},_removeRequiredDescribedByOnCustomFormElement:function(e){e&&this._isElementCustomElementAriaRequiredUnsupported(e)&&this._removeElementAttribute(e,this.requiredSpanId,"described-by")},_addHelpSpanIdOnTarget:function(e,t){var i;i=this._getAriaAttributeForTarget(t),this._addElementAttribute(t,e,i)},_removeHelpSpanIdOnTarget:function(e,t){var i;i=this._getAriaAttributeForTarget(t),this._removeElementAttribute(t,e,i)},_getAriaAttributeForTarget:function(e){return this._isElementCustomElement(e)?"described-by":"group"===e.getAttribute("role")?"aria-labelledby":"aria-describedby"},_getTargetElementFromLabelledAttr:function(e,t){var i;return i="["+e+"~='"+t+"']",document.querySelector(i)},_isElementCustomElement:function(t){return e.Assert.assertDomElement(t),-1!==t.tagName.indexOf("-")},_isElementCustomElementAriaRequiredUnsupported:function(t){var i;e.Assert.assertDomElement(t);var n,o=["oj-radioset","oj-checkboxset"],s=o.length,r=!1;n=t.tagName.toLowerCase();for(var l=0;l<s&&!r;l++)i=o[l],0===n.indexOf(i)&&(r=!0);return r},_addElementAttribute:function(e,t,i){var n,o,s=e.getAttribute(i);-1===(o=s?s.split(/\s+/):[]).indexOf(t)&&o.push(t),n=o.join(" ").trim(),e.setAttribute(i,n)},_removeElementAttribute:function(e,t,i){var n,o,s,r=e.getAttribute(i);-1!==(o=(s=r?r.split(/\s+/):[]).indexOf(t))&&s.splice(o,1),(n=s.join(" ").trim())?e.setAttribute(i,n):e.setAttribute(i,"")},_createHelp:function(e){var i=this.options.help.definition,n=this.options.help.source,o=this._createHelpIconAnchorDomElement(i,n);t(e).prepend(o),this._attachHelpDefToIconAnchor(),this._focusable({element:o,applyHighlight:!0})},_createRequiredIconSpanDom:function(){this._createIconSpan(this.requiredSpanId,!1).appendChild(this._createRequiredIconDomElement())},_checkRequiredOption:function(){var e=this.options.showRequired;if("boolean"!=typeof e)throw new Error("Option 'showRequired' has invalid value set: "+e)},_addIdsToDom:function(){this._isCustomElement&&(this.OuterWrapper.id||t(this.OuterWrapper).uniqueId(),this._refreshLabelId()),null==this.element.attr("id")&&this.element.uniqueId()},_moveLabelStyleClassesToRootDom:function(){var e,t,i,n=this.element.attr("class");if(n){i=(e=n.split(/\s+/)).length;for(var o=0;o<i;o++)(t=e[o]).indexOf("-label")>0&&(this.uiLabel.addClass(t),this.element.removeClass(t))}},_createIconSpan:function(e,t){var i=document.createElement("span");return i.setAttribute("id",e),t?this.uiLabel.find(".oj-label-group").prepend(i):this.element.before(i),i},_createRootDomElement:function(){var e,t,i=this.options.rootAttributes,n="oj-label oj-component";return i&&(e=i.class),e&&(n=n+" "+e),(t=document.createElement("div")).className=n,t.appendChild(this._createOjLabelGroupDom()),t},_createOjLabelGroupDom:function(){var e;return(e=document.createElement("div")).className="oj-label-group",e},_createRequiredIconDomElement:function(){var e=this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_REQUIRED),t=document.createElement("span");return t.className="oj-label-required-icon oj-component-icon",t.setAttribute("role","img"),t.setAttribute("title",e),t.setAttribute("aria-label",e),t},_createHelpIconAnchorDomElement:function(t,i){var n;if((n=document.createElement("a")).setAttribute("tabindex","0"),n.setAttribute("target","_blank"),n.className="oj-label-help-icon-anchor oj-label-help-icon oj-component-icon oj-clickable-icon-nocontext",i)try{e.DomUtils.validateURL(i),n.setAttribute("href",i)}catch(e){throw new Error(e+". The source option ("+i+") is invalid.")}else n.setAttribute("role","img");return t?n.setAttribute("aria-label",t):n.setAttribute("aria-label",this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_HELP)),n},_attachHelpDefToIconAnchor:function(){var e,t,i,n=this;0!==(t=this.widget().find(".oj-label-help-icon-anchor")).length&&(this._bTouchSupported&&(this._eatClickOnHelpIconListener&&this.widget().off(this._touchEatClickNamespace),this._eatClickOnHelpIconListener=function(){return!1},t.on("contextmenu"+this._touchEatContextMenuNamespace,!1)),this._openPopupForHelpDefCallbackListener=function(o){null==e&&(e=n._createHelpDefPopupDiv(),i={my:"start bottom",at:"end top",collision:"flipcenter",of:t},e.ojPopup({position:i,modality:"modeless",animation:{open:null,close:null}})),n._handleOpenHelpDefPopup(o,e,t)},this._closePopupForHelpDefCallbackListener=function(){n._handleCloseHelpDefPopup()},this._addShowHelpDefinitionEventHandlers(t))},_createHelpDefPopupDiv:function(){var e,i,n,o,s=this.options.help.definition;return o=s||this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_HELP),this._helpDefPopupDivId?(n=t(document.getElementById(this._helpDefPopupDivId))).length&&n.find(".oj-label-help-popup-container").first().text(o):((i=document.createElement("div")).className="oj-label-help-popup",i.style.display="none",(n=t(i)).uniqueId(),this._helpDefPopupDivId=n.prop("id"),(e=document.createElement("div")).className="oj-label-help-popup-container",i.appendChild(e),t(e).text(o),this.uiLabel.append(n)),n},_addShowHelpDefinitionEventHandlers:function(t){var n;t.on("focusin"+this._helpDefPopupNamespace+" mouseenter"+this._helpDefPopupNamespace,this._openPopupForHelpDefCallbackListener),t.on("mouseleave"+this._helpDefPopupNamespace,this._closePopupForHelpDefCallbackListener),this._bTouchSupported&&(this.options.help.source?(n={recognizers:[[i.Press,{time:e.DomUtils.PRESS_HOLD_THRESHOLD}]]},t.ojHammer(n),this._on(t,{press:this._openPopupForHelpDefCallbackListener})):(n={recognizers:[[i.Tap],[i.Press,{time:e.DomUtils.PRESS_HOLD_THRESHOLD}]]},t.ojHammer(n),this._on(t,{press:this._openPopupForHelpDefCallbackListener,tap:this._openPopupForHelpDefCallbackListener})))},_handleOpenHelpDefPopup:function(t,i,n){if(!i.ojPopup("isOpen"))if(this._bTouchSupported){if("press"===t.type){var o=this.widget();o.on("click"+this._touchEatClickNamespace,this._eatClickOnHelpIconListener);var s=this;i.on("ojclose",function(){o.off(s._touchEatClickNamespace)})}else i.off("ojclose");"press"!==t.type&&"tap"!==t.type&&(e.DomUtils.recentTouchStart()||"focusin"!==t.type&&"mouseenter"!==t.type)||i.ojPopup("open",n)}else i.ojPopup("open",n)},_handleCloseHelpDefPopup:function(){null!=this._helpDefPopupDivId&&t(document.getElementById(this._helpDefPopupDivId)).ojPopup("close")},_removeHelpDefIconEventListeners:function(e){this._bTouchSupported&&(this.widget().off(this._touchEatClickNamespace),e.off(this._touchEatContextMenuNamespace),this._eatClickOnHelpIconListener=null,this._eatContextMenuOnHelpIconListener=null,e.ojHammer("destroy")),e.off(this._helpDefPopupNamespace),this._openPopupForHelpDefCallbackListener=null,this._closePopupForHelpDefCallbackListener=null},_removeHelpDefPopup:function(){var e;null!=this._helpDefPopupDivId&&((e=t(document.getElementById(this._helpDefPopupDivId))).length>0&&(e.ojPopup("destroy"),e.remove()),this._helpDefPopupDivId=null)},_needsHelpIcon:function(){var e,t,i=this.options,n=i.help.source;return(t=""!==n&&null!=n)||(t=""!==(e=i.help.definition)&&null!=e),t},_refreshHelp:function(){var e,t,i=this.helpSpanId,n=this._targetElement;1===(t=this.uiLabel.find(".oj-label-help-icon")).length&&(this._removeHelpDefIconEventListeners(t),this._removeHelpDefPopup(),t.remove()),e=document.getElementById(i),this._needsHelpIcon()?(null==e&&(e=this._createIconSpan(i,!0)),this._createHelp(e),this._isCustomElement&&this._addHelpSpanIdOnTarget(i,n)):null!==e&&(e.parentNode.removeChild(e),this._isCustomElement&&this._removeHelpSpanIdOnTarget(i,n))},_refreshRequired:function(){var e,t,i=this.requiredSpanId;e=document.getElementById(i),this.options.showRequired?e?(t=this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_REQUIRED),this.uiLabel.find(".oj-label-required-icon").attr("title",t)):(this._createRequiredIconSpanDom(),this._isCustomElement&&this._addRequiredDescribedByOnCustomFormElement(this._targetElement)):(null!==(e=document.getElementById(i))&&e.parentNode.removeChild(e),this._isCustomElement&&this._removeRequiredDescribedByOnCustomFormElement(this._targetElement))},_refreshFor:function(e,t){var i=this.element[0],n=this.OuterWrapper.id;if(e){i.removeAttribute("for"),this.OuterWrapper.removeAttribute("data-oj-input-id");var o=document.getElementById(e);if(o){var s=o.getAttribute("labelled-by");if(s)if(s===n)o.removeAttribute("labelled-by");else{var r=s.split(/\s+/).filter(function(e){return e!==n}).join(" ");o.setAttribute("labelled-by",r)}}}if(this._targetElement=document.getElementById(this.options.for),this._targetElement){var l=this._targetElement;this._isElementCustomElement(l)?(this._addElementAttribute(l,n,"labelled-by"),this._needsHelpIcon()&&this._addHelpSpanIdOnTarget(this.helpSpanId,l),this.options.showRequired&&this._addRequiredDescribedByOnCustomFormElement(l)):i.setAttribute("for",t)}},_refreshLabelId:function(){var e,t;(e=this.options.labelId)?this.element.attr("id",e):(t=this.uiLabel.attr("id"))&&this.element.attr("id",t+"|label")},_setOption:function(e,t){var i=this.options[e];switch(this._superApply(arguments),e){case"showRequired":this._refreshRequired();break;case"help":this._refreshHelp();break;case"for":this._isCustomElement&&this._refreshFor(i,t);break;case"labelId":this._refreshLabelId()}},getNodeBySubId:function(e){var t;return(t=this._super(e))||"oj-label-help-icon"===e.subId&&(t=this.widget().find(".oj-label-help-icon")[0]),t||null},getSubIdByNode:function(e){var t=null;return null!=e&&e===this.widget().find(".oj-label-help-icon")[0]&&(t={subId:"oj-label-help-icon"}),t||this._superApply(arguments)},_destroy:function(){var t=this.uiLabel.find(".oj-label-help-icon");return this._removeHelpDefIconEventListeners(t),this._removeHelpDefPopup(),this.helpSpanId=null,this.requiredSpanId=null,this._isCustomElement=null,e.DomUtils.unwrap(this.element,this.uiLabel),this._super()}}),s.extension._WIDGET_NAME="ojLabel",s.extension._INNER_ELEM="label",s.extension._GLOBAL_TRANSFER_ATTRS=["accesskey"],s.extension._WATCHED_ATTRS=["data-oj-input-id","data-oj-set-id"],e.CustomElementBridge.register("oj-label",{metadata:s})});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojlabelledbyutils',["ojs/ojcore","jquery","ojs/ojlabel"],function(e,t){"use strict";var a={CUSTOM_LABEL_ELEMENT_ID:"|label",_labelledByUpdatedForSet:function(e,t,d,l){if((t||d)&&this._IsCustomElement()){var i={callbackAdd:function(e,t,d){const l=a.CUSTOM_LABEL_ELEMENT_ID;a._addAriaLabelledBy(e,t+l),a._addSetIdOnLabel(t,d.componentId)},callbackRemove:function(e,t,d){const l=a.CUSTOM_LABEL_ELEMENT_ID;a._removeAriaLabelledBy(e,t+l),a._removeSetIdOnLabel(t,d.componentId)},args:{componentId:e}};a._byUpdatedTemplate(t,d,l,i)}},_describedByUpdated:function(e,t,d=this._GetContentElement()){if(e||t){var l={callbackAdd:function(e,t){a._addRemoveAriaBy(e,"aria-describedby",t,!0)},callbackRemove:function(e,t){a._addRemoveAriaBy(e,"aria-describedby",t,!1)}};a._byUpdatedTemplate(e,t,d,l)}},_byUpdatedTemplate:function(e,t,a,d){var l,i,n,o;if(!e&&t)for(i=t.split(/\s+/),o=0;o<i.length;o++)l=i[o],d.callbackAdd.call(this,a,l,d.args);else if(e&&!t)for(i=e.split(/\s+/),o=0;o<i.length;o++)l=i[o],d.callbackRemove.call(this,a,l,d.args);else if(e&&t){for(i=t.split(/\s+/),n=e.split(/\s+/),o=0;o<n.length;o++)l=n[o],-1===t.indexOf(l)&&d.callbackRemove.call(this,a,l,d.args);for(o=0;o<i.length;o++)l=i[o],-1===e.indexOf(l)&&d.callbackAdd.call(this,a,l,d.args)}},_addAriaLabelledBy:function(e,t){a._addRemoveAriaBy(e,"aria-labelledby",t,!0)},_removeAriaLabelledBy:function(e,t){a._addRemoveAriaBy(e,"aria-labelledby",t,!1)},_addSetIdOnLabel:function(e,t){var a=document.getElementById(e);a&&(a.getAttribute("data-oj-set-id")||a.setAttribute("data-oj-set-id",t))},_removeSetIdOnLabel:function(e){var t=document.getElementById(e);t&&t.getAttribute("data-oj-set-id")&&t.removeAttribute("data-oj-set-id")},_addRemoveAriaBy:function(e,t,a,d){e.each(function(){let e=this.getAttribute(t),l=e?e.split(/\s+/):[],i=l.indexOf(a);d&&-1===i?l.push(a):d||-1===i||l.splice(i,1);let n=l.join(" ").trim();n?this.setAttribute(t,n):this.removeAttribute(t)})}};return a});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojoption',["ojs/ojcore","jquery","ojs/ojcomponentcore"],function(e,t){"use strict";var n={properties:{disabled:{type:"boolean",value:!1},value:{type:"any"}},methods:{setProperty:{},getProperty:{},refresh:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};function o(n){function o(n){var o=e.BaseCustomElementBridge.getSlotMap(n),i=["startIcon","","endIcon"];t.each(o,function(e,o){-1===i.indexOf(e)&&function(e,n){t.each(n,function(t,n){e.removeChild(n)})}(n,o)}),t.each(i,function(e,i){o[i]&&function(e,n){t.each(n,function(t,n){e.appendChild(n)})}(n,o[i])})}this.updateDOM=function(){var e=n.element.customOptionRenderer;o(n.element),e&&"function"==typeof e&&e(n.element)}}n.properties.customOptionRenderer={},n.extension._CONSTRUCTOR=o,e.CustomElementBridge.register("oj-option",{metadata:n})});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojbutton',["ojs/ojcore","jquery","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojchildmutationobserver","ojs/ojlabelledbyutils","ojs/ojoption"],function(t,e,n,o,s,i){"use strict";var a={properties:{chroming:{type:"string",enumValues:["borderless","callToAction","full","half","outlined","solid"]},disabled:{type:"boolean",value:!1},display:{type:"string",enumValues:["all","icons"],value:"all"},translations:{type:"object",value:{}}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAction:{}},extension:{}},l={properties:{chroming:{type:"string",enumValues:["borderless","full","half","outlined","solid"]},describedBy:{type:"string"},disabled:{type:"boolean",value:!1},display:{type:"string",enumValues:["all","icons"],value:"all"},focusManagement:{type:"string",enumValues:["none","oneTabstop"],value:"oneTabstop"},labelledBy:{type:"string"},translations:{type:"object",value:{}},value:{type:"Array<any>",writeback:!0}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}},r={properties:{chroming:{type:"string",enumValues:["borderless","full","half","outlined","solid"]},describedBy:{type:"string"},disabled:{type:"boolean",value:!1},display:{type:"string",enumValues:["all","icons"],value:"all"},focusManagement:{type:"string",enumValues:["none","oneTabstop"],value:"oneTabstop"},labelledBy:{type:"string"},translations:{type:"object",value:{}},value:{type:"any",writeback:!0}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}},u={properties:{chroming:{type:"string",enumValues:["borderless","full","half","outlined","solid"]},disabled:{type:"boolean",value:!1},display:{type:"string",enumValues:["all","icons"],value:"all"},translations:{type:"object",value:{}}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAction:{}},extension:{}};
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(){var a,l,r="oj-button oj-component oj-enabled oj-default",u="oj-button-icons-only oj-button-icon-only oj-button-text-icons oj-button-text-icon-start oj-button-text-icon-end oj-button-text-only",h="oj-button-full-chrome oj-button-half-chrome oj-button-outlined-chrome oj-button-cta-chrome",c={solid:"oj-button-full-chrome",outlined:"oj-button-outlined-chrome",borderless:"oj-button-half-chrome",full:"oj-button-full-chrome",half:"oj-button-half-chrome",callToAction:"oj-button-cta-chrome"},d={button:["ojButtonset","ojToolbar"],buttonset:["ojToolbar"]};function m(t,e){_(t,h),t.classList.add(c[e])}function b(t,n){var o,s=t.name,i=t.form;if(s){var a=":radio[name='"+(s=s.replace(/'/g,"\\'"))+"']:oj-button";o=n?n.filter(a):i?e(i).find(a):e(a,t.ownerDocument).filter(function(){return!this.form})}else o=(n?n.filter(t):e(t)).filter(":oj-button");return o}function p(t,e,s){var i=function(t,e,n){for(var s=0;s<n.length;++s){var i=n[s];if(e.indexOf(i)>=0)for(;;t=t.parentNode){var a=o.__GetWidgetConstructor(t,i);if(a)return a}}return null}(e,s,d[t]);return i?i("option","chroming"):(n.parseJSONFromFontFamily("oj-"+t+"-option-defaults")||{}).chroming}function f(t,e){var n=t.className;if(n){for(var o=n.split(" "),s=e.split(" "),i=s.length;i>=0;i--)o.indexOf(s[i])>=0&&s.splice(i,1);s.length>0&&(t.className=n+" "+s.join(" "))}else t.className=e}function _(t,e){var n=t.className;if(n){for(var o=n.split(" "),s=e.split(" "),i=!1,a=0;a<s.length;a++){var l=o.indexOf(s[a]);l>=0&&(o.splice(l,1),i=!0)}i&&(t.className=o.join(" "))}}t.__registerWidget("oj.ojButton",e.oj.baseComponent,{defaultElement:"<button>",widgetEventPrefix:"oj",options:{chroming:"solid",disabled:!1,display:"all",label:null,icons:{start:null,end:null},menu:null,action:null},_InitOptions:function(t,e){this._super(t,e),this._IsCustomElement()&&this._processSlots(),this._initButtonTypes(),this._IsCustomElement()||"disabled"in e||this.option("disabled",!!this.element[0].disabled,{_context:{internalSet:!0}}),"label"in e||(this.keepDomLabel=!0,this.option("label","inputPush"===this.type?this.buttonElement.val():this.buttonElement[0].innerHTML,{_context:{internalSet:!0}})),this._IsCustomElement()||!this.options.menu||e.icons&&void 0!==e.icons.end||this.option("icons.end","oj-component-icon oj-button-menu-dropdown-icon",{_context:{writeback:!0,internalSet:!0}})},_ComponentCreate:function(){this._super(),this.menuEventNamespace=this.eventNamespace+"menu",this._initButtonTypes2(),this.hasTitle=!!this.rootElement.getAttribute("title");var n=this,o=this._isToggle,s=o?"":"oj-active";f(this.rootElement,r),m(this.rootElement,this.options.chroming);var i=function(){s&&n.rootElement.classList.remove(s),n.rootElement.classList.remove("oj-hover"),n._toggleDefaultClasses()};if(this._touchStartHandler=function(){n._IsEffectivelyDisabled()||(s&&n.rootElement.classList.add(s),n._toggleDefaultClasses(),n.document.one("touchend",i))},t.DomUtils.isTouchSupported()&&(this.buttonElement[0].addEventListener("touchstart",this._touchStartHandler,{passive:!0}),this.buttonElement.bind("touchend"+this.eventNamespace+" touchcancel"+this.eventNamespace,i)),this.buttonElement.bind("mouseenter"+this.eventNamespace,function(){n._IsEffectivelyDisabled()||t.DomUtils.recentTouchEnd()||(this===a&&n.rootElement.classList.add("oj-active"),n.rootElement.classList.add("oj-hover"),n.rootElement.classList.remove("oj-default"),n.rootElement.classList.remove("oj-focus-only"))}).bind("mouseleave"+this.eventNamespace,function(){n.rootElement.classList.remove("oj-hover"),n._IsEffectivelyDisabled()||(s&&n.rootElement.classList.remove(s),n._toggleDefaultClasses())}),this._disabledClickHandler=function(t){n._IsEffectivelyDisabled()&&(t.preventDefault(),t.stopImmediatePropagation())},this._ojActionClickHandler=function(t){n._trigger("action",t,{})},this._IsCustomElement()?(this.rootElement.addEventListener("click",this._disabledClickHandler,!0),this.rootElement.addEventListener("click",this._ojActionClickHandler,!1)):this.buttonElement[0].addEventListener("click",this._disabledClickHandler,!0),this._focusable({element:e(this.rootElement),applyHighlight:!0,afterToggle:function(){n._toggleDefaultClasses()}}),o&&(this.element.bind("change"+this.eventNamespace,function(t){n._applyCheckedStateFromDom(!0);var e=n._getEnclosingContainerComponent("buttonset"),o=e&&e._getCheckedFromDom(e.$buttons);e&&void 0!==o&&e.option("checked",o,{_context:{writeback:!0,originalEvent:t,internalSet:!0}})}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(){n._IsEffectivelyDisabled()||(l=this,n.document.one("mouseup",function(){l=null}))}).bind("mouseup"+this.eventNamespace,function(){n._IsEffectivelyDisabled()||this===l&&n.element.focus()})),"checkbox"===this.type)this.buttonElement.bind("click"+this.eventNamespace,function(){if(n._IsEffectivelyDisabled())return!1}),this.element.bind("keyup"+this.eventNamespace,function(t){t.keyCode===e.ui.keyCode.ENTER&&(n._IsEffectivelyDisabled()||n.element.click())});else if("radio"===this.type)this.buttonElement.bind("click"+this.eventNamespace,function(){if(n._IsEffectivelyDisabled())return!1}),this.element.bind("keyup"+this.eventNamespace,function(t){t.keyCode===e.ui.keyCode.ENTER&&(n.element[0].checked||n._IsEffectivelyDisabled()||(n.element[0].checked=!0,n.element.change(),n.element.click()))});else if(this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){if(n._IsEffectivelyDisabled())return!1;1!==e.which||t.DomUtils.recentTouchEnd()||(n.rootElement.classList.add("oj-active"),n.rootElement.classList.remove("oj-default"),n.rootElement.classList.remove("oj-focus-only"),a=this,n.document.one("mouseup",function(){a=null}))}).bind("mouseup"+this.eventNamespace,function(){if(n._IsEffectivelyDisabled())return!1;n.rootElement.classList.remove("oj-active"),n._toggleDefaultClasses()}).bind("keydown"+this.eventNamespace,function(t){if(n._IsEffectivelyDisabled())return t.keyCode===e.ui.keyCode.TAB||t.keyCode===e.ui.keyCode.LEFT||t.keyCode===e.ui.keyCode.RIGHT;var o=t.keyCode===e.ui.keyCode.SPACE,s="anchor"===n.type;s&&o&&t.preventDefault(),(o&&!s||t.keyCode===e.ui.keyCode.ENTER)&&(n.rootElement.classList.add("oj-active"),n.rootElement.classList.remove("oj-default"),n.rootElement.classList.remove("oj-focus-only"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){n.rootElement.classList.remove("oj-active"),n._toggleDefaultClasses()}),"anchor"===this.type){var u=this.buttonElement[0].getAttribute("tabindex");(null===u||isNaN(u))&&this.buttonElement[0].setAttribute("tabindex","0")}this.options.disabled&&this._manageAnchorTabIndex(!1,!0),this._updateEffectivelyDisabled();var h=n._getEnclosingContainerComponent("buttonset");this._IsCustomElement()||h&&h._IsCustomElement()?this._setDisplayOptionOnDom():this._handleLabelAndIconsAtCreateTime(),this._setupMenuButton(null),this._toggleDefaultClasses(),this._childMutationObserver&&this._childMutationObserver.observe()},_NotifyContextMenuGesture:function(t,n,o){this._OpenContextMenu(n,o,{position:{of:"keyboard"===o?e(this.rootElement):n}})},_addMutationObserver:function(){if(!this._childMutationObserver&&this._IsCustomElement()){var t=this;this._childMutationObserver=new s(this.rootElement,function(e){e.forEach(function(e){var n;if("childList"===e.type){var o=e.addedNodes&&e.addedNodes[0],s=e.target;if(o&&3===o.nodeType&&s&&1===s.nodeType&&s.classList.contains("oj-button-label")){t._childMutationObserver.disconnect(),n=!0;var i=t.buttonElement[0].querySelector(".oj-button-text");i&&(i.textContent=o.textContent),o.parentNode.removeChild(o)}}else"characterData"===e.type&&(t._childMutationObserver.disconnect(),n=!0);n&&(t._setDisplayOptionOnDom(),t._childMutationObserver.observe())})})}},_removeMutationObserver:function(){this._childMutationObserver&&(this._childMutationObserver.disconnect(),this._childMutationObserver=null)},_processSlots:function(){var n,o=this,s=this.element[0],i=s.parentNode,a="OJ-MENU-BUTTON"===i.tagName,l=t.BaseCustomElementBridge.getSlotMap(i);n=a?["startIcon","","endIcon","menu"]:["startIcon","","endIcon"],e.each(n,function(t,n){l[n]&&""!==n&&e.each(l[n],function(t,e){s.appendChild(e)})});for(var r=i.children,u=r.length-1;u>=0;u--){var h=r[u];h!==s&&"contextMenu"!==h.getAttribute("slot")&&i.removeChild(h)}var c=t.BaseCustomElementBridge.getSlotMap(s);e.each(n,function(t,n){c[n]&&e.each(c[n],function(t,i){if(s.appendChild(i),""===n){var a=i,l=a;3===a.nodeType&&(l=document.createElement("span"),a.parentNode.insertBefore(l,a),l.appendChild(a)),l.classList.add("oj-button-text"),o._setTextSpanIdAndLabelledBy(l)}else if("startIcon"===n)i.classList.add("oj-button-icon"),i.classList.add("oj-start");else if("endIcon"===n)i.classList.add("oj-button-icon"),i.classList.add("oj-end");else if("menu"===n&&(e(i).uniqueId(),o.menuSlot="#"+i.id,void 0===c.endIcon)){var r=document.createElement("span"),u="oj-button-menu-dropdown-icon";void 0===c.startIcon&&"icons"===o.options.display&&(u="oj-button-menu-dropdown-nostartslot-icon"),r.className="oj-button-icon oj-end oj-component-icon "+u,r.setAttribute("slot","endIcon"),s.insertBefore(r,i)}})});var d=document.createElement("div");for(d.className="oj-button-label";s.hasChildNodes();)d.appendChild(s.firstChild);s.appendChild(d)},_getMenuNode:function(){return this._IsCustomElement()?this.menuSlot:this.options.menu},_initButtonTypes:function(){var t=this.element[0];if("INPUT"===t.tagName&&"checkbox"===t.type)this.type="checkbox",this._isToggle=!0;else if("INPUT"===t.tagName&&"radio"===t.type)this.type="radio",this._isToggle=!0;else if("INPUT"!==t.tagName||"button"!==t.type&&"submit"!==t.type&&"reset"!==t.type)if("BUTTON"===t.tagName)this.type="button";else{if("A"!==t.tagName)throw new Error("JET Button not supported on this element type");this.type="anchor"}else this.type="inputPush";if(this._isToggle){var e="label[for='"+this.element[0].getAttribute("id")+"']";this.buttonElement=this.element.siblings().filter(e)}else this.buttonElement=this.element},_initButtonTypes2:function(){var t=this.element[0];if(this._isToggle){this.buttonElement[0].classList.add("oj-button-label"),t.classList.add("oj-button-input"),t.classList.add("oj-helper-hidden-accessible"),t.setAttribute("data-oj-internal","");var e=document.createElement("span");this.element[0].parentNode.insertBefore(e,this.buttonElement[0]),e.appendChild(this.buttonElement[0]),e.appendChild(this.element[0]),this.rootElement=this.element[0].parentNode,this.rootElement.classList.add("oj-button-jqui"),this.rootElement.classList.add("oj-button-toggle"),t.checked&&(this.rootElement.classList.add("oj-selected"),this.rootElement.classList.remove("oj-default"),this.rootElement.classList.remove("oj-focus-only"))}else this._IsCustomElement()?(this.rootElement=this.element[0].parentNode,t.classList.add("oj-button-button")):(this.rootElement=this.element[0],t.classList.add("oj-button-jqui"))},widget:function(){return e(this.rootElement)},_destroy:function(){this._removeMenuBehavior(this._getMenuNode()),this.buttonElement[0].removeEventListener("click",this._disabledClickHandler,!0),this.buttonElement[0].removeEventListener("click",this._ojActionClickHandler,!1),this.buttonElement[0].removeEventListener("touchstart",this._touchStartHandler,{passive:!0}),delete this._touchStartHandler;var e=this.element[0];e.classList.remove("oj-helper-hidden-accessible"),e.removeAttribute("aria-labelledby"),this.element.removeUniqueId(),this.options.disabled&&this._manageAnchorTabIndex(!0,!1);var n=this._isToggle;n||_(this.rootElement,r+" oj-button-jqui oj-hover oj-active oj-selected "+u+" "+h);var o=this.buttonElement[0].querySelector(".oj-button-text");o&&(this.buttonElement[0].innerHTML=o.innerHTML),n?(this.buttonElement[0].classList.remove("oj-button-label"),t.DomUtils.unwrap(this.element)):this.hasTitle||this.rootElement.removeAttribute("title"),l===this.buttonElement[0]&&(l=null),this.buttonElement.off("blur"),this._removeMutationObserver()},_NotifyDetached:function(){this._super(),this._toggleDefaultClasses()},__setAncestorComponentDisabled:function(t){this._super(t),this._updateEffectivelyDisabled()},_updateEffectivelyDisabled:function(){var t=this.element[0],e=this._IsEffectivelyDisabled();if(e?(this.rootElement.classList.add("oj-disabled"),this.rootElement.classList.remove("oj-enabled")):(this.rootElement.classList.remove("oj-disabled"),this.rootElement.classList.add("oj-enabled")),"anchor"!==this.type?(t.disabled=e,this.rootElement.removeAttribute("aria-disabled")):(t.setAttribute("aria-disabled",e),this._IsCustomElement()&&this.rootElement.removeAttribute("aria-disabled")),e){var n=this.widget()[0].classList;n.remove("oj-active"),n.remove("oj-default"),n.remove("oj-focus-only"),n.remove("oj-hover"),n.remove("oj-focus"),n.remove("oj-focus-highlight"),a=null,this._dismissMenu(this._getMenuNode())}else this._toggleDefaultClasses()},_setOption:function(t,e,n){var o=this.options[t];switch(this._super(t,e,n),t){case"chroming":m(this.rootElement,e);break;case"disabled":this._manageAnchorTabIndex(o,e),this._updateEffectivelyDisabled();var s=this._getEnclosingContainerElement("toolbar");s.length&&(this._IsCustomElement()?s[0].refresh():s.ojToolbar("refresh"));break;case"label":this._setLabelOption();break;case"display":"inputPush"!==this.type&&this._setDisplayOptionOnDom();break;case"icons":this._setIconsOption(!0);break;case"menu":this._setupMenuButton(o)}},refresh:function(){this._super(),this._ancestorDisabled&&!this._getEnclosingContainerElement("buttonset").length&&this.__setAncestorComponentDisabled(!1),m(this.rootElement,this.options.chroming)},_applyCheckedStateFromDom:function(t){"radio"===this.type?(t?b(this.element[0]):this.element).each(function(){var t=e(this).data("oj-ojButton");this.checked?(t.rootElement.classList.add("oj-selected"),t.rootElement.classList.remove("oj-default"),t.rootElement.classList.remove("oj-focus-only")):(t.rootElement.classList.remove("oj-selected"),t._toggleDefaultClasses())}):"checkbox"===this.type&&(this.element[0].checked?(this.rootElement.classList.add("oj-selected"),this.rootElement.classList.remove("oj-default"),this.rootElement.classList.remove("oj-focus-only")):(this.rootElement.classList.remove("oj-selected"),this._toggleDefaultClasses()))},_handleLabelAndIconsAtCreateTime:function(){if("inputPush"===this.type)this._setLabelOnDomOfSpanlessButton();else{var t=this._setLabelOnDomAtCreateTime(),e=this._setIconOnDom(!0),n=this._setIconOnDom(!1);this._setDisplayOptionOnDom(t,e,n)}},_setLabelOnDomAtCreateTime:function(){var t=this.buttonElement[0],n=document.createElement("span");if(n.className="oj-button-text",this.keepDomLabel)for(;t.hasChildNodes();)n.appendChild(t.firstChild);else t.innerHTML="",n.textContent=this.options.label;if("button"===this.type){var o=document.createElement("div");o.className="oj-button-label",o.appendChild(n),this.element[0].appendChild(o)}else t.appendChild(n);return"button"!==this.type&&"anchor"!==this.type||this.element[0].hasAttribute("aria-label")||this.element[0].hasAttribute("aria-labelledby")||this._setTextSpanIdAndLabelledBy(n),e(n)},_setTextSpanIdAndLabelledBy:function(t){e(t).uniqueId(),this.element[0].hasAttribute("aria-label")||this.element[0].hasAttribute("aria-labelledby")||this.element[0].setAttribute("aria-labelledby",t.getAttribute("id"))},_setLabelOption:function(){if("inputPush"===this.type)this._setLabelOnDomOfSpanlessButton();else{var t=this.buttonElement[0].querySelector(".oj-button-text");t.textContent=this.options.label,this._setDisplayOptionOnDom(e(t))}},_setLabelOnDomOfSpanlessButton:function(){this.options.label&&this.element.val(this.options.label)},_setIconsOption:function(){if("inputPush"!==this.type){var t=this._setIconOnDom(!0),e=this._setIconOnDom(!1);this._setDisplayOptionOnDom(void 0,t,e)}},_setIconOnDom:function(t){var e,n,o,s,i=this.buttonElement[0];"button"===this.type&&(i=this.element.children("div.oj-button-label")[0]),t?(e=".oj-button-icon.oj-start",n="oj-button-icon oj-start",o=this.options.icons.start,s="_lastStartIcon"):(e=".oj-button-icon.oj-end",n="oj-button-icon oj-end",o=this.options.icons.end,s="_lastEndIcon");var a,l,r=i.querySelectorAll(e);if(o)if(r.length){var u=this[s];for(a=0;a<r.length;a++)_(l=r[a],u),f(l,o)}else{var h=document.createElement("span");h.className=n+" "+o,t?i.insertBefore(h,i.firstChild):i.appendChild(h)}else for(a=0;a<r.length;a++)(l=r[a]).parentNode.removeChild(l);return this[s]=o,!!o},_setDisplayOptionOnDom:function(t,n,o){var s=this.buttonElement.children(".oj-button-label");if(!s.length){var i=this._getEnclosingContainerComponent("buttonset");s=this._IsCustomElement()||i&&i._IsCustomElement()?this.buttonElement.children("oj-option"):this.buttonElement}void 0===t&&(t=s.children(".oj-button-text")),void 0===n&&(n=!!this.options.icons.start||s.children("[slot='startIcon']").length),void 0===o&&(o=!!this.options.icons.end||s.children("[slot='endIcon']").length);var a,l=n&&o,r=n||o,h="icons"===this.options.display;if(r&&h){if(t[0]&&t[0].classList.add("oj-helper-hidden-accessible"),!this.hasTitle){var c=t[0]?t[0].textContent:"";this.rootElement.setAttribute("title",e.trim(c))}this._addMutationObserver()}else t[0]&&t[0].classList.remove("oj-helper-hidden-accessible"),this.hasTitle||this.rootElement.removeAttribute("title"),this._removeMutationObserver();a=r?h?l?"oj-button-icons-only":"oj-button-icon-only":l?"oj-button-text-icons":n?"oj-button-text-icon-start":"oj-button-text-icon-end":"oj-button-text-only",_(this.rootElement,u),this.rootElement.classList.add(a)},_manageAnchorTabIndex:function(t,e){if(!t!=!e&&"anchor"===this.type&&!this._getEnclosingContainerElement("buttonset").length&&!this._getEnclosingContainerElement("toolbar").length){var n=this.element[0];if(e){var o=n.getAttribute("tabindex");this._oldAnchorTabIndex=this._isInteger(Number(o))?o:null,n.setAttribute("tabindex",-1)}else null==this._oldAnchorTabIndex?n.removeAttribute("tabindex"):n.setAttribute("tabindex",this._oldAnchorTabIndex)}},_isInteger:function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},_selectorMap:{buttonset:".oj-buttonset",toolbar:".oj-toolbar"},_constructorMap:{buttonset:"ojButtonset",toolbar:"ojToolbar"},_getEnclosingContainerElement:function(t){return e(this.rootElement).closest(this._selectorMap[t])},_getEnclosingContainerComponent:function(t){var e=this._getEnclosingContainerElement(t)[0],n=o.__GetWidgetConstructor(e,this._constructorMap[t]);return n&&n("instance")},_setupMenuButton:function(t){if(this._getMenuNode()&&"INPUT"===this.element[0].tagName)throw new Error("Menu Button functionality is not supported on input elements.");if(this._removeMenuBehavior(t),this._getMenuNode()){var n=this;this.element.attr("aria-haspopup",!0).on("keydown"+this.menuEventNamespace,function(t){if(t.which===e.ui.keyCode.DOWN)return n._toggleMenu(t,"firstItem"),t.preventDefault(),!0;if(t.which===e.ui.keyCode.ESCAPE){var o=!n.rootElement.classList.contains("oj-selected");return n._dismissMenu(n._getMenuNode(),t),o}return!0}).on("click"+this.menuEventNamespace,function(t){var e=n._getMenu();return e.__spaceEnterDownInMenu||n._toggleMenu(t,"firstItem"),e.__spaceEnterDownInMenu=!1,t.preventDefault(),!0})}},_removeMenuBehavior:function(t){this.element.removeAttr("aria-haspopup").off(this.menuEventNamespace),this._dismissMenu(t),e(t).off(this.menuEventNamespace),this._menuListenerSet=!1},_getMenu:function(){var t=this._getMenuOnly(this._getMenuNode());if(!t)throw new Error('JET Button: "menu" option specified, but does not reference a valid JET Menu.');if(!this._menuListenerSet){var e,n=this;e=t._IsCustomElement()?"ojClose":"ojclose",t.widget().on(e+this.menuEventNamespace,function(t){n._menuDismissHandler(t)}),this._menuListenerSet=!0}return t},_getMenuOnly:function(t){var n=o.__GetWidgetConstructor(e(t)[0],"ojMenu");return n&&n("instance")},_toggleMenu:function(t,e){if(!this._IsEffectivelyDisabled()){var n=this._getMenu(),o=n.widget();this._menuVisible?this._dismissMenu(this._getMenuNode(),t):(n.open(t,{launcher:this.element,initialFocus:e}),o.is(":visible")&&(this._menuVisible=!0,o[0].getAttribute("aria-label")||o[0].getAttribute("aria-labelledby")||(this.element.uniqueId(),this._setAriaLabelledBy=!0,o[0].setAttribute("aria-labelledby",this.element[0].getAttribute("id"))),this.rootElement.classList.add("oj-selected"),this.rootElement.classList.remove("oj-default"),this.rootElement.classList.remove("oj-focus-only")))}},_dismissMenu:function(t,e){if(this._menuVisible){var n=this._getMenuOnly(t);n&&(n.__collapseAll(e,!0),n.__dismiss(e))}},_menuDismissHandler:function(){this._setAriaLabelledBy&&(e(this._getMenuNode()).removeAttr("aria-labelledby"),this._setAriaLabelledBy=!1),this.rootElement.classList.remove("oj-selected"),this._toggleDefaultClasses(),this._menuVisible=!1},_toggleDefaultClasses:function(){var t,n;if(e(this.rootElement).is(".oj-hover, .oj-active, .oj-selected, .oj-disabled"))t=!1,n=!1;else{var o=e(this.rootElement).is(".oj-focus");t=!o,n=o}t?this.rootElement.classList.add("oj-default"):this.rootElement.classList.remove("oj-default"),n?this.rootElement.classList.add("oj-focus-only"):this.rootElement.classList.remove("oj-focus-only")}}),t.__registerWidget("oj.ojButtonset",e.oj.baseComponent,{_items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a",widgetEventPrefix:"oj",options:{checked:null,chroming:"solid",display:"all",focusManagement:"oneTabstop",labelledBy:null,describedBy:null},_setCheckedOnDom:function(t,n){var o,s=e.type(t),i=this.element[0];if((o="OJ-BUTTONSET-MANY"===i.tagName||n.length>0&&n.filter("input[type=checkbox]").length===n.length)&&"array"!==s)throw new Error("Invalid 'checked' value set on JET Buttonset: "+t);if(!(this._setCheckedOnButtons(t,n,s,o)||null===t||this._IsCustomElement()&&n.length!==i.children.length))throw new Error("Invalid 'checked' value set on JET Buttonset: "+t)},_setCheckedOnButtons:function(t,e,n,o){var s=this._shallowCompare(t,e,o);return this._shouldDeepCompare(t,o,s)&&(s=this._deepCompare(t,e,o,s)),o?s===t.length:1===s},_shallowCompare:function(t,e,n){var o=this,s=0;return e.each(function(){var e=o._getInputValue(this);(n?t.indexOf(e)>-1:e===t)?(this.checked=!0,s+=1):this.checked=!1}),s},_shouldDeepCompare:function(t,e,n){return e?n!==t.length:!n},_deepCompare:function(t,e,n,o){var s=o,i=this;return e.each(function(){var e=i._getInputValue(this);if(n)for(var o=0;o<t.length;o++)i._deepCompareValues(e,t[o])&&(this.checked=!0,s+=1);else i._deepCompareValues(e,t)&&(this.checked=!0,s+=1)}),s},_deepCompareValues:function(n,o){return"object"===e.type(n)&&n.ojCompareValues?0===n.ojCompareValues(n,o):t.Object.compareValues(n,o)},_getInputValue:function(t){return this._IsCustomElement()?this._getOjOptionFromInput(t).value:t.value},_getOjOptionFromInput:function(t){return t.previousElementSibling.children[0]},_getCheckedFromDom:function(t){var e,n=null,o=null,s=this;return t.each(function(){if("input"!==this.tagName.toLowerCase())return e=void 0,!1;var t,i,a=this.type.toLowerCase();if("radio"===a)t=!0,i=this.name.toLowerCase();else{if("checkbox"!==a)return e=void 0,!1;t=!1,i=null}if(void 0!==e&&(t!==n||i!==o||n&&!o))return e=void 0,!1;var l=s._getInputValue(this);void 0===e?(e=t?this.checked?l:null:this.checked?[l]:[],n=t,o=i):this.checked&&(n?e=l:e.push(l))}),e},_CompareOptionValues:function(t,n,o){return"checked"===t?n===o||"array"===e.type(n)&&"array"===e.type(o)&&this._compareArraysAsSets(n,o):this._superApply(arguments)},_compareArraysAsSets:function(t,e){return!t.some(function(t){return e.indexOf(t)<0})&&!e.some(function(e){return t.indexOf(e)<0})},_removeNonOjOptions:function(){this.element.children(":not(oj-option)").remove()},_processOjOptions:function(){var t=this,n=this.element[0].querySelectorAll("oj-option");e.each(n,function(e,n){n.customOptionRenderer=t._customOptionRenderer.bind(t)})},_customOptionRenderer:function(t){this._removeOptionDecoration(t),this._addOptionDecoration(t)},_addOptionDecoration:function(t){this._addOptionClasses(t);var n="OJ-BUTTONSET-ONE"===this.element[0].tagName,o=n?"radio":"checkbox",s=t.value,i=t.disabled,a=document.createElement("input"),l=document.createElement("label");e(a).uniqueId(),a.value=s,a.type=o,a.disabled=i;var r=a.id;l.htmlFor=r,n&&(this._name||(this._name="_n_"+r),a.name=this._name),t.parentNode.insertBefore(l,t),l.appendChild(t),l.parentNode.insertBefore(a,l.nextElementSibling),this._setup(!1),this._setCheckedOnDom(this.options.checked,this.$buttons),this.$buttons.each(function(){e(this).data("oj-ojButton")._applyCheckedStateFromDom(!1)})},_removeOptionDecoration:function(t){var n=t.parentNode;if("LABEL"===n.tagName){this._removeOptionClasses(t);var o=e(n).siblings(".oj-button-input");o.ojButton("destroy"),o.removeUniqueId(),o.remove(),n.parentNode.insertBefore(t,n),n.parentNode.removeChild(n)}},_addOptionClasses:function(e){var n=t.BaseCustomElementBridge.getSlotMap(e),o=n[""]?n[""]:null,s=n.startIcon?n.startIcon[0]:null,i=n.endIcon?n.endIcon[0]:null;if(s&&(s.classList.add("oj-button-icon"),s.classList.add("oj-start")),o)for(var a=0;a<o.length;a++){var l=o[a],r=l;3===l.nodeType&&(r=document.createElement("span"),l.parentNode.insertBefore(r,l),r.appendChild(l)),r.classList.add("oj-button-text")}i&&(i.classList.add("oj-button-icon"),i.classList.add("oj-end"))},_removeOptionClasses:function(e){var n=t.BaseCustomElementBridge.getSlotMap(e),o=n[""]?n[""]:null,s=n.startIcon?n.startIcon[0]:null,i=n.endIcon?n.endIcon[0]:null;if(s&&(s.classList.remove("oj-button-icon"),s.classList.remove("oj-start")),o)for(var a=0;a<o.length;a++)o[a].classList.remove("oj-button-text");i&&(i.classList.remove("oj-button-icon"),i.classList.remove("oj-end"))},_InitOptions:function(t,n){if(this._super(t,n),this.$buttons=this.element.find(this._items),!("checked"in n)){this.initCheckedFromDom=!0;var o=this._getCheckedFromDom(this.$buttons);"array"!==e.type(o)&&"OJ-BUTTONSET-MANY"!==this.element[0].tagName||(this.options.checked=[]),void 0!==o&&this.option("checked",o,{_context:{internalSet:!0}})}},_ComponentCreate:function(){this._super();var t=this.element[0];t.setAttribute(o._OJ_CONTAINER_ATTR,this.widgetName),t.classList.add("oj-buttonset"),t.classList.add("oj-component"),this._setRole(this.options.focusManagement),this._IsCustomElement()&&(this._removeNonOjOptions(),this._processOjOptions()),this._setup(!0)},_NotifyContextMenuGesture:function(t,e,n){var o=this.element.find(":oj-button[tabindex=0]");this._OpenContextMenu(e,n,{launcher:o,position:{of:"keyboard"===n?o.ojButton("widget"):e}})},_propagateDisabled:function(t){var n=!!t;this.$buttons.each(function(){e(this).data("oj-ojButton").__setAncestorComponentDisabled(n)})},_setRole:function(t){var e=this.element[0];"oneTabstop"===t?e.setAttribute("role","toolbar"):e.removeAttribute("role")},_setOption:function(t,n,o){var s=this.options[t];if(this._superApply(arguments),"disabled"===t){this._propagateDisabled(n),this._refreshTabStop();var i=e(this.element).closest(".oj-toolbar");i.length&&(this._IsCustomElement()?i[0].refresh():i.ojToolbar("refresh"))}else if("checked"===t)this._setCheckedOnDom(n,this.$buttons),this.$buttons.each(function(){e(this).data("oj-ojButton")._applyCheckedStateFromDom(!1)});else if("focusManagement"===t)this._setRole(n);else if("chroming"===t)m(this.element[0],n),this.$buttons.ojButton("refresh");else if("display"===t)this.$buttons.ojButton("option",t,n);else if("labelledBy"===t){var a=this.element;this._labelledByUpdatedForSet(a[0].id,s,n,a)}else"describedBy"===t&&this._describedByUpdated(s,n)},refresh:function(){this._super(),this._IsCustomElement()&&this._processOjOptions(),this._setup(!1)},_setup:function(t){var n=this,o=this.element[0];this.isRtl="rtl"===this._GetReadingDirection(),m(o,this.options.chroming),!t||this.initCheckedFromDom||this._IsCustomElement()||this._setCheckedOnDom(this.options.checked,this.$buttons),t||(this.$buttons=this.element.find(this._items)),this.$buttons.length>1?o.classList.add("oj-buttonset-multi"):o.classList.remove("oj-buttonset-multi"),this.$buttons.filter(":oj-button").ojButton("refresh").each(function(){e(this).data("oj-ojButton")._applyCheckedStateFromDom(!1)}).end().not(":oj-button").ojButton({display:this.options.display}).end();for(var s=0,i=this.$buttons.length;s<i;s++){var a=this.$buttons.eq(s).ojButton("widget")[0];a.classList.remove("oj-buttonset-first"),a.classList.remove("oj-buttonset-last"),0===s?a.classList.add("oj-buttonset-first"):s===i-1&&a.classList.add("oj-buttonset-last")}this._propagateDisabled(this.options.disabled),"oneTabstop"===this.options.focusManagement&&(this.$buttons.unbind("keydown"+this.eventNamespace).bind("keydown"+this.eventNamespace,function(t){n._handleKeyDown(t,e(this))}).unbind("click"+this.eventNamespace).bind("click"+this.eventNamespace,function(){e(this).data("oj-ojButton")._IsEffectivelyDisabled()||n._setTabStop(e(this))}).unbind("focus"+this.eventNamespace).bind("focus"+this.eventNamespace,function(){n._setTabStop(e(this))}),this.$enabledButtons=this.$buttons.filter(function(){return!e(this).data("oj-ojButton")._IsEffectivelyDisabled()}),this._initTabindexes(t)),this.element.uniqueId(),this._labelledByUpdatedForSet(o.id,null,this.options.labelledBy,this.element);var l=this.options.describedBy;l&&this._describedByUpdated(l)},_labelledByUpdatedForSet:i._labelledByUpdatedForSet,_describedByUpdated:i._describedByUpdated,_GetContentElement:function(){return null!=this.$buttons?this.$buttons:(this.$buttons=this.element.find(this._items),this.$buttons)},_refreshTabStop:function(){"oneTabstop"===this.options.focusManagement&&(this.$enabledButtons=this.$buttons.filter(function(){return!e(this).data("oj-ojButton")._IsEffectivelyDisabled()}),this._initTabindexes(!1))},_initTabindexes:function(t){var n,o=e(this._lastTabStop);this._lastTabStop=void 0,this.$buttons.attr("tabindex","-1"),n=t||!o.is(this.$enabledButtons)?this.$enabledButtons.first():o,this._setTabStop(n)},_mapToTabbable:function(t){var e=this.$enabledButtons;return t.map(function(t,n){if("radio"!==n.type||n.checked||""===n.name)return n;var o=b(n,e).filter(":checked");return o.length?o[0]:n})},_setTabStop:function(t){var e=(t=this._mapToTabbable(t))[0],n=this._lastTabStop;e!==n&&(n&&n.setAttribute("tabindex","-1"),t[0]&&t[0].setAttribute("tabindex","0"),this._lastTabStop=e)},_handleKeyDown:function(t,n){switch(t.which){case e.ui.keyCode.UP:case e.ui.keyCode.DOWN:if("radio"!==n[0].getAttribute("type"))break;case e.ui.keyCode.LEFT:case e.ui.keyCode.RIGHT:t.preventDefault();var o=this.$enabledButtons,s=o.length;if(s<2)break;var i=(o.index(n)+(t.which===e.ui.keyCode.DOWN||t.which===e.ui.keyCode.RIGHT!==this.isRtl?1:-1)+s)%s;o.eq(i).focus()}},_destroy:function(){var t=this.element[0];_(t,"oj-buttonset oj-component "+h),t.removeAttribute(o._OJ_CONTAINER_ATTR),t.removeAttribute("role"),"oneTabstop"===this.options.focusManagement&&this.$buttons.attr("tabindex","0"),this.$buttons.map(function(){return e(this).ojButton("widget")[0]}).removeClass("oj-buttonset-first oj-buttonset-last").end().ojButton("destroy")}}),o.setDefaultOptions({ojButton:{chroming:o.createDynamicPropertyGetter(function(t){return p("button",t.element,t.containers)})},ojButtonset:{chroming:o.createDynamicPropertyGetter(function(t){return p("buttonset",t.element,t.containers)})}})}(),a.extension._WIDGET_NAME="ojButton",a.extension._TRACK_CHILDREN="nearestCustomElement",a.extension._GLOBAL_TRANSFER_ATTRS=["href","aria-label","aria-labelledby"],t.CustomElementBridge.register("oj-button",{metadata:a,innerDomFunction:function(t){return t.getAttribute("href")?"a":"button"}}),u.extension._WIDGET_NAME="ojButton",u.extension._TRACK_CHILDREN="nearestCustomElement",u.extension._GLOBAL_TRANSFER_ATTRS=["href","aria-label","aria-labelledby"],t.CustomElementBridge.register("oj-menu-button",{metadata:u,innerDomFunction:function(t){return t.getAttribute("href")?"a":"button"}}),r.extension._WIDGET_NAME="ojButtonset",r.extension._ALIASED_PROPS={value:"checked"},t.CustomElementBridge.register("oj-buttonset-one",{metadata:r}),l.extension._WIDGET_NAME="ojButtonset",l.extension._ALIASED_PROPS={value:"checked"},t.CustomElementBridge.register("oj-buttonset-many",{metadata:l})});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojmenu',["ojs/ojcore","jquery","hammerjs","ojs/ojcontext","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojanimation","ojs/ojlogger","ojs/ojconfig","ojs/ojjquery-hammer","ojs/ojpopupcore","ojs/ojoption"],function(e,t,i,n,s,o,r,a,l){"use strict";var u={properties:{disabled:{type:"boolean",value:!1},openOptions:{type:"object",properties:{display:{type:"string",enumValues:["auto","dropDown","sheet"],value:"auto"},initialFocus:{type:"string",enumValues:["firstItem","menu","none"],value:"menu"},launcher:{type:"string|Element"},position:{type:"object",properties:{at:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"]},vertical:{type:"string",enumValues:["bottom","center","top"]}}},collision:{type:"string",enumValues:["fit","flip","flipcenter","flipfit","none"],value:"flipfit"},my:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"],value:"start"},vertical:{type:"string",enumValues:["bottom","center","top"],value:"top"}}},of:{type:"string|object"},offset:{type:"object",properties:{x:{type:"number",value:0},y:{type:"number",value:0}}}}}}},translations:{type:"object",value:{},properties:{ariaFocusSkipLink:{type:"string"},labelCancel:{type:"string"}}}},methods:{refresh:{},close:{},open:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{},ojBeforeOpen:{},ojClose:{},ojOpen:{},ojAction:{}},extension:{}};
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(){var u=[],c=!1,h="oj-menu-position",m=e.AgentUtils.getAgentInfo().os===e.AgentUtils.OS.MAC&&e.AgentUtils.getAgentInfo().browser===e.AgentUtils.BROWSER.SAFARI,d=s.parseJSONFromFontFamily("oj-menu-config")||{},p="menuItem"===d.sheetCancelAffordance,f="dismiss"===d.sheetSwipeDownBehavior,_=d.dropDownModality||"modeless",v=d.sheetModality||"modal",g="bottom-"+(d.sheetMarginBottom||0),O=f&&{recognizers:[[i.Swipe,{direction:i.DIRECTION_DOWN}]]};function b(e){var i,n=[],s=e.children("oj-defer").first();i=s.length>0?s.children(".oj-menu-item, oj-menu-select-many"):e.children(".oj-menu-item, oj-menu-select-many");for(var o=0;o<i.length;o++){var r=t(i[o]);r.is(".oj-menu-item")?n.push(r[0]):"OJ-MENU-SELECT-MANY"===r[0].nodeName&&(n=t.merge(n,r.children(".oj-menu-item")))}return n}e.__registerWidget("oj.ojMenu",t.oj.baseComponent,{defaultElement:"<ul>",delay:300,role:"menu",widgetEventPrefix:"oj",options:{menuSelector:"ul",openOptions:{display:"auto",initialFocus:"menu",launcher:null,position:{my:{horizontal:"start",vertical:"top"},offset:{x:0,y:0},at:{horizontal:"start",vertical:"bottom"},of:void 0,collision:"flipfit"}},submenuOpenOptions:{position:{my:"start top",at:"end top",collision:"flipfit"}},animateStart:null,animateEnd:null,beforeOpen:null,close:null,open:null,action:null},_ComponentCreate:function(){if(this._super(),this._focusForTesting=this._focus,this._nextForTesting=this._next,this._selectForTesting=this._select,this._IsCustomElement()){this.element.hide();var t=this.options;t.openOptions.position=e.PositionUtils.coerceToJet(t.openOptions.position);var i=this.element[0].querySelector("oj-defer");i&&i.setAttribute("data-oj-context",!0)}else this._createAsTopLevelMenu()},_createAsTopLevelMenu:function(){var e=this;this.activeMenu=this.element,this.mouseHandled=!1,this._setupSwipeBehavior(),this.element.uniqueId().addClass("oj-menu oj-component").hide().attr({role:this.role,tabIndex:"0","aria-hidden":"true"}),this._on(!0,{"mousedown .oj-menu-item":function(e){this.options.disabled&&e.preventDefault()},click:function(e){this.options.disabled&&e.preventDefault()},keydown:function(e){this.options.disabled&&(e.keyCode!==t.ui.keyCode.ESCAPE&&e.keyCode!==t.ui.keyCode.TAB||(e.keyCode===t.ui.keyCode.TAB&&e.preventDefault(),this._focusLauncherAndDismiss(e)))}}),this.options.disabled&&this.element.addClass("oj-disabled").attr("aria-disabled","true");var i=function(e){if(!this.focusHandled){this.focusHandled=!0;var i=t(e.currentTarget);try{this._focusIsFromPointer=!0,this._focus(e,i)}finally{this._focusIsFromPointer=!1}}}.bind(this),n=function(e){t(e.target).is(":visible")&&this._collapse(e,"eventSubtree")}.bind(this);this._touchStartHandler=function(){this.focusHandled=!1},this.element[0].addEventListener("touchstart",this._touchStartHandler,{passive:!0}),this._delegatedHandleMouseEnterMenuItem=function(e){const n=e.currentTarget,s=e.target.closest(".oj-menu-item");s&&n.contains(s)&&i(t.Event(e,{currentTarget:s}))},this.element[0].addEventListener("touchstart",this._delegatedHandleMouseEnterMenuItem,{passive:!0}),this._on({"click .oj-disabled > a":function(e){e.preventDefault()},click:function(){this.mouseHandled=!1},mouseover:function(){this.focusHandled=!1},"click .oj-menu-item:has(a)":function(e){var i=t(e.target).closest(".oj-menu-item");if(!this.mouseHandled&&i.not(".oj-disabled").length){if(this.mouseHandled=!0,e.preventDefault(),this.active&&this.active.closest(i).length&&this.active.get(0)!==i.get(0))return;i.has(".oj-menu").length?this._expand(e):(this._select(e),this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".oj-menu").length&&this._clearTimer&&this._clearTimer()))}},"mouseenter .oj-menu-item":i,mouseleave:n,"mouseleave .oj-menu":n,focus:function(e,i){if(!(i||e.target===this.element[0]||this._focusSkipLink&&e.target===this._focusSkipLink.getLink()[0])){var n=this.active||t(b(this.element)).first(0);this._focus(e,n)}},keydown:this._keydown,keyup:function(e){e.keyCode!==t.ui.keyCode.ENTER&&e.keyCode!==t.ui.keyCode.SPACE||(this.__spaceEnterDownInMenu=!1)}}),this._focusable({applyHighlight:!m,recentPointer:function(){return e._focusIsFromPointer},setupHandlers:function(t,i){e._focusInHandler=t,e._focusOutHandler=i}}),this._usingCallback=t.proxy(this._usingHandler,this),this._setup()},_createAsSubmenu:function(){this.element.attr(o._OJ_CONTAINER_ATTR,this.widgetName),this.element.uniqueId().addClass("oj-menu oj-component oj-menu-submenu oj-menu-dropdown").hide().attr({role:this.role,tabIndex:"0","aria-hidden":"true"}),this._setup()},__contextMenuPressHoldJustEnded:function(e){if(!arguments.length)return c;c=e},_processOjOptions:function(){this._maxEndIconCount=0,this._maxStartIconCount=0,this._startIconWidth=0,this._endIconWidth=0;var e=function(e){var i,n=[],s=e.children("oj-defer").first();i=s.length>0?s.children("oj-option, oj-menu-select-many"):e.children("oj-option, oj-menu-select-many");for(var o=0;o<i.length;o++){var r=t(i[o]);"OJ-OPTION"===r[0].nodeName?n.push(r[0]):"OJ-MENU-SELECT-MANY"===r[0].nodeName&&(n=t.merge(n,r.children("oj-option")))}return t(n)}(this.element);this._clearOption(e);for(var i=0;i<e.length;i++){e[i].customOptionRenderer=this._customOptionRenderer.bind(this)}},_customOptionRenderer:function(i){function n(e){if(e.previousElementSibling&&"OJ-OPTION"===e.previousElementSibling.nodeName)return e.previousElementSibling;if(e.previousElementSibling&&"OJ-MENU-SELECT-MANY"===e.previousElementSibling.nodeName){var t=e.previousElementSibling.lastElementChild;return"OJ-OPTION"===t.nodeName?t:t.previousElementSibling?t.previousElementSibling:n(t)}return e.previousElementSibling||"OJ-MENU-SELECT-MANY"!==e.parentElement.nodeName?void 0:n(e.parentElement)}function s(e){return e.nextElementSibling&&"OJ-OPTION"===e.nextElementSibling.nodeName?e.nextElementSibling:e.nextElementSibling&&"OJ-MENU-SELECT-MANY"===e.nextElementSibling.nodeName?e.nextElementSibling.firstElementChild:e.nextElementSibling&&"OJ-OPTION"===e.nextElementSibling.nodeName||"OJ-MENU-SELECT-MANY"!==e.parentElement.nodeName?void 0:s(e.parentElement)}var o=t(i),r="OJ-MENU-SELECT-MANY"===o.parent().prop("nodeName"),a=this;this._hasSubmenus=!1;for(var l,u,c,h,m=o.children('a[ojmenu="opt"]'),d=0;d<m.length;d++)(l=t(m[d])).children().removeClass("oj-menu-item-icon").removeClass("oj-menu-item-end-icon"),l.replaceWith(l.contents());if(o.children('span[ojmenu="opt"]').remove(),/[^\-\u2014\u2013\s]/.test(o.text())){this._initMenuItems(o);var p=document.createElement("a");p.setAttribute("href","#"),p.setAttribute("ojmenu","opt"),(l=t(p)).uniqueId().attr({tabIndex:"-1",role:this._itemRole(o)}),r&&(l.attr("aria-checked","false"),(u=i).previousElementSibling||n(u)||t(u).addClass("oj-top"),u.nextElementSibling&&"OJ-OPTION"===u.nextElementSibling.nodeName||s(u)||t(u).addClass("oj-bottom")),o.prepend(p);var f=e.BaseCustomElementBridge.getSlotMap(i),_=f.startIcon;if(_||r){if(r){var v=document.createElement("span");v.setAttribute("slot","startIcon"),v.setAttribute("ojmenu","opt"),v.setAttribute("class","oj-menucheckbox-icon"),_?_.splice(0,0,v):_=[v]}var g=_.length;a._maxStartIconCount=Math.max(a._maxStartIconCount,g),t.each(_,function(e,i){t(i).addClass("oj-menu-item-icon"),l.append(i),g>1&&a._positionStartIcon(i,e,g)})}var O=0,b=f.endIcon;b&&(O=b.length,a._maxEndIconCount=Math.max(a._maxEndIconCount,O));var j=f[""];t.each(j,function(e,i){t(i).is("oj-menu")?(a._setupSubmenu(l,t(i),0===O),a._hasSubmenus=!0):l.append(i)}),b&&t.each(b,function(e,i){t(i).addClass("oj-menu-item-end-icon"),l.append(i),O>1&&a._positionEndIcon(i,e,O)}),i.disabled?(o.addClass("oj-disabled"),l.attr("aria-disabled","true")):(o.removeClass("oj-disabled"),l.removeAttr("aria-disabled"))}else this._initDividers(o),(h=n(c=i))&&t(h).addClass("oj-menu-item-before-divider"),(h=s(c))&&t(h).addClass("oj-menu-item-after-divider");this._updateMenuPadding(this.element)},_positionStartIcon:function(e,i,n){var s;s=this.isRtl?"margin-right":"margin-left";var o=Number(t(e).attr("data-oj-default-margin"));isNaN(o)&&(o=parseInt(t(e).css(s),10),t(e).attr("data-oj-default-margin",o)),this._startIconWidth=-1*o,t(e).css(s,o*(n-i)+"px")},_positionEndIcon:function(e,i,n){var s,o;this.isRtl?(s="margin-left",o="margin-right"):(s="margin-right",o="margin-left");var r=Number(t(e).attr("data-oj-default-margin"));isNaN(r)&&(r=parseInt(t(e).css(s),10),t(e).attr("data-oj-default-margin",r)),this._endIconWidth=-1*parseInt(t(e).css(o),10),t(e).css(s,r+this._endIconWidth*(n-i-1)+"px")},_updateMenuPadding:function(e){var i=t(b(e)).children(),n=i.children(".oj-menu-item-icon:not(.oj-menu-cancel-icon)").length;e.toggleClass("oj-menu-icons",!!n).toggleClass("oj-menu-text-only",!n),this._maxStartIconCount&&this._maxStartIconCount>1&&this._applyAnchorIconPadding(i,this._startIconWidth,this._maxStartIconCount,!0);var s=i.children(".oj-menu-item-end-icon").length;e.toggleClass("oj-menu-end-icons",!!s),this._maxEndIconCount&&this._maxEndIconCount>1&&this._applyAnchorIconPadding(i,this._endIconWidth,this._maxEndIconCount,!1)},_applyAnchorIconPadding:function(e,i,n,s){var o;o=this.isRtl&&s||!this.isRtl&&!s?"padding-right":"padding-left",e.each(function(){var e=Number(t(this).attr("data-oj-default-padding"));isNaN(e)&&(e=parseInt(t(this).css(o),10),t(this).attr("data-oj-default-padding",e)),t(this).css(o,e+i*(n-1)+"px")})},_clickAwayHandler:function(e){if("focus"===e.type||"mousedown"===e.type||"touchstart"===e.type||121===e.keyCode&&e.shiftKey||93===e.keyCode){if("mousedown"===e.type&&c)return;var i=this,n=u.slice(0,u.length);t.each(n,function(n,s){if(!t(e.target).closest(s.element).length&&("keydown"===e.type||"mousedown"===e.type&&3===e.which||!t(e.target).closest(s._launcher).length||s._launcherClickShouldDismiss&&("mousedown"===e.type&&3!==e.which||"touchstart"===e.type))&&!s._dismissEvent){s._dismissEvent=e;var o=s._collapse(e,"eventSubtree");i._runOnPromise(o,function(){s.__dismiss(e),s._dismissEvent=null})}})}},_setOption:function(e,t){switch(this._superApply(arguments),e){case"translations":this._cancelAnchor&&this._cancelAnchor.text(this.options.translations.labelCancel)}},_destroy:function(){this.element.is(":visible")&&this.__dismiss(),this._setWhenReady("none"),this._clearTimer&&this._clearTimer(),delete this._clearTimer,this.element[0].removeEventListener("touchstart",this._touchStartHandler,{passive:!0}),delete this._touchStartHandler,this.element[0].removeEventListener("touchstart",this._delegatedHandleMouseEnterMenuItem,{passive:!0}),delete this._delegatedHandleMouseEnterMenuItem,this.element.removeAttr("aria-activedescendant").removeClass("oj-component").find(".oj-menu").addBack().removeClass("oj-menu oj-menu-submenu oj-menu-icons oj-menu-end-icons oj-menu-text-only").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".oj-menu-item").removeClass("oj-menu-item").removeAttr("role").children("a").removeAttr("aria-disabled").removeUniqueId().removeClass("oj-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("oj-ojMenu-submenu-icon")&&e.remove()}),this.element.find("a").removeAttr("aria-expanded"),this.element.find(".oj-menu-divider").removeClass("oj-menu-divider").removeAttr("role"),delete this._popupServiceEvents,delete this._usingCallback;var e=this._clearCloseDelayTimer;delete this._clearCloseDelayTimer,e&&e(),this.element.ojHammer("destroy"),this._super()},_keydown:function(e){var i=!0;function n(e){return e.replace(/[-\[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}switch(e.keyCode){case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this._previous(e);break;case t.ui.keyCode.DOWN:this._next(e);break;case t.ui.keyCode.LEFT:case t.ui.keyCode.RIGHT:e.keyCode===t.ui.keyCode.RIGHT!==this.isRtl?this.active&&!this.active.is(".oj-disabled")&&this._expand(e):this._collapse(e,"active");break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._handleEnterSpace(e),this.__spaceEnterDownInMenu=!0;var s=this;setTimeout(function(){s.__spaceEnterDownInMenu=!1},100);break;case t.ui.keyCode.TAB:e.preventDefault(),this._focusLauncherAndDismiss(e);break;case t.ui.keyCode.ESCAPE:if(this._launcher){var o=this.element.attr("aria-activedescendant"),r=t(document.getElementById(o)).parents(".oj-menu").first();r.length>0&&r[0]!==this.element[0]?this._collapse(e,"active"):this._focusLauncherAndDismiss(e)}else this._collapse(e,"active");break;default:i=!1;var a=this.previousFilter||"",l=String.fromCharCode(e.keyCode),u=!1;clearTimeout(this.filterTimer),l===a?u=!0:l=a+l;var c=new RegExp("^"+n(l),"i"),h=t(b(this.activeMenu)).filter(function(){return c.test(t(this).children("a").text())});(h=u&&-1!==h.index(this.active.next())?this.active.nextAll(".oj-menu-item"):h).length||(l=String.fromCharCode(e.keyCode),c=new RegExp("^"+n(l),"i"),h=t(b(this.activeMenu)).filter(function(){return c.test(t(this).children("a").text())})),h.length?(this._focus(e,h),h.length>1?(this.previousFilter=l,this.filterTimer=setTimeout(function(){delete this.previousFilter}.bind(this),1e3)):delete this.previousFilter):delete this.previousFilter}i&&e.preventDefault()},_handleEnterSpace:function(e){this.active&&!this.active.is(".oj-disabled")&&(this.active.children("a[aria-haspopup='true']").length?this._expand(e):this._select(e))},refresh:function(){function e(e){for(var i=e.element.find("oj-menu:not(.oj-menu-submenu)"),s=0;s<i.length;s++){t(i[s]).attr("aria-hidden","true").hide(),n.getContext(i[s]).getBusyContext().whenReady().then(function(e){e.refresh()}.bind(e,i[s]))}}(this._super(),this._IsCustomElement()&&!this._wasCreated)?(this.element.parent().is("oj-option")&&(this._isSubmenu=!0,this._createAsSubmenu()),this._isSubmenu||(o.subtreeShown(this.element[0]),this._createAsTopLevelMenu(),e(this)),this._wasCreated=!0):(e(this),this._setup());this._reposition()},_reposition:function(){var e=this.element;if(e.is(":visible")&&!(e[0].getBoundingClientRect().width>document.documentElement.clientWidth)){var i=e.data(h);e[0].style.maxHeight="",e[0].style.overflowY="",this._updateMenuMaxHeight(),e.position(i),e.find(".oj-menu").each(function(){var e=t(this);e.is(":visible")&&(i=e.data(h),e.position(i))})}},_setup:function(){this.isRtl="rtl"===this._GetReadingDirection(),this._IsCustomElement()?(this._processOjOptions(),this._isSubmenu&&(this.options.openOptions.launcher=this.element.parent()),this._updateMenuPadding(this.element)):this._setupWidgetMenus(),this.active&&!t.contains(this.element[0],this.active[0])&&this._blur()},_setupWidgetMenus:function(){var e=this,i=this.element.find(this.options.menuSelector),n=i.add(this.element),s=n.children();this._hasSubmenus=!!i.length,s.filter(".oj-menu-divider").has("a").removeClass("oj-menu-divider oj-menu-item").removeAttr("role");var o=s.filter(":not(.oj-menu-item):has(a)"),r=o.children("a");this._initMenuItems(o),this._initAnchors(r);var a=s.filter(function(e,i){var n=t(i);return n.is(":not(.oj-menu-item)")&&!/[^\-\u2014\u2013\s]/.test(n.text())});this._initDividers(a),this._initDividerNeighbors(s,a),s.filter(".oj-disabled").children("a").attr("aria-disabled","true"),s.filter(":not(.oj-disabled)").children("a").removeAttr("aria-disabled"),i.filter(":not(.oj-menu)").addClass("oj-menu oj-menu-submenu oj-menu-dropdown").hide().attr({role:this.role,"aria-hidden":"true"}).each(function(){var i=t(this);e._setupSubmenu(e._getSubmenuAnchor(i),i,!0)}),n.each(function(){e._updateMenuPadding(t(this))})},_setupSubmenu:function(e,i,n){if(e.attr("aria-haspopup","true").attr("aria-expanded","false"),n){var s=t("<span>");s.addClass("oj-menu-submenu-icon oj-component-icon").data("oj-ojMenu-submenu-icon",!0),e.append(s)}i.attr("aria-labelledby",e.attr("id"))},_initMenuItems:function(e){e.addClass("oj-menu-item").attr("role","presentation")},_initAnchors:function(e){for(var i=0;i<e.length;i++){var n=t(e[i]);n.uniqueId().attr({tabIndex:"-1",role:this._itemRole(n.parent())})}},_initDividers:function(e){e.addClass("oj-menu-divider").attr("role","separator")},_initDividerNeighbors:function(e,t){e.removeClass("oj-menu-item-before-divider oj-menu-item-after-divider"),t.prev().addClass("oj-menu-item-before-divider"),t.next().addClass("oj-menu-item-after-divider")},_clearOption:function(e){e.removeClass("oj-menu-item-before-divider oj-menu-item-after-divider oj-menu-divider oj-menu-item").removeAttr("role")},_getSubmenuAnchor:function(e){return e.prev("a")},_getSubmenuWidget:function(e){return o.__GetWidgetConstructor(e,"ojMenu")("instance")},_itemRole:function(e){return"OJ-MENU-SELECT-MANY"===e.parent().prop("nodeName")?"menuitemcheckbox":"menuitem"},_getAdjacentDividers:function(e,t){var i=e.prev(".oj-menu-divider").add(e.next(".oj-menu-divider"));return t&&(i=i.add(e)),i},_focus:function(e,i){var n=this.active?this.active:t();if(!i.is(n)){e&&"focus"===e.type||this._clearTimer&&this._clearTimer(),i=i.first(),this._makeActive(i,e);var s=i.parents(".oj-menu").first(),o=s.closest(".oj-menu-item");s.find(".oj-focus-ancestor").removeClass("oj-focus-ancestor"),this._getAdjacentDividers(o,!0).addClass("oj-focus-ancestor"),e&&"keydown"===e.type?this._close():this._clearTimer=this._setTimer(function(){return delete this._clearTimer,this._close()},this._getSubmenuBusyStateDescription("closing"),this.delay);var r=this._IsCustomElement()?i.children("oj-menu"):i.children(".oj-menu"),a=r.length>0&&n.length>0&&t.contains(r[0],n[0]);r.length&&e&&/^mouse|click/.test(e.type)&&!this.active.hasClass("oj-disabled")&&!a&&this._startOpening(e,r),this.activeMenu=i.parents(".oj-menu").first()}},_makeActive:function(e,i){if(!e.is(this.active)){var n,s,o=this.active?this.active:t(),r=e.children("a");this.active=e,this.element.attr("aria-activedescendant",r.attr("id")),this._focusOutHandler(o),this._focusInHandler(e),this._getAdjacentDividers(o).removeClass("oj-focus"),this._getAdjacentDividers(e).addClass("oj-focus"),this._trigger("_activeItem",i,{previousItem:o,item:e,privateNotice:"The _activeItem event is private.  Do not use."}),i&&/^key/.test(i.type)&&(n=r[0],(s=n.getBoundingClientRect()).top<0||s.bottom>document.documentElement.clientHeight||s.left<0||s.right>document.documentElement.clientWidth)&&r[0].scrollIntoView()}},_removeActive:function(e){if(this.active){var i=this.active;this.active=null,this.element.removeAttr("aria-activedescendant"),this._focusOutHandler(i),this._getAdjacentDividers(i).removeClass("oj-focus"),this._trigger("_activeItem",e,{previousItem:i,item:t(),privateNotice:"The _activeItem event is private.  Do not use."})}},_blur:function(e){this._clearTimer&&this._clearTimer(),this._removeActive(e)},_focusLauncherAndDismiss:function(e,t){this._launcher&&this._launcher.focus(),this.__dismiss(e,t)},close:function(){this.__dismiss()},__dismiss:function(t,i){if(!this._isOperationPending("close","__dismiss",[t,i])&&e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN){var n=this.element.is(":visible");this._setWhenReady("close");var s={};s[e.PopupService.OPTION.POPUP]=this.element,s[e.PopupService.OPTION.CONTEXT]={event:t,selectUi:i,isOpen:n},e.PopupService.getInstance().close(s)}},_getDefaultAnimation:function(e,t){return s.parseJSONFromFontFamily("oj-menu-option-defaults").animation[e][t]},_isAnimationDisabled:function(){return!this._IsCustomElement()||this._disableAnimation},_replaceAnimationOptions:function(e,t){var i=e;if(t&&e&&"string"!=typeof e){for(var n=JSON.stringify(e),s=Object.keys(t),o=0;o<s.length;o++){var r=s[o];n=n.replace(new RegExp(r,"g"),t[r])}i=JSON.parse(n)}return i},_runOnPromise:function(e,t){return e?e.then(t):t()},_beforeCloseHandler:function(t){var i=t[e.PopupService.OPTION.POPUP];if(this._IsCustomElement()){var n=t[e.PopupService.OPTION.CONTEXT],s=n.selectUi;if(s&&s.item.length){var o={},a=s.item[0],l=n.event;o.originalEvent=l.originalEvent;var u={detail:o,cancelable:!0,bubbles:!0},c=new CustomEvent("ojAction",u);a.dispatchEvent(c),n.event=c}}if(!this._isAnimationDisabled()){var h=this._getDefaultAnimation(this._sheetMenuIsOpen?"sheet":"dropdown","close"),m=r.startAnimation(i[0],"close",e.PositionUtils.addTransformOriginAnimationEffectsOption(i,h),this);return m.then(function(){i.attr("aria-hidden","true").hide()}),m}i.attr("aria-hidden","true").hide()},_afterCloseHandler:function(t){var i=t[e.PopupService.OPTION.CONTEXT],n=i.event,s=i.selectUi,o=i.isOpen;(this.element.removeData(h),this._launcher=void 0,this._sheetMenuIsOpen=!1,!this._IsCustomElement()&&s)&&(n=this._trigger2("select",n,s).event);o&&this._trigger("close",n,{}),this._currentOpenOptions=null;var r=u.indexOf(this);u.splice(r,1),this._destroyVoiceOverAssist()},getCurrentOpenOptions:function(){return t.extend(!0,{},this._currentOpenOptions||this.options.openOptions)},open:function(i,s){var o=arguments[2];if(!this._isOperationPending("open","open",[i,s,o])){var r=function(i,n){this._IsCustomElement()&&this.refresh(),this.element.removeAttr("aria-activedescendant"),this.element.find(".oj-focus").removeClass("oj-focus"),this.focusHandled=!1,this._focusIsFromPointer=!1,this.mouseHandled=!1,this.activeMenu=this.element,this.active=null,(n=t.extend({},this.options.openOptions,n)).position=t.extend({},n.position),this._IsCustomElement()&&this._setPosition(n.position),o=t.extend({},this.options.submenuOpenOptions,o);var s=this._currentOpenOptions;this._currentOpenOptions=n,e.PositionUtils._normalizeEventForPosition(i),this._launcherClickShouldDismiss=this.element[0].__openingContextMenu;var r=this._trigger2("beforeOpen",i,{openOptions:n});if(!r.proceed)return this._currentOpenOptions=s,void(this._disableAnimation=!1);e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN&&(this._disableAnimation=!0,this._currentOpenOptions=s,this.__dismiss(r.event),this._dismissEvent=null,this._currentOpenOptions=n);var l=n.launcher;if(!(l=this._IsCustomElement()?"string"===t.type(l)?t(document.getElementById(l)):t(l):"string"===t.type(l)?t(l):l)||!l.length)return a.warn("When calling Menu.open(), must specify openOptions.launcher via the component option, method param, or beforeOpen listener.  Ignoring the call."),this._currentOpenOptions=null,void(this._disableAnimation=!1);var c,m,d=this._isDropDown(n.display);if(this._toggleCancelDom(d),d){this.element.addClass("oj-menu-dropdown").removeClass("oj-menu-sheet"),m=_;var p=e.PositionUtils.normalizeHorizontalAlignment(n.position,this.isRtl);this._IsCustomElement()?(p=e.PositionUtils.coerceToJet(p,this.options.openOptions.position),this._referenceOpenPosition=p,c=e.PositionUtils.coerceToJqUi(p)):(this._referenceOpenPosition=p,c=p),c.of=e.PositionUtils.normalizePositionOf(c.of,l,i)}else this.element.addClass("oj-menu-sheet").removeClass("oj-menu-dropdown"),m=v,c={my:"bottom",at:g,of:window,collision:"flipfit"};var f=this.element[0],O=u.slice(0,u.length);t.each(O,function(e,t){t.element[0]!==f&&(t._collapse(i,"eventSubtree"),t.__dismiss(i))}),this._submenuPosition=e.PositionUtils.normalizeHorizontalAlignment(o.position,this.isRtl);var b=this._usingCallback;t.isFunction(c.using)&&(c.origUsing=c.using),c.using=b,this.element.data(h,c),this._setWhenReady("open");var j={};j[e.PopupService.OPTION.POPUP]=this.element,j[e.PopupService.OPTION.LAUNCHER]=l,j[e.PopupService.OPTION.POSITION]=c,j[e.PopupService.OPTION.EVENTS]=this._getPopupServiceEvents(),j[e.PopupService.OPTION.LAYER_SELECTORS]="oj-menu-layer",j[e.PopupService.OPTION.MODALITY]=m,j[e.PopupService.OPTION.CONTEXT]={event:i,initialFocus:n.initialFocus,launcher:l,isDropDown:d},j[e.PopupService.OPTION.CUSTOM_ELEMENT]=this._IsCustomElement();var E=e.PopupService.getInstance(),S=E.open.bind(E,j),y=this.element[0].querySelector("oj-defer");y?e.Context.getContext(y).getBusyContext().whenReady().then(S):S();this._disableAnimation=!1}.bind(this,i,s);if(this._dismissEvent)n.getContext(this.element[0]).getBusyContext().whenReady().then(r);else r()}},_setPosition:function(t){var i=this.options;i.openOptions.position=e.PositionUtils.coerceToJet(t,i.openOptions.position)},_beforeOpenHandler:function(t){var i,n=t[e.PopupService.OPTION.POPUP],s=t[e.PopupService.OPTION.POSITION],o=t[e.PopupService.OPTION.CONTEXT],a=o.event,l=o.isDropDown,u=o.initialFocus;if(n[0].style.maxHeight="",n[0].style.overflowY="",n.show(),l&&(s=this._checkBrowserVerticalScollBar(o,s)),this.rootHeight=n[0].offsetHeight,"click"===s.of.type?this.launcherHeight=s.of.clientY:this.launcherHeight=o.launcher[0].getBoundingClientRect().bottom,this._updateMenuMaxHeight(),n.position(s),this._initVoiceOverAssist(u),"firstItem"===u){var c=this._getFirstItem();this._focus(a,c)}if(!this._isAnimationDisabled()){var h=this._getDefaultAnimation(l?"dropdown":"sheet","open");i=r.startAnimation(n[0],"open",e.PositionUtils.addTransformOriginAnimationEffectsOption(n,h),this)}return i},_checkBrowserVerticalScollBar:function(i,n){var s=i.launcher,o=t.position.scrollbarWidth(),r=window.innerWidth>document.documentElement.clientWidth,a=window.innerWidth-s[0].offsetLeft-this.element[0].offsetWidth<o;if(!r||!a)return n;if(this._referenceOpenPosition.offset.x=-1*o,this._IsCustomElement()){var l=e.PositionUtils.coerceToJqUi(this._referenceOpenPosition);return Object.assign(n,{my:l.my})}return Object.assign(n,{offset:{my:-1*o}})},_updateMenuMaxHeight:function(){var e=this.element[0],t=this._isDropDown(this.options.openOptions.display);if(!(e.querySelectorAll("oj-menu").length||!t||this.rootHeight<window.innerHeight)){var i=window.innerHeight-this.launcherHeight-25;i<25&&(i=25),e.style.maxHeight=i+"px",e.style.overflowY="scroll"}},_afterOpenHandler:function(t){var i,n=t[e.PopupService.OPTION.CONTEXT],s=n.event,o=n.launcher,r=n.isDropDown,a=n.initialFocus;(this._launcher=o,this._sheetMenuIsOpen=!r,u.push(this),"firstItem"===a||"menu"===a)&&(i=this._focusSkipLink&&"menu"===a?this._focusSkipLink.getLink():this.element,this._IsCustomElement()?window.setImmediate(function(){i.focus()}):i.focus());this._trigger("open",s,{})},_initVoiceOverAssist:function(t){if("menu"===t&&(e.AgentUtils.getAgentInfo().os===e.AgentUtils.OS.IOS||e.AgentUtils.getAgentInfo().os===e.AgentUtils.OS.ANDROID)){var i=this._getFirstItem();if(!(i.length<1)){var n=this.element.attr("id");e.StringUtils.isEmptyOrUndefined(n)&&(n=this.uuid);var s=[n,"focusSkipLink"].join("_"),o=function(){window.setImmediate(function(e,t){t.find("a").first().focus(),e._focus(null,t)}.bind(this,this,i))}.bind(this),r=this.options.translations.ariaFocusSkipLink;this._focusSkipLink=new e.PopupSkipLink(i,r,o,s,{insertBefore:!0,preventKeyEvents:!1})}}},_destroyVoiceOverAssist:function(){this._focusSkipLink&&(this._focusSkipLink.destroy(),delete this._focusSkipLink)},_getFirstItem:function(){return this.element.find(".oj-menu-item").first()},_startOpening:function(e,t){this._clearTimer&&this._clearTimer(),this._IsCustomElement()&&t[0].refresh(),this._clearTimer=this._setTimer(function(){return delete this._clearTimer,this._close().then(function(){this._open(e,t)}.bind(this))},this._getSubmenuBusyStateDescription("closing and opening"),this.delay)},_open:function(i,s){if("true"===s.attr("aria-hidden")&&this.active){var o;if(this._IsCustomElement()){var a=this._getSubmenuWidget(s);if(!a._trigger2("beforeOpen",i).proceed)return;o=e.PositionUtils.coerceToJqUi(a.options.openOptions.position),o=e.PositionUtils.normalizeHorizontalAlignment(o,this.isRtl)}else o=this._submenuPosition;if(o=t.extend({of:this.active},o),this._clearTimer&&this._clearTimer(),this.element.find(".oj-menu").not(s.parents(".oj-menu")).hide().attr("aria-hidden","true").removeData(h),s.show().removeAttr("aria-hidden").position(o).data(h,o),this._getSubmenuAnchor(s).attr("aria-expanded","true"),!this._isAnimationDisabled()){var l=n.getContext(this.element[0]).getBusyContext().addBusyState({description:this._getSubmenuBusyStateDescription("opening")}),u=this._getDefaultAnimation("submenu","open");u=this._replaceAnimationOptions(u,{"#myPosition":o.my}),r.startAnimation(s[0],"open",u,this).then(l)}}},__collapseAll:function(e,i,s){var o;this._clearTimer&&this._clearTimer();var r=this,a=function(){delete r._clearTimer;var n=i?r.element:t(e&&e.target).closest(r.element.find(".oj-menu"));n.length||(n=r.element);var s=r._close(n);return s=r._runOnPromise(s,function(){r._blur(e),r.activeMenu=n})};if(s?this._isAnimationDisabled()?r._clearTimer=r._setTimer(a,r._getSubmenuBusyStateDescription("closing"),s):o=new Promise(function(e){r._clearTimer=r._setTimer(a,r._getSubmenuBusyStateDescription("closing"),s,function(){e(!0)})}):o=a(),o){var l=n.getContext(this.element[0]).getBusyContext().addBusyState({description:"closing submenus"});o.then(l)}return o},_close:function(e){var i;e||(e=this.active?this.active.parents(".oj-menu").first():this.element);var n=this,s=n._getDefaultAnimation("submenu","close"),o=e.find(".oj-menu"),a=function(e){e.hide().attr("aria-hidden","true").removeData(h),n._getSubmenuAnchor(e).attr("aria-expanded","false")};if(this._isAnimationDisabled())a(o),e.find(".oj-focus-ancestor").removeClass("oj-focus-ancestor"),i=Promise.resolve(!0);else{var l=function(e){var i=null;return t(b(e)).children(".oj-menu").each(function(e,o){var u=t(o);if(u.is(":visible")){var c=l(u);i=n._runOnPromise(c,function(){var e=u.data(h),t=n._replaceAnimationOptions(s,{"#myPosition":e.my});return r.startAnimation(o,"close",t,n).then(function(){a(u)})})}else a(u),i=Promise.resolve(!0)}),i};i=l(e),i=this._runOnPromise(i,function(){e.find(".oj-focus-ancestor").removeClass("oj-focus-ancestor")})}return i},_collapse:function(e,t){var i;if(null==t||"active"===t){var n=this.activeMenu&&this.activeMenu.closest(".oj-menu-item",this.element);if(n&&n.length){var s=this;i=this._close(),i=this._runOnPromise(i,function(){s._focus(e,n)})}}else"all"===t||"eventSubtree"===t?i=this.__collapseAll(e,"all"===t,this.delay):a.warn("Invalid param "+t+" passed to Menu._collapse().  Ignoring the call.");return i},_expand:function(e){var i,n;if(this.active){var s=b(n=this.active.children(".oj-menu ").first());s.length>0&&(i=t(s[0]))}i&&i.length&&(this._open(e,n),this._clearTimer&&this._clearTimer(),this._clearTimer=this._setTimer(function(){delete this._clearTimer,this._focus(e,i)},this._getBusyStateDescription("focusing an item")))},_next:function(e){this._move("next","first",e)},_previous:function(e){this._move("prev","last",e)},_move:function(e,i,n){var s,o=b(this.activeMenu),r=o.indexOf(this.active?this.active[0]:null);r>-1?"first"===e?s=o[0]:"last"===e?s=o[o.length-1]:"next"===e?s=r+1<o.length?o[r+1]:o[0]:"prev"===e&&(s=r-1>-1?o[r-1]:o[o.length-1]):s="first"===i?o[0]:o[o.length-1],this._focus(n,t(s))},_select:function(e){if(!this.active&&e&&e.target){var i=t(e.target).closest(".oj-menu-item");i.closest(this.element).length&&this._makeActive(i,e)}var n=this.active.is(this._cancelItem)?void 0:{item:this.active},s=this.__collapseAll(e,!0);this._runOnPromise(s,function(){this._focusLauncherAndDismiss(e,n)}.bind(this))},_surrogateRemoveHandler:function(){var t=this.element;e.ZOrderUtils.getStatus(t)===e.ZOrderUtils.STATUS.OPEN&&t.remove()},_getPopupServiceEvents:function(){if(!this._popupServiceEvents){var t={};this._popupServiceEvents=t,t[e.PopupService.EVENT.POPUP_CLOSE]=this._closeAll.bind(this),t[e.PopupService.EVENT.POPUP_REMOVE]=this._surrogateRemoveHandler.bind(this),t[e.PopupService.EVENT.POPUP_REFRESH]=this._reposition.bind(this),t[e.PopupService.EVENT.POPUP_AUTODISMISS]=this._clickAwayHandler.bind(this),t[e.PopupService.EVENT.POPUP_BEFORE_OPEN]=this._beforeOpenHandler.bind(this),t[e.PopupService.EVENT.POPUP_AFTER_OPEN]=this._afterOpenHandler.bind(this),t[e.PopupService.EVENT.POPUP_BEFORE_CLOSE]=this._beforeCloseHandler.bind(this),t[e.PopupService.EVENT.POPUP_AFTER_CLOSE]=this._afterCloseHandler.bind(this)}return this._popupServiceEvents},_closeAll:function(){this._disableAnimation=!0,this._close(this.element),this.__dismiss(null),this._setWhenReady("none")},_usingHandler:function(t,i){var n=i.element.element;n.css(t),e.PositionUtils.captureTransformOriginAnimationEffectsOption(n,i);var s=n.data(h).origUsing;s&&s(t,i),e.PositionUtils.isAligningPositionClipped(i)&&(this._clearCloseDelayTimer=this._setTimer(this._closeAll,this._getSubmenuBusyStateDescription("closing"),1))},getNodeBySubId:function(e){switch(e&&e.subId){case"oj-menu-cancel-command":return this._cancelDomAttached?this._cancelItem[0]:null;default:return this._super(e)}},getSubIdByNode:function(e){return this._cancelItem&&this._cancelItem.is(t(e).parents().addBack(e))?{subId:"oj-menu-cancel-command"}:this._super(e)},_isDropDown:function(e){if(this._hasSubmenus)return!0;switch(e){case"dropDown":return!0;case"sheet":return!1;default:return"phone"!==l.getDeviceRenderMode()}},_toggleCancelDom:function(e){function i(e,i){var n=b(e),s=n.indexOf(i[1]);return t(n[s-1])}if(p)if(e)this._cancelDomAttached&&(i(this.element,this._getCancelDom()).removeClass("oj-menu-item-before-divider"),this._getCancelDom().detach(),this._cancelDomAttached=!1);else{var n=this._getCancelDom();n.appendTo(this.element),i(this.element,n).addClass("oj-menu-item-before-divider"),this._cancelDomAttached=!0}},_getCancelDom:function(){if(!this._cancelDom){var e=t("<li></li>",this.document[0]),i=t("<a href='#'></a>",this.document[0]).text(this.options.translations.labelCancel);t("<span class='oj-menu-item-icon oj-component-icon oj-menu-cancel-icon'></span>",this.document[0]).prependTo(i);var n=t("<li></li>",this.document[0]).addClass("oj-menu-item-cancel oj-menu-item-after-divider").append(i);this._initDividers(e),this._initAnchors(i),this._initMenuItems(n),this._cancelAnchor=i,this._cancelItem=n,this._cancelDom=t([e[0],n[0]])}return this._cancelDom},_setupSwipeBehavior:function(){f&&(this.element.ojHammer(O),this._on({swipedown:function(e){this._sheetMenuIsOpen&&"touch"===e.gesture.pointerType&&(this.__collapseAll(e,!0),this._focusLauncherAndDismiss(e))}}))},_setWhenReady:function(t){var i=this._whenReadyMediator;i&&(i.destroy(),delete this._whenReadyMediator),["open","close"].indexOf(t)<0||(this._whenReadyMediator=new e.PopupWhenReadyMediator(this.element,t,"ojMenu",this._IsCustomElement()))},_isOperationPending:function(e,t,i){var n=this._whenReadyMediator;return!!n&&n.isOperationPending(this,e,t,i)},_setTimer:function(e,t,i,s){var o=n.getContext(this.element[0]).getBusyContext().addBusyState({description:t}),r=function(){o&&(o(),o=null,s&&s())},a=this,l=setTimeout(function(){var t=e.bind(a)();t&&t instanceof Promise?t.then(r):r()},i||0);return function(){clearTimeout(l),r()}},_getBusyStateDescription:function(e){return"Menu with id '"+this.element.attr("id")+"' is busy "+e+"."},_getSubmenuBusyStateDescription:function(e){return this._getBusyStateDescription(e+" a submenu")},_NotifyDetached:function(){e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN&&this._closeAll(),this._super()}}),o.setDefaultOptions({ojMenu:{openOptions:o.createDynamicPropertyGetter(function(t){return{position:null!=e.BaseCustomElementBridge.getRegistered(t.element.tagName)?t.containers.indexOf("ojMenu")>=0?{my:{horizontal:"start",vertical:"top"},at:{horizontal:"end",vertical:"top"},offset:{x:0,y:0},collision:"flipfit"}:{my:{horizontal:"start",vertical:"top"},at:{horizontal:"start",vertical:"bottom"},offset:{x:0,y:0},collision:"flipfit"}:{my:"start top",at:"start bottom",collision:"flipfit"}}})}})}(),u.extension._WIDGET_NAME="ojMenu",e.CustomElementBridge.register("oj-menu",{metadata:u})});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdomscroller',["ojs/ojcore-base","jquery"],function(e,t){"use strict";var r=function(e,r,i){i=i||{},this._data=r,this._asyncIterator=i.asyncIterator,this._element=t(e)[0],this._fetchSize=i.fetchSize,this._fetchSize=this._fetchSize>0?this._fetchSize:25,this._maxCount=i.maxCount,this._maxCount=this._maxCount>0?this._maxCount:500,this._rowCount=i.initialRowCount>0?i.initialRowCount:0,this._successCallback=i.success,this._requestCallback=i.request,this._errorCallback=i.error,this._beforeFetchCallback=i.beforeFetch,this._handleScrollTopCallback=i.onScrollTop,this._localKeyValidator=i.localKeyValidator,this._registerDataSourceEventListeners(),this._fetchTrigger=i.fetchTrigger,(null==this._fetchTrigger||isNaN(this._fetchTrigger))&&(this._fetchTrigger=0),this._initialScrollTop=this._element.scrollTop,this._lastFetchTrigger=0,this._isScrollTriggeredByMouseWheel=!1,t(this._getScrollEventElement()).on({"scroll.domscroller":function(){var e=this._element,t=this._getScrollTop(e),r=e.scrollHeight-e.clientHeight;r>0&&this._handleScrollerScrollTop(t,r)}.bind(this),"wheel.domscroller":function(){this._isScrollTriggeredByMouseWheel=!0}.bind(this),"mousedown.domscroller":function(){this._isScrollTriggeredByMouseWheel=!1}.bind(this)})};return r.prototype.setFetchTrigger=function(e){null!=e&&!isNaN(e)&&e>=0&&(this._fetchTrigger=e)},r.prototype._getScrollEventElement=function(){return this._element===document.body||this._element===document.documentElement?window:this._element},r.calculateOffsetTop=function(e,r){for(var i=0,o=r;o&&o!==e&&t.contains(e,o);)i+=o.offsetTop,o=o.offsetParent;return i},r.prototype._getScrollTop=function(e){var t=this._fetchTrigger;return e===document.documentElement&&(void 0===this._useBodyScrollTop&&(this._useBodyScrollTop=this._initialScrollTop===e.scrollTop),this._useBodyScrollTop)?t+document.body.scrollTop:t+e.scrollTop},r.prototype.destroy=function(){this._unregisterDataSourceEventListeners(),t(this._getScrollEventElement()).off(".domscroller")},r.prototype.checkViewport=function(){return this._asyncIterator&&this._element.clientHeight>0&&!this.isOverflow()?this._fetchMoreRows():Promise.resolve(null)},r.prototype._doFetch=function(e){var t=this;if(this._beforeFetchCallback(e-this._fetchTrigger)){this._lastFetchTrigger=e;var r=t._isScrollTriggeredByMouseWheel;this._fetchPromise=this._fetchMoreRows().then(function(e){t._successCallback&&(e.isMouseWheel=r,t._successCallback(e),t._fetchPromise=null,t._nextFetchTrigger=void 0)},function(e){t._errorCallback&&(t._errorCallback(e),t._fetchPromise=null,t._nextFetchTrigger=void 0)})}else this._nextFetchTrigger=void 0},r.prototype._handleScrollerScrollTop=function(e,t){this._handleScrollTopCallback&&this._handleScrollTopCallback(e),!this._fetchPromise&&this._asyncIterator&&(t!==this._lastMaxScrollTop&&(this._nextFetchTrigger=Math.max(0,(t-e)/2),this._lastMaxScrollTop=t),null!=this._nextFetchTrigger&&e-this._lastFetchTrigger>this._nextFetchTrigger)?this._doFetch(e):t-e<1&&e>this._fetchTrigger&&(this._fetchPromise?this._asyncIterator?null!=this._requestCallback&&this._requestCallback():null!=this._errorCallback&&this._errorCallback():this._asyncIterator&&this._doFetch(e))},r.prototype.isOverflow=function(){var t=this._element,r=t.scrollHeight-(t.clientHeight+this._fetchTrigger);return 1===r&&e.AgentUtils.getAgentInfo().browser===e.AgentUtils.BROWSER.EDGE&&(r=0),r>0},r.prototype._fetchMoreRows=function(){if(!this._fetchPromise){var e=this._maxCount-this._rowCount;if(e>0){var t=this;if(this._asyncIterator)return this._fetchPromise=this._asyncIterator.next().then(function(r){var i=r;return t._fetchPromise=null,null!=i&&null!=i.value&&(i.value.data.length>0&&(t._rowCount+=i.value.data.length,e<t._fetchSize&&(i.maxCount=t._maxCount,i.maxCountLimit=!0,i.value.data.length>e&&(i.value.data=i.value.data.slice(0,e),i.value.metadata=i.value.metadata.slice(0,e),null!=i.value.fetchParameters&&(i.value.fetchParameters.size=e)))),(i.done||i.maxCountLimit)&&(t._asyncIterator=null)),Promise.resolve(i)}),this._fetchPromise}return this._asyncIterator=null,Promise.resolve({maxCount:this._maxCount,maxCountLimit:!0})}return this._fetchPromise},r.prototype._handleDataRowMutateEvent=function(e){if(null!=this._asyncIterator){var t,r,i,o=this;null!=e.detail.add&&(null!=(t=e.detail.add).indexes?r=t.indexes:null!=t.addBeforeKeys?i=t.addBeforeKeys:null!=t.afterKeys&&(i=t.afterKeys),this._handleDataRowAddedOrRemoved(i,r,function(){o._rowCount+=1})),null!=e.detail.remove&&(null!=(t=e.detail.remove).indexes?r=t.indexes:null!=t.keys&&(i=t.keys),this._handleDataRowAddedOrRemoved(i,r,function(){o._rowCount-=1}))}},r.prototype._handleDataRowAddedOrRemoved=function(e,t,r){if(t)for(var i=0;i<t.length;i++){var o=t[i];void 0!==o&&this._rowCount>0&&o<=this._rowCount&&r()}else if(e){var l=this._localKeyValidator;null!=l&&e.forEach(function(e){l(e)&&r()})}},r.prototype._registerDataSourceEventListeners=function(){var e,t,r=this._data;if(null!=r)for(this._unregisterDataSourceEventListeners(),this._dataProviderEventHandlers=[],this._dataProviderEventHandlers.push({eventType:"mutate",eventHandler:this._handleDataRowMutateEvent.bind(this)}),e=0;e<this._dataProviderEventHandlers.length;e++)(t=r.addEventListener(this._dataProviderEventHandlers[e].eventType,this._dataProviderEventHandlers[e].eventHandler))&&(this._dataProviderEventHandlers[e].eventHandler=t)},r.prototype._unregisterDataSourceEventListeners=function(){var e,t=this._data;if(null!=this._dataProviderEventHandlers&&null!=t)for(e=0;e<this._dataProviderEventHandlers.length;e++)t.removeEventListener(this._dataProviderEventHandlers[e].eventType,this._dataProviderEventHandlers[e].eventHandler)},r});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdataproviderscroller',["ojs/ojcore","jquery","require","ojs/ojcontext","ojs/ojconfig","ojs/ojcomponentcore","ojs/ojlogger","ojs/ojdatacollection-common","ojs/ojanimation","ojs/ojdomscroller"],function(t,e,i,n,o,r,s,l,a,d){"use strict";var h=function(t,e,i){this.m_root=e,this.m_widget=t,this.m_fetching=!1,this.setDataProvider(i),this.Init()};t.Object.createSubclass(h,t.Object,"DataProviderContentHandler"),h.prototype.Init=function(){h.superclass.Init.call(this)},h.prototype.notifyShown=function(){},h.prototype.notifyAttached=function(){},h.prototype.cleanItems=function(t,e){if(void 0===t&&(t=this.getTemplateEngine()),void 0===e&&(e=this.m_root),t&&e)for(var i=e.childNodes,n=0;n<i.length;n++)t.clean(i[n])},h.prototype.Destroy=function(t){null!=this.m_superRoot&&(this.m_root=this.m_superRoot),this.cleanItems(),t&&e(this.m_root).empty(),this.m_widget=null,this.m_root=null,this.m_superRoot=null},h.prototype.IsReady=function(){return!this.m_fetching},h.prototype.setRootAriaProperties=function(){this.shouldUseGridRole()?this.m_root.setAttribute("role","grid"):this.IsHierarchical()?this.m_root.setAttribute("role","tree"):this.m_root.setAttribute("role","listbox")},h.prototype.RenderContent=function(){this.signalTaskStart("rendering content"),this.setRootAriaProperties(),this.fetchRows(!1),this.signalTaskEnd()},h.prototype.GetKey=function(t){return t.key},h.prototype.FindElementByKey=function(i){for(var n=e(this.m_root).find("."+this.m_widget.getItemElementStyleClass()),o=0;o<n.length;o++){var r=n[o];if(i==this.GetKey(r)||t.Object.compareValues(i,this.GetKey(r)))return r}return null},h.prototype.getDataProvider=function(){return this.m_dataProvider},h.prototype.setDataProvider=function(t){this._removeDataSourceEventListeners(),null!=t&&(this.m_handleModelMutateEventListener=this.handleModelMutateEvent.bind(this),this.m_handleModelRefreshEventListener=this.handleModelRefreshEvent.bind(this),t.addEventListener("mutate",this.m_handleModelMutateEventListener),t.addEventListener("refresh",this.m_handleModelRefreshEventListener)),this.m_dataProvider=t},h.prototype._removeDataSourceEventListeners=function(){var e=this.getDataProvider();null!=e&&(e.removeEventListener("mutate",this.m_handleModelMutateEventListener),e.removeEventListener("refresh",this.m_handleModelRefreshEventListener),t.TableDataSourceAdapter&&e instanceof t.TableDataSourceAdapter&&e.destroy())},h.prototype.loadTemplateEngine=function(){var t=this;return null!=this.m_widget.getItemTemplate()&&null==this.m_widget._getItemRenderer()?new Promise(function(e){o.__getTemplateEngine().then(function(i){t.m_engine=i,e(i)},function(t){throw new Error("Error loading template engine: "+t)})}):Promise.resolve(null)},h.prototype.getTemplateEngine=function(){return this.m_engine},h.prototype.fetchRows=function(t){this.m_widget.showStatusText()},h.prototype.GetChildElementTagName=function(){return"LI"},h.prototype.GetReferenceNode=function(t,i){if(-1===i)return null;var n=e(t).children("."+this.m_widget.getItemElementStyleClass()+", ."+this.m_widget.getEmptyTextStyleClass()+", .oj-listview-temp-item");return i===n.length?null:n[i]},h.prototype.addItem=function(t,i,n,o,r,s,l){var a=document.createElement(this.GetChildElementTagName());e(a).uniqueId();var d=this.GetReferenceNode(t,i);this.m_widget.BeforeInsertItem&&this.m_widget.BeforeInsertItem(),t.insertBefore(a,d);var h=e(t).children().index(a);return this._addOrReplaceItem(a,h,t,i,n,o,r,s,!1,l)},h.prototype.replaceItem=function(t,i,n,o,r,s,l){this.signalTaskStart("replace item");var a=t.parentNode,d=e(a).children().index(t),h=document.createElement(this.GetChildElementTagName());r&&r.clean(t),e(t).replaceWith(h),this._addOrReplaceItem(h,d,a,i,n,o,r,s,l)},h.prototype._addOrReplaceItem=function(t,i,n,o,r,s,l,a,d,h){null==a&&(a=this.afterRenderItem.bind(this));var m,c=this.createContext(i,r,s,t,h),u=this.m_widget._getItemRenderer(),p=this.m_widget.getItemTemplate(),g=!1;if(null!=u){var _=u.call(this,c);null!=_&&(null===_.parentNode||_.parentNode instanceof DocumentFragment?t.appendChild(_):null!=_.parentNode||_.toString&&((m=document.createElement("span")).appendChild(document.createTextNode(_.toString())),t.appendChild(m)))}else if(null!=p&&null!=l)for(var f=this.m_widget.GetRootElement()[0],v=this.GetBindingContext(c),y=this.m_widget.getAs?this.m_widget.getAs():null,w=l.execute(f,p,v,y),S=this.GetChildElementTagName(),E=0;E<w.length;E++){if(w[E].tagName===S){n.replaceChild(w[E],t),g=!0;break}t.appendChild(w[E])}else(m=document.createElement("span")).appendChild(document.createTextNode(null==r?"":r.toString())),t.appendChild(m);var k=n.children?n.children[i]:this._getItemFromDocumentFragment(n,i);return c.parentElement=k,e.data(k,"data",r),e.data(k,"metadata",h),a(k,c,g,d),{item:k,context:c}},h.prototype._getItemFromDocumentFragment=function(t,e){for(var i=0,n=t.childNodes,o=0;o<n.length;o++){var r=n[o];if(!r)break;if(1===r.nodeType){if(i===e)return r;i+=1}}return null},h.prototype.GetBindingContext=function(t){var e={};return e.data=t.data,e.index=t.index,e.key=t.key,e.componentElement=t.componentElement,e},h.prototype.afterRenderItem=function(t,i){t.key=i.key;var n=e(t);n.uniqueId();var o=this.m_widget.getSingleFocusableElement(n);if(this.shouldUseGridRole())if(null==i.leaf||i.leaf)if(this.isCardLayout())o.attr("role","gridcell");else if(n.attr("role","row"),o!==n)o.attr("role","gridcell");else{if(0===o.children().length)o.get(0).innerHTML="<div role='gridcell' class='oj-listview-cell-element'></div>";else{var r=document.createElement("div");for(r.setAttribute("role","gridcell"),r.className="oj-listview-cell-element";o[0].firstChild;)r.appendChild(o[0].firstChild);o[0].appendChild(r)}}else n.attr("role","presentation");else o.attr("role",this.IsHierarchical()?"treeitem":"option"),o!==n&&n.attr("role","presentation");o.addClass(this.m_widget.getFocusedElementStyleClass()),this.isFocusable(i)||n.addClass("oj-skipfocus"),n.addClass(this.m_widget.getItemElementStyleClass())},h.prototype.getMetadata=function(t,e,i,n){var o=i.context;return null==o&&(o={}),null==o.index&&(o.index=t),null==o.key&&(o.key=e),o},h.prototype.handleModelMutateEvent=function(t){null!=this.m_root&&this.m_widget.isAvailable()&&(null!=t.detail.remove&&this.handleModelRemoveEvent(t),null!=t.detail.add&&this.handleModelAddEvent(t),null!=t.detail.update&&this.handleModelChangeEvent(t))},h.prototype.handleModelRefreshEvent=function(t){},h.prototype._pushToEventQueue=function(t){null==this.m_eventQueue&&(this.m_eventQueue=[]),this.m_eventQueue.push(t)},h.prototype._processEventQueue=function(){var t;if(null!=this.m_eventQueue&&this.m_eventQueue.length>0){for(var e=0;e<this.m_eventQueue.length;e++)if("refresh"===(t=this.m_eventQueue[e]).type)return void this.handleModelRefreshEvent(t.event);"mutate"===(t=this.m_eventQueue.shift()).type&&this.handleModelMutateEvent(t.event)}},h.prototype._clearEventQueue=function(){null!=this.m_eventQueue&&(this.m_eventQueue.length=0)},h.prototype.addItemsForModelInsert=function(t,e,i,n,o){},h.prototype.handleModelAddEvent=function(t){if(this.IsReady()){this.signalTaskStart("handling model add event"),this.m_superRoot&&0===this.m_root.childNodes.length&&this.m_superRoot.appendChild(this.m_root.parentNode);var e,i,n=t.detail.add,o=n.data,r=[];n.keys.forEach(function(t){r.push(t)});var s=!0;void 0!==n.addBeforeKeys?i=n.addBeforeKeys:void 0!==n.afterKeys&&(i=n.afterKeys,s=!1),i&&(e=[],i.forEach(function(t){e.push(t)}));var l=n.parentKeys,a=n.indexes,d=n.metadata;null!=o&&null!=r&&r.length>0&&o.length>0&&r.length===o.length&&(null==a||a.length===o.length)&&this.addItemsForModelInsert(o,a,r,l,s,e,d),this.signalTaskEnd()}else this._pushToEventQueue({type:t.type,event:t})},h.prototype.afterRenderItemForInsertEvent=function(t,i,o){this.signalTaskStart("after render item from model insert event"),t.setAttribute("data-oj-context",""),this.afterRenderItem(t,i,o);var r=e(t),s=t.className;t._className=s,t.className="oj-listview-temp-item oj-listview-item-add-remove-transition",this.isCardLayout()&&(t.className=t.className+" "+this.m_widget.getItemStyleClass()),this.shouldUseGridRole()||r.children().wrapAll("<div></div>");var l=r.children().first();this.isCardLayout()||(l[0].className=s),l[0].key=t.key,this.shouldUseGridRole()||(l.attr("role",t.getAttribute("role")),r[0].hasAttribute("aria-selected")&&l.attr("aria-selected",t.getAttribute("aria-selected")));var a=this;t.style.opacity=0,n.getContext(t).getBusyContext().whenReady().then(function(){null!=a.m_widget&&(a.signalTaskStart("kick off animation for insert item"),a.m_widget.StartAnimation(t,"add").then(function(){t.style.opacity="",t.removeAttribute("data-oj-context"),a._handleAddTransitionEnd(i,t)}),a.signalTaskEnd())})},h.prototype._handleAddTransitionEnd=function(t,i){if(null!=this.m_widget&&null!=i.parentNode){var n=i.classList.contains("oj-focus")&&i.classList.contains("oj-focus-highlight");i.className=i._className,n&&(i.classList.add("oj-focus"),i.classList.add("oj-focus-highlight")),this.shouldUseGridRole()?this.isCardLayout()||(i.children[0].className="oj-listview-cell-element"):e(i).children().children().unwrap(),this.m_widget.itemInsertComplete(i,t),this.signalTaskEnd()}else this.signalTaskEnd()},h.prototype.handleModelRemoveEvent=function(t){var e=this,i=t.detail.remove.keys;if(null!=i&&0!==i.size)if(this.IsReady()){this.signalTaskStart("handling model remove event");var n=[];if(i.forEach(function(t){var i=e.FindElementByKey(t);null!=i&&(e.signalTaskStart("handling model remove event for item: "+t),i.parentNode.classList.contains("oj-listview-temp-item")&&(i=i.parentNode),n.push(e._removeItem(i)),e.signalTaskEnd())}),this.isSelectionEnabled()){var o=this.m_widget.options.selected,r=o.delete(i);if(o!==r){var s=[];r.values&&r.values().forEach(function(t){s.push(e.FindElementByKey(t))}),this.m_widget._setSelectionOption(r,null,s)}}this.m_widget.ClearCache(),Promise.all(n).then(function(){e.afterItemsRemoved()}),this.signalTaskEnd()}else this._pushToEventQueue({type:t.type,event:t})},h.prototype.afterItemsRemoved=function(){},h.prototype._removeItem=function(t){var i=this;this.signalTaskStart("removing an item");var n=document.activeElement,o=t.contains(n),r=e(t).get(0),s=r.className;e(r).children().wrapAll("<div class='"+s+"'></div>"),r.className="oj-listview-item-add-remove-transition",r.children[0].key=t.key,this.signalTaskStart("kick off animation to remove an item");var l=this.m_widget.StartAnimation(r,"remove");return l.then(function(){i.handleRemoveTransitionEnd(t,o)}),this.signalTaskEnd(),l},h.prototype.handleRemoveTransitionEnd=function(t,i){if(null!=this.m_widget){var n=e(t),o=n.parent();if(0!==o.length){this.m_widget.itemRemoveComplete(n.get(0),i);var r=this.getTemplateEngine();r&&r.clean(n.get(0)),n.remove(),0===o.get(0).childElementCount&&this.m_widget.renderComplete(),this.isSelectionEnabled()&&this.m_widget.enforceSelectionRequired(),i&&this.m_root.focus(),this.signalTaskEnd()}else this.signalTaskEnd()}else this.signalTaskEnd()},h.prototype.handleModelChangeEvent=function(t){this.signalTaskStart("handling model update event");var e=t.detail.update,i=e.data,n=[];e.keys.forEach(function(t){n.push(t)});for(var o,r=this.getTemplateEngine(),s=e.indexes,l=!1,a=0;a<n.length;a++){var d=this.FindElementByKey(n[a]);if(null!=d){void 0===o&&d.contains(document.activeElement)&&(o=d),!l&&this.m_widget.isFirstSelectedItem(n[a])&&(this.m_widget.setFirstSelectedItem(n[a],i[a]),l=!0),this.signalTaskStart("handling model update event for item: "+n[a]);var h=null==s?-1:s[a];this.replaceItem(d,h,i[a],this.getMetadata(h,n[a],i[a],d.parentNode),r,this.afterRenderItemForChangeEvent.bind(this),null!=o),this.signalTaskEnd(),null!=o&&(o=null)}}this.m_widget.ClearCache(),this.signalTaskEnd()},h.prototype.afterRenderItemForChangeEvent=function(t,e,i,n){var o=this;this.signalTaskStart("after render item for model change event"),this.afterRenderItem(t,e),this.m_widget.StartAnimation(t,"update").then(function(){o._handleReplaceTransitionEnd(t,n)}),this.signalTaskEnd()},h.prototype._handleReplaceTransitionEnd=function(t,i){null!=this.m_widget?(e(t).removeClass("oj-listview-item-add-remove-transition"),i&&this.m_widget.restoreCurrentItemFocus(t),this.signalTaskEnd()):this.signalTaskEnd()},h.prototype.createContext=function(t,e,i,n,o){var r={};r.parentElement=n,r.index=t,r.data=e,r.component=this.m_widget.getWidgetConstructor(),r.datasource=this.getDataProvider(),(r=this.m_widget._FixRendererContext(r)).metadata=o;for(var s=Object.keys(i),l=0;l<s.length;l++){var a=s[l];r[a]=i[a]}return r},h.prototype.isSelectionEnabled=function(){return this.m_widget._isSelectionEnabled()},h.prototype.isFocusable=function(t){return this.m_widget.getItemFocusable(t)},h.prototype.isSelectable=function(t){return this.m_widget.getItemSelectable(t)},h.prototype.isCardLayout=function(){return this.m_widget.isCardLayout()},h.prototype.shouldUseGridRole=function(){return this.m_widget.ShouldUseGridRole()},h.prototype.isAsyncRendering=function(){return!1},h.prototype.signalTaskStart=function(t){this.m_widget&&this.m_widget.signalTaskStart("DataSource ContentHandler "+t)},h.prototype.signalTaskEnd=function(){this.m_widget&&this.m_widget.signalTaskEnd()},h.prototype.isSkeletonSupport=function(){return this.m_widget.isSkeletonSupport()},h.prototype.getRootElementHeight=function(){return isNaN(this.m_height)&&(this.m_height=this.m_widget.GetRootElement()[0].offsetHeight),this.m_height},h.prototype.getDefaultSkeletonDimension=function(){if(null==this.m_defaultSkeletonDim){var t=this.m_widget.GetRootElement()[0],e=this.createSkeleton(!0);e.style.display="block",e.style.visibility="hidden",t.appendChild(e);var i={width:e.offsetWidth,height:e.offsetHeight};return t.removeChild(e),i.height>0&&i.width>0&&(this.m_defaultSkeletonDim=i),i}return this.m_defaultSkeletonDim},h.prototype.createSkeleton=function(t){return this.createSkeletonItem()},h.prototype.createSkeletonItem=function(){var t=document.createElement("li"),e=document.createElement("div");return t.className="oj-listview-item oj-listview-item-layout",this.m_widget._isGridlinesVisible()||t.classList.add("gridline-hidden"),e.className="oj-listview-cell-element oj-listview-skeleton oj-listview-skeleton-line-height oj-animation-skeleton",t.appendChild(e),t},h.prototype.animateShowContent=function(t,i,n){return new Promise(function(o,r){var s=null!=this.m_superRoot?this.m_superRoot:this.m_root,l=s.querySelector(".oj-listview-skeleton-container");null!=l?a.fadeOut(l,{duration:"100ms"}).then(function(){var r=l.parentNode;r.classList.contains("oj-listview-initial-skeletons")&&s.removeChild(r),n&&e(t).empty(),t.appendChild(i),t.style.opacity=0,window.requestAnimationFrame(function(){a.fadeIn(t,{duration:"150ms",persist:"all"})}),o(!1)}):(n&&e(t).empty(),t.appendChild(i),o(!1))}.bind(this))};var m=function(t,e,i){m.superclass.constructor.call(this,t,e,i)};return t.Object.createSubclass(m,h,"IteratingDataProviderContentHandler"),m.prototype.Init=function(){m.superclass.Init.call(this)},m.prototype.IsHierarchical=function(){return!1},m.prototype.IsReady=function(){return!this.m_fetching&&null==this.m_idleCallback},m.prototype._destroyDomScroller=function(){null!=this.m_domScroller&&(this.m_domScroller.destroy(),this.m_domScroller=null),this._removeLoadingIndicator()},m.prototype.Destroy=function(t){m.superclass.Destroy.call(this,t),this._removeDataSourceEventListeners(),this._destroyDomScroller(),this._cancelIdleCallback(),this.m_loadingIndicator=null,this.m_viewportCheckPromise=null,this.m_checkViewportPromise=null},m.prototype._cancelIdleCallback=function(){null!=this.m_idleCallback&&(window.requestIdleCallback&&window.cancelIdleCallback?(window.cancelIdleCallback(this.m_idleCallback),window.cancelAnimationFrame(this.m_idleCallback)):window.cancelAnimationFrame(this.m_idleCallback),this.m_idleCallback=null)},m.prototype.shouldHandleResize=function(){return this._isLoadMoreOnScroll()},m.prototype.HandleResize=function(t,e){if(this._isLoadMoreOnScroll()){var i=this.m_width,n=this.m_height;this.m_height=e,this.m_width=t,this.m_colCount=void 0;var o=this.isCardLayout();if(o&&this.isSkeletonSupport()&&i!==t)if(null!=this.m_loadingIndicator)this._adjustLoadMoreSkeletons(this._getRootElementWidth(!0));else null!=this.m_root.querySelector(".oj-listview-skeleton-container")&&this.renderInitialSkeletons();(e>n||o&&t>i)&&this.checkViewport()}},m.prototype.notifyShown=function(){this._isLoadMoreOnScroll()&&this.checkViewport()},m.prototype.notifyAttached=function(){var t=this._getFetchTrigger();if(null!=t&&null!=this.m_domScroller){var e=this._getFetchTrigger();t!==e&&this.m_domScroller.setFetchTrigger(e),this.checkViewport()}},m.prototype.setRootAriaProperties=function(){m.superclass.setRootAriaProperties.call(this);var t=this;this.shouldUseGridRole()&&this._isLoadMoreOnScroll()&&this.getDataProvider().getTotalSize().then(function(e){t.m_root&&t.m_root.setAttribute("aria-rowcount",-1===e?t._getMaxCount():e)})},m.prototype.unsetRootAriaProperties=function(){m.superclass.unsetRootAriaProperties.call(this),this.m_root.removeAttribute("aria-rowcount")},m.prototype._isLoadMoreOnScroll=function(){return this.m_widget.isLoadMoreOnScroll()},m.prototype._getFetchSize=function(){return Math.max(0,this.m_widget.options.scrollPolicyOptions.fetchSize)},m.prototype._getScroller=function(){var t=this.m_widget.options.scrollPolicyOptions.scroller;return null!=t&&e.contains(t,this.m_root)?(void 0===this._fetchTrigger&&(this._fetchTrigger=d.calculateOffsetTop(t,this.m_root)+this._getLoadingIndicatorHeight()),t):this.m_widget.GetRootElement()[0]},m.prototype._getFetchTrigger=function(){return void 0===this._fetchTrigger&&(this._fetchTrigger=this._getLoadingIndicatorHeight()),this._fetchTrigger},m.prototype._getLoadingIndicatorHeight=function(){var t;if(this.isSkeletonSupport())t=this.getDefaultSkeletonDimension().height,this.isCardLayout()||(t*=m.LOAD_MORE_SKELETONS_ROW_COUNT);else{var i=e(document.createElement("div"));i.addClass(this.m_widget.getItemStyleClass()).css({visibility:"hidden",overflow:"hidden",position:"absolute"});var n=e(document.createElement("div"));n.addClass("oj-icon oj-listview-loading-icon"),i.append(n),e(this.m_widget.GetRootElement()).append(i),t=i.get(0).offsetHeight,i.remove()}return t},m.prototype._getMaxCount=function(){return this.m_widget.options.scrollPolicyOptions.maxCount},m.prototype._adjustSkeletonCardContent=function(t,e,i){t.style.width=e+"px",t.style.height=i+"px"},m.prototype._createSkeletonCard=function(){var t=document.createElement("li"),e=document.createElement("div");return t.className="oj-listview-skeleton-card",e.className="oj-listview-skeleton oj-listview-skeleton-card-content oj-animation-skeleton",t.appendChild(e),t},m.prototype.createSkeleton=function(t){var e;if(this.isCardLayout())if(t)void 0===this.m_defaultItemSkeleton&&(this.m_defaultItemSkeleton=this._createSkeletonCard()),e=this.m_defaultItemSkeleton;else{if(void 0===this.m_defaultLoadMoreSkeleton){var i=this._createSkeletonCard(),n=this._getCardDimension();this._adjustSkeletonCardContent(i,n.width,n.height),this.m_defaultLoadMoreSkeleton=i}e=this.m_defaultLoadMoreSkeleton}else void 0===this.m_defaultItemSkeleton&&(this.m_defaultItemSkeleton=this.createSkeletonItem()),e=this.m_defaultItemSkeleton;return e.cloneNode(!0)},m.prototype._getScrollbarWidth=function(){if(isNaN(this.m_scrollbarWidth)){var t=this.m_widget.GetRootElement()[0],e=document.createElement("div");t.appendChild(e),this.m_scrollbarWidth=Math.max(0,l.getDefaultScrollBarWidth(e)),t.removeChild(e)}return this.m_scrollbarWidth},m.prototype._getRootElementWidth=function(t){return isNaN(this.m_width)&&(this.m_width=this.m_widget.GetRootElement()[0].offsetWidth),t?this.m_width-this._getScrollbarWidth():this.m_width},m.prototype.renderInitialSkeletons=function(){this.m_superRoot&&(this.m_root=this.m_superRoot,this.m_superRoot=null),e(this.m_root).empty();var t=this.getRootElementHeight(),i=0,n=this.getDefaultSkeletonDimension();if(n.width>0&&n.height>0)if(this.isCardLayout()){var o=this._getMargin(),r=this._getRootElementWidth(),s=Math.max(1,Math.floor(r/(n.width+o)));i=Math.max(1,Math.floor(t/(n.height+o)))*s}else i=Math.max(1,Math.floor(t/n.height));var l=document.createElement("li");l.setAttribute("role","presentation"),l.classList.add("oj-listview-initial-skeletons");var a=document.createElement("ul");a.setAttribute("role","presentation"),a.className=this.m_widget.getGroupStyleClass()+" oj-listview-skeleton-container";for(var d=0;d<i;d++)a.appendChild(this.createSkeleton(!0));l.appendChild(a),this.m_root.appendChild(l)},m.LOAD_MORE_SKELETONS_ROW_COUNT=3,m.prototype._adjustLoadMoreSkeletons=function(t){var e=this._getMargin();0!==Math.floor(t/(this._getCardDimension().width+e))-this.m_loadingIndicator.get(0).firstElementChild.childElementCount&&(this.m_loadingIndicator.get(0).parentNode.removeChild(this.m_loadingIndicator.get(0)),null!=this.m_fillerSkeletons&&this.m_fillerSkeletons.parentNode.removeChild(this.m_fillerSkeletons),this.m_loadingIndicator=null,this.m_fillerSkeletons=null,this._appendLoadingIndicator())},m.prototype._getMargin=function(){if(void 0===this.m_margin){var t=document.createElement("li");t.className=this.m_widget.getItemStyleClass(),this.m_root.appendChild(t);var e=window.getComputedStyle(t);this.m_margin=parseInt(e.marginRight,10),this.m_root.removeChild(t)}return this.m_margin},m.prototype._getCardDimension=function(){if(void 0===this.m_cardDim){var t=this.m_root.querySelector("."+this.m_widget.getItemElementStyleClass());if(t){var e={width:t.offsetWidth,height:t.offsetHeight};return e.width>0&&e.height>0&&(this.m_cardDim=e),e}}return this.m_cardDim},m.prototype._renderSkeletons=function(t){var e=this.createLoadingIndicator(),i=document.createElement("ul");i.className=this.isCardLayout()?"oj-listview-skeleton-card-group":"oj-listview-group",e.appendChild(i);for(var n=0;n<t;n++)i.appendChild(this.createSkeleton(!1));return e},m.prototype._fillEmptySpaceWithSkeletons=function(){var t=this.m_root.lastElementChild,e=this._getCardDimension().width;if(0!==e){var i=e+this._getMargin(),n=this._getRootElementWidth(!0),o=Math.floor((n-t.offsetLeft-i)/i);if(o>0){var r=this._renderSkeletons(o);this.m_root.appendChild(r),this.m_fillerSkeletons=r}}},m.prototype._createLoadMoreSkeletons=function(){var t;if(this.isCardLayout()){var e=this._getRootElementWidth(!0),i=this._getCardDimension(),n=void 0===i?this.getDefaultSkeletonDimension().width:i.width;t=0===n?0:Math.floor(e/(n+this._getMargin()))}else t=m.LOAD_MORE_SKELETONS_ROW_COUNT;return this._renderSkeletons(t)},m.prototype._createLoadMoreIcon=function(){var t=e(this.createLoadingIndicator());t.uniqueId().attr("role","presentation").addClass(this.m_widget.getItemStyleClass()).addClass("oj-listview-loading-icon-container");var i=e(document.createElement("div"));return i.addClass("oj-icon oj-listview-loading-icon"),t.append(i),t.get(0)},m.prototype.createLoadingIndicator=function(){return document.createElement("li")},m.prototype._appendLoadingIndicator=function(){if(null==this.m_loadingIndicator)if(this.isSkeletonSupport()&&this.isCardLayout()&&0===this._getCardDimension().width){var t=this;n.getContext(this.m_root).getBusyContext().whenReady().then(function(){t._doAppendLoadingIndicator()})}else this._doAppendLoadingIndicator()},m.prototype._doAppendLoadingIndicator=function(){this.isSkeletonSupport()&&this.isCardLayout()&&this._fillEmptySpaceWithSkeletons();var t=this.isSkeletonSupport()?this._createLoadMoreSkeletons():this._createLoadMoreIcon();this.m_root.appendChild(t),this.m_loadingIndicator=e(t)},m.prototype._removeLoadingIndicator=function(){null!=this.m_loadingIndicator&&this.m_loadingIndicator.remove(),this.m_loadingIndicator=null,null!=this.m_fillerSkeletons&&this.m_fillerSkeletons.remove(),this.m_fillerSkeletons=null},m.prototype.hasMoreToFetch=function(){return null!=this.m_loadingIndicator},m.prototype.afterRenderItem=function(t,i,n){m.superclass.afterRenderItem.call(this,t,i,n),e(t).addClass(this.m_widget.getItemStyleClass()),!n&&this.m_widget.getItemLayoutStyleClass&&t.classList.add(this.m_widget.getItemLayoutStyleClass()),this.isSelectionEnabled()&&this.isSelectable(i)&&this.m_widget.getFocusItem(e(t)).attr("aria-selected",!1),this._isLoadMoreOnScroll()&&e(t).attr("aria-rowindex",i.index+1),this.m_widget.itemRenderComplete(t,i)},m.prototype._handleScrollerMaxRowCount=function(){s.error("max count reached")},m.prototype._prepareRootElement=function(){this.m_superRoot?(e(this.m_superRoot).empty(),this.m_root=this.m_superRoot,this.m_superRoot=null):null==this.m_root.querySelector(".oj-listview-skeleton-container")&&e(this.m_root).empty();if(this.shouldUseGridRole()&&this.isCardLayout()){var t=document.createElement("li");t.classList.add("oj-listview-group-container");var i=document.createElement("ul");t.appendChild(i),e(t).attr("role","presentation").css("width","100%"),e(i).attr("role","row").addClass(this.m_widget.getGroupStyleClass()),this.m_root.appendChild(t),this.m_superRoot=this.m_root,this.m_root=i}},m.prototype._setFetching=function(t){(null==this.m_superRoot?this.m_root:this.m_superRoot).setAttribute("aria-busy",t),this.m_fetching=t},m.prototype.fetchRows=function(e){var i=0;if(this.signalTaskStart("fetching rows"),this.IsReady()){var n=this;this._setFetching(!0),m.superclass.fetchRows.call(this,e);var o=this.loadTemplateEngine();this.signalTaskStart("first fetch"),this._clientId=this._clientId||Symbol();var r={clientId:this._clientId};r.size=this._isLoadMoreOnScroll()?this._getFetchSize():-1,this.m_dataProviderAsyncIterator=this.getDataProvider().fetchFirst(r)[Symbol.asyncIterator]();var s=this.m_dataProviderAsyncIterator.next();n.fetchSize=r.size;var l=function(t){return t[0].done||-1!==n.fetchSize||"function"==typeof n.getDataProvider().getPageCount?t:n.m_dataProviderAsyncIterator.next().then(function(e){return t[0].done=e.done,t[0].value.data=t[0].value.data.concat(e.value.data),t[0].value.metadata=t[0].value.metadata.concat(e.value.metadata),l(t)},function(t){n._handleFetchError(t),n.signalTaskEnd()})};return Promise.all([s,o]).then(function(t){return l(t)},function(t){n._handleFetchError(t),n.signalTaskEnd()}).then(function(e){if(n.m_fetching){if(null==n.m_widget)return;var o=e[0],r=e[1],s=n.getDataProvider();t.TableDataSourceAdapter&&s instanceof t.TableDataSourceAdapter&&(i=s.offset),0===i&&(r&&n.cleanItems(r),n.isSkeletonSupport()&&n.m_widget.hideStatusText(),n._prepareRootElement()),n._handleFetchedData(o,r,0===i)}},function(t){n._handleFetchError(t),n.signalTaskEnd()}),void this.signalTaskEnd()}this.signalTaskEnd()},m.prototype._handleFetchError=function(t){s.error(t),this._setFetching(!1),null!=this.m_widget?(this._isLoadMoreOnScroll()&&this._removeLoadingIndicator(),this.m_widget.renderComplete()):s.info("handleFetchError: widget has already been destroyed")},m.prototype._renderItemsWhenIdle=function(t,e,i,n,o,r){var s=this;function l(l){window.requestAnimationFrame(function(){null!=s.m_widget&&s.m_root.appendChild(l),s._renderItemsWhenIdle(t,e,i,n,o,r)})}0!==t.length&&0!==e.length?!o&&window.requestIdleCallback&&window.cancelIdleCallback?this.m_idleCallback=window.requestIdleCallback(function(o){for(var a=o.timeRemaining(),d=0,h=document.createDocumentFragment();a>d&&0!==t.length&&0!==e.length;){var m=t.shift(),c=null!=r?r.shift():null,u=e.shift();s.addItem(h,-1,m,s.getMetadata(i,u,m),n,null,c),i+=1,d=a-o.timeRemaining(),a=o.timeRemaining()}l(h)}):this.m_idleCallback=window.requestAnimationFrame(function(){var o=document.createDocumentFragment(),a=t.shift(),d=null!=r?r.shift():null,h=e.shift();s.addItem(o,-1,a,s.getMetadata(i,h,a),n,null,d),i+=1,l(o)}):window.requestAnimationFrame(function(){s.m_idleCallback&&(s._appendLoadingIndicator(),s.afterItemsInserted(),s.signalTaskEnd()),s.m_idleCallback=null})},m.prototype._isOverflow=function(){return this._isLoadMoreOnScroll()&&this.m_domScroller&&this.m_domScroller.isOverflow()},m.prototype._handleFetchSuccess=function(t,e,i,n,o,r,s){if(null==this.m_widget)return Promise.resolve(!0);var l=this.m_root.childElementCount;if(l>0&&!i&&this._isOverflow()&&null==this.m_widget.m_scrollPosition){this.signalTaskStart("render items during idle time");var a=null!=r?r.slice(0):null;return this._renderItemsWhenIdle(t.slice(0),e.slice(0),l,n,o,a),Promise.resolve(!0)}for(var d=document.createDocumentFragment(),h=0;h<t.length;h++){var m=t[h];this.addItem(d,-1,m,this.getMetadata(l,e[h],m),n,null,null!=r?r[h]:null),l+=1}return this.animateShowContent(this.m_root,d,s)},m.prototype.handleDomScrollerFetchedData=function(t){null!=t?(this.signalTaskStart("handle results from DomScroller"),this._removeLoadingIndicator(),this.IsReady()&&this.signalTaskStart("dummy task"),this._handleFetchedData(t,this.getTemplateEngine(),!1),t.value&&t.value.data&&this.m_widget.updateStatusFetchEnd(t.value.data.length),this.m_widget.m_scrollHeight=null,this.signalTaskEnd(),this.signalTaskEnd()):(this._removeLoadingIndicator(),this.signalTaskEnd())},m.prototype._registerDomScroller=function(){var t=this,e={fetchSize:this._getFetchSize(),fetchTrigger:this._getFetchTrigger(),maxCount:this._getMaxCount(),asyncIterator:this.m_dataProviderAsyncIterator,initialRowCount:this.m_root.childElementCount,success:function(e){t.handleDomScrollerFetchedData(e),null!=t.m_root&&null!=e.value||(t.signalTaskEnd(),null!=t.m_root&&t.m_widget.renderComplete())},error:this.signalTaskEnd.bind(this),localKeyValidator:function(e){return!!t.m_widget&&null!=t.m_widget.FindElementByKey(e)},beforeFetch:function(){return t.handleBeforeFetch(),t.m_viewportCheckPromise=null,null==t.m_idleCallback&&(t.m_widget.updateStatusFetchStart(),t.signalTaskStart("starts high-water mark scrolling"),!0)}};this.m_domScroller=new d(this._getScroller(),this.getDataProvider(),e)},m.prototype.handleBeforeFetch=function(){},m.prototype._clearEventQueue=function(){null!=this.m_eventQueue&&(this.m_eventQueue.length=0)},m.prototype._getIndex=function(t,i){if(null==t||0===t.length||i>=t.length)return-1;var n=t[i],o=this.FindElementByKey(n);return null!=o?e(this.m_root).children().index(o):-1},m.prototype.GetReferenceNode=function(t,e){var i=m.superclass.GetReferenceNode.call(this,t,e);return null==i&&null!=this.m_loadingIndicator?this.m_loadingIndicator.get(0):i},m.prototype._getMaxIndexForInsert=function(){var t=Number.MAX_VALUE;return this._isLoadMoreOnScroll()&&this.hasMoreToFetch()&&(t=e(this.m_root).children("li."+this.m_widget.getItemElementStyleClass()).length),t},m.prototype.addItemsForModelInsert=function(t,e,i,n,o,r,s){for(var l=this._getMaxIndexForInsert(),a=this.getTemplateEngine(),d=0,h=0;h<t.length;h++){var m;this.signalTaskStart("handling model add event for item: "+i[h]),null!=e?m=e[h]:(m=this._getIndex(r,h))>-1?m=o?m:m+1:this._isLoadMoreOnScroll()&&this.hasMoreToFetch()&&(m=l),m<l&&(this.addItem(this.m_root,m,t[h],this.getMetadata(m,i[h],t[h]),a,this.afterRenderItemForInsertEvent.bind(this),null!=s?s[h]:null),d+=1),this.signalTaskEnd()}if(t.length>0&&0===d&&this.m_widget._isEmpty()){var c=document.createElement("li");c.classList.add("oj-listview-temp-item"),c.style.display="none",this.m_root.appendChild(c)}this.IsReady()&&this.signalTaskStart("dummy task"),this.fetchEnd(!1,!0)},m.prototype.handleModelRemoveEvent=function(t){m.superclass.handleModelRemoveEvent.call(this,t),null==this.m_root.querySelector("li."+this.m_widget.getItemElementStyleClass())&&this.m_loadingIndicator&&(this.m_loadingIndicator.get(0).style.display="none")},m.prototype.handleModelRefreshEvent=function(t){null!=this.m_root&&(this._cancelIdleCallback(),this.IsReady()?(this.signalTaskStart("handling model reset event"),this._clearEventQueue(),this.m_widget.ClearCache(!0),this._destroyDomScroller(),this.m_widget.adjustScrollPositionValueOnRefresh&&this.m_widget.adjustScrollPositionValueOnRefresh(),this.m_widget.resetFocusBeforeRefresh(),this.fetchRows(!0),this.signalTaskEnd()):this._pushToEventQueue({type:t.type,event:t}))},m.prototype._handleFetchedData=function(t,e,i){if(null!=this.m_root&&null!=t.value){var n=t.value.data,o=t.value.metadata.map(function(t){return t.key}),r=t.value.metadata;n.length===o.length&&this._handleFetchSuccess(n,o,t.done||t.maxCountLimit,e,t.isMouseWheel,r,i).then(function(e){var i=null!=o&&0===o.length;this._isLoadMoreOnScroll()&&(t.done||(i&&s.info("handleFetchedData: zero data returned while done flag is false"),e||t.maxCountLimit||(null==this.m_domScroller&&(this._registerDomScroller(),this.getRootElementHeight()),i&&!this.m_domScroller.isOverflow()||this._appendLoadingIndicator()))),t.maxCountLimit&&this._handleScrollerMaxRowCount(),this.fetchEnd(e,!i||!t.done),this.disableAllTabbableElements()}.bind(this))}},m.prototype.disableAllTabbableElements=function(){var t=this.m_root.childElementCount;this.m_root.lastElementChild&&"presentation"===this.m_root.lastElementChild.getAttribute("role")&&(t-=1);var e=this;n.getContext(this.m_root).getBusyContext().whenReady().then(function(){if(null!=e.m_root)for(var i=e.m_root.children,n=t;n<i.length;n++)e.m_widget.disableAllTabbableElements(i[n])})},m.prototype.afterItemsInserted=function(t){if(this.m_widget&&(this.m_widget.renderComplete(),this._processEventQueue(),t))if(this.m_widget.ojContext._IsCustomElement()){var e=this,i=n.getContext(e.m_root).getBusyContext().whenReady();i.then(function(){null!=e.m_viewportCheckPromise&&e.checkViewport()}),e.m_viewportCheckPromise=i}else this.checkViewport()},m.prototype.afterItemsRemoved=function(){this.m_widget&&this.checkViewport()},m.prototype.fetchEnd=function(t,e){this._setFetching(!1),t||this.afterItemsInserted(e),this.signalTaskEnd()},m.prototype._checkHorizontalViewport=function(){if(this.isCardLayout()){for(var t,e=this.m_root.children,i=this.m_widget.getItemElementStyleClass(),n=e.length-1;n>=0;n--)if(e[n].classList.contains(i)){t=e[n];break}if(t){var o=this._getScroller(),r=o===this.m_root?this.getRootElementHeight():o.offsetHeight,s=o.scrollTop,l=t.offsetTop;if(l>s&&l<s+r)return this.m_domScroller._fetchMoreRows()}}return null},m.prototype.checkViewport=function(){var t,e=this;return this.m_checkViewportPromise?null:(this.signalTaskStart("checking viewport"),null!=this.m_domScroller&&this.IsReady()&&(null!=(t=this.m_domScroller.checkViewport())&&(this.signalTaskStart("got promise from checking viewport"),t.then(function(i){null!=e.m_widget&&(null!=i?(e.m_checkViewportPromise=null,e.handleDomScrollerFetchedData(i)):null!=(t=e._checkHorizontalViewport())?(e.signalTaskStart("got promise from checking horizontal viewport"),t.then(function(t){e.m_checkViewportPromise=null,null!=e.m_widget&&null!=t&&e.handleDomScrollerFetchedData(t),e.signalTaskEnd()},null)):e.m_checkViewportPromise=null,e.signalTaskEnd())},null)),this.m_checkViewportPromise=t),this.signalTaskEnd(),t)},{DataProviderContentHandler:h,IteratingDataProviderContentHandler:m}});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojkeyset',["ojs/ojcore","ojs/ojkeysetimpl"],function(t,e){"use strict";var n=function(){};t.Object.createSubclass(n,t.Object,"KeySet"),t.KeySet=n,n.prototype.SetInternal=function(t){this._keys=t},n.prototype.AddOrDeleteInternal=function(t,e){var n,r;return null==(n=t?this._add(e):this._remove(e))?this:((r=Object.create(Object.getPrototypeOf(this))).SetInternal(n),r)},n.prototype._add=function(t){var e=this,n=null;return t.forEach(function(t){t!==e.NOT_A_KEY&&e.get(t)===e.NOT_A_KEY&&(null==n&&(n=e.Clone()),n.add(t))}),n},n.prototype._remove=function(t){var e,n=this,r=null;return 0===this._keys.size?null:(t.forEach(function(t){(e=n.get(t))!==n.NOT_A_KEY&&(null==r&&(r=n.Clone()),r.delete(e))}),r)},n.prototype.GetInternalSize=function(){return this._keys.size},n.prototype.Clone=function(){return new Set(this._keys)},e.call(n.prototype);var r=function(t){this.InitializeWithKeys(t)};t.Object.createSubclass(r,n,"ExpandedKeySet"),t.ExpandedKeySet=r,r.prototype.add=function(t){return this.AddOrDeleteInternal(!0,t)},r.prototype.addAll=function(){return new o},r.prototype.isAddAll=function(){return!1},r.prototype.delete=function(t){return this.AddOrDeleteInternal(!1,t)},r.prototype.clear=function(){return 0===this.GetInternalSize()?this:new r},r.prototype.has=function(t){return this.get(t)!==this.NOT_A_KEY},r.prototype.values=function(){return this.Clone()};var o=function(){this.InitializeWithKeys(null)};t.Object.createSubclass(o,n,"ExpandAllKeySet"),t.ExpandAllKeySet=o,o.prototype.add=function(t){return this.AddOrDeleteInternal(!1,t)},o.prototype.addAll=function(){return 0===this.GetInternalSize()?this:new o},o.prototype.isAddAll=function(){return!0},o.prototype.delete=function(t){return this.AddOrDeleteInternal(!0,t)},o.prototype.clear=function(){return new r},o.prototype.has=function(t){return this.get(t)===this.NOT_A_KEY},o.prototype.deletedValues=function(){return this.Clone()};e=function(t){this.InitializeWithKeys(t)};t.Object.createSubclass(e,n,"KeySetImpl"),t.KeySetImpl=e,e.prototype.add=function(t){return this.AddOrDeleteInternal(!0,t)},e.prototype.addAll=function(){return new i},e.prototype.isAddAll=function(){return!1},e.prototype.delete=function(t){return this.AddOrDeleteInternal(!1,t)},e.prototype.clear=function(){return 0===this.GetInternalSize()?this:new e},e.prototype.has=function(t){return this.get(t)!==this.NOT_A_KEY},e.prototype.values=function(){return this.Clone()};var i=function(){this.InitializeWithKeys(null)};t.Object.createSubclass(i,n,"AllKeySetImpl"),t.AllKeySetImpl=i,i.prototype.add=function(t){return this.AddOrDeleteInternal(!1,t)},i.prototype.addAll=function(){return 0===this.GetInternalSize()?this:new i},i.prototype.isAddAll=function(){return!0},i.prototype.delete=function(t){return this.AddOrDeleteInternal(!0,t)},i.prototype.clear=function(){return new e},i.prototype.has=function(t){return this.get(t)===this.NOT_A_KEY},i.prototype.deletedValues=function(){return this.Clone()};var l={toArray:function(t){var e,n=t.isAddAll()?t.deletedValues():t.values();return Array.from?e=Array.from(n):(e=[],n.forEach(function(t){e.push(t)})),e.inverted=t.isAddAll(),e},toKeySet:function(t){return t.inverted?(new i).delete(t):(new e).add(t)}};return{KeySet:n,ExpandedKeySet:r,ExpandAllKeySet:o,KeySetImpl:e,AllKeySetImpl:i,KeySetUtils:l}});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdataprovideradapter-base',["ojs/ojcore","jquery","ojs/ojeventtarget","ojs/ojdataprovider"],function(t,s){"use strict";class e{constructor(t){this.dataSource=t,this.AsyncIterable=class{constructor(t){this._asyncIterator=t,this[Symbol.asyncIterator]=function(){return this._asyncIterator}}},this.AsyncIterator=class{constructor(t,s){this._nextFunc=t,this._params=s,this._fetchFirst=!0}next(){var t=this._fetchFirst;return this._fetchFirst=!1,this._nextFunc(this._params,t)}},this.AsyncIteratorYieldResult=class{constructor(t,s){this._parent=t,this.value=s,this[e._VALUE]=s,this[e._DONE]=!1}},this.AsyncIteratorReturnResult=class{constructor(t,s){this._parent=t,this.value=s,this[e._VALUE]=s,this[e._DONE]=!0}},this.FetchListResult=class{constructor(t,s,i,a){this._parent=t,this.fetchParameters=s,this.data=i,this.metadata=a,this[e._FETCHPARAMETERS]=s,this[e._DATA]=i,this[e._METADATA]=a}},this.ItemMetadata=class{constructor(t,s){this._parent=t,this.key=s,this[e._KEY]=s}},this.SortCriterion=class{constructor(t,s,i){this._parent=t,this.attribute=s,this.direction=i,this[e._ATTRIBUTE]=s,this[e._DIRECTION]=i}},this.DataProviderMutationEventDetail=class{constructor(t,s,i,a){this._parent=t,this.add=s,this.remove=i,this.update=a,this[e._ADD]=s,this[e._REMOVE]=i,this[e._UPDATE]=a}},this.DataProviderOperationEventDetail=class{constructor(t,s,i,a,r){this._parent=t,this.keys=s,this.metadata=i,this.data=a,this.indexes=r,this[e._KEYS]=s,this[e._METADATA]=i,this[e._DATA]=a,this[e._INDEXES]=r}},this.DataProviderAddOperationEventDetail=class{constructor(t,s,i,a,r,h,n,o){this._parent=t,this.keys=s,this.afterKeys=i,this.addBeforeKeys=a,this.parentKeys=r,this.metadata=h,this.data=n,this.indexes=o,this[e._KEYS]=s,this[e._AFTERKEYS]=i,this[e._ADDBEFOREKEYS]=a,this[e._METADATA]=h,this[e._DATA]=n,this[e._INDEXES]=o}}}getCapability(t){return t==e._SORT&&"full"==this.dataSource.getCapability(t)?{attributes:"multiple"}:"fetchByKeys"==t?{implementation:"lookup"}:"fetchByOffset"==t?{implementation:"lookup"}:null}addListener(t,s){this._eventHandlerFuncs[t]=s.bind(this),this.dataSource.on(t,this._eventHandlerFuncs[t])}removeListener(t){this.dataSource.off(t,this._eventHandlerFuncs[t])}removeAllListeners(){this._eventHandlerFuncs={}}}return e._SORT="sort",e._DATA="data",e._KEY="key",e._ATTRIBUTE="attribute",e._DIRECTION="direction",e._VALUE="value",e._DONE="done",e._FETCHPARAMETERS="fetchParameters",e._METADATA="metadata",e._KEYS="keys",e._INDEXES="indexes",e._ADD="add",e._REMOVE="remove",e._UPDATE="update",e._AFTERKEYS="afterKeys",e._ADDBEFOREKEYS="addBeforeKeys",t.EventTargetMixin.applyMixin(e),e});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdataprovideradapter',["ojs/ojcore","jquery","ojs/ojdataprovideradapter-base"],function(e,t,a){"use strict";class n extends a{constructor(e){super(e),this.tableDataSource=e,this.FetchByKeysResults=class{constructor(e,t,a){this._parent=e,this.fetchParameters=t,this.results=a,this[n._FETCHPARAMETERS]=t,this[n._RESULTS]=a}},this.ContainsKeysResults=class{constructor(e,t,a){this._parent=e,this.containsParameters=t,this.results=a,this[n._CONTAINSPARAMETERS]=t,this[n._RESULTS]=a}},this.Item=class{constructor(e,t,a){this._parent=e,this.metadata=t,this.data=a,this[n._METADATA]=t,this[n._DATA]=a}},this.FetchByOffsetResults=class{constructor(e,t,a,r){this._parent=e,this.fetchParameters=t,this.results=a,this.done=r,this[n._FETCHPARAMETERS]=t,this[n._RESULTS]=a,this[n._DONE]=r}},this.FetchListParameters=class{constructor(e,t,a){this._parent=e,this.size=t,this.sortCriteria=a,this[n._SIZE]=t,this[n._SORTCRITERIA]=a}},this._addTableDataSourceEventListeners(),this[n._OFFSET]=0,this._ignoreDataSourceEvents=new Array}destroy(){this._removeTableDataSourceEventListeners()}containsKeys(e){let t=this,a=[];return e[n._KEYS].forEach(function(e){a.push(t.tableDataSource.get(e))}),Promise.all(a).then(function(a){let r=new Set;return a.map(function(e){null!=e&&r.add(e[n._KEY])}),Promise.resolve(new t.ContainsKeysResults(t,e,r))})}fetchByKeys(e){let t=this,a=[];return e[n._KEYS].forEach(function(e){a.push(t.tableDataSource.get(e))}),Promise.all(a).then(function(a){let r=new Map;return a.map(function(e){if(null!=e){let a=e[n._KEY],s=e[n._DATA];r.set(a,new t.Item(t,new t.ItemMetadata(t,a),s))}}),Promise.resolve(new t.FetchByKeysResults(t,e,r))})}fetchByOffset(e){let t=this,a=null!=e?e[n._SIZE]:-1,r=null!=e?e[n._SORTCRITERIA]:null,s=null!=e&&e[n._OFFSET]>0?e[n._OFFSET]:0,i=new this.FetchListParameters(this,a,r);return this._startIndex=0,this._getFetchFunc(i,s)(i,!0).then(function(a){let r=a[n._VALUE],s=a[n._DONE],i=r[n._DATA],l=r[n._METADATA].map(function(e){return e[n._KEY]}),o=new Array;return i.map(function(e,a){o.push(new t.Item(t,new t.ItemMetadata(t,l[a]),i[a]))}),new t.FetchByOffsetResults(t,e,o,s)})}fetchFirst(e){return this._isPagingModelTableDataSource()||(this._startIndex=0),new this.AsyncIterable(new this.AsyncIterator(this._getFetchFunc(e),e))}getCapability(e){return e==n._SORT&&"full"==this.tableDataSource.getCapability(e)?{attributes:"multiple"}:"fetchByKeys"==e?{implementation:"lookup"}:"fetchByOffset"==e?{implementation:"lookup"}:null}getTotalSize(){return Promise.resolve(this.tableDataSource.totalSize())}isEmpty(){return this.tableDataSource.totalSize()>0?"no":"yes"}getPage(){return this._isPagingModelTableDataSource()?this.tableDataSource.getPage():-1}setPage(e,t){return this._isPagingModelTableDataSource()?this.tableDataSource.setPage(e,t):Promise.reject(null)}getStartItemIndex(){return this._isPagingModelTableDataSource()?this.tableDataSource.getStartItemIndex():-1}getEndItemIndex(){return this._isPagingModelTableDataSource()?this.tableDataSource.getEndItemIndex():-1}getPageCount(){return this._isPagingModelTableDataSource()?this.tableDataSource.getPageCount():-1}totalSize(){return this._isPagingModelTableDataSource()?this.tableDataSource.totalSize():-1}totalSizeConfidence(){return this._isPagingModelTableDataSource()?this.tableDataSource.totalSizeConfidence():null}_getFetchFunc(e,t){let a=this;if(null!=e&&null!=e[n._SORTCRITERIA]){let r=e[n._SORTCRITERIA][0][n._ATTRIBUTE],s=e[n._SORTCRITERIA][0][n._DIRECTION];return this._ignoreSortEvent=!0,this._isPagingModelTableDataSource()||(this._startIndex=0),r=r,s=s,function(e,i){if(i){let i={};return i[n._KEY]=r,i[n._DIRECTION]=s,a[n._OFFSET]=0,a.tableDataSource.sort(i).then(function(){return a._ignoreSortEvent=!1,a._getTableDataSourceFetch(e,t)(e)})}return a._getTableDataSourceFetch(e,t)(e)}}return this._getTableDataSourceFetch(e,t);var r,s}_getTableDataSourceFetch(e,t){let a=this;return function(e,r){let s={};if(t=t>0?t:0,null!=a._startIndex&&(s[n._STARTINDEX]=a._startIndex+t),s[n._PAGESIZE]=null!=e&&e[n._SIZE]>0?e[n._SIZE]:null,!a._isPagingModelTableDataSource()&&e[n._SILENT]&&(s[n._SILENT]=e[n._SILENT]),null!=a.tableDataSource[n._SORTCRITERIA]&&null==e[n._SORTCRITERIA]){e[n._SORTCRITERIA]=[];let t=new a.SortCriterion(a,a.tableDataSource[n._SORTCRITERIA][n._KEY],a.tableDataSource[n._SORTCRITERIA][n._DIRECTION]);e[n._SORTCRITERIA].push(t)}return s[n._FETCHTYPE]=e[n._FETCHTYPE],a._isFetching=!0,new Promise(function(t,r){a._fetchResolveFunc=t,a._fetchRejectFunc=r,a._fetchParams=e,a._requestEventTriggered||(a._isPagingModelTableDataSource()||s[n._SILENT]||a._ignoreDataSourceEvents.push(!0),a.tableDataSource.fetch(s).then(function(r){if(a._isPagingModelTableDataSource()||s[n._SILENT]||a._ignoreDataSourceEvents.pop(),null!==r){a._isFetching=!1,void 0===r&&((r={})[n._KEYS]=[],r[n._DATA]=[]);let i=[];null!=r[n._KEYS]&&(i=r[n._KEYS].map(function(e){return new a.ItemMetadata(a,e)})),null==a._startIndex&&(a._startIndex=0);let l=!1;a._startIndex=a._startIndex+r[n._DATA].length,"actual"==a.tableDataSource.totalSizeConfidence()&&a.tableDataSource.totalSize()>0&&r.startIndex+r[n._DATA].length>=a.tableDataSource.totalSize()?l=!0:s[n._PAGESIZE]>0&&r[n._DATA].length<s[n._PAGESIZE]?l=!0:0==r[n._DATA].length&&(l=!0),a._fetchResolveFunc=null,a._fetchParams=null,t(l?new a.AsyncIteratorReturnResult(a,new a.FetchListResult(a,e,r[n._DATA],i)):new a.AsyncIteratorYieldResult(a,new a.FetchListResult(a,e,r[n._DATA],i)))}},function(e){a._isPagingModelTableDataSource()||s[n._SILENT]||a._ignoreDataSourceEvents.pop(),r(e)}))})}}_handleSync(t){let a=this;if(!(a._ignoreDataSourceEvents.length>0)){if(a._startIndex=null,t[n._STARTINDEX]>0&&(a._startIndex=t[n._STARTINDEX],a[n._OFFSET]=a._startIndex),a._fetchResolveFunc&&null!=t[n._KEYS]){a._isFetching=!1;let e=t[n._KEYS].map(function(e){return new a.ItemMetadata(a,e)}),r=!1;"actual"==a.tableDataSource.totalSizeConfidence()&&a.tableDataSource.totalSize()>0&&a._startIndex+t[n._DATA].length>=a.tableDataSource.totalSize()&&(r=!0),r?a._fetchResolveFunc(new a.AsyncIteratorReturnResult(a,new a.FetchListResult(a,a._fetchParams,t[n._DATA],e))):a._fetchResolveFunc(new a.AsyncIteratorYieldResult(a,new a.FetchListResult(a,a._fetchParams,t[n._DATA],e))),a._fetchResolveFunc=null,a._fetchParams=null}else a._requestEventTriggered||a.dispatchEvent(new e.DataProviderRefreshEvent);a._requestEventTriggered=!1}}_handleAdd(t){let a=this,r=t[n._KEYS].map(function(e){return new a.ItemMetadata(a,e)}),s=new Set;t[n._KEYS].map(function(e){s.add(e)});let i=new a.DataProviderAddOperationEventDetail(a,s,null,null,null,r,t[n._DATA],t[n._INDEXES]),l=new a.DataProviderMutationEventDetail(a,i,null,null);a.dispatchEvent(new e.DataProviderMutationEvent(l))}_handleRemove(t){let a=this,r=t[n._KEYS].map(function(e){return new a.ItemMetadata(a,e)}),s=new Set;t[n._KEYS].map(function(e){s.add(e)});let i=new a.DataProviderOperationEventDetail(a,s,r,t[n._DATA],t[n._INDEXES]),l=new a.DataProviderMutationEventDetail(a,null,i,null);a.dispatchEvent(new e.DataProviderMutationEvent(l))}_handleReset(t){let a=this;a._requestEventTriggered||a._isPagingModelTableDataSource()||(a._startIndex=0,a.dispatchEvent(new e.DataProviderRefreshEvent))}_handleSort(t){let a=this;a._ignoreSortEvent||(a._startIndex=null,a.dispatchEvent(new e.DataProviderRefreshEvent))}_handleChange(t){let a=this,r=t[n._KEYS].map(function(e){return new a.ItemMetadata(a,e)}),s=new Set;t[n._KEYS].map(function(e){s.add(e)});let i=new a.DataProviderOperationEventDetail(a,s,r,t[n._DATA],t[n._INDEXES]),l=new a.DataProviderMutationEventDetail(a,null,null,i);a.dispatchEvent(new e.DataProviderMutationEvent(l))}_handleRefresh(t){let a=this;a._isFetching||a._requestEventTriggered||(null!=t[n._OFFSET]?a._startIndex=t[n._OFFSET]:a._startIndex=null,a.dispatchEvent(new e.DataProviderRefreshEvent)),a._requestEventTriggered=!1}_handleRequest(t){let a=this;a._ignoreDataSourceEvents.length>0||void 0!==e.Model&&t instanceof e.Model||a._isFetching||(t[n._STARTINDEX]>0&&0==a.getStartItemIndex()&&(a._startIndex=t[n._STARTINDEX]),a._requestEventTriggered=!0,a.dispatchEvent(new e.DataProviderRefreshEvent))}_handleError(e){let t=this;t._fetchRejectFunc&&t._fetchRejectFunc(e),t._isFetching=!1,t._requestEventTriggered=!1}_handlePage(t){this._isFetching=!1,this._requestEventTriggered=!1;let a={};a.detail=t,this.dispatchEvent(new e.GenericEvent(e.PagingModel.EventType.PAGE,a))}_addTableDataSourceEventListeners(){this.removeAllListeners(),this.addListener("sync",this._handleSync),this.addListener("add",this._handleAdd),this.addListener("remove",this._handleRemove),this.addListener("reset",this._handleReset),this.addListener("sort",this._handleSort),this.addListener("change",this._handleChange),this.addListener("refresh",this._handleRefresh),this.addListener("request",this._handleRequest),this.addListener("error",this._handleError),this.addListener("page",this._handlePage)}_removeTableDataSourceEventListeners(){this.removeListener("sync"),this.removeListener("add"),this.removeListener("remove"),this.removeListener("reset"),this.removeListener("sort"),this.removeListener("change"),this.removeListener("refresh"),this.removeListener("request"),this.removeListener("error"),this.removeListener("page")}_isPagingModelTableDataSource(){return null!=this.tableDataSource.getStartItemIndex}}n._STARTINDEX="startIndex",n._SILENT="silent",n._SORTCRITERIA="sortCriteria",n._PAGESIZE="pageSize",n._OFFSET="offset",n._SIZE="size",n._CONTAINSPARAMETERS="containsParameters",n._RESULTS="results",n._FETCHTYPE="fetchType",e.EventTargetMixin.applyMixin(n),e.TableDataSourceAdapter=n,e.TableDataSourceAdapter=n});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojlistview',["ojs/ojcore","jquery","require","ojs/ojdataproviderscroller","ojs/ojcontext","ojs/ojconfig","ojs/ojthemeutils","ojs/ojkeysetimpl","ojs/ojcomponentcore","ojs/ojdatacollection-common","ojs/ojanimation","ojs/ojlogger","ojs/ojkeyset","ojs/ojmap","ojs/ojdomscroller","ojs/ojdataprovideradapter"],function(t,e,i,n,s,l,o,a,r,h,c,u,d,m){"use strict";var p={properties:{as:{type:"string",value:""},currentItem:{type:"any",writeback:!0},data:{type:"object"},display:{type:"string",enumValues:["card","list"],value:"list"},dnd:{type:"object",properties:{drag:{type:"object",properties:{items:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},drag:{type:"function"},dragEnd:{type:"function"},dragStart:{type:"function"}}}}},drop:{type:"object",properties:{items:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"}}}}},reorder:{type:"object",properties:{items:{type:"string",enumValues:["disabled","enabled"],value:"disabled"}}}}},drillMode:{type:"string",enumValues:["collapsible","none"],value:"collapsible"},expanded:{type:"KeySet",writeback:!0},firstSelectedItem:{type:"object",writeback:!0,readOnly:!0,value:{key:null,data:null}},gridlines:{type:"object",properties:{item:{type:"string",enumValues:["hidden","visible","visibleExceptLast"],value:"visible"}}},groupHeaderPosition:{type:"string",enumValues:["static","sticky"],value:"sticky"},item:{type:"object",properties:{focusable:{type:"boolean|function",value:!0},renderer:{type:"function"},selectable:{type:"boolean|function",value:!0}}},scrollPolicy:{type:"string",enumValues:["auto","loadAll","loadMoreOnScroll"],value:"auto"},scrollPolicyOptions:{type:"Object<string, number>",properties:{fetchSize:{type:"number",value:25},maxCount:{type:"number",value:500},scroller:{type:"Element"}}},scrollPosition:{type:"object",writeback:!0,value:{x:0,y:0},properties:{x:{type:"number"},y:{type:"number"},index:{type:"number"},parent:{type:"any"},key:{type:"any"},offsetX:{type:"number"},offsetY:{type:"number"}}},selected:{type:"KeySet",writeback:!0},selection:{type:"Array<any>",writeback:!0,value:[]},selectionMode:{type:"string",enumValues:["multiple","none","single"],value:"none"},selectionRequired:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{accessibleNavigateSkipItems:{type:"string"},accessibleReorderAfterItem:{type:"string"},accessibleReorderBeforeItem:{type:"string"},accessibleReorderInsideItem:{type:"string"},accessibleReorderTouchInstructionText:{type:"string"},indexerCharacters:{type:"string"},labelCopy:{type:"string"},labelCut:{type:"string"},labelPaste:{type:"string"},labelPasteAfter:{type:"string"},labelPasteBefore:{type:"string"},msgFetchingData:{type:"string"},msgItemsAppended:{type:"string"},msgNoData:{type:"string"}}}},methods:{refresh:{},getContextByNode:{},getDataForVisibleItem:{},getIndexerModel:{},scrollToItem:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{},ojBeforeCurrentItem:{},ojBeforeExpand:{},ojBeforeCollapse:{},ojCollapse:{},ojCopy:{},ojCut:{},ojExpand:{},ojItemAction:{},ojPaste:{},ojReorder:{}},extension:{}};t.TreeDataProviderContentHandler=function(e,i,n){t.TreeDataProviderContentHandler.superclass.constructor.call(this,e,i,n)},t.Object.createSubclass(t.TreeDataProviderContentHandler,n.DataProviderContentHandler,"oj.TreeDataProviderContentHandler"),t.TreeDataProviderContentHandler.NUM_CHILD_SKELETONS=3,t.TreeDataProviderContentHandler.prototype.Init=function(){t.TreeDataProviderContentHandler.superclass.Init.call(this),this.m_childDataProviders=new m,this.m_fetchCalls=new Set},t.TreeDataProviderContentHandler.prototype.IsHierarchical=function(){return!0},t.TreeDataProviderContentHandler.prototype._getChildDataProvider=function(t){if(null===t)return this.getDataProvider();var e=this.m_childDataProviders.get(t);return null==e&&(e=this.getDataProvider().getChildDataProvider(t))&&this.m_childDataProviders.set(t,e),e},t.TreeDataProviderContentHandler.prototype.fetchRows=function(e){this.signalTaskStart("fetching rows"),t.TreeDataProviderContentHandler.superclass.fetchRows.call(this,e),this.m_fetchCalls.clear(),this._fetchChildren(null,this.m_root,null),this.signalTaskEnd()},t.TreeDataProviderContentHandler.prototype._fetchChildren=function(t,i,n,s){var l=this;this.signalTaskStart("fetching children from parent: "+t);var o=this.loadTemplateEngine();if(null!=t){var a=i.parentNode.firstElementChild.firstElementChild.firstElementChild;if(a){a=e(a);var r=this.m_widget.getCollapseIconStyleClass();if(a.hasClass(r)){var h=this.isSkeletonSupport()?this.m_widget.getExpandIconStyleClass():this.m_widget.getExpandingIconStyleClass();a.removeClass(r).addClass(h)}}}this.m_fetching=!0,null!=t&&this.m_fetchCalls.add(t),this._clientId=this._clientId||Symbol();var c={clientId:this._clientId,size:-1};this.signalTaskStart("first fetch");var u=this._getChildDataProvider(t).fetchFirst(c)[Symbol.asyncIterator](),d=u.next(),m=function(e){return e[0].done?e:u.next().then(function(t){return e[0].done=t.done,e[0].value.data=e[0].value.data.concat(t.value.data),e[0].value.metadata=e[0].value.metadata.concat(t.value.metadata),m(e)},function(e){null!=t&&l.m_fetchCalls.delete(t),s&&s(e),l._handleFetchError(e),l.signalTaskEnd()})};Promise.all([d,o]).then(function(t){return m(t)},function(t){l._handleFetchError(t),l.signalTaskEnd()}).then(function(e){if(null!=l.m_widget){var s=e[0],o=e[1];o&&l.cleanItems(o,i),l._handleFetchSuccess(s,t,i,n,o),l.signalTaskEnd()}else l.signalTaskEnd()}),this.signalTaskEnd()},t.TreeDataProviderContentHandler.prototype._getAtomicFetchChildPromise=function(){var t=this;return new Promise(function(e,i){t.m_fetchResolve=e})},t.TreeDataProviderContentHandler.prototype._handleFetchSuccess=function(t,i,n,s,l){var o=this;if(null!=this.m_widget&&null!=t.value){this.signalTaskStart("handling successful fetch"),this.m_fetching=!1,null!=i&&this.m_fetchCalls.delete(i);var a=t.value.data,r=t.value.metadata.map(function(t){return t.key}),h=t.value.metadata;if(a.length===r.length){for(var c=0,u=document.createDocumentFragment(),d=0;d<a.length;d++){var m=a[d];this.addItem(u,-1,m,this.getMetadata(c,r[d],m,n),l,null,h[d]),c+=1}if(null==this.m_fetchResolve&&this.shouldUseGridRole()?this.m_fetchCalls.size>0?this._getAtomicFetchChildPromise().then(function(){this.animateShowContent(n,u,!0).then(function(){_()})}.bind(this)):this.animateShowContent(n,u,!0).then(function(){_()}):(e(n).empty(),n.appendChild(u),this.shouldUseGridRole()?null!=s&&s.call(null,n):_()),this.shouldUseGridRole()&&this.isCardLayout()&&null!=i&&c>0){var p=n.parentNode.firstElementChild.firstElementChild;e(p).attr("aria-colspan",c+1)}}0===this.m_fetchCalls.size&&null!=this.m_fetchResolve&&(this.m_fetchResolve(),this.m_fetchResolve=null),this.m_initialized=!0,this.signalTaskEnd()}function _(){o.m_widget&&(null!=s&&s.call(null,n),o.m_widget.renderComplete(),o._processEventQueue())}},t.TreeDataProviderContentHandler.prototype.getMetadata=function(e,i,n,s){var l=t.TreeDataProviderContentHandler.superclass.getMetadata.call(this,e,i,n,s),o=this._getChildDataProvider(i);l.leaf=null===o;for(var a=0,r=s;r&&r!==this.m_root;)r=r.parentElement.parentElement,a+=1;return l.depth=a,l},t.TreeDataProviderContentHandler.prototype.GetBindingContext=function(e){var i=t.TreeDataProviderContentHandler.superclass.GetBindingContext.call(this,e);return i.depth=e.depth,i.leaf=e.leaf,i.parentKey=e.parentKey,i},t.TreeDataProviderContentHandler.prototype.afterRenderItem=function(i,n,s){this.signalTaskStart("after rendering an item"),t.TreeDataProviderContentHandler.superclass.afterRenderItem.call(this,i,n,s);var l=this.m_widget.getGroupStyleClass(),o=this.m_widget.getItemStyleClass(),a=this.m_widget.getGroupItemStyleClass(!0),r=this.m_widget.getGroupCollapseStyleClass(),h=this.m_widget.getCollapseIconStyleClass(),c=this.m_widget.getFocusedElementStyleClass();if(i=e(i),!1===n.leaf){i.children().wrapAll("<div></div>"),i.hasClass(c)?i.removeClass(c).children().first().addClass(c).attr("aria-expanded","false"):i.children().first().attr("role","presentation").find("."+c).attr("aria-expanded","false");var u=i.children().first();if(u.uniqueId().addClass(a),this.m_widget.isExpandable()){i.addClass("oj-collapsed");var d=document.createElement("a");e(d).attr("href","#").attr("aria-labelledby",u.get(0).id).addClass("oj-component-icon oj-clickable-icon-nocontext").addClass(h),u.prepend(d)}this.shouldUseGridRole()&&(u.get(0).removeAttribute("aria-expanded"),u.removeClass(c),u.attr("role","row"),u.children().wrapAll("<div role='gridcell' aria-expanded='false' class='oj-listview-cell-element "+c+"'></div>"));var m,p=document.createElement("ul");m=this.shouldUseGridRole()?this.isCardLayout()?"row":"presentation":"group",e(p).addClass(l).addClass(r).attr("role",m),i.append(p)}else!0===n.leaf&&(i.addClass(o),!s&&this.m_widget.getItemLayoutStyleClass&&i.addClass(this.m_widget.getItemLayoutStyleClass()));this.m_widget._isSelectionEnabled()&&this.isSelectable(n)&&this.m_widget.getFocusItem(i).attr("aria-selected",!1),this.m_widget.itemRenderComplete(i[0],n),this.signalTaskEnd()},t.TreeDataProviderContentHandler.prototype._handleFetchError=function(t){null!=this.m_widget?(this.signalTaskStart("handling fetch error: "+t),u.error(t),this.m_widget.renderComplete(),this.signalTaskEnd()):u.info("handleFetchError: widget has already been destroyed")},t.TreeDataProviderContentHandler.prototype.Expand=function(t,e){this.signalTaskStart("expanding an item");var i,n=this.GetKey(t[0]),s=t.children("ul")[0];this.isSkeletonSupport()&&(i=setTimeout(function(){this._renderExpandSkeletons(s)}.bind(this),this.m_widget._getShowStatusDelay())),this._fetchChildren(n,s,function(t){i&&clearTimeout(i),e(t),s.classList.remove("oj-listview-skeleton-container")},function(){this._destroyExpandSkeletons(s),this._handleFetchError()}.bind(this)),this.signalTaskEnd()},t.TreeDataProviderContentHandler.prototype.Collapse=function(t){var e=this.getTemplateEngine();e&&e.clean(t.get(0)),t.empty()},t.TreeDataProviderContentHandler.prototype.addItemsForModelInsert=function(t,e,i,n,s,l,o){for(var a=this.getTemplateEngine(),r=0;r<t.length;r++){this.signalTaskStart("handling model add event for item: "+i[r]);var h,c=this.m_root;void 0!==n&&(c=null==n[r]?this.m_root:this.FindElementByKey(n[r]))&&c!==this.m_root&&(c=c.lastElementChild),null!=e?h=e[r]:(h=this._getIndex(l,r))>-1&&(h=s?h:h+1),this.addItem(c,h,t[r],this.getMetadata(h,i[r],t[r],c),a,this.afterRenderItemForInsertEvent.bind(this),null!=o?o[r]:null),this.signalTaskEnd()}},t.TreeDataProviderContentHandler.prototype.afterRenderItemForInsertEvent=function(e,i,n){!1===i.leaf?this.afterRenderItem(e,i,n):t.TreeDataProviderContentHandler.superclass.afterRenderItemForInsertEvent.call(this,e,i,n)},t.TreeDataProviderContentHandler.prototype.handleModelRefreshEvent=function(t){null!=this.m_root&&(this.IsReady()?(this.signalTaskStart("handling model refresh event"),this._clearEventQueue(),this.m_widget.ClearCache(),this.m_childDataProviders.clear(),this.m_widget.resetFocusBeforeRefresh(),this.fetchRows(!0),this.signalTaskEnd()):this._pushToEventQueue({type:t.type,event:t}))},t.TreeDataProviderContentHandler.prototype.renderInitialSkeletons=function(){this.m_superRoot&&(this.m_root=this.m_superRoot,this.m_superRoot=null),e(this.m_root).empty();var i=this.getRootElementHeight(),n=this.getDefaultSkeletonDimension(),s=0;if(n.width>0&&n.height>0){var l=n.height*(1+t.TreeDataProviderContentHandler.NUM_CHILD_SKELETONS);s=Math.ceil(i/l)}var o=document.createElement("li");o.setAttribute("role","presentation"),o.classList.add("oj-listview-initial-skeletons");var a=document.createElement("ul");a.setAttribute("role","presentation"),a.classList.add(this.m_widget.getGroupStyleClass()),a.classList.add("oj-listview-skeleton-container");for(var r=0;r<s;r++){a.appendChild(this.createSkeletonItem());var h=document.createElement("li"),c=document.createElement("ul");c.classList.add("oj-listview-child-skeleton"),h.appendChild(c),c.appendChild(this.createSkeletonItem()),c.appendChild(this.createSkeletonItem()),c.appendChild(this.createSkeletonItem()),a.appendChild(h)}o.appendChild(a),this.m_root.appendChild(o)},t.TreeDataProviderContentHandler.prototype._renderExpandSkeletons=function(e){e.style.maxHeight="none";for(var i=0;i<t.TreeDataProviderContentHandler.NUM_CHILD_SKELETONS;i++)e.appendChild(this.createSkeletonItem());e.classList.add("oj-listview-skeleton-container"),e.setAttribute("data-oj-initial-height",this._getExpandSkeletonHeight(e))},t.TreeDataProviderContentHandler.prototype._destroyExpandSkeletons=function(t){e(t).empty()},t.TreeDataProviderContentHandler.prototype._getExpandSkeletonHeight=function(t){return null!=this.m_expandSkeletonHeight&&0!==this.m_expandSkeletonHeight||(this.m_expandSkeletonHeight=t.offsetHeight),this.m_expandSkeletonHeight},t.StaticContentHandler=function(t,e){this.m_widget=t,this.m_root=e},t.Object.createSubclass(t.StaticContentHandler,t.Object,"oj.StaticContentHandler"),t.StaticContentHandler.prototype.Init=function(){t.StaticContentHandler.superclass.Init.call(this)},t.StaticContentHandler.prototype.Destroy=function(){this.m_root.hasAttribute("role")&&(this.restoreContent(this.m_root,0),this.unsetRootAriaProperties())},t.StaticContentHandler.prototype.IsReady=function(){return!0},t.StaticContentHandler.prototype.notifyShown=function(){},t.StaticContentHandler.prototype.notifyAttached=function(){},t.StaticContentHandler.prototype.RenderContent=function(){var t=this.m_root;if(this.shouldUseGridRole()&&this.isCardLayout()&&!this.IsHierarchical()&&e(t).children("li").length>0){e(this.m_root).children().wrapAll("<li role='presentation'><ul role='row' class='"+this.m_widget.getGroupStyleClass()+"'></ul></li>");var i=e(this.m_root).children("li").first().get(0);i.style.width="100%",i.classList.add("oj-listview-group-container"),t=i.firstElementChild}this.modifyContent(t,0),this.setRootAriaProperties(),this.m_widget.renderComplete();var n=this;s.getContext(t).getBusyContext().whenReady().then(function(){if(null!=t)for(var i=e(t).find("li."+n.m_widget.getItemElementStyleClass()),s=0;s<i.length;s++)n.m_widget.disableAllTabbableElements(i[s])})},t.StaticContentHandler.prototype.Expand=function(t,i){var n="."+this.m_widget.getGroupStyleClass(),s=e(t).children(n)[0];e(s).css("display",""),i.call(null,s)},t.StaticContentHandler.prototype.Collapse=function(t){},t.StaticContentHandler.prototype.IsHierarchical=function(){return null==this.m_hier&&(this.m_hier=e(this.m_root).children("li").children("ul").length>0),this.m_hier},t.StaticContentHandler.prototype.restoreContent=function(t,i){var n=this.m_widget.getGroupStyleClass(),s=this.m_widget.getGroupCollapseStyleClass(),l=this.m_widget.getGroupExpandStyleClass(),o=this.m_widget.getGroupItemStyleClass(),a=this.m_widget.getItemStyleClass(),r=this.m_widget.getItemElementStyleClass(),h=null;this.m_widget.getItemLayoutStyleClass&&(h=this.m_widget.getItemLayoutStyleClass());var c=t.firstElementChild;c&&c.classList.contains("oj-listview-group-container")&&e(c).children().unwrap().children().unwrap();for(var u=t.children,d=0;d<u.length;d++){var m=e(u[d]);if(m.hasClass(r)){this.unsetAriaProperties(m.get(0)),m.hasClass("oj-listview-card")&&(m.removeClass("oj-listview-card").removeClass("oj-listview-card-animated").removeClass("oj-card-initial-exit-animation"),m[0].style.opacity=1),m.removeClass(r).removeClass(a).removeClass(h).removeClass(this.m_widget.getDepthStyleClass(i)).removeClass("gridline-hidden").removeClass("oj-listview-item").removeClass("oj-listview-item-element").removeClass("oj-skipfocus").removeClass("oj-focus").removeClass("oj-hover").removeClass("oj-expanded").removeClass("oj-collapsed").removeClass("oj-selected");var p=m.children("ul");if(p.length>0){m.children("."+o).children().unwrap(),this.shouldUseGridRole()&&this.unsetGroupAriaProperties(m),m.children(".oj-component-icon").remove();var _=e(p[0]);_.removeClass(n).removeClass(l).removeClass(s).removeAttr("role"),this.restoreContent(_[0],i+1)}}}},t.StaticContentHandler.prototype.modifyContent=function(t,i){for(var n=this.m_widget.getItemStyleClass(),s=this.m_widget.getItemElementStyleClass(),l=this.m_widget.getGroupStyleClass(),o=this.m_widget.getGroupItemStyleClass(!0),a=this.m_widget.getGroupCollapseStyleClass(),r=this.m_widget.getCollapseIconStyleClass(),h=this.m_widget.getFocusedElementStyleClass(),c=t.children,u=this.m_widget.isExpandable(),d=0;d<c.length;d++){var m=e(c[d]),p=this.createContext(m);this.setAriaProperties(m,p),m.uniqueId().addClass(s),i>0&&m.addClass(this.m_widget.getDepthStyleClass(i)),this.isFocusable(p)||m.addClass("oj-skipfocus");var _=m.children("ul");if(_.length>0){this.m_hier=!0,m.children(":not(ul)").wrapAll("<div></div>");var g=m.children().first();g.addClass(o);var f=this.getItemsCount(_[0]);if(f>0){if(m.hasClass(h)?(m.removeClass(h),g.addClass(h).attr("aria-expanded","false")):(g.attr("role","presentation"),g.find("."+h).attr("aria-expanded","false")),u){m.addClass("oj-collapsed"),g.uniqueId();var v=document.createElement("a");e(v).attr("href","#").attr("role","button").attr("aria-labelledby",g.get(0).id).addClass("oj-component-icon oj-clickable-icon-nocontext").addClass(r),g.prepend(v)}}else g.addClass("oj-empty");this.shouldUseGridRole()&&this.setGroupAriaProperties(g,f);var y,S=e(_[0]);y=this.shouldUseGridRole()?this.isCardLayout()?"row":"presentation":"group",S.addClass(l).addClass(a).attr("role",y).css("display","none"),this.modifyContent(S[0],i+1)}else m.addClass(n);this.m_widget._isSelectionEnabled()&&this.isSelectable(p)&&this.m_widget.getFocusItem(m).attr("aria-selected",!1),this.m_widget.itemRenderComplete(m[0],p)}},t.StaticContentHandler.prototype.setRootAriaProperties=function(){this.shouldUseGridRole()?this.m_root.setAttribute("role","grid"):this.IsHierarchical()?this.m_root.setAttribute("role","tree"):this.m_root.setAttribute("role","listbox")},t.StaticContentHandler.prototype.unsetRootAriaProperties=function(){this.m_root.removeAttribute("role")},t.StaticContentHandler.prototype.getItemsCount=function(t){return e(t).children("li").length},t.StaticContentHandler.prototype.createContext=function(t){var e={};if(e.key=t.attr("id"),e.parentElement=t.children().first()[0],e.index=t.index(),e.data=t[0],e.component=this.m_widget.getWidgetConstructor(),e=this.m_widget._FixRendererContext(e),this.IsHierarchical()){e.leaf=0===t.children("ul").length;var i=t.parents("li."+this.m_widget.getItemElementStyleClass());e.depth=i.length,0===i.length?e.parentKey=null:e.parentKey=i.first().attr("id")}return e},t.StaticContentHandler.prototype.setAriaProperties=function(t,e){var i=this.m_widget.getSingleFocusableElement(t);this.shouldUseGridRole()?null==e.leaf||e.leaf?this.isCardLayout()?i.attr("role","gridcell"):(t.attr("role","row"),i!==t?i.attr("role","gridcell"):i.children().wrapAll("<div role='gridcell' class='oj-listview-cell-element'></div>")):(t.attr("role","presentation"),i!==t&&i.attr("role","gridcell")):(i.attr("role",this.IsHierarchical()?"treeitem":"option"),i!==t&&t.attr("role","presentation")),i.addClass(this.m_widget.getFocusedElementStyleClass())},t.StaticContentHandler.prototype.setGroupAriaProperties=function(t,e){var i=this.m_widget.getFocusedElementStyleClass();t.get(0).removeAttribute("aria-expanded"),t.removeClass(i),t.attr("role","row"),t.children().wrapAll("<div role='gridcell' aria-expanded='false' class='oj-listview-cell-element "+i+"'></div>"),this.isCardLayout()&&e>1&&t.children().first().attr("aria-colspan",e)},t.StaticContentHandler.prototype.unsetGroupAriaProperties=function(t){t.children("div").first().children().unwrap()},t.StaticContentHandler.prototype.unsetAriaProperties=function(t){h.enableAllFocusableElements(t);var i,n=this.m_widget.getGroupItemStyleClass(!0),s=this.m_widget.getFocusedElementStyleClass(),l=t.firstElementChild;if(l&&e(l).hasClass(n)){if(0===(i=e(l).children("."+s).first()).length)return}else i=this.m_widget.getSingleFocusableElement(e(t));i.removeAttr("role"),i.removeAttr("aria-selected"),i.removeAttr("aria-expanded"),i.removeClass(this.m_widget.getFocusedElementStyleClass()),this.shouldUseGridRole()&&!this.isCardLayout()&&(i!==t?(e(t).removeAttr("role"),i.children().first().children().unwrap()):i.children().first().children().unwrap().children().unwrap())},t.StaticContentHandler.prototype.GetKey=function(t){return e(t).attr("id")},t.StaticContentHandler.prototype.FindElementByKey=function(t){return document.getElementById(t)},t.StaticContentHandler.prototype.isFocusable=function(t){return this.m_widget.getItemFocusable(t)},t.StaticContentHandler.prototype.isSelectable=function(t){return this.m_widget.getItemSelectable(t)},t.StaticContentHandler.prototype.isCardLayout=function(){return this.m_widget.isCardLayout()},t.StaticContentHandler.prototype.shouldUseGridRole=function(){return this.m_widget.ShouldUseGridRole()},t.StaticContentHandler.prototype.createKeyMap=function(t){var e=new m;return t?(t.forEach(function(t,i){e.set(i,t)}),e):e},t.StaticContentHandler.prototype.createKeySet=function(t){return new d(t)},t.KeyMap=function(){},t.KeyMap.prototype.set=function(t,e){void 0===this._mapKeys&&void 0===this._mapValues&&(this._mapKeys=[],this._mapValues=[]);var i=this._mapKeys.indexOf(t);i>-1?this._mapValues.splice(i,1,e):(this._mapKeys.push(t),this._mapValues.push(e))},t.KeyMap.prototype.get=function(t){if(this._mapKeys&&this._mapValues){var e=this._mapKeys.indexOf(t);if(e>-1&&this._mapValues.length>e)return this._mapValues[e]}return null},t.KeyMap.prototype.deleteValue=function(t){for(var e=this._mapValues.indexOf(t);e>-1;)this._mapValues.splice(e,1),this._mapKeys.splice(e,1),e=this._mapValues.indexOf(t,e)};var _=function(){this.createKeyMap=function(t){var e=new m;return t?(t.forEach(function(t,i){e.set(i,t)}),e):e},this.createKeySet=function(t){return new d(t)}};_.call(t.StaticContentHandler.prototype),_.call(t.TreeDataProviderContentHandler.prototype),_.call(n.IteratingDataProviderContentHandler.prototype),t._ojListViewExpandedKeySet=function(){t._ojListViewExpandedKeySet.superclass.constructor.call(this)},t.Object.createSubclass(t._ojListViewExpandedKeySet,t.ExpandedKeySet,"ListViewExpandedKeySet");var g=function(i,n){var s=function(){};return t.Object.createSubclass(s,i,""),s.prototype=e.extend(s.prototype,n),s};t._ojListView=g(Object,{LEFT_KEY:37,RIGHT_KEY:39,DOWN_KEY:40,UP_KEY:38,TAB_KEY:9,ENTER_KEY:13,ESC_KEY:27,F2_KEY:113,SPACE_KEY:32,STATE_EXPANDED:0,STATE_COLLAPSED:1,STATE_NONE:2,MINIMUM_ITEM_HEIGHT:20,init:function(i){var n=this;this.readinessStack=[],this.element=i.element,this.ojContext=i.ojContext,this.OuterWrapper=i.OuterWrapper,this.options=i,this.element.uniqueId().addClass(this.GetStyleClass()+" oj-component-initnode"),this.OuterWrapper&&this.element[0].setAttribute("data-oj-context",""),this.signalTaskStart("Initializing"),this._rootTabIndexSet=!1,this.SetRootElementTabIndex();var s=this.GetDnDContext();s&&(this.m_dndContext=s,this.ojContext._on(this.element,{dragstart:function(t){return s._handleDragStart(t)},dragenter:function(t){return s._handleDragEnter(t)},dragover:function(t){return s._handleDragOver(t)},dragleave:function(t){return s._handleDragLeave(t)},dragend:function(t){return n.m_preActive=!1,s._handleDragEnd(t)},drag:function(t){return s._handleDrag(t)},drop:function(t){return n.m_preActive=!1,s._handleDrop(t)}})),this._touchStartListener=function(t){t.originalEvent||(t=e.Event(t)),n.touchStartEvent=t,n.HandleMouseDownOrTouchStart(t)},this.ojContext._IsCustomElement()?this.element[0].addEventListener("touchstart",this._touchStartListener,{passive:!0}):this.ojContext._on(this.element,{touchstart:this._touchStartListener}),this.ojContext._on(this.element,{click:function(t){n.HandleMouseClick(t),n.touchStartEvent=null},touchend:function(t){n.touchStartEvent&&t.changedTouches.length&&(document.elementFromPoint(t.changedTouches[0].clientX,t.changedTouches[0].clientY)!==n.touchStartEvent.target&&(n.touchStartEvent=null));n.HandleTouchEndOrCancel(t)},touchcancel:function(t){n.touchStartEvent=null,n.HandleTouchEndOrCancel(t)},mousedown:function(t){0===t.button?n._recentTouch()||n.HandleMouseDownOrTouchStart(t):n.m_preActive=!0},mouseup:function(t){n._handleMouseUpOrPanMove(t),n.m_preActive=!1},mouseout:function(t){n._handleMouseOut(t)},mouseover:function(t){n._handleMouseOver(t)},keydown:function(t){n.HandleKeyDown(t)},keyup:function(t){n.HandleKeyUp(t)},ojpanmove:function(t){n._handleMouseUpOrPanMove(t)}}),this.ojContext._on(this.ojContext.element,{focus:function(t){n.HandleFocus(t)},blur:function(t){n.HandleBlur(t)}}),t.AgentUtils.getAgentInfo().browser===t.AgentUtils.BROWSER.FIREFOX&&this._isComponentFocusable()&&(this._rootTabIndexSet=!0,this.getListContainer().attr("tabIndex",-1)),this.ojContext._on(this.ojContext.element,{focusin:function(t){n.HandleFocus(t)},focusout:function(t){n.HandleFocusOut(t)}}),this.ojContext._focusable({applyHighlight:n.ShouldApplyHighlight(),recentPointer:n.RecentPointerCallback(),setupHandlers:function(t,e){n._focusInHandler=t,n._focusOutHandler=e}})},isAvailable:function(){return null!=this.m_contentHandler},_initContentHandler:function(){this.signalTaskStart("Initialize ContentHandler");var e=this,i=function(t){e.m_contentHandler=t,t.RenderContent(),e.signalTaskEnd(),e._registerResizeListener(e.getListContainer()[0]),e._registerScrollHandler()},n=this.GetOption("data");null!=n?this.CreateDataContentHandler(n).then(i,function(){e.signalTaskEnd()}):(this._removeNoData(),i(new t.StaticContentHandler(this,this.element[0])))},setupResources:function(){this.ojContext.document.bind("touchend.ojlistview touchcancel.ojlistview",this.HandleTouchEndOrCancel.bind(this)),this._syncSelectionWithKeySet(),this._initContentHandler(),this._updateGridlines()},releaseResources:function(){this.ojContext.document.off(".ojlistview"),this.DestroyContentHandler(!0),this._unregisterResizeListener(this.getListContainer()),this._unregisterScrollHandler(),this._resetState()},_isSelectedOptionExposed:function(){return this.ShouldUseGridRole()},_syncSelectionWithKeySet:function(){var e=this.GetOption("selection"),i=this.GetOption("selected");if(this._isSelectedOptionExposed()&&i&&(i.isAddAll()||i.values&&i.values().size>0))return e=[],i.isAddAll()?(e.inverted=!0,i.deletedValues().forEach(function(t){e.push(t)})):i.values().forEach(function(t){e.push(t)}),void this.SetOption("selection",e,{_context:{internalSet:!0},changed:!0});var n=!1;null==i&&(i=new t.KeySetImpl,n=!0),e.length>0&&i.values&&0===i.values().size&&(i=i.add(e),n=!0),n&&this.SetOption("selected",i,{_context:{internalSet:!0},changed:!0})},afterCreate:function(){this._buildList(),this.signalTaskEnd()},_isAnimateCards:function(){return this.isCardDisplayMode()&&this.m_contentHandler&&!this.m_contentHandler.IsHierarchical()},refresh:function(){var t=this.element[0].querySelectorAll(".oj-listview-card");if(t.length>0){var e=this;this.signalTaskStart("Exit animation"),this._applyExitAnimation(t).then(function(){e._refresh(),e.signalTaskEnd()})}else this._refresh()},_applyExitAnimation(t){var e=this.element[0];return new Promise(function(i){var n=function(){e.removeEventListener("animationend",n),i(!0)};e.addEventListener("animationend",n),t.forEach(function(t){t.style.animationDelay="0ms",t.classList.remove("oj-actioncard-initial-entrance-animation"),t.classList.remove("oj-actioncard-loadmore-entrance-animation"),t.classList.add("oj-actioncard-initial-exit-animation")})})},_refresh:function(){this._resetInternal(),this.signalTaskStart("Refresh"),this.SetAriaProperties(),this._initContentHandler(),this._updateGridlines(),this.resetFocusBeforeRefresh(),this.signalTaskEnd()},resetFocusBeforeRefresh:function(){this.element[0].contains(document.activeElement)&&(this.m_active=null,this.SetRootElementTabIndex(),this.element[0].focus())},whenReady:function(){return this.readyPromise},destroy:function(){this.element.removeClass(this.GetStyleClass()+" oj-component-initnode"),this._unregisterResizeListener(this.getListContainer()),this._resetInternal(),t.DomUtils.unwrap(this.element,this.getListContainer())},adjustScrollPositionValueOnRefresh:function(){var t=null==this.GetOption("scrollPosition")?{}:this.GetOption("scrollPosition"),e=this.GetOption("selection");this._isSelectionEnabled()&&e.length>0?null!=this.m_selectionFrontier&&this.m_selectionFrontier.length>0?t.key=this.GetKey(this.m_selectionFrontier[0]):t.key=e[0]:(t.y=0,t.key=null,t.index=0),t.x=0,t.offsetX=0,t.offsetY=0,this.SetOption("scrollPosition",t,{_context:{internalSet:!0},changed:!1})},_clearBusyState:function(){if(this.readinessStack&&this.readinessStack.length>0)for(u.warn("ListView did not end with a clean state, this could happen if ListView is detached before fetch is complete.  State: "+this.readinessStack);this.readinessStack.length>0;)this.signalTaskEnd()},_resetInternal:function(){this.UnsetAriaProperties(),this._cleanupTabbableElementProperties(this.element),this.DestroyContentHandler(),this._resetState()},_resetState:function(){this.m_active=null,this.m_isExpandAll=null,this.m_disclosing=null,this.m_itemHeight=null,this.m_keyElemMap=null,this.m_clientHeight=null,this.m_scrollHeight=null,this.m_clientWidth=null,this.m_scrollWidth=null,this.m_closestParent=null,this.m_noDataContent=null,this.m_gridlinesVisible=null,this.m_gridlinePlaceholder=null,this.ClearCache(),this._clearFocusoutTimeout(),this._clearFocusoutBusyState(),null!=this.m_dndContext&&this.m_dndContext.reset()},notifyAttached:function(){null!=this.m_contentHandler&&(this.syncScrollPosition(),this.m_contentHandler.notifyAttached())},notifyDetached:function(){this.getListContainer().removeClass("oj-focus-ancestor"),null!=this.m_active&&e(this.m_active.elem).removeClass("oj-focus oj-focus-highlight"),null!=this.m_hoverItem&&this._unhighlightElem(this.m_hoverItem,"oj-hover")},notifyShown:function(){null!=this.m_contentHandler&&(this.syncScrollPosition(),this.m_contentHandler.notifyShown())},getNodeBySubId:function(t){var i;if(null==t)return this.element[0];var n=t.subId;if("oj-listview-disclosure"===n||"oj-listview-icon"===n){if(null!=(i=t.key)){var s=this.FindElementByKey(i);if(null!=s){var l=e(s).find(".oj-clickable-icon-nocontext").first();if(this._isExpandCollapseIcon(l))return l.get(0)}}}else if("oj-listview-item"===n&&null!=(i=t.key))return this.FindElementByKey(i);return null},getSubIdByNode:function(t){if(null!=t&&this._isExpandCollapseIcon(t)){var e=this.FindItem(t);if(null!=e&&e.length>0){var i=this.GetKey(e[0]);if(null!=i)return{subId:"oj-listview-disclosure",key:i}}}return null},getContextByNode:function(t){var e=this.FindItem(t);if(null!=e&&e.length>0){var i=this.GetKey(e[0]);if(null!=i){var n=e.parent(),s={subId:"oj-listview-item",key:i,index:n.children("."+this.getItemElementStyleClass()).index(e)};return n.get(0)!==this.element.get(0)&&(s.parent=n.parent().get(0)),e.children().first().hasClass(this.getGroupItemStyleClass())?s.group=!0:s.group=!1,s}}return null},getDataForVisibleItem:function(t){var i,n=t.key;if(null!=n&&(i=this.FindElementByKey(n)),null==i){var s=t.index,l=t.parent;l=null==l?this.element.get(0):e(l).children("ul."+this.getGroupStyleClass()).first(),i=e(l).children("li").get(s)}return null!=i&&e(i).hasClass(this.getItemStyleClass())?this._getDataForItem(i):null},_getDataForItem:function(t){return null==this.GetOption("data")?t:e.data(t,"data")},_getMetadataForItem:function(t){return e.data(t,"metadata")},ShouldRegisterResizeListener:function(t){return t&&this.m_contentHandler&&this.m_contentHandler.HandleResize&&this.m_contentHandler.shouldHandleResize&&this.m_contentHandler.shouldHandleResize()},_unregisterResizeListener:function(e){e&&this._resizeHandler&&t.DomUtils.removeResizeListener(e,this._resizeHandler)},_registerResizeListener:function(e){this._unregisterResizeListener(e),this.ShouldRegisterResizeListener(e)&&(null==this._resizeHandler&&(this._resizeHandler=this.HandleResize.bind(this)),t.DomUtils.addResizeListener(e,this._resizeHandler))},GetDnDContext:function(){var e=this.GetOption("dnd");if(!(null===e||null===e.drag&&null===e.drop&&e.reorder&&"disabled"===e.reorder.items))return void 0!==t.ListViewDndContext?new t.ListViewDndContext(this):void 0},HandleResize:function(t,e){t>0&&e>0&&null!=this.m_contentHandler&&this.m_contentHandler.HandleResize&&this.m_contentHandler.HandleResize(t,e),this.m_clientHeight=null,this.m_scrollHeight=null,this.m_clientWidth=null,this.m_scrollWidth=null},ShouldApplyHighlight:function(){return!0},RecentPointerCallback:function(){return function(){return!1}},ShouldRefresh:function(t){return null!=t.data||null!=t.drillMode||null!=t.groupHeaderPosition||null!=t.item||null!=t.scrollPolicy||null!=t.scrollPolicyOptions||null!=t.gridlines||null!=t.display},_isKeySet:function(t){return void 0!==t.isAddAll&&(void 0!==t.values||void 0!==t.deletedValues)},_shouldExpand:function(t,e){return this._isKeySet(e)?e.has(t):!this.ojContext._IsCustomElement()&&"all"===e||!!Array.isArray(e)&&e.indexOf(t)>-1},setOptions:function(t,i){if(this.ShouldRefresh(t))return!0;if(null!=t.expanded&&this.m_contentHandler.IsHierarchical()){this._collapsedKeys=void 0;var n=t.expanded;this.signalTaskStart("Set expanded option"),this._ignoreExpanded=!0;try{for(var s="."+this.getGroupItemStyleClass(),l=this.element.find(s),o=0;o<l.length;o++){var a=l[o],r=this.GetKey(a.parentNode);this._shouldExpand(r,n)?this.expandKey(r,!0,!0,!0,!1):this.collapseKey(r,!0,!0,!1)}}finally{this._ignoreExpanded=void 0,this.signalTaskEnd()}}if(null!=t.currentItem){var h=this.FindElementByKey(t.currentItem);if(null!=h&&(h=e(h),!this.SkipFocus(h))){var c=document.activeElement;c&&this.element.get(0).contains(c)?this.ActiveAndFocus(h,null):this._setActive(h,null,!0)}}else null===t.currentItem&&(this.UnhighlightActive(),this.m_active=null,this.SetRootElementTabIndex());if(this.HandleSelectionOption(t),null!=t.selectionMode&&(this.SetAriaProperties(),this.UpdateItemAriaProperties(t.selectionMode)),null!=t.scrollTop){var u=this._getScroller(),d=t.scrollTop;null==d||isNaN(d)||(u.scrollTop=d)}return null!=t.scrollPosition&&(this.syncScrollPosition(t.scrollPosition),delete t.scrollPosition),this._shouldDragSelectedItems()&&null!=this.m_active&&null!=t.dnd&&null!=t.dnd.reorder&&("enabled"===t.dnd.reorder.items?this.m_dndContext._setItemDraggable(this.m_active.elem):"disabled"===t.dnd.reorder.items&&this.m_dndContext._unsetItemDraggable(this.m_active.elem)),!1},isFirstSelectedItem:function(e){var i=this.GetOption("firstSelectedItem");return i&&t.KeyUtils.equals(i.key,e)},setFirstSelectedItem:function(t,e){var i={key:t,data:e};this.SetOption("firstSelectedItem",i,{_context:{originalEvent:null,internalSet:!0},changed:!0})},_updateFirstSelectedItem:function(t){var e;if(t.isAddAll())for(var i=this._getItemsCache(),n=0;n<i.length;n++){var s=this.m_contentHandler.GetKey(i[n]);if(t.has(s)){e=s;break}}else e=t.values().values().next().value;if(null!=e){var l=this.getDataForVisibleItem({key:e});this.setFirstSelectedItem(e,l)}},HandleSelectionOption:function(t){if(null!=t.selection||null!=t.selected){var e=t.selected;if(null!=e&&e.isAddAll()){for(var i=this._getItemsCache(),n=0;n<i.length;n++)this._applySelection(i[n],this.m_contentHandler.GetKey(i[n]));t.selection=d.KeySetUtils.toArray(e)}else{var s,l=null!=e?e.values():t.selection,o=this._cloneSelection(l);if(t.selection=o,e=(e=(e=this.GetOption("selected")).clear()).add(o),t.selected=e,this.m_selectionFrontier){var a=this.GetKey(this.m_selectionFrontier.get(0));s=e.has(a)?this.m_selectionFrontier:void 0}this._clearSelection(!1,s);for(var r=0;r<o.length;r++){var h=this.FindElementByKey(o[r]);null!=h&&this._applySelection(h,o[r])}}null!=e&&this._updateFirstSelectedItem(e)}},Trigger:function(t,e,i){return this.ojContext._trigger(t,e,i)},SetOption:function(t,e,i){this.ojContext.option(t,e,i)},GetOption:function(t){return this.ojContext.option(t)},_getBusyDescription:function(t){return"The component identified by '"+(this.ojContext._IsCustomElement()?this.GetRootElement().attr("id"):this.element.attr("id"))+"', "+t},signalTaskStart:function(t){var e=this;if(this.readinessStack){if(0===this.readinessStack.length){this.readyPromise=new Promise(function(t){e.readyResolve=t});var i=s.getContext(this.element[0]).getBusyContext(),n=null!=t?{description:this._getBusyDescription(t)}:{};e.busyStateResolve=i.addBusyState(n)}this.readinessStack.push(null!=t?t:"unknown task")}},signalTaskEnd:function(){this.readinessStack&&this.readinessStack.length>0&&(this.readinessStack.pop(),0===this.readinessStack.length&&(this.readyResolve(null),this.busyStateResolve(null),this.busyStateResolve=null))},isReady:function(){return null==this.busyStateResolve},throwError:function(t){if(this.readinessStack)for(;this.readinessStack.length>0;)this.signalTaskEnd();throw t},getItems:function(t){var i=this,n=[];return e.each(t,function(t,e){var s=i.FindElementByKey(e);null!=s&&n.push(s)}),n},isCardDisplayMode:function(){return"card"===this.GetOption("display")},isCardLayout:function(){return!!(this.ojContext._IsCustomElement()?this.GetRootElement():this.element).hasClass("oj-listview-card-layout")||this.isCardDisplayMode()},ShouldUseGridRole:function(){return!0},ShouldUpdateScrollPosition:function(){return this.ShouldUseGridRole()&&this.ojContext._IsCustomElement()},DestroyContentHandler:function(t){null!=this.m_contentHandler&&(this.m_contentHandler.Destroy(t),delete this.m_contentHandler,this.m_contentHandler=null),this._clearBusyState()},CreateDataContentHandler:function(e){var s;if(this.showStatusText(),void 0!==t.TableDataSource&&e instanceof t.TableDataSource)s=new n.IteratingDataProviderContentHandler(this,this.element[0],new t.TableDataSourceAdapter(e));else{if(void 0!==t.TreeDataSource&&e instanceof t.TreeDataSource){var l=t.__getRequirePromise("./ojtreedataprovideradapter",i);if(!l)throw new Error("Cannot adapt a TreeDataSource if require() is not available");var o=this;return l.then(function(i){return new t.TreeDataProviderContentHandler(o,o.element[0],new i(e))})}t.DataProviderFeatureChecker.isTreeDataProvider(e)?s=new t.TreeDataProviderContentHandler(this,this.element[0],e):t.DataProviderFeatureChecker.isDataProvider(e)?s=new n.IteratingDataProviderContentHandler(this,this.element[0],e):this.throwError("Invalid data or missing module")}return Promise.resolve(s)},UpdateActiveDescendant:function(t){this.element.attr("aria-activedescendant",t.attr("id"))},SetAriaProperties:function(){this._isMultipleSelection()?this.element.attr("aria-multiselectable",!0):this._isSelectionEnabled()&&this.element.attr("aria-multiselectable",!1)},UnsetAriaProperties:function(){this.element.removeAttr("aria-activedescendant").removeAttr("aria-multiselectable")},UpdateItemAriaProperties:function(t){var i,n=this;"none"===t?(this.element.removeAttr("aria-multiselectable"),i=function(t){n.getFocusItem(t).removeAttr("aria-selected")}):("single"===t?this.element.attr("aria-multiselectable",!1):this.element.attr("aria-multiselectable",!0),i=function(t){var e=n.getFocusItem(t),i=e.parent();e.attr("aria-selected",i.hasClass("oj-selected"))});for(var s=this._getItemsCache(),l=0;l<s.length;l++)i(e(s[l]))},_buildList:function(t){var e=this.getListContainer();this.SetAriaProperties(),this.m_elementOffset=this.element.get(0).offsetTop;var i=this._buildStatus();e.append(i),this.m_status=i;var n=this._buildAccInfo();e.append(n),this.m_accInfo=n,this._isTouchSupport()&&null!=this.m_dndContext&&e.append(this._buildAccInstructionText())},_buildStatus:function(){var t=e(document.createElement("div"));t.addClass("oj-icon").addClass(this.getLoadingStatusIconStyleClass());var i=e(document.createElement("div"));return i.addClass(this.getStatusMessageStyleClass()).addClass(this.getStatusStyleClass()).attr({id:this._createSubId("status"),role:"status"}),i.append(t),i},_buildAccInfo:function(){var t=e(document.createElement("div"));return t.addClass("oj-helper-hidden-accessible").attr({id:this._createSubId("info"),role:"status"}),t},_buildAccInstructionText:function(){var t=e(document.createElement("div"));return t.addClass("oj-helper-hidden-accessible").attr({id:this._createSubId("instr")}),t.text(this.ojContext.getTranslatedString("accessibleReorderTouchInstructionText")),t},_setAccInfoText:function(t){""!==t&&this.m_accInfo.text()!==t&&this.m_accInfo.text(t)},updateStatusFetchStart:function(){var t=this.ojContext.getTranslatedString("msgFetchingData");this._setAccInfoText(t)},updateStatusFetchEnd:function(t){var e=this.ojContext.getTranslatedString("msgItemsAppended",{count:t});this._setAccInfoText(e)},isSkeletonSupport:function(){return!(!this.ShouldUseGridRole()||!this.m_contentHandler.renderInitialSkeletons)&&"skeleton"===this._getOptionDefaults().loadIndicator},_showLoadingIcon:function(){var t=this.ojContext.getTranslatedString("msgFetchingData"),e=this.getListContainer();if(this.m_status.attr("aria-label",t).css("left",Math.max(0,e.outerWidth()/2-this.m_status.outerWidth()/2)).css("top",Math.max(0,e.outerHeight()/2-this.m_status.outerHeight()/2)).show(),void 0===this.m_minHeightSet){var i=this.m_status.get(0).offsetHeight,n=e.get(0).offsetHeight;e.css("minHeight",Math.max(n,i+this.getListContainerBorderWidth())),this.m_minHeightSet=!0}},_showLoadingSkeleton:function(){this.m_contentHandler.renderInitialSkeletons()},showStatusText:function(){var t=this;this.m_showStatusTimeout||(this.m_showStatusTimeout=setTimeout(function(){e(document.getElementById(t._createSubId("empty"))).remove(),null!=t.m_contentHandler&&(t.isSkeletonSupport()?t._showLoadingSkeleton():t._showLoadingIcon()),t.m_showStatusTimeout=null},this._getShowStatusDelay()))},_getShowStatusDelay:function(){var t=this._getOptionDefaults(),e=parseInt(t.showIndicatorDelay,10);return isNaN(e)?0:e},hideStatusText:function(){this.m_showStatusTimeout&&(clearTimeout(this.m_showStatusTimeout),this.m_showStatusTimeout=null),this.m_status.hide()},GetRootElement:function(){return this.getListContainer()},getListContainer:function(){return null==this.m_container&&(this.m_container=this._createListContainer()),this.m_container},_createListContainer:function(){var t;return this.OuterWrapper?t=e(this.OuterWrapper):(t=e(document.createElement("div")),this.element.parent()[0].replaceChild(t[0],this.element[0])),t.addClass(this.GetContainerStyleClass()).addClass("oj-component"),t.prepend(this.element),t},_getEmptyText:function(){return this.ojContext.getTranslatedString("msgNoData")},_buildEmptyText:function(){var t=this._getEmptyText(),e=document.createElement("li");return e.id=this._createSubId("empty"),e.className=this.getEmptyTextStyleClass()+" "+this.getEmptyTextMarkerClass(),e.textContent=t,e},GetState:function(t){var e=this.getFocusItem(t).attr("aria-expanded");return"true"===e?this.STATE_EXPANDED:"false"===e?this.STATE_COLLAPSED:this.STATE_NONE},SetState:function(t,e){var i=this.isExpandable();e===this.STATE_EXPANDED?(this.getFocusItem(t).attr("aria-expanded","true"),i&&t.removeClass("oj-collapsed").addClass("oj-expanded")):e===this.STATE_COLLAPSED&&(this.getFocusItem(t).attr("aria-expanded","false"),i&&t.removeClass("oj-expanded").addClass("oj-collapsed"))},_getItemOption:function(t,e,i){var n=this.GetOption("item")[t];return"function"==typeof n&&i?n.call(this,e):n},getItemFocusable:function(t){return this._getItemOption("focusable",t,!0)},getItemSelectable:function(t){return this.getItemFocusable(t)&&this._getItemOption("selectable",t,!0)},_getItemRenderer:function(){var t=this._getItemOption("renderer",null,!1);return"function"!=typeof t?null:this._WrapCustomElementRenderer(t)},getItemTemplate:function(){if(void 0===this.m_template&&(this.m_template=null,this.ojContext._IsCustomElement())){var t=this.GetSlotMap().itemTemplate;t&&t.length>0&&"template"===t[0].tagName.toLowerCase()&&(this.m_template=t[0])}return this.m_template},getAs:function(){return this.GetOption("as")},GetSlotMap:function(){return t.BaseCustomElementBridge.getSlotMap(this.GetRootElement()[0])},itemInsertComplete:function(t,e){this.m_clientHeight=null,this.m_scrollHeight=null},BeforeInsertItem:function(){},itemRemoveComplete:function(i,n){if(null!=this.m_active&&t.Object.compareValues(this.m_active.key,this.GetKey(i))){this._setActionableMode(!1,!0);var s=i.nextElementSibling;null!=s&&e(s).hasClass(this.getItemElementStyleClass())||null!=(s=i.previousElementSibling)&&e(s).hasClass(this.getItemElementStyleClass())||this.SetOption("currentItem",null),null!=s&&e(s).hasClass(this.getItemElementStyleClass())&&this.SetCurrentItem(e(s),null,!n)}null!=i&&i.id&&null!=this.m_keyElemMap&&this.m_keyElemMap.delete(i.id),this.m_clientHeight=null,this.m_scrollHeight=null},itemRenderComplete:function(t,i){null!=this.m_dndContext&&this.m_dndContext.itemRenderComplete(t);var n=i.key;if(this._isSelectionEnabled()){var s,l=this.GetOption("selected"),o=l.has(n);this.IsSelectable(t)?(o&&(this._applySelection(t,n),this._isMultipleSelection()||l.values().size>1&&(s=this.FindElementByKey(n),l=l.clear().add([n]),this._setSelectionOption(l,null,s,i.data))),l.values&&0===l.values().size&&this._isSelectionRequired()&&(this._applySelection(t,n),l=l.clear().add([n]),this._setSelectionOption(l,null,[t],i.data))):o&&!l.isAddAll()&&(s=[],(l=l.delete([n])).values().forEach(function(t){s.push(this.FindElementByKey(t))},this),this._setSelectionOption(l,null,s))}var a=this;if(this.m_contentHandler.IsHierarchical()&&null==this._ignoreExpanded&&this.GetState(e(t))===this.STATE_COLLAPSED){var r=this.GetOption("expanded");this._isExpandAll(n)?(this.ojContext._IsCustomElement()||null==this._collapsedKeys)&&this.ExpandItem(e(t),null,!1,null,!1,!1,!1):!this.ojContext._IsCustomElement()&&Array.isArray(r)?e.each(r,function(i,s){s!==n||null!=a._collapsedKeys&&-1!==a._collapsedKeys.indexOf(s)||a.ExpandItem(e(t),null,!1,null,!1,!1,!1)}):r.has&&r.has(n)&&this.ExpandItem(e(t),null,!1,null,!1,!1,!1)}null!=this.m_active&&n===this.m_active.key&&null!=this.m_active.elem&&t!==this.m_active.elem.get(0)&&(this.m_active.elem=e(t))},_addNoData:function(){if(null==this.m_noDataContent){if(this.ojContext._IsCustomElement()){var t=this.GetSlotMap().noData;if(t&&t.length>0&&"template"===t[0].tagName.toLowerCase()){var e=document.createElement("li");e.id=this._createSubId("empty"),e.classList.add("oj-listview-no-data-container"),e.classList.add("oj-listview-no-data-item");var i=this.element;i.addClass("oj-listview-no-data-container"),i.append(e);var n=this;return this.signalTaskStart("run no data template"),void l.__getTemplateEngine().then(function(i){i.execute(n.GetRootElement(),t[0],{},null).forEach(function(t){e.appendChild(t)}),n.m_noDataContent=e,n.m_engine=i,n.signalTaskEnd()},function(t){throw n.signalTaskEnd(),new Error("Error loading template engine: "+t)})}}this.element.append(this._buildEmptyText())}else this.element.addClass("oj-listview-no-data-container"),this.element.append(this.m_noDataContent)},_removeNoData:function(){var t=document.getElementById(this._createSubId("empty"));t&&(this.m_engine&&this.m_engine.clean(t),t.parentNode.classList.remove("oj-listview-no-data-container"),t.parentNode.removeChild(t))},renderComplete:function(){var t=this;if(this.hideStatusText(),this._removeNoData(),this.m_items=null,this.m_groupItems=null,this._isEmptyGrid()&&this.element[0].removeChild(this.element[0].children[0]),this._isEmpty())return this._addNoData(),void this.Trigger("ready",null,{});var i=this.GetOption("currentItem");if(null!=i){var n=this.FindElementByKey(i);if(null==n)this.SetOption("currentItem",null);else if(null==this.m_active&&!this.SkipFocus(e(n))){var s=document.activeElement;s&&this.element.get(0).contains(s)?this.ActiveAndFocus(e(n),null):this._setActive(e(n),null,!0)}}if(this.getListContainer().hasClass("oj-focus-ancestor")&&null==this.m_active&&null==i&&!this._isTouchSupport()&&this._initFocus(),this.m_scrollAndFetch=void 0,this.m_ticking&&null==this.m_scrollPosition||this.syncScrollPosition(),null==this.m_keyElemMap&&this._isSelectionEnabled()&&this._isSelectionRequired()){this.signalTaskStart("validating selection entries");var l=this.GetOption("selection").slice(0);l.length>0&&this._validateSelection(l).then(function(e){0===e.validKeys.length?t._selectFirstSelectableItem():t._setSelectionOption(d.KeySetUtils.toKeySet(e.validKeys),null,null,e.validData[0].data),t.Trigger("ready",null,{}),t.signalTaskEnd()})}if(this._isSelectionEnabled()){var o=this.GetOption("firstSelectedItem");if(null==o||null==o.key){var a=this.GetOption("selected");null!=a&&this._updateFirstSelectedItem(a)}}if(null!=this.m_gridlinePlaceholder&&this.m_gridlinePlaceholder.parentNode.removeChild(this.m_gridlinePlaceholder),(void 0===this.m_contentHandler.hasMoreToFetch||this.m_contentHandler.hasMoreToFetch&&!this.m_contentHandler.hasMoreToFetch())&&this._shouldRenderGridlineForLastItem()){var r=document.createElement("li");r.setAttribute("role","presentation"),r.className="oj-listview-gridline-placeholder",this.element[0].appendChild(r),this.m_gridlinePlaceholder=r}if(this._isAnimateCards()){var h=null==this.element[0].querySelector(".oj-listview-card-animated"),c=0,u=this._getCardEntranceAnimationDelay();this.element[0].querySelectorAll(".oj-listview-card:not(.oj-listview-card-animated)").forEach(function(t){t.classList.add("oj-listview-card-animated"),t.style.opacity=0,h?(t.classList.add("oj-actioncard-initial-entrance-animation"),t.style.animationDelay=c+"ms",c=Math.min(1e3,c+u)):t.classList.add("oj-actioncard-loadmore-entrance-animation")})}this.Trigger("ready",null,{})},_getCardEntranceAnimationDelay:function(){var t=this._getOptionDefaults(),e=parseInt(t.cardAnimationDelay,10);return isNaN(e)?0:e},_validateSelection:function(t){var e=this._fetchValidRowKeyData(t);return e?e.then(function(e){for(var i=t.length-1;i>=0;i--)-1===e.validKeys.indexOf(t[i])&&t.splice(i,1);return e}):Promise.resolve({validKeys:[],validData:[]})},_fetchValidRowKeyData:function(t){var e=this.m_contentHandler.getDataProvider();if(e&&e.getCapability){var i=e.getCapability("fetchByKeys");if(i&&"lookup"===i.implementation)return new Promise(function(i){e.fetchByKeys({keys:new Set(t),scope:"global"}).then(function(t){var e=[],n=[];t.results.forEach(function(t,i){e.push(i),n.push(t)}),i({validKeys:e,validData:n})},function(){i({validKeys:[],validData:[]})})})}return null},_isEmptyGrid:function(){return this.ShouldUseGridRole()&&this.isCardLayout()&&!this.m_contentHandler.IsHierarchical()&&this.element[0].children[0]&&0===this.element[0].children[0].children[0].childElementCount},_setScrollY:function(t,e){this._skipScrollUpdate||this.signalTaskStart("waiting for scroll handler"),this._skipScrollUpdate=!0,t.scrollTop=e,this._handlePinGroupHeader()},_setScrollX:function(e,i){this._skipScrollUpdate||this.signalTaskStart("waiting for scroll handler"),this._skipScrollUpdate=!0,t.DomUtils.setScrollLeft(e,i)},_getScrollX:function(e){return t.DomUtils.getScrollLeft(e)},_validateKeys:function(t){for(var e=this,i=0;i<t.length;i++)if(null!=this.FindElementByKey(t[i]))return Promise.resolve(!0);if(this.m_contentHandler instanceof n.IteratingDataProviderContentHandler){var s=this.m_contentHandler.getDataProvider();if(s.containsKeys)return new Promise(function(i){var n=new Set;t.forEach(function(t){n.add(t)}),e.signalTaskStart("Checking for keys"),s.containsKeys({keys:n}).then(function(t){i(t.results.size>0),e.signalTaskEnd()},function(){e.signalTaskEnd(),i(!1)})})}return null},_getScrollHeight:function(){return null==this.m_scrollHeight&&(this.m_scrollHeight=this._getScroller().scrollHeight),this.m_scrollHeight},_getClientHeight:function(){return null==this.m_clientHeight&&(this.m_clientHeight=this._getScroller().clientHeight),this.m_clientHeight},_getScrollWidth:function(){return null==this.m_scrollWidth&&(this.m_scrollWidth=this._getScroller().scrollWidth),this.m_scrollWidth},_getClientWidth:function(){return null==this.m_clientWidth&&(this.m_clientWidth=this._getScroller().clientWidth),this.m_clientWidth},_isScrollable:function(){return this._isScrollableY()||this._isScrollableX()},_isScrollableX:function(){return Math.abs(this._getScrollWidth()-this._getClientWidth())>1},_isScrollableY:function(){return Math.abs(this._getScrollHeight()-this._getClientHeight())>1},syncScrollPosition:function(t,e){var i,n,s,l,o=this;if(this.ShouldUseGridRole()&&(e=void 0===e||e,this._isScrollable())){if(this.ShouldUpdateScrollPosition()){if(null!=this.m_scrollPosition?t=this.m_scrollPosition:void 0===t&&(t=this.GetOption("scrollPosition")),e&&null!=t.key){var a=this._validateKeys([t.key]);if(a)return void a.then(function(e){null!=o.m_contentHandler&&(e||delete t.key,o.syncScrollPosition(t,!1))})}if(n=(i=this._getScrollCoordinates(t)).x,s=i.y,isNaN(n)&&isNaN(s))return void(null!=this.m_scrollPosition&&(this.SetOption("scrollPosition",this._getCurrentScrollPosition(l),{_context:{originalEvent:null,internalSet:!0}}),this.signalTaskEnd(),this.m_scrollPosition=null))}void 0===i&&(s=this.GetOption("scrollTop"));var r=this._getScroller();if(l=r.scrollTop,!isNaN(n)&&isNaN(s)||!isNaN(n)&&s===l&&n!==this._getScrollX(r,n)){if(!this._isScrollableX())return void this._clearOutstandingScrollPosition();this._setScrollX(r,n);var h=this.GetOption("scrollPosition"),c={x:n=this._getScrollX(r),y:h.y,index:h.index,key:h.key,offsetX:n,offsetY:h.offsetY};h.parent&&(c.parent=h.parent),this.SetOption("scrollPosition",c,{_context:{originalEvent:null,internalSet:!0}})}else if(s!==l){var u=!1;if(this._isScrollableY()&&(this._setScrollY(r,s),u=!0),!isNaN(n)&&n!==this._getScrollX(r,n)&&this._isScrollableX()&&(this._setScrollX(r,n),u=!0),!u)return void this._clearOutstandingScrollPosition();if(l=r.scrollTop,Math.abs(l-s)>=1&&this.m_contentHandler.hasMoreToFetch&&this.m_contentHandler.hasMoreToFetch())return null==this.m_scrollPosition&&this.signalTaskStart("Scroll position needs to resolve further"),this.m_scrollAndFetch=!0,void(this.m_scrollPosition=t);this.SetOption("scrollPosition",this._getCurrentScrollPosition(l),{_context:{originalEvent:null,internalSet:!0}})}else t&&(null==t.key||isNaN(t.index))&&this.SetOption("scrollPosition",this._getCurrentScrollPosition(l),{_context:{originalEvent:null,internalSet:!0}});this._clearOutstandingScrollPosition()}},_clearOutstandingScrollPosition:function(){null!=this.m_scrollPosition&&(this.signalTaskEnd(),this.m_scrollPosition=null)},restoreCurrentItemFocus:function(t){this._isInViewport(t)&&this._setActive(e(t),null,!0)},ClearCache:function(t){this.m_items=null,this.m_groupItems=null,t&&null!=this.m_keyElemMap&&this.m_keyElemMap.clear()},getMinimumCountForViewport:function(){var t=this._getItemHeight(),e=this._getClientHeight();return!isNaN(t)&&t>0?Math.ceil(e/t):1},_isInViewport:function(t){var e=t.offsetTop,i=this._getItemHeight(),n=isNaN(i)?t.offsetHeight:i,s=this.GetOption("scrollPosition"),l=null==s||isNaN(s.y)?0:s.y;return!(e+n<l||e>l+this._getClientHeight())},_getAnimatedActions:function(){return["add","remove","update","expand","collapse"]},StartAnimation:function(t,e,i){if(this._getAnimatedActions().indexOf(e)>-1&&!this._isInViewport(t))return Promise.resolve(null);var n,s;if(null==i&&(i=this.getAnimationEffect(e)),"expand"===e){var l=t.getAttribute("data-oj-initial-height");if(null!=l&&!isNaN(l)){(i=Object.assign({},i)).startMaxHeight=l+"px";var o=t.offsetHeight;o<l&&(s=t.style.maxHeight,n=t.style.height,t.style.maxHeight="none",t.style.height=l+"px",i.effect="collapse",i.endMaxHeight=o+"px"),t.removeAttribute("data-oj-initial-height")}}var a=c.startAnimation(t,e,i,this.ojContext);return void 0!==n&&a.then(function(){t.style.height=n,t.style.maxHeight=s}),a},notifyContextMenuGesture:function(t,i,n){if(null==this.m_noDataContent&&this.IsNodeEditableOrClickable(e(i.target)))return!1;var s,l=e(i.target).closest("."+this.getItemElementStyleClass());this.PrepareContextMenu(l),l.length>0&&!this.SkipFocus(e(l[0]))&&this.SetCurrentItem(e(l[0]),null),2===i.button?s=this._findItem(e(i.target)):null!=this.m_active&&(s=this.m_active.elem),null==s&&(s=this.element);var o={launcher:s,initialFocus:"menu"};"keyboard"===n&&(o.position={my:"start top",at:"start bottom",of:s}),this.ojContext._OpenContextMenu(i,n,o)},PrepareContextMenu:function(t){null!=this.m_dndContext&&this.m_dndContext.prepareContextMenu(this.ojContext._GetContextMenu())},IsElementEditableOrClickable:function(t){return null!=t.prop("nodeName").match(/^INPUT|SELECT|OPTION|BUTTON|^A\b|TEXTAREA/)},IsNodeEditableOrClickable:function(t){for(;null!=t&&t[0]!==this.element[0]&&"LI"!==t.prop("nodeName");)if(3===t[0].nodeType)t=t.parent();else{var e=t.attr("tabIndex"),i=t.attr("data-oj-tabindex");if(null!=e&&e>=0&&!t.hasClass(this.getFocusedElementStyleClass())&&!t.hasClass("oj-listview-cell-element"))return!0;if(this.IsElementEditableOrClickable(t)&&(-1!==e||-1!==i))return!0;t=t.parent()}return!1},disableAllTabbableElements:function(t,i){var n=e(t);(n.hasClass(this.getItemStyleClass())||(n=e(n.get(0).firstElementChild)),n.children().first().hasClass("oj-listview-cell-element")&&(n=e(n.get(0).firstElementChild)),n[0])&&e(h.disableAllFocusableElements(n[0],!0,i)).each(function(){e(this).removeAttr("data-first").removeAttr("data-last")})},_disableAllTabbableElementsBeforeItem:function(t){for(var e=this._getItemsCache(),i=e.index(t),n=0;n<=i;n++)this.disableAllTabbableElements(e[n],!0)},_disableAllTabbableElementsAfterItem:function(t){var e=this._getItemsCache(),i=e.index(t);if(-1!==i)for(var n=i;n<=e.length-1;n++)this.disableAllTabbableElements(e[n],!0)},_enableAllTabbableElements:function(t){var i=e(h.enableAllFocusableElements(t[0]));(i=i.filter(":visible")).first().attr("data-first","true"),i.last().attr("data-last","true")},_cleanupTabbableElementProperties:function(t){e(t).find("["+h._DATA_OJ_TABMOD+"]").removeAttr("tabIndex").removeAttr(h._DATA_OJ_TABMOD).removeAttr("data-first").removeAttr("data-last")},SkipFocus:function(t){return t.hasClass("oj-skipfocus")},GetFocusElement:function(){if(this.getListContainer().hasClass("oj-focus-ancestor")){if(this.m_active)return this.getFocusItem(this.m_active.elem)[0];var t=this.element.children("."+this.getEmptyTextStyleClass()).first();if(t.length>0&&0===t.attr("tabIndex"))return t[0]}return this.element[0]},_isFocusBlurTriggeredByDescendent:function(t){return void 0===t.relatedTarget||!(null==t.relatedTarget||!e.contains(this.ojContext.element.get(0),t.relatedTarget))},HandleFocus:function(t){if(this._clearFocusoutTimeout(),this._clearFocusoutBusyState(),this.getListContainer().addClass("oj-focus-ancestor"),null==this.m_active){var i=this._findItem(e(t.target));this.m_preActive||this._isFocusBlurTriggeredByDescendent(t)||null!=i&&!this.SkipFocus(i)||this._initFocus(t)}else this.m_preActive||t.target!==this.ojContext.element[0]||this._isFocusBlurTriggeredByDescendent(t)||(this.HighlightActive(),this._focusItem(this.m_active.elem)),this.RemoveRootElementTabIndex(),this._setTabIndex(this.m_active.elem)},_initFocus:function(t){for(var i=this._getItemsCache(),n=0;n<i.length;n++){var s=e(i[n]);if(!this.SkipFocus(s)){this.SetCurrentItem(s,t);break}}if(0===i.length){var l=this.element.children("."+this.getEmptyTextStyleClass()).first();l.length>0&&(l.attr("tabIndex",0),l.focus(),this.RemoveRootElementTabIndex())}},HandleFocusOut:function(t){this.HandleBlur(t)},_supportRelatedTargetOnBlur:function(){var e=t.AgentUtils.getAgentInfo();return!(e.browser===t.AgentUtils.BROWSER.FIREFOX&&parseInt(e.browserVersion,10)<48)},_isExtraBlurEvent:function(e){var i=t.AgentUtils.getAgentInfo();return null==e.relatedTarget&&i.browser===t.AgentUtils.BROWSER.IE&&e.target===this.ojContext.element.get(0)},_clearFocusoutTimeout:function(){this._focusoutTimeout&&(clearTimeout(this._focusoutTimeout),this._focusoutTimeout=null)},_setFocusoutBusyState:function(){this._focusoutResolveFunc||(this._focusoutResolveFunc=this._addComponentBusyState("is handling focusout."))},_addComponentBusyState:function(t){var e=s.getContext(this.element[0]).getBusyContext(),i={description:"The component identified by '"+this.element[0].id+"' "+t};return e.addBusyState(i)},_clearFocusoutBusyState:function(){this._focusoutResolveFunc&&(this._focusoutResolveFunc(),this._focusoutResolveFunc=null)},HandleBlur:function(t){this._clearFocusoutTimeout(),this._isExpandCollapseIcon(t.target)&&this._focusOutHandler(e(t.target)),this._isActionableMode()?(this._setFocusoutBusyState(),this._focusoutTimeout=setTimeout(function(){this._doBlur(),this._clearFocusoutBusyState()}.bind(this),100)):this._isFocusBlurTriggeredByDescendent(t)||this.m_preActive||this._doBlur()},_doBlur:function(){if(this._isActionableMode()&&this._exitActionableMode(),this.getListContainer().removeClass("oj-focus-ancestor"),this.UnhighlightActive(),null!=this.m_active)this._resetTabIndex(this.m_active.elem),this._removeSkipItemAriaLabel(this.m_active.elem);else{var t=this.element.children("."+this.getEmptyTextStyleClass()).first();t.length>0&&t.removeAttr("tabIndex")}this.SetRootElementTabIndex()},_handleMouseOut:function(t){var e=this.FindItem(t.target);null!=e&&(this.m_hoverItem=null,this._unhighlightElem(e,"oj-hover"))},_handleMouseOver:function(t){if(!(this._recentTouch()||this.m_dndContext&&this.m_dndContext.isDndInProgress())){var e=this.FindItem(t.target);null==e||this.SkipFocus(e)||(this.m_hoverItem=e,this._highlightElem(e,"oj-hover"))}},_recentTouch:function(){return Date.now()-this._lastTouch<500},HandleKeyDown:function(t){if(this.isExpandable()){var e=t.key||t.keyCode;if("ArrowLeft"===e||"Left"===e||e===this.LEFT_KEY||"ArrowRight"===e||"Right"===e||e===this.RIGHT_KEY){var i=this.m_active.elem;if("ArrowLeft"===e||"Left"===e||e===this.LEFT_KEY){if(this.GetState(i)===this.STATE_EXPANDED)return void this.CollapseItem(i,t,!0,this.m_active.key,!0,!0)}else if(this.GetState(i)===this.STATE_COLLAPSED)return void this.ExpandItem(i,t,!0,this.m_active.key,!0,!0,!0)}}var n=this.HandleSelectionOrActiveKeyDown(t);null!=this.m_dndContext&&(n=n||this.m_dndContext.HandleKeyDown(t)),!0===n&&t.preventDefault(),this.m_keyProcessed=n},HandleKeyUp:function(t){var e=t.key||t.keyCode;"Escape"!==e&&"Esc"!==e&&e!==this.ESC_KEY||!this.m_keyProcessed||t.stopPropagation(),this.m_keyProcessed=void 0},_handleMouseUpOrPanMove:function(t){this.m_preActiveItem&&this._unhighlightElem(this.m_preActiveItem,"oj-focus"),null!=this.m_dndContext&&this.m_dragger&&this.m_dragger.get(0)!==t.target&&(this.m_dndContext._unsetDraggable(this.m_dragger),this.m_dragger=null)},_isNodeFocusable:function(t){return null!==t&&(!!t.hasAttribute(h._DATA_OJ_TABMOD)||(["a","input","select","textarea","button","object"].indexOf(t.tagName.toLowerCase())>-1||!e(t).hasClass(this.getItemElementStyleClass())&&this._isNodeFocusable(t.parentNode)))},HandleMouseDownOrTouchStart:function(t){var i=e(t.target);null!=this.m_dndContext&&(this.m_dndContext._setDraggable(i),this.m_dragger=i);var n=this._findItem(i,!0);null!=n&&this._isClickthroughDisabled(n)&&(this.m_preActive=!0,n=null),null==n||0===n.length||this.SkipFocus(n)||i.hasClass("oj-listview-drag-handle")||(this.m_preActive=!0,this.getListContainer().hasClass("oj-focus-ancestor")||this.getListContainer().addClass("oj-focus-ancestor"),this.m_preActiveItem=n,this._highlightElem(n,"oj-focus"),this._makeFocusable(n),!this.element[0].contains(document.activeElement)||n.get(0).contains(document.activeElement)||this._isNodeFocusable(i[0])||this._focusItem(n),this.RemoveRootElementTabIndex(),null!=this.m_active&&this.m_active.elem.get(0)!==n.get(0)&&this._resetTabIndex(this.m_active.elem),t.originalEvent.touches&&t.originalEvent.touches.length>0&&(this.m_touchPos={x:t.originalEvent.changedTouches[0].pageX,y:t.originalEvent.changedTouches[0].pageY}))},HandleTouchEndOrCancel:function(t){if(null!=this.m_preActiveItem&&(this._unhighlightElem(this.m_preActiveItem,"oj-focus"),null!=this.m_touchPos)){var e=this.m_preActiveItem.offset(),i=this.getAnimationEffect("pointerUp");i.offsetX=this.m_touchPos.x-e.left+"px",i.offsetY=this.m_touchPos.y-e.top+"px";var n,s=this.m_preActiveItem.children("."+this.getGroupItemStyleClass());n=s.length>0?s.get(0):this.getFocusItem(this.m_preActiveItem).get(0);for(var l=t.target,o=n.querySelectorAll("input, select, button, a, textarea, object, [tabIndex]:not([tabIndex='-1'])"),a=0;a<o.length;a++)if(o[a].contains(l)){n=l;break}this.StartAnimation(n,"pointerUp",i),this.m_touchPos=null}this._lastTouch=Date.now(),this._handleMouseOut(t)},_enterActionableMode:function(){var t=this.m_active.elem;this.disableAllTabbableElements(t),this._enableAllTabbableElements(t),t.find("[data-first]").length>0&&this._setActionableMode(!0)},_exitActionableMode:function(){this._setActionableMode(!1),this.disableAllTabbableElements(this.m_active.elem)},HandleMouseClick:function(t){if(0===t.button){var i=this.getCollapseIconStyleClass(),n=this.getExpandIconStyleClass(),s=this.getGroupItemStyleClass(),l=e(t.target);if(l.hasClass(n))this._collapse(t),t.preventDefault();else if(l.hasClass(i))this._expand(t),t.preventDefault();else{var o=this._findItem(l);if(null==o||0===o.length||this.SkipFocus(o))return;if(this._isActionableMode()&&null!=this.m_active&&this.m_active.elem.get(0)!==o.get(0)&&this._exitActionableMode(),this.getListContainer().hasClass("oj-focus-ancestor")||this.getListContainer().addClass("oj-focus-ancestor"),this._isSelectionEnabled()&&this.IsSelectable(o[0])){var a=t.originalEvent.sourceCapabilities&&t.originalEvent.sourceCapabilities.firesTouchEvents;(this._isTouchSupport()&&(a||null!=this.touchStartEvent&&this.touchStartEvent.target===t.target)?this._handleTouchSelection(o,t):this.HandleClickSelection(o,t))||this.HandleClickActive(o,t),this.ShouldUseGridRole()&&t.target===o.get(0)&&this._focusItem(o),this._shouldDragSelectedItems()&&this.m_dndContext.setSelectionDraggable()}else this.HandleClickActive(o,t);if(this._fireActionEvent(o.get(0),t),this._isInputElement(l.get(0)))return void this._enterActionableMode();this.isExpandable()&&l.closest("."+s)&&(this.GetState(o)===this.STATE_COLLAPSED?this._expand(t):this.GetState(o)===this.STATE_EXPANDED&&this._collapse(t))}}},_fireActionEvent:function(t,e){if(!this._isActionableMode()){var i={context:{key:this.GetKey(t),data:this._getDataForItem(t),metadata:this._getMetadataForItem(t)}};this.Trigger("itemAction",e,i)}},_shouldDragSelectedItems:function(){return null!=this.m_dndContext&&!this.m_dndContext.shouldDragCurrentItem()},_isTouchSupport:function(){return t.DomUtils.isTouchSupported()},_isNonWindowTouch:function(){return this._isTouchSupport()&&t.AgentUtils.getAgentInfo().os!==t.AgentUtils.OS.WINDOWS},_ctrlEquivalent:function(e){return t.DomUtils.isMetaKeyPressed(e)},_createSubId:function(t){return[this.element.attr("id"),t].join(":")},FindItem:function(t){return e(t).hasClass(this.getGroupStyleClass())?null:e(t).closest("."+this.getItemElementStyleClass())},_isClickthroughDisabled:function(t){return t.hasClass("oj-clickthrough-disabled")},_findItem:function(t,e){if(t.hasClass(this.getGroupStyleClass()))return null;for(var i=t;i.length>0;){if(this._isClickthroughDisabled(i))return e?i:null;if(i.hasClass(this.getItemElementStyleClass()))return i;i=i.parent()}return null},getListContainerBorderWidth:function(){return null==this.m_borderWidth&&(this.m_borderWidth=parseInt(this.getListContainer().css("border-top-width"),10)+parseInt(this.getListContainer().css("border-bottom-width"),10)),this.m_borderWidth},scrollToItem:function(t){var i=t.key;if(null!=i){var n=this.FindElementByKey(i);if(null!=n)if(e(n).hasClass(this.getItemStyleClass()))this._scrollToVisible(n);else{var s=e(n).children("."+this.getGroupItemStyleClass()).first();this._scrollToGroupHeader(s.get(0))}}},_scrollToVisible:function(t){var i=0,n=t.offsetTop,s=t.offsetHeight,l=this.getListContainer()[0],o=l.scrollTop,a=l.offsetHeight;if(null!=this.m_groupItemToPin){var r=parseInt(this.m_groupItemToPin.style.top,10),h=e(this.m_groupItemToPin).outerHeight();n<=r&&r<n+s?i=(s+n-r)/2:n>=r&&n<r+h&&(i=(r+h-n)/2)}else if(null!=this.m_closestParent){var c=this.m_closestParent.firstElementChild;c.classList.contains("oj-sticky")&&(i=c.offsetTop+c.offsetHeight-n)}if(n>=o&&n+s<=o+a)i>0&&(l.scrollTop=o-i);else{var u=Math.max(0,Math.min(n-i,Math.abs(n+s-a)));u>o&&(u+=this.getListContainerBorderWidth()),l.scrollTop=u}},GetKey:function(t){return this.m_contentHandler.GetKey(t)},FindElementByKey:function(t){if(null!=this.m_keyElemMap){var e=this.m_keyElemMap.get(t);if(null!=e)return document.getElementById(e)}return this.m_contentHandler?this.m_contentHandler.FindElementByKey(t):null},GetIndexOf:function(e,i){for(var n=0;n<e.length;n++)if(i===e[n]||t.Object.compareValues(i,e[n]))return n;return-1},_isExpandCollapseIcon:function(t){return e(t).hasClass(this.getExpandIconStyleClass())||e(t).hasClass(this.getCollapseIconStyleClass())},_isGridlinesVisible:function(){if(null==this.m_gridlinesVisible){var t=this.GetOption("gridlines");this.m_gridlinesVisible="hidden"!==t.item}return this.m_gridlinesVisible},_isTopBottomGridlinesVisible:function(){var t=this._getOptionDefaults().gridlines;return t?{top:t.top,bottom:t.bottom}:{top:!0,bottom:!0}},_updateGridlines:function(){var t=this._isTopBottomGridlinesVisible(),e=this.GetRootElement()[0];e.classList.remove("gridline-top-hidden"),e.classList.remove("gridline-bottom-hidden"),"hidden"===t.top&&e.classList.add("gridline-top-hidden"),"hidden"===t.bottom&&e.classList.add("gridline-bottom-hidden")},_shouldRenderGridlineForLastItem:function(){var t=this.GetOption("gridlines");if(null!=t){var e=this._isTopBottomGridlinesVisible();if("visible"===t.item&&"hidden"===e.bottom)return!0}return!1},IsArrowKey:function(t){return this.isCardLayout()?"ArrowUp"===t||"Up"===t||t===this.UP_KEY||"ArrowDown"===t||"Down"===t||t===this.DOWN_KEY||"ArrowLeft"===t||"Left"===t||t===this.LEFT_KEY||"ArrowRight"===t||"Right"===t||t===this.RIGHT_KEY:"ArrowUp"===t||"Up"===t||t===this.UP_KEY||"ArrowDown"===t||"Down"===t||t===this.DOWN_KEY},_getItemsCache:function(){if(null==this.m_items){var t=this.getGroupCollapseStyleClass(),i="."+this.getItemElementStyleClass()+":visible";this.m_items=this.element.find(i).filter(function(){return!e(this).parent().hasClass(t)||!e(this).parent().parent().hasClass("oj-collapsed")}).map(function(t,e){var i=e.parentElement;return i&&i.classList.contains("oj-animate-add")?i:e})}return this.m_items},_handleLastItemKeyboardFocus:function(t){var i=t.get(0).nextElementSibling;if(null==i||!e(i).hasClass(this.getItemElementStyleClass())){if(this.m_contentHandler.IsHierarchical()&&t.parent().hasClass(this.getGroupStyleClass())&&null!=t.parent().parent().get(0).nextElementSibling)return;var n=this._getScroller(),s=this._getScrollHeight();n.scrollTop<s&&(n.scrollTop=s)}},HandleArrowKeys:function(t,i,n){if(!this.m_contentHandler.IsReady())return!0;var s;s=!i||this.m_isNavigate?this.m_active.elem:this.m_selectionFrontier;var l=!1;switch(t){case this.UP_KEY:case"Up":case"ArrowUp":this.isCardLayout()&&e(s).hasClass(this.getItemStyleClass())?this._gotoItemAbove(s,i,n):this._gotoPrevItem(s,i,n),l=!0;break;case this.DOWN_KEY:case"Down":case"ArrowDown":this.isCardLayout()&&e(s).hasClass(this.getItemStyleClass())?this._gotoItemBelow(s,i,n):this._gotoNextItem(s,i,n),l=!0;break;case this.LEFT_KEY:case"Left":case"ArrowLeft":case this.RIGHT_KEY:case"Right":case"ArrowRight":this.isCardLayout()&&("rtl"===this.ojContext._GetReadingDirection()&&(t="ArrowLeft"===t||"Left"===t||t===this.LEFT_KEY?"ArrowRight":"ArrowLeft"),"ArrowLeft"===t||"Left"===t||t===this.LEFT_KEY?this._gotoPrevItem(s,i,n):this._gotoNextItem(s,i,n),l=!0)}return l},_gotoNextItem:function(t,i,n){var s=this._getItemsCache(),l=s.index(t)+1;if(l<s.length){for(var o=e(s[l]);this.SkipFocus(o);){if((l+=1)===s.length)return;o=e(s[l])}i?(this._extendSelection(o,n),this.m_isNavigate=!1):(this.SetCurrentItem(o,n),this.m_isNavigate=!0),this._handleLastItemKeyboardFocus(o)}},_gotoPrevItem:function(t,i,n){var s=this._getItemsCache(),l=s.index(t)-1;if(l>=0){for(var o=e(s[l]);this.SkipFocus(o);){if((l-=1)<0)return;o=e(s[l])}i?(this._extendSelection(o,n),this.m_isNavigate=!1):(this.SetCurrentItem(o,n),this.m_isNavigate=!0)}},_getColumnCount:function(t){var e,i;return t.each(function(t){var n=this.offsetTop;if(void 0===i)i=n;else if(i!==n)return!1;e=t}),e+1},_updateSkipItemAriaLabel:function(t,i){var n=this._createSubId("extra_info");if(null==this.m_skipAriaLabelText){var s=e(document.createElement("div"));s.addClass("oj-helper-hidden-accessible").attr("id",n),this.getListContainer().append(s),this.m_skipAriaLabelText=s}this.m_skipAriaLabelText.text(this.ojContext.getTranslatedString("accessibleNavigateSkipItems",{numSkip:i}));var l=this.getFocusItem(t);l.uniqueId().attr("aria-labelledby",n+" "+l.prop("id"))},_removeSkipItemAriaLabel:function(t){var e=this.getFocusItem(t);e.length>0&&e.get(0).removeAttribute("aria-labelledby")},_gotoItemAbove:function(t,i,n){var s,l;if(t.hasClass(this.getItemElementStyleClass())){var o=t.parent(),a=o.children("li."+this.getItemElementStyleClass()),r=this._getColumnCount(a),h=a.index(t),c=h-r;if(c<0?o.hasClass(this.getGroupStyleClass())&&o.parent().hasClass(this.getItemElementStyleClass())&&(s=o.parent(),l=h):(s=e(a.get(c)),l=r-1),s&&s.length>0){if(this.SkipFocus(s))return;i?(this._extendSelection(s,n),this.m_isNavigate=!1):(null!=l&&l>0&&this._updateSkipItemAriaLabel(s,l),this.SetCurrentItem(s,n),this.m_isNavigate=!0)}}else this._gotoPrevItem(t)},_gotoItemBelow:function(t,i,n){var s,l;if(t.hasClass(this.getItemElementStyleClass())){var o=t.parent(),a=o.children("li."+this.getItemElementStyleClass()),r=this._getColumnCount(a),h=a.index(t),c=h+r;if(c>=a.length){var u=Math.ceil(a.length/r);l=a.length-1-h,h<Math.max(0,(u-1)*r)?(s=a.last(),l-=1):o.hasClass(this.getGroupStyleClass())&&(s=o.parent().next("li."+this.getItemElementStyleClass()))}else s=e(a.get(c)),l=r-1;if(s.length>0){if(this.SkipFocus(s))return;i?(this._extendSelection(s,n),this.m_isNavigate=!1):(null!=l&&l>0&&this._updateSkipItemAriaLabel(s,l),this.SetCurrentItem(s,n),this.m_isNavigate=!0),this._handleLastItemKeyboardFocus(s)}}else this._gotoNextItem(t)},_isActionableMode:function(){return"actionable"===this.m_keyMode},_setActionableMode:function(t,e){this.m_keyMode=t?"actionable":"navigation",t||e||this.element[0].focus()},getFocusItem:function(t){if(!t.hasClass(this.getFocusedElementStyleClass()))return e(t.find("."+this.getFocusedElementStyleClass()).first());if(this.ShouldUseGridRole()&&"row"===t.attr("role")){var i=t.children(".oj-listview-cell-element").first();return 0===i.length?t.children().first():i}return t},SetRootElementTabIndex:function(){this._isComponentFocusable()&&this.element.attr("tabIndex",0)},RemoveRootElementTabIndex:function(){this.element.removeAttr("tabIndex")},_isComponentFocusable:function(){var t=this.ojContext._IsCustomElement()?this.GetRootElement():this.element;return this._rootTabIndexSet||-1!==parseInt(t.attr("tabIndex"),10)},_setTabIndex:function(t){this._isComponentFocusable()&&this.getFocusItem(t).attr("tabIndex",0)},_resetTabIndex:function(t){var e=!0;"presentation"===t.attr("role")&&(e=!1);var i=this.getFocusItem(t);e?i.removeAttr("tabIndex"):i.attr("tabIndex",-1)},_makeFocusable:function(t){this._setTabIndex(t)},getSingleFocusableElement:function(t){var e="a, input, select, textarea, button",i=t.children(e);return 1===i.length&&0===i.first().find(e).length?i.first():t},_setCurrentItemOption:function(t,i,n){var s={item:this.ojContext._IsCustomElement()?n:e(n)};this.SetOption("currentItem",t,{_context:{originalEvent:i,internalSet:!0,extraData:s},changed:!0})},_setActive:function(t,e,i){var n;if(null!=t){var s=t[0],l=this.GetKey(s);if(null==this.m_active||l!==this.m_active.key){var o={key:l,item:t};return null!=this.m_active&&(o.previousKey=this.m_active.key,o.previousItem=this.m_active.elem,this._shouldDragSelectedItems()&&this._isTouchSupport()&&this.m_dndContext._unsetDraggable(o.previousItem),this._removeSkipItemAriaLabel(o.previousItem)),!!this.Trigger("beforeCurrentItem",e,o)&&(n={key:l,elem:t},this.m_active=n,this._shouldDragSelectedItems()&&this._isTouchSupport()&&this.m_dndContext._setDraggable(t),void 0!==i&&i||(this._makeFocusable(t),this.HighlightActive(),(null==e||e.originalEvent&&"click"!==e.originalEvent.type)&&this._focusItem(t),this.RemoveRootElementTabIndex(),o.previousItem&&this._resetTabIndex(o.previousItem)),!0)}l===this.m_active.key&&(n={key:l,elem:t},this.m_active=n,void 0!==i&&i||(this._makeFocusable(t),this.RemoveRootElementTabIndex()))}else this.m_active=null;return!1},_focusItem:function(t){this.getFocusItem(t).focus()},HighlightActive:function(){if(null!=this.m_active&&this.getListContainer().hasClass("oj-focus-ancestor")){var t=this.m_active.elem;this._highlightElem(t,"oj-focus")}},UnhighlightActive:function(){null!=this.m_active&&this._unhighlightElem(this.m_active.elem,"oj-focus")},HandleClickActive:function(t,i){var n=null!=this.m_active?this.m_active.elem.get(0):null;null==n||e(n).hasClass(this.getItemStyleClass())||(n=n.firstElementChild),null!=i&&null!=n&&n!==i.target&&n.contains(i.target)||this.SetCurrentItem(t,i,!this.ShouldUseGridRole()||i.target!==t.get(0))},SetCurrentItem:function(t,e,i){this.ActiveAndFocus(t,e,i)&&this._setCurrentItemOption(this.GetKey(t[0]),e,t.get(0))},ActiveAndFocus:function(t,e,i){this._scrollToVisible(t[0]),this.UnhighlightActive();var n=this._setActive(t,e,i);return this.HighlightActive(),n},enforceSelectionRequired:function(){if(this._isSelectionEnabled()&&this._isSelectionRequired()){var t=this.GetOption("selection");(null==t||0===t.length&&!0!==t.inverted)&&this._selectFirstSelectableItem()}},_getFirstSelectableItem:function(){var t=this.element[0].querySelector(".oj-listview-cell-element[aria-selected]");return null==t?null:t.parentNode},_selectFirstSelectableItem:function(){var t=this._getFirstSelectableItem();if(t){var e=this.m_contentHandler.GetKey(t);if(null!=e){this._applySelection(t,e);var i=this.GetOption("selected");this._setSelectionOption(i.clear().add([e]),null,[t])}}},_isSelectionEnabled:function(){return"none"!==this.GetOption("selectionMode")},_isSelectionRequired:function(){return this.GetOption("selectionRequired")},_isMultipleSelection:function(){return"multiple"===this.GetOption("selectionMode")},IsSelectable:function(t){return this.getFocusItem(e(t)).get(0).hasAttribute("aria-selected")},_cloneSelection:function(t){var e=[];return t.forEach(function(t){e.push(t)}),e},_setSelectionOption:function(i,n,s,l){var o={key:null,data:null},a=d.KeySetUtils.toArray(i),r=this.GetOption("firstSelectedItem");null!=r&&(0===a.length&&null!=r.key||a[0]!==r.key&&!t.Object.compareValues(a[0],r.key)?(a.length>0&&(o={key:a[0],data:null!=l?l:this.getDataForVisibleItem({key:a[0]})}),this.SetOption("firstSelectedItem",o,{_context:{originalEvent:n,internalSet:!0},changed:!0})):void 0===r.data&&(r.data=l,o={key:r.key,data:l},this.SetOption("firstSelectedItem",o,{_context:{originalEvent:null,internalSet:!0},changed:!0})));var h={items:this.ojContext._IsCustomElement()?s:e(null==s?{}:s)};this.SetOption("selected",i,{_context:{originalEvent:n,internalSet:!0,extraData:h},changed:!0}),this.SetOption("selection",a,{_context:{originalEvent:n,internalSet:!0,extraData:h},changed:!0})},_unhighlightSelection:function(){if(null!=this.m_keyElemMap){var t=this,e=this.GetOption("selected");if(e.isAddAll())for(var i=this._getItemsCache(),n=0;n<i.length;n++)t._unhighlightElem(i[n],"oj-selected");else e.values().forEach(function(e){var i=t.FindElementByKey(e);null!=i&&t._unhighlightElem(i,"oj-selected")})}},_highlightElem:function(t,e){this.HighlightUnhighlightElem(t,e,!0)},_unhighlightElem:function(t,e){this.HighlightUnhighlightElem(t,e,!1)},HighlightUnhighlightElem:function(t,i,n){var s=e(t);"oj-selected"===i&&this.getFocusItem(s).attr("aria-selected",n?"true":"false");var l=s.children("."+this.getGroupItemStyleClass());l.length>0&&(s=e(l[0])),"oj-focus"===i?n?"actionable"!==this.m_keyMode&&this._focusInHandler(s):this._focusOutHandler(s):n?s.addClass(i):s.removeClass(i)},HandleClickSelection:function(t,e){this._scrollToVisible(t[0]);var i=this._ctrlEquivalent(e),n=e.shiftKey,s=!0;return this._isMultipleSelection()&&(i||n)?!i&&n?s=this._extendSelection(t,e):this._augmentSelectionAndFocus(t,e):s=this.SelectAndFocus(t,e),s},_handleTouchSelection:function(t,e){var i=!0;return this._isMultipleSelection()?e.shiftKey?i=this._extendSelection(t,e):this._augmentSelectionAndFocus(t,e):i=this.SelectAndFocus(t,e),i},_clearSelection:function(t,e){if(this._unhighlightSelection(),t)if(this._isSelectionRequired())this._selectFirstSelectableItem();else{var i=this.GetOption("selected");i=i.clear(),this._setSelectionOption(i,null,null)}this.m_selectionFrontier=void 0===e?null:e},SelectAndFocus:function(t,e){var i=this.GetKey(t[0]),n=this.GetOption("selected"),s=n.has(i);return!(s&&n.values&&1===n.values().size&&this._isSelectionRequired())&&(this._clearSelection(s),s||this._augmentSelectionAndFocus(t,e,n.clear()),!0)},_extendSelection:function(t,e){return null!=this.m_active&&(this.m_selectionFrontier!==t&&(this._unhighlightElem(t,"oj-focus"),this._extendSelectionRange(this.m_active.elem,t,e),!0))},_extendSelectionRange:function(t,e,i,n){!0===n?this._clearSelection(!1,this.m_selectionFrontier):this._clearSelection(!1,e),this._highlightRange(t,e,i),this.HighlightActive(),this._scrollToVisible(e[0])},_highlightRange:function(t,e,i){var n,s,l=this.GetOption("selected").clear(),o=[],a=this._getItemsCache(),r=a.index(t),h=a.index(e);r>h?(n=h,s=r):(n=r,s=h);for(var c=n;c<=s;c++){var u=a[c];if(this.IsSelectable(u)){var d=this.m_contentHandler.GetKey(u);this._applySelection(u,d),l=l.add([d]),o.push(u)}}this._setSelectionOption(l,i,o)},_applySelection:function(t,i){null==this.m_keyElemMap&&(this.m_keyElemMap=this.m_contentHandler.createKeyMap()),this.m_keyElemMap.set(i,e(t).attr("id")),this._highlightElem(t,"oj-selected")},_augmentSelectionAndFocus:function(t,i,n){var s=t,l=this.GetKey(t[0]);null==n&&(n=this.GetOption("selected"));var o=null!=this.m_active?this.m_active.elem.get(0):null;(null==o||e(o).hasClass(this.getItemStyleClass())||(o=o.firstElementChild),null==i||null!=o&&o!==i.target&&o.contains(i.target))||(this.UnhighlightActive(),this._setActive(s,i)&&this._setCurrentItemOption(l,i,s.get(0)),this.HighlightActive());if(null!=(o=null!=this.m_active?this.m_active.elem.get(0):null)&&o===s.get(0)){if(n.has(l)){if(n.values&&1===n.values().size&&this._isSelectionRequired())return;this._unhighlightElem(t,"oj-selected"),n=n.delete([l])}else this.m_selectionFrontier=t,this._applySelection(t,l),n=n.add([l]);var a=[];n.values&&n.values().forEach(function(t){a.push(this.FindElementByKey(t))},this),this._setSelectionOption(n,i,a)}else null!=n&&0===n.values().size&&this._setSelectionOption(n,i,[])},ToggleSelection:function(t,e,i){var n=this.GetOption("selected"),s=this.m_active.elem,l=this.m_active.key;if(n.has(l)){if(i||1===n.values().size&&this._isSelectionRequired())return;this._unhighlightElem(s,"oj-selected"),0===(n=n.delete([l])).values().size&&(this.m_selectionFrontier=null)}else this.IsSelectable(s[0])&&(e||(this._clearSelection(!1),n=n.clear()),this.m_selectionFrontier=s,this._applySelection(s,l),n=n.add([l]));var o=[];n.values().forEach(function(t){o.push(this.FindElementByKey(t))},this),this._setSelectionOption(n,t,o)},_isInputElement:function(t){return null!=t.nodeName.match(/^INPUT|SELECT|OPTION|TEXTAREA/)&&!t.readOnly},HandleSelectionOrActiveKeyDown:function(t){var i,n,s,l=!1;if(null==this.m_active||t.isDefaultPrevented())return!1;var o=t.key||t.keyCode,a=this.m_active.elem;if(this._isActionableMode()){if("Escape"===o||"Esc"===o||o===this.ESC_KEY)this._exitActionableMode(),this.HighlightActive(),this._focusItem(a),this._setTabIndex(a),l=!0;else if("Tab"===o||o===this.TAB_KEY){var r=this.getFocusItem(a).get(0);if(l=t.shiftKey?h.handleActionablePrevTab(t,r):h.handleActionableTab(t,r),!t.shiftKey&&l||t.shiftKey&&!l){var c=h.getFocusableElementsInNode(r)[0];c&&this._isExpandCollapseIcon(c)&&this._focusInHandler(e(c))}}}else"F2"===o||o===this.F2_KEY?(this._enterActionableMode(),(s=a.find("[data-first]")).length>0&&(s[0].focus(),this._isExpandCollapseIcon(s)&&this._focusInHandler(s),a.hasClass(this.getItemStyleClass())||(a=a.children("."+this.getGroupItemStyleClass()).first()),a.removeClass("oj-focus-highlight"))):" "!==o&&"Spacebar"!==o&&o!==this.SPACE_KEY||!this._isSelectionEnabled()?"Enter"===o||o===this.ENTER_KEY?(this._isSelectionEnabled()&&this.ToggleSelection(t,!1,!0),this._fireActionEvent(a.get(0),t)):this.IsArrowKey(o)?(i=this._ctrlEquivalent(t),n=t.shiftKey,i||(l=this.HandleArrowKeys(o,n&&this._isSelectionEnabled()&&this._isMultipleSelection(),t))):"Tab"!==o&&o!==this.TAB_KEY||(t.shiftKey?this._disableAllTabbableElementsBeforeItem(a):this._disableAllTabbableElementsAfterItem(a)):(i=this._ctrlEquivalent(t),(n=t.shiftKey)&&!i&&null!=this.m_selectionFrontier&&this._isMultipleSelection()?this._extendSelectionRange(this.m_selectionFrontier,this.m_active.elem,t,!0):this.ToggleSelection(t,i&&!n&&this._isMultipleSelection(),!1),l=!0);return l},_isDisclosing:function(t){return!(!t||!this.m_disclosing)&&this.m_disclosing.indexOf(t)>-1},_setDisclosing:function(t,e){if(null!=t)if(null==this.m_disclosing&&(this.m_disclosing=[]),e)this.m_disclosing.push(t);else for(var i=this.m_disclosing.indexOf(t);i>-1;)this.m_disclosing.splice(i,1),i=this.m_disclosing.indexOf(t)},_getOptionDefaults:function(){return null==this.defaultOptions&&(this.defaultOptions=o.parseJSONFromFontFamily(this.getOptionDefaultsStyleClass())),this.defaultOptions},getAnimationEffect:function(t){var e=this._getOptionDefaults().animation;return null==e?null:e[t]},isExpandable:function(){return"none"!==this.GetOption("drillMode")},_isExpandAll:function(e){var i=this.GetOption("expanded");if("auto"===i){if(!this.isExpandable())return!0}else if("all"===i)return!0;return!!i.isAddAll&&(!this.isExpandable()&&i instanceof t._ojListViewExpandedKeySet||i.isAddAll()&&i.has(e))},expandKey:function(t,i,n,s,l){var o=this.FindElementByKey(t);null!=o&&this.ExpandItem(e(o),null,l,t,i,s,n)},_expand:function(t){var e=this.FindItem(t.target);null!=e&&e.length>0&&this.ExpandItem(e,t,!0,null,!0,!0,!0)},ExpandItem:function(t,e,i,n,s,l,o){if(this.GetState(t)===this.STATE_COLLAPSED&&(null==n&&(n=this.GetKey(t[0])),!i||!this._isDisclosing(n))){var a={item:t,key:n};if(o)if(!this.Trigger("beforeExpand",e,a)&&s)return;if(this.signalTaskStart("Expand item: "+n),i&&this._setDisclosing(n,!0),this.m_contentHandler.Expand(t,function(t){this._expandSuccess(t,i,e,a,l)}.bind(this)),this.m_items=null,null!=e&&e.stopPropagation(),!this.ojContext._IsCustomElement()&&null!=this._collapsedKeys){var r=this._collapsedKeys.indexOf(n);-1!==r&&this._collapsedKeys.splice(r,1)}this.signalTaskEnd()}},_expandSuccess:function(t,i,n,s,l){var o=this;this.signalTaskStart("Handle results from successful expand"),t.key=s.key;var a=this.AnimateExpand(e(t),i,n),r=t.parentNode;r=e(r),this.SetState(r,this.STATE_EXPANDED);var h=this.getCollapseIconStyleClass(),c=this.getExpandIconStyleClass(),u=this.getExpandingIconStyleClass(),d=this.getGroupItemStyleClass();r.children("."+d).find("."+h+", ."+u).removeClass(h).removeClass(u).addClass(c),l&&a.then(function(){if(o.ojContext._IsCustomElement()){var e=o.GetOption("expanded");if(o._isKeySet(e)&&!e.has(t.key)){var i=e.add([t.key]);o.SetOption("expanded",i,{_context:{originalEvent:n,internalSet:!0},changed:!0})}}o.Trigger("expand",n,s)}),a.then(function(){o.m_clientHeight=null,o.m_scrollHeight=null,o.signalTaskEnd()})},_adjustAncestorsMaxHeight:function(t,i){t.parentsUntil("ul.oj-component-initnode","ul."+this.getGroupStyleClass()).each(function(){var t=parseInt(e(this).css("maxHeight"),10);t>0&&e(this).css("maxHeight",t+i+"px")})},AnimateExpand:function(t,i,n){var l,o=0,a=this,r=new Promise(function(t){l=t});if(i){var h=t.get(0);h.setAttribute("data-oj-context",""),s.getContext(h).getBusyContext().whenReady().then(function(){a.isAvailable()&&(h.removeAttribute("data-oj-context"),a.signalTaskStart("Animate expand of group item"),t.css("maxHeight","100%"),t.children().each(function(){o+=e(this).outerHeight(!0)}),a._isNonWindowTouch()&&a._adjustAncestorsMaxHeight(t,o),t.css("maxHeight",o+"px"),a.signalTaskStart("Kick off expand animation"),a.StartAnimation(h,"expand").then(function(){a._handleExpandTransitionEnd(t,l)}),a.signalTaskEnd())})}else t.css("maxHeight",""),this.AnimateExpandComplete(t),l(null);return r},_handleExpandTransitionEnd:function(t,e){this._isNonWindowTouch()||t.css("maxHeight",""),this.AnimateExpandComplete(t),e(null),this.signalTaskEnd()},AnimateExpandComplete:function(t){t.removeClass(this.getGroupCollapseStyleClass()).addClass(this.getGroupExpandStyleClass()),this._setDisclosing(t[0].key,!1)},collapseKey:function(t,i,n,s){var l=this.FindElementByKey(t);null!=l&&this.CollapseItem(e(l),null,s,t,i,n)},_collapse:function(t){var e=this.FindItem(t.target);null!=e&&e.length>0&&this.CollapseItem(e,t,!0,null,!0,!0)},CollapseItem:function(t,e,i,n,s,l){var o=this;if(this.GetState(t)===this.STATE_EXPANDED&&(null==n&&(n=this.GetKey(t[0])),!i||!this._isDisclosing(n))){var a={item:t,key:n};if(!!this.Trigger("beforeCollapse",e,a)||!s){this.signalTaskStart("Collapse item: "+n),i&&this._setDisclosing(n,!0);var r=this.AnimateCollapse(t,n,i,e);this.SetState(t,this.STATE_COLLAPSED);var h=this.getCollapseIconStyleClass(),c=this.getExpandIconStyleClass();t.find("."+c).first().removeClass(c).addClass(h),this.m_items=null,null!=e&&e.stopPropagation(),l&&r.then(function(){if(null!=e&&o.ojContext._IsCustomElement()){var t=o.GetOption("expanded");if(o._isKeySet(t)){var i=t.delete([n]);o.SetOption("expanded",i,{_context:{originalEvent:e,internalSet:!0},changed:!0})}}o.Trigger("collapse",e,a)}),this.ojContext._IsCustomElement()||(null==this._collapsedKeys&&(this._collapsedKeys=[]),-1===this._collapsedKeys.indexOf(n)&&this._collapsedKeys.push(n)),r.then(function(){o.m_clientHeight=null,o.m_scrollHeight=null,o.signalTaskEnd()})}}},AnimateCollapse:function(t,i,n,s){var l,o=0,a=this,r=new Promise(function(t){l=t}),h=t.children("ul").first();if(h[0].key=i,n){this.signalTaskStart("Animate collapse"),h.children().each(function(){o+=e(this).outerHeight()}),h.css("maxHeight",o+"px");var c=this.getAnimationEffect("collapse");c.persist="all",this.signalTaskStart("Kick off collapse animation");var u=h.get(0);this.StartAnimation(u,"collapse",c).then(function(){a._handleCollapseTransitionEnd(h,l)}),this.signalTaskEnd()}else h.css("maxHeight","0px"),this.AnimateCollapseComplete(h),l(null);return r},_handleCollapseTransitionEnd:function(t,e){this.AnimateCollapseComplete(t),e(null),this.signalTaskEnd()},AnimateCollapseComplete:function(t){t.removeClass(this.getGroupExpandStyleClass()).addClass(this.getGroupCollapseStyleClass()),null!=this.m_contentHandler&&this.m_contentHandler.Collapse(t),this._setDisclosing(t[0].key,!1)},getExpanded:function(){var t=[],i=this;return this._getItemsCache().each(function(){var n=e(this);i.GetState(n)===i.STATE_EXPANDED&&t.push(i.GetKey(n[0]))}),t},getWidgetConstructor:function(){return r.__GetWidgetConstructor(this.element)},GetContainerStyleClass:function(){return this._isNonWindowTouch()?"oj-listview oj-listview-container-touch":"oj-listview oj-listview-container"},GetStyleClass:function(){return"oj-listview-element"},getItemStyleClass:function(){return this.isCardDisplayMode()?"oj-listview-card":this._isGridlinesVisible()?"oj-listview-item":"oj-listview-item gridline-hidden"},getItemLayoutStyleClass:function(){return this.isCardLayout()?null:"oj-listview-item-layout"},getFocusedElementStyleClass:function(){return"oj-listview-focused-element"},getItemElementStyleClass:function(){return"oj-listview-item-element"},getGroupItemStyleClass:function(t){return t&&this._isPinGroupHeader()&&this._isPositionStickySupported()?"oj-listview-group-item oj-sticky":"oj-listview-group-item"},getGroupStyleClass:function(){return this.isCardDisplayMode()?"oj-listview-card-group":"oj-listview-group"},getGroupExpandStyleClass:function(){return""},getGroupCollapseStyleClass:function(){return this.getGroupExpandStyleClass()},getCollapseIconStyleClass:function(){return"oj-listview-collapse-icon"},getExpandIconStyleClass:function(){return"oj-listview-expand-icon"},getExpandingIconStyleClass:function(){return"oj-listview-expanding-icon"},getEmptyTextStyleClass:function(){return"oj-listview-no-data-message"},getEmptyTextMarkerClass:function(){return"oj-listview-empty-text"},getDepthStyleClass:function(t){return""},getOptionDefaultsStyleClass:function(){return"oj-listview-option-defaults"},getLoadingStatusIconStyleClass:function(){return"oj-listview-loading-icon"},getStatusMessageStyleClass:function(){return"oj-listview-status-message"},getStatusStyleClass:function(){return"oj-listview-status"},_isPositionStickySupported:function(){var e=t.AgentUtils.getAgentInfo().browser;return e!==t.AgentUtils.BROWSER.IE&&e!==t.AgentUtils.BROWSER.EDGE},_preventMouseWheelOverscroll:function(t,e){var i=e.originalEvent.deltaY;if(!isNaN(i)&&void 0!==this.m_contentHandler.hasMoreToFetch){var n=t.scrollTop;if(i>0){var s=this._getScrollHeight();this.m_contentHandler.hasMoreToFetch()&&n+this._getClientHeight()+Math.abs(i)>=s&&(t.scrollTop=s,e.preventDefault())}else n>0&&n+i<=0&&(t.scrollTop=0,e.preventDefault())}},_getScrollEventElement:function(){var t=this._getScroller();return t===document.body||t===document.documentElement?window:t},_findClosestElementToTop:function(t,i,n){var s,l=i?this._getItemsCache():e(this._getRootNodeForItems()).children("li."+this.getItemElementStyleClass());if(null==l||0===l.length)return null;var o=this.GetOption("scrollPosition");if(Math.abs(o.y-t)<this.MINIMUM_ITEM_HEIGHT&&null!=o.key&&!isNaN(o.index))if(i){var a=this.FindElementByKey(o.key);null!=a&&(s=l.index(a))}else s=o.index;isNaN(s)&&(s=Math.floor(t/n)),s=Math.min(Math.max(s,0),l.length-1);var r,h=Math.max(t,0),c=l[s],u=h-(r=0===s?0:c.offsetTop),d={index:s,elem:c,offsetTop:r,offset:u};if(Math.abs(u)<1)return d;var m=u>0;m?s+=1:s-=1;for(var p=!1;!p&&s>=0&&s<l.length;){if(r=(c=l[s]).offsetTop,p=(u=Math.abs(h-r))<1||(m?h<=r:h>=r)){(u<1||!m)&&(d={index:s,elem:c,offsetTop:r,offset:u});break}m&&d.offsetTop===r||(d={index:s,elem:c,offsetTop:r,offset:u}),m?s+=1:s-=1}return p||(s=m?l.length-1:0,d.index=s,d.elem=l[s]),d},_getRootNodeForItems:function(){return this.isCardLayout()?this.element.get(0).firstElementChild.firstElementChild:this.element.get(0)},_getItemHeight:function(){var t;null==this.m_itemHeight&&(this.m_contentHandler.IsHierarchical()?(t=this.element.children("li."+this.getItemElementStyleClass()).first()).length>0&&(this.m_itemHeight=t.get(0).firstElementChild.offsetHeight):(t=e(this._getRootNodeForItems()).children("li."+this.getItemElementStyleClass()).first()).length>0&&(this.m_itemHeight=t.get(0).offsetHeight));return this.m_itemHeight},_getCurrentScrollPosition:function(t){var i={},n=this._getScroller();void 0===t&&(t=n.scrollTop),i.x=this._getScrollX(n),i.y=t;var s=this.m_contentHandler.IsHierarchical(),l=this._getItemHeight();if(!isNaN(l)&&l>0){var o=this._findClosestElementToTop(t,s,l);if(null!=o){var a=o.elem;if(s){var r=a.parentNode;r!==this.element.get(0)&&(this.m_closestParent=r.parentNode,i.parent=this.GetKey(this.m_closestParent)),i.key=this.GetKey(o.elem),i.index=e(r).children().index(a)}else i.index=o.index,i.key=this.GetKey(o.elem);i.offsetY=o.offset,i.offsetX=i.x}}return i},_getOffsetTop:function(t){var e=this.element.get(0).offsetTop;return isNaN(this.m_elementOffset)||this.m_elementOffset===e?t.offsetTop:Math.max(0,t.offsetTop-e)},_getScrollTopByIndex:function(t,i){var n;if(null!=i)null!=(n=this.FindElementByKey(i))&&(n=e(n).children("ul").first());else{if(0===t)return 0;n=this.element.get(0),this.isCardLayout()&&(n=n.firstElementChild.firstElementChild)}if(null!=n){var s=e(n).children("."+this.getItemElementStyleClass())[t];if(null!=s)return this._getOffsetTop(s)}if(this.m_contentHandler.hasMoreToFetch&&this.m_contentHandler.hasMoreToFetch())return this._getScrollHeight()},_getScrollTopByKey:function(t){var e=this.FindElementByKey(t);return null!=e?this._getOffsetTop(e):this.m_contentHandler.hasMoreToFetch&&this.m_contentHandler.hasMoreToFetch()?this._getScrollHeight():void 0},_getScrollCoordinates:function(t){var e,i=t.x,n=t.offsetX;isNaN(i)||isNaN(n)||(i+=n);var s=t.key;isNaN(e)&&null!=s&&(e=this._getScrollTopByKey(s));var l=t.parent,o=t.index;isNaN(e)&&!isNaN(o)&&(e=this._getScrollTopByIndex(o,l));var a=t.offsetY;return isNaN(e)||isNaN(a)||(e+=a),isNaN(e)&&!isNaN(t.y)&&(e=t.y),{x:i,y:e}},_isEmpty:function(){var t=this.element[0],e=t.querySelector("li."+this.getItemElementStyleClass()),i=t.querySelector("li.oj-listview-temp-item");return null==e&&null==i},_handleScroll:function(t){if(null!=this.m_contentHandler&&this.ShouldUseGridRole()&&!this._isEmpty()){var e=this._getScroller().scrollTop;this.ojContext._IsCustomElement()||this.SetOption("scrollTop",e,{_context:{originalEvent:t,internalSet:!0}}),this.ShouldUpdateScrollPosition()&&this.SetOption("scrollPosition",this._getCurrentScrollPosition(e),{_context:{originalEvent:t,internalSet:!0}}),this._handlePinGroupHeader()}},isLoadMoreOnScroll:function(){var e=this.GetOption("scrollPolicy");if("auto"===e){var i=this.GetOption("data");if(null!=i&&(void 0!==t.TableDataSource&&i instanceof t.TableDataSource||void 0!==t.TreeDataSource&&i instanceof t.TreeDataSource))return!1}return"loadAll"!==e},_unregisterScrollHandler:function(){var t=e(this._getScrollEventElement());return this.ojContext._off(t,"scroll"),this.ojContext._IsCustomElement()?(t[0].removeEventListener("wheel",this._wheelListener,{passive:!1}),delete this._wheelListener):this.ojContext._off(t,"wheel"),t},_registerScrollHandler:function(){var t=this,e=this._unregisterScrollHandler();this.ojContext._on(e,{scroll:function(e){t._skipScrollUpdate||t.m_ticking||(window.requestAnimationFrame(function(){t._handleScroll(e),t.m_ticking=!1}),t.m_ticking=!0),t._skipScrollUpdate&&t.signalTaskEnd(),t._skipScrollUpdate=!1}}),this.isLoadMoreOnScroll()&&(this._wheelListener=function(e){e.originalEvent||(e.originalEvent=e),t._preventMouseWheelOverscroll(t._getScroller(),e)},this._scrollElem=e,this.ojContext._IsCustomElement()?this._scrollElem[0].addEventListener("wheel",this._wheelListener,{passive:!1}):this.ojContext._on(this._scrollElem,{wheel:this._wheelListener}))},_isPinGroupHeader:function(){return"static"!==this.GetOption("groupHeaderPosition")&&this.m_contentHandler.IsHierarchical()},_getGroupItemsCache:function(){if(null==this.m_groupItems){var t="."+this.getGroupItemStyleClass()+":visible";this.m_groupItems=this.element.find(t).filter(function(){return!e(this).parent().hasClass("oj-collapsed")&&e(this).next().children().length>0})}return this.m_groupItems},_unpinGroupItem:function(t){e(t).removeClass("oj-pinned"),t.style.top="auto",t.style.width="auto"},_getNextGroupItem:function(t){var e=this._getGroupItemsCache(),i=e.index(t);return i>-1&&i<e.length-1?e[i+1]:null},_pinGroupItem:function(t,i){var n=t.offsetWidth,s=t.offsetHeight,l=this._getNextGroupItem(t);null!=l&&l.offsetTop<=i+s+5&&(i-=s),e(t).addClass("oj-pinned"),t.style.top=i+"px",t.style.width=n+"px"},_handlePinGroupHeader:function(){var t;if(this._isPinGroupHeader()&&!this._isPositionStickySupported()){var e=this._getScroller().scrollTop;if(null!=this.m_groupItemToPin&&0===e)return this._unpinGroupItem(this.m_groupItemToPin),void(this.m_groupItemToPin=null);var i=this._getGroupItemsCache(),n=0;null!=this.m_groupItemToPin&&(n=this.m_groupItemToPin.offsetHeight);for(var s=0;s<i.length;s++){var l=i[s];if(this.m_groupItemToPin!==l){var o=i[s].offsetTop,a=o+l.parentNode.offsetHeight;if(o<e&&a>e+n){t=l;break}}}if(null!=t&&t!==this.m_groupItemToPin)null!=this.m_groupItemToPin&&this._unpinGroupItem(this.m_groupItemToPin),this._pinGroupItem(t,e),this.m_groupItemToPin=t;else if(null!=this.m_groupItemToPin){var r=this._getNextGroupItem(this.m_groupItemToPin);if(null!=r&&r.offsetTop<=e+n)return void(this.m_groupItemToPin.style.top=r.offsetTop-n+"px");this.m_groupItemToPin.style.top=e+"px"}}},_getScroller:function(){var t=this.GetOption("scrollPolicyOptions");if(null!=t){var e=t.scroller;if(null!=e)return e}return this.getListContainer().get(0)},_scrollToGroupHeader:function(t){var e=this._getScroller(),i=e.scrollTop;null!=this.m_groupItemToPin&&(this._unpinGroupItem(this.m_groupItemToPin),this.m_groupItemToPin=null);var n=t.offsetTop;this._isPinGroupHeader()&&this._isPositionStickySupported()&&n<i&&(n=Math.max(0,n-t.parentNode.offsetHeight+t.offsetHeight)),e.scrollTop=n,i===e.scrollTop&&this._handlePinGroupHeader(),this._setFirstFocusableItemInGroupCurrent(t)},_setFirstFocusableItemInGroupCurrent:function(t){var i=this;e(t).next().children().each(function(){var t=e(this);if(!i.SkipFocus(t))return i.SetOption("currentItem",this.key),!1})}}),t.__registerWidget("oj.ojListView",e.oj.baseComponent,{widgetEventPrefix:"oj",options:{as:"",currentItem:null,data:null,display:"list",dnd:{drag:null,drop:null,reorder:{items:"disabled"}},drillMode:"collapsible",expanded:new t._ojListViewExpandedKeySet,firstSelectedItem:{key:null,data:null},gridlines:{item:"visible"},groupHeaderPosition:"sticky",item:{focusable:!0,renderer:null,selectable:!0},scrollPolicy:"auto",scrollPolicyOptions:{fetchSize:25,maxCount:500},scrollPosition:{x:0,y:0},scrollTop:0,selected:new t.KeySetImpl,selection:[],selectionMode:"none",selectionRequired:!1,animateStart:null,animateEnd:null,beforeCurrentItem:null,beforeExpand:null,beforeCollapse:null,collapse:null,copy:null,cut:null,expand:null,itemAction:null,paste:null,ready:null,reorder:null},_ComponentCreate:function(){this._super(),this._setup()},_setup:function(){var i={};(i.element=this.element,i.OuterWrapper=this.OuterWrapper,i.ojContext=this,this._IsCustomElement())||this.options.expanded instanceof t._ojListViewExpandedKeySet&&(this.options.expanded="auto");i=e.extend(this.options,i),this.listview=new t._ojListView,this.listview.init(i),h.disableDefaultBrowserStyling(this.element[0])},_AfterCreate:function(){this._super();var t=this;this.listview._FixRendererContext=function(e){return t._FixRendererContext(e)},this.listview._WrapCustomElementRenderer=function(e){return t._WrapCustomElementRenderer(e)},this.listview.afterCreate()},_SetupResources:function(){this._super(),this.listview.setupResources()},_ReleaseResources:function(){this._super(),this.listview.releaseResources()},GetFocusElement:function(){return null!=this.listview?this.listview.GetFocusElement():this._super()},_destroy:function(){this.listview.destroy(),this._super()},_NotifyContextMenuGesture:function(t,e,i){this.listview.notifyContextMenuGesture(t,e,i)},_setOptions:function(t,e){if(this.listview.isAvailable()){var i=this.listview.setOptions(t,e);this._super(t,e),i?(t.data&&this.listview.adjustScrollPositionValueOnRefresh(),this.listview.refresh()):(t.selectionRequired||t.selection||t.selectionMode)&&this.listview.enforceSelectionRequired()}else this._super(t,e)},_setOption:function(t,i,n){var s,l=!0;if("selectionMode"===t?l="none"===i||"single"===i||"multiple"===i:"drillMode"===t?l="collapsible"===i||"none"===i:"scrollPolicy"===t?l="auto"===i||"loadMoreOnScroll"===i||"loadAll"===i:"groupHeaderPosition"===t?l="static"===i||"sticky"===i:"firstSelectedItem"===t&&(l=!1),!l)throw new Error("Invalid value: "+i+" for key: "+t);this.listview.isAvailable()&&("selection"===t?(s=this.listview.getItems(i),n={_context:{extraData:{items:this._IsCustomElement()?s:e(s)}}}):"currentItem"===t&&(s=this.listview.getItems([i])[0],n={_context:{extraData:{items:this._IsCustomElement()?s:e(s)}}})),this._super(t,i,n)},_NotifyAttached:function(){this.listview.notifyAttached()},_NotifyDetached:function(){this.listview.notifyDetached()},_NotifyShown:function(){this.listview.notifyShown()},_VerifyConnectedForSetup:function(){return!0},widget:function(){return this.listview.GetRootElement()},refresh:function(){this._super(),this.listview.refresh()},whenReady:function(){return this.listview.whenReady()},getNodeBySubId:function(t){return this.listview.getNodeBySubId(t)},getSubIdByNode:function(t){return this.listview.getSubIdByNode(t)},getContextByNode:function(t){return this.listview.getContextByNode(t)},getDataForVisibleItem:function(t){return this.listview.getDataForVisibleItem(t)},expand:function(t,e){this.listview.expandKey(t,e,!0,!0)},collapse:function(t,e){this.listview.collapseKey(t,e,!0)},getExpanded:function(){return this.listview.getExpanded()},getIndexerModel:function(){return null==this.indexerModel&&t.ListViewIndexerModel&&(this.indexerModel=new t.ListViewIndexerModel(this.listview)),this.indexerModel},scrollToItem:function(t){this.listview.scrollToItem(t)},_CompareOptionValues:function(e,i,n){switch(e){case"currentItem":return t.Object.compareValues(i,n);case"selection":return i&&void 0===i.inverted&&(i.inverted=!1),n&&void 0===n.inverted&&(n.inverted=!1),(!i||!n||i.inverted===n.inverted)&&t.Object.compareValues(i,n);default:return this._super(e,i,n)}}}),r.setDefaultOptions({ojListView:{gridlines:r.createDynamicPropertyGetter(function(){return{item:(o.parseJSONFromFontFamily("oj-listview-option-defaults")||{}).gridlines.item}})}}),p.extension._WIDGET_NAME="ojListView",p.extension._INNER_ELEM="ul",p.extension._GLOBAL_TRANSFER_ATTRS=["aria-label","aria-labelledby"],t.CustomElementBridge.register("oj-list-view",{metadata:p})});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojnavigationlist',["ojs/ojcore","jquery","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojdatacollection-common","ojs/ojbutton","ojs/ojmenu","ojs/ojlistview"],function(t,e,i,s,n){"use strict";var a={properties:{as:{type:"string",value:""},currentItem:{type:"any",writeback:!0},data:{type:"object"},display:{type:"string",enumValues:["all","icons"],value:"all"},drillMode:{type:"string",enumValues:["collapsible","none","sliding"],value:"none"},edge:{type:"string",enumValues:["start","top"],value:"start"},expanded:{type:"KeySet",writeback:!0},hierarchyMenuThreshold:{type:"number",value:0},item:{type:"object",properties:{renderer:{type:"function"},selectable:{type:"function|boolean",value:!0}}},overflow:{type:"string",enumValues:["hidden","popup"],value:"hidden"},rootLabel:{type:"string",value:"Navigation List"},selection:{type:"any",writeback:!0},translations:{type:"object",value:{},properties:{defaultRootLabel:{type:"string"},hierMenuBtnLabel:{type:"string"},previousIcon:{type:"string"}}}},methods:{getContextByNode:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{},ojBeforeSelect:{},ojBeforeCollapse:{},ojBeforeCurrentItem:{},ojCollapse:{},ojBeforeExpand:{},ojExpand:{}},extension:{}},o={properties:{as:{type:"string",value:""},currentItem:{type:"any",writeback:!0},data:{type:"object"},display:{type:"string",enumValues:["all","icons","stacked"],value:"all"},edge:{type:"string",enumValues:["bottom","end","start","top"],value:"start"},item:{type:"object",properties:{renderer:{type:"function"},selectable:{type:"function|boolean",value:!0}}},layout:{type:"string",enumValues:["condense","stretch"],value:"stretch"},overflow:{type:"string",enumValues:["hidden","popup"],value:"hidden"},reorderable:{type:"string",enumValues:["disabled","enabled"],value:"disabled"},selection:{type:"any",writeback:!0},translations:{type:"object",value:{},properties:{accessibleReorderAfterItem:{type:"string"},accessibleReorderBeforeItem:{type:"string"},accessibleReorderTouchInstructionText:{type:"string"},labelCut:{type:"string"},labelPasteAfter:{type:"string"},labelPasteBefore:{type:"string"},labelRemove:{type:"string"},msgFetchingData:{type:"string"},msgNoData:{type:"string"},overflowItemLabel:{type:"string"},removeCueText:{type:"string"},selectedLabel:{type:"string"}}},truncation:{type:"string",enumValues:["none","progressive"],value:"none"}},methods:{getContextByNode:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{},ojBeforeSelect:{},ojBeforeCurrentItem:{},ojBeforeDeselect:{},ojDeselect:{},ojBeforeRemove:{},ojRemove:{},ojReorder:{}},extension:{}};t.DefaultNavListHandler=function(t,e,i){this.m_widget=t,this.m_root=e,this.m_component=i,this.m_widget.GetOption(this.m_widget.OPTION_EDGE)===this.m_widget.OPTION_EDGE_END&&this.m_root.addClass(this.m_widget.getNavListEndEdgeStyleClass())},t.DefaultNavListHandler.prototype.Destroy=function(){this.m_root.removeClass(this.m_widget.getNavListExpandedStyleClass()).removeClass(this.m_widget.getNavListVerticalStyleClass()).removeClass(this.m_widget.getNavListEndEdgeStyleClass())},t.DefaultNavListHandler.prototype.Expand=function(t,e,i){return Promise.resolve(null)},t.DefaultNavListHandler.prototype.Collapse=function(t,e,i,s){return Promise.resolve(null)},t.DefaultNavListHandler.prototype.HandleExpandAndCollapseKeys=function(t,e,i,s){return!1},t.DefaultNavListHandler.prototype.ModifyListItem=function(t,e){this.m_widget.isTabBar()&&this.m_widget.getSingleFocusableElement(t).attr("role","tab")},t.DefaultNavListHandler.prototype.UpdateAriaPropertiesOnSelectedItem=function(t,e){t.attr("aria-selected",e?"true":"false")},t.DefaultNavListHandler.prototype.BeforeRenderComplete=function(){var t=this.m_widget.element.attr("role");t&&"presentation"!==t&&(this.m_widget.element.attr("role","presentation"),this.m_widget.isTabBar()?this.m_root.attr("role","tablist"):this.m_root.attr("role",t))},t.DefaultNavListHandler.prototype.ItemInsertComplete=function(t,e){},t.DefaultNavListHandler.prototype.ItemRemoveComplete=function(t){},t.DefaultNavListHandler.prototype.HandleArrowKeys=function(t,e,i){return l.superclass.HandleArrowKeys.apply(this.m_widget,arguments)},t.DefaultNavListHandler.prototype.IsArrowKey=function(t){return l.superclass.IsArrowKey.apply(this.m_widget,arguments)},t.DefaultNavListHandler.prototype.GetState=function(t){return l.superclass.GetState.apply(this.m_widget,arguments)},t.DefaultNavListHandler.prototype.SetState=function(t,e){l.superclass.SetState.apply(this.m_widget,arguments)},t.DefaultNavListHandler.prototype.Init=function(t){this.m_root.addClass(this.m_widget.getNavListExpandedStyleClass()).addClass(this.m_widget.getNavListVerticalStyleClass())},t.DefaultNavListHandler.prototype.IsSelectable=function(t){return l.superclass.IsSelectable.apply(this.m_widget,arguments)},t.DefaultNavListHandler.prototype.RestoreItem=function(t,e,i){},t.DefaultNavListHandler.prototype.SetOptions=function(t){},t.DefaultNavListHandler.prototype.HandleBlur=function(t){return l.superclass.HandleBlur.apply(this.m_widget,arguments)},t.DefaultNavListHandler.prototype.HandleFocus=function(t){return l.superclass.HandleFocus.apply(this.m_widget,arguments)},t.DefaultNavListHandler.prototype.GetNodeBySubId=function(t){return null},t.DefaultNavListHandler.prototype.GetSubIdByNode=function(t){return null},t.DefaultNavListHandler.prototype.HandleResize=function(t,e){},t.DefaultNavListHandler.prototype.NotifyAttached=function(){},t.DefaultNavListHandler.prototype.GetAnimationEffect=function(t){return l.superclass.getAnimationEffect.apply(this.m_widget,arguments)},t.DefaultNavListHandler.prototype.IsOptionUpdateAllowed=function(t,e,i){return!0},t.DefaultNavListHandler.prototype.OptionUpdated=function(t,e,i){},t.DefaultNavListHandler.prototype.BeforeInsertItem=function(){},t.DefaultNavListHandler.prototype.HandleClick=function(t){},t.DefaultNavListHandler.prototype.HandleKeydown=function(t){},t.DefaultNavListHandler.prototype.HandleSelectionChange=function(t){},t.HorizontalNavListHandler=function(e,i,s){this.m_duringInit=!0,t.HorizontalNavListHandler.superclass.constructor.call(this,e,i,s),this.m_widget.GetOption(this.m_widget.OPTION_EDGE)===this.m_widget.OPTION_EDGE_BOTTOM&&this.m_root.addClass(this.m_widget.getNavListBottomEdgeStyleClass())},t.Object.createSubclass(t.HorizontalNavListHandler,t.DefaultNavListHandler,"oj.HorizontalNavListHandler"),t.HorizontalNavListHandler.prototype.Destroy=function(){this.m_root.removeClass(this.m_widget.getNavListExpandedStyleClass()).removeClass(this.m_widget.getHorizontalNavListStyleClass()).removeClass(this.m_widget.getNavListBottomEdgeStyleClass()),this.m_root.find("."+this.m_widget.getDividerStyleClass()).remove(),this._destroyOverflowMenu(),null!=this.m_overflowMenuItem&&(this.m_overflowMenuItem.remove(),this.m_overflowMenuItem=null),this.m_overflowMenuItems=[],this.m_duringInit=!0},t.HorizontalNavListHandler.prototype.UpdateAriaPropertiesOnSelectedItem=function(t,e){t.attr(this._isTabBar()?"aria-selected":"aria-pressed",e?"true":"false")},t.HorizontalNavListHandler.prototype._isTabBar=function(){return this.m_widget.isTabBar()},t.HorizontalNavListHandler.prototype.HandleArrowKeys=function(t,i,s){"ArrowLeft"===t||"Left"===t||t===e.ui.keyCode.LEFT?t=this.m_widget.isRtl()?e.ui.keyCode.DOWN:e.ui.keyCode.UP:"ArrowRight"!==t&&"Right"!==t&&t!==e.ui.keyCode.RIGHT||(t=this.m_widget.isRtl()?e.ui.keyCode.UP:e.ui.keyCode.DOWN);var n=l.superclass.HandleArrowKeys.call(this.m_widget,t,i,s);return this.m_widget.m_active.elem[0].scrollIntoView(!1),n},t.HorizontalNavListHandler.prototype.IsArrowKey=function(t){return"ArrowUp"===t||"Up"===t||t===this.m_widget.UP_KEY||"ArrowDown"===t||"Down"===t||t===this.m_widget.DOWN_KEY||"ArrowLeft"===t||"Left"===t||t===this.m_widget.LEFT_KEY||"ArrowRight"===t||"Right"===t||t===this.m_widget.RIGHT_KEY},t.HorizontalNavListHandler.prototype.ModifyListItem=function(t,e){var i=this.m_widget.getSingleFocusableElement(t);i.attr("role",this._isTabBar()?"tab":"button"),!this._isTabBar()&&i[0].hasAttribute("aria-selected")&&(i.attr("aria-pressed","false"),i.removeAttr("aria-selected"))},t.HorizontalNavListHandler.prototype.BeforeRenderComplete=function(){var t=this;this._isTabBar()?this.m_root.attr("role","tablist"):this.m_root.attr("role","toolbar"),this.m_widget.element.attr("role","presentation"),"condense"===this.m_widget.GetOption("layout")&&(this.m_root.hasClass(this.m_widget.getCondenseStyleClass())||this.m_root.addClass(this.m_widget.getCondenseStyleClass()));var i=this.m_widget.element.find("."+this.m_widget.getItemElementStyleClass()+":visible");i.each(function(s){var n=e(this);s>0&&t._addSeparator(this,s),s===i.length-1?n.addClass(t.m_widget.getLastItemStyleClass()):n.removeClass(t.m_widget.getLastItemStyleClass())}),this.m_duringInit&&(this.m_duringInit=!1,this._handleOverflow())},t.HorizontalNavListHandler.prototype._addSeparator=function(t,i){var s=e(t),n=s.prev();i>0&&n.length&&!n.is("li."+this.m_widget.getDividerStyleClass())&&s.before('<li role="separator" class="'+this.m_widget.getDividerStyleClass()+'"></li>')},t.HorizontalNavListHandler.prototype.ItemInsertComplete=function(t,e){this._addSeparator(t,e.index),this._handleOverflow()},t.HorizontalNavListHandler.prototype.ItemRemoveComplete=function(t){var i=e(t),s=i.prev();if(s.length&&s.is("li."+this.m_widget.getDividerStyleClass()))s.remove();else{var n=i.next();n.is("li."+this.m_widget.getDividerStyleClass())&&n.remove()}this._handleOverflow()},t.HorizontalNavListHandler.prototype.IsSelectable=function(t){var i="aria-selected";return this._isTabBar()||(i="aria-pressed"),!(this.m_overflowMenuItem&&this.m_overflowMenuItem[0]===e(t)[0])&&this.m_widget.getFocusItem(e(t))[0].hasAttribute(i)},t.HorizontalNavListHandler.prototype.Init=function(t){this.m_root.addClass(this.m_widget.getNavListExpandedStyleClass()).addClass(this.m_widget.getHorizontalNavListStyleClass()),this.m_overflowMenuItems=[]},t.HorizontalNavListHandler.prototype.HandleClick=function(t){e(t.target).closest("."+this.m_widget.getOverflowItemStyleClass()+" a."+this.m_widget.getItemContentStyleClass()).length>0&&this._launchOverflowMenu(t)},t.HorizontalNavListHandler.prototype.HandleKeydown=function(t){e(t.target).closest("."+this.m_widget.getOverflowItemStyleClass()+" a."+this.m_widget.getItemContentStyleClass()).length>0&&t.keyCode===e.ui.keyCode.SPACE&&this._launchOverflowMenu(t)},t.HorizontalNavListHandler.prototype.NotifyAttached=function(){this._handleOverflow()},t.HorizontalNavListHandler.prototype.HandleResize=function(t,e){this.m_ignoreNextResize?this.m_ignoreNextResize=!1:this._handleOverflow()},t.HorizontalNavListHandler.prototype.SetOptions=function(t){var e,i,s=this.m_widget.GetOption("overflow"),n=this.m_widget.GetOption("truncation");t.overflow&&s!==t.overflow&&(e=t.overflow),t.truncation&&n!==t.truncation&&(i=t.truncation),(e||i)&&this._handleOverflow(e,i)},t.HorizontalNavListHandler.prototype.HandleSelectionChange=function(t){this.m_overflowMenuItem&&("none"===t.style.display?this._highlightUnhighlightMoreItem(!0):this._highlightUnhighlightMoreItem(!1))},t.HorizontalNavListHandler.prototype.GetAnimationEffect=function(t){return"add"===t||"remove"===t?l.superclass.getAnimationEffect.call(this.m_widget,t+"HorizontalItem"):l.superclass.getAnimationEffect.apply(this.m_widget,arguments)},t.HorizontalNavListHandler.prototype.GetNodeBySubId=function(t){var i=null;if(t.subId===this.m_widget.getItemSubIdKey()&&this.m_overflowMenuItems.length>0)for(var s=this._getOverflowMenu(),n=t.key,a=s.find(".oj-menu-item"),o=0;o<a.length;o++)if(this.m_widget.compareValues(e(a[o]).data("key"),n)){i=a[o],this._launchOverflowMenu(null);break}return i},t.HorizontalNavListHandler.prototype.GetSubIdByNode=function(t){var i=null,s=e(t).closest(".oj-menu-item");if(null!==this._getOverflowMenu()&&s.closest("."+this.m_widget.getOverflowMenuStyleClass())[0]!==this._getOverflowMenu()[0])return null;if(null!=s&&s.length>0){var n=s.data("key");null!=n&&(i={subId:this.m_widget.getItemSubIdKey(),key:n})}return i},t.HorizontalNavListHandler.prototype.OptionUpdated=function(t,e,i){"selection"===t&&this._toggleOverflowBtnSelection(e)},t.HorizontalNavListHandler.prototype.IsOptionUpdateAllowed=function(t,e,i){return"currentItem"!==t||!this.m_overflowMenuItem||this.m_overflowMenuItem.attr("id")!==e},t.HorizontalNavListHandler.prototype._handleOverflow=function(e,i){var s=-1,n=this._getItems();if(0!==n.length){e||(e=this.m_widget.GetOption("overflow")),i||(i=this.m_widget.GetOption("truncation"));var a=new t._HorizontalNavListOverflowHandler(n,e,i,this);if(!a.shouldHandleOverflow())return a.unApplyTruncation(),void this._releaseContainerWidth();this.showAllItems(n,e),a.unApplyTruncation(),a.checkForOverflow()&&a.applyTruncation()&&(s=a.getOverflowThreshold()),this._applyThreshold(s),this._releaseContainerWidth()}},t.HorizontalNavListHandler.prototype.BeforeInsertItem=function(){this._fixContainerWidth()},t.HorizontalNavListHandler.prototype._fixContainerWidth=function(){var t=this.m_widget.getListContainer(),e=t[0].getBoundingClientRect().width;0!==e&&(this.m_freezedContainerWidth=e,t.css("maxWidth",e))},t.HorizontalNavListHandler.prototype._releaseContainerWidth=function(){this.m_widget.getListContainer().css("maxWidth","none"),this.m_freezedContainerWidth&&(this.m_ignoreNextResize=!0,this.m_freezedContainerWidth=null)},t.HorizontalNavListHandler.prototype.showAllItems=function(t,i){var s=this;"popup"===i&&this._showOrHideItem(this._getOverflowMenuButton(),!0),t.each(function(t,i){s._showOrHideItem(e(i),!0)})},t.HorizontalNavListHandler.prototype._getItems=function(){return this.m_root.find("."+this.m_widget.getItemElementStyleClass()+":not(."+this.m_widget.getOverflowItemStyleClass()+")")},t.HorizontalNavListHandler.prototype._hasSeparators=function(){return this.m_root.hasClass(this.m_widget.getNavListItemsDividerStyleClass())},t.HorizontalNavListHandler.prototype._showOrHideItem=function(t,e){var i;this._hasSeparators()&&(i=t.prev("."+this.m_widget.getDividerStyleClass())),e?(t.show(),i&&i.show()):(t.hide(),i&&i.hide())},t.HorizontalNavListHandler.prototype._applyThreshold=function(t){var i,s,n=this,a=this._getItems(),o=[];if(0!==a.length){this.m_root.find("."+this.m_widget.getLastItemStyleClass()).removeClass(this.m_widget.getLastItemStyleClass()),-1===t||t>=a.length?this.m_overflowMenuItem&&this._showOrHideItem(this.m_overflowMenuItem,!1):(this._addSeparator(this._getOverflowMenuButton(),a.length),this._showOrHideItem(this._getOverflowMenuButton(),!0),s=!0),a.each(function(s,a){var l=e(a);if(-1!==t&&t<=s){l.hasClass("oj-focus")&&n.m_widget.ActiveAndFocus(n._getOverflowMenuButton(),null),l.hasClass("oj-selected")&&n._highlightUnhighlightMoreItem(!0),n._showOrHideItem(l,!1);var r={};o.push(r),r.key=n.m_widget.GetKey(a),r.label=n._getItemLabel(l),l.hasClass("oj-disabled")&&(r.disabled=!0)}else i=l,n._showOrHideItem(l,!0),l.hasClass("oj-selected")&&n.m_overflowMenuItem&&n._highlightUnhighlightMoreItem(!1),n.m_overflowMenuItem&&n.m_overflowMenuItem.hasClass("oj-focus")&&n.m_widget.compareValues(n.m_widget.GetKey(a),n.m_widget.GetOption("currentItem"))&&n.m_widget.ActiveAndFocus(i,null)}),s?this._getOverflowMenuButton().addClass(this.m_widget.getLastItemStyleClass()):i.addClass(this.m_widget.getLastItemStyleClass()),this.m_overflowMenuItems=o,this.m_widget.ClearCache();var l=this.m_overflowMenu&&this.m_overflowMenu.is(":visible");this._destroyOverflowMenu(),l&&this._launchOverflowMenu(null)}},t.HorizontalNavListHandler.prototype._highlightUnhighlightMoreItem=function(t){var e=this._getOverflowMenuButton();t?e.addClass("oj-selected").removeClass("oj-default"):e.removeClass("oj-selected").addClass("oj-default")},t.HorizontalNavListHandler.prototype._destroyOverflowMenu=function(){this.m_overflowMenu&&(this.m_overflowMenu.ojMenu("destroy"),this.m_overflowMenu.remove(),this.m_overflowMenu=null)},t.HorizontalNavListHandler.prototype._getOverflowMenuButton=function(){if(!this.m_overflowMenuItem){var t=e(document.createElement("li")),i=e(document.createElement("a")),s=e(document.createElement("span")),a=e(document.createElement("span")),o=this._getItems();t.uniqueId().attr("role","presentation").addClass(this.m_widget.getItemElementStyleClass()).addClass(this.m_widget.getItemStyleClass()).addClass(this.m_widget.getOverflowItemStyleClass()).addClass("oj-default").append(i),i.addClass(this.m_widget.getFocusedElementStyleClass()).addClass(this.m_widget.getItemContentStyleClass()),i.attr("role","button").attr("aria-haspopup","true").attr("aria-pressed","false").attr("tabindex","-1").attr(n._DATA_OJ_TABMOD,"-1").attr("href","#").append(a).append(s),this.m_root.find("ul:first").hasClass(this.m_widget.getHasIconsStyleClass())||i.addClass(this.m_widget.getHasNoIconStyleClass()),s.text(this.m_widget.ojContext.getTranslatedString("overflowItemLabel")).addClass(this.m_widget.getItemLabelStyleClass()),a.addClass(this.m_widget.getItemIconStyleClass()).addClass("oj-fwk-icon").addClass(this.m_widget.getOverflowItemIconStyleClass()),t[0].key=t.attr("id"),this.m_root.find("."+this.m_widget.GetStyleClass()).append(t),this._addSeparator(t,o.length),this.m_overflowMenuItem=t}return this.m_overflowMenuItem},t.HorizontalNavListHandler.prototype._getOverflowMenu=function(){var t=this.m_overflowMenuItems;if(0===t.length)return null;if(!this.m_overflowMenu){var i=e(document.createElement("ul"));i.addClass(this.m_widget.getOverflowMenuStyleClass()).hide(),this.m_root.append(i);for(var s=0;s<t.length;s++){var n=e(document.createElement("li")),a=e(document.createElement("a"));a.attr("href","#").text(t[s].label),n.data("key",t[s].key),t[s].disabled&&n.addClass("oj-disabled"),n.append(a),i.append(n)}i.ojMenu({openOptions:{display:"auto"},open:this.__handleOverflowMenuOpen.bind(this),close:this.__handleOverflowMenuClose.bind(this),select:this.__handleOverflowMenuSelection.bind(this)}),this.m_overflowMenu=i}return this.m_overflowMenu},t.HorizontalNavListHandler.prototype._launchOverflowMenu=function(t){this._getOverflowMenu().is(":visible")||(this._highlightUnhighlightMoreItem(!0),this._getOverflowMenu().ojMenu("open",t,{launcher:this._getOverflowMenuButton(),initialFocus:"firstItem",position:{my:"end bottom",at:"end top",collision:"flipfit"}}))},t.HorizontalNavListHandler.prototype._toggleOverflowBtnSelection=function(t){var e;if(this.m_overflowMenuItem&&this.m_overflowMenuItems.length>0){if(t)for(var i=0;i<this.m_overflowMenuItems.length;i++)if(this.m_widget.compareValues(this.m_overflowMenuItems[i].key,t)){e=!0;break}e||this._highlightUnhighlightMoreItem(!1)}},t.HorizontalNavListHandler.prototype.__handleOverflowMenuOpen=function(t){this._getOverflowMenuButton().find("."+this.m_widget.getItemContentStyleClass()).attr("tabindex","0")},t.HorizontalNavListHandler.prototype.__handleOverflowMenuClose=function(t){var e=this.m_widget.ojContext.option("selection");this._toggleOverflowBtnSelection(e),this._getOverflowMenuButton().find("."+this.m_widget.getItemContentStyleClass()).focus()},t.HorizontalNavListHandler.prototype.__handleOverflowMenuSelection=function(t,i){var s=i.item.data("key"),n={selection:s},a=this.m_widget.FindElementByKey(s);this.m_widget.HandleSelectionOption(n);var o=n.selection;o&&this.m_widget.SetOption("selection",o,{_context:{originalEvent:t,internalSet:!0,extraData:{items:e(a)}},changed:!0})},t.HorizontalNavListHandler.prototype._getItemLabel=function(t){var e=t.find("."+this.m_widget.getItemTitleStyleClass()+":first");return e.length>0?e.text():t.find("."+this.m_widget.getItemLabelStyleClass()+":first").text()},t._HorizontalNavListOverflowHandler=function(t,e,i,s){this._overflow=e,this._truncation=i,this._items=t,this._navlistHandler=s},t._HorizontalNavListOverflowHandler.prototype._TEXT_WIDTH_KEY="textWidth",t._HorizontalNavListOverflowHandler.prototype._ITEM_WIDTH_KEY="itemWidth",t._HorizontalNavListOverflowHandler.prototype._getOverflowMenuButton=function(){return this._navlistHandler._getOverflowMenuButton()},t._HorizontalNavListOverflowHandler.prototype._getWidget=function(){return this._navlistHandler.m_widget},t._HorizontalNavListOverflowHandler.prototype.shouldHandleOverflow=function(){return"popup"===this._overflow||"progressive"===this._truncation},t._HorizontalNavListOverflowHandler.prototype.unApplyTruncation=function(){var t=this;this._items.each(function(i,s){e(s).find("."+t._getWidget().getItemLabelStyleClass()).css("max-width","")})},t._HorizontalNavListOverflowHandler.prototype.checkForOverflow=function(){return!!this.shouldHandleOverflow()&&(this._overflowData||(this._overflowData=this._collectOverflowData()),this._isOverflowed(this._overflowData.containerEdgePos,this._overflowData.itemEdgePos,0))},t._HorizontalNavListOverflowHandler.prototype.applyTruncation=function(){"progressive"===this._truncation&&this._applyLabelMaxWidth(this._overflowData);var e=this._items.last()[0].getBoundingClientRect()["ltr"===t.DomUtils.getReadingDirection()?"right":"left"];return this._isOverflowed(this._overflowData.containerEdgePos,e,0)},t._HorizontalNavListOverflowHandler.prototype.getOverflowThreshold=function(){var t=-1;return"popup"===this._overflow&&(t=this._calculateThreshold(this._overflowData)),t},t._HorizontalNavListOverflowHandler.prototype._collectOverflowData=function(){var e,i,s="ltr"===t.DomUtils.getReadingDirection()?"right":"left",n=this._getWidget().ojContext.element,a=this._items.last();"progressive"===this._truncation&&(this._calculateItemWidths(),e=this._calculateItemNonTextWidth());var o=n[0].getBoundingClientRect()[s],l=n[0].getBoundingClientRect().width;return"popup"===this._overflow&&(i=this._getOverflowMenuButton()[0].getBoundingClientRect().width),{containerEdgePos:o,containerWidth:l,overflowItemWidth:i,itemEdgePos:a[0].getBoundingClientRect()[s],itemNonTextWidth:e}},t._HorizontalNavListOverflowHandler.prototype._calculateItemWidths=function(){var t=this;this._items.each(function(i,s){var n=e(s),a=n.find("."+t._getWidget().getItemLabelStyleClass())[0].getBoundingClientRect().width;n.data(t._TEXT_WIDTH_KEY,a),n.data(t._ITEM_WIDTH_KEY,s.getBoundingClientRect().width)})},t._HorizontalNavListOverflowHandler.prototype._calculateItemNonTextWidth=function(){var t=this._items,i=this;this._getWidget().GetRootElement().find("."+this._getWidget().getHasIconsStyleClass()).lenght>0&&(t=t.filter(function(t,s){return e(s).find("."+i._getWidget().getItemIconStyleClass()).length>0}));var s=t.filter(function(t,s){return e(s).find("."+i._getWidget().getRemovableStyleClass()).length>0}),n=s&&s.length>0?s.last():t.last(),a=n.data(i._TEXT_WIDTH_KEY);return n.data(i._ITEM_WIDTH_KEY)-a},t._HorizontalNavListOverflowHandler.prototype._isOverflowed=function(e,i,s){var n=s||0;return"ltr"===t.DomUtils.getReadingDirection()?i-e+n>.1:e-i+n>.1},t._HorizontalNavListOverflowHandler.prototype._calculateThreshold=function(e){for(var i=this._items,s="ltr"===t.DomUtils.getReadingDirection()?"right":"left",n=i.length-1,a=i[n].getBoundingClientRect()[s];this._isOverflowed(e.containerEdgePos,a,e.overflowItemWidth)&&n>0;)a=i[n-=1].getBoundingClientRect()[s];return n+1},t._HorizontalNavListOverflowHandler.prototype._applyLabelMaxWidth=function(t){var i=this._items,s=this,n=this._getMinLabelWidth(this._items),a=t.containerWidth/i.length-t.itemNonTextWidth;a<n&&(a=n);var o=0,l=0;i.each(function(t,i){var n=e(i).data(s._TEXT_WIDTH_KEY);n<a?o+=a-n:l+=n}),i.each(function(t,i){var n=e(i).data(s._TEXT_WIDTH_KEY),r=n;n>a&&(r=a+o*n/l),e(i).find("."+s._getWidget().getItemLabelStyleClass()).css({"max-width":r+"px"})})},t._HorizontalNavListOverflowHandler.prototype._getMinLabelWidth=function(t){var e=window.getComputedStyle(t.first().find("."+this._getWidget().getItemLabelStyleClass())[0],null).getPropertyValue("min-width");return e.indexOf("px")>0?parseInt(e.substring(0,e.length-2),10):0},t.CollapsibleNavListHandler=function(e,i,s){t.CollapsibleNavListHandler.superclass.constructor.call(this,e,i,s)},t.Object.createSubclass(t.CollapsibleNavListHandler,t.DefaultNavListHandler,"oj.CollapsibleNavListHandler"),t.CollapsibleNavListHandler.prototype.Destroy=function(){this.m_root.removeClass(this.m_widget.getNavListCollapsibleStyleClass()).removeClass(this.m_widget.getNavListVerticalStyleClass())},t.CollapsibleNavListHandler.prototype.Init=function(t){this.m_root.addClass(this.m_widget.getNavListCollapsibleStyleClass()).addClass(this.m_widget.getNavListVerticalStyleClass())},t.CollapsibleNavListHandler.prototype.Expand=function(t,e,i){return l.superclass.AnimateExpand.apply(this.m_widget,arguments)},t.CollapsibleNavListHandler.prototype.Collapse=function(t,e,i,s){return l.superclass.AnimateCollapse.apply(this.m_widget,arguments)},t.CollapsibleNavListHandler.prototype.HandleExpandAndCollapseKeys=function(t,i,s,n){var a=s.children("."+this.m_widget.getGroupStyleClass()).length>0;return i===this.m_widget.LEFT_KEY||i===this.m_widget.RIGHT_KEY?(i===this.m_widget.LEFT_KEY&&!this.m_widget.isRtl()||i===this.m_widget.RIGHT_KEY&&this.m_widget.isRtl()?this.m_widget.GetState(s)===this.m_widget.STATE_EXPANDED&&this.m_widget.CollapseItem(s,t,!0,n,!0,!0):this.m_widget.GetState(s)===this.m_widget.STATE_COLLAPSED&&this.m_widget.ExpandItem(s,t,!0,n,!0,!0,!0),!0):!(!a||i!==e.ui.keyCode.ENTER&&i!==e.ui.keyCode.SPACE)&&(!(s.length<=0)&&(this.m_widget.GetState(s)===this.m_widget.STATE_COLLAPSED?this.m_widget.ExpandItem(s,null,!0,n,!0,!0,!0):this.m_widget.GetState(s)===this.m_widget.STATE_EXPANDED&&this.m_widget.CollapseItem(s,null,!0,n,!0,!0),!0))},t.SlidingNavListHandler=function(e,i,s){t.SlidingNavListHandler.superclass.constructor.call(this,e,i,s),this.m_expanded=[]},t.Object.createSubclass(t.SlidingNavListHandler,t.CollapsibleNavListHandler,"oj.SlidingNavListHandler"),t.SlidingNavListHandler.prototype.Destroy=function(){this.m_root.removeClass("oj-navigationlist-slider").removeClass(this.m_widget.getNavListVerticalStyleClass()),this._toolbar.remove()},t.SlidingNavListHandler.prototype._slideAnimation=function(t,e,i,s,n){var a=this,o=this.m_widget.getListContainer(),l=o.hasClass("oj-focus-ancestor");l&&e&&o.removeClass("oj-focus-ancestor");var r=e?"sliderExpand":"sliderCollapse";this.m_widget.StartAnimation(o.get(0),r,this.m_widget.getAnimationEffect(r)).then(function(){a._slideAnimationComplete(t,e,i,s,l),n(null)})},t.SlidingNavListHandler.prototype._slideAnimationComplete=function(t,e,i,s,n){null!==this.m_widget.m_contentHandler&&(i&&(n&&this.m_widget.getListContainer().addClass("oj-focus-ancestor"),s&&0===s.button&&this.m_widget.AvoidFocusHighLight(!0),i.length>0&&this.m_widget.SetCurrentItem(i,s),this.m_widget.AvoidFocusHighLight(!1)),e?this.m_widget.AnimateExpandComplete(t.children("."+this.m_widget.getGroupStyleClass())):this.m_widget.AnimateCollapseComplete(t.children("."+this.m_widget.getGroupStyleClass())))},t.SlidingNavListHandler.prototype.Expand=function(t,i,s){var n,a=new Promise(function(t){n=t}),o=e(t).parents(".oj-navigationlist-item-element:first"),l=o.children("."+this.m_widget.getGroupStyleClass()),r=null,d=o.closest("."+this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS);return d.length>0&&(d.removeClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS),o.addClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS),r=l.find("."+this.m_widget.getItemElementStyleClass()+":eq(0)"),this._updateHMenuOnExpand(o)),i?this._slideAnimation(o,!0,r,s,n):(this._slideAnimationComplete(o,!0,r,s,!1),n(null)),o.siblings().attr("aria-hidden","true"),o.children("."+this.m_widget.getGroupItemStyleClass()).children("."+this.m_widget.getItemContentStyleClass()).attr("aria-hidden","true"),l.removeAttr("aria-hidden"),t.css("display",""),o.addClass("oj-skipfocus"),a},t.SlidingNavListHandler.prototype._updateHMenuOnExpand=function(t){var i=t.parentsUntil(this.m_widget.element,"."+this.m_widget.getItemElementStyleClass());i=i.get().reverse(),i=e(i.concat(t)),this.m_expanded=[],this._emptyHviewMenu(),i.each(function(t,i){var s;s=0===t?this.m_widget.getRootLabel():this.m_widget.getItemLabel(this.m_expanded[t-1]);var n=e(i);this._addItemToHviewMenu(this.m_widget.GetKey(n[0]),this.m_widget.getItemLabel(n),s),this.m_expanded.push(n)}.bind(this))},t.SlidingNavListHandler.prototype.Collapse=function(t,e,i,s){var n,a=new Promise(function(t){n=t}),o=t.children("."+this.m_widget.getGroupStyleClass()),l=t.parent();return t.children("."+this.m_widget.getGroupItemStyleClass()).children("."+this.m_widget.getItemContentStyleClass()).removeAttr("aria-hidden"),o.attr("aria-hidden","true"),t.siblings().removeAttr("aria-hidden"),t.removeClass("oj-skipfocus"),t.removeClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS),0===t.closest("."+this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS).length&&(l.closest("."+this.m_widget.getItemElementStyleClass()).addClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS),this.m_widget.element.is(l)&&this.m_widget.element.addClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS)),i?this._slideAnimation(t,!1,o.parent(),s,n):(this._slideAnimationComplete(t,!1,o.parent(),s,!1),n(null)),this._updateHMenuOnCollapse(e),a},t.SlidingNavListHandler.prototype._updateHMenuOnCollapse=function(t){var e=-1;this.m_expanded.forEach(function(i,s){var n=this.m_widget.GetKey(i[0]);t===n&&(e=s)}.bind(this)),e>-1&&this.m_expanded.splice(e),this._removeItemFromHviewMenu(t)},t.SlidingNavListHandler.prototype.UpdateAriaPropertiesOnSelectedItem=function(t,e){e?t.attr("aria-describedby",this._selectedLabelId):t.removeAttr("aria-describedby")},t.SlidingNavListHandler.prototype.GetState=function(t){var e=this.m_widget.getFocusItem(t).attr("aria-expanded");return"true"===e?this.m_widget.STATE_EXPANDED:"false"===e?this.m_widget.STATE_COLLAPSED:this.m_widget.STATE_NONE},t.SlidingNavListHandler.prototype.SetState=function(t,e){e===this.m_widget.STATE_EXPANDED?(this.m_widget.getFocusItem(t).attr("aria-expanded","true"),t.removeClass(this.m_widget.COLLAPSED_STYLE_CLASS).addClass(this.m_widget.EXPANDED_STYLE_CLASS)):e===this.m_widget.STATE_COLLAPSED&&(this.m_widget.getFocusItem(t).attr("aria-expanded","false"),t.removeClass(this.m_widget.EXPANDED_STYLE_CLASS).addClass(this.m_widget.COLLAPSED_STYLE_CLASS))},t.SlidingNavListHandler.prototype.ModifyListItem=function(t,e){var i=this.m_widget.getFocusItem(t);t.attr("role","presentation"),i.attr("role","menuitem"),e.attr("id")||e.uniqueId(),i.removeAttr("aria-selected");var s=t.children("."+this.m_widget.getGroupStyleClass());s.length>0&&(i.attr("aria-haspopup","true"),s.attr("role","menu"),s.css("display",""),t.removeAttr("aria-expanded"),i.attr("aria-expanded","false"))},t.SlidingNavListHandler.prototype.BeforeRenderComplete=function(){this.m_root.attr("role","menu"),this.m_widget.element.attr("role","presentation")},t.SlidingNavListHandler.prototype.Init=function(t){this.m_root.addClass("oj-navigationlist-slider").addClass(this.m_widget.getNavListVerticalStyleClass()),t.element.addClass("oj-navigationlist-current"),this._buildSlidingNavListHeader(t),this._initializeHierarchicalView()},t.SlidingNavListHandler.prototype.HandleClick=function(t){e(t.target).closest(".oj-navigationlist-previous-link, .oj-navigationlist-previous-button").length>0&&this.CollapseCurrentList(t)},t.SlidingNavListHandler.prototype.IsSelectable=function(t){return"menuitem"===this.m_widget.getFocusItem(e(t))[0].getAttribute("role")&&!this.m_widget.getFocusItem(e(t))[0].hasAttribute("aria-selected")},t.SlidingNavListHandler.prototype.HandleKeydown=function(t){e(t.target).closest(".oj-navigationlist-previous-link, .oj-navigationlist-previous-button").length>0&&t.keyCode===e.ui.keyCode.ENTER&&this.CollapseCurrentList(t),e(t.target).closest("."+this.m_widget.GetStyleClass()).length>0&&(t.keyCode!==e.ui.keyCode.ESCAPE||t.isDefaultPrevented()||this.CollapseCurrentList(t))},t.SlidingNavListHandler.prototype._buildSlidingNavListHeader=function(t){this._toolbar=e(document.createElement("div")),this._toolbar.addClass("oj-navigationlist-toolbar"),this._previousLink=e(document.createElement("a")),this._prevButton=e(document.createElement("a")),this._prevButton.addClass("oj-navigationlist-previous-button"),this._prevButton.css("visibility","hidden").attr("tabindex","-1"),this._previousLink.addClass("oj-navigationlist-previous-link").attr("tabindex","-1"),this._headerLabel=e(document.createElement("label")),this._headerLabel.addClass("oj-navigationlist-current-header").text(this.m_widget.getRootLabel()),this._vSeparator=e(document.createElement("span")),this._vSeparator.attr("role","separator").attr("aria-orientation","vertical").addClass("oj-navigationlist-toolbar-separator"),this._hviewBtn=e(document.createElement("button")),this._hviewBtn.addClass("oj-navigationlist-hierarchical-button").attr("tabindex","-1"),this._hviewMenu=e(document.createElement("ul")),this._hviewMenu.addClass("oj-navigationlist-hierarchical-menu").hide();var i=e(document.createElement("label"));i.uniqueId().addClass("oj-helper-hidden-accessible").attr("aria-hidden","true"),this._selectedLabelId=i.attr("id"),i.text(this.m_component.getTranslatedString("selectedLabel")),this._previousLink.append(this._headerLabel),this._toolbar.append(this._prevButton),this._toolbar.append(this._previousLink).append(this._vSeparator).append(this._hviewBtn).append(this._hviewMenu).append(i),this.m_root.prepend(this._toolbar),this._showOrHideHierarchyMenu(t.hierarchyMenuDisplayThresholdLevel)},t.SlidingNavListHandler.prototype.CollapseCurrentList=function(t){var e=this.m_expanded[this.m_expanded.length-1];e&&this.m_widget.CollapseItem(e,t,!0,null,!0,!0)},t.SlidingNavListHandler.prototype._initializeHierarchicalView=function(){var t=this,i=this._hviewMenu.uniqueId().attr("id");this._hviewMenu.ojMenu({openOptions:{position:{my:"end top",at:"end bottom"}},select:function(i,s){var n=s.item.nextAll(),a=t.m_expanded,o=s.item.data("key");for(t.m_widget.signalTaskStart();a.length>0;){var l=a[a.length-1],r=t.m_widget.GetKey(l[0]);if(t.m_widget.CollapseItem(e(l),i,!0,r,!0,!0),t.m_widget.compareValues(o,r))break}n.remove(),s.item.remove(),t._hviewMenu.ojMenu("refresh"),t.m_widget.signalTaskEnd()}}),this._hviewBtn.ojButton({label:this.m_component.getTranslatedString("hierMenuBtnLabel"),display:"icons",icons:{start:"oj-fwk-icon oj-hier-icon"},menu:"#"+i,disabled:!0,chroming:"half"}),this._prevButton.ojButton({label:this.m_component.getTranslatedString("previousIcon"),display:"icons",icons:{start:"oj-navigationlist-previous-icon oj-component-icon oj-clickable-icon-nocontext"},chroming:"half"})},t.SlidingNavListHandler.prototype._emptyHviewMenu=function(){this._hviewMenu&&this._hviewMenu.find("li").remove()},t.SlidingNavListHandler.prototype._addItemToHviewMenu=function(t,i,s){var n;if(this._hviewBtn){var a=this._hviewMenu.find("li").length,o=e(document.createElement("li")),l=e(document.createElement("a"));if(l.attr("href","#"),o.append(l),a>0){for(n=0;n<a;n++)n>0&&l.append(e(document.createElement("span")).addClass("oj-navigationlist-hvitem-space"));l.append(e(document.createElement("span")).addClass("oj-menu-item-icon oj-icon oj-navigationlist-level-indicator"))}var r=e(document.createElement("span")).addClass("oj-navigationlist-hierarchical-menu-label");r.text(s),l.append(r),o.data("key",t),this._hviewMenu.append(o),this._hviewMenu.ojMenu("refresh"),this._showOrHideHierarchyMenu(this.m_widget.GetOption("hierarchyMenuDisplayThresholdLevel")),this._hviewBtn.ojButton("option","disabled",!1),this._prevButton.css("visibility","visible"),this.m_widget.getListContainer().hasClass("oj-focus-ancestor")&&this._prevButton.attr("tabindex","0"),this._headerLabel.text(i)}},t.SlidingNavListHandler.prototype.SetOptions=function(t){void 0!==t.hierarchyMenuDisplayThresholdLevel&&(this.m_widget.GetOption("hierarchyMenuDisplayThresholdLevel")!==t.hierarchyMenuDisplayThresholdLevel&&this._showOrHideHierarchyMenu(t.hierarchyMenuDisplayThresholdLevel))},t.SlidingNavListHandler.prototype._showOrHideHierarchyMenu=function(t){var e=this._hviewMenu.find("li").length;-1===t||e<t?(this._vSeparator.css("visibility","hidden"),this._hviewBtn[0]===document.activeElement&&this.m_root.focusin(),this._hviewBtn.css("visibility","hidden")):e>=t&&(this._vSeparator.css("visibility","visible"),this._hviewBtn.css("visibility","visible"))},t.SlidingNavListHandler.prototype._removeItemFromHviewMenu=function(t){var i,s;this._hviewBtn&&(this._hviewMenu.find("li").each(function(n,a){var o=e(a);o.data("key")===t?(o.remove(),s=o.children("a").text(),i=!0):i&&o.remove()}),this._hviewMenu.ojMenu("refresh"),this._showOrHideHierarchyMenu(this.m_widget.GetOption("hierarchyMenuDisplayThresholdLevel")),0===this._hviewMenu.children("li").length?(this._hviewBtn.ojButton("option","disabled",!0),this._prevButton.css("visibility","hidden"),this._prevButton.attr("tabindex","-1"),this._headerLabel.text(this.m_widget.getRootLabel())):this._headerLabel.text(s))},t.SlidingNavListHandler.prototype.RestoreItem=function(t,e,i){t.removeClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS),e.removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-describedby").removeAttr("aria-hidden")},t.SlidingNavListHandler.prototype._makeToolbarItemsFocusable=function(t){t?(this._hviewMenu.find("li").length&&this._prevButton.attr("tabindex","0"),this._hviewBtn.attr("tabindex","0")):(this._prevButton.attr("tabindex","-1"),this._hviewBtn.attr("tabindex","-1"))},t.SlidingNavListHandler.prototype.HandleFocus=function(t){e.contains(this._toolbar.get(0),t.target)||this._hviewMenu.get(0)===t.relatedTarget||(this._makeToolbarItemsFocusable(!0),l.superclass.HandleFocus.apply(this.m_widget,arguments))},t.SlidingNavListHandler.prototype.HandleBlur=function(t){e.contains(this._toolbar.get(0),t.relatedTarget)||this._hviewMenu.get(0)===t.relatedTarget?this.m_widget.UnhighlightActive():(null!=t.relatedTarget&&e.contains(this.m_root.get(0),t.relatedTarget)||this._makeToolbarItemsFocusable(!1),l.superclass.HandleBlur.apply(this.m_widget,arguments))},t.SlidingNavListHandler.prototype.GetNodeBySubId=function(t){return"oj-navigationlist-previous-link"===t.subId?this._prevButton?this._prevButton[0]:null:"oj-navigationlist-hierarchical-button"===t.subId?this._hviewBtn?this._hviewBtn[0]:null:"oj-navigationlist-hierarchical-menu"===t.subId&&this._hviewMenu?this._hviewMenu[0]:null},t.SlidingNavListHandler.prototype.GetSubIdByNode=function(t){return e(t).closest(this._prevButton).length>0?{subId:"oj-navigationlist-previous-link"}:e(t).closest(this._hviewBtn).length>0?{subId:"oj-navigationlist-hierarchical-button"}:e(t).closest(this._hviewMenu).length>0?{subId:"oj-navigationlist-hierarchical-menu"}:null};var l=function(i,s){var n=function(){};return t.Object.createSubclass(n,i,""),e.extend(n.prototype,s),n}(t._ojListView,{OPTION_DRILL_MODE:"drillMode",OPTION_DRILL_MODE_NONE:"none",OPTION_DRILL_MODE_COLLAPSIBLE:"collapsible",OPTION_DRILL_MODE_SLIDING:"sliding",OPTION_DISPLAY:"display",OPTION_DISPLAY_ICONS:"icons",OPTION_DISPLAY_ALL:"all",OPTION_DISPLAY_STACKED:"stacked",OPTION_LAYOUT_STRETCH:"stretch",OPTION_LAYOUT_CONDENSE:"condense",OPTION_EDGE:"edge",OPTION_EDGE_TOP:"top",OPTION_EDGE_END:"end",OPTION_EDGE_START:"start",OPTION_EDGE_BOTTOM:"bottom",OPTION_SELECTION:"selection",OPTION_CURRENT_ITEM:"currentItem",OPTION_ITEM:"item",TAG_NAME_TAB_BAR:"oj-tab-bar",NAVLIST_ITEM_SUBID_KEY:{navlist:"oj-navigationlist-item",tabbar:"oj-tabbar-item"},NAVLIST_EXPANDED_STYLE_CLASS:{navlist:"oj-navigationlist-expanded",tabbar:"oj-tabbar-expanded"},NAVLIST_COLLAPSIBLE_STYLE_CLASS:{navlist:"oj-navigationlist-collapsible",tabbar:"oj-tabbar-collapsible"},NAVLIST_VERTICAL_STYLE_CLASS:{navlist:"oj-navigationlist-vertical",tabbar:"oj-tabbar-vertical"},ITEM_CONTENT_STYLE_CLASS:{navlist:"oj-navigationlist-item-content",tabbar:"oj-tabbar-item-content"},NAVLIST_DIVIDERS_STYLE_CLASS:{navlist:"oj-navigationlist-item-dividers",tabbar:"oj-tabbar-item-dividers"},LAST_ITEM_STYLE_CLASS:{navlist:"oj-navigationlist-item-last-child",tabbar:"oj-tabbar-item-last-child"},EXPANDED_STYLE_CLASS:"oj-expanded",COLLAPSED_STYLE_CLASS:"oj-collapsed",CONDENSE_STYLE_CLASS:"oj-condense",SLIDING_NAVLIST_CURRENT_STYLE_CLASS:"oj-navigationlist-current",DIVIDER_STYLE_CLASS:{navlist:"oj-navigationlist-divider",tabbar:"oj-tabbar-divider"},NAVLIST_OVERFLOW_MENU_ITEM:{navlist:"oj-navigationlist-overflow-menu-item",tabbar:"oj-tabbar-overflow-menu-item"},NAVLIST_OVERFLOW_MENU:{navlist:"oj-navigationlist-overflow-menu",tabbar:"oj-tabbar-overflow-menu"},NAVLIST_OVERFLOW_ITEM_ICON:{navlist:"oj-navigationlist-overflow-item-icon",tabbar:"oj-tabbar-overflow-item-icon"},_CATEGORY_DIVIDER_STYLE_CLASS:{navlist:"oj-navigationlist-category-divider",tabbar:"oj-tabbar-category-divider"},_ITEM_LABEL_STYLE_CLASS:{navlist:"oj-navigationlist-item-label",tabbar:"oj-tabbar-item-label"},_ICON_ONLY_STYLE_CLASS:{navlist:"oj-navigationlist-icon-only",tabbar:"oj-tabbar-icon-only"},_STACK_ICON_STYLE_CLASS:{navlist:"oj-navigationlist-stack-icon-label",tabbar:"oj-tabbar-stack-icon-label"},_ITEM_ICON_STYLE_CLASS:{navlist:"oj-navigationlist-item-icon",tabbar:"oj-tabbar-item-icon"},_HORIZONTAL_NAVLIST_STYLE_CLASS:{navlist:"oj-navigationlist-horizontal",tabbar:"oj-tabbar-horizontal"},_NAVLIST_END_EDGE_STYLE_CLASS:{navlist:"oj-navigationlist-vertical-end",tabbar:"oj-tabbar-vertical-end"},_NAVLIST_BOTTOM_EDGE_STYLE_CLASS:{navlist:"oj-navigationlist-horizontal-bottom",tabbar:"oj-tabbar-horizontal-bottom"},_NAVLIST_HAS_ICONS:{navlist:"oj-navigationlist-has-icons",tabbar:"oj-tabbar-has-icons"},_NAVLIST_ITEM_HAS_NO_ICON:{navlist:"oj-navigationlist-item-no-icon",tabbar:"oj-tabbar-item-no-icon"},_NAVLIST_ITEM_TITLE:{navlist:"oj-navigationlist-item-title",tabbar:"oj-tabbar-item-title"},_NAVLIST_STYLE_CLASS:{navlist:"oj-navigationlist",tabbar:"oj-tabbar"},_NAVLIST_TOUCH_STYLE_CLASS:{navlist:"oj-navigationlist-touch",tabbar:"oj-tabbar-touch"},_NAVLIST_LISTVIEW_CONTAINER_STYLE_CLASS:{navlist:"oj-navigationlist-listview-container",tabbar:"oj-tabbar-listview-container"},_IS_TITLE_ATTR_ADDED_DUE_TO_TRUNCATION:"IsTitleAttrDueToTruncation",_APPLICATION_LEVEL_NAV_STYLE_CLASS:"oj-navigationlist-app-level",_PAGE_LEVEL_NAV_STYLE_CLASS:"oj-navigationlist-page-level",_NAVLIST_ITEM_ICON_HAS_TITLE:"navigationListItemIconHastitle",_NAVLIST_NO_FOLLOW_LINK_CLASS:{navlist:"oj-navigationlist-nofollow-link",tabbar:"oj-tabbar-nofollow-link"},_CONTAINER_STYLE_CLASS:{navlist:"oj-navigationlist-listview",tabbar:"oj-tabbar-listview"},_ELEMENT_STYLE_CLASS:{navlist:"oj-navigationlist-element",tabbar:"oj-tabbar-element"},_ELEMENT_EMPTY_TEXT_STYLE_CLASS:{navlist:"oj-navigationlist-empty-text",tabbar:"oj-tabbar-empty-text"},_ELEMENT_NO_DATA_MSG_STYLE_CLASS:{navlist:"oj-navigationlist-no-data-message",tabbar:"oj-tabbar-no-data-message"},_FOCUSED_ELEMENT_STYLE_CLASS:{navlist:"oj-navigationlist-focused-element",tabbar:"oj-tabbar-focused-element"},_ITEM_ELEMENT_STYLE_CLASS:{navlist:"oj-navigationlist-item-element",tabbar:"oj-tabbar-item-element"},_ITEM_STYLE_CLASS:{navlist:"oj-navigationlist-item",tabbar:"oj-tabbar-item"},_OPTION_DEFAULT_STYLE_CLASS:{navlist:"oj-navigationlist-option-defaults",tabbar:"oj-tabbar-option-defaults"},_LOADING_STATUS_ICON_STYLE_CLASS:{navlist:"oj-navigationlist-loading-icon",tabbar:"oj-tabbar-loading-icon"},_STATUS_MSG_STYLE_CLASS:{navlist:"oj-navigationlist-status-message",tabbar:"oj-tabbar-status-message"},_STATUS_STYLE_CLASS:{navlist:"oj-navigationlist-status",tabbar:"oj-tabbar-status"},getItemLabel:function(t){var i=this.getItemContentElement(t);return i.is("a")?e.trim(i.text()):e.trim(i.find("."+this.getItemTitleStyleClass()).text())},getItemContentElement:function(t){var e=t.children("."+this.getItemContentStyleClass());return 0===e.length&&0===(e=t.children("."+this.getGroupItemStyleClass()).children("."+this.getItemContentStyleClass())).length&&(e=t.children("."+this.getGroupItemStyleClass()).children(":not(."+this.getExpandIconStyleClass()+"):not(."+this.getCollapseIconStyleClass()+")")),e},isRtl:function(){return"rtl"===this.ojContext._GetReadingDirection()},_initNavigationMode:function(t){t[0].tagName.toLowerCase()===this.TAG_NAME_TAB_BAR?this._navigationMode="tabbar":this._navigationMode="navlist"},_getNavigationMode:function(){return this._navigationMode},renderComplete:function(){this.m_listHandler.BeforeRenderComplete(),l.superclass.renderComplete.apply(this,arguments)},itemInsertComplete:function(t,e){this.m_listHandler.ItemInsertComplete(t,e),l.superclass.itemInsertComplete.apply(this,arguments)},itemRemoveComplete:function(t,e){this.m_listHandler.ItemRemoveComplete(t),l.superclass.itemRemoveComplete.apply(this,arguments)},_restoreContent:function(t){var i=t.children();t.removeAttr("style").removeClass(this.getHasIconsStyleClass()).removeAttr("aria-hidden");for(var s=0;s<i.length;s++){var n=i[s];if((n=e(n)).hasClass(this.getDividerStyleClass()))n.remove();else{var a=this.getItemContentElement(n);a.removeClass(this.getItemContentStyleClass()).removeClass(this.getHasNoIconStyleClass()).removeAttr("aria-haspopup");var o=a.children("."+this.getItemIconStyleClass());o&&o.length>0&&(o.removeAttr("role"),o.removeAttr("aria-label"),this._removeToolTipOnIcon(o)),n.removeClass("oj-default").removeAttr("role").removeAttr("aria-disabled").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-pressed");var l=this.getFocusItem(n);l.removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-pressed"),a.children("."+this.getItemLabelStyleClass()).contents().unwrap(),n.find("."+this.getNavListRemoveIcon()).remove(),l.data(this._IS_TITLE_ATTR_ADDED_DUE_TO_TRUNCATION)&&l.removeAttr("title");var r=n.children("ul");r.length>0?(this.m_listHandler.RestoreItem(n,a,r),this._restoreContent(r)):this.m_listHandler.RestoreItem(n,a)}}},GetDnDContext:function(){if(void 0!==t.NavigationListDndContext&&this.ojContext.element[0].tagName.toLowerCase()===this.TAG_NAME_TAB_BAR)return new t.NavigationListDndContext(this)},IsNodeEditableOrClickable:function(t){return!(t.hasClass(this.getItemContentStyleClass())||t.hasClass(this.getExpandIconStyleClass())||t.hasClass(this.getCollapseIconStyleClass()))&&l.superclass.IsNodeEditableOrClickable.apply(this,arguments)},IsElementEditableOrClickable:function(t){return t.prop("nodeName").match(/^INPUT|SELECT|OPTION|BUTTON|^A\b|TEXTAREA/)&&!t.hasClass(this.getItemContentStyleClass())||t.hasClass("oj-component")},_focusable:function(t){return e(t.data).is("li")?!e(t.data).hasClass("oj-disabled"):!e(t.parentElement).hasClass("oj-disabled")},_prepareListViewOptions:function(t){var i=e.extend({},t);return i.drillMode="none"!==t.drillMode?"collapsible":"none",i.selection=null!==t.selection?[t.selection]:[],i.selectionMode="single",i.item=e.extend({focusable:this._focusable},t.item),i.element=this._list,i},updateListViewOption:function(t,i){switch(t){case this.OPTION_DRILL_MODE:this.options[this.OPTION_DRILL_MODE]="none"!==i?"collapsible":"none";break;case this.OPTION_SELECTION:this.options[this.OPTION_SELECTION]=null!==i?[i]:[];break;case this.OPTION_ITEM:this.options[this.OPTION_ITEM]=e.extend({focusable:this._focusable},i);break;default:this.options[t]=i}},getRootLabel:function(){return this.ojContext.options.rootLabel?this.ojContext.options.rootLabel:this.ojContext.getTranslatedString("defaultRootLabel")},SetAriaProperties:function(){"tabbar"===this._getNavigationMode()&&this.ojContext.element.attr("aria-multiselectable",!1)},HandleFocus:function(t){return this.m_listHandler.HandleFocus(t)},HandleBlur:function(t){return this.m_listHandler.HandleBlur(t)},SetRootElementTabIndex:function(){this.ojContext.element.attr("tabIndex",0)},RemoveRootElementTabIndex:function(){this.ojContext.element.removeAttr("tabIndex")},UnsetAriaProperties:function(){this.ojContext.element.removeAttr("aria-activedescendant").removeAttr("aria-multiselectable")},isLoadMoreOnScroll:function(){return!1},ShouldUseGridRole:function(){return!1},init:function(i){var s=this,n=i.ojContext.element;this._initNavigationMode(n),n.addClass(this.getNavListStyleClass()),t.DomUtils.isTouchSupported()&&n.addClass(this.getNavListTouchStyleClass()),this._list=n.children("ul:first"),0===this._list.length&&(this._list=e(document.createElement("ul")),n.append(this._list));var a=e(document.createElement("div"));a.addClass(this.getNavListContainerStyleClass()),a.attr("role","presentation"),this._list.wrap(a);var o=this._prepareListViewOptions(i);l.superclass.init.call(this,o),this.getListContainer().attr("role","presentation"),this.element.removeClass("oj-component-initnode"),this.ojContext._on(this.ojContext.element,{click:function(t){s.m_listHandler.HandleClick(t)},keydown:function(t){s.m_listHandler.HandleKeydown(t)},mouseup:function(t){s._clearActiveState(t)},mouseover:function(t){if(e(t.target).closest("a."+s.getItemContentStyleClass()).length>0){var i=e(t.target).closest("a."+s.getItemContentStyleClass()),n=i.find("."+s.getItemLabelStyleClass());n[0].offsetWidth<n[0].scrollWidth&&!i.attr("title")&&(i.attr("title",n.text().trim()),i.data(s._IS_TITLE_ATTR_ADDED_DUE_TO_TRUNCATION,"true"))}},mouseout:function(t){if(e(t.target).closest("a."+s.getItemContentStyleClass()).length>0){var i=e(t.target).closest("a."+s.getItemContentStyleClass());i.data(s._IS_TITLE_ATTR_ADDED_DUE_TO_TRUNCATION)&&(i.removeData(s._IS_TITLE_ATTR_ADDED_DUE_TO_TRUNCATION),i.removeAttr("title")),s._clearActiveState(t)}}})},_initListHandler:function(){var e=this.ojContext.options.drillMode,i=this.ojContext.options.edge;e===this.OPTION_DRILL_MODE_SLIDING?this.m_listHandler=new t.SlidingNavListHandler(this,this.ojContext.element,this.ojContext):e===this.OPTION_DRILL_MODE_COLLAPSIBLE?this.m_listHandler=new t.CollapsibleNavListHandler(this,this.ojContext.element,this.ojContext):e!==this.OPTION_DRILL_MODE_NONE||i!==this.OPTION_EDGE_TOP&&i!==this.OPTION_EDGE_BOTTOM?this.m_listHandler=new t.DefaultNavListHandler(this,this.ojContext.element,this.ojContext):this.m_listHandler=new t.HorizontalNavListHandler(this,this.ojContext.element,this.ojContext),this.m_listHandler.Init(this.options);var s=this.ojContext.options.navigationLevel;this._setNavigationLevel(s)},_setNavigationLevel:function(t){"none"===this.ojContext.options.drillMode&&("application"===t||"oj-navigation-list"===this.ojContext.element[0].tagName.toLowerCase()?(this.ojContext.element.addClass(this._APPLICATION_LEVEL_NAV_STYLE_CLASS),this.ojContext.element.removeClass(this._PAGE_LEVEL_NAV_STYLE_CLASS)):"page"===t&&(this.ojContext.element.addClass(this._PAGE_LEVEL_NAV_STYLE_CLASS),this.ojContext.element.removeClass(this._APPLICATION_LEVEL_NAV_STYLE_CLASS)))},_clearActiveState:function(t){var i=this.FindItem(e(t.target));null!=i&&this.HighlightUnhighlightElem(i,"oj-active",!1)},afterCreate:function(){this._initListHandler(),l.superclass.afterCreate.apply(this,arguments)},getAnimationEffect:function(t){return this.m_listHandler.GetAnimationEffect(t)},notifyAttached:function(){l.superclass.notifyAttached.apply(this,arguments),this.m_listHandler.NotifyAttached()},ShouldRegisterResizeListener:function(){return!0},HandleResize:function(t,e){l.superclass.HandleResize.apply(this,arguments),t>0&&e>0&&null!=this.m_listHandler&&this.m_listHandler.HandleResize(t,e)},BeforeInsertItem:function(){this.m_listHandler.BeforeInsertItem()},HandleMouseDownOrTouchStart:function(t){l.superclass.HandleMouseDownOrTouchStart.apply(this,arguments);var i=this.FindItem(e(t.target));i&&!i.hasClass("oj-disabled")&&this.HighlightUnhighlightElem(i,"oj-active",!0)},HandleTouchEndOrCancel:function(t){this._clearActiveState(t),l.superclass.HandleTouchEndOrCancel.apply(this,arguments)},getItemContentStyleClass:function(){return this.ITEM_CONTENT_STYLE_CLASS[this._getNavigationMode()]},getNavListExpandedStyleClass:function(){return this.NAVLIST_EXPANDED_STYLE_CLASS[this._getNavigationMode()]},getNavListCollapsibleStyleClass:function(){return this.NAVLIST_COLLAPSIBLE_STYLE_CLASS[this._getNavigationMode()]},getNavListVerticalStyleClass:function(){return this.NAVLIST_VERTICAL_STYLE_CLASS[this._getNavigationMode()]},getNavListItemsDividerStyleClass:function(){return this.NAVLIST_DIVIDERS_STYLE_CLASS[this._getNavigationMode()]},getLastItemStyleClass:function(){return this.LAST_ITEM_STYLE_CLASS[this._getNavigationMode()]},getDividerStyleClass:function(){return this.DIVIDER_STYLE_CLASS[this._getNavigationMode()]},getOverflowItemStyleClass:function(){return this.NAVLIST_OVERFLOW_MENU_ITEM[this._getNavigationMode()]},getOverflowMenuStyleClass:function(){return this.NAVLIST_OVERFLOW_MENU[this._getNavigationMode()]},getOverflowItemIconStyleClass:function(){return this.NAVLIST_OVERFLOW_ITEM_ICON[this._getNavigationMode()]},getCategoryDividerStyleClass:function(){return this._CATEGORY_DIVIDER_STYLE_CLASS[this._getNavigationMode()]},getItemLabelStyleClass:function(){return this._ITEM_LABEL_STYLE_CLASS[this._getNavigationMode()]},getIconOnlyStyleClass:function(){return this._ICON_ONLY_STYLE_CLASS[this._getNavigationMode()]},getStackedIconStyleClass:function(){return this._STACK_ICON_STYLE_CLASS[this._getNavigationMode()]},getItemIconStyleClass:function(){return this._ITEM_ICON_STYLE_CLASS[this._getNavigationMode()]},getHorizontalNavListStyleClass:function(){return this._HORIZONTAL_NAVLIST_STYLE_CLASS[this._getNavigationMode()]},getNavListEndEdgeStyleClass:function(){return this._NAVLIST_END_EDGE_STYLE_CLASS[this._getNavigationMode()]},getNavListBottomEdgeStyleClass:function(){return this._NAVLIST_BOTTOM_EDGE_STYLE_CLASS[this._getNavigationMode()]},getHasIconsStyleClass:function(){return this._NAVLIST_HAS_ICONS[this._getNavigationMode()]},getHasNoIconStyleClass:function(){return this._NAVLIST_ITEM_HAS_NO_ICON[this._getNavigationMode()]},getItemTitleStyleClass:function(){return this._NAVLIST_ITEM_TITLE[this._getNavigationMode()]},getNavListStyleClass:function(){return this._NAVLIST_STYLE_CLASS[this._getNavigationMode()]},getNavListTouchStyleClass:function(){return this._NAVLIST_TOUCH_STYLE_CLASS[this._getNavigationMode()]},getNavListContainerStyleClass:function(){return this._NAVLIST_LISTVIEW_CONTAINER_STYLE_CLASS[this._getNavigationMode()]},getNoFollowLinkStyleClass:function(){return this._NAVLIST_NO_FOLLOW_LINK_CLASS[this._getNavigationMode()]},getCondenseStyleClass:function(){return this.CONDENSE_STYLE_CLASS},getItemSubIdKey:function(){return this.isTabBar()?this.NAVLIST_ITEM_SUBID_KEY.tabbar:this.NAVLIST_ITEM_SUBID_KEY.navlist},GetContainerStyleClass:function(){return this._CONTAINER_STYLE_CLASS[this._getNavigationMode()]},GetStyleClass:function(){return this._ELEMENT_STYLE_CLASS[this._getNavigationMode()]},getEmptyTextMarkerClass:function(){return this._ELEMENT_EMPTY_TEXT_STYLE_CLASS[this._getNavigationMode()]},getEmptyTextStyleClass:function(){return this._ELEMENT_NO_DATA_MSG_STYLE_CLASS[this._getNavigationMode()]},getNavListRemoveIcon:function(){return"oj-tabbar-remove-icon"},getNavListRemoveCommand:function(){return"oj-tabbar-remove"},getRemovableStyleClass:function(){return"oj-removable"},getItemStyleClass:function(){return this._ITEM_STYLE_CLASS[this._getNavigationMode()]},getItemLayoutStyleClass:function(){return this.getItemStyleClass()},getFocusedElementStyleClass:function(){return this._FOCUSED_ELEMENT_STYLE_CLASS[this._getNavigationMode()]},getItemElementStyleClass:function(){return this._ITEM_ELEMENT_STYLE_CLASS[this._getNavigationMode()]},getCollapseIconStyleClass:function(){return"oj-navigationlist-collapse-icon"},getExpandIconStyleClass:function(){return"oj-navigationlist-expand-icon"},getDepthStyleClass:function(t){return"oj-navigationlist-depth-"+t},getGroupItemStyleClass:function(){return"oj-navigationlist-group-item"},getGroupStyleClass:function(){return"oj-navigationlist-group"},getGroupExpandStyleClass:function(){return"oj-navigationlist-collapsible-transition"},getGroupCollapseStyleClass:function(){return this.getGroupExpandStyleClass()},getOptionDefaultsStyleClass:function(){return this._OPTION_DEFAULT_STYLE_CLASS[this._getNavigationMode()]},getLoadingStatusIconStyleClass:function(){return this._LOADING_STATUS_ICON_STYLE_CLASS[this._getNavigationMode()]},getStatusMessageStyleClass:function(){return this._STATUS_MSG_STYLE_CLASS[this._getNavigationMode()]},getStatusStyleClass:function(){return this._STATUS_STYLE_CLASS[this._getNavigationMode()]},AnimateExpand:function(t,e,i){return this.m_listHandler.Expand(t,e,i)},AnimateCollapse:function(t,e,i,s){return this.m_listHandler.Collapse(t,e,i,s)},HandleArrowKeys:function(t,e,i){return!i.altKey&&this.m_listHandler.HandleArrowKeys(t,e,i)},IsArrowKey:function(t){return this.m_listHandler.IsArrowKey(t)},GetState:function(t){return this.m_listHandler.GetState(t)},SetState:function(t,e){this.m_listHandler.SetState(t,e)},HandleMouseClick:function(t){var i=e(t.target),s=this.FindItem(i);if(null!=s&&0!==s.length)if(i.hasClass(this.getNavListRemoveIcon())&&this.isTabBar())this._handleRemove(t,s);else if(this.SkipFocus(s))t.preventDefault();else if(!this.IsNodeEditableOrClickable(i)){var n=this.getItemContentElement(s).attr("href");n&&"#"!==n&&0===t.button&&(t.shiftKey||t.ctrlKey)||(l.superclass.HandleMouseClick.apply(this,arguments),t.preventDefault())}},HandleKeyDown:function(t){if(this.m_active){var i,s=t.keyCode,n=this.m_active.elem,a=this.m_active.key;if(s===e.ui.keyCode.HOME||s===e.ui.keyCode.END)i=s===e.ui.keyCode.HOME?this.element.find("."+this.getItemContentStyleClass()+":visible").first().closest("."+this.getItemElementStyleClass()):this.element.find("."+this.getItemContentStyleClass()+":visible").last().closest("."+this.getItemElementStyleClass()),this.SetCurrentItem(i,t),t.preventDefault();else if(s===e.ui.keyCode.DELETE&&this.isTabBar())this._handleRemove(t,n);else{var o=this.HandleSelectionOrActiveKeyDown(t),l=this.m_listHandler.HandleExpandAndCollapseKeys(t,s,n,a);(o=o||l||null!=this.m_dndContext&&this.m_dndContext.HandleKeyDown(t))&&t.preventDefault()}}},AvoidFocusHighLight:function(t){this._avoidFocusHighLight=t},RecentPointerCallback:function(){var t=this;return function(){return!!t._avoidFocusHighLight}},ShouldApplyHighlight:function(){return!0},ToggleSelection:function(t,e,i){var s=this.m_active.elem;this.IsSelectable(s[0])&&(this._isSelected(s)||this._fireBeforeSelectEvent(t,s)&&(l.superclass.ToggleSelection.apply(this,arguments),this._initiateNavigation(s)))},HighlightUnhighlightElem:function(t,i,s){var n=e(t);"oj-selected"===i&&this.m_listHandler.UpdateAriaPropertiesOnSelectedItem(this.getFocusItem(n),s);var a=n.children("."+this.getGroupItemStyleClass());a.length>0&&(n=e(a[0])),"oj-focus"===i?s?this._focusInHandler(n):this._focusOutHandler(n):s?n.addClass(i):n.removeClass(i),n.hasClass("oj-selected")||n.hasClass("oj-hover")||n.hasClass("oj-active")||n.hasClass("oj-disabled")?n.removeClass("oj-default"):n.addClass("oj-default")},IsSelectable:function(t){return!e(t).hasClass("oj-disabled")&&this.m_listHandler.IsSelectable(e(t))},Trigger:function(t,e,i){return"ready"===t||this.ojContext._trigger(t,e,i)},SetOption:function(t,e,i){if(this.m_listHandler.IsOptionUpdateAllowed(t,e,i)){var s=null;if("selection"===t){var n=i._context,a=n&&n.extraData&&n.extraData.items;a&&(this.ojContext._IsCustomElement()?0===a.length?n.extraData.item=null:n.extraData.item=a[0]:n.extraData.item=a,n.extraData.items=void 0),e&&e.length>0&&(s=e[0]),this._fireDeselectEvent(n.originalEvent,a,e)}else s=e;this.ojContext.option(t,s,i),this.options[t]=e,this.m_listHandler.OptionUpdated(t,s,i)}},ShouldRefresh:function(t){return null!=t.data||null!=t.drillMode||null!=t.item||null!=t.display||null!=t.layout||null!=t.edge},setOptions:function(t,e){var i,s={skipOptions:[]};return this.m_listHandler.SetOptions(t),void 0!==t.navigationLevel&&this._setNavigationLevel(t.navigationLevel),void 0!==t.selection&&(i=t.selection),s.needRefresh=l.superclass.setOptions.call(this,t,e),void 0!==i&&void 0===t.selection&&s.skipOptions.push("selection"),void 0!==i&&(t.selection=i),s},compareValues:function(e,i){return e===i||t.Object.compareValues(e,i)},HandleSelectionOption:function(t){if(void 0!==t.selection){var i=t.selection;if(i){var s=this.GetOption("selection");if(s&&0!==s.length&&this.compareValues(s[0],i))delete t.selection;else{var n=this.FindElementByKey(i);if(!n||this.IsSelectable(n))this._fireBeforeSelectEvent(null,e(n),i)?(this._fireDeselectEvent(null,n,i),t.selection=[i],this.m_listHandler.HandleSelectionChange(n),n&&this._initiateNavigation(e(n))):delete t.selection;else delete t.selection}}else t.selection=[]}l.superclass.HandleSelectionOption.call(this,t)},GetOption:function(t){var e=this.ojContext.option(t);return"selection"===t?e?[e]:[]:("item"!==t||e.focusable||(e.focusable=this._focusable),null===e?this.options[t]:e)},getWidgetConstructor:function(){return s.__GetWidgetConstructor(this.ojContext.element)},SelectAndFocus:function(t,e){t.hasClass("oj-disabled")||this.IsSelectable(t[0])&&(!this._isSelected(t)&&this._fireBeforeSelectEvent(e,t)?(l.superclass.SelectAndFocus.apply(this,arguments),this._initiateNavigation(t)):this.HandleClickActive(t,e))},isTabBar:function(){return this.ojContext.element[0].tagName.toLowerCase()===this.TAG_NAME_TAB_BAR},_fireBeforeDeselectEvent:function(t,e,i){i||(i=this.GetKey(e[0]));var s=this.GetOption("selection"),n=this.FindElementByKey(s);return this.Trigger("beforeDeselect",t,{toItem:e,toKey:i,fromItem:n,fromKey:s})},_fireBeforeSelectEvent:function(t,e,i){var s=!0;return i||(i=this.GetKey(e[0])),this.isTabBar()&&(s=this._fireBeforeDeselectEvent(t,e,i)),s&&this.Trigger("beforeSelect",t,{item:e,key:i})},_fireRemoveEvent:function(t,e){var i=this.GetKey(e[0]);return this.Trigger("beforeRemove",t,{item:e,key:i})&&this.Trigger("remove",t,{item:e,key:i})},_fireDeselectEvent:function(t,e,i){var s=this.GetOption("selection"),n=this.FindElementByKey(s);this.Trigger("deselect",t,{toItem:e,toKey:i,fromItem:n,fromKey:s})},_initiateNavigation:function(t){if(this.ojContext.element.hasClass(this.getNoFollowLinkStyleClass()))return!1;var e=this.getItemContentElement(t),i=e.attr("href"),s=e.attr("target");return!(!i||"#"===i)&&(s&&"_self"!==s?window.open(i,s):window.location.href=i,!0)},_isSelected:function(t){var e=this.GetOption("selection"),i=this.GetKey(t[0]);return!(!e||1!==e.length||!this.compareValues(e[0],i))},_setToolTipOnIcon:function(t,e){t.attr("title")||t.attr("title",e)},_removeToolTipOnIcon:function(t){t.data(this._NAVLIST_ITEM_ICON_HAS_TITLE)?t.removeData(this._NAVLIST_ITEM_ICON_HAS_TITLE):t.removeAttr("title")},GetRootElement:function(){return this.ojContext.element},getSingleFocusableElement:function(t){var i=this,s="a, input, select, textarea, button",n=t.children(s).filter(function(){return!e(this).hasClass(i.getNavListRemoveIcon())});return 1===n.length&&0===n.first().find(s).length?n.first():t},PrepareContextMenu:function(t){var i=this.ojContext._GetContextMenu();if(null!=this.m_dndContext&&i&&this.m_dndContext.prepareContextMenu(i),t.hasClass(this.getRemovableStyleClass())&&i){this.m_contextMenu!==i&&(this.m_contextMenu=i,i.addEventListener("ojBeforeOpen",this._handleContextMenuBeforeOpen.bind(this)),i.addEventListener("ojAction",this._handleContextMenuSelect.bind(this)));var s=e(i).find("[data-oj-command="+this.getNavListRemoveCommand()+"]"),n=this.ojContext.getTranslatedString("labelRemove");this.ojContext._IsCustomElement()?s.empty().append(document.createTextNode(n)):s.empty().append(e('<a href="#"></a>').text(n)),i.refresh()}},_handleContextMenuSelect:function(t){e(t.target).attr("data-oj-command")===this.getNavListRemoveCommand()&&this._handleRemove(t,this.m_contextMenuItem)},_handleContextMenuBeforeOpen:function(t){this.m_contextMenuItem=t.detail.openOptions.launcher},_handleRemove:function(t,e){e.hasClass(this.getRemovableStyleClass())&&this._fireRemoveEvent(t,e)},_wrapInner:function(t,e){for(var i=t.childNodes;i.length>0;)e.appendChild(i[0]);t.appendChild(e)},itemRenderComplete:function(t,i){var s=e(t);if(s.hasClass(this.getCategoryDividerStyleClass()))return s.removeClass(this.getItemElementStyleClass()),s.removeClass(this.getFocusedElementStyleClass()),s.removeClass(this.getItemStyleClass()),s.removeAttr("aria-selected"),s.children().remove(),void s.attr("role","separator");var n,a=this.getGroupItemStyleClass(),o=this.getCollapseIconStyleClass(),r=this.getExpandIconStyleClass(),d=this.getItemIconStyleClass(),h=s.children("."+a);if(h.length>0){h.addClass(this.getItemStyleClass()),n=h.children(":not(."+r+"):not(."+o+")");var _=h.children("."+r);0===_.length&&(_=h.children("."+o)),_.attr("role","presentation"),_.attr("tabindex","-1"),_.removeAttr("aria-labelledby"),s.hasClass("oj-disabled")&&h.addClass("oj-disabled")}else n=s.children().first();if(n.length>0){n.addClass(this.getItemContentStyleClass());var u=n.find("."+d),m=document.createElement("span");if(m.classList.add(this.getItemLabelStyleClass()),this._wrapInner(n[0],m),u.length>0){if(u.insertBefore(m),u.attr("title")&&u.data(this._NAVLIST_ITEM_ICON_HAS_TITLE,u.attr("title")),"icons"===this.ojContext.options.display){this.ojContext.element.addClass(this.getIconOnlyStyleClass());var c=this.getItemLabel(s);u.attr("aria-label",c),u.attr("role","img"),this._setToolTipOnIcon(u,c)}if("stacked"===this.ojContext.options.display){this.ojContext.element.hasClass(this.getStackedIconStyleClass())||(this.ojContext.element.addClass(this.getStackedIconStyleClass()),this.isStackedIconClassAdded=!0);var v=this.getItemLabel(s);u.attr("aria-label",v),u.attr("role","img"),this._setToolTipOnIcon(u,v)}s.closest("ul").addClass(this.getHasIconsStyleClass())}else n.addClass(this.getHasNoIconStyleClass())}if(s.hasClass("oj-disabled")?this.getFocusItem(s).attr("aria-disabled","true"):h.length>0?h.addClass("oj-default"):s.addClass("oj-default"),s.hasClass(this.getRemovableStyleClass())&&this.isTabBar()){var g=e("<a>");g.addClass(this.getNavListRemoveIcon()).addClass("oj-clickable-icon-nocontext oj-component-icon").attr("aria-label",this.ojContext.getTranslatedString("removeCueText")).attr("role","presentation").attr("aria-hidden","true"),s.append(g),n.attr("aria-describedby",g.uniqueId().attr("id"))}this.m_listHandler.ModifyListItem(s,n),l.superclass.itemRenderComplete.apply(this,arguments)},DestroyContentHandler:function(t){null===this.GetOption("data")&&this._restoreContent(this.element),l.superclass.DestroyContentHandler.apply(this,arguments)},getNodeBySubId:function(t){if(null==t)return this.ojContext.element?this.ojContext.element[0]:null;var e=this.m_listHandler.GetNodeBySubId(t);if(!e&&t.subId===this.getItemSubIdKey()){var i=t.key;e=this.FindElementByKey(i)}return e},getSubIdByNode:function(t){var e=null;if(null!=t&&!(e=this.m_listHandler.GetSubIdByNode(t))){var i=this.FindItem(t);if(null!=i&&i.length>0){var s=this.GetKey(i[0]);null!=s&&(e={subId:this.getItemSubIdKey(),key:s})}}return e},getContextByNode:function(t){var e=l.superclass.getContextByNode.call(this,t);return e&&"oj-listview-item"===e.subId?(e.subId=this.getItemSubIdKey(),e):null},refresh:function(){this._resetNavlist(),this._initListHandler(),l.superclass.refresh.apply(this,arguments)},_resetNavlist:function(){this.ojContext.element.removeClass(this.getIconOnlyStyleClass()),this.isStackedIconClassAdded&&this.ojContext.element.removeClass(this.getStackedIconStyleClass()),this.ojContext.element.removeClass(this.getCondenseStyleClass()),this.ojContext.element.removeClass(this._APPLICATION_LEVEL_NAV_STYLE_CLASS),this.ojContext.element.removeClass(this._PAGE_LEVEL_NAV_STYLE_CLASS),this._restoreContent(this.element),this.m_listHandler.Destroy()},destroy:function(){this._resetNavlist(),l.superclass.destroy.apply(this,arguments),this._list.unwrap(),this._list.is(":empty")&&this._list.remove(),this.ojContext.element.removeClass(this.getNavListStyleClass()+" "+this.getNavListTouchStyleClass()),this.ojContext._off(this.element,"click"),this.ojContext._off(this.element,"focus"),this.ojContext._off(this.element,"blur"),this.ojContext._off(this.element,"mouseover"),this.ojContext._off(this.element,"mousein"),this.ojContext._off(this.element,"mouseout"),this.ojContext._off(this.element,"keydown")}});t.__registerWidget("oj.ojNavigationList",e.oj.baseComponent,{widgetEventPrefix:"oj",options:{as:"",currentItem:null,drillMode:"none",reorderable:"disabled",truncation:"none",edge:"start",hierarchyMenuDisplayThresholdLevel:0,rootLabel:null,selection:null,expanded:new t._ojListViewExpandedKeySet,data:null,display:"all",navigationLevel:"page",overflow:"hidden",item:{renderer:null,selectable:!0},animateStart:null,animateEnd:null,beforeSelect:null,beforeCollapse:null,beforeCurrentItem:null,beforeDeselect:null,collapse:null,deselect:null,beforeExpand:null,expand:null,reorder:null},_ComponentCreate:function(){this._super(),this._setup()},_AfterCreate:function(){this._super();var t=this;this.navlist._FixRendererContext=function(e){return t._FixRendererContext(e)},this.navlist._WrapCustomElementRenderer=function(e){return t._WrapCustomElementRenderer(e)},this.navlist.afterCreate()},_NotifyContextMenuGesture:function(t,e,i){this.navlist.notifyContextMenuGesture(t,e,i)},_setup:function(){this.navlist=new l;for(var t=Object.keys(this.options),i=0;i<t.length;i++){var s=t[i];this._validateOptionValues(s,this.options[s])}this._validateOptionsForIconsOnlyAndHorizontalList(this.options[this.navlist.OPTION_DRILL_MODE],this.options[this.navlist.OPTION_DISPLAY],this.options[this.navlist.OPTION_EDGE]);var n={};n.ojContext=this,n=e.extend(this.options,n),this.navlist.init(n)},getNodeBySubId:function(t){return this.navlist.getNodeBySubId(t)},getSubIdByNode:function(t){return this.navlist.getSubIdByNode(t)},getContextByNode:function(t){return this.navlist.getContextByNode(t)},expand:function(t,e,i){this.navlist.expandKey(t,e,!0,!0,i)},collapse:function(t,e,i){this.navlist.collapseKey(t,e,!0,i)},getExpanded:function(){return this.navlist.getExpanded()},_validateOptionsForIconsOnlyAndHorizontalList:function(t,e,i){if(t!==this.navlist.OPTION_DRILL_MODE_NONE){if(e===this.navlist.OPTION_DISPLAY_ICONS)throw new Error("Icon only navigation list should have drillMode set to 'none'.");if(e===this.navlist.OPTION_DISPLAY_STACKED)throw new Error("Stack only navigation list should have drillMode set to 'none'.");if(i===this.navlist.OPTION_EDGE_TOP)throw new Error("Horizontal navigation list should have drillMode set to 'none'.")}},_validateOptionValues:function(t,e){var i=!0;if(t===this.navlist.OPTION_DRILL_MODE?i=e===this.navlist.OPTION_DRILL_MODE_NONE||e===this.navlist.OPTION_DRILL_MODE_COLLAPSIBLE||e===this.navlist.OPTION_DRILL_MODE_SLIDING:t===this.navlist.OPTION_DISPLAY?i=e===this.navlist.OPTION_DISPLAY_ALL||e===this.navlist.OPTION_DISPLAY_ICONS||e===this.navlist.OPTION_DISPLAY_STACKED:t===this.navlist.OPTION_EDGE&&(i=this.element[0].tagName.toLowerCase()===this.navlist.TAG_NAME_TAB_BAR?e===this.navlist.OPTION_EDGE_TOP||e===this.navlist.OPTION_EDGE_START||e===this.navlist.OPTION_EDGE_END||e===this.navlist.OPTION_EDGE_BOTTOM:e===this.navlist.OPTION_EDGE_TOP||e===this.navlist.OPTION_EDGE_START),!i)throw new Error("Invalid value: "+e+" for key: "+t)},_setOption:function(t,i){var s,n;switch(this._validateOptionValues(t,i),t){case this.navlist.OPTION_DRILL_MODE:this._validateOptionsForIconsOnlyAndHorizontalList(i,this.options[this.navlist.OPTION_DISPLAY],this.options[this.navlist.OPTION_EDGE]);break;case this.navlist.OPTION_DISPLAY:this._validateOptionsForIconsOnlyAndHorizontalList(this.options[this.navlist.OPTION_DRILL_MODE],i,this.options[this.navlist.OPTION_EDGE]);break;case this.navlist.OPTION_EDGE:this._validateOptionsForIconsOnlyAndHorizontalList(this.options[this.navlist.OPTION_DRILL_MODE],this.options[this.navlist.OPTION_DISPLAY],i);break;case this.navlist.OPTION_SELECTION:case this.navlist.OPTION_CURRENT_ITEM:this.navlist.isAvailable()&&(n=this.navlist.getItems([i])[0],s={_context:{extraData:{item:this._IsCustomElement()?n:e(n)}}})}return this.navlist.updateListViewOption(t,i),s?this._super(t,i,s):this._super(t,i)},_setOptions:function(t,e){if(!this.navlist.isAvailable())return this._super(t,e),this;for(var i=this.navlist.setOptions(t,e),s={},n=Object.keys(t),a=0;a<n.length;a++){var o=n[a];i.skipOptions.indexOf(o)<0&&(s[o]=t[o])}return this._super(s,e),i.needRefresh&&this.navlist.refresh(),this},_NotifyAttached:function(){this.navlist.notifyAttached()},_NotifyDetached:function(){this.navlist.notifyDetached()},_NotifyShown:function(){this.navlist.notifyShown()},_VerifyConnectedForSetup:function(){return!0},refresh:function(){this._super(),this.navlist.refresh()},whenReady:function(){return this.navlist.whenReady()},_SetupResources:function(){this._super(),this.navlist.setupResources()},_ReleaseResources:function(){this._super(),this.navlist.releaseResources()},_destroy:function(){this.navlist.destroy(),this._super()},_CompareOptionValues:function(e,i,s){switch(e){case"currentItem":case"selection":return t.Object.compareValues(i,s);default:return this._super(e,i,s)}}}),s.setDefaultOptions({ojNavigationList:{hierarchyMenuDisplayThresholdLevel:s.createDynamicPropertyGetter(function(){return(i.parseJSONFromFontFamily("oj-navigationlist-option-defaults")||{}).hierarchyMenuDisplayThresholdLevel})}}),a.extension._WIDGET_NAME="ojNavigationList",a.extension._ALIASED_PROPS={hierarchyMenuThreshold:"hierarchyMenuDisplayThresholdLevel"},t.CustomElementBridge.register("oj-navigation-list",{metadata:a}),o.extension._WIDGET_NAME="ojNavigationList",t.CustomElementBridge.register("oj-tab-bar",{metadata:o})});
var __extends=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function u(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(u.prototype=n.prototype,new u)}}();define('app/tree-map',["require","exports"],(function(require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=function(){};t.DataEntry=e;var n=function(){function t(t){0!==t.length?(this.data=this._extractDataEntries(t),this._root=new u(null,0,this.data),this._root.isRoot=!0):console.error("Empty histogram, can't create data structure.")}return t.prototype.root=function(){return this._root},t.prototype.findNode=function(t){var e=t.split("."),n=this._root;return e.forEach((function(t){null!=n&&"*"!==t&&(n=n.child(t))})),n},t.prototype.children=function(t){void 0===t&&(t="");var e=this.findNode(t);return null==e?null:e.children()},t.prototype.childrenNames=function(t){if(void 0===t)return this._root.childrenNames();var e=this.findNode(t);return null==e?null:e.childrenNames()},t.prototype.descendants=function(t){var e=[];if(void 0===t)return this._root.collectDescendants(e),e;var n=this.findNode(t);return null==n?null:(n.collectDescendants(e),e)},t.prototype._extractDataEntries=function(t){var e=[];return t.forEach((function(t){e.push({path:t.name.split("."),value:t.size,count:t.count})})),e},t}();t.TreeMap=n;var u=function(){function t(t,e,n){this._isLeafNode=!1,this._parent=t,this._isGroup=!1,this.depth=e||0,this._value=0,this._cumulativeValue=0,this._cumulativeCount=0,this.isRoot=!1,this._children=new Map,this._childrenArray=[],void 0!==e&&void 0!==n&&this._createNode(e,n)}return t.prototype._createNode=function(t,e){if(this.name=0===t?"*":e[0].path[t-1],0===t)this.fullPath="*";else if(t===e[0].path.length&&this.name.startsWith("(")&&this._parent)this.fullPath=""+this._parent.fullPath+this.name;else{if(!this._parent)throw"TreeNode creation failed. Non root Node without parent.";this.fullPath=this._parent.fullPath+"."+this.name}this._appendChildren(e)},t.prototype.value=function(){return this._value},t.prototype.count=function(){return this._count},t.prototype.cumulativeValue=function(){return this._cumulativeValue},t.prototype.cumulativeCount=function(){return this._cumulativeCount},t.prototype.cumulativeValueAtDepth=function(t,e){return this.depth===t.currentViewRoot().depth+e||this.isLeafNode()?this._cumulativeValue:0},t.prototype.cumulativeCountAtDepth=function(t,e){return this.depth===t.currentViewRoot().depth+e||this.isLeafNode()?this._cumulativeCount:0},t.prototype.relativeCumulativeValue=function(t,e){void 0===e&&(e=!0);for(var n=this,u=0;u<t;u++)if(null==(n=e?n.nonGroupParent():n.parent()))return-1;return this.cumulativeValue()/n.cumulativeValue()},t.prototype.relativeCumulativeCount=function(t,e){void 0===e&&(e=!0);for(var n=this,u=0;u<t;u++)if(null==(n=e?n.nonGroupParent():n.parent()))return-1;return this.cumulativeCount()/n.cumulativeCount()},t.prototype.child=function(t){return this._children.get(t)||null},t.prototype.parent=function(){return this._parent},t.prototype.grandparent=function(){var t;return(null===(t=this.parent())||void 0===t?void 0:t.parent())||null},t.prototype.nonGroupParent=function(){for(var t=this.parent();null!=t&&"group"===t._type;)t=t.parent();return console.assert(null!=t||this.isRoot),t},t.prototype.nonGroupGrandparent=function(){var t;return(null===(t=this.nonGroupParent())||void 0===t?void 0:t.nonGroupParent())||null},t.prototype.children=function(){return this._childrenArray},t.prototype.childrenUpTo=function(t){return this.depth<t?this._childrenArray:[]},t.prototype.isGroup=function(){return this._isGroup},t.prototype.groupedChildren=function(t,e,n){return this.depth>=t.currentViewRoot().depth+e?[]:this._groupChildren(this._childrenArray,n,t.currentViewRoot()._cumulativeValue)},t.prototype._groupChildren=function(t,e,n){if(t.length<3)return t;if(t.sort((function(t,e){return t._cumulativeValue-e._cumulativeValue}))[0]._cumulativeValue/n>=e)return t;var u=0,o=[],i=[];t.forEach((function(t){t._cumulativeValue/n<e?(u+=t._cumulativeValue,o.push(t)):i.push(t)}));for(var a=Math.max(i.length-1,0),s=0;s<a&&u/n<e;){var l=i[s];o.push(l),u+=l._cumulativeValue,s++}for(var h=[];s<i.length;)h.push(i[s]),s++;if(h.length>0)return h.push(new r(this,o)),h;var c=[],p=[];for(s=0;s<o.length;)s%2==0?c.push(o[s]):p.push(t[s]),s++;return c.length>1?h.push(new r(this,c)):(console.assert(1===c.length,"Group must have exactly 1 element at this point."),h.push(c[0])),p.length>1?h.push(new r(this,p)):(console.assert(1===p.length,"Group must have exactly 1 element at this point."),h.push(p[0])),h},t.prototype.childrenNames=function(){return Array.from(this._children.keys())},t.prototype.getFullPath=function(){return this.fullPath},t.prototype.isLeafNode=function(){return this._isLeafNode},t.prototype.collectDescendants=function(t){this._children.forEach((function(e){e.collectDescendants(t),t.push(e)}))},t.prototype._appendChildren=function(e){var n=this;if(e[0].path.length===this.depth)return console.assert(1===e.length),this._isLeafNode=!0,this._value=e[0].value,this._count=e[0].count,this._accumulateValue(this._value),void this._accumulateCount(this._count);var u=new Map;e.forEach((function(t){var e=t.path[n.depth],r=u.get(e);r||u.set(e,r=[]),r.push(t)})),u.forEach((function(e,u,r){var o=new t(n,n.depth+1,e);n._children.set(u,o),n._childrenArray.push(o)}))},t.prototype._accumulateValue=function(t){this.isLeafNode()&&(console.assert(void 0===this._valueAccumulated),this._valueAccumulated=!0),this._cumulativeValue+=t,null!=this._parent&&this._parent._accumulateValue(t)},t.prototype._accumulateCount=function(t){t&&(this.isLeafNode()&&(console.assert(void 0===this._countAccumulated),this._countAccumulated=!0),this._cumulativeCount+=t,null!=this._parent&&this._parent._accumulateCount(t))},t}();t.TreeMapNode=u;var r=function(t){function e(e,n){var u=t.call(this,e)||this;u._isGroup=!0,u.members=n,u.depth=e.depth,u.memberNames=[],u.members.forEach((function(t){u._cumulativeValue+=t._cumulativeValue,u._value+=t._value,u._cumulativeCount+=t._cumulativeCount,t._count&&(u._count?u._count+=t._count:u._count=t._count),u.memberNames.push(t.name)})),u.name="{"+u.memberNames.join(", ")+"}";for(var r="",o=u.members[0].fullPath.split("."),i=0;i<o.length-1;i++)r+=o[i]+".";return r+=u.name,u.fullPath=r,u}return __extends(e,t),e.prototype.cumulativeValueAtDepth=function(t,e){return this._isViewRoot(t)?0:this._cumulativeValue},e.prototype.cumulativeCountAtDepth=function(t,e){return this._isViewRoot(t)?0:this._cumulativeCount},e.prototype.groupedChildren=function(t,e,n){return this._isViewRoot(t)?this._groupChildren(this.members,n,t.currentViewRoot()._cumulativeValue):[]},e.prototype.isLeafNode=function(){return!1},e.prototype._isViewRoot=function(t){return this===t.currentViewRoot()},e}(u);t.TreeMapNodeGroup=r}));
var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__values=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};define('app/format',["require","exports","ojs/ojlogger","./tree-map"],(function(require,e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t=__importStar(t);var r=function(){function e(){}return e.prototype.stringify=function(){throw new TypeError("PointsToReason is abstract.")},e.prototype.toString=function(){return this.stringify()},e}();e.PointsToReason=r;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.stringify=function(){return"EntryPointReason()"},t}(r);e.EntryPointReason=o;var i=function(e){function t(t){var n=e.call(this)||this;return n.className=t,n}return __extends(t,e),t.prototype.stringify=function(){return"TypeReason("+this.className+")"},t}(r);e.TypeReason=i;var a=function(){};e.GraphNode=a;var s=function(e,t){this.inputs=e,this.uses=t};e.NodeInfo=s;var u=function(){},f=function(){};e.PointsToData=f;var c=function(){};e.NativeImageData=c;var p=function(){function e(){}return e.parse=function(n,r,o){var i=new e._formats[r];try{return i.parse(n,o)}catch(e){t.error(e),alert("Unable to parse file: "+n)}return null},Object.defineProperty(e,"defaultFormat",{get:function(){return"NativeImageFormat"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"formats",{get:function(){return Object.keys(e._formats)},enumerable:!0,configurable:!0}),e.create=function(t){return new e._formats[t]},e._formats={NativeImageFormat:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"shortName",{get:function(){return"Native Image"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longName",{get:function(){return"Native Image Dump Format"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return"File dumped by a native image builder, which contains details about the image."},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sections",{get:function(){return{"code-breakdown":{title:"Code Size Breakdown",component:"x-tree-map-histogram",hidden:!1},"heap-breakdown":{title:"Heap Size Breakdown",component:"x-tree-map-histogram",hidden:!1},"points-to":{title:"Points-To Exploration",component:"x-points-to-exploration",hidden:!0}}},enumerable:!0,configurable:!0}),t.prototype.parse=function(e,r){var o=this;return(e.endsWith("bgv")?this.parseBGV(e,r):Promise.resolve(JSON.parse(r))).then((function(e){var r=new c;return"heap-breakdown"in e&&o.lazy(r,"heap-breakdown",(function(e){return{treeMap:new n.TreeMap(e)}}),e["heap-breakdown"]["heap-size"]),"code-breakdown"in e&&o.lazy(r,"code-breakdown",(function(e){return{treeMap:new n.TreeMap(e)}}),e["code-breakdown"]["code-size"]),"points-to"in e&&o.lazy(r,"points-to",(function(e){return{pointsTo:t._processPointsTo(e)}}),e["points-to"]["type-flows"]),r}))},t.prototype.lazy=function(e,t,n,r){e[t]=function(){var o=n(r);return e[t]=function(){return o},o}},t.prototype.parseBGV=function(e,t){return t.parse(this.validate(Object.keys(this.sections))).then(this.bgvToJSON.bind(this)).catch((function(t){throw console.error(t),alert("Unable to parse file: "+e),t}))},t.prototype.validate=function(e){return function(t){if(!e.some((function(e){return t.name==e})))throw new Error("No valid property header.")}},t.prototype.bgvToJSON=function(e){var t=new u,n=e.groups.find((function(e){return"points-to"===e.name}));void 0!==n&&(t["points-to"]={"type-flows":this.getFlows(n)});var r=e.groups.find((function(e){return"heap-breakdown"===e.name}));void 0!==r&&(t["heap-breakdown"]={"heap-size":this.getHeaps(r)});var o=e.groups.find((function(e){return"code-breakdown"===e.name}));return void 0!==o&&(t["code-breakdown"]={"code-size":this.getCodes(o)}),t},t.prototype.getHeaps=function(e){var t,n,r=[];try{for(var o=__values(Object.entries(e.props)),i=o.next();!i.done;i=o.next()){var a=__read(i.value,2),s=a[0],u=a[1];r.push({name:s,size:Number.parseInt(u[0]),count:Number.parseInt(u[1])})}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},t.prototype.getFlows=function(e){var t,n,r,o=null===(r=null==e?void 0:e.graphs)||void 0===r?void 0:r.shift();if(void 0===o)throw new Error("Faulty data.");var i=[];try{for(var a=__values(o.nodes),u=a.next();!u.done;u=a.next()){var f=u.value;console.assert(!(f.inputs[0]instanceof Array),"Inputs is list."),console.assert(!(f.outputs[0]instanceof Array),"Outputs is list.");var c=new s(f.inputs,f.outputs),p={id:f.id,flowType:f.props.flowType,info:c};c.qualifiedNameSimpleParams=f.props.qualifiedNameSimpleParams,c.qualifiedName=f.nodeClass.nameTemplate,c.codeLocation=f.props.codeLocation,c.calleeNames=f.props.calleeNames,c.enclosingMethod=f.props.enclosingMethod,i.push(p)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i},t.prototype.getCodes=function(e){var t,n,r=[];try{for(var o=__values(Object.entries(e.props)),i=o.next();!i.done;i=o.next()){var a=__read(i.value,2),s=a[0],u=a[1];r.push({name:s,size:Number.parseInt(u)})}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},t._processPointsTo=function(e){var t=new f,n={},r={};return e.forEach((function(e){n[e.id]=e,"method"===e.flowType&&(r[e.info.qualifiedNameSimpleParams]=e.id)})),t.pointsToGraph=this._skipIrrelevantNodes(n),t.methodNameIndex=r,t},t._skipIrrelevantNodes=function(e){var t=["nullCheck"],n=function(e,t){for(;e.indexOf(t)>-1;)e.splice(e.indexOf(t),1)},r=Object.keys(e),o={},i={};return r.forEach((function(e){o[e]=!1})),r.forEach((function(r){var a=e[r];if(t.includes(a.flowType)){o[r]=!0;var s=[],u=[];a.info.inputs.forEach((function(t){o[t]||s.push(e[t])})),a.info.uses.forEach((function(t){o[t]||u.push(e[t])})),u.forEach((function(e){n(e.info.inputs,a.id),s.forEach((function(t){var n=t.id;e.info.inputs.includes(n)||e.info.inputs.push(n)}))})),s.forEach((function(e){n(e.info.uses,a.id),u.forEach((function(t){var n=t.id;e.info.uses.includes(n)||e.info.uses.push(n)}))}))}else i[r]=e[r]})),i},t}(e)},e}();e.Format=p}));
define('app/util',["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function e(){this._id=0}return e.prototype.newId=function(){return(this._id++).toString()},e}();e.util={formatTime:function(e){var t=new Date(e);return t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+"."+e%1e3},idGenerator:new t,dataSourceIdGenerator:new t,tileIdGenerator:new t,truncate:function(e,t,n){if(e.length<=t)return e;t<n.length+1&&console.warn("truncateCenter: omission string too long for maxLength, result will be longer");var r=t-n.length;return""+e.substr(0,Math.max(r,1))+n},truncateCenter:function(e,t,n){if(e.length<=t)return e;t<n.length+2&&console.warn("truncateCenter: omission string too long for maxLength, result will be longer");var r=t-n.length,o=Math.max(Math.ceil(r/2),1),i=Math.max(Math.floor(r/2),1);return""+e.substring(0,o)+n+e.substring(e.length-i)},roundAndFormat:function(e,t){var n=Math.pow(10,t),r=parseFloat((e*n).toFixed(11));return Math.round(r)/n},findRelevantCallee:function(e,t){var n=null;return e.info.calleeNames.forEach((function(e){e.startsWith(t.className)&&(n=e)})),n},simplifyClassName:function(e){var t=e.split(".");return t[t.length-1]},simplifyQualifiedName:function(e,t){var n=e.indexOf("("),r=null;if(n<0)n=e.length;else{var o=e.substring(n+1,e.length-1).split(", ");r=[],o.forEach((function(e){var t=e.split(".");null==r||r.push(t[t.length-1])}))}var i=e.substr(0,n).split("."),a=Math.min(t,i.length),l=i.slice(i.length-(a+1)).join(".");return null!=r&&(l+="("+r.join(", ")+")"),l},extractMethodName:function(e){var t=e.substr(0,e.indexOf("(")).lastIndexOf(".");return e.substr(t+1)},hashPassword:function(e){for(var t=new Array(32),n=0;n<t.length;n++)t[n]=0;0===e.length&&(e="empty");var r=0;for(n=0;n<8*e.length;n++)r=(r=1375251603^e.charCodeAt(n%e.length))<<1|r>>>31,t[n%t.length]=t[n%t.length]^r;return t},passwordMatch:function(t,n){var r=e.util.hashPassword(t);if(r.length!==n.length)return!1;for(var o=0;o<r.length;o++)if(r[o]!==n[o])return!1;return!0},getUrlParams:function(){var e=window.location.href.match("(.*\\?)([^#]+)");if(!e)return{};var t=e[2].split("&"),n={};return t.forEach((function(e){var t=e.split("=");2===t.length?n[t[0]]=function(e){if("true"===e)return!0;if("false"===e)return!1;return e}(t[1]):console.warn("Bad query parameter: "+e)})),n},openOrDownloadFile:function(e,t,n){var r=new Blob(e,{type:n}),o=URL.createObjectURL(r),i=document.createElement("a");i.href=o,i.download=t,i.type=n,i.click(),setTimeout((function(){URL.revokeObjectURL(o)}),100)},decodeUTF8:function(e){for(var t=0,n=[];t<e.length;){var r=e[t++];if(r>127)if(r>191&&r<224){if(t>=e.length)throw new Error("UTF-8 decode: incomplete 2-byte sequence");r=(31&r)<<6|63&e[t++]}else if(r>223&&r<240){if(t+1>=e.length)throw new Error("UTF-8 decode: incomplete 3-byte sequence");r=(15&r)<<12|(63&e[t++])<<6|63&e[t++]}else{if(!(r>239&&r<248))throw new Error("UTF-8 decode: unknown multibyte start 0x"+r.toString(16)+" at index "+(t-1));if(t+2>=e.length)throw new Error("UTF-8 decode: incomplete 4-byte sequence");r=(7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++]}if(r<=65535)n.push(String.fromCharCode(r));else{if(!(r<=1114111))throw new Error("UTF-8 decode: code point 0x"+r.toString(16)+" exceeds UTF-16 reach");r-=65536,n.push(String.fromCharCode(r>>10|55296)),n.push(String.fromCharCode(1023&r|56320))}}return n.join("")}}}));
var __awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},__generator=this&&this.__generator||function(t,e){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};define('app/model',["require","exports","./format","./util","knockout"],(function(require,t,e,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=__importStar(n);var r=function(){function t(){var t=this;this.tiles=[],this.visibleTiles=n.observableArray(),this.tileIndex={},this.dataSources=n.observableArray(),this.activeDataSources=[],this.dataSourceIndex={},this.dataSourceNameIndex={},this.dataSourceTileMap={},this.dataSourceMap=n.pureComputed((function(){var e={};return t.dataSources().forEach((function(t){e[t.id]=t})),e}))}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.ensureDataSource=function(t,e,n){return __awaiter(this,void 0,void 0,(function(){var r,o,s,u,c,l;return __generator(this,(function(d){switch(d.label){case 0:return s=(o=Object).keys,[4,n];case 1:return(r=s.apply(o,[d.sent()])).includes("points-to")&&!r.includes("code-breakdown")?(alert("Points-to Explorer can't be shown on its own, please dump with Code Size Breakdown information."),[2]):t in this.dataSourceIndex?[3,3]:(c=a.bind,l=[void 0,i.util.dataSourceIdGenerator.newId(),t,e],[4,n]);case 2:u=new(c.apply(a,l.concat([d.sent()]))),this.dataSourceNameIndex[u.name]=u,this.dataSourceIndex[u.id]=u,this.dataSources.push(u),this.activeDataSources.push(u),d.label=3;case 3:return[2,this.dataSourceNameIndex[t]]}}))}))},t.prototype.addTile=function(t,e,n,r,a){var s,u;return __awaiter(this,void 0,void 0,(function(){var c;return __generator(this,(function(l){return(c=this.tiles.find((function(t){return t.sectionName===n&&t.dataSource===e})))&&(null===(s=c.contextualData)||void 0===s?void 0:s.entryPointName)===(null==a?void 0:a.entryPointName)||(c=new o(i.util.tileIdGenerator.newId(),t,e,n,r,a),this.tiles.push(c),this.visibleTiles.splice(0,0,c),this.tileIndex[c.id]=c,this.dataSourceTileMap[c.dataSource.id]=c),null===(u=document.getElementById(this._getTileId(c)))||void 0===u||u.scrollIntoView(),[2]}))}))},t.prototype.hideTile=function(t){this._removeTileFromVisibleList(t),this._removeDataSourceFromActiveList(this.tileIndex[t].dataSource.id)},t.prototype.activateDataSource=function(t){this._addDataSourceToActiveList(t),this._addTileToVisibleList(this.dataSourceTileMap[t].id)},t.prototype.deactivateDataSource=function(t){this._removeDataSourceFromActiveList(t),this._removeTileFromVisibleList(this.dataSourceTileMap[t].id)},t.prototype._addTileToVisibleList=function(t){this.visibleTiles().find((function(e){return e.id===t}))||this.visibleTiles.splice(0,0,this.tileIndex[t])},t.prototype._removeTileFromVisibleList=function(t){this.visibleTiles.remove((function(e){return e.id===t}))},t.prototype._addDataSourceToActiveList=function(t){-1===this.activeDataSources.findIndex((function(e){return e.id===t}))&&this.activeDataSources.push(this.dataSourceIndex[t])},t.prototype._removeDataSourceFromActiveList=function(t){var e=this.activeDataSources.findIndex((function(e){return e.id===t}));-1!==e&&this.activeDataSources.splice(e,1)},t.prototype._getTileId=function(t){return"mosaic-tile-"+t.id},t}();t.Model=r;var o=function(t,e,i,n,r,o){this.id=t,this.componentName=e,this.dataSource=i,this.sectionName=n,this.section=r,this.contextualData=o,this.focus=-1};t.Tile=o;var a=function(){function t(t,e,i,n){this.id=t,this.name=e,this._formatName=i,this.data=n}return Object.defineProperty(t.prototype,"format",{get:function(){return e.Format.create(this._formatName)},enumerable:!0,configurable:!0}),t.prototype.componentFor=function(t){return this.format.sections[t].component},t.prototype.sectionFor=function(t){return this.data[t]()},t}();t.DataSource=a}));
var __awaiter=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{u(n.next(t))}catch(t){i(t)}}function a(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},__generator=this&&this.__generator||function(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},__values=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};define('app/bgv-parse',["require","exports","./util"],(function(require,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function t(t){var e=this;this.reader=t.stream().getReader(),this.chunks=[],this.iters=[],this.readChunk=function(t){return t.done?(e.done(),Promise.resolve(t)):(t.value&&(e.chunks.push(t.value),e.updateIters()),Promise.resolve(t))},this.readRest=function(t){return t.done?Promise.resolve(void 0):e.reader.read().then(e.readChunk).then(e.readRest)}}return t.prototype.done=function(){var t,e;this.reader.releaseLock();try{for(var r=__values(this.iters),n=r.next();!n.done;n=r.next()){n.value.done()}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.iters=[]},t.prototype.updateIters=function(){var t,e,r=this.chunks.length;try{for(var n=__values(this.iters),o=n.next();!o.done;o=n.next()){o.value.update(r)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.read=function(t,e){return __awaiter(this,void 0,void 0,(function(){var r,o,i=this;return __generator(this,(function(s){switch(s.label){case 0:if(!(this.chunks.length>0))return[3,1];if(this.chunks[0].length<e)throw new Error("Chunk is too small to read header of file.");return r=new n(this),t(r),[2,Promise.resolve(r)];case 1:return o=this.readRest,[4,this.reader.read().then(this.readChunk).then((function(o){if(!o.value||o.value.length<e)throw new Error("Chunk is too small to read header of file.");return r=new n(i),t(r),o}))];case 2:return[2,o.apply(this,[s.sent()]).then((function(){return r}))]}}))}))},t}(),n=function(){function t(t){var e=this;this.source=t,this.done=void 0===this.source.iters,this.done||this.source.iters.push({done:function(){return e.done=!0},update:function(t){return e.maxChunk=t}}),this.chunk=0,this.pos=0,this.curChunk=this.source.chunks[0],this.curLength=this.curChunk.length,this.maxChunk=this.source.chunks.length,this.view=new DataView(this.curChunk.buffer),this.views={},this.views[4]=new DataView(new ArrayBuffer(4)),this.views[8]=new DataView(new ArrayBuffer(8))}return t.prototype.loadTo=function(t,e,r){for(var n=0;n<r;++n)t.setUint8(n,this.next());this.nextChunk();for(n=r;n<e;++n)t.setUint8(n,this.next());return t},t.prototype.chunkLeft=function(){return this.curLength-this.pos},t.prototype.chunksLeft=function(){return this.maxChunk-this.chunk},t.prototype.readable=function(t,e){return e<=t||this.chunksLeft()>1&&this.source.chunks[this.chunk+1].length+t>=e},t.prototype.available=function(t){return this.readable(this.chunkLeft(),t)},t.prototype.next=function(){return this.curChunk[this.pos++]},t.prototype.nextChunk=function(){this.curChunk=this.source.chunks[++this.chunk],this.curLength=this.curChunk.length,this.view=new DataView(this.curChunk.buffer),this.pos=0},t.prototype.nextByte=function(){var t=this.chunkLeft();if(!this.readable(t,1))throw new Error("No more bytes.");return 0===t&&this.nextChunk(),this.next()},t.prototype.readData=function(t,e){var r=this.chunkLeft();if(!this.readable(r,t))throw new Error("Not enough bytes.");if(0===r)this.nextChunk();else if(t>r){var n=this.views[t];return null==n&&(n=this.views[t]=new DataView(new ArrayBuffer(t))),this.loadTo(n,t,r),e(n,0,t)}var o=this.pos;return this.pos+=t,e(this.view,o,this.pos)},t.getBytes=function(t,e,r){return new Uint8Array(t.buffer,e,r-e)},t.getShort=function(t,e){return t.getUint16(e)},t.getShorts=function(t,e,r){return new Uint16Array(t.buffer,e,(r-e)/2)},t.getInt=function(t,e){return t.getInt32(e)},t.getInts=function(t,e,r){return new Int32Array(t.buffer,e,(r-e)/4)},t.getDouble=function(t,e){return t.getFloat64(e)},t.getDoubles=function(t,e,r){return new Float64Array(t.buffer,e,(r-e)/8)},t.getLong=function(t,e){return t.getBigInt64(e)},t}(),o=function(){function t(t){this.data=new r(t)}return t.prototype.available=function(t){return void 0===t&&(t=1),this.iterator.available(t)},t.prototype.read=function(t,e){var r=this;return this.data.read((function(e){return r.iterator=e,t(r),r}),e)},t.prototype.getByte=function(){return this.iterator.nextByte()},t.prototype.getBytes=function(t){return this.iterator.readData(t,n.getBytes)},t.prototype.getShort=function(){return this.iterator.readData(2,n.getShort)},t.prototype.getShorts=function(t){return this.iterator.readData(2*t,n.getShorts)},t.prototype.getInt=function(){return this.iterator.readData(4,n.getInt)},t.prototype.getInts=function(t){return this.iterator.readData(4*t,n.getInts)},t.prototype.getDouble=function(){return this.iterator.readData(8,n.getDouble)},t.prototype.getDoubles=function(t){return this.iterator.readData(8*t,n.getDoubles)},t.prototype.getLong=function(){return this.iterator.readData(8,n.getLong)},t.prototype.getString=function(t){return e.util.decodeUTF8(this.getBytes(t))},t}(),i=function(){};t.Document=i;var s=function(){};t.Group=s;var a=function(){};t.Graph=a;var u=function(){};t.Node=u;var h=function(){};t.Block=h;var d=function(){};t.NodeClass=d;var c=function(){};t.Class=c;var p=function(){};t.Method=p;var f=function(){};t.Signature=f;var l=function(){};t.Port=l;var g=function(){};t.Enum=g;var O=function(){};t.NodeSourcePosition=O;var y=function(){};t.NodeSourcePositionInfo=y;var v=function(){};t.Field=v;var w=function(){};t.Properties=w;var E=function(){function t(){this.pool=[],this.root=new i}return t.read=function(e){return(new t).read(e)},t.prototype.read=function(t){var e=this;return this.reader=new o(t),this.reader.read(this.readHeader.bind(this),6).then((function(){return e}))},t.prototype.parse=function(t){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.load(t)];case 1:return r.sent(),[2,this.root];case 2:throw e=r.sent(),console.error(e),e;case 3:return[2]}}))}))},t.prototype.readHeader=function(t){if(t!==this.reader)throw new Error("Unexpected reader in callback.");var e=t.getString(4);if("BIGV"!==e)throw new Error("Wrong file header magic: "+e);var r=t.getByte();if(r<6)throw new Error("Wrong file header version: "+e+":"+t.getByte());this.root.version={M:r,m:t.getByte()}},t.prototype.load=function(t){var e;return __awaiter(this,void 0,void 0,(function(){var r;return __generator(this,(function(n){this.root.groups=[],this.groups=[];try{for(;this.reader.available();)this.readRoot(),t&&(t(null!==(e=this.curGroup)&&void 0!==e?e:this.groups[0]),t=void 0);if(void 0!==this.curGroup||this.groups.length>0)throw new Error("Unexpected end of data.")}catch(t){throw this.groups.length>0?this.root.unloaded=this.groups[0]:this.root.unloaded=this.curGroup,this.curGroup=void 0,this.groups=void 0,console.log(this.root),this.root=new i,t}if(this.curGroup=void 0,0!==this.groups.length)throw r=this.groups,this.groups=void 0,new Error("Groups not ended properly: "+r);return[2]}))}))},t.prototype.readRoot=function(){var e=this.reader.getByte();switch(e){case t.DEF.CONTROL.STREAM_PROPERTIES:return void(this.root.props=this.readProperties());case t.DEF.CONTROL.BEGIN_GROUP:var r=this.readGroup();return void 0!==this.curGroup&&(void 0===this.curGroup.groups&&(this.curGroup.groups=[]),this.curGroup.groups.push(r),this.groups&&this.groups.push(this.curGroup)),void(this.curGroup=r);case t.DEF.CONTROL.CLOSE_GROUP:if(void 0===this.curGroup)throw new Error("Undefined current Group.");if(this.groups){var n=this.groups.pop();void 0===n&&this.root.groups.push(this.curGroup),this.curGroup=n}return;case t.DEF.CONTROL.BEGIN_GRAPH:if(void 0===this.curGroup)throw new Error("Undefined current Group.");var o=this.readGraph();return void 0===this.curGroup.graphs&&(this.curGroup.graphs=[]),void this.curGroup.graphs.push(o);case void 0:return;default:throw new Error("Unknown control type: "+e)}},t.prototype.readProperties=function(){var e=this.reader.getShort();if(e===Math.pow(2,16)-1){if(!(this.root.version.M>7))throw new Error("Unexpected size of properties.");e=this.reader.getInt()}for(var r=new w,n=0;n<e;++n){var o=this.readPoolObject(t.DEF.POOL.STRING),i=this.readPropertyObject();r[o]=i}return r},t.prototype.readPoolObject=function(e){var r=this.reader.getByte();if(r===t.DEF.POOL.NULL)return null;if(r===t.DEF.POOL.NEW)return this.addPoolEntry(e);if(e&&r!==e)throw new Error("Readed unexpected type: "+r+" expected: "+e);var n=this.reader.getShort(),o=this.pool[n];if(o.type!==r)throw new Error("Loaded unexpected pool type: "+o.type+" expected: "+r+" at index: "+n);return o.value},t.prototype.addPoolEntry=function(e){void 0===e&&(e=null);var r,n=this.reader.getShort(),o=this.reader.getByte();if(null!==e&&o!==e)throw new Error("Readed unexpected type: "+o+" expected: "+e+" at index: "+n);switch(o){case t.DEF.POOL.STRING:r=this.readString();break;case t.DEF.POOL.NODE_CLASS:r=this.readNodeClass();break;case t.DEF.POOL.CLASS:r=this.readClass();break;case t.DEF.POOL.ENUM:r=this.readEnum();break;case t.DEF.POOL.METHOD:r=this.readMethod();break;case t.DEF.POOL.FIELD:r=this.readField();break;case t.DEF.POOL.SIGNATURE:r=this.readSignature();break;case t.DEF.POOL.NODE_SOURCE_POSITION:r=this.readNodeSourcePosition();break;default:throw new Error("Unknown pool entry type: "+o+" with index: "+n)}return this.pool[n]={type:o,value:r},r},t.prototype.readString=function(){return this.reader.getString(this.reader.getInt())},t.prototype.readBytes=function(){return this.reader.getBytes(this.reader.getInt())},t.prototype.readInts=function(){return this.reader.getInts(this.reader.getInt())},t.prototype.readDoubles=function(){return this.reader.getDoubles(this.reader.getInt())},t.prototype.readPropertyObject=function(){var e=this.reader.getByte();switch(e){case t.DEF.PROP.POOL:return this.readPoolObject();case t.DEF.PROP.DOUBLE:return this.reader.getDouble();case t.DEF.PROP.LONG:return this.reader.getLong();case t.DEF.PROP.INT:return this.reader.getInt();case t.DEF.PROP.TRUE:return!0;case t.DEF.PROP.FALSE:return!1;case t.DEF.PROP.ARRAY:return this.readArray();default:throw new Error("Unknown property type: "+e)}},t.prototype.readGroup=function(){var e=new s;return e.name=this.readPoolObject(t.DEF.POOL.STRING),e.shortName=this.readPoolObject(t.DEF.POOL.STRING),e.method=this.readPoolObject(t.DEF.POOL.METHOD),e.bci=this.reader.getInt(),e.props=this.readProperties(),e},t.prototype.readGraph=function(){var t=new a;t.id=this.reader.getInt(),t.format=this.readString();var e=this.reader.getInt();t.args=new Array(e);for(var r=0;r<e;++r)t.args[r]=this.readPropertyObject();return t.props=this.readProperties(),t.nodes=this.readNodes(),t.blocks=this.readBlocks(),t},t.prototype.readNodes=function(){for(var t=this.reader.getInt(),e=new Array(t),r=0;r<t;++r)e[r]=this.readNode();return e},t.prototype.readNode=function(){var e=new u;return e.id=this.reader.getInt(),e.nodeClass=this.readPoolObject(t.DEF.POOL.NODE_CLASS),e.preds=this.reader.getByte(),e.props=this.readProperties(),e.inputs=[],this.readEdges(e.nodeClass.inputs,e.inputs),e.outputs=[],this.readEdges(e.nodeClass.suxs,e.outputs),e},t.prototype.readNodeClass=function(){var e=new d;e.klass=this.readPoolObject(t.DEF.POOL.CLASS),e.nameTemplate=this.readString();var r=this.reader.getShort();e.inputs=new Array(r);for(var n=0;n<r;++n){var o=new l;o.isList=0!==this.reader.getByte(),o.name=this.readPoolObject(t.DEF.POOL.STRING),o.inputType=this.readPoolObject(t.DEF.POOL.ENUM),e.inputs[n]=o}var i=this.reader.getShort();e.suxs=new Array(i);for(n=0;n<i;++n){var s=new l;s.isList=0!==this.reader.getByte(),s.name=this.readPoolObject(t.DEF.POOL.STRING),e.suxs[n]=s}return e},t.prototype.readClass=function(){var e=new c;if(e.name=this.readString(),e.classType=this.reader.getByte(),e.classType===t.DEF.CLS.ENUM){var r=this.reader.getInt();e.values=new Array(r);for(var n=0;n<r;++n)e.values[n]=this.readPoolObject(t.DEF.POOL.STRING)}else if(e.classType!==t.DEF.CLS.CLASS)throw new Error("Unknown Klass type: "+e.classType);return e},t.prototype.readEnum=function(){var e=new g;return e.enumClass=this.readPoolObject(t.DEF.POOL.CLASS),e.ordinal=this.reader.getInt(),e},t.prototype.readMethod=function(){var e=new p;return e.holder=this.readPoolObject(t.DEF.POOL.CLASS),e.name=this.readPoolObject(t.DEF.POOL.STRING),e.signature=this.readPoolObject(t.DEF.POOL.SIGNATURE),e.flags=this.reader.getInt(),e.code=this.readBytes(),e},t.prototype.readSignature=function(){var e=new f,r=this.reader.getShort();e.args=[];for(var n=0;n<r;++n)e.args.push(this.readPoolObject(t.DEF.POOL.STRING));return e.returnType=this.readPoolObject(t.DEF.POOL.STRING),e},t.prototype.readBlocks=function(){for(var t=this.reader.getInt(),e=new Array(t),r=0;r<t;++r)e[r]=this.readBlock();return e},t.prototype.readBlock=function(){var t=new h;t.id=this.reader.getInt();var e=this.reader.getInt();t.nodes=new Array(e);for(var r=0;r<e;++r)t.nodes[r]=this.reader.getInt();var n=this.reader.getInt();t.edges=new Array(n);for(r=0;r<n;++r)t.edges[r]=this.reader.getInt();return t},t.prototype.readEdges=function(t,e){var r,n;try{for(var o=__values(t),i=o.next();!i.done;i=o.next()){if(i.value.isList){for(var s=[],a=this.reader.getShort(),u=0;u<a;++u)s.push(this.reader.getInt());e.push(s)}else e.push(this.reader.getInt())}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},t.prototype.readNodeSourcePosition=function(){var e=new O;for(e.method=this.readPoolObject(t.DEF.POOL.METHOD),e.bci=this.reader.getInt(),e.infos=[];;){var r=this.readPoolObject(t.DEF.POOL.STRING);if(null===r)break;var n=new y;n.uri=r,n.language=this.readString(),n.line=this.reader.getInt(),n.startOffset=this.reader.getInt(),n.endOffset=this.reader.getInt(),e.infos.push(n)}return e.parent=this.readPoolObject(t.DEF.POOL.NODE_SOURCE_POSITION),e},t.prototype.readArray=function(){var e=this.reader.getByte();switch(e){case t.DEF.PROP.INT:return this.readInts();case t.DEF.PROP.DOUBLE:return this.readDoubles();case t.DEF.PROP.POOL:return this.readPoolObjects();default:throw new Error("Unknown Array subType: "+e)}},t.prototype.readPoolObjects=function(){var t=this.reader.getInt();if(t<0)return null;for(var e=[],r=0;r<t;++r)e.push(this.readPoolObject());return e},t.prototype.readField=function(){var e=new v;return e.holder=this.readPoolObject(t.DEF.POOL.CLASS),e.name=this.readPoolObject(t.DEF.POOL.STRING),e.fType=this.readPoolObject(t.DEF.POOL.STRING),e.flags=this.reader.getInt(),e},t.DEF=Object.freeze({CONTROL:Object.freeze({BEGIN_GROUP:0,BEGIN_GRAPH:1,CLOSE_GROUP:2,STREAM_PROPERTIES:3}),CLS:Object.freeze({CLASS:0,ENUM:1}),POOL:Object.freeze({NEW:0,STRING:1,ENUM:2,CLASS:3,METHOD:4,NULL:5,NODE_CLASS:6,FIELD:7,SIGNATURE:8,NODE_SOURCE_POSITION:9,NODE:10}),PROP:Object.freeze({POOL:0,INT:1,LONG:2,DOUBLE:3,FLOAT:4,TRUE:5,FALSE:6,ARRAY:7,SUBGRAPH:8})}),t}();t.BGVParser=E}));
define('app/pointstograph-layout',["require","exports"],(function(require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=function(){function t(t,e){this._layoutContext=t,this._explorationDegrees=e}return t.layout=function(e,o){var n=new t(e,o);n.layoutNodes(),n.layoutLinks(),n.positionNodeLabels(),n.positionLinkLabels()},t.prototype.layoutNodes=function(){for(var t={},e=new Set,o=new Map,n=this._layoutContext.getNodeCount(),i=0;i<n;i++){var a=this._layoutContext.getNodeByIndex(i),s=80*this._explorationDegrees[a.getId()];e.add(s),void 0===t[s]&&(t[s]=[]),t[s].push(a),o.set(a,{y:-s,x:0})}e.forEach((function(e){for(var n=t[e],i=e/80,a=n.length,s=0;s<a;s++){var r=n[s],y=o.get(r);y&&(y.x=i%2*125+500*s,r.setPosition(y))}}))},t.prototype.layoutLinks=function(){for(var t=0;t<this._layoutContext.getLinkCount();t++){var e=this._layoutContext.getLinkByIndex(t);e.setPoints(this.getEndpoints(e))}},t.prototype.getEndpoints=function(t){var e=this._layoutContext.getNodeById(t.getStartId()),o=this._layoutContext.getNodeById(t.getEndId()),n=e.getPosition(),i=o.getPosition(),a=e.getContentBounds(),s=o.getContentBounds(),r=n.x+a.x+.5*a.w,y=n.y+a.y+.5*a.h,h=i.x+s.x+.5*s.w,u=i.y+s.y+.5*s.h;a={x:n.x+a.x,y:n.y+a.y,w:a.w,h:a.h},s={x:i.x+s.x,y:i.y+s.y,w:s.w,h:s.h};var x=this._findLinkNodeIntersection(a,r,y,h,u,t.getStartConnectorOffset()),d=this._findLinkNodeIntersection(s,h,u,r,y,t.getEndConnectorOffset());return[x.x,x.y,d.x,d.y]},t.prototype._findLinkNodeIntersection=function(t,e,o,n,i,a){var s=Math.atan2(i-o,n-e),r=Math.atan2(t.h,t.w),y=Math.PI-r,h=-r,u=0,x=0;return s>=-y&&s<=h?(u=t.x+.5*t.w+Math.tan(Math.PI/2-s)*(.5*-t.h),x=t.y):s<=y&&s>=r?(u=t.x+.5*t.w+Math.tan(Math.PI/2-s)*(.5*t.h),x=t.y+t.h):s<=r&&s>=h?(u=t.x+t.w,x=t.y+.5*t.h+Math.tan(s)*(.5*t.w)):(u=t.x,x=t.y+.5*t.h+Math.tan(s)*(.5*-t.w)),a&&(u+=Math.cos(s)*a,x+=Math.sin(s)*a),{x:u,y:x}},t.prototype.positionNodeLabels=function(){for(var t=0;t<this._layoutContext.getNodeCount();t++){var e=this._layoutContext.getNodeByIndex(t);if(e.getLabelBounds()){var o=e.getContentBounds(),n=e.getPosition(),i=o.x+n.x+.5*o.w,a=o.y+n.y-o.h;e.setLabelPosition({x:i,y:a}),e.setLabelHalign("center")}}},t.prototype.positionLinkLabels=function(){for(var t=0;t<this._layoutContext.getLinkCount();t++){var e=this._layoutContext.getLinkByIndex(t),o=e.getLabelBounds();if(o){var n=e.getPoints();if(n.length>=4){var i=n[0],a=n[n.length-2],s=n[1],r=i+.5*(a-i),y=s+.5*(n[n.length-1]-s-o.h);e.setLabelPosition({x:r,y:y}),e.setLabelHalign("center")}}}},t}();t.PointsToGraphLayout=e}));
var __importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r};define('app/view-stack',["require","exports","knockout"],(function(require,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=__importStar(r);var e=function(){function t(){this.stack=r.observableArray()}return t.prototype.push=function(t){return t?this.stack.push(t):this.size()},t.prototype.pop=function(){return this.stack.pop()},t.prototype.peek=function(){return this.stack()[this.stack().length-1]},t.prototype.clear=function(){this.stack([])},t.prototype.size=function(){return this.stack().length},t.prototype.isEmpty=function(){return 0===this.stack().length},t.prototype.currentViewRoot=function(){return this.peek()},t}();t.ViewStack=e}));
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojcollapsible',["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojcontext","ojs/ojanimation"],function(e,t,i,s){"use strict";var n,a,o,r={properties:{disabled:{type:"boolean",value:!1},expandArea:{type:"string",enumValues:["disclosureIcon","header"],value:"header"},expanded:{type:"boolean",writeback:!0,value:!1},translations:{type:"object",value:{}}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojBeforeExpand:{},ojExpand:{},ojBeforeCollapse:{},ojCollapse:{}},extension:{}};
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
n=0,a="oj-collapsible-open-icon",o="oj-collapsible-close-icon",e.__registerWidget("oj.ojCollapsible",t.oj.baseComponent,{widgetEventPrefix:"oj",options:{expanded:!1,disabled:!1,expandOn:"click",expandArea:"header",beforeExpand:null,expand:null,beforeCollapse:null,collapse:null},_ComponentCreate:function(){this._super(),this.element.addClass("oj-collapsible oj-component"),this._processPanels(),this._refresh(),this._initialRender=!0;var e=this.element[0];this._expandCollapseHandler(this._createEventObject(e,this.options.expanded?"ojexpand":"ojcollapse")),this._initialRender=void 0},GetFocusElement:function(){return this._isDisabled()?this.element[0]:this._getCollapsibleIcon()[0]},_createEventObject:function(e,i){return{type:i,target:e,currentTarget:e,preventDefault:t.noop}},_NotifyContextMenuGesture:function(e,t,i){this._OpenContextMenu(t,i,{launcher:this._getCollapsibleIcon().first()})},_createIcons:function(){var e=this.options.expanded?a:o;(this._isDisabled()?t("<span>"):t('<a tabindex="0">')).addClass("oj-component-icon oj-clickable-icon-nocontext oj-collapsible-header-icon "+e).attr("aria-labelledby",this.header.attr("id")).prependTo(this.header)},_destroyIcons:function(){this.header.children(".oj-collapsible-header-icon").remove()},_destroy:function(){this._resolveBusyContext(),this._cleanup(),this.element.removeClass("oj-collapsible oj-component oj-expanded oj-collapsed oj-disabled"),this._isDisabled()&&this._findFocusables(this.header).removeAttr("tabIndex"),this.header.removeClass("oj-collapsible-header").each(function(){/^oj-collapsible/.test(this.id)&&this.removeAttribute("id")}),this._findFirstFocusableInHeader().removeAttr("role").removeAttr("aria-controls").removeAttr("aria-expanded").removeAttr("aria-disabled"),this._destroyIcons(),this.content.css("display","").removeAttr("aria-hidden").removeAttr("tabIndex").removeClass("oj-component-content oj-collapsible-content").each(function(){/^oj-collapsible/.test(this.id)&&this.removeAttribute("id")})},_cleanup:function(){this._tearDownEvents(),this.content&&(e.DomUtils.unwrap(this.content),this.wrapper=null)},_isDisabled:function(){return this.element.hasClass("oj-disabled")},_getExpandAreaSelector:function(){return"header"===this.options.expandArea?"> .oj-collapsible-header":"> .oj-collapsible-header > .oj-collapsible-header-icon"},_getCollapsibleIcon:function(){return this.header.find(".oj-collapsible-header-icon")},_setOption:function(e,t,i){if("expanded"!==e){if("disabled"===e)return this._super(e,t,i),void this.refresh();"expandOn"===e||"expandArea"===e?(this._tearDownEvents(),this._super(e,t,i),this._setupEvents()):this._super(e,t,i)}else{if(t===this.options.expanded)return;t?this.expand(!0):this.collapse(!0)}},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode;switch(e.keyCode){case i.SPACE:case i.ENTER:this._toggleHandler(e)}}},refresh:function(){this._super(),this._cleanup(),this._processPanels(),this._destroyIcons(),this._refresh()},_processHeaderSlots:function(){var i,s=this.element[0],n=!1,a=e.BaseCustomElementBridge.getSlotMap(s).header;if(a&&a.length)if(1===a.length)i=a[0];else{var o=t("<span slot='header'></span>");i=o[0];for(var r=0;r<a.length;r++)i.appendChild(a[r]);o.children().attr("slot",""),n=!0}else i=t("<span slot='header'></span>")[0],n=!0;return(n||0!==this.element.children().index(i))&&s.insertBefore(i,s.firstChild),t(i)},_processDefaultSlots:function(){var i,s=this.element[0],n=e.BaseCustomElementBridge.getSlotMap(s)[""];if(n&&1===n.length)i=n[0];else{if(i=t("<div></div>")[0],n&&n.length)for(var a=0;a<n.length;a++)i.appendChild(n[a]);s.appendChild(i)}return t(i)},_processPanels:function(){this._IsCustomElement()?this.header=this._processHeaderSlots():this.header=this.element.children(":first-child"),this.header.addClass("oj-collapsible-header"),this._IsCustomElement()?this.content=this._processDefaultSlots():this.content=this.header.next(),this.content.addClass("oj-collapsible-content oj-component-content"),this.content.wrap("<div></div>"),this.wrapper=this.content.parent().addClass("oj-collapsible-wrapper"),this.options.disabled&&this.element.addClass("oj-disabled"),this._isDisabled()&&this._findFocusables(this.header).attr("tabIndex",-1)},_refresh:function(){var e=this.header,t=this.content,i=this.options,s=this.element.attr("id");s||(s=n+=1);var a="oj-collapsible-"+s;this.collapsibleId=a;var o=e.attr("id"),r=t.attr("id");o||(o=a+"-header",e.attr("id",o)),r||(r=a+"-content",t.attr("id",r)),this._createIcons();var l=this._findFirstFocusableInHeader();l.attr("role","button").attr("aria-controls",r).attr("aria-expanded",i.expanded),this._isDisabled()&&l.attr("aria-disabled","true"),i.expanded?t.removeAttr("aria-hidden"):(this.wrapper.css({"max-height":0,"overflow-y":"hidden",display:"none"}),t.attr("aria-hidden","true")),this._setupEvents()},_setupEvents:function(){var i={keydown:this._keydown},s=this.options.expandOn;if(s){var n=this;t.each(s.split(" "),function(t,s){e.DomUtils.isValidIdentifier(s)&&(i[s]=n._toggleHandler)})}var a=this.element.find(this._getExpandAreaSelector());this._on(a,i),this._on(this.wrapper,{transitionend:this._transitionEndHandler,webkitTransitionEnd:this._transitionEndHandler}),this._isDisabled()||(this._on(this.element,{ojfocus:this._focusHandler,ojfocusout:this._focusHandler}),this._focusable({element:this._getCollapsibleIcon(),applyHighlight:!0}),this._AddHoverable(a),this._AddActiveable(a))},_tearDownEvents:function(){var e=this.element.find(this._getExpandAreaSelector());this._RemoveHoverable(e),this._RemoveActiveable(e),this._off(e),this.wrapper&&this._off(this.wrapper),this._off(this.element.add(this.content))},_toggleHandler:function(e){if(!this._isDisabled()&&!e.isDefaultPrevented()){for(var i=t(e.target);i.length&&i[0]!==this.header[0];i=i.parent())if(i.hasClass("oj-clickthrough-disabled"))return;this.options.expanded?this.collapse(!0,e):this.expand(!0,e),e.preventDefault(),e.stopPropagation(),this._getCollapsibleIcon().focus()}},_calcEffectTime:function(e){for(var t=e.css("transitionProperty"),i=e.css("transitionDelay"),s=e.css("transitionDuration"),n=t.split(","),a=i.split(","),o=s.split(","),r=n.length,l=a.length,d=o.length,h=0,c=0;c<r;c++){var p=o[c%d],u=p.indexOf("ms")>-1?parseFloat(p):1e3*parseFloat(p);if(u>0){var _=a[c%l],f=_.indexOf("ms")>-1?parseFloat(_):1e3*parseFloat(_);h=Math.max(h,f+u)}}return h+100},_resolveTransition:function(e){var t=this;this._transitionTimer=setTimeout(function(){t._transitionEndHandler()},t._calcEffectTime(e))},_expandCollapseHandler:function(e){if((!this._isDisabled()||this._initialRender)&&e.target===this.element[0]&&(this._initialRender||!e.isDefaultPrevented||!e.isDefaultPrevented())){var t=this.element,i=this.content,n=this.wrapper,r="ojexpand"===e.type,l=this;if(e.preventDefault(),this._initialRender||this._changeExpandedOption(r),this._getCollapsibleIcon().toggleClass(a,r).toggleClass(o,!r||!1).end(),this._initialRender||document.hidden||this.element.hasClass("oj-collapsible-skip-animation"))r||(n.css("max-height",0),n.hide()),l._afterExpandCollapse(r,e);else{if(n.contentHeight=n.outerHeight(),!this._animationResolve){var d=s.getContext(t[0]).getBusyContext();this._animationResolve=d.addBusyState({description:"The collapsible id='"+this.element.attr("id")+"' is animating."})}this._transitionEnded=!1,r?(n.show(),setTimeout(function(){n.contentHeight+=i.outerHeight(),n.addClass("oj-collapsible-transition").css({"max-height":n.contentHeight}),l._resolveTransition(n)},0)):(n.removeClass("oj-collapsible-transition"),n.css({"max-height":n.contentHeight,"overflow-y":"hidden"}),0===n.contentHeight?l._transitionEndHandler():setTimeout(function(){n.addClass("oj-collapsible-transition").css({"max-height":0}),l._resolveTransition(n)},20))}}},_focusHandler:function(e){this._isDisabled()||("ojfocusout"===e.type?(this._findFirstFocusableInHeader().attr("tabIndex",-1),e.preventDefault(),e.stopPropagation()):"ojfocus"===e.type&&(this._findFirstFocusableInHeader().attr("tabIndex",0).focus(),e.preventDefault(),e.stopPropagation()))},_findFirstFocusableInHeader:function(){return this._findFocusables(this.header).first()},_findFocusables:function(e){return this._isDisabled()?e.find("span"):e.find("a,:input")},expand:function(e,t){if(!this._isDisabled()){var i={header:this.header,content:this.content};e&&!1===this._trigger("beforeExpand",t,i)||this._expandCollapseHandler(this._createEventObject(this.element[0],"ojexpand"))}},collapse:function(e,t){if(!this._isDisabled()){var i={header:this.header,content:this.content};e&&!1===this._trigger("beforeCollapse",t,i)||this._expandCollapseHandler(this._createEventObject(this.element[0],"ojcollapse"))}},_transitionEndHandler:function(e){if(!(this._isDisabled()||e&&e.target!==this.element[0])){var t=!1;e&&e.originalEvent&&(t="max-height"===e.originalEvent.propertyName),t&&this._transitionTimer&&(clearTimeout(this._transitionTimer),this._transitionTimer=void 0),e&&(e.preventDefault(),e.stopImmediatePropagation()),this._transitionEnded||(!t&&e||(this._transitionEnded=!0),this.options.expanded?this.wrapper.css({"max-height":9999,"overflow-y":""}):this.wrapper.hide(),this.wrapper.removeClass("oj-collapsible-transition"),this._afterExpandCollapse(this.options.expanded,e))}},_resolveBusyContext:function(){this._animationResolve&&(this._animationResolve(),this._animationResolve=null)},_afterExpandCollapse:function(e,t){var s=this.element,n=this.wrapper;e?(s.removeClass("oj-collapsed"),s.addClass("oj-expanded"),i.subtreeShown(n[0])):(s.removeClass("oj-expanded"),s.addClass("oj-collapsed"),i.subtreeHidden(n[0])),e?this.content.removeAttr("aria-hidden"):this.content.attr("aria-hidden","true"),this._findFirstFocusableInHeader().attr("aria-expanded",e),this._resolveBusyContext();var a={header:this.header,content:this.content};this._initialRender||(e?this._trigger("expand",t,a):this._trigger("collapse",t,a))},_changeExpandedOption:function(e){this.option("expanded",e,{_context:{writeback:!0,internalSet:!0}})},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;switch(e.subId){case"oj-collapsible-content":return this.content[0];case"oj-collapsible-header":return this.header[0];case"oj-collapsible-disclosure":case"oj-collapsible-header-icon":return this._getCollapsibleIcon()[0]}return null},getSubIdByNode:function(e){for(var t=this.getNodeBySubId({subId:"oj-collapsible-disclosure"}),i=e;i;){if(i===this.content[0])return{subId:"oj-collapsible-content"};if(i===this.header[0])return{subId:"oj-collapsible-header"};if(i===t)return{subId:"oj-collapsible-disclosure"};i=i.parentElement}return null}}),r.extension._WIDGET_NAME="ojCollapsible",r.extension._CONTROLS_SUBTREE_HIDDEN=!0,e.CustomElementBridge.register("oj-collapsible",{metadata:r})});
var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};define('viewModels/x-dashboard',["require","exports","../app/model","ojs/ojmodule-element-utils","knockout","ojs/ojcollapsible"],(function(require,e,t,o,a){"use strict";return o=__importStar(o),a=__importStar(a),function(){var e=this;this.model=t.Model.getInstance(),this.expanded=a.observable(!1),this.modalConfig=o.createConfig({name:"x-modal",params:{model:this.model}}),this.dataSourceListConfig=o.createConfig({name:"x-data-source-list",params:{model:this.model}}),this.mosaicConfig=o.createConfig({name:"x-mosaic",params:{model:this.model}}),this.open=function(t){var o;null===(o=document.getElementById("modal"))||void 0===o||o.open(),e.expanded(!0)}}}));
/**
 * Copyright (c) 2015, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
!function(){function a(){"use strict";function a(a,b,e){f[a]={deps:b.map(c),module:e,resolve:d}}function b(a,b){var c=e(a);b.apply(null,c)}function c(a){return 0===a.indexOf("./")?a.substr(2):a}function d(){if(!this._resolvedModule){var a=e(this.deps),b=this.module;this._resolvedModule="function"==typeof b?b.apply(null,a):b}return this._resolvedModule}function e(a){return a.map(function(a){return f[a].resolve()})}var f={};return{define:a,require:b}}var b=a(),c=b.define,d=b.require;c("dataTransfer",[],function(){"use strict";function a(a,b){function c(a){if("protected"!==p()){var b=f(a);return b&&m.hasOwnProperty(b)?m[b]:null}return""}function d(a,b){if("readwrite"===p()){var c=f(a);c&&(m[c]=b.toString())}}function e(a){if("readwrite"===p()){var b=f(a);b?m.hasOwnProperty(b)&&delete m[b]:m={}}}function f(a){return a?a.toString().toLowerCase():null}function g(b,c,d){a&&a(b,c,d)}function h(){var a=Object.keys(m);return a.item=function(b){return b>=0&&b<a.length?a[b]:null},a.contains=function(b){return a.indexOf(b)>=0},a}function i(){return n}function j(a){a=a.toLowerCase(),q.indexOf(a)>=0&&(n=a)}function k(){return o}function l(a){a=a.toLowerCase(),r.indexOf(a)>=0&&(o=a)}var m={},n="none",o="uninitialized",p=b||function(){return"readwrite"},q=["none","copy","link","move"],r=["uninitialized","none","copy","copylink","copymove","link","linkmove","move","all"];this.files={},this.items={},this.getData=c,this.setData=d,this.clearData=e,this.setDragImage=g,Object.defineProperty(this,"types",{get:h}),Object.defineProperty(this,"dropEffect",{get:i,set:j}),Object.defineProperty(this,"effectAllowed",{get:k,set:l})}return a}),c("dragImage",[],function(){"use strict";function a(a,b,c){function d(a){var b=0;if(a.children)for(var c=0;c<a.children.length;c++){var e=a.children[c],f=window.getComputedStyle(e);b="static"===f.position||"auto"===f.zIndex||isNaN(f.zIndex)?Math.max(b,d(e)):Math.max(b,f.zIndex)}return b}function e(a){var b=null!=a.parentNode,c=a.style.position,e=a.style.top;b||(a.style.position="fixed",a.style.top="10000px",document.body.appendChild(a));var f=a.cloneNode(!0);return f.id=a.id+"_dragimage",f.style.opacity=.7,f.style.position="fixed",f.style.width=a.offsetWidth+"px",f.style.height=a.offsetHeight+"px",f.style.zIndex=d(document.body)+1,f.style.visibility="hidden",b||(document.body.removeChild(a),a.style.position=c,a.style.top=e),f}function f(){document.body.appendChild(j),j.scrollLeft=m,j.scrollTop=n}function g(){document.body.removeChild(j),j=null}function h(a,b){j.style.left=a-k+m+"px",j.style.top=b-l+n+"px"}function i(a){j.style.visibility=a?"visible":"hidden"}var j=e(a),k=b,l=c,m=a.scrollLeft,n=a.scrollTop;this.start=f,this.end=g,this.move=h,this.show=i}return a}),c("eventDispatcher",[],function(){"use strict";function a(a,c,d){var e=b(a,c,d);return!c.target.dispatchEvent(e)}function b(a,b,d){var e;if(window.Event&&"function"==typeof window.Event){var g={bubbles:h[a].bubbles,cancelable:h[a].cancelable};e=new window.Event(a,g)}else e=document.createEvent("Event"),e.initEvent(a,h[a].bubbles,h[a].cancelable);return e.view=document.defaultView,e.detail=0,f(e,b),e.getModifierState=function(a){return c(a,b)},e.dataTransfer=d,e.__isPseudo=!0,e}function c(a,b){return"Alt"===a?b.altKey:"Control"===a?b.ctrlKey:"Meta"===a?b.metaKey:"Shift"===a&&b.shiftKey}function d(a){return a||0}function e(a){return a||!1}function f(a,b){var c=b.target.getBoundingClientRect();a.screenX=d(b.screenX),a.screenY=d(b.screenY),a.clientX=d(b.clientX),a.clientY=d(b.clientY),a.offsetX=b.clientX-c.left,a.offsetY=b.clientY-c.top,a.pageX=d(b.pageX),a.pageY=d(b.pageY),a.altKey=e(b.altKey),a.ctrlKey=e(b.ctrlKey),a.metaKey=e(b.metaKey),a.shiftKey=e(b.shiftKey),a.button=d(b.button),a.buttons=d(b.buttons),a.relatedTarget=b.relatedTarget?b.relatedTarget:null}function g(a){return{screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY,pageX:a.pageX,pageY:a.pageY,altKey:a.altKey,ctrlKey:a.ctrlKey,metaKey:a.metaKey,shiftKey:a.shiftKey,button:a.button,buttons:a.buttons}}var h={dragstart:{bubbles:!0,cancelable:!0},drag:{bubbles:!0,cancelable:!0},dragend:{bubbles:!0,cancelable:!1},dragenter:{bubbles:!0,cancelable:!0},dragover:{bubbles:!0,cancelable:!0},dragleave:{bubbles:!0,cancelable:!1},drop:{bubbles:!0,cancelable:!0}};return{dispatch:a,getMouseEventProps:g}}),c("autoScroller",[],function(){"use strict";function a(a,c,d){for(var e=a;null!=e&&!b(e,c,d);)e=e.parentNode;return e}function b(a,b,f){if(!c(a))return!1;var g,h,i=a.scrollLeft,j=a.scrollTop;if(a===document.documentElement)i=i||document.body.scrollLeft,j=j||document.body.scrollTop;else{var k=a.getBoundingClientRect();b-=Math.round(k.left),f-=Math.round(k.top)}return g=d(a.clientWidth,a.scrollWidth,b,i),h=d(a.clientHeight,a.scrollHeight,f,j),!(!g&&!h)&&(e(a,i+g,j+h),!0)}function c(a){if(a===document.body)return!1;if(a===document.documentElement)return!0;if(1===a.nodeType){var b=window.getComputedStyle(a,null);return("auto"===b.overflow||"scroll"===b.overflow)&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight)}return!1}function d(a,b,c,d){var e=12,f=15;if(c>a-e&&c<a){if(d+a<b)return f}else if(c>=0&&c<e&&d>0)return-Math.min(d,f);return 0}function e(a,b,c){a.scrollLeft=b,a.scrollTop=c,a===document.documentElement&&(document.body.scrollLeft=b,document.body.scrollTop=c)}return{checkAutoScroll:a}}),c("dragController",["./dataTransfer","./dragImage","./eventDispatcher","./autoScroller"],function(a,b,c,d){"use strict";function e(){function e(b,c,d){var e=new a(m,f);return g("dragstart",b,d,e)?{dragState:"canceled"}:j(e,c)?k(e,b,d):{dataTransfer:e}}function f(){return Q}function g(a,b,d,e,f){return Q=h(a),"dragstart"!==a&&(e.dropEffect=i(a,e.effectAllowed)),d||(d={}),d.target=b,d.relatedTarget=f,c.dispatch(a,d,e)}function h(a){return"dragstart"===a?"readwrite":"drop"===a?"readonly":"protected"}function i(a,b){return"drag"===a||"dragleave"===a?"none":"dragenter"===a||"dragover"===a?"none"===b?"none":"move"===b?"move":0===b.indexOf("link")?"link":"copy":U}function j(a,b){return 0!==a.types.length&&(!b||b(a,M))}function k(a,b,c){return L=a,N=b,P=document.body.style.cursor,l(b,c),{dragState:"started",dataTransfer:a}}function l(a,b){if(null==M){var c=a.getBoundingClientRect(),d=b?b.clientX:c.left,e=b?b.clientY:c.top;m(a,d-c.left,e-c.top)}}function m(a,c,d){M&&(M.end(),M=null),a&&a.cloneNode&&(R={x:c,y:d},M=new b(a,c,d),M.start())}function n(a){if(a&&o()){if(M.show(!1),p(a))return D(a),!0;try{var b=q(a);r(b,a),s(b,a),v(b,a),B(b,a)}finally{M.show(!0)}}return!1}function o(){return null!=L}function p(a){return g("drag",N,a,L)}function q(a){var b=a.clientX,c=a.clientY;return b===S&&c===T?O:document.elementFromPoint(b,c)}function r(a,b){a!==O&&(a&&g("dragenter",a,b,L,O),O&&(z(O),g("dragleave",O,b,L,a)))}function s(a,b){if(a){t(g("dragover",a,b,L))}}function t(a){if(a){var b=L.effectAllowed;U="uninitialized"===b||"all"===b||b.indexOf(L.dropEffect)>=0?L.dropEffect:"none"}else U=u(O)?"copy":"none"}function u(a){return a&&("TEXTAREA"===a.nodeName||"INPUT"===a.nodeName&&"text"===a.type)}function v(a,b){w(b),x(a),A(a,b)}function w(a){M.move(a.clientX,a.clientY)}function x(a){var b;b="none"===U?"not-allowed":"copy"===U?"copy":"link"===U?"alias":"default",b!==document.body.style.cursor&&(document.body.style.cursor=b),y(a,b)}function y(a,b){a.style.cursor!==b&&(void 0===a._dndSavedCursor&&(a._dndSavedCursor=a.style.cursor),a.style.cursor=b)}function z(a){void 0!==a._dndSavedCursor&&(a.style.cursor=a._dndSavedCursor,delete a._dndSavedCursor)}function A(a,b){d.checkAutoScroll(a,b.clientX,b.clientY)&&(S=-1,T=-1)}function B(a,b){O=a,S=b.clientX,T=b.clientY}function C(a){E(a,!1)}function D(a){E(a,!0)}function E(a,b){if(o()){M.show(!1);var c=q(a);c&&(z(c),F(c,a,b),G(c,a,b)),g("dragend",N,a,L),J()}}function F(a,b,c){H(c)||g("dragleave",a,b,L)}function G(a,b,c){if(H(c)){var d=g("drop",a,b,L);return d?U=L.dropEffect:u(a)?I(a):U="none",d}return!0}function H(a){return!a&&"none"!==U}function I(a){var b=L.getData("text");if(b&&""!==b){var c=a.value,d=a.selectionEnd;a.value=c.substring(0,d)+b+c.substring(d)}}function J(){m(null,0,0),L=null,N=null,O=null,U="none",document.body.style.cursor=P,P=null}function K(a){var b=a.target,d=a.relatedTarget,e=c.getMouseEventProps(a);switch(a.type){case"drag":M&&M.show(!0),g("drag",b,e,L);break;case"dragenter":g("dragenter",b,e,L,d);break;case"dragleave":g("dragleave",b,e,L,d);break;case"dragover":var f=R.x>0?e.clientX-V:e.clientX+W,h=e.clientY;M.move(f,h);var i=g("dragover",b,e,L);t(i),i&&a.preventDefault();break;case"dragend":M&&M.show(!1),g("dragend",b,e,L,d),J(),a.dataTransfer.clearData();break;case"drop":M&&M.show(!1),i=G(b,e,!1),i&&a.preventDefault()}}var L,M,N,O,P,Q,R,S=-1,T=-1,U="none",V=50,W=10;this.start=e,this.drag=n,this.end=C,this.cancel=D,this.handleDndEvent=K}return e}),c("args",[],function(){"use strict";function a(a,c){if(b(a,c),"string"!=typeof c)throw new Error("argument '"+a+"' must be a string")}function b(a,b){if(!b)throw new Error("required argument '"+a+"' not specified")}return{requiredString:a,required:b}}),c("glassPane",["./eventDispatcher"],function(a){"use strict";function b(b,c){function d(a){l=a,document.body.addEventListener("mouseenter",h,!0),document.body.addEventListener("mousemove",i,!0),document.body.addEventListener("mouseup",j,!0),k=window.setInterval(g,200)}function e(){k&&(window.clearInterval(k),k=null),document.body.removeEventListener("mouseenter",h,!0),document.body.removeEventListener("mousemove",i,!0),document.body.removeEventListener("mouseup",j,!0)}function f(){return l}function g(){try{b(l)}finally{}}function h(b){b.target===document.body&&b.buttons!==m&&(l=a.getMouseEventProps(b),c(l,!0))}function i(b){void 0===m&&(m=b.buttons),b.stopPropagation(),b.preventDefault(),l=a.getMouseEventProps(b),g()}function j(b){b.stopPropagation(),b.preventDefault(),l=a.getMouseEventProps(b),c(l,!1)}var k,l,m;this.start=d,this.end=e,this.getLastInputProps=f}return b}),c("desktopDragDriver",["./args","./glassPane","./eventDispatcher"],function(a,b,c){"use strict";function d(d,e){function f(){var a=navigator.userAgent.toLowerCase();(a.indexOf("trident")>0||a.indexOf("edge")>0||a.indexOf("phantomjs")>0)&&(e.addEventListener("dragstart",i,!0),e.addEventListener("drag",v,!0),e.addEventListener("dragover",v,!0),e.addEventListener("dragend",v,!0),e.addEventListener("dragenter",v,!0),e.addEventListener("dragleave",v,!0),e.addEventListener("drop",v,!0),e.addEventListener("pointerdown",h,!0))}function g(){e.removeEventListener("dragstart",i,!0),e.removeEventListener("drag",v,!0),e.removeEventListener("dragover",v,!0),e.removeEventListener("dragend",v,!0),e.removeEventListener("dragenter",v,!0),e.removeEventListener("dragleave",v,!0),e.removeEventListener("drop",v,!0),e.removeEventListener("pointerdown",h,!0)}function h(a){x=a.pointerType}function i(a){if("touch"===x){var b=a.target;b.style.visibility="hidden",u(a),setTimeout(function(){b.style.visibility="visible"},0)}else j(a)}function j(a){var b,e=c.getMouseEventProps(a);a.stopPropagation(),g();try{b=d.start(a.target,k,e)}finally{f()}"canceled"===b.dragState?a.preventDefault():"started"===b.dragState?o(a,b,e):m(b.dataTransfer,a)}function k(a,b){return null!=b||l(a)}function l(a){var b=a.types;if(0===b.length)return!1;for(var c=0;c<b.length;c++){var d=b[c].toLowerCase();if("text"!==d&&"url"!==d)return!0}return!1}function m(a,b){n(a,b,"text"),n(a,b,"url")}function n(a,b,c){var d=a.getData(c);d&&b.dataTransfer.setData(c,d)}function o(a,b,c){a.preventDefault(),p(c)}function p(a){w=new b(r,s),w.start(a),document.body.addEventListener("keydown",t,!0)}function q(){w&&(w.end(),w=null),document.body.removeEventListener("keydown",t,!0)}function r(a){var b=d.drag(a);return b&&q(),b}function s(a,b){q(),b?d.cancel(a):d.end(a)}function t(a){if(a.stopPropagation(),a.preventDefault(),"Esc"===a.key||27===a.keyCode){var b=w.getLastInputProps();q(),d.cancel(b)}}function u(a){if(!a.__isPseudo){a.stopPropagation();for(var b=a.target;b&&!b.draggable;)b=b.parentNode;if(b){y=b;var e=c.getMouseEventProps(a);"started"!==d.start(y,null,e).dragState&&(a.preventDefault(),y=null)}}}function v(a){a.__isPseudo||y&&(a.stopPropagation(),d.handleDndEvent(a),"dragend"===a.type&&(y=null))}a.required("controller",d);var w,x,y;this.install=f,this.remove=g}return d}),c("touchDragDriver",["./args"],function(a){"use strict";function b(b,c){function d(){c.addEventListener("touchstart",f,{passive:!0,capture:!0}),c.addEventListener("touchmove",g,{passive:!1,capture:!0})}function e(){c.removeEventListener("touchstart",f,{passive:!0,capture:!0}),c.removeEventListener("touchmove",g,{passive:!1,capture:!0})}function f(a){for(var b=a.target;b&&!b.draggable;)b=b.parentNode;b&&h(b)}function g(){}function h(a){a.addEventListener("touchstart",j,{passive:!0}),a.addEventListener("touchmove",k,{passive:!1}),a.addEventListener("touchend",l,{passive:!0}),a.addEventListener("touchcancel",m,{passive:!0})}function i(a){a.removeEventListener("touchstart",j,{passive:!0}),a.removeEventListener("touchmove",k,{passive:!1}),a.removeEventListener("touchend",l,{passive:!0}),a.removeEventListener("touchcancel",m,{passive:!0})}function j(a){p=a.currentTarget,q=!1}function k(a){if(a.preventDefault(),a.stopPropagation(),!q){if("started"!==b.start(p,null,o(a)).dragState)return void i(a.currentTarget);q=!0}b.drag(o(a))&&i(a.currentTarget)}function l(a){n(a,!1)}function m(a){n(a,!0)}function n(a,c){var d=a.currentTarget;c?b.cancel(o(a)):b.end(o(a)),p=null,q=!1,i(d)}function o(a){return{screenX:Math.round(a.changedTouches[0].screenX),screenY:Math.round(a.changedTouches[0].screenY),clientX:Math.round(a.changedTouches[0].clientX),clientY:Math.round(a.changedTouches[0].clientY),pageX:Math.round(a.changedTouches[0].pageX),pageY:Math.round(a.changedTouches[0].pageY),altKey:a.altKey,ctrlKey:a.ctrlKey,metaKey:a.metaKey,shiftKey:a.shiftKey}}a.required("controller",b);var p=null,q=!1;this.install=d,this.remove=e}return b}),c("bootstrap",["./dragController","./desktopDragDriver","./touchDragDriver"],function(a,b,c){"use strict";function d(){if(!g()){e(new a,-1!==navigator.userAgent.toLowerCase().indexOf("edge")?[b]:[b,c])}}function e(a,b){for(var c=document.documentElement,d=0;d<b.length;d++){var e=b[d],f=new e(a,c);f.install(),h.push(f)}}function f(){h.forEach(function(a){a.remove()}),h=[]}function g(){return h.length>0}var h=[];return{init:d,destroy:f}}),d(["bootstrap"],function(a){a.init()})}();
define("ojdnd", function(){});

define('ojs/ojselector',["exports","ojs/ojtranslation","ojs/ojvcomponent"],function(e,t,l){"use strict";
/**
     * @license
     * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
     * The Universal Permissive License (UPL), Version 1.0
     * as shown at https://oss.oracle.com/licenses/upl/
     * @ignore
     */var o=function(e,t,l,o){var s,r=arguments.length,c=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,l):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,l,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(c=(r<3?s(c):r>3?s(t,l,c):s(t,l))||c);return r>3&&c&&Object.defineProperty(t,l,c),c};e.Selector=class extends l.VComponent{render(){const{rowKey:e}=this.props,o=this._isSelected(e),s={"oj-selector-wrapper":!0,"oj-selected":o,"oj-component-icon":!0},r=this.props["aria-labelledby"]||null,c=this.props["aria-label"]||t.getTranslatedString("oj-ojSelector.checkboxAriaLabel",{rowKey:e});return l.h("oj-selector",{class:"oj-selector"},l.h("span",{class:s},l.h("input",{type:"checkbox",class:"oj-selectorbox oj-clickthrough-disabled","aria-label":c,"aria-labelledby":r,checked:o,onClick:this._checkboxListener})))}_checkboxListener(e){const{selectedKeys:t,rowKey:l,selectionMode:o}=this.props;let s;s=e.target.checked?"single"===o?t.clear().add([l]):"all"===o?t.addAll():t.add([l]):"all"===o?t.clear():t.delete([l]),this._updateProperty("selectedKeys",s,!0),e.stopPropagation()}_isSelected(e){const{selectedKeys:t,selectionMode:l}=this.props;return!!t&&("all"===l?t.isAddAll():t.has(e))}},e.Selector.metadata={extension:{_DEFAULTS:class{constructor(){this.rowKey=null,this.selectedKeys=null,this.selectionMode="multiple"}},_ROOT_PROPS_MAP:{"aria-label":!0,"aria-labelledby":!0}},properties:{rowKey:{type:"any",value:null},selectedKeys:{type:"object|null",value:null,writeback:!0,readOnly:!1},selectionMode:{type:"string",enumValues:["all","multiple","single"],value:"multiple"}}},o([l.listener()],e.Selector.prototype,"_checkboxListener",null),e.Selector=o([l.customElement("oj-selector")],e.Selector),Object.defineProperty(e,"__esModule",{value:!0})});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojtreeview',["require","ojs/ojcore","jquery","ojs/ojcontext","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojanimation","ojs/ojlogger","ojs/ojconfig","ojs/ojkeyset","ojdnd","ojs/ojdatacollection-common","ojs/ojselector"],function(e,t,i,n,s,o,r,a,l,d,h,u){"use strict";var c={properties:{currentItem:{type:"any",writeback:!0,readOnly:!0},data:{type:"object"},dnd:{type:"object",properties:{drag:{type:"object",properties:{items:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragStart:{type:"function"},drag:{type:"function"},dragEnd:{type:"function"}}}}},drop:{type:"object",properties:{items:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragOver:{type:"function"},dragLeave:{type:"function"},drop:{type:"function"}}}}}}},expanded:{type:"KeySet",writeback:!0},item:{type:"object",properties:{focusable:{type:"function"},renderer:{type:"function"},selectable:{type:"function"}}},selected:{type:"KeySet",writeback:!0},selection:{type:"Array<any>",writeback:!0,value:[]},selectionMode:{type:"string",enumValues:["multiple","none","single"],value:"none"},translations:{type:"object",value:{}}},methods:{getContextByNode:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateEnd:{},ojAnimateStart:{},ojBeforeCollapse:{},ojBeforeCurrentItem:{},ojBeforeExpand:{},ojCollapse:{},ojExpand:{}},extension:{}};t.__registerWidget("oj.ojTreeView",i.oj.baseComponent,{version:"1.0.0",defaultElement:"<div>",widgetEventPrefix:"oj",options:{currentItem:null,data:null,dnd:{drag:null,drop:null},expanded:new d.KeySetImpl,item:{focusable:null,renderer:null,selectable:null},selected:new d.KeySetImpl,selection:[],selectionMode:"none",animateEnd:null,animateStart:null,beforeCollapse:null,beforeCurrentItem:null,beforeExpand:null,collapse:null,expand:null},classNames:{depth0:"oj-treeview-depth-0",depth1:"oj-treeview-depth-1",depth2:"oj-treeview-depth-2",depth3:"oj-treeview-depth-3",depth4:"oj-treeview-depth-4",depth5:"oj-treeview-depth-5",depth6:"oj-treeview-depth-6",depth7:"oj-treeview-depth-7",depth8:"oj-treeview-depth-8",depth9:"oj-treeview-depth-9",depth10:"oj-treeview-depth-10",depth11:"oj-treeview-depth-11",depth12:"oj-treeview-depth-12",depth13:"oj-treeview-depth-13",depth14:"oj-treeview-depth-14",depth15:"oj-treeview-depth-15"},constants:{MAX_STYLE_DEPTH:15},_ComponentCreate:function(){this._super()},_AfterCreate:function(){this._super(),this._initRender(),this._render()},_CompareOptionValues:function(e,i,n){switch(e){case"selection":return i&&void 0===i.inverted&&(i.inverted=!1),n&&void 0===n.inverted&&(n.inverted=!1),(!i||!n||i.inverted===n.inverted)&&t.Object.compareValues(i,n);case"selected":return u.areKeySetsEqual(i,n);default:return this._super(e,i,n)}},_initRender:function(){var e=this;this._on(this.element,{click:function(t){e._handleClick(t)},mouseover:function(t){e._handleMouseOver(t)},mouseout:function(t){e._handleMouseOut(t)},mousedown:function(t){e._handleMouseDown(t)},mouseup:function(t){e._handleMouseUp(t)},keydown:function(t){e._handleKeyDown(t)},dragstart:function(t){e._handleDragStart(t)},drag:function(t){e._handleDragSourceEvent(t,"drag")},dragend:function(t){e._handleDragSourceEvent(t,"dragEnd")},dragenter:function(t){e._handleDropTargetEvent(t,"dragEnter")},dragover:function(t){e._handleDropTargetEvent(t,"dragOver")},dragleave:function(t){e._handleDropTargetEvent(t,"dragLeave")},drop:function(t){e._handleDropTargetEvent(t,"drop")}}),t.DomUtils.isTouchSupported()&&(this.element[0].addEventListener("touchstart",function(t){e.touchStartEvent=t},{passive:!0}),this.element[0].addEventListener("touchmove",function(){!0===e.ojTreeViewDragEvent?document.body.style.touchAction="none":document.body.style.touchAction="auto"},{passive:!1}),this.element[0].addEventListener("touchcancel",function(){e.touchStartEvent=null,e.ojTreeViewDragEvent=!1}),this.element[0].addEventListener("touchend",function(t){e.touchStartEvent&&t.changedTouches.length&&document.elementFromPoint(t.changedTouches[0].clientX,t.changedTouches[0].clientY)!==e.touchStartEvent.target&&(e.touchStartEvent=null),e.ojTreeViewDragEvent=!1,e._handleMouseOut(t)})),this._dropLine=document.createElement("div"),this._dropLine.classList.add("oj-treeview-drop-line"),this.element[0].appendChild(this._dropLine),this._dropLineRect=this._dropLine.getBoundingClientRect(),this._dropLine.style.display="none",this._refreshId=0,this._uiExpanded=new d.KeySetImpl,this._expandedChildrenMap=new Map,this._syncSelectionState()},_syncSelectionState:function(){var e=d.KeySetUtils.toArray(this.options.selected),t=d.KeySetUtils.toKeySet(this.options.selection);e.length>0||e.inverted?this._userOptionChange("selection",e,null):(this.options.selection.length>0||this.options.selection.inverted)&&this._userOptionChange("selected",t,null)},_render:function(){var e=this;this.element[0].classList.remove("oj-complete"),this._keyList=new Set;var t,i=this.element[0].getElementsByTagName("ul");if(this.options.data){for(t=0;t<i.length;t++)i[t].parentNode.removeChild(i[t]);this._fetchChildren(null,function(t){var i={fetchListResult:t.values[0].value,parentElem:e.element[0]};e._renderItems(i).then(function(){e._resetFocus(),e.element[0].classList.add("oj-complete"),e._decorateTree(),e._lastSelectedItem=null})})}else{for(t=0;t<i.length;t++)i[t].classList.add("oj-treeview-list"),i[t].setAttribute("role","group");var n=this.element[0].getElementsByTagName("li");for(t=0;t<n.length;t++){var s=this._getItemContent(n[t]);if(s){var o=s.getElementsByClassName("oj-treeview-spacer")[0];o&&s.removeChild(o)}e._decorateItem(n[t])}this._resetFocus(),this.element[0].classList.add("oj-complete"),this._decorateTree(),this._lastSelectedItem=null}},_getDataProvider:function(){var i;if(null==this.m_dataSource){if(i=this.options.data,!t.DataProviderFeatureChecker.isTreeDataProvider(i)){var n=t.__getRequirePromise("./ojtreedataprovideradapter",e);if(!n)throw new Error("Cannot adapt a TreeDataSource if require() is not available");return n.then(function(e){return new e(i)})}}else i=this.m_dataSource;return Promise.resolve(i)},_fetchChildren:function(e,t){var i=this,n=i._addBusyState("getting data provider"),s=i._getDataProvider(),o=this._refreshId;s.then(function(s){if(n(),i._refreshId===o){i.m_dataSource=s;var r=null===e?s:s.getChildDataProvider(e);if(null!=r){var l=i._addBusyState("fetching data"),d=i._getShowStatusDelay();i._isSkeletonSupported()&&(i._skeletonTimeout=setTimeout(function(){var t=i._expandedChildrenMap.get(null);if(null===e)i._renderInitialSkeletons();else if(!t&&!i._isParentSkeletonRendered(e)){var n=i._getItemByKey(e);i._getSubtree(n)||i._renderChildSkeletons(e)}},d));var h=i._loadTemplateEngine();i._clientId=i._clientId||Symbol();var u={clientId:i._clientId,size:-1},c=r.fetchFirst(u)[Symbol.asyncIterator](),_=c.next(),p=function(t){if(t[0].done){if(i._clearSkeletonTimeout(),i._isSkeletonSupported()){for(var n=[],s=t[0].value.data,r=0;r<s.length;r++){var d=t[0].value.metadata[r].key;i._isInitExpanded(d)&&i.m_dataSource.getChildDataProvider(d)&&n.push(d)}i._expandedChildrenMap.set(e,n);var h=i._expandedChildrenMap.get(e);if(h){var u=h.indexOf(e);u>-1&&h.splice(u,1)}if(!h||0===h.length)return{values:t,shouldRemoveSkeleton:!0}}return{values:t,shouldRemoveSkeleton:!1}}return c.next().then(function(e){return i._refreshId!==o?null:(t[0].done=e.done,t[0].value.data=t[0].value.data.concat(e.value.data),t[0].value.metadata=t[0].value.metadata.concat(e.value.metadata),p(t))},function(e){a.error("Error fetching data: "+e),l()})};Promise.all([_,h]).then(function(e){return i._refreshId!==o?null:p(e)},function(e){a.error("Error fetching data: "+e),l()}).then(function(e){i._refreshId===o?(t(e),l()):l()})}}},function(e){a.error("Error fetching data: "+e),n(),i._expandedChildrenMap=new Map})},_clearSkeletonTimeout:function(){this._skeletonTimeout&&(clearTimeout(this._skeletonTimeout),this._skeletonTimeout=null)},_isParentSkeletonRendered:function(e){for(var t=this._getItemByKey(e),i=this._getParents(t,".oj-treeview-item"),n=0;n<i.length;n++){var s=this._getKey(i[n]);if(this._expandedChildrenMap.get(s))return!0}return!1},_getShowStatusDelay:function(){var e=this._getOptionDefaults(),t=parseInt(e.showIndicatorDelay,10);return isNaN(t)?0:t},_renderItems:function(e){return new Promise(function(t){var i=document.createElement("ul");i.classList.add("oj-treeview-list"),i.setAttribute("role","group");var n=this._getSkeletonContainer(this.element[0]);n&&this._isSkeletonSupported()&&(i.style.display="none"),e.parentElem.appendChild(i);for(var s=0;s<e.fetchListResult.data.length;s++)this._renderItem(i,e.fetchListResult,s);n&&this._isSkeletonSupported()?this._toggleParentDisplay(e.parentElem,t):t()}.bind(this))},_toggleParentDisplay:function(e,t){var i=this._getKey(e);e===this.element[0]&&(i=null);var n=this._expandedChildrenMap.get(i);if(n&&n.length>0)t();else{let e=null;for(e of this._expandedChildrenMap.keys()){var s,o,r=this._expandedChildrenMap.get(e);null===e?(s=this.element[0],o=this._getRoot()):(s=this._getItemByKey(e),o=this._getSubtree(s),this._setItemExpanded(s)),o&&0===r.length&&this._resolveNoChildren(e,s,o,t);for(var a=r.length-1;a>=0;a--)r[a]===i&&o&&(r.splice(a,1),0===r.length&&this._resolveNoChildren(e,s,o,t))}t()}},_resolveNoChildren:function(e,t,i,n){this._expandedChildrenMap.delete(e),this._getSkeletonContainer(t)?this._foundSkeleton(e,i,n):(i&&(i.style.display="block"),this._toggleParentDisplay(t,n))},_foundSkeleton:function(e,t,i){this._removeSkeleton(e).then(function(){t&&(t.style.display="block");var e=this._getOptionDefaults();r.fadeIn(t,{duration:e.dataFadeInDuration}),i()}.bind(this))},_renderItem:function(e,t,n,s,r){var a,l,d=t.data[n],h=t.metadata[n],u=h.key;if(!r){if(this._keyList.has(u))throw new Error("JET TreeView nodes should not have duplicated keys: "+u);this._keyList.add(u)}var c=document.createElement("li");if(c.setAttribute("id",u),r){var _=this._getItemByKey(u);if(!_)return;e=_.parentNode;var p=this._getSubtree(_);_.parentNode.replaceChild(c,_)}else null==s||s>=e.children.length?e.appendChild(c):e.insertBefore(c,e.children[s]);var m={};m.parentElement=i(c),m.index=n,m.data=d,m.datasource=this.options.data,m.parentKey=this._getKey(this._getParentItem(c)),m.metadata=h,m.component=o.__GetWidgetConstructor(this.element),this._FixRendererContext&&(m=this._FixRendererContext(m));var f=this.m_dataSource.getChildDataProvider(u);h.leaf=null===f,h.depth=this._getDepth(c);var v=Object.keys(h);for(a=0;a<v.length;a++){var g=v[a];m[g]=h[g]}var y=this.options.item.renderer;y=this._WrapCustomElementRenderer(y);var C=this._getItemTemplate(),E=this._getTemplateEngine();if(null!=y){var S=y.call(this,m);null!=S&&(null===S.parentNode||S.parentNode instanceof DocumentFragment?c.appendChild(S):null!=S.parentNode||S.toString&&((l=document.createElement("span")).appendChild(document.createTextNode(S.toString())),c.appendChild(l)))}else if(null!=C&&null!=E){var I=this.element[0],j=E.execute(I,C,m,null);for(a=0;a<j.length;a++){if("LI"===j[a].tagName){c.parentNode.replaceChild(j[a],c);break}c.appendChild(j[a])}}else(l=document.createElement("span")).appendChild(document.createTextNode(null==d?"":d.toString())),c.appendChild(l);r&&p&&c.appendChild(p),c=e.children[null!=s?s:n],m.parentElement=i(c),null==c.getAttribute("id")&&c.setAttribute("id",u),c["oj-item-data"]=d,c["oj-item-metadata"]=h,this._decorateItem(c)},_getDepth:function(e){for(var t=0,i=e;i&&i!==this.element[0];)i=i.parentElement.parentElement,t+=1;return t},_loadTemplateEngine:function(){var e=this;return null!=this._getItemTemplate()&&null==e.options.item.renderer?new Promise(function(t){l.__getTemplateEngine().then(function(i){e.m_engine=i,t(i)},function(e){throw new Error("Error loading template engine: "+e)})}):Promise.resolve(null)},_getTemplateEngine:function(){return this.m_engine},_getItemTemplate:function(){if(void 0===this.m_template){this.m_template=null;var e=this._getSlotMap().itemTemplate;e&&e.length>0&&"template"===e[0].tagName.toLowerCase()&&(this.m_template=e[0])}return this.m_template},_getSlotMap:function(){return t.BaseCustomElementBridge.getSlotMap(this.element[0])},_decorateTree:function(){var e=this,t=this._getRoot();if(t){this._focusable({element:i(t),applyHighlight:!0,setupHandlers:function(t,i){e._focusInHandler=t,e._focusOutHandler=i}}),t.setAttribute("tabIndex",0),i(t).on("focus",function(){e._focusInHandler(i(e._getItemContent(e._currentItem)))}).on("blur",function(){e._focusOutHandler(i(e._getItemContent(e._currentItem)))}),t.setAttribute("role","tree"),t.setAttribute("aria-labelledby",this.element[0].getAttribute("id"));var n=this.options.selectionMode;"none"!==n?t.setAttribute("aria-multiselectable","multiple"===n?"true":"false"):t.removeAttribute("aria-multiselectable")}},_isMultiSelectionEnabled:function(){return"multiple"===this.options.selectionMode},_isDefaultCheckBoxesEnabled:function(){return"selector"===this._getOptionDefaults().multipleSelectionAffordance&&this._isMultiSelectionEnabled()},_refreshSelectionItems:function(){for(var e=this._getItems(),t=0;t<e.length;t++)this._select(e[t])},_decorateItem:function(e){var t;e.classList.add("oj-treeview-item"),e.setAttribute("role","treeitem");var i=this._getKey(e),n=this._getItemContent(e);if(!n){if((n=document.createElement("div")).classList.add("oj-treeview-item-content"),this._isDefaultCheckBoxesEnabled()&&this._isActionable(e,"focus")&&this._isActionable(e,"select")){var s=document.createElement("span");s.classList.add("oj-treeview-selector");var o=document.createElement("oj-selector");o.selectedKeys=this.options.selected,o.setAttribute("data-oj-binding-provider","none"),o.setAttribute("selection-mode","multiple"),o.addEventListener("selectedKeysChanged",function(e){if(e.detail.value!==this.options.selected){var t=this._getItemByKey(e.target.rowKey);this._focus(t,e),this._userOptionChange("selected",e.detail.value,e),this._userOptionChange("selection",d.KeySetUtils.toArray(e.detail.value),e),this._refreshSelectionItems()}}.bind(this)),o.rowKey=i,s.appendChild(o),n.appendChild(s)}if(e.firstChild)do{n.appendChild(e.firstChild)}while(e.childNodes.length>0);e.appendChild(n);var r=n.getElementsByTagName("ul")[0];r&&e.appendChild(r);var a=n.getElementsByClassName("oj-treeview-item-icon");for(t=0;t<a.length;t++)a[t].classList.add("oj-treeview-icon")}this._select(e);var l=this._getDragOptions();n.setAttribute("draggable",Object.keys(l).length>0?"true":"false");var h=n.getElementsByClassName("oj-treeview-spacer");0===h.length&&(h=document.createElement("ins"),this._addTreeViewIconClass(h),this._addTreeviewSpacerClass(h),n.insertBefore(h,n.children[0])),this._addIndentation(e,h),this._isLeaf(e)?this._addTreeviewLeafClass(e):(this._isInitExpanded(i)?this._expand(e,!1):this._collapse(e,!1),this._addDisclosureClasses(h))},_addIndentation:function(e,t){var i=this._getDepth(e);i<this.constants.MAX_STYLE_DEPTH?this._appendSpacerClass(i,t):(this._appendSpacerClass(1,t),t.style.width=t.offsetWidth*i+"px")},_appendSpacerClass:function(e,t){t.classList.add(this.classNames["depth"+e])},_addTreeviewSpacerClass:function(e){e.classList.add("oj-treeview-spacer")},_addTreeViewIconClass:function(e){e.classList.add("oj-treeview-icon")},_addTreeviewLeafClass:function(e){e.classList.add("oj-treeview-leaf")},_removeTreeviewLeafClass:function(e){e.classList.remove("oj-treeview-leaf")},_addDisclosureClasses:function(e){e.classList.add("oj-treeview-disclosure-icon"),e.classList.add("oj-component-icon"),e.classList.add("oj-clickable-icon-nocontext"),e.classList.add("oj-default")},_removeDisclosureClasses:function(e){e.classList.remove("oj-treeview-disclosure-icon"),e.classList.remove("oj-component-icon"),e.classList.remove("oj-clickable-icon-nocontext"),e.classList.remove("oj-default")},_getItems:function(){return this.element[0].getElementsByClassName("oj-treeview-item")},_getKey:function(e){if(!e)return null;var t=e["oj-item-metadata"];return t?t.key:e.getAttribute("id")},_getItemByKey:function(e){for(var i,n=this.element[0].getElementsByTagName("li"),s=0;s<n.length;s++){var o=n[s]["oj-item-metadata"];if(o&&t.Object.compareValues(o.key,e)){i=n[s];break}}if(i)return i;if("string"==typeof e){var r=document.getElementById(e),a=this._getRoot();if(a&&r&&a&&a.contains(r))return r}},_getItemContent:function(e){if(!e)return null;for(var t=e.children,i=0;i<t.length;i++)if(e.children[i].classList&&e.children[i].classList.contains("oj-treeview-item-content"))return e.children[i];return null},_getChildItems:function(e){var t=[],i=e.getElementsByClassName("oj-treeview-list")[0];if(i)for(var n=i.children,s=0;s<n.length;s++)t.push(n[s]);return t},_getParentItem:function(e){var t=this._getParents(e,".oj-treeview-list")[0];return this._getParents(t,".oj-treeview-item")[0]},_getSubtree:function(e){return e.getElementsByClassName("oj-treeview-list")[0]},_getRoot:function(){return this.element[0].getElementsByClassName("oj-treeview-list")[0]},_isLeaf:function(e){if(!e)return null;var t=e["oj-item-metadata"];return!(t?!t.leaf:void 0!==this._getSubtree(e))},_isInitExpanded:function(e,t){var i=null!=t?t:this.options.expanded;return!(!i||!i.has)&&i.has(e)},_isExpanded:function(e){return e.classList.contains("oj-expanded")},_isDisclosing:function(e){return!(!e||!this.m_disclosing)&&this.m_disclosing.indexOf(e)>-1},_setDisclosing:function(e,t){if(null!=e)if(null==this.m_disclosing&&(this.m_disclosing=[]),t)this.m_disclosing.push(e);else for(var i=this.m_disclosing.indexOf(e);i>-1;)this.m_disclosing.splice(i,1),i=this.m_disclosing.indexOf(e)},_expand:function(e,t,i,n){var s=this;if(!(this._isExpanded(e)||this._isLeaf(e)||t&&this._isDisclosing(this._getKey(e)))){if(t&&!this._trigger("beforeExpand",i,this._getEventPayload(e))&&!1!==n)return;this._lastSelectedItem=null;var o=this._getSubtree(e),r=s._getKey(e);if(!o)return this._uiExpanded=this._uiExpanded.add([r]),void this._fetchChildren(r,function(n){if((!s._isExpanded(e)||s._isSkeletonSupported())&&(s._isInitExpanded(r)||s._isInitExpanded(r,s._uiExpanded))){var a=n.values[0],l=e.getElementsByClassName("oj-treeview-skeleton-container").length,d={fetchListResult:a.value,parentElem:e};s._isSkeletonSupported()&&l>0&&n.shouldRemoveSkeleton?s._renderItems(d).then(function(){var t=e.offsetHeight,n=3*t,r=t*a.value.data.length;o=s._getSubtree(e);var l={};l.startMaxHeight=n+"px",l.endMaxHeight=r+"px",r>n?s._animateSkeletonRemoval("expand",e,o,l,i):r<n?s._animateSkeletonRemoval("collapse",e,o,l,i):s._animateSkeletonRemoval("fadeIn",e,o,l,i)}):s._isSkeletonSupported()&&l>0?s._renderItems(d).then(function(){s._setExpandedState(s,e,i)}):s._renderItems(d).then(function(){s._expandAfterFetch(e,t,i)})}});s._expandAfterFetch(e,t,i)}},_setItemExpanded:function(e){e.classList.remove("oj-collapsed"),e.classList.add("oj-expanded"),e.setAttribute("aria-expanded","true")},_animateSkeletonRemoval:function(e,t,i,n,s){var o=this._getKey(t);this._removeSkeleton(o).then(function(){this._setItemExpanded(t);var o=this,a=this._getOptionDefaults();i.style.display="block",r.fadeIn(i,{duration:a.dataFadeInDuration}).then(function(){var r=this._addBusyState("animating skeleton removal");t.classList.add("oj-treeview-animated"),this._setDisclosing(this._getKey(t),!0),"expand"===e?this._startAnimation(i,"expand",n).then(this._resolveAnimationPromise(o,t,s,r)):"collapse"===e?this._startAnimation(i,"collapse",n).then(this._resolveAnimationPromise(o,t,s,r)):this._resolveAnimationPromise(o,t,s,r)()}.bind(this))}.bind(this))},_expandAfterFetch:function(e,t,i){this._setItemExpanded(e);var n=this._getSubtree(e);if(n&&(n.style.display="block"),t){var s=this._addBusyState("animating expand");e.classList.add("oj-treeview-animated"),this._setDisclosing(this._getKey(e),!0),this._startAnimation(n,"expand").then(this._resolveAnimationPromise(this,e,i,s))}},_setExpandedState:function(e,t,i){e._setDisclosing(e._getKey(t),!1),t.classList.remove("oj-treeview-animated"),e._trigger("expand",i,e._getEventPayload(t));var n=e.options.expanded.add([e._getKey(t)]);e._userOptionChange("expanded",n,i)},_resolveAnimationPromise:function(e,t,i,n){return function(){this._setExpandedState(e,t,i),n()}.bind(this)},_collapse:function(e,t,i,n){var s=this;if(!(e.classList.contains("oj-collapsed")||this._isLeaf(e)||t&&this._isDisclosing(this._getKey(e)))){if(e.contains(this._currentItem)){var o=e;this._isActionable(o,"focus")||(o=this._getPreviousActionableItem(e,"focus"))||(o=this._getNextActionableItem(e,"focus")),o?this._focus(o,i):(this.options.currentItem=null,this._resetFocus())}if(t){if(!this._trigger("beforeCollapse",i,this._getEventPayload(e))&&!1!==n)return;this._setDisclosing(this._getKey(e),!0)}e.classList.remove("oj-expanded"),e.classList.add("oj-collapsed"),e.setAttribute("aria-expanded","false"),this._lastSelectedItem=null;var r=this._getSubtree(e);if(t){var a=this._addBusyState("animating collapse");e.classList.add("oj-treeview-animated"),this._uiExpanded=this._uiExpanded.delete([this._getKey(e)]),this._startAnimation(r,"collapse").then(function(){s._setDisclosing(s._getKey(e),!1),r.style.display="none",e.classList.remove("oj-treeview-animated"),s._trigger("collapse",i,s._getEventPayload(e));var t=s.options.expanded.delete([s._getKey(e)]);s._userOptionChange("expanded",t,i),a()})}else r&&(r.style.display="none")}},_startAnimation:function(e,t,i){var n=(this._getOptionDefaults().animation||{})[t];return i&&("expand"!==n.effect&&"collapse"!==n.effect||Object.assign(n,i)),r.startAnimation(e,t,n,this)},_getEventPayload:function(e){return{key:this._getKey(e),item:e}},_isActionable:function(e,t){var i=this.options.item[t+"able"];return!1!==i&&("function"!=typeof i||i(this.getContextByNode(e)))},_isSelected:function(e){var t=this.options.selectionMode,i=this.options.selected;if("none"===t)return!1;var n=this._getKey(e);return i.has(n)},_handleSelectedOption:function(e,t){if("selected"===e){var i=d.KeySetUtils.toArray(t);this._userOptionChange("selection",i,null),this._isDefaultCheckBoxesEnabled()&&this._updateSelectors(t)}else if("selection"===e){var n=d.KeySetUtils.toKeySet(t);this._userOptionChange("selected",n,null)}this._refreshSelectionItems()},_select:function(e,i){var n=this.options.selectionMode;if("none"!==n&&this._isActionable(e,"focus")&&this._isActionable(e,"select")){var s=this._isSelected(e);if(i){var o=i.originalEvent.sourceCapabilities&&i.originalEvent.sourceCapabilities.firesTouchEvents,r=t.DomUtils.isTouchSupported()&&(o||null!=this.touchStartEvent&&this.touchStartEvent.target===i.target),a=t.DomUtils.isMetaKeyPressed(i),l="multiple"===n,h=40===i.keyCode||38===i.keyCode,u=this._getKey(e),c=new d.KeySetImpl;if(l&&i.shiftKey&&!h){a?c=this.options.selected:this._clearSelection();for(var _=this._lastSelectedItem,p=_&&_.offsetTop<e.offsetTop?this._getNextActionableItem.bind(this):this._getPreviousActionableItem.bind(this);_&&_!==e;){var m=this._getKey(_);c.has(m)||(c=c.add([m]),this._setSelected(_)),_=p(_,"select")}s=!0,c=c.add([u])}else l&&(a||r||h)?(s=!s,c=this.options.selected,c=s?c.add([u]):c.delete([u])):(this._clearSelection(),(r||32===i.keyCode)&&s?(s=!1,c=new d.KeySetImpl):(s=!0,c=new d.KeySetImpl([u])));this._userOptionChange("selected",c,i),this._userOptionChange("selection",d.KeySetUtils.toArray(c),i),this._lastSelectedItem=e}s?this._setSelected(e):this._setUnselected(e)}},_updateSelectors:function(e){for(var t=this._addBusyState("updating selectors"),i=this.element[0].getElementsByClassName("oj-treeview-selector"),n=0;n<i.length;n++)i[n].firstChild.selectedKeys=e;t()},_setSelected:function(e){this._getItemContent(e).classList.add("oj-selected"),e.setAttribute("aria-selected","true")},_setUnselected:function(e){this._getItemContent(e).classList.remove("oj-selected"),e.setAttribute("aria-selected","false")},_clearSelection:function(){for(var e=this._getItems(),t=0;t<e.length;t++)this._setUnselected(e[t])},_focus:function(e,t){if(this._isActionable(e,"focus")){if(t){var n=this._getEventPayload(e);if(this._currentItem&&(n.previousKey=this._getKey(this._currentItem),n.previousItem=this._currentItem),!this._trigger("beforeCurrentItem",t,n))return;this._userOptionChange("currentItem",this._getKey(e),t)}this._focusOutHandler(i(this._getItemContent(this._currentItem))),this._focusInHandler(i(this._getItemContent(e))),this._setCurrentItem(e)}},_resetFocus:function(){if(this.options.currentItem){var e=this._getItemByKey(this.options.currentItem);if(e)return void this._setCurrentItem(e)}var t=this._getItems()[0];this._isActionable(t,"focus")||(t=this._getNextActionableItem(t,"focus")),this._setCurrentItem(t),this._userOptionChange("currentItem",this._getKey(this._currentItem),null)},_setCurrentItem:function(e){this._currentItem=e;var t=this._getRoot();t&&t.setAttribute("aria-activedescendant",this._getKey(e))},_addBusyState:function(e){var t=n.getContext(this.element[0]).getBusyContext(),i=this.element.attr("id");return t.addBusyState({description:"The component identified by '"+i+"', "+e})},_userOptionChange:function(e,t,i){this.option(e,t,{_context:{originalEvent:i,writeback:!0,internalSet:!0}}),"selected"===e&&this._isDefaultCheckBoxesEnabled()&&this._updateSelectors(t)},_getDragOptions:function(){return((this.options.dnd||{}).drag||{}).items||{}},_getDropOptions:function(){return((this.options.dnd||{}).drop||{}).items||{}},_getClosestItem:function(e){return this._closest(e,".oj-treeview-item")},_getClosestItemContent:function(e){return this._closest(e,".oj-treeview-item-content")},_getClosestDisclosureIcon:function(e){return this._closest(e,".oj-treeview-disclosure-icon")},_handleClick:function(e){var t,i=this._getClosestDisclosureIcon(e.target);if(i)return t=this._getClosestItem(i),this._isExpanded(t)?this._collapse(t,!0,e):this._expand(t,!0,e),void(this.touchStartEvent=null);var n=this._getClosestItemContent(e.target);if(n)return t=n.parentNode,this._select(t,e),this._focus(t,e),void(this.touchStartEvent=null);"none"!==this.options.selectionMode&&(this._clearSelection(),this._lastSelectedItem=null,this._userOptionChange("selected",new d.KeySetImpl,e),this._userOptionChange("selection",[],e)),this.touchStartEvent=null},_handleMouseOver:function(e){if(!t.DomUtils.isTouchSupported()||!this.touchStartEvent){var i=this._getClosestDisclosureIcon(e.target);i||(i=this._getClosestItemContent(e.target)),i&&(i.classList.remove("oj-default"),i.classList.add("oj-hover"))}},_handleMouseOut:function(e){var t=this._getClosestDisclosureIcon(e.target);t&&t.classList.remove("oj-selected"),t||(t=this._getClosestItemContent(e.target)),t&&(t.classList.add("oj-default"),t.classList.remove("oj-hover"))},_handleMouseDown:function(e){var t=this._getClosestDisclosureIcon(e.target);t&&t.classList.add("oj-selected")},_handleMouseUp:function(e){var t=this._getClosestDisclosureIcon(e.target);t&&t.classList.remove("oj-selected")},_handleKeyDown:function(e){var i,n=e.keyCode,s=this._currentItem,o=this.options.selectionMode;if(38===n||40===n)(i=40===n?this._getNextActionableItem(s,"focus"):this._getPreviousActionableItem(s,"focus"))&&(e.preventDefault(),this._isSelected(s)&&e.shiftKey&&this._select(this._isSelected(i)?s:i,e),this._scrollToVisible(i,n),this._focus(i,e));else if(37===n||39===n){var r="rtl"===this._GetReadingDirection(),a=!r&&39===n||r&&37===n;!a||this._isLeaf(s)||this._isExpanded(s)?a||this._isLeaf(s)||!this._isExpanded(s)?(i=a?this._getNextActionableItem(s,"focus"):this._getPreviousActionableItem(s,"focus"))&&(e.preventDefault(),this._focus(i,e)):(e.preventDefault(),this._collapse(s,!0,e)):(e.preventDefault(),this._expand(s,!0,e))}else if(13===n||32===n)e.preventDefault(),this._select(s,e);else if(65===n&&t.DomUtils.isMetaKeyPressed(e)&&"multiple"===o){e.preventDefault();for(var l=this._getItems(),h=new d.AllKeySetImpl,u=0;u<l.length;u++)this._isActionable(l[u],"select")&&this._setSelected(l[u]);this._userOptionChange("selected",h,e),this._userOptionChange("selection",d.KeySetUtils.toArray(h),e)}},_scrollToVisible:function(e,t){var i,n=e.getElementsByClassName("oj-treeview-spacer")[0].offsetHeight,s=this.element[0],o=s.scrollTop,r=n,a=o,l=o+this.element[0].offsetHeight;i=e.offsetTop-this.element[0].offsetTop,38!==t&&(i+=r),i>=a&&i<=l||(i<a?s.scrollTop=o+(i-a-1):i>l&&(s.scrollTop=o+(i-l+1)))},_getNextItem:function(e){if(!this._isLeaf(e)&&this._isExpanded(e)){var t=this._getChildItems(e)[0];if(t)return t}for(var i=e;i;){var n=this._getNextSibling(i,".oj-treeview-item");if(n)return n;i=this._getParentItem(i)}return null},_getNextActionableItem:function(e,t){for(;null!=e;)if(null!=(e=this._getNextItem(e))&&this._isActionable(e,t))return e;return null},_getPreviousItem:function(e){for(var t=this._getPreviousSibling(e,".oj-treeview-item");t;){if(this._isLeaf(t)||!this._isExpanded(t))return t;var i=this._getChildItems(t),n=i[i.length-1];if(!n)return t;t=n}var s=this._getParentItem(e);return s||null},_getPreviousActionableItem:function(e,t){for(;null!=e;)if(null!=(e=this._getPreviousItem(e))&&this._isActionable(e,t))return e;return null},_handleDragStart:function(e){t.DomUtils.isTouchSupported()&&(this.ojTreeViewDragEvent=!0);var i=this,n="rtl"===this._GetReadingDirection(),s=this._getClosestItem(e.target);if(s){var o,r=[];if(this._isSelected(s)){var a=this.options.selection;for(o=0;o<a.length;o++){var l=this._getItemByKey(a[o]);l&&r.push(l)}}else this._select(s,e),r.push(s);var d=this._getDragOptions(),h=e.originalEvent.dataTransfer,u=document.createElement("ul");u.classList.add("oj-treeview-drag-image"),u.classList.add("oj-treeview-list"),t.AgentUtils.getAgentInfo().browser===t.AgentUtils.BROWSER.SAFARI&&(u.style.position="absolute");var c,_=[],p=1/0,m=1/0;for(r.forEach(function(e){_.push(e["oj-item-data"]);var t=e.getBoundingClientRect(),s=t.top,o=t.left;if(n){for(var r=i._getItemContent(e).children,a=0,l=0;l<r.length;l++)a+=r[l].offsetWidth;a+=t.left,o=t.width-a-t.left}s+=document.body.scrollTop,o+=document.body.scrollLeft;var d=e.cloneNode(!0);d.style.top=s+"px",d.style.left=o+"px";var h=i._getSubtree(d);if(h&&d.removeChild(h),i._isDefaultCheckBoxesEnabled()&&i._isActionable(e,"focus")&&i._isActionable(e,"select")){var c=d.getElementsByClassName("oj-treeview-selector")[0];c.firstChild.selectedKeys=i.options.selected,c.firstChild.rowKey=e.id}s<p&&(p=s),o<m&&(m=o),u.appendChild(d)}),o=0;o<u.children.length;o++)(c=u.children[o]).style.top=parseFloat(c.style.top)-p+"px",c.style.left=parseFloat(c.style.left)-m+"px";var f=d.dataTypes,v="string"==typeof f?[f]:f||[];for(o=0;o<v.length;o++)h.setData(v[o],JSON.stringify(_));document.body.appendChild(u),h.setDragImage(u,e.pageX-m,e.pageY-p),setTimeout(function(){u.parentElement.removeChild(u)},0);var g=d.dragStart;g&&g(e.originalEvent,{items:_})}},_handleDragSourceEvent:function(e,t){var i=this._getDragOptions()[t];i&&i(e.originalEvent)},_getTreeviewWidth:function(){return this.element[0].offsetWidth},_handleDropTargetEvent:function(e,i){var n=this._getDropOptions(),s=n.dataTypes,o="string"==typeof s?[s]:s||[],r=n[i],a=this._getClosestItem(e.target);if(a){var l=a.getElementsByClassName("oj-treeview-spacer")[0],d=l.getBoundingClientRect(),h=l.offsetTop,u=l.offsetLeft,c=h+d.height/2,_=this._getTreeviewWidth(),p="inside",m=e.originalEvent.clientY-d.top;m<.25*d.height?p="before":m>.75*d.height&&(p=this._isExpanded(a)?"first":"after"),r&&r(e.originalEvent,{item:a,position:p});for(var f=0;f<o.length;f++){var v=e.originalEvent.dataTransfer.types;if(v&&v.indexOf(o[f])>=0){e.preventDefault();break}}if("dragEnter"!==i&&"dragOver"!==i||!e.originalEvent.defaultPrevented)"dragEnd"===i&&t.DomUtils.isTouchSupported()&&(this.ojTreeViewDragEvent=!1,document.body.style.touchAction="auto"),this._dropLine.style.display="none",this._removeDropClass(a);else{var g="rtl"===this._GetReadingDirection(),y=c,C=g?u-_+d.width:u+d.width;"before"===p?y-=d.height/2:"after"!==p&&"first"!==p||(y+=d.height/2),"inside"!==p?(this._removeDropClass(a),"first"===p&&(C+=(g?-1:1)*d.width),this._dropLine.style.width=_-C+"px",this._dropLine.style.left=C+"px",this._dropLine.style.top=y+"px",this._dropLine.style.display=""):(this._dropLine.style.display="none",this._addDropClass(a))}}},_addDropClass:function(e){this._getItemContent(e).classList.add("oj-treeview-drop-zone")},_removeDropClass:function(e){this._getItemContent(e).classList.remove("oj-treeview-drop-zone")},_NotifyContextMenuGesture:function(e,t,i){if("keyboard"===i){var n=this._currentItem?this._getItemContent(this._currentItem):this.element,s={launcher:this._getRoot(),initialFocus:"menu",position:{my:"start top",at:"start bottom",of:n}};this._OpenContextMenu(t,i,s)}else this.ojTreeViewDragEvent||this._superApply(arguments)},refresh:function(){this._super(),this._refreshId+=1,delete this.m_template,delete this.m_engine,delete this.m_dataSource,this._expandedChildrenMap=new Map,this._render()},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t,i=e.key,n=e.subId,s=this._getItemByKey(i);return"oj-treeview-disclosure"===n&&s?t=s.getElementsByClassName("oj-treeview-disclosure-icon")[0]:"oj-treeview-item"===n&&s&&(t=s.getElementsByClassName("oj-treeview-item-content")[0]),t||null},getSubIdByNode:function(e){if(!this.element[0].contains(e))return null;var t,i=this._getClosestDisclosureIcon(e),n=this._getClosestItem(e);if(i)t="oj-treeview-disclosure";else{if(!n)return null;t="oj-treeview-item"}return{subId:t,key:this._getKey(n)}},getContextByNode:function(e){if(!this.element[0].contains(e))return null;var t,i=this._getClosestItem(e);if(!i)return null;var n=i.parentNode.children,s=[];for(t=0;t<n.length;t++)n[t].classList.contains("oj-treeview-item")&&s.push(n[t]);var r={subId:"oj-treeview-item"};r.index=s.indexOf(i),r.parentKey=this._getKey(this._getParentItem(i)),r.component=o.__GetWidgetConstructor(this.element),this._FixRendererContext&&(r=this._FixRendererContext(r));var a=i["oj-item-metadata"];if(a){r.metadata=a,r.data=i["oj-item-data"],r.datasource=this.options.data;var l=Object.keys(a);for(t=0;t<l.length;t++){var d=l[t];r[d]=a[d]}}else r.key=this._getKey(i),r.leaf=this._isLeaf(i),r.depth=this._getParents(i,".oj-treeview-list").length;return r},_setOption:function(e,t,i){var n,s;if(this._superApply(arguments),"expanded"===e)for(this._uiExpanded=this._uiExpanded.clear(),this._expandedChildrenMap=new Map,s=this._getItems(),n=0;n<s.length;n++){var o=this._getKey(s[n]);this._isInitExpanded(o)?this._expand(s[n],!0):this._collapse(s[n],!0)}else"selection"===e||"selected"===e?this._handleSelectedOption(e,t):"currentItem"===e?this._resetFocus():"data"===e?(this._removeDataProviderEventListeners(),this.options.data=t,this._addDataProviderEventListeners(),this.refresh()):this.refresh()},_SetupResources:function(){this._super(),this._addDataProviderEventListeners()},_ReleaseResources:function(){this._super(),this._removeDataProviderEventListeners()},_destroy:function(){this._removeDataProviderEventListeners(),this._super()},_addDataProviderEventListeners:function(){var e=this.options.data;e&&t.DataProviderFeatureChecker.isTreeDataProvider(e)&&(this.m_handleModelMutateEventListener=this.handleModelMutateEvent.bind(this),this.m_handleModelRefreshEventListener=this.handleModelRefreshEvent.bind(this),e.addEventListener("mutate",this.m_handleModelMutateEventListener),e.addEventListener("refresh",this.m_handleModelRefreshEventListener))},_removeDataProviderEventListeners:function(){var e=this.options.data;e&&t.DataProviderFeatureChecker.isTreeDataProvider(e)&&(e.removeEventListener("mutate",this.m_handleModelMutateEventListener),e.removeEventListener("refresh",this.m_handleModelRefreshEventListener))},handleModelMutateEvent:function(e){null!=e.detail.remove&&this.handleModelRemoveEvent(e),null!=e.detail.add&&this.handleModelAddEvent(e),null!=e.detail.update&&this.handleModelChangeEvent(e)},handleModelRemoveEvent:function(e){var t=this,i=e.detail.remove.keys,n=[];if(null!=i&&0!==i.size&&(i.forEach(function(i){(!e.detail.add||e.detail.add&&!e.options.detail.add.keys.has(i))&&(n=n.concat(t._removeAllChildrenOfParentKey(i)))}),0!==n.length)){var s=this.options.selected;if(null!=s){var o=s.delete(n);s!==o&&(this._userOptionChange("selected",o,e),this._userOptionChange("selection",d.KeySetUtils.toArray(o),e))}var r=this.options.expanded;if(null!=r){var a=r.delete(n);this._uiExpanded.delete(n),r!==a&&this._userOptionChange("expanded",a,null)}this._resetFocus()}},_changeNodeToLeaf:function(e,t){if(e!==this.element[0]){e.removeChild(t),e["oj-item-metadata"].leaf=!0,e.classList.add("oj-treeview-leaf"),e.classList.remove("oj-expanded"),e.removeAttribute("aria-expanded"),e.classList.remove("oj-collapsed");var i=this._getKey(e),n=[];n.push(i);var s=this.options.expanded;if(null!=s){var o=s.delete(n);this._uiExpanded.delete(n),s!==o&&this._userOptionChange("expanded",o,null)}var r=e.getElementsByClassName("oj-treeview-spacer")[0];this._removeDisclosureClasses(r)}},_changeNodeToParent:function(e){e["oj-item-metadata"].leaf=!1,e.classList.remove("oj-treeview-leaf"),e.classList.add("oj-collapsed"),e.setAttribute("aria-expanded",!1);var t=e.getElementsByClassName("oj-treeview-spacer")[0];this._addDisclosureClasses(t)},_removeAllChildrenOfParentKey:function(e){var t=this,i=[],n=this._getItemByKey(e);if(n){this._getChildItems(n).forEach(function(e){var n=t._getKey(e),s=t._removeAllChildrenOfParentKey(n);i=i.concat(s)});var s=n.parentNode;s.removeChild(n),this._keyList.delete(e),i.push(e),0===s.getElementsByTagName("li").length&&t._changeNodeToLeaf(s.parentNode,s)}return i},_isLeafIcon:function(e){return e.classList.contains("oj-treeview-leaf")},handleModelReorder:function(e,t,i){var n=this._getItemByKey(t),s=n.parentElement,o=this._getItemByKey(e),r=o.parentElement,a=o.parentNode;r.removeChild(o),0===r.getElementsByTagName("li").length&&this._changeNodeToLeaf(a.parentNode,a),i?s.insertBefore(o,n.nextSibling):s.insertBefore(o,n)},getLastItemKey(e){return this._getKey(e[e.length-1])},handleModelAddEvent:function(e){var t,i=e.detail.add,n=i.data,s=i.metadata,o=[],r=i.parentKeys,a=i.indexes,l=0,d=this;e.detail.add.keys.forEach(function(t){if(!e.detail.remove||e.detail.remove&&!e.options.detail.remove.keys.has(t))o.push(t);else if(i.addBeforeKeys&&i.addBeforeKeys[l]&&0!==i.addBeforeKeys.length)this.handleModelReorder(t,i.addBeforeKeys[l],!1);else{var n;if(i.parentKeys&&i.parentKeys[l]&&0!==i.parentKeys.length){var s=this._getItemByKey(i.parentKeys[l]),r=this._getChildItems(s);n=this.getLastItemKey(r)}else{var a=this._getItems();n=this.getLastItemKey(a)}n&&this.handleModelReorder(t,n,!0)}l+=1}.bind(this)),r.forEach(function(e){var t=d._getItemByKey(e);t&&d._isLeafIcon(t)&&d._changeNodeToParent(t)});var h=i.addBeforeKeys?i.addBeforeKeys:i.afterKeys;if(h&&(t=[],h.forEach(function(e){t.push(e)})),null!=n&&null!=o&&o.length>0&&n.length>0&&o.length===n.length&&(null==a||a.length===n.length))for(l=0;l<n.length;l++){var u,c=null==a?this._getIndex(t,l)+1:a[l],_=r[l],p=this._getItemByKey(_);null==_?(u=this._getRoot())&&this._renderItem(u,{data:[n[l]],metadata:[s[l]]},0,c):p&&(!(u=this._getSubtree(p))&&p&&d._isInitExpanded(_)&&((u=document.createElement("ul")).classList.add("oj-treeview-list"),u.setAttribute("role","group"),p.appendChild(u)),u&&this._renderItem(u,{data:[n[l]],metadata:[s[l]]},0,c))}},handleModelChangeEvent:function(e){var t=e.detail.update,i=t.data,n=t.metadata,s=[];t.keys.forEach(function(e){s.push(e)});for(var o=0;o<i.length;o++){var r=this._getItemByKey(s[o]);if(null!=r){var a=this._indexToParent(r);this._renderItem(null,{data:[i[o]],metadata:[n[o]]},0,a,!0)}}this._resetFocus()},_indexToParent:function(e){for(var t=0,i=0;i<e.parentNode.children.length;i++)if(e.parentNode.children[i]===e){t=i;break}return t},handleModelRefreshEvent:function(){this.refresh()},_isSkeletonSupported:function(){return"skeleton"===this._getOptionDefaults().loadIndicator},_getOptionDefaults:function(){return null==this.defaultOptions&&(this.defaultOptions=s.parseJSONFromFontFamily(this._getOptionDefaultsStyleClass())),this.defaultOptions},_getOptionDefaultsStyleClass:function(){return"oj-treeview-option-defaults"},_renderChildSkeletons:function(e){var t=this._getItemByKey(e);this._removeExistingSkeletons(t);var i=t.getElementsByTagName("ins")[0].offsetWidth,n="rtl"===this._GetReadingDirection(),s=this._buildThreeItemedSkeleton(),o=this._buildSkeletonContainer(),r=i,a=this._getDepth(t);n?o.style.marginRight=r+i/a+"px":o.style.marginLeft=r+i/a+"px",o.appendChild(s),t.appendChild(o)},_renderInitialSkeletons:function(){this._removeExistingSkeletons(this.element[0]);var e=this._buildThreeItemedSkeleton(),t=this._buildTwoItemedSkeleton(),i=this._buildSkeletonContainer();i.appendChild(e),i.appendChild(t),this.element[0].classList.add("oj-complete"),this.element[0].appendChild(i);var n=i.offsetHeight,s=this.element[0].offsetHeight,o=n/5,r=0;if(n<s)do{r%2==0?(n+=3*o,i.appendChild(this._buildThreeItemedSkeleton())):(n+=2*o,i.appendChild(this._buildTwoItemedSkeleton())),r+=1}while(n<=s);if(n>s){var a=i.getElementsByClassName("oj-treeview-skeleton-content");for(r=a.length-1;r>=0&&(n-=o,i.removeChild(a[r]),!(n<=s));r--);}},_removeExistingSkeletons:function(e){for(var t=e.getElementsByClassName("oj-treeview-skeleton-container"),i=0;i<t.length;i++)e.removeChild(t[i])},_getSkeletonContainer:function(e){return e.getElementsByClassName("oj-treeview-skeleton-container")[0]},_removeSkeleton:function(e){return new Promise(function(t){var i,n=this._addBusyState("removing skeleton");if(i=null===e?this._getSkeletonContainer(this.element[0]):this._getSkeletonContainer(this._getItemByKey(e))){for(var s=i.getElementsByClassName("oj-animation-skeleton"),o=0;o<s.length;o++)s[o].classList.remove("oj-animation-skeleton");i.classList.add("oj-animation-skeleton-fade-out"),i.addEventListener("animationend",function(){i.parentElement&&i.parentElement.removeChild(i),n(),t()})}else n(),t()}.bind(this))},_buildThreeItemedSkeleton:function(){var e=this._buildTwoItemedSkeleton(),t=this._buildSkeletonLeafContent();return e.appendChild(t),e},_buildTwoItemedSkeleton:function(){var e=new DocumentFragment,t=this._buildSkeletonContent(!1);e.appendChild(t);var i=this._buildSkeletonContent(!0);return e.appendChild(i),e},_buildSkeletonContainer:function(){var e=document.createElement("div");return e.classList.add("oj-treeview-skeleton-container"),e.classList.add("oj-animation-skeleton-fade-in"),e},_buildSkeletonContent:function(e){var t=document.createElement("div");t.classList.add("oj-treeview-skeleton-content");var i=this._buildSkeletonCarrot();return e&&i.classList.add("oj-treeview-skeleton-child"),t.appendChild(i),t.appendChild(this._buildSkeletonItem()),t},_buildSkeletonCarrot:function(){var e=document.createElement("div");return e.classList.add("oj-treeview-skeleton-carrot"),e.classList.add("oj-animation-skeleton"),e},_buildSkeletonItem:function(){var e=document.createElement("div");return e.classList.add("oj-treeview-skeleton-item"),e.classList.add("oj-animation-skeleton"),e},_buildSkeletonLeafContent:function(){var e=document.createElement("div");return e.classList.add("oj-treeview-skeleton-content"),e.appendChild(this._buildSkeletonLeafItem()),e},_buildSkeletonLeafItem:function(){var e=document.createElement("div");return e.classList.add("oj-treeview-skeleton-leaf"),e.classList.add("oj-animation-skeleton"),e},_closest:function(e,t){if(!e)return null;if(!e.closest){do{if(this._matches(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}return e.closest(t)},_getParents:function(e,t){for(var i=[];e&&e!==document;e=e.parentNode)this._matches(e,t)&&i.push(e);return i},_getNextSibling:function(e,t){var i=e.nextElementSibling;if(!t)return i;for(;i;){if(this._matches(i,t))return i;i=i.nextElementSibling}return null},_getPreviousSibling:function(e,t){var i=e.previousElementSibling;if(!t)return i;for(;i;){if(this._matches(i,t))return i;i=i.previousElementSibling}return null},_matches:function(e,t){return e.matches||(e.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),e.matches(t)}}),c.extension._WIDGET_NAME="ojTreeView",t.CustomElementBridge.register("oj-tree-view",{metadata:c})});
var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};define('viewModels/x-data-source-list',["require","exports","ojs/ojarraytreedataprovider","../app/model","knockout","ojs/ojtreeview"],(function(require,e,t,r,a){"use strict";return a=__importStar(a),function(){function e(e){var n=this;this.selectedItem=a.observable();var o=a.observableArray();a.computed((function(){var t=e.model.dataSourceMap();o.remove((function(e){return!(e.id in t)}));var a=function(e){if(!o().find((function(t){return t.id===e}))){var a=t[e],n=[];for(var i in a.format.sections)if(Object.keys(a.data).includes(i)){var u=a.format.sections[i];u.hidden||n.push({id:e+"#"+i,label:u.title})}if(n.length>0){var l=new r.DataSource(e,a.name,a._formatName,a.data);l.label=a.name+" ("+a.format.shortName+")",l.children=n,o.push(l)}}};for(var n in t)a(n)}));this.data=new t(o,{keyAttributes:"id"}),this.selectedChanged=function(t){t.detail.value.values().forEach((function(t){var r=t.split("#");if(2===r.length){var a=e.model.dataSourceMap()[r[0]],n=r[1],o=a.componentFor(n),i=a.sectionFor(n);e.model.addTile(o,a,n,i)}})),n.selectedItem([])}}return e.prototype.leafOnly=function(e){return e.leaf},e}()}));
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojbinddom',["ojs/ojcore","knockout","ojs/ojlogger","ojs/ojcontext","ojs/ojkoshared"],function(n,e,o,t,r){"use strict";!function(){r.registerPreprocessor("oj-bind-dom",function(e){var o,t="ko _ojBindDom_:",r=function(e){if(null!=e){var o=n.__AttributeUtils.getExpressionInfo(e).expr;return null==o&&(o="'"+e+"'"),o}return null}(e.getAttribute("config"));r&&(t+=r);var i=document.createComment(t),d=document.createComment("/ko");o=[i];var s=e.parentNode;for(s.insertBefore(i,e);e.childNodes.length>0;){var a=e.childNodes[0];s.insertBefore(a,e),o.push(a)}return o.push(d),s.replaceChild(d,e),o})}(),e.bindingHandlers._ojBindDom_={init:function(r,i,d,s,a){var l,u,c;function m(i){u||(u=t.getContext(r.parentNode).getBusyContext().addBusyState({description:"oj-bind-dom is waiting on config Promise resolution"})),function(){if(!c){var e=function(e){var o=r.parentNode;for(;o&&!n.ElementUtils.isValidCustomElementName(o.localName);)o=o.parentNode;o||(o=e?e._nearestCustomParent:null);return o}(a.$current),o=function(n,e){var o=!1,t=e&&Object.prototype.hasOwnProperty.call(e,"_immediate");r.parentNode===n?o=!0:t&&!r.parentNode.parentNode&&(o=e._immediate);return o}(e,a.$current);c=n._KnockoutBindingProvider.getInstance().__RegisterBindingAppliedPromiseForChildren(e,o)}}(),i.then(function(n){if(i===l)try{e.virtualElements.setDomNodeChildren(r,n.view||[]);var t=a.createChildContext(n.data,void 0,function(n){n.$parent=null,n.$parentContext=null,n.$parents=null});e.applyBindingsToDescendants(t,r)}catch(n){o.error("An error %o occurred during view insertion and apply bindings for oj-bind-dom.",n)}finally{f(),p()}},function(n){f(),p(),o.error("An error %o occurred during view insertion and apply bindings for oj-bind-dom.",n)})}function p(){c&&(c(),c=null)}function f(){u&&(u(),u=null)}return e.computed(function(){m(l=Promise.resolve(e.utils.unwrapObservable(i())))},null,{disposeWhenNodeIsRemoved:r}),{controlsDescendantBindings:!0}}},e.virtualElements.allowedBindings._ojBindDom_=!0});
var __importStar=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(null!=r)for(var i in r)Object.hasOwnProperty.call(r,i)&&(t[i]=r[i]);return t.default=r,t};define('viewModels/x-help',["require","exports","marked","ojs/ojhtmlutils","ojs/ojbinddom"],(function(require,r,t,i){"use strict";return i=__importStar(i),function(r){this.config={view:i.stringToNodeArray(t(window.atob(DOC_PAGES[r.params.topic])))}}}));
!function(e){"function"==typeof define&&define.amd?define('jqueryui-amd/ie',["jquery","./version"],e):e(jQuery)}((function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())}));
/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(e){"function"==typeof define&&define.amd?define('jqueryui-amd/widgets/mouse',["jquery","../ie","../version","../widget"],e):e(jQuery)}((function(e){var t=!1;return e(document).on("mouseup",(function(){t=!1})),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).on("click."+this.widgetName,(function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,o=1===i.which,n=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&e(i.target).closest(this.options.cancel).length;return!(o&&!n&&this._mouseCapture(i))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){s.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=!1!==this._mouseStart(i),!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return s._mouseMove(e)},this._mouseUpDelegate=function(e){return s._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(i){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&e.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,i.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}));
/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(e){"function"==typeof define&&define.amd?define('jqueryui-amd/data',["jquery","./version"],e):e(jQuery)}((function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(n){return function(t){return!!e.data(t,n)}})):function(n,t,r){return!!e.data(n,r[3])}})}));
!function(n){"function"==typeof define&&define.amd?define('jqueryui-amd/plugin',["jquery","./version"],n):n(jQuery)}((function(n){return n.ui.plugin={add:function(e,i,o){var t,u=n.ui[e].prototype;for(t in o)u.plugins[t]=u.plugins[t]||[],u.plugins[t].push([i,o[t]])},call:function(n,e,i,o){var t,u=n.plugins[e];if(u&&(o||n.element[0].parentNode&&11!==n.element[0].parentNode.nodeType))for(t=0;t<u.length;t++)n.options[u[t][0]]&&u[t][1].apply(n.element,i)}}}));
!function(e){"function"==typeof define&&define.amd?define('jqueryui-amd/safe-active-element',["jquery","./version"],e):e(jQuery)}((function(e){return e.ui.safeActiveElement=function(e){var n;try{n=e.activeElement}catch(t){n=e.body}return n||(n=e.body),n.nodeName||(n=e.body),n}}));
!function(e){"function"==typeof define&&define.amd?define('jqueryui-amd/safe-blur',["jquery","./version"],e):e(jQuery)}((function(e){return e.ui.safeBlur=function(n){n&&"body"!==n.nodeName.toLowerCase()&&e(n).trigger("blur")}}));
/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(e){"function"==typeof define&&define.amd?define('jqueryui-amd/scroll-parent',["jquery","./version"],e):e(jQuery)}((function(e){return e.fn.scrollParent=function(t){var n=this.css("position"),o="absolute"===n,s=t?/(auto|scroll|hidden)/:/(auto|scroll)/,i=this.parents().filter((function(){var t=e(this);return(!o||"static"!==t.css("position"))&&s.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))})).eq(0);return"fixed"!==n&&i.length?i:e(this[0].ownerDocument||document)}}));
/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(t){"function"==typeof define&&define.amd?define('jqueryui-amd/widgets/draggable',["jquery","./mouse","../data","../plugin","../safe-active-element","../safe-blur","../scroll-parent","../version","../widget"],t):t(jQuery)}((function(t){return t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var s=this.options;return!(this.helper||s.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blurActiveElement(e),this._blockFrames(!0===s.iframeFix?"iframe":s.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map((function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var s=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(s).length||t.ui.safeBlur(s)},_mouseStart:function(e){var s=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===t(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,s){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!s){var i=this._uiHash();if(!1===this._trigger("drag",e,i))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var s=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==s._trigger("stop",e)&&s._clear()})):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var s=this.options,i=t.isFunction(s.helper),o=i?t(s.helper.apply(this.element[0],[e])):"clone"===s.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===s.appendTo?this.element[0].parentNode:s.appendTo),i&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),s=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==s&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,s,i,o=this.options,n=this.document[0];this.relativeContainer=null,o.containment?"window"!==o.containment?"document"!==o.containment?o.containment.constructor!==Array?("parent"===o.containment&&(o.containment=this.helper[0].parentNode),(i=(s=t(o.containment))[0])&&(e=/(scroll|auto)/.test(s.css("overflow")),this.containment=[(parseInt(s.css("borderLeftWidth"),10)||0)+(parseInt(s.css("paddingLeft"),10)||0),(parseInt(s.css("borderTopWidth"),10)||0)+(parseInt(s.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(s.css("borderRightWidth"),10)||0)-(parseInt(s.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(s.css("borderBottomWidth"),10)||0)-(parseInt(s.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=s)):this.containment=o.containment:this.containment=[0,0,t(n).width()-this.helperProportions.width-this.margins.left,(t(n).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var s="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*s,left:e.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*s}},_generatePosition:function(t,e){var s,i,o,n,r=this.options,l=this._isRootNode(this.scrollParent[0]),a=t.pageX,h=t.pageY;return l&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),s=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):s=this.containment,t.pageX-this.offset.click.left<s[0]&&(a=s[0]+this.offset.click.left),t.pageY-this.offset.click.top<s[1]&&(h=s[1]+this.offset.click.top),t.pageX-this.offset.click.left>s[2]&&(a=s[2]+this.offset.click.left),t.pageY-this.offset.click.top>s[3]&&(h=s[3]+this.offset.click.top)),r.grid&&(o=r.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,h=s?o-this.offset.click.top>=s[1]||o-this.offset.click.top>s[3]?o:o-this.offset.click.top>=s[1]?o-r.grid[1]:o+r.grid[1]:o,n=r.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,a=s?n-this.offset.click.left>=s[0]||n-this.offset.click.left>s[2]?n:n-this.offset.click.left>=s[0]?n-r.grid[0]:n+r.grid[0]:n),"y"===r.axis&&(a=this.originalPageX),"x"===r.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:l?0:this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:l?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,s,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[s,i,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,s,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,s,i){var o=t.extend({},s,{item:i.element});i.sortables=[],t(i.options.connectToSortable).each((function(){var s=t(this).sortable("instance");s&&!s.options.disabled&&(i.sortables.push(s),s.refreshPositions(),s._trigger("activate",e,o))}))},stop:function(e,s,i){var o=t.extend({},s,{item:i.element});i.cancelHelperRemoval=!1,t.each(i.sortables,(function(){this.isOver?(this.isOver=0,i.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(e),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",e,o))}))},drag:function(e,s,i){t.each(i.sortables,(function(){var o=!1,n=this;n.positionAbs=i.positionAbs,n.helperProportions=i.helperProportions,n.offset.click=i.offset.click,n._intersectsWith(n.containerCache)&&(o=!0,t.each(i.sortables,(function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==n&&this._intersectsWith(this.containerCache)&&t.contains(n.element[0],this.element[0])&&(o=!1),o}))),o?(n.isOver||(n.isOver=1,i._parent=s.helper.parent(),n.currentItem=s.helper.appendTo(n.element).data("ui-sortable-item",!0),n.options._helper=n.options.helper,n.options.helper=function(){return s.helper[0]},e.target=n.currentItem[0],n._mouseCapture(e,!0),n._mouseStart(e,!0,!0),n.offset.click.top=i.offset.click.top,n.offset.click.left=i.offset.click.left,n.offset.parent.left-=i.offset.parent.left-n.offset.parent.left,n.offset.parent.top-=i.offset.parent.top-n.offset.parent.top,i._trigger("toSortable",e),i.dropped=n.element,t.each(i.sortables,(function(){this.refreshPositions()})),i.currentItem=i.element,n.fromOutside=i),n.currentItem&&(n._mouseDrag(e),s.position=n.position)):n.isOver&&(n.isOver=0,n.cancelHelperRemoval=!0,n.options._revert=n.options.revert,n.options.revert=!1,n._trigger("out",e,n._uiHash(n)),n._mouseStop(e,!0),n.options.revert=n.options._revert,n.options.helper=n.options._helper,n.placeholder&&n.placeholder.remove(),s.helper.appendTo(i._parent),i._refreshOffsets(e),s.position=i._generatePosition(e,!0),i._trigger("fromSortable",e),i.dropped=!1,t.each(i.sortables,(function(){this.refreshPositions()})))}))}}),t.ui.plugin.add("draggable","cursor",{start:function(e,s,i){var o=t("body"),n=i.options;o.css("cursor")&&(n._cursor=o.css("cursor")),o.css("cursor",n.cursor)},stop:function(e,s,i){var o=i.options;o._cursor&&t("body").css("cursor",o._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,s,i){var o=t(s.helper),n=i.options;o.css("opacity")&&(n._opacity=o.css("opacity")),o.css("opacity",n.opacity)},stop:function(e,s,i){var o=i.options;o._opacity&&t(s.helper).css("opacity",o._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,s){s.scrollParentNotHidden||(s.scrollParentNotHidden=s.helper.scrollParent(!1)),s.scrollParentNotHidden[0]!==s.document[0]&&"HTML"!==s.scrollParentNotHidden[0].tagName&&(s.overflowOffset=s.scrollParentNotHidden.offset())},drag:function(e,s,i){var o=i.options,n=!1,r=i.scrollParentNotHidden[0],l=i.document[0];r!==l&&"HTML"!==r.tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+r.offsetHeight-e.pageY<o.scrollSensitivity?r.scrollTop=n=r.scrollTop+o.scrollSpeed:e.pageY-i.overflowOffset.top<o.scrollSensitivity&&(r.scrollTop=n=r.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+r.offsetWidth-e.pageX<o.scrollSensitivity?r.scrollLeft=n=r.scrollLeft+o.scrollSpeed:e.pageX-i.overflowOffset.left<o.scrollSensitivity&&(r.scrollLeft=n=r.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(e.pageY-t(l).scrollTop()<o.scrollSensitivity?n=t(l).scrollTop(t(l).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(l).scrollTop())<o.scrollSensitivity&&(n=t(l).scrollTop(t(l).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(e.pageX-t(l).scrollLeft()<o.scrollSensitivity?n=t(l).scrollLeft(t(l).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(l).scrollLeft())<o.scrollSensitivity&&(n=t(l).scrollLeft(t(l).scrollLeft()+o.scrollSpeed)))),!1!==n&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,s,i){var o=i.options;i.snapElements=[],t(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each((function(){var e=t(this),s=e.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:s.top,left:s.left})}))},drag:function(e,s,i){var o,n,r,l,a,h,p,c,f,d,g=i.options,u=g.snapTolerance,m=s.offset.left,v=m+i.helperProportions.width,_=s.offset.top,P=_+i.helperProportions.height;for(f=i.snapElements.length-1;f>=0;f--)h=(a=i.snapElements[f].left-i.margins.left)+i.snapElements[f].width,c=(p=i.snapElements[f].top-i.margins.top)+i.snapElements[f].height,v<a-u||m>h+u||P<p-u||_>c+u||!t.contains(i.snapElements[f].item.ownerDocument,i.snapElements[f].item)?(i.snapElements[f].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[f].item})),i.snapElements[f].snapping=!1):("inner"!==g.snapMode&&(o=Math.abs(p-P)<=u,n=Math.abs(c-_)<=u,r=Math.abs(a-v)<=u,l=Math.abs(h-m)<=u,o&&(s.position.top=i._convertPositionTo("relative",{top:p-i.helperProportions.height,left:0}).top),n&&(s.position.top=i._convertPositionTo("relative",{top:c,left:0}).top),r&&(s.position.left=i._convertPositionTo("relative",{top:0,left:a-i.helperProportions.width}).left),l&&(s.position.left=i._convertPositionTo("relative",{top:0,left:h}).left)),d=o||n||r||l,"outer"!==g.snapMode&&(o=Math.abs(p-_)<=u,n=Math.abs(c-P)<=u,r=Math.abs(a-m)<=u,l=Math.abs(h-v)<=u,o&&(s.position.top=i._convertPositionTo("relative",{top:p,left:0}).top),n&&(s.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top),r&&(s.position.left=i._convertPositionTo("relative",{top:0,left:a}).left),l&&(s.position.left=i._convertPositionTo("relative",{top:0,left:h-i.helperProportions.width}).left)),!i.snapElements[f].snapping&&(o||n||r||l||d)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[f].item})),i.snapElements[f].snapping=o||n||r||l||d)}}),t.ui.plugin.add("draggable","stack",{start:function(e,s,i){var o,n=i.options,r=t.makeArray(t(n.stack)).sort((function(e,s){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(s).css("zIndex"),10)||0)}));r.length&&(o=parseInt(t(r[0]).css("zIndex"),10)||0,t(r).each((function(e){t(this).css("zIndex",o+e)})),this.css("zIndex",o+r.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,s,i){var o=t(s.helper),n=i.options;o.css("zIndex")&&(n._zIndex=o.css("zIndex")),o.css("zIndex",n.zIndex)},stop:function(e,s,i){var o=i.options;o._zIndex&&t(s.helper).css("zIndex",o._zIndex)}}),t.ui.draggable}));
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdialog',["ojs/ojcore","jquery","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojanimation","ojs/ojpopupcore","ojs/ojbutton","jqueryui-amd/widgets/draggable","jqueryui-amd/widgets/mouse"],function(e,t,i,s,o){"use strict";var n,l,r,a={properties:{cancelBehavior:{type:"string",enumValues:["escape","icon","none"],value:"icon"},dialogTitle:{type:"string"},dragAffordance:{type:"string",enumValues:["none","title-bar"],value:"title-bar"},initialVisibility:{type:"string",enumValues:["hide","show"],value:"hide"},modality:{type:"string",enumValues:["modal","modeless"],value:"modal"},position:{type:"object",properties:{at:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"],value:"center"},vertical:{type:"string",enumValues:["bottom","center","top"],value:"center"}}},collision:{type:"string",enumValues:["fit","flip","flipfit","none"],value:"fit"},my:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"],value:"center"},vertical:{type:"string",enumValues:["bottom","center","top"],value:"center"}}},of:{type:"string|object",value:"window"},offset:{type:"object",properties:{x:{type:"number",value:0},y:{type:"number",value:0}}}}},resizeBehavior:{type:"string",enumValues:["none","resizable"],value:"resizable"},translations:{type:"object",value:{},properties:{labelCloseIcon:{type:"string"}}}},methods:{close:{},isOpen:{},open:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojBeforeClose:{},ojBeforeOpen:{},ojClose:{},ojFocus:{},ojOpen:{},ojResize:{},ojResizeStart:{},ojResizeStop:{},ojAnimateStart:{},ojAnimateEnd:{}},extension:{}};
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
n="oj-dialog-body",l="oj-dialog-footer",r="oj-dialog-header",e.__registerWidget("oj.ojDialog",t.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{cancelBehavior:"icon",dragAffordance:"title-bar",initialVisibility:"hide",modality:"modal",position:{my:{horizontal:"center",vertical:"center"},offset:{x:0,y:0},at:{horizontal:"center",vertical:"center"},of:"window",collision:"fit",using:function(e){var i=t(this).css(e).offset().top;i<0&&t(this).css("top",e.top-i)}},resizeBehavior:"resizable",role:"dialog",dialogTitle:null,title:null,beforeClose:null,beforeOpen:null,close:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null,animateStart:null,animateEnd:null},_ComponentCreate:function(){this._super();var i=this;if(this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this._IsCustomElement()||(this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this.element.removeAttr("title")),this.element.hide(),this.element.uniqueId(),this.element.addClass("oj-dialog oj-component"),this.element.attr({tabIndex:-1}),this._IsCustomElement()&&this.element[0].hasAttribute("role")||this.element.attr("role",this.options.role),this._on(this.element,{keydown:this._keydownHandler.bind(this)}),this.userDefinedDialogHeader=!1,!this._IsCustomElement())for(var o=this.element.children(),n=0;n<o.length;n++){var l=t(o[n]);l.is(".oj-dialog-header")?(this.userDefinedDialogHeader=!0,this._userDefinedHeader=l,this._userDefinedHeaderDiv=o[n]):l.is(".oj-dialog-body")?(this._createContentDiv(),this._uiDialogContent=t(this._contentDiv),this.element[0].insertBefore(this._contentDiv,o[n]),s.subtreeAttached(this._contentDiv),this._contentDiv.appendChild(o[n]),s.subtreeAttached(o[n]),this._uiDialogBody=l,this._uiDialogBodyDiv=o[n]):l.is(".oj-dialog-footer")&&(this._uiDialogFooter=l,this._uiDialogFooterDiv=o[n])}this._IsCustomElement()&&this._processSlottedChildren(),this.userDefinedDialogHeader?(this._userDefinedTitleDiv=this._userDefinedHeaderDiv.querySelector(".oj-dialog-title"),this._userDefinedTitle=t(this._userDefinedTitleDiv),null!==this._userDefinedTitleDiv&&void 0!==this._userDefinedTitleDiv&&(this._userDefinedTitle.uniqueId(),this.element.attr({"aria-labelledby":this._userDefinedTitle.attr("id")}))):this._createTitlebar(),this._uiDialogContent||(this._createContentDiv(),this._uiDialogContent=t(this._contentDiv),this._userDefinedHeader?this.element[0].insertBefore(this._contentDiv,this._userDefinedHeaderDiv):this.element[0].insertBefore(this._contentDiv,this._uiDialogTitlebarDiv),s.subtreeAttached(this._contentDiv)),this._setupFocus(this.element);var r=this.options;r.position=e.PositionUtils.coerceToJet(r.position),this._IsCustomElement()&&(this._titleMutationObserver=new MutationObserver(function(e){e.forEach(function(e){"attributes"===e.type&&"title"===e.attributeName&&(i._uiDialogTitleDiv.textContent=e.target.getAttribute(e.attributeName))})}),this._titleMutationObserver.observe(this.element[0],{attributes:!0,attributeFilter:["title"]}))},_createHeaderSlot:function(){this._headerSlot=document.createElement("div"),this._headerSlot.classList.add(r),this.element[0].appendChild(this._headerSlot),s.subtreeAttached(this._headerSlot),this.userDefinedDialogHeader=!0,this._userDefinedHeaderDiv=this._headerSlot,this._userDefinedHeader=t(this._headerSlot)},_createFooterSlot:function(){this._footerSlot=document.createElement("div"),this.element[0].appendChild(this._footerSlot),s.subtreeAttached(this._footerSlot),this._uiDialogFooterDiv=this._footerSlot,this._uiDialogFooter=t(this._footerSlot)},_createContentDiv:function(){this._contentDiv=document.createElement("div"),this._contentDiv.classList.add("oj-dialog-content","oj-dialog-default-content")},_createBodySlot:function(){this._createContentDiv(),this.element[0].appendChild(this._contentDiv),s.subtreeAttached(this._contentDiv),this._bodySlot=document.createElement("div"),this._contentDiv.appendChild(this._bodySlot),this._uiDialogContent=t(this._contentDiv),this._uiDialogBodyDiv=this._bodySlot,this._uiDialogBody=t(this._bodySlot)},_GetContextMenu:function(){return this._IsCustomElement()?this._contextmenuSlot&&this._contextmenuSlot.length>0?this._contextmenuSlot[0]:this._super():null},_processSlottedChildren:function(){null!=this._footerSlot&&this.element[0].removeChild(this._footerSlot),null!=this._headerSlot&&this.element[0].removeChild(this._headerSlot),null!=this._bodySlot&&this.element[0].removeChild(this._bodySlot),null!=this._contextmenuSlot&&this.element[0].removeChild(this._contextmenuSlot);var t,i,s=e.BaseCustomElementBridge.getSlotMap(this.element[0]),o=Object.keys(s);for(i=0;i<o.length;i++)"header"!==(t=o[i])&&"footer"!==t&&"body"!==t&&""!==t&&"contextMenu"!==t&&s[t].parentNode.removeChild(s[t]);var r=Object.prototype.hasOwnProperty;r.call(s,"header")&&this._createHeaderSlot(),(r.call(s,"body")||r.call(s,""))&&this._createBodySlot(),r.call(s,"footer")&&this._createFooterSlot(),r.call(s,"contextMenu")&&(this._contextmenuSlot=s.contextMenu);var a=this._bodySlot;for(i=0;i<o.length;i++){switch(t=o[i]){case"header":a=this._headerSlot;break;case"footer":a=this._footerSlot;break;case"body":case"":a=this._bodySlot}var h=s[t];if(null!=h)for(var u=0;u<h.length;u++)switch(a.appendChild(h[u]),t){case"header":break;case"footer":a=this._footerSlot,s[t][u].classList.add(l);break;case"body":case"":a=this._bodySlot,s[t][u].classList.add(n)}}},_AfterCreateEvent:function(){"show"===this.options.initialVisibility&&this.open()},_destroy:function(){this._off(this.element,"keydown"),e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly(),this._setWhenReady("none"),this._destroyResizable(),this.element.hasClass("oj-draggable")&&(this.element.draggable("destroy"),this.element.removeClass("oj-draggable")),this._destroyCloseButton(),this.userDefinedDialogHeader&&this._userDefinedTitle.removeUniqueId(),this._uiDialogBody&&this._uiDialogBody.insertAfter(this._uiDialogContent),this._uiDialogContent.remove(),this._uiDialogBody=null,this._uiDialogContent=null,this.element.removeUniqueId().removeClass("oj-dialog oj-component").css(this.originalCss),this.element.stop(!0,!0),this._IsCustomElement()||this.originalTitle&&this.element.attr("title",this.originalTitle),this._uiDialogTitlebar&&(this._uiDialogTitlebar.remove(),this._uiDialogTitlebar=null),delete this._popupServiceEvents,this._super()},disable:t.noop,enable:t.noop,close:function(i){if(!this._isOperationPending("close",[i])){var s=e.ZOrderUtils.getStatus(this.element);if(s===e.ZOrderUtils.STATUS.OPEN)if(e.ZOrderUtils.setStatus(this.element,e.ZOrderUtils.STATUS.BEFORE_CLOSE),!1!==this._trigger("beforeClose",i)||this._ignoreBeforeCloseResultant){if(this._setWhenReady("close"),this._focusedElement=null,!this.opener.filter(":focusable").focus().length){var o=this.opener.parents().filter(":focusable");o.length>0?o[0].focus():t(this.document[0].activeElement).blur()}if("modal"===this.options.modality){var n=Array.prototype.forEach,l=this.element[0].querySelectorAll(".oj-helper-element-in-dialog-with-accesskey");n.call(l,function(e){e.classList.remove("oj-helper-element-in-dialog-with-accesskey")});var r=document.querySelectorAll(".oj-helper-element-with-accesskey");n.call(r,function(e){e.setAttribute("accesskey",e.getAttribute("data-ojAccessKey")),e.removeAttribute("data-ojAccessKey"),e.classList.remove("oj-helper-element-with-accesskey")})}var a={};a[e.PopupService.OPTION.POPUP]=this.element,a[e.PopupService.OPTION.CONTEXT]={closeEvent:i},e.PopupService.getInstance().close(a)}else e.ZOrderUtils.setStatus(this.element,s)}},_beforeCloseHandler:function(t){var s=t[e.PopupService.OPTION.POPUP];this._destroyResizable();var n=(i.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).animation;if(!this._ignoreBeforeCloseResultant&&n&&n.close)return o.startAnimation(s[0],"close",n.close,this).then(function(){s.hide()});s.hide()},_afterCloseHandler:function(t){var i,s=t[e.PopupService.OPTION.CONTEXT];s&&(i=s.closeEvent),this._trigger("close",i)},isOpen:function(){var t=e.ZOrderUtils.getStatus(this.element);return t===e.ZOrderUtils.STATUS.OPENING||t===e.ZOrderUtils.STATUS.OPEN||t===e.ZOrderUtils.STATUS.BEFORE_CLOSE||t===e.ZOrderUtils.STATUS.CLOSING},open:function(i){if(!this._isOperationPending("open",[i])){var s=e.ZOrderUtils.getStatus(this.element);if(s===e.ZOrderUtils.STATUS.OPEN||s===e.ZOrderUtils.STATUS.UNKNOWN||s===e.ZOrderUtils.STATUS.CLOSE)if(e.ZOrderUtils.setStatus(this.element,e.ZOrderUtils.STATUS.BEFORE_OPEN),!1!==this._trigger("beforeOpen",i)){if(s===e.ZOrderUtils.STATUS.OPEN)return e.ZOrderUtils.setStatus(this.element,s),void this._focusTabbable();this._setWhenReady("open"),this.userDefinedDialogHeader?void 0!==this.closeButton&&null!==this.closeButton||"icon"!==this.options.cancelBehavior||this._createCloseButton(this._userDefinedHeaderDiv):this._createTitlebarCloseButton(),this.opener=t(this.document[0].activeElement),"title-bar"===this.options.dragAffordance&&t.fn.draggable&&this._makeDraggable();var o="rtl"===this._GetReadingDirection(),n=e.PositionUtils.coerceToJqUi(this.options.position);if(n=e.PositionUtils.normalizeHorizontalAlignment(n,o),"modal"===this.options.modality){var l=Array.prototype.forEach,r=this.element[0].querySelectorAll("[accesskey]");l.call(r,function(e){e.classList.add("oj-helper-element-in-dialog-with-accesskey")});var a=document.querySelectorAll("[accesskey]");l.call(a,function(e){e.classList.contains("oj-helper-element-in-dialog-with-accesskey")||(e.classList.add("oj-helper-element-with-accesskey"),e.setAttribute("data-ojAccessKey",e.getAttribute("accesskey")),e.removeAttribute("accesskey"))})}var h={};h[e.PopupService.OPTION.POPUP]=this.element,h[e.PopupService.OPTION.LAUNCHER]=this.opener,h[e.PopupService.OPTION.POSITION]=n,h[e.PopupService.OPTION.MODALITY]=this.options.modality,h[e.PopupService.OPTION.EVENTS]=this._getPopupServiceEvents(),h[e.PopupService.OPTION.LAYER_SELECTORS]="oj-dialog-layer",h[e.PopupService.OPTION.LAYER_LEVEL]=e.PopupService.LAYER_LEVEL.TOP_LEVEL,h[e.PopupService.OPTION.CUSTOM_ELEMENT]=this._IsCustomElement(),e.PopupService.getInstance().open(h)}else e.ZOrderUtils.setStatus(this.element,s)}},_beforeOpenHandler:function(t){var s=t[e.PopupService.OPTION.POPUP],n=t[e.PopupService.OPTION.POSITION];s.show(),s.position(n),s.parent().addClass("oj-animate-open");var l=(i.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).animation;if(l&&l.open)return o.startAnimation(s[0],"open",l.open,this)},_afterOpenHandler:function(t){t[e.PopupService.OPTION.POPUP].parent().removeClass("oj-animate-open"),this._makeResizable(),this._trigger("open"),this._focusTabbable()},refresh:function(){this._super()},_focusTabbable:function(){this.GetFocusElement().focus(),this._trigger("focus")},GetFocusElement:function(){var t=null;return!0===this._titleBarMousedown?this.element[0]:(t||(t=this.element.find("[autofocus]")),(null!=t&&t.length||null==(t=e.FocusUtils.getFirstTabStop(this._contentDiv)))&&(null!=t&&t.length||!this._uiDialogFooter||!this._uiDialogFooter.length||null==(t=e.FocusUtils.getFirstTabStop(this._uiDialogFooterDiv)))?(null!=t&&t.length||this.closeButton&&(t=this.closeButton),null!=t&&t.length||(t=this.element),t[0]):t)},_keydownHandler:function(i){if("none"!==this.options.cancelBehavior&&!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===t.ui.keyCode.ESCAPE)return i.preventDefault(),i.stopImmediatePropagation(),void this.close(i);var s;i.keyCode===t.ui.keyCode.TAB&&(i.shiftKey?(e.FocusUtils.isFirstActiveElement(this.element)||document.activeElement===this.element[0])&&null!=(s=e.FocusUtils.getLastTabStop(this.element))&&(s.focus(),i.preventDefault()):(e.FocusUtils.isLastActiveElement(this.element)||document.activeElement===this.element[0])&&null!=(s=e.FocusUtils.getFirstTabStop(this.element))&&(s.focus(),i.preventDefault()))},_setupFocus:function(e){var i=this;this._focusable({applyHighlight:!0,setupHandlers:function(s,o){i._on(e,{focus:function(e){s(t(e.currentTarget))},blur:function(e){o(t(e.currentTarget))}})}})},_destroyCloseButton:function(){null!==this.closeButtonDiv&&void 0!==this.closeButtonDiv&&(this.closeButtonDiv.parentElement&&(s.subtreeDetached(this.closeButtonDiv),this.closeButtonDiv.parentElement.removeChild(this.closeButtonDiv)),this.closeButton=null),this._headerSlot&&this._headerSlot.classList.remove("oj-dialog-header-close"),this._uiDialogTitlebarDiv&&this._uiDialogTitlebarDiv.classList.remove("oj-dialog-header-close")},_createCloseButton:function(e){if(this._IsCustomElement()){this.closeButtonDiv=document.createElement("oj-button"),this.closeButtonDiv.classList.add("oj-dialog-header-close-wrapper"),this.closeButtonDiv.setAttribute("data-oj-binding-provider","none"),this.closeButtonDiv.setAttribute("display","icons"),this.closeButtonDiv.setAttribute("chroming","half");var i=document.createElement("span");i.textContent=this.getTranslatedString("labelCloseIcon");var o=document.createElement("span");o.className="oj-fwk-icon oj-fwk-icon-cross",o.setAttribute("slot","startIcon"),this.closeButtonDiv.appendChild(o),this.closeButtonDiv.appendChild(i),e.appendChild(this.closeButtonDiv),s.subtreeAttached(this.closeButtonDiv),this.closeButton=t(this.closeButtonDiv)}this._IsCustomElement()||(this.closeButton=t("<button><\button>").addClass("oj-dialog-header-close-wrapper"),this.closeButton.ojButton({display:"icons",chroming:"half",label:this.getTranslatedString("labelCloseIcon"),icons:{start:"oj-component-icon oj-fwk-icon-cross"}}).appendTo(e),this.closeButtonDiv=this.closeButton[0]),this._on(this.closeButton,{click:function(e){e.preventDefault(),e.stopImmediatePropagation(),this.close(e)}}),this._headerSlot&&this._headerSlot.classList.add("oj-dialog-header-close"),this._uiDialogTitlebarDiv&&this._uiDialogTitlebarDiv.classList.add("oj-dialog-header-close")},_createTitlebarCloseButton:function(){void 0!==this.closeButton&&null!==this.closeButton||"icon"!==this.options.cancelBehavior||this._createCloseButton(this._uiDialogTitlebarDiv),this._on(this._uiDialogTitlebar,{mousedown:function(t){var i=e.DomUtils.isAncestorOrSelf(this.closeButtonDiv,t.target);this._titleBarMousedown=!0,i||this.element.focus()},mouseup:function(){this._titleBarMousedown=null}})},_createTitlebar:function(){this._uiDialogTitlebarDiv=document.createElement("div"),this._uiDialogTitlebarDiv.classList.add(r),this.element[0].insertBefore(this._uiDialogTitlebarDiv,this.element[0].firstChild),s.subtreeAttached(this._uiDialogTitlebarDiv),this._uiDialogTitlebar=t(this._uiDialogTitlebarDiv),this._uiDialogTitleDiv=document.createElement("h1"),this._uiDialogTitleDiv.classList.add("oj-dialog-title"),t(this._uiDialogTitleDiv).uniqueId(),this._uiDialogTitlebarDiv.appendChild(this._uiDialogTitleDiv),s.subtreeAttached(this._uiDialogTitleDiv),this._title(this._uiDialogTitleDiv),this.element.attr({"aria-labelledby":this._uiDialogTitleDiv.id})},_title:function(e){var t=e;this._IsCustomElement()?this._IsCustomElement()&&(this.options.dialogTitle?t.textContent=this.options.dialogTitle:this.element.attr("title")?t.textContent=this.element.attr("title"):t.innerHTML="&#160;"):(this.options.title||(t.innerHTML="&#160;"),t.textContent=this.options.title)},_makeDraggable:function(){var e=this,i=this.options;function s(e){return{position:e.position,offset:e.offset}}this.element.draggable({addClasses:!1,handle:".oj-dialog-header",containment:"document",start:function(i,o){t(this).addClass("oj-dialog-dragging"),e._positionDescendents(),e._trigger("dragStart",i,s(o))},drag:function(t,i){e._positionDescendents(),e._trigger("drag",t,s(i))},stop:function(o,n){var l=n.offset.left-e.document.scrollLeft(),r=n.offset.top-e.document.scrollTop();i.position={my:{horizontal:"left",vertical:"top"},at:{horizontal:"left",vertical:"top"},offset:{x:l>=0?l:0,y:r>=0?r:0},of:window},t(this).removeClass("oj-dialog-dragging"),e._positionDescendents(),e._trigger("dragStop",o,s(n))}}),this.element.addClass("oj-draggable")},_destroyResizable:function(){this._resizableComponent&&this._resizableComponent("instance")&&(this._resizableComponent("destroy"),delete this._resizableComponent)},_makeResizable:function(){if(this._destroyResizable(),"resizable"===this.options.resizeBehavior){var i=this;this._resizableComponent=this.element.ojResizable.bind(this.element);var s=Math.max(e.DomUtils.getCSSLengthAsFloat(this.element.css("min-width")),10),o=Math.max(e.DomUtils.getCSSLengthAsFloat(this.element.css("min-height")),10),n=e.DomUtils.getCSSLengthAsFloat(this.element.css("max-width")),l=e.DomUtils.getCSSLengthAsFloat(this.element.css("max-height"));n=0===n?null:n,l=0===l?null:l,this._resizableComponent({minWidth:s,minHeight:o,maxWidth:n,maxHeight:l,cancel:".oj-dialog-content",containment:"document",handles:"n,e,s,w,se,sw,ne,nw",start:function(e,s){i._isResizing=!0,t(this).addClass("oj-dialog-resizing"),i._trigger("resizeStart",e,r(s))},resize:function(e,t){i._trigger("resize",e,r(t))},stop:function(e,s){i._isResizing=!1,t(this).removeClass("oj-dialog-resizing"),i._trigger("resizeStop",e,r(s))}})}function r(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}},_position:function(){var t="rtl"===this._GetReadingDirection(),i=e.PositionUtils.coerceToJqUi(this.options.position);i=e.PositionUtils.normalizeHorizontalAlignment(i,t),this.element.position(i),this._positionDescendents()},_positionDescendents:function(){e.PopupService.getInstance().triggerOnDescendents(this.element,e.PopupService.EVENT.POPUP_REFRESH)},_setOption:function(i,s,o){var n;if("disabled"!==i)switch(this._super(i,s,o),i){case"dragAffordance":(n=this.element.hasClass("oj-draggable"))&&"none"===s&&(this.element.draggable("destroy"),this.element.removeClass("oj-draggable")),n||"title-bar"!==s||this._makeDraggable();break;case"position":var l=this.options;return l.position=e.PositionUtils.coerceToJet(s,l.position),void this._position();case"resizeBehavior":e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN&&this._makeResizable();break;case"title":case"dialogTitle":this.userDefinedDialogHeader?this._title(this._userDefinedHeaderDiv.querySelector(".oj-dialog-title")):this._title(this._uiDialogTitlebarDiv.querySelector(".oj-dialog-title"));break;case"role":this.element.attr("role",s);break;case"modality":if(e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN){var r={};r[e.PopupService.OPTION.POPUP]=this.element,r[e.PopupService.OPTION.MODALITY]=s,e.PopupService.getInstance().changeOptions(r)}break;case"cancelBehavior":"none"===s||"escape"===s?this._destroyCloseButton():"icon"===s&&(this.userDefinedDialogHeader?(this._destroyCloseButton(),this._createCloseButton(this._userDefinedHeaderDiv),this._userDefinedTitleDiv=this._userDefinedHeaderDiv.querySelector(".oj-dialog-title"),this._userDefinedTitle=t(this._userDefinedTitleDiv)):(this._destroyCloseButton(),this._createCloseButton(this._uiDialogTitlebarDiv),this.standardTitleDiv=this._uiDialogTitlebarDiv.querySelector(".oj-dialog-title"),this.standardTitle=t(this.standardTitleDiv)))}},getNodeBySubId:function(e){if(null===e)return this.element?this.element[0]:null;function t(e){for(var t=[],i=/\w|_|-/,s=0;s<e.length;s++){var o=e.substring(s,s+1);i.test(o)?t.push(o):t.push("\\"+o)}return t.join("")}var i=e.subId;if(!this._IsCustomElement()||i!==l&&i!==n){var s,o;switch(i){case r:case l:case"oj-dialog-content":case"oj-resizable-n":case"oj-resizable-e":case"oj-resizable-s":case"oj-resizable-w":case"oj-resizable-se":case"oj-resizable-sw":case"oj-resizable-ne":case"oj-resizable-nw":return s=this.element[0].nodeName+'[id="'+t(this.element.attr("id"))+'"] > ',s+="."+i,(o=this.element.parent().find(s))&&0!==o.length?o[0]:null;case"oj-dialog-close-icon":case"oj-dialog-close":return null;case n:return s=this.element[0].nodeName+'[id="'+t(this.element.attr("id"))+'"] > ',s+=".oj-dialog-content > ",s+="."+i,(o=this.element.parent().find(s))&&0!==o.length?o[0]:null;case"oj-dialog-header-close-wrapper":return s=this.element[0].nodeName+'[id="'+t(this.element.attr("id"))+'"] > ',s+=".oj-dialog-header > ",s+="."+i,(o=this.element.parent().find(s))&&0!==o.length?o[0]:null}}else{if(i===n)return this._uiDialogBodyDiv.querySelector(".oj-dialog-body");if(i===l)return this._uiDialogFooterDiv.querySelector(".oj-dialog-footer")}return null},getSubIdByNode:function(e){if(null!=e){var i=t(e);if(i.hasClass(r))return{subId:r};if(i.hasClass(l))return{subId:l};if(i.hasClass("oj-dialog-content"))return{subId:"oj-dialog-content"};if(i.hasClass("oj-dialog-header-close-wrapper"))return{subId:"oj-dialog-header-close-wrapper"};if(i.hasClass("oj-resizable-n"))return{subId:"oj-resizable-n"};if(i.hasClass("oj-resizable-e"))return{subId:"oj-resizable-e"};if(i.hasClass("oj-resizable-s"))return{subId:"oj-resizable-s"};if(i.hasClass("oj-resizable-w"))return{subId:"oj-resizable-w"};if(i.hasClass("oj-resizable-se"))return{subId:"oj-resizable-se"};if(i.hasClass("oj-resizable-sw"))return{subId:"oj-resizable-sw"};if(i.hasClass("oj-resizable-ne"))return{subId:"oj-resizable-ne"};if(i.hasClass("oj-resizable-nw"))return{subId:"oj-resizable-nw"}}return null},_surrogateRemoveHandler:function(){var t=this.element;e.ZOrderUtils.getStatus(t)===e.ZOrderUtils.STATUS.OPEN&&t.remove()},_getPopupServiceEvents:function(){if(!this._popupServiceEvents){var t={};t[e.PopupService.EVENT.POPUP_CLOSE]=this._closeImplicitly.bind(this),t[e.PopupService.EVENT.POPUP_REMOVE]=this._surrogateRemoveHandler.bind(this),t[e.PopupService.EVENT.POPUP_REFRESH]=this._positionDescendents.bind(this),t[e.PopupService.EVENT.POPUP_BEFORE_OPEN]=this._beforeOpenHandler.bind(this),t[e.PopupService.EVENT.POPUP_AFTER_OPEN]=this._afterOpenHandler.bind(this),t[e.PopupService.EVENT.POPUP_BEFORE_CLOSE]=this._beforeCloseHandler.bind(this),t[e.PopupService.EVENT.POPUP_AFTER_CLOSE]=this._afterCloseHandler.bind(this),this._popupServiceEvents=t}return this._popupServiceEvents},_closeImplicitly:function(){this._ignoreBeforeCloseResultant=!0,this.close(),delete this._ignoreBeforeCloseResultant},_setWhenReady:function(t){var i=this._whenReadyMediator;i&&(i.destroy(),delete this._whenReadyMediator),["open","close"].indexOf(t)<0||(this._whenReadyMediator=new e.PopupWhenReadyMediator(this.element,t,"ojDialog",this._IsCustomElement()))},_isOperationPending:function(e,t){var i=this._whenReadyMediator;return!!i&&i.isOperationPending(this,e,e,t)},_NotifyDetached:function(){e.ZOrderUtils.getStatus(this.element)===e.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly(),this._super()}}),s.setDefaultOptions({ojDialog:{resizeBehavior:s.createDynamicPropertyGetter(function(){return(i.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).resizeBehavior}),cancelBehavior:s.createDynamicPropertyGetter(function(){return(i.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).cancelBehavior}),dragAffordance:s.createDynamicPropertyGetter(function(){return(i.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).dragAffordance})}}),t.widget("oj.ojResizable",{version:"1.0.0",widgetEventPrefix:"oj",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(e,i){var s=e;if("hidden"===t(s).css("overflow"))return!1;var o,n=i&&"left"===i?"scrollLeft":"scrollTop";return s[n]>0||(s[n]=1,o=s[n]>0,s[n]=0,o)},_create:function(){var e,i,s,o;this._super();var n=this,l=this.options,r=this.element.mouse.bind(this.element);if(r(),this.mouse=r("instance"),this.mouse._mouseCapture=function(e){return n._mouseCapture(e)},this.mouse._mouseStart=function(e){return n._mouseStart(e)},this.mouse._mouseDrag=function(e){return n._mouseDrag(e)},this.mouse._mouseStop=function(e){return this.element&&this.element.focus(),n._mouseStop(e)},this.element.addClass("oj-resizable"),t.extend(this,{originalElement:this.element,_proportionallyResizeElements:[],_helper:null}),this._initialResize=!0,this.handles=l.handles||(t(".oj-resizable-handle",this.element).length?{n:".oj-resizable-n",e:".oj-resizable-e",s:".oj-resizable-s",w:".oj-resizable-w",se:".oj-resizable-se",sw:".oj-resizable-sw",ne:".oj-resizable-ne",nw:".oj-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;i<e.length;i++)s=t.trim(e[i]),o=t("<div class='oj-resizable-handle oj-resizable-"+s+"'></div>"),this.handles[s]=".oj-resizable-"+s,this.element.append(o);var a=Object.keys(this.handles);for(i=0;i<a.length;i++){var h=a[i];this.handles[h].constructor===String&&(this.handles[h]=this.element.children(this.handles[h]).first().show())}this._handles=t(".oj-resizable-handle",this.element),this._handles.mouseover(function(){n.resizing||(this.className&&(o=this.className.match(/oj-resizable-(se|sw|ne|nw|n|e|s|w)/i)),n.axis=o&&o[1]?o[1]:"se")}),this.mouse._mouseInit()},_destroy:function(){this.mouse&&this.mouse._mouseDestroy();try{this.mouse.destroy(),this.mouse=null}catch(e){}var e;return e=this.originalElement,t(e).removeClass("oj-resizable oj-resizable-disabled oj-resizable-resizing").removeData("resizable").removeData("oj-resizable").unbind(".resizable").find(".oj-resizable-handle").remove(),this},_mouseCapture:function(e){for(var i=!1,s=Object.keys(this.handles),o=0;o<s.length;o++){var n=t(this.handles[s[o]])[0];(n===e.target||t.contains(n,e.target))&&(i=!0)}return!this.options.disabled&&i},_mouseStart:function(e){var i,s,o,n=this.options,l=this.element.position(),r=this.element;return this.resizing=!0,/absolute/.test(r.css("position"))?r.css({position:"absolute",top:r.css("top"),left:r.css("left")}):r.is(".oj-draggable")&&r.css({position:"absolute",top:l.top,left:l.left}),this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),n.containment&&(i+=t(n.containment).scrollLeft()||0,s+=t(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size={width:r.width(),height:r.height()},this.originalSize={width:r.width(),height:r.height()},this.originalPosition={left:i,top:s},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio=this.originalSize.width/this.originalSize.height||1,o=t(".oj-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),r.addClass("oj-resizable-resizing"),this._propagate("start",e),this._alsoresize_start(e),this._containment_start(e),!0},_mouseDrag:function(e){var i,s=this.helper,o={},n=this.originalMousePosition,l=this.axis,r=e.pageX-n.left||0,a=e.pageY-n.top||0,h=this._change[l];return this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height},!!h&&(i=h.apply(this,[e,r,a]),this._updateVirtualBoundaries(e.shiftKey),e.shiftKey&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this._alsoresize_resize(e,this.ui()),this._containment_resize(e,this.ui()),this.position.top!==this.prevPosition.top&&(o.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(o.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(o.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(o.height=this.size.height+"px"),s.css(o),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(o)||this._trigger("resize",e,this.ui()),!1)},_mouseStop:function(e){return this.resizing=!1,t("body").css("cursor","auto"),this.element.removeClass("oj-resizable-resizing"),this._propagate("stop",e),this._alsoresize_stop(e),this._containment_stop(e),!1},_updateVirtualBoundaries:function(e){var t,i,s,o,n,l=this.options;n={minWidth:this._isNumber(l.minWidth)?l.minWidth:0,maxWidth:this._isNumber(l.maxWidth)?l.maxWidth:1/0,minHeight:this._isNumber(l.minHeight)?l.minHeight:0,maxHeight:this._isNumber(l.maxHeight)?l.maxHeight:1/0},e&&(t=n.minHeight*this.aspectRatio,s=n.minWidth/this.aspectRatio,i=n.maxHeight*this.aspectRatio,o=n.maxWidth/this.aspectRatio,t>n.minWidth&&(n.minWidth=t),s>n.minHeight&&(n.minHeight=s),i<n.maxWidth&&(n.maxWidth=i),o<n.maxHeight&&(n.maxHeight=o)),this._vBoundaries=n},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=e,i=this.position,s=this.size,o=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===o&&(t.left=i.left+(s.width-t.width),t.top=null),"nw"===o&&(t.top=i.top+(s.height-t.height),t.left=i.left+(s.width-t.width)),t},_respectSize:function(e){var t=e,i=this._vBoundaries,s=this.axis,o=this._isNumber(t.width)&&i.maxWidth&&i.maxWidth<t.width,n=this._isNumber(t.height)&&i.maxHeight&&i.maxHeight<t.height,l=this._isNumber(t.width)&&i.minWidth&&i.minWidth>t.width,r=this._isNumber(t.height)&&i.minHeight&&i.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,u=/sw|nw|w/.test(s),d=/nw|ne|n/.test(s);return l&&(t.width=i.minWidth),r&&(t.height=i.minHeight),o&&(t.width=i.maxWidth),n&&(t.height=i.maxHeight),l&&u&&(t.left=a-i.minWidth),o&&u&&(t.left=a-i.maxWidth),r&&d&&(t.top=h-i.minHeight),n&&d&&(t.top=h-i.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,s,o,n=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(o=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[o.css("borderTopWidth"),o.css("borderRightWidth"),o.css("borderBottomWidth"),o.css("borderLeftWidth")],s=[o.css("paddingTop"),o.css("paddingRight"),o.css("paddingBottom"),o.css("paddingLeft")],t=0;t<i.length;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(s[t],10)||0);o.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element;this.elementOffset=e.offset(),this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize;return{top:this.originalPosition.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,t){"resize"!==e&&this._trigger(e,t,this.ui())},_alsoresize_start:function(){var e=this.options,i=function(e){t(e).each(function(){var e=t(this);e.data("oj-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof e.alsoResize||e.alsoResize.parentNode?i(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],i(e.alsoResize)):t.each(e.alsoResize,function(e){i(e)})},_alsoresize_resize:function(e,i){var s=this.options,o=this.originalSize,n=this.originalPosition,l={height:this.size.height-o.height||0,width:this.size.width-o.width||0,top:this.position.top-n.top||0,left:this.position.left-n.left||0},r=function(e,s){t(e).each(function(){var e,o=t(this),n=t(this).data("oj-resizable-alsoresize"),r={};e=s&&s.length?s:o.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"],t.each(e,function(e,t){var i=(n[t]||0)+(l[t]||0);i&&i>=0&&(r[t]=i||null)}),o.css(r)})};"object"!=typeof s.alsoResize||s.alsoResize.nodeType?r(s.alsoResize,null):t.each(s.alsoResize,function(e,t){r(e,t)})},_alsoresize_stop:function(){t(this).removeData("oj-resizable-alsoresize")},_containment_start:function(){var e,i,s,o,n,l,r,a,h=this,u=h.options,d=h.element,c=u.containment;(a=c instanceof t?c.get(0):/parent/.test(c)?d.parent().get(0):c)&&(h.containerElement=t(a),/document/.test(c)||c===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(a),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,s){i[t]=h._num(e.css("padding"+s))}),h.containerOffset=e.offset(),h.containerPosition=e.position(),h.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},s=h.containerOffset,o=h.containerSize.height,n=h.containerSize.width,l=h._hasScroll(a,"left")?a.scrollWidth:n,r=h._hasScroll(a)?a.scrollHeight:o,h.parentData={element:a,left:s.left,top:s.top,width:l,height:r}))},_containment_resize:function(e,t){var i,s,o,n,l=this.options,r=this.containerOffset,a=this.position,h=e.shiftKey,u={top:0,left:0},d=this.containerElement,c=!0;d[0]!==document&&/static/.test(d.css("position"))&&(u=r),a.left<(this._helper?r.left:0)&&(this.size.width+=this._helper?this.position.left-r.left:this.position.left-u.left,h&&(this.size.height=this.size.width/this.aspectRatio,c=!1),this.position.left=l.helper?r.left:0),a.top<(this._helper?r.top:0)&&(this.size.height+=this._helper?this.position.top-r.top:this.position.top,h&&(this.size.width=this.size.height*this.aspectRatio,c=!1),this.position.top=this._helper?r.top:0),this.offset.left=this.parentData.left+this.position.left,this.offset.top=this.parentData.top+this.position.top,i=Math.abs((this._helper?this.offset.left-u.left:this.offset.left-r.left)+this.sizeDiff.width),s=Math.abs((this._helper?this.offset.top-u.top:this.offset.top-r.top)+this.sizeDiff.height),o=this.containerElement.get(0)===this.element.parent().get(0),n=/relative|absolute/.test(this.containerElement.css("position")),o&&n&&(i-=Math.abs(this.parentData.left)),i+this.size.width>=this.parentData.width&&(this.size.width=this.parentData.width-i,h&&(this.size.height=this.size.width/this.aspectRatio,c=!1)),s+this.size.height>=this.parentData.height&&(this.size.height=this.parentData.height-s,h&&(this.size.width=this.size.height*this.aspectRatio,c=!1)),c||(this.position.left=t.prevPosition.left,this.position.top=t.prevPosition.top,this.size.width=t.prevSize.width,this.size.height=t.prevSize.height)},_containment_stop:function(){var e=this.options,i=this.containerOffset,s=this.containerPosition,o=this.containerElement,n=t(this.helper),l=n.offset(),r=n.outerWidth()-this.sizeDiff.width,a=n.outerHeight()-this.sizeDiff.height;this._helper&&!e.animate&&/relative/.test(o.css("position"))&&t(this).css({left:l.left-s.left-i.left,width:r,height:a}),this._helper&&!e.animate&&/static/.test(o.css("position"))&&t(this).css({left:l.left-s.left-i.left,width:r,height:a})},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition,prevSize:this.prevSize,prevPosition:this.prevPosition}}}),a.extension._WIDGET_NAME="ojDialog",e.CustomElementBridge.register("oj-dialog",{metadata:a})});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojlabelvalue',["ojs/ojcore","ojs/ojcomponentcore","ojs/ojlabel"],function(e){"use strict";var t={properties:{colspan:{type:"number",value:1},labelEdge:{type:"string",enumValues:["inherit","inside","start","top"],value:"inherit"},labelWidth:{type:"string",value:"inherit"}},methods:{setProperty:{},getProperty:{},setProperties:{},refresh:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};function a(e){var t,a,l=e.element;this.createDOM=function(){l.classList.add("oj-label-value","oj-form");var e=document.createElement("div");for(e.classList.add("oj-flex"),e.setAttribute("data-oj-context",""),e.setAttribute("data-oj-internal",""),(t=document.createElement("div")).classList.add("oj-flex-item"),t.setAttribute("data-oj-context",""),t.setAttribute("data-oj-internal",""),(a=document.createElement("div")).classList.add("oj-flex-item"),a.setAttribute("data-oj-context",""),a.setAttribute("data-oj-internal","");l.firstElementChild;){var i=l.firstElementChild;switch(i.getAttribute("slot")){case"label":t.appendChild(i);break;case"value":a.appendChild(i);break;default:l.removeChild(i)}}e.appendChild(t),e.appendChild(a),l.appendChild(e)},this.updateDOM=function(){var e=function(){for(var e=l.parentElement;e;e=e.parentElement)if(-1!==e.tagName.indexOf("-"))return e;return null}(),i=function(e){var t="top";"inherit"===l.labelEdge?e&&"labelEdge"in e&&(t=e.labelEdge):t=l.labelEdge;return t}(e),r="start"===i?function(e){var t="33%";if("inherit"===l.labelWidth){if(e&&"labelWidth"in e){t=e.labelWidth;var a=t.match(/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/);if("%"===a[2]){var i=Number(l.getAttribute("data-oj-colspan"));i>0&&(t=a[1]/i+a[2])}}}else t=l.labelWidth;return t}(e):"100%",o=function(e){var t="column";e&&"direction"in e&&(t=e.direction);return t}(e);"start"===i?(l.classList.add("oj-formlayout-labels-inline"),l.classList.remove("oj-form-control-label-inside")):"inside"===i?(l.classList.add("oj-form-control-label-inside"),l.classList.remove("oj-formlayout-labels-inline")):(l.classList.remove("oj-formlayout-labels-inline"),l.classList.remove("oj-form-control-label-inside")),"row"===o?l.classList.add("oj-formlayout-form-across"):l.classList.remove("oj-formlayout-form-across"),t.style.webkitFlex="0 1 "+r,t.style.flex="0 1 "+r,t.style.maxWidth=r,t.style.width=r,a.style.webkitFlex="1 1 0",a.style.flex="1 1 0"}}t.extension._CONSTRUCTOR=a,e.CustomElementBridge.register("oj-label-value",{metadata:t})});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojformlayout',["ojs/ojcore","ojs/ojcontext","ojs/ojcomponentcore","ojs/ojlabel","ojs/ojlogger","ojs/ojthemeutils"],function(e,t,n,o,a,i){"use strict";var l={properties:{colspanWrap:{type:"string",enumValues:["nowrap","wrap"]},direction:{type:"string",enumValues:["column","row"]},labelEdge:{type:"string",enumValues:["inside","start","top"]},labelWidth:{type:"string",value:"33%"},labelWrapping:{type:"string",enumValues:["truncate","wrap"],value:"wrap"},maxColumns:{type:"number",value:1},readonly:{type:"boolean",value:!1},userAssistanceDensity:{type:"string",enumValues:["compact","efficient","reflow"],value:"efficient"}},methods:{setProperty:{},getProperty:{},setProperties:{},refresh:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};Object.freeze(l);var s=0;function r(n){var o,l,r,d,c,u,f=this,m=n.element,p="-labelled-by",y="data-oj-formlayout-bonus-dom",h="["+y+"]",b=!0,v=!1;function g(){l&&(l(),l=null)}function x(){o&&(o(),o=null)}function j(e){return"inside"===m.labelEdge||"inside"===e.labelEdge||"none"===e.labelEdge}function C(e){var t=null;return j(e)?t:(e instanceof Element&&"labelHint"in e&&""!==e.labelHint&&(J(e),t=function(e){let t=e.labelledBy;if(t){let n=document.getElementById(t);n&&a.error("The oj-form-layout descendent component with id "+e.id+' has both label-hint and labelled-by. Remove labelled-by="'+t+'" since no matching element was found in the document, and a label will be created using the label-hint.')}var n=document.createElement("oj-label");n.setAttribute(y,""),n.setAttribute("data-oj-internal",""),n.setAttribute("data-oj-binding-provider","none"),n.setAttribute("data-oj-context","");var o=document.createElement("span");o.id=e.id+"|hint",o.textContent=e.labelHint,V(e)&&B(e,n);return n.appendChild(o),function(e,t){var n=e,o=t;n.id=o.id+p,n.setAttribute("for",o.id)}(n,e),n}(e),e.parentElement.insertBefore(t,e),function(e){e.addEventListener("labelHintChanged",L),e.addEventListener("helpHintsChanged",E),e.addEventListener("requiredChanged",w),e.addEventListener("userAssistanceDensityChanged",A)}(e)),t)}function L(e){var t=e.target,n=document.getElementById(t.id+"|hint");n&&(n.innerText=e.detail.value)}function E(e){var t=e.target,n=N(t);let o=e.detail.value;if(n){O(t)&&(n.help=o)}}function w(e){var t=e.target,n=N(t);if(n){let o;o=!!e.detail.value&&O(t),n.showRequired=o}}function A(e){let t=e.target,n=e.detail.value,o=e.detail.previousValue;if("compact"!==n&&"compact"!==o)return;let a=N(t);if(V(t))B(t,a);else{t.required&&(a.showRequired=!1);const e=t.helpHints;e&&(e.definition||e.source)&&(a.help={definition:null,source:null})}}function O(e){let t="use"===i.parseJSONFromFontFamily("oj-form-control-option-defaults").useUserAssistanceOptionDefault?e.userAssistanceDensity:"displayOptions";return"compact"===t||"displayOptions"===t}function N(e){return"labelledBy"in e?document.getElementById(e.labelledBy):m.querySelector('oj-label[for="'+e.id+'"]')}function B(e,t){var n=t,o=e.helpHints;let a;o&&(o.definition||o.source)&&(n.help=o),a=!!e.required&&O(e),n.showRequired=a}function S(){return"column"===m.direction||1===m.maxColumns}function D(e,t){if(!S()){for(var n,o=t.previousSibling;o&&1!==o.nodeType;)n=o,o=o.previousSibling;for(;n&&n!==t;)o=n.nextSibling,e.appendChild(n),n=o}}function W(e){if(!S())for(;e.nextSibling;){var t=e.nextSibling;if(1===t.nodeType)break;if(8===t.nodeType&&0===t.textContent.trim().indexOf("oj-bind-"))break;e.appendChild(t)}}function M(e,t){e&&W(e);var n=U("oj-flex");return t.parentElement.insertBefore(n,t),D(n,n),n}function R(e,t){var n=1;return"column"===m.direction?"100%":(e&&"colspan"in e&&e.colspan&&(n=Math.min(Math.floor(e.colspan),t)),Math.floor(1e5/m.maxColumns)/1e3*n+"%")}function F(){if(!u&&(u=c,"start"===m.labelEdge&&"row"===m.direction)){var e=m.labelWidth.match(/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/);switch(e[2]){case"vw":case"vmin":case"vmax":case"%":u=e[1]/m.maxColumns+e[2]}}return u}function T(e,t){var n=U("oj-flex-item");return n.style.flexGrow="0",n.style.flexShrink="1",n.style.flexBasis=t,n.style.maxWidth=t,n.style.width=t,e.appendChild(n),n}function H(e,t){var n=m.maxColumns,o=t%n,a=R();if("column"!==m.direction&&e&&o>0)for(var i=o;i<n;i++)T(e,a)}function k(e,t,n,o){var a,i=t?F():R(e,o);D(n,e),t||(a=T(n,"0px"));var l=U("oj-flex-item");if(n.appendChild(l),l.appendChild(e),t){l.style.flexGrow="0",l.style.flexShrink="0",l.style.flexBasis=i,l.style.maxWidth=i,l.style.width=i;var s=U("oj-flex-item");n.appendChild(s),"row"===m.direction&&"top"===m.labelEdge&&(s.appendChild(e),l.style.flex="0 1 0px",l.style.maxWidth="0px",l.style.width="0px",l.classList.add("oj-formlayout-label-comp-flex-item"),s.classList.add("oj-formlayout-label-comp-flex-item")),i=function(e,t){return"start"===m.labelEdge?"calc("+R(e,t)+" - "+F()+")":R(e,t)}(e,o),s.appendChild(t),s.style.flexGrow="1",s.style.flexShrink="1",s.style.flexBasis=i,s.style.maxWidth=i,s.style.width=i,"OJ-FORM-LAYOUT"===t.tagName&&s.classList.add("oj-formlayout-nested-formlayout")}else"labelHint"in e&&j(e)?("row"===m.direction&&(a.style.flex="0 1 0px",a.style.maxWidth="0px",a.style.width="0px",a.classList.add("oj-formlayout-label-comp-flex-item"),l.classList.add("oj-formlayout-label-comp-flex-item")),l.style.flex="1 1 0",l.style.maxWidth=i,l.style.width=i):(i=R(e,o),l.style.flexGrow="1",l.style.flexShrink="1",l.style.flexBasis=i,l.style.maxWidth=i,l.style.width=i,a.classList.add("oj-formlayout-no-label-flex-item"),l.classList.add("oj-formlayout-no-label-flex-item"),"OJ-LABEL-VALUE"===e.tagName?(a.classList.add("oj-formlayout-nested-labelvalue"),l.classList.add("oj-formlayout-nested-labelvalue"),e.setAttribute("data-oj-colspan",o),e.refresh()):"OJ-FORM-LAYOUT"===e.tagName&&l.classList.add("oj-formlayout-nested-formlayout"));W(n)}function U(e){var t=document.createElement("div");return t.setAttribute(y,""),t.setAttribute("data-oj-internal",""),t.classList.add(e),t}function q(e){for(var t=e,n=!0;t!==m;){if("OJ-FORM-LAYOUT"===t.tagName){n=!1;break}if(null==(t=t.parentElement)){n=!1;break}}return n}function I(e){for(;e.firstChild;){var t=e.firstChild;e.parentNode.insertBefore(t,e);t.refresh&&t.classList.contains("oj-complete")&&t.refresh()}e.parentNode.removeChild(e)}function J(e){var t=e;t.id||(t.id="oflId_"+s,s+=1)}function V(e){let t=i.parseJSONFromFontFamily("oj-form-control-option-defaults"),n="displayOptions";if(t){n="use"===t.useUserAssistanceOptionDefault?e.userAssistanceDensity:"displayOptions"}return"compact"===n||"displayOptions"===n}function _(e){var t=i.parseJSONFromFontFamily("oj-form-layout-option-defaults")||{};e?(e.props.labelEdge||(m.labelEdge=t.labelEdge),e.props.colspanWrap||(m.colspanWrap=t.colspanWrap),e.props.direction||(m.direction=t.direction)):(m.labelEdge||(m.labelEdge=t.labelEdge),m.colspanWrap||(m.colspanWrap=t.colspanWrap),m.direction||(m.direction=t.direction))}_(n),f._rootElementMutationObserver=new MutationObserver(function(e){document.body.contains(m)?(!function(e){for(var t=e.length,n=0;n<t;n++){var o=e[n];if("childList"===o.type)for(var a=o.addedNodes.length,i=0;i<a;i++){var l=o.addedNodes[i];l.parentNode===m&&r.appendChild(l)}}}(e),function(e){for(var t=!0,n=e.length,o=["colspan","label-hint"],a=0;a<n;a++){var i=e[a];if("childList"===i.type&&((l=i.target)===m||l&&"DIV"===l.tagName&&l.hasAttribute(y))&&q(i.target)){t=!1;break}if("attributes"===i.type&&o.includes(i.attributeName)){t=!1;break}}var l;return t}(e)||(!function(e){for(var t=e.length,n=0;n<t;n++){var o=e[n];if("childList"===o.type)for(var a=o.removedNodes.length,i=0;i<a;i++){var l=o.removedNodes[i];1===l.nodeType&&(l.removeEventListener("labelHintChanged",L),l.removeEventListener("helpHintsChanged",E),l.removeEventListener("requiredChanged",w),l.removeEventListener("userAssistanceDensityChanged",A))}}}(e),m.refresh())):this.disconnect()}),this.createDOM=function(){m.classList.add("oj-form-layout"),m.classList.add("oj-formlayout-max-cols-"+m.maxColumns),(r=document.createElement("div")).classList.add("oj-form"),r.setAttribute("data-oj-context",""),r.setAttribute("data-oj-internal",""),r.setAttribute(y,""),m.readonly?r.classList.remove("oj-enabled"):r.classList.add("oj-enabled");for("efficient"===m.userAssistanceDensity?r.classList.add("oj-efficient"):r.classList.remove("oj-efficient");m.firstChild;)r.appendChild(m.firstChild);m.appendChild(r)},f.handlePropertyChanged=function(e,t){if("readonly"===e)return m.readonly?r.classList.remove("oj-enabled"):r.classList.add("oj-enabled"),!0;if("userAssistanceDensity"===e){const e="oj-efficient";return"efficient"===m.userAssistanceDensity?r.classList.add(e):r.classList.remove(e),!0}return!1},this.updateDOM=function(){function n(){!function(){if(!l){var e=t.getContext(m).getBusyContext(),n={description:"The oj-form-layout component with id = '"+m.id+"' is being rendered."};l=e.addBusyState(n)}}(),_(),d=[],u=null,c="start"===m.labelEdge?m.labelWidth:"100%",t.getContext(r).getBusyContext().whenReady().then(function(){var n=document.activeElement,i=!1;!function(){if(!o){var e=t.getContext(r).getBusyContext(),n={description:"The oj-form div for oj-form-layout component with id = '"+m.id+"' is being rendered."};o=e.addBusyState(n)}}(),f._rootElementMutationObserver.disconnect(),function(){var e=m.maxColumns,t="oj-formlayout-max-cols-"+m.maxColumns,n=m.className;-1!==n.indexOf("oj-formlayout-max-cols-")&&(m.className=n.replace(/oj-formlayout-max-cols-[\d+]/,t));if("start"===m.labelEdge){var o=parseInt(m.labelWidth,10);(isNaN(o)||o>0)&&r.classList.add("oj-form-cols-labels-inline"),r.classList.add("oj-formlayout-labels-inline"),r.classList.remove("oj-form-cols")}else r.classList.add("oj-form-cols"),r.classList.remove("oj-form-cols-labels-inline"),r.classList.remove("oj-formlayout-labels-inline");"truncate"===m.labelWrapping?r.classList.add("oj-formlayout-labels-nowrap"):r.classList.remove("oj-formlayout-labels-nowrap");"row"===m.direction?(e=1,r.classList.add("oj-formlayout-form-across")):(e=m.maxColumns,r.classList.remove("oj-formlayout-form-across"));r.style.columnCount=e,r.style.webkitColumnCount=e,r.style.MozColumnCount=e}(),b||function(){for(var e=r.querySelectorAll(h),t=e.length,n=0;n<t;++n){var o=e[n];q(o)&&("OJ-LABEL"===o.tagName?(o.for="",o.parentElement.removeChild(o)):I(o))}}(),function(){var e=r.firstElementChild,t=0,n="column"===m.direction;for(;e;){var o=e.tagName.toLowerCase();if(-1!==o.indexOf("-"))if("oj-label"===o){var a=e;if(!(e=e.nextElementSibling))throw J(m),J(a),x(),g(),new Error("oj-form-layout component with id='"+m.id+"' has an oj-label child element with id='"+a.id+"' but has no next sibling element that it is associated with.")}else"oj-label-value"===o?b||e.refresh():e.classList.contains("oj-complete")?C(e):((n||t%m.maxColumns==0)&&e.setAttribute("data-oj-needs-oj-flex-div",""),d.push(e));t+=1,e=e.nextElementSibling}}(),function(){var e,t=[],n=r.children.length,o="column"===m.direction,i=0,l=0;!function(e,t){for(var n=t,o=e.length-1;o>=0;o--)n[o]=e[o]}(r.children,t);var s,c=m.maxColumns,u=0,f=!1,p=!1;for(;i<n;){var y=t[i];if(s=1,(o||l%c==0)&&(e=M(e,y)),-1===d.indexOf(y)){var h=y.tagName.toLowerCase();if("oj-label"===h){var b=t[i+=1];k(y,b,e)}else if("labelHint"in y&&j(y))k(y,null,e);else{if("colspan"in y&&y.getAttribute("colspan"))if(o)f||(a.error('Colspan attribute is ignored unless direction is set to "row"'),f=!0);else{var v=c-u;s=Math.floor(y.colspan),"wrap"===m.colspanWrap&&v<s&&u>0?(H(e,l),l+=v,u=0,s=Math.min(s,c),e=M(e,y)):s=Math.min(s,v),!p&&c>1&&(p=!0)}k(y,null,e,s)}}u=(l+=s)%c,i+=1}p&&!o?r.classList.add("oj-form-control-full-width"):r.classList.remove("oj-form-control-full-width");H(e,l)}(),n&&(i=e.DomUtils.isAncestorOrSelf(m,n)),!b&&i&&setTimeout(function(){n.focus()},0),f._rootElementMutationObserver.observe(m,{childList:!0,subtree:!0,attributes:!0}),b&&(b=!1),x(),g()})}var i;v||(!(b||!m.hasAttribute("data-oj-context"))&&!(i=t.getContext(m).getBusyContext()).isReady()?(v=!0,i.whenReady().then(function(){v=!1,n()})):n())}}r.getDynamicDefaults=function(){var e=i.parseJSONFromFontFamily("oj-form-layout-option-defaults")||{};return{labelEdge:e.labelEdge,direction:e.direction}},l.extension._CONSTRUCTOR=r,l.extension._TRACK_CHILDREN="nearestCustomElement",e.CustomElementBridge.register("oj-form-layout",{metadata:e.CollectionUtils.mergeDeep(l,{properties:{readonly:{binding:{provide:[{name:"containerReadonly"},{name:"readonly"}],consume:{name:"containerReadonly"}}},userAssistanceDensity:{binding:{provide:[{name:"containerUserAssistanceDensity",default:"efficient"},{name:"userAssistanceDensity",default:"efficient"}],consume:{name:"containerUserAssistanceDensity"}}}}})})});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojcachingdataprovider',["ojs/ojcore","ojs/ojlogger","ojs/ojdataprovider"],function(t,e,a){class s{constructor(t,e,a){this.asyncIterator=t,this.cache=e,this.cacheEntries=a}next(){const t=this.asyncIterator.next();return t.then(t=>{const e=t.value;let a=this.cache.data.length,s=a+e.data.length-1;this.cache.data=this.cache.data.concat(e.data),this.cache.metadata=this.cache.metadata.concat(e.metadata),this.cache.done=t.done,this.cacheEntries.push({start:a,end:s,miss:0,status:r.READY})}),t}}class h{constructor(t,e,a){this.asyncIterable=t,this.cache=e,this.cacheEntries=a,this[Symbol.asyncIterator]=(()=>new s(this.asyncIterable[Symbol.asyncIterator](),this.cache,this.cacheEntries))}}var i,r,c;!function(t){t[t.NEVER=0]="NEVER",t[t.LRU=1]="LRU"}(i||(i={})),function(t){t[t.READY=0]="READY",t[t.FETCHING=1]="FETCHING",t[t.PURGED=2]="PURGED"}(r||(r={})),function(t){t[t.UP=0]="UP",t[t.DOWN=1]="DOWN"}(c||(c={}));return class{constructor(t,e,a){this.dataProvider=t,this.cache=e,this.options=a,this.strategy=i.NEVER,this.prefetching=!1,this.currentStart=0,this.CACHE_MISS_THRESHOLD=5,null==e&&(this.cache={data:[],metadata:[],done:!1,startIndex:0}),this.cacheQueue=[],this.modelEventHandler=this._handleModelEvent.bind(this),t.addEventListener("mutate",this.modelEventHandler),t.addEventListener("refresh",this.modelEventHandler)}destroy(){this.dataProvider&&this.modelEventHandler&&(this.dataProvider.removeEventListener("mutate",this.modelEventHandler),this.dataProvider.removeEventListener("refresh",this.modelEventHandler))}fetchFirst(t){this._resetCache();const e=this.dataProvider.fetchFirst(t);return new h(e,this.cache,this.cacheQueue)}fetchByKeys(t){return this.dataProvider.fetchByKeys(t)}containsKeys(t){return this.dataProvider.containsKeys(t)}fetchByOffset(t){void 0===this.proximity&&(this.proximity=t.size);let a=c.UP;const s=t.offset,h=s+t.size;if(s>this.currentStart&&(a=c.DOWN),this.currentStart=s,!this._isInCache(s,h))return e.info("Cache missed: "+s+" - "+h),this.cacheQueue.forEach(t=>{t.status!==r.FETCHING&&(t.start>=s&&t.start<=h||t.end<=h&&t.end>=s?(this._log("cache entry update to FETCHING - start: "+t.start+" end: "+t.end),t.status=r.FETCHING):t.miss=t.miss+1)}),this.fetchByOffsetPromise=new Promise((e,i)=>{this._log("Call fetchByOffset to fulfill cache"),this.dataProvider.fetchByOffset(t).then(i=>{for(let t=0;t<i.results.length;t++){let e=i.results[t];this.cache.data[s+t]=e.data,this.cache.metadata[s+t]=e.metadata}this._log("cache fulfilled - offset: "+s+" size: "+i.results.length),this.cacheQueue.forEach(t=>{t.status===r.FETCHING&&(this._log("cache entry update to READY - start: "+t.start+" end: "+t.end),t.status=r.READY,t.miss=0)});const c=this._getFetchByOffsetResult(s,h);e({results:c,fetchParameters:t,done:!1}),this._recalibrateCache(s,h,a)})}),this.fetchByOffsetPromise;this._updateCacheEntries(s,h);const i=this._getFetchByOffsetResult(s,h);return this._recalibrateCache(s,h,a),Promise.resolve({results:i,fetchParameters:t,done:!1})}_updateCacheEntries(t,e){this.cacheQueue.forEach(a=>{a.status!==r.PURGED&&(a.start>e||a.end<t?a.miss=a.miss+1:a.miss=0)})}_getFetchByOffsetResult(t,e){const a=t-this.cache.startIndex,s=e-this.cache.startIndex,h=[];for(let t=a;t<s;t++)h.push({data:this.cache.data[t],metadata:this.cache.metadata[t]});return h}getTotalSize(){return this.dataProvider.getTotalSize()}isEmpty(){return this.dataProvider.isEmpty()}getCapability(t){return this.dataProvider.getCapability(t)}addEventListener(t,e){this.dataProvider.addEventListener(t,e)}removeEventListener(t,e){this.dataProvider.removeEventListener(t,e)}dispatchEvent(t){return this.dataProvider.dispatchEvent(t)}_handleModelEvent(t){if("refresh"===t.type)this._handleRowsRefreshed();else if("mutate"===t.type){const e=t.detail;e.add&&this._handleRowsAdded(e.add),e.remove&&this._handleRowsRemoved(e.remove),e.update&&this._handleRowsUpdated(e.update)}}_resetCache(){this.cache.data.length=0,this.cache.metadata.length=0,this.cache.startIndex=0,this.cache.done=!1,this.cacheQueue.length=0}_recalibrateCache(t,e,a){if(this.strategy!==i.NEVER&&(this.cacheQueue.forEach(a=>{if(a.status===r.READY&&a.miss>=this.CACHE_MISS_THRESHOLD&&(a.end<t-this.proximity||a.start>e+this.proximity)){this._log("Purging cache range: "+a.start+" to "+a.end);for(let t=a.start;t<=a.end;t++)this.cache.data[t]=null,this.cache.metadata[t]=null;a.status=r.PURGED}}),this._dumpCacheStatus(),!1!==this.prefetching))for(let s=0;s<this.cacheQueue.length;s++){let h=this.cacheQueue[s];if(a===c.UP&&h.start<t&&h.end>t){h.status!==r.PURGED&&this._isInCache(h.start,h.end)||(h.status=r.FETCHING,this._log("pre-fetch cache range (before adjustment): "+h.start+" - "+h.end+" direction: "+a),this._prefetchRange(h.start,t-h.start).then(t=>{h.status=r.READY}));break}if(a===c.DOWN&&h.start<e&&h.end>e){h.status!==r.PURGED&&this._isInCache(h.start,h.end)||(h.status=r.FETCHING,this._log("pre-fetch cache range (before adjustment): "+h.start+" - "+h.end+" direction: "+a),this._prefetchRange(e,h.end-e).then(t=>{h.status=r.READY}));break}}}_prefetchRange(t,e){return this._log("pre-fetching to refill cache - offset: "+t+" size: "+e),new Promise((a,s)=>{this.dataProvider.fetchByOffset({offset:t,size:e}).then(s=>{for(let e=0;e<s.results.length;e++){let a=s.results[e];this.cache.data[t+e]=a.data,this.cache.metadata[t+e]=a.metadata}this._log("pre-fetch result returned and cache is fulfilled - offset: "+t+" size: "+e),a(!0)})})}_isInCache(t,e){if(this.strategy===i.NEVER)return!0;if(t<this.cache.startIndex||e>this.cache.startIndex+this.cache.data.length)return!1;let a=t-this.cache.startIndex,s=e-this.cache.startIndex;for(let t=a;t<s;t++)if(null==this.cache.data[t])return!1;return!0}_handleRowsMutated(t,e,a,s){const h=t.indexes;null==h?t[e]:h.forEach((e,h)=>{if(e<this.cache.startIndex+this.cache.data.length)if(e>=this.cache.startIndex){const s=null!=t.data?t.data[h]:null,i=null!=t.metadata?t.metadata[h]:null;a(e,s,i)}else s&&s()})}_handleRowsAdded(t){this._log("handling add mutation event"),this._handleRowsMutated(t,"addBeforeKeys",(t,e,a)=>{this.cache.data.splice(t,0,e),this.cache.metadata.splice(t,0,a)},()=>{this.cache.startIndex++})}_handleRowsRemoved(t){this._log("handling remove mutation event"),this._handleRowsMutated(t,"keys",t=>{this.cache.data.splice(t,1),this.cache.metadata.splice(t,1)},()=>{this.cache.startIndex=Math.max(0,this.cache.startIndex-1)})}_handleRowsUpdated(t){this._log("handling update mutation event"),this._handleRowsMutated(t,"keys",(t,e,a)=>{this.cache.data.splice(t,1,e),this.cache.metadata.splice(t,1,a)})}_handleRowsRefreshed(){this._log("handling refresh event"),this._resetCache()}_log(t){e.info("[CachingDataProvider]=> "+t)}_getStatusText(t){switch(t){case r.READY:return"ready";case r.FETCHING:return"fetching";case r.PURGED:return"purged";default:return"unknown"}}_dumpCacheStatus(){this.cacheQueue.forEach(t=>{this._log("Cache entry - start: "+t.start+" end: "+t.end+" miss: "+t.miss+" status: "+this._getStatusText(t.status))})}}});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojlistdataproviderview',["ojs/ojcore","jquery","ojs/ojdataprovider","ojs/ojcomponentcore","ojs/ojeventtarget","ojs/ojdataprovider"],function(t,e,s){"use strict";class i{constructor(t,e){this.dataProvider=t,this.options=e,this._noFilterSupport=!1,this.AsyncIterable=class{constructor(t,e){this._parent=t,this._asyncIterator=e,this[Symbol.asyncIterator]=function(){return this._asyncIterator}}},this.AsyncIterator=class{constructor(t,e,s){this._parent=t,this._nextFunc=e,this._params=s}next(){let t=this._nextFunc(this._params);return Promise.resolve(t)}},this.AsyncIteratorYieldResult=class{constructor(t,e){this._parent=t,this.value=e,this[i._VALUE]=e,this[i._DONE]=!1}},this.AsyncIteratorReturnResult=class{constructor(t,e){this._parent=t,this.value=e,this[i._VALUE]=e,this[i._DONE]=!0}},this.FetchListResult=class{constructor(t,e,s,r){this._parent=t,this.fetchParameters=e,this.data=s,this.metadata=r,this[i._FETCHPARAMETERS]=e,this[i._DATA]=s,this[i._METADATA]=r}},this.Item=class{constructor(t,e,s){this._parent=t,this.metadata=e,this.data=s,this[i._METADATA]=e,this[i._DATA]=s}},this.ItemMetadata=class{constructor(t,e){this._parent=t,this.key=e,this[i._KEY]=e}},this.FetchListParameters=class{constructor(t,e,s,r,n,l){this._parent=t,this.params=e,this.size=s,this.sortCriteria=r,this.filterCriterion=n,this.attributes=l;let _=this;e&&Object.keys(e).forEach(function(t){_[t]=e[t]}),this[i._SIZE]=s,r&&(this[i._SORTCRITERIA]=r),n&&(this[i._FILTERCRITERION]=n),l&&(this[i._FETCHATTRIBUTES]=l)}},this.FetchByKeysParameters=class{constructor(t,e,s,r){this._parent=t,this.keys=e,this.params=s,this.attributes=r;let n=this;s&&Object.keys(s).forEach(function(t){n[t]=s[t]}),e&&(this[i._KEYS]=e),r&&(this[i._FETCHATTRIBUTES]=r)}},this.FetchByOffsetParameters=class{constructor(t,e,s,r,n,l,_){this._parent=t,this.offset=e,this.params=s,this.size=r,this.sortCriteria=n,this.filterCriterion=l,this.attributes=_;let a=this;s&&Object.keys(s).forEach(function(t){a[t]=s[t]}),r&&(this[i._SIZE]=r),n&&(this[i._SORTCRITERIA]=n),e&&(this[i._OFFSET]=e),l&&(this[i._FILTERCRITERION]=l),_&&(this[i._FETCHATTRIBUTES]=_)}},this.FetchByKeysResults=class{constructor(t,e,s){this._parent=t,this.fetchParameters=e,this.results=s,this[i._FETCHPARAMETERS]=e,this[i._RESULTS]=s}},this.ContainsKeysResults=class{constructor(t,e,s){this._parent=t,this.containsParameters=e,this.results=s,this[i._CONTAINSPARAMETERS]=e,this[i._RESULTS]=s}},this.FetchByOffsetResults=class{constructor(t,e,s,r){this._parent=t,this.fetchParameters=e,this.results=s,this.done=r,this[i._FETCHPARAMETERS]=e,this[i._RESULTS]=s,this[i._DONE]=r}},this[i._FROM]=null==this.options?null:this.options[i._FROM],this[i._OFFSET]=null==this.options?0:this.options[i._OFFSET]>0?this.options[i._OFFSET]:0,this[i._SORTCRITERIA]=null==this.options?null:this.options[i._SORTCRITERIA],this[i._DATAMAPPING]=null==this.options?null:this.options[i._DATAMAPPING],this[i._FETCHATTRIBUTES]=null==this.options?null:this.options[i._FETCHATTRIBUTES],this[i._FILTERCRITERION]=null==this.options?null:this.options[i._FILTERCRITERION],this._addEventListeners(t),t.getCapability&&!t.getCapability("filter")&&(this._noFilterSupport=!0)}containsKeys(t){let e=this;return this.dataProvider[i._CONTAINSKEYS]?this.dataProvider[i._CONTAINSKEYS](t):this.fetchByKeys(t).then(function(s){let r=new Set;return t[i._KEYS].forEach(function(t){null!=s[i._RESULTS].get(t)&&r.add(t)}),Promise.resolve(new e.ContainsKeysResults(e,t,r))})}fetchByKeys(t){let e=this,s=null!=t?t[i._KEYS]:null,r=null!=t?t[i._FETCHATTRIBUTES]:null;null==r&&(r=this[i._FETCHATTRIBUTES]);let n=new e.FetchByKeysParameters(e,s,t,r);if(this.dataProvider[i._FETCHBYKEYS])return this.dataProvider[i._FETCHBYKEYS](n).then(function(t){let s=t[i._RESULTS],r=new Map;return s.forEach(function(t,s){let i=e._getMappedItems([t]);r.set(s,i[0])}),new e.FetchByKeysResults(e,n,r)});{let s=new this.FetchListParameters(this,null,i._DEFAULT_SIZE,null,null,r),l=new Map,_=this.dataProvider[i._FETCHFIRST](s)[Symbol.asyncIterator]();return this._fetchNextSet(t,_,l).then(function(t){let s=new Map;return t.forEach(function(t,i){let r=e._getMappedItems([t]);s.set(i,r[0])}),new e.FetchByKeysResults(e,n,s)})}}fetchByOffset(t){let e=this,s=null!=t?t[i._OFFSET]:null,r=null!=t?t[i._SIZE]:null,n=null!=t?t[i._FETCHATTRIBUTES]:null;null==n&&(n=this[i._FETCHATTRIBUTES]);let l=null!=t?t[i._SORTCRITERIA]:null;null==l&&(l=this[i._SORTCRITERIA]);let _=this._getMappedSortCriteria(l),a=null!=t?t[i._FILTERCRITERION]:null,h=this._getMappedFilterCriterion(a),E=new e.FetchByOffsetParameters(e,s,t,r,_,h,n);return this.dataProvider[i._FETCHBYOFFSET](E).then(function(t){let s=t[i._RESULTS],r=t[i._DONE],n=new Array;return s.forEach(function(t){let s=e._getMappedItems([t]);n.push(s[0])}),new e.FetchByOffsetResults(e,E,n,r)})}fetchFirst(t){let e={};e[i._ITEMS]=[],e[i._DONE]=!1,e[i._STARTINDEX]=0;let s=null!=t?t[i._SIZE]:null,r=null!=t?t[i._SORTCRITERIA]:null;null==r&&(r=this[i._SORTCRITERIA]);let n=this._getMappedSortCriteria(r),l=null!=t?t[i._FILTERCRITERION]:null;null==l&&(l=this[i._FILTERCRITERION]);let _=this._getMappedFilterCriterion(l),a=null!=t?t[i._FETCHATTRIBUTES]:null;null==a&&(a=this[i._FETCHATTRIBUTES]);let h=this;if(null==h[i._FROM]&&h[i._OFFSET]>0){let r=h[i._OFFSET];return new this.AsyncIterable(this,new this.AsyncIterator(this,function(t){return function(){let e=new h.FetchByOffsetParameters(h,r,null,s,n,_,a);return h.dataProvider[i._FETCHBYOFFSET](e).then(function(e){var n=e.results;r+=n.length;let l=h._getMappedItems(n);h._cacheResult(t,l),t[i._DONE]=e[i._DONE];var _=l.map(function(t){return t[i._DATA]}),a=l.map(function(t){return t[i._METADATA]});let E=e[i._FETCHPARAMETERS],T=null!=E?E[i._SORTCRITERIA]:null,u=null!=E?E[i._FILTERCRITERION]:null,o=h._getUnmappedSortCriteria(T),A=h._getUnmappedFilterCriterion(u),R=new h.FetchByOffsetParameters(h,h[i._OFFSET],null,s,o,A);return t[i._DONE]?Promise.resolve(new h.AsyncIteratorReturnResult(h,new h.FetchListResult(h,R,_,a))):Promise.resolve(new h.AsyncIteratorYieldResult(h,new h.FetchListResult(h,R,_,a)))})}}(e),t))}{let r=new this.FetchListParameters(this,t,s,n,_,a),l=this.dataProvider[i._FETCHFIRST](r)[Symbol.asyncIterator]();return new this.AsyncIterable(this,new this.AsyncIterator(this,function(e,s){return function(){return s.next().then(function(r){let n=r[i._VALUE][i._DATA],l=r[i._VALUE][i._METADATA],a=n.map(function(t,e){return new h.Item(h,l[e],n[e])});h._noFilterSupport&&h._filterResult(_,a);let E=h._getMappedItems(a);h._cacheResult(e,E),e[i._DONE]=r[i._DONE];let T=null!=t?t[i._SIZE]:null,u=(null!=t&&t[i._OFFSET],r[i._VALUE][i._FETCHPARAMETERS]),o=null!=u?u[i._SORTCRITERIA]:null,A=null!=u?u[i._FILTERCRITERION]:null,R=h._getUnmappedSortCriteria(o),c=h._getUnmappedFilterCriterion(A),I=new h.FetchListParameters(h,t,T,R,c);return h._fetchUntilKey(I,h[i._FROM],e,s).then(function(){return h._fetchUntilOffset(I,h[i._OFFSET]+e[i._STARTINDEX],n.length,e,s)})})}}(e,l),t))}}getCapability(t){return this.dataProvider.getCapability(t)}getTotalSize(){return this.dataProvider.getTotalSize()}isEmpty(){return this.dataProvider.isEmpty()}_fetchNextSet(e,s,r){let n=this;return s.next().then(function(l){var _=l[i._VALUE],a=_[i._DATA],h=_[i._METADATA],E=h.map(function(t){return t[i._KEY]});let T=!0;return e[i._KEYS].forEach(function(e){r.has(e)||E.map(function(s,i){t.Object.compareValues(s,e)&&r.set(e,new n.Item(n,h[i],a[i]))}),r.has(e)||(T=!1)}),T||l[i._DONE]?r:n._fetchNextSet(e,s,r)})}_fetchUntilKey(e,s,r,n){let l=this;if(null!=s){let e=r[i._ITEMS].filter(function(e){if(t.KeyUtils.equals(e[i._METADATA][i._KEY],s))return!0});if(e.length>0){let t=r[i._ITEMS].indexOf(e[0]);r[i._ITEMS]=r[i._ITEMS].slice(t,r[i._ITEMS].length)}else{if(!r[i._DONE])return n.next().then(function(t){let e=t[i._VALUE][i._DATA],s=t[i._VALUE][i._METADATA],_=e.map(function(t,i){return new l.Item(l,s[i],e[i])}),a=l._getMappedItems(_);return l._cacheResult(r,a),r[i._DONE]=t[i._DONE],l._fetchUntilKey(t[i._FETCHPARAMETERS],a[i._KEYS],r,n)});r[i._ITEMS]=[]}}return Promise.resolve(null)}_fetchUntilOffset(t,e,s,r,n){let l=this,_=null!=t&&t[i._SIZE]>0?t[i._SIZE]:s;e=e>0?e:0;let a=r[i._ITEMS].slice(e,e+_);if(this._noFilterSupport){let e=this._getMappedFilterCriterion(t[i._FILTERCRITERION]);this._filterResult(e,a)}if(a.length<_){if(r[i._DONE]){r[i._STARTINDEX]=r[i._STARTINDEX]+a.length;let e=a.map(function(t){return t[i._DATA]}),s=a.map(function(t){return t[i._METADATA]});return Promise.resolve(new l.AsyncIteratorReturnResult(l,new l.FetchListResult(l,t,e,s)))}return n.next().then(function(s){let _=s[i._VALUE][i._DATA],a=s[i._VALUE][i._METADATA],h=_.map(function(t,e){return new l.Item(l,a[e],_[e])});if(l._noFilterSupport){let e=l._getMappedFilterCriterion(t[i._FILTERCRITERION]);l._filterResult(e,h)}let E=l._getMappedItems(h);return l._cacheResult(r,E),r[i._DONE]=s[i._DONE],l._fetchUntilOffset(s[i._VALUE][i._FETCHPARAMETERS],e,_.length,r,n)})}{r[i._STARTINDEX]=r[i._STARTINDEX]+a.length;let e=a.map(function(t){return t[i._DATA]}),s=a.map(function(t){return t[i._METADATA]});return r[i._DONE]?Promise.resolve(new l.AsyncIteratorReturnResult(l,new l.FetchListResult(l,t,e,s))):Promise.resolve(new l.AsyncIteratorYieldResult(l,new l.FetchListResult(l,t,e,s)))}}_cacheResult(t,e){e.map(function(e){t[i._ITEMS].push(e)})}_filterResult(t,e){if(t){t.filter||(t=s.FilterFactory.getFilter({filterDef:t}));let r=e.length-1;for(;r>=0;)t.filter(e[r][i._DATA])||e.splice(r,1),r--}}_getMappedItems(t){let e=this;if(null!=this[i._DATAMAPPING]){let s=this[i._DATAMAPPING][i._MAPFIELDS];if(null!=s&&null!=t&&t.length>0){let i=new Array;return i=t.map(function(t){return s.bind(e)(t)})}}return t}_getMappedFilterCriterion(t){if(null!=this[i._DATAMAPPING]){let e=this[i._DATAMAPPING][i._MAPFILTERCRITERION];if(null!=e&&null!=t)return e(t)}return t}_getMappedSortCriteria(t){if(null!=this[i._DATAMAPPING]){let e=this[i._DATAMAPPING][i._MAPSORTCRITERIA];if(null!=e&&null!=t&&t.length>0)return e(t)}return t}_getUnmappedSortCriteria(t){if(null!=this[i._DATAMAPPING]){let e=this[i._DATAMAPPING][i._UNMAPSORTCRITERIA];if(null!=e&&null!=t&&t.length>0)return e(t)}return t}_getUnmappedFilterCriterion(t){if(null!=this[i._DATAMAPPING]){let e=this[i._DATAMAPPING][i._UNMAPFILTERCRITERION];if(null!=e&&null!=t)return e(t)}return t}_addEventListeners(t){let e=this;t[i._ADDEVENTLISTENER](i._REFRESH,function(t){e.dispatchEvent(t)}),t[i._ADDEVENTLISTENER](i._MUTATE,function(t){e.dispatchEvent(t)})}}
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
return i._KEY="key",i._KEYS="keys",i._DATA="data",i._STARTINDEX="startIndex",i._SORT="sort",i._SORTCRITERIA="sortCriteria",i._FILTERCRITERION="filterCriterion",i._METADATA="metadata",i._ITEMS="items",i._FROM="from",i._OFFSET="offset",i._REFRESH="refresh",i._MUTATE="mutate",i._SIZE="size",i._FETCHPARAMETERS="fetchParameters",i._VALUE="value",i._DONE="done",i._DATAMAPPING="dataMapping",i._MAPFIELDS="mapFields",i._MAPSORTCRITERIA="mapSortCriteria",i._MAPFILTERCRITERION="mapFilterCriterion",i._UNMAPSORTCRITERIA="unmapSortCriteria",i._UNMAPFILTERCRITERION="unmapFilterCriterion",i._RESULTS="results",i._CONTAINSPARAMETERS="containsParameters",i._DEFAULT_SIZE=25,i._CONTAINSKEYS="containsKeys",i._FETCHBYKEYS="fetchByKeys",i._FETCHBYOFFSET="fetchByOffset",i._FETCHFIRST="fetchFirst",i._ADDEVENTLISTENER="addEventListener",i._FETCHATTRIBUTES="attributes",t.ListDataProviderView=i,t.ListDataProviderView=i,t.EventTargetMixin.applyMixin(i),i});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojtreedataproviderview',["ojs/ojcore","jquery","ojs/ojlistdataproviderview","ojs/ojcomponentcore","ojs/ojeventtarget","ojs/ojdataprovider"],function(t,e,i){"use strict";class r{constructor(t,e){this.dataProvider=t,this.options=e,this._listDataProviderView=new i(t,e)}getChildDataProvider(t,e){let i=this.dataProvider.getChildDataProvider(t,e);return i?new r(i,this.options):null}containsKeys(t){return this._listDataProviderView.containsKeys(t)}fetchByKeys(t){return this._listDataProviderView.fetchByKeys(t)}fetchByOffset(t){return this._listDataProviderView.fetchByOffset(t)}fetchFirst(t){return this._listDataProviderView.fetchFirst(t)}getCapability(t){return this._listDataProviderView.getCapability(t)}getTotalSize(){return this._listDataProviderView.getTotalSize()}isEmpty(){return this._listDataProviderView.isEmpty()}addEventListener(t,e){this._listDataProviderView.addEventListener(t,e)}removeEventListener(t,e){this._listDataProviderView.removeEventListener(t,e)}dispatchEvent(t){return this._listDataProviderView.dispatchEvent(t)}}
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
return t.TreeDataProviderView=r,t.TreeDataProviderView=r,r});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojconverterutils',["ojs/ojlogger"],function(e){"use strict";class t{}return t.getConverterInstance=function(t){let o="",r={},n=null;if(t&&("object"==typeof t&&(t.parse&&"function"==typeof t.parse||t.format&&"function"==typeof t.format?n=t:(o=t.type,r=t.options||{})),!n&&(o=o||t)&&"string"==typeof o)){if(oj.Validation&&oj.Validation.converterFactory)return oj.Validation.converterFactory(o).createConverter(r);e.error('oj.Validation.converterFactory is not available and it is needed to support the deprecated json format for the converters property. Please include the backward compatibility "ojvalidation-base" module.')}return n},t});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojvalidator',["ojs/ojcore"],function(t){"use strict";var c=function(t){this.Init(t)};return t.Object.createSubclass(c,t.Object,"oj.Validator"),c.prototype.Init=function(t){c.superclass.Init.call(this)},c});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojvalidation-error',["ojs/ojcore","ojs/ojmessaging"],function(r,t){"use strict";r.ConverterError=function(r,e){var o={summary:r,detail:e,severity:t.SEVERITY_LEVEL.ERROR};this.Init(o)},r.ConverterError.prototype=new Error,r.ConverterError.prototype.Init=function(r){var t=r.detail,e=r.summary;this._message=r,this.name="Converter Error",this.message=t||e},r.ConverterError.prototype.getMessage=function(){return this._message},r.ValidatorError=function(r,e){var o={summary:r,detail:e,severity:t.SEVERITY_LEVEL.ERROR};this.Init(o)},r.ValidatorError.prototype=new Error,r.ValidatorError.prototype.Init=function(r){var t=r.detail,e=r.summary;this._message=r,this.name="Validator Error",this.message=t||e},r.ValidatorError.prototype.getMessage=function(){return this._message}});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojvalidator-required',["ojs/ojcore","ojs/ojtranslation","ojs/ojvalidator","ojs/ojvalidation-error"],function(t,e,i){"use strict";var o=function(t){this.Init(t)};return t.Object.createSubclass(o,i,"oj.RequiredValidator"),o._BUNDLE_KEY_DETAIL="oj-validator.required.detail",o._BUNDLE_KEY_SUMMARY="oj-validator.required.summary",o.prototype.Init=function(t){o.superclass.Init.call(this),this._options=t},o.prototype.validate=function(i){var o,r,n,a,s,l="";if(null==i||("string"==typeof i||i instanceof Array)&&0===i.length)throw this._options&&(o=this._options.messageDetail||this._options.message||null,a=this._options.messageSummary||null,l=this._options.label||""),s={label:l},n=a?e.applyParameters(a,s):e.getTranslatedString(this._getSummaryKey(),s),r=o?e.applyParameters(o,s):e.getTranslatedString(this._getDetailKey(),s),new t.ValidatorError(n,r)},o.prototype.getHint=function(){var t="";return this._options&&this._options.hint&&(t=e.getTranslatedString(this._options.hint)),t},o.prototype._getSummaryKey=function(){return o._BUNDLE_KEY_SUMMARY},o.prototype._getDetailKey=function(){return o._BUNDLE_KEY_DETAIL},o});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojeditablevalue',["ojs/ojcore","jquery","hammerjs","ojs/ojtranslation","ojs/ojcontext","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojanimation","ojs/ojmessaging","ojs/ojconverterutils","ojs/ojvalidator-required","ojs/ojlogger","ojs/ojlabelledbyutils","ojs/ojvalidation-error","ojs/ojjquery-hammer","ojs/ojpopup","ojs/ojlabel"],function(e,t,i,n,s,a,o,l,r,d,u,h,p){"use strict";e.EditableValueUtils={},e.EditableValueUtils.validationContext={COMPONENT_CREATE:1,CONVERTER_OPTION_CHANGE:2,DISABLED_OPTION_CHANGE:3,READONLY_OPTION_CHANGE:4,REFRESH_METHOD:5,REQUIRED_OPTION_CHANGE:6,RESET_METHOD:7,USER_ACTION:8,VALIDATE_METHOD:9,VALIDATORS_OPTION_CHANGE:10,VALUE_OPTION_CHANGE:11},e.EditableValueUtils.validateMethodOptions={doValueChangeCheck:!1,validationContext:e.EditableValueUtils.validationContext.VALIDATE_METHOD},e.EditableValueUtils.converterOptionOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:e.EditableValueUtils.validationContext.CONVERTER_OPTION_CHANGE},e.EditableValueUtils.disabledOptionOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:e.EditableValueUtils.validationContext.DISABLED_OPTION_CHANGE},e.EditableValueUtils.requiredOptionOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:e.EditableValueUtils.validationContext.REQUIRED_OPTION_CHANGE},e.EditableValueUtils.readOnlyOptionOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:e.EditableValueUtils.validationContext.READONLY_OPTION_CHANGE},e.EditableValueUtils.refreshMethodOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:e.EditableValueUtils.validationContext.REFRESH_METHOD},e.EditableValueUtils.validatorsOptionOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:e.EditableValueUtils.validationContext.VALIDATORS_OPTION_CHANGE};e.EditableValueUtils.VALIDATE_VALUES={VALID:"valid",INVALID:"invalid"},e.EditableValueUtils.getAttributeValue=function(e,t){var i,n={};if(e&&t){var s=e[0];switch(t){case"disabled":i=s.hasAttribute("disabled")?!!s.disabled:void 0;break;case"pattern":i=s.pattern||void 0;break;case"placeholder":i=s.placeholder||void 0;break;case"readonly":i=s.hasAttribute("readonly")?!!s.readOnly:void 0;break;case"required":if(s.hasAttribute("required")){var a=s.required;i=void 0===a||!!a}else i=void 0;break;case"title":i=s.hasAttribute("title")?s.title:void 0;break;case"value":i=e.val()||void 0;break;case"min":case"max":default:i=s.getAttribute(t)||void 0}}return void 0!==i?(n.fromDom=!0,n.value=i):n.fromDom=!1,n},e.EditableValueUtils.initializeOptionsFromDom=function(t,i,n,s){for(var a={},o=0;o<t.length;o++){var l,r,d=t[o],u=d.attribute,h=d.option||u,p=d.coerceDomValue,g=d.validateOption,c=n.element,_=n.options[h];void 0===i[h]&&(_=n.options[h],(r=e.EditableValueUtils.getAttributeValue(c,u)).fromDom&&(l=r.value,p&&("boolean"==typeof p?l=e.EditableValueUtils.coerceDomValueForOption(h,l):"function"==typeof p&&(l=p.call(n,l))),a[h]=l));var y=h in a?a[h]:_;g&&"boolean"==typeof g&&e.EditableValueUtils.validateValueForOption(h,y)}null!=s&&s(a),n.option(a,{_context:{writeback:!0,internalSet:!0}})},e.EditableValueUtils.validateValueForOption=function(e,t){var i=!1;switch(e){case"required":null!==t&&"boolean"!=typeof t&&(i=!0);break;case"readOnly":case"disabled":null!==t&&"boolean"!=typeof t&&(i=!0)}if(i)throw new Error("Option '"+e+"' has invalid value set: "+t)},e.EditableValueUtils.coerceDomValueForOption=function(e,t){var i=t;switch(e){case"required":i=!!t}return i},e.EditableValueUtils.setPickerAttributes=function(e,t){if(e&&t){var i=t.class;if(i)for(var n=i.split(" "),s=0,a=n.length;s<a;++s)e[0].classList.add(n[s]);var o=t.style;if(o){var l=e[0],r=l.getAttribute("style");r?l.setAttribute("style",r+";"+o):l.setAttribute("style",o)}}},e.EditableValueUtils.hasNoLabelFlag=function(e){return e[0].hasAttribute("data-oj-no-labelledby")},e.EditableValueUtils._getOjLabelAriaLabelledBy=function(t,i){var n,s=e.EditableValueUtils._getCustomOjLabelElements(t);if(s){n="";for(var a=0;a<s.length;a++){var o=s[a],l=o.getAttribute("label-id");if(!l){var r=o.querySelector("label");r?l=r.getAttribute("id"):(o.setAttribute("label-id",i),l=i)}n+=l,a+1<s.length&&(n+=" ")}}return n},e.EditableValueUtils._getCustomOjLabelElements=function(e){var t=[];if(e)for(var i=e.split(/\s+/),n=0;n<i.length;n++){var s=i[n],a=document.getElementById(s);a?t.push(a):h.info("Cannot find oj-label with id "+a)}return t},e.EditableValueUtils._initInputIdLabelForConnection=function(e,t,i){t&&(e.setAttribute("id",t+"|input"),i&&this._linkLabelForInputComp(i,e.id)),i&&this._setReadonlyDivLabelledBy(i)},e.EditableValueUtils._labelledByUpdatedForInputComp=function(e,t){e&&(t&&this._linkLabelForInputComp(e,t),this._setReadonlyDivLabelledBy(e)),this._IsRequired()&&this.options.translations.required&&(this._implicitReqValidator=null,this._getImplicitRequiredValidator())},e.EditableValueUtils._linkLabelForInputComp=function(t,i){var n=e.EditableValueUtils._getCustomOjLabelElements(t);n&&e.EditableValueUtils._setDataOjInputIdAttrOnLabel(i,n)},e.EditableValueUtils._setReadonlyDivLabelledBy=function(t){e.Assert.assert(t);let i=this._getReadonlyDiv();i&&i.setAttribute("aria-labelledby",t+"|label")},e.EditableValueUtils._createOrUpdateReadonlyDiv=function(e,t=!0){let i=this._getReadonlyDiv();!i&&t&&(i=this._createReadonlyDiv(e),this.options.labelledBy&&this._setReadonlyDivLabelledBy(this.options.labelledBy),this._setAriaLabelFromLabelHint()),i&&(i.textContent=this._GetDisplayValue())},e.EditableValueUtils._setDataOjInputIdAttrOnLabel=function(e,t){if(t)for(var i=0;i<t.length;i++){t[i].setAttribute("data-oj-input-id",e)}},e.EditableValueUtils.validate=function(){var e;if(e=this._SetValue(this._GetDisplayValue(),null,this._VALIDATE_METHOD_OPTIONS),this._IsCustomElement()){if(e instanceof Promise)return e.then(function(e){return Promise.resolve(e?"valid":"invalid")});e=Promise.resolve(e?"valid":"invalid")}else if(e instanceof Promise)return e.then(function(e){return Promise.resolve(e?"valid":"invalid")});return e},e.EditableValueUtils._refreshRequired=function(e){var t,i,n,s=this._AriaRequiredUnsupported();if(this._refreshTheming("required",e),s||(i=this._GetContentElement(),(n=e)&&i?i[0].setAttribute("aria-required",n):i[0].removeAttribute("aria-required")),!this._IsCustomElement()&&(this.$label||this._createOjLabel(),this.$label&&(this.$label.ojLabel("option","showRequired",e),s))){var a=this._getAriaLabelledByElement(this.element);if(null!==a&&0!==a.length&&(t=a[0].getAttribute("id")),t){let i=t+"_requiredIcon";e?this._describedByUpdated(null,i):this._describedByUpdated(i,null)}}},e.EditableValueUtils._AfterSetOptionRequired=function(t){this._refreshRequired(this._IsRequired()),this._runMixedValidationAfterSetOption(e.EditableValueUtils.requiredOptionOptions)},e.EditableValueUtils._AfterSetOptionValidators=function(){var t;this._ResetAllValidators(),this._hasInvalidMessagesShowing()&&(this._clearComponentMessages(),t=this._GetDisplayValue(),this._SetValue(t,null,e.EditableValueUtils.validatorsOptionOptions))},e.EditableValueUtils._AfterSetOptionAsyncValidators=function(){this._AfterSetOptionValidators()},e.EditableValueUtils._AfterSetOptionConverter=function(){this._converter=null,this._converterChangedCounter+=1;var e=this._GetConverter();if(e instanceof Promise){var t=this;this._setBusyStateAsyncConverterLoading();var i=this._converterChangedCounter;this._loadingConverter(e).then(function(){i===t._converterChangedCounter&&t._ResetConverter(),t._clearBusyStateAsyncConverterLoading()})}else this._ResetConverter()},e.EditableValueUtils._AfterCreateConverterCached=function(){this._HasPlaceholderSet()&&(this._SetPlaceholder(this.options.placeholder),this._customPlaceholderSet=!0),this._initComponentMessaging(this._MESSAGING_CONTENT_UPDATE_TYPE.ALL),this._Refresh("value",this.options.value,!1),this.options.messagesShown.length>0&&this._setMessagesOption("messagesShown",this.options.messagesShown,null,!0)},e.EditableValueUtils._ResetConverter=function(){var t;this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.CONVERTER_HINT)),this._hasInvalidMessagesShowing()?(this._clearComponentMessages(),t=this._GetDisplayValue(),this._SetValue(t,null,e.EditableValueUtils.converterOptionOptions)):this._Refresh("converter",this.options.converter,!0)},e.EditableValueUtils._GetNormalizedValidatorsFromOption=function(){var t,i,n,s,a,o,l=!0,r=[];if(n=this.options.validators)for(t=0;t<n.length;t++)"object"==typeof(i=n[t])?(i.validate&&"function"==typeof i.validate||(l=!1),l||(o=i.type)&&"string"==typeof o&&(e.Validation&&e.Validation.validatorFactory?a=e.Validation.validatorFactory(o):h.error('oj.Validation.validatorFactory is not available and it is needed to support the deprecated json format for validators property. Please include the backward compatibility "ojvalidation-base" module.'),a&&((s=e.CollectionUtils.copyInto({},i.options)||{}).converter=s.converter||this._GetConverter(),s.label=s.label||this._getLabelText(),i=a.createValidator(s))),r.push(i)):h.error("Unable to parse the validator provided:"+i);return r},e.EditableValueUtils._GetNormalizedAsyncValidatorsFromOption=function(){var e,t,i,n=[];for(i=this.options.asyncValidators,e=0;e<i.length;e++)"object"==typeof(t=i[e])?t.validate&&"function"==typeof t.validate&&n.push(t):h.error("Unable to parse the validator provided:"+t);return n},e.EditableValueUtils._GetConverter=function(){var e,t,i,n=this;if(!this._converter){if((e=this.options.converter)instanceof Promise?i=e:t=d.getConverterInstance(e),i)return i.then(function(e){return n._converter=e,n._converter||null});this._converter=t}return this._converter||null},e.EditableValueUtils._SetBusyState=function(e){void 0===this._resolveBusyStateAsyncMap&&(this._resolveBusyStateAsyncMap=new Map);var t=this._resolveBusyStateAsyncMap.get(e);if(!t){var i=this.element[0],n=s.getContext(i).getBusyContext(),a="The page is waiting for async validators for displayValue "+e;i&&i.id&&(a+=' for "'+i.id+'" '),a+="to finish.",t=n.addBusyState({description:a}),this._resolveBusyStateAsyncMap.set(e,t)}},e.EditableValueUtils._ClearBusyState=function(e){var t;void 0!==this._resolveBusyStateAsyncMap&&(t=this._resolveBusyStateAsyncMap.get(e))&&(t(),this._resolveBusyStateAsyncMap.delete(e))},e.EditableValueUtils._SetBusyStateAsyncValidatorHint=function(e){void 0===this._resolveBusyStateAsyncValidatorHintMap&&(this._resolveBusyStateAsyncValidatorHintMap=new Map);var t=this._resolveBusyStateAsyncValidatorHintMap.get(e);if(!t){var i=this.element[0],n=s.getContext(i).getBusyContext(),a="The page is waiting for async validator hint for counter "+e;i&&i.id&&(a+=' for "'+i.id+'" '),a+="to finish.",t=n.addBusyState({description:a}),this._resolveBusyStateAsyncValidatorHintMap.set(e,t)}},e.EditableValueUtils._ClearBusyStateAsyncValidatorHint=function(e){var t;void 0!==this._resolveBusyStateAsyncValidatorHintMap&&(t=this._resolveBusyStateAsyncValidatorHintMap.get(e))&&(t(),this._resolveBusyStateAsyncValidatorHintMap.delete(e))},e.EditableValueUtils._SetBusyStateAsyncConverterLoading=function(){if(!this._resolveBusyStateAsyncConverterLoading){var e=this.element[0],t=s.getContext(e).getBusyContext(),i="The page is waiting for async converter loading ";e&&e.id&&(i+='for "'+e.id+'" '),i+="to finish.",this._resolveBusyStateAsyncConverterLoading=t.addBusyState({description:i})}},e.EditableValueUtils._ClearBusyStateAsyncConverterLoading=function(){void 0!==this._resolveBusyStateAsyncConverterLoading&&(this._resolveBusyStateAsyncConverterLoading(),delete this._resolveBusyStateAsyncConverterLoading)},e.EditableValueUtils._getShowLoadingDelay=function(){null==this._defaultOptions&&(this._defaultOptions=a.parseJSONFromFontFamily("oj-form-control-option-defaults"));var e=parseInt(this._defaultOptions.showIndicatorDelay,10);return isNaN(e)?0:e},e.EditableValueUtils._SetInputType=function(t){var i="text",n=e.AgentUtils.getAgentInfo();if(n.os===e.AgentUtils.OS.ANDROID||n.os===e.AgentUtils.OS.IOS||n.os===e.AgentUtils.OS.WINDOWSPHONE)if(t.indexOf(this.options.virtualKeyboard)>=0)i=this.options.virtualKeyboard;else{var s=this._GetConverter();if(s&&s.resolvedOptions){var a=s.resolvedOptions();t.indexOf(a.virtualKeyboardHint)>=0&&(i=a.virtualKeyboardHint)}}null==i?this.element[0].removeAttribute("type"):this.element[0].setAttribute("type",i)},e.EditableValueUtils._createReadonlyDiv=function(e){if(this._UseReadonlyDiv()){var t=document.createElement("div");t.classList.add("oj-text-field-readonly-div");var i=document.createElement("div");return i.classList.add("oj-text-field-readonly"),i.setAttribute("tabindex","0"),i.setAttribute("role","textbox"),i.setAttribute("aria-readonly",!0),t.appendChild(i),e.parentNode.insertBefore(t,e),i}return null},e.EditableValueUtils._getReadonlyDiv=function(){return this.widget()[0].querySelector(".oj-text-field-readonly")};var g=function(e){this.Init(e)};e.Object.createSubclass(g,e.MessagingStrategy,"BaseInsidelLabelStrategy"),g.prototype._GetFormControlLabelStyleClass=function(){return"oj-form-control-label-inside"},g.prototype._CreateLabel=function(){var e=this.GetComponent(),t=this._GetContainer(e);if(!t)return;var i=e.options,n=e._getRootElement(),s=this._GetFormControlLabelStyleClass();n.classList.add(s),this.GenerateIdIfNeeded(n),this._showUserAssistanceNotInline=e._showUserAssistanceNotInline();let a=i.required&&this._showUserAssistanceNotInline;this._createOjLabelElement(n,e,t,i.labelHint,a,i.helpHints,this._showUserAssistanceNotInline)},g.prototype._createOjLabelElement=function(e,t,i,n,s,a,o){var l=document.createElement("oj-label");l.id=g._getLabelId(e),l.setAttribute("data-oj-binding-provider","none"),l.setAttribute("data-oj-internal",""),l.setAttribute("for",e.id);var r=[t._GetDefaultStyleClass(),"label"].join("-");l.classList.add(r),s&&l.setAttribute("show-required",s),o&&a&&(l.help=a);var d=document.createElement("span");d.id=[e.id,"|hint"].join(""),d.innerText=n,l.appendChild(d),this._InsertOjLabel(l,i,t),this._CreateEventHandlers(d,e,l,t)},g.prototype._GetContainer=function(e){return e._GetFormControlContainer()},g.prototype._CreateEventHandlers=function(e,t,i,n){this._labelHintChangedCallback=g._labelHintChangedHandler.bind(this,e),t.addEventListener("labelHintChanged",this._labelHintChangedCallback),this._requiredChangedCallback=g._requiredChangedHandler.bind(this,i,n),t.addEventListener("requiredChanged",this._requiredChangedCallback),this._helpHintsChangedCallback=g._helpHintsChangedHandler.bind(this,i,n),t.addEventListener("helpHintsChanged",this._helpHintsChangedCallback)},g.prototype._DestroyLabel=function(){var e=this.GetComponent(),t=e.options,i=e._getRootElement(),n=this._GetFormControlLabelStyleClass();i.classList.remove(n);var s=g._getLabelId(i),a=document.getElementById(s);a&&(a.for="",a.parentElement.removeChild(a)),t.labelledBy=void 0,this._DeleteEventHandlers(i)},g.prototype._DeleteEventHandlers=function(e){e.removeEventListener("labelHintChanged",this._labelHintChangedCallback),e.removeEventListener("requiredChanged",this._requiredChangedCallback),e.removeEventListener("helpHintsChanged",this._helpHintsChangedCallback),delete this._helpHintsChangedCallback,delete this._labelHintChangedCallback,delete this._requiredChangedCallback},g._getLabelId=function(e){return[e.id,"-labelled-by"].join("")},g._labelHintChangedHandler=function(e,t){e.innerText=t.detail.value},g._requiredChangedHandler=function(e,t,i){null==this._showUserAssistanceNotInline&&(this._showUserAssistanceNotInline=t._showUserAssistanceNotInline()),e.showRequired=i.detail.value&&this._showUserAssistanceNotInline},g._helpHintsChangedHandler=function(e,t,i){this._showUserAssistanceNotInline=t._showUserAssistanceNotInline(),this._showUserAssistanceNotInline&&(e.help=i.detail.value)};var c="invalidShown";e.__registerWidget("oj.editableValue",t.oj.baseComponent,{widgetEventPrefix:"oj",options:{describedBy:null,disabled:!1,displayOptions:{},help:void 0,helpHints:{definition:"",source:""},labelHint:"",labelEdge:void 0,messagesCustom:[],messagesHidden:void 0,messagesShown:void 0,title:"",userAssistanceDensity:"reflow",valid:void 0,value:void 0,animateStart:null,animateEnd:null},getNodeBySubId:function(e){var t;if(!(t=this._super(e))&&!this._IsCustomElement()&&"oj-label-help-icon"===e.subId){var i=this._GetLabelElement();i&&(t=i.parent().find(".oj-label-help-icon"))}return t||null},getSubIdByNode:function(e){var i,n,s,a=null;return null!=e&&null!=(i=t(e).closest("a.oj-label-help-icon"))&&null!=(n=i.closest(".oj-label"))&&(s=n.find("label")[0])&&s===this._GetLabelElement()[0]&&(a={subId:"oj-label-help-icon"}),a},isValid:function(){return void 0===this._valid&&(this._valid=!this._hasInvalidMessages()),this._valid},refresh:function(){this._super(),this._doRefresh()},reset:function(){this._clearAllMessages(),this._runDeferredValidation(this._VALIDATION_CONTEXT.RESET_METHOD),this._refreshComponentDisplayValue(this.options.value,!0)},showMessages:function(){var t,i,n,s=[],a=this.options.messagesHidden,o=a.length>0;for(t=0;t<a.length;t++)(i=a[t])instanceof e.ComponentMessage?(i._forceDisplayToShown(),n=i.clone()):n=new r(i.summary,i.detail,i.severity),s.push(n);o&&(this._clearMessages("messagesHidden"),this._updateMessagesOption("messagesShown",s),this._setValidOption(c,null))},_VALIDATION_MODE:{FULL:1,VALIDATORS_ONLY:2,REQUIRED_VALIDATOR_ONLY:3},_VALIDATION_CONTEXT:e.EditableValueUtils.validationContext,_VALIDATE_METHOD_OPTIONS:e.EditableValueUtils.validateMethodOptions,_InitOptions:function(e,t){this._super(e,t)},_ComponentCreate:function(){var e=this.element,t=this._GetSavedAttributes(e);if(this._super(),this.options.messagesCustom=this.options.messagesCustom||[],this.options.messagesHidden=[],this.options.messagesShown=this.options.messagesCustom.length>0?this._cloneMessagesBeforeSet(this.options.messagesCustom):[],this._SetDisabledDom(e),t&&!this._IsCustomElement()){var i=e[0].tagName.toLowerCase();"input"!==i&&"textarea"!==i||["required","title","pattern"].forEach(function(i){i in t&&e.removeAttr(i)})}},_AfterCreate:function(){var e,t=this;this._super(),this._refreshTheming("disabled",this.options.disabled),this.widget()[0].classList.add("oj-form-control"),this._IsTextFieldComponent()&&(this._IsCustomElement()?this._getRootElement().classList.add("oj-text-field"):this.widget()[0].classList.add("oj-text-field")),this._toggleOjHasNoValueClass(),this.widget().uniqueId(),this._IsCustomElement()?this.options.labelledBy?this._labelledByUpdated(this.options.labelledBy):this._setAriaLabelFromLabelHint():this._createOjLabel(),(e=this.options.describedBy)&&this._describedByUpdated(null,e),this._runDeferredValidation(this._VALIDATION_CONTEXT.COMPONENT_CREATE);var i=this._GetConverter();this._converterChangedCounter=0,i instanceof Promise?(this._setBusyStateAsyncConverterLoading(),this._ResolveLabelEdgeStrategyType(),this._loadingConverter(i).then(function(){t._AfterCreateConverterCached(),t._clearBusyStateAsyncConverterLoading()})):(this._AfterCreateConverterCached(),this._setValidOption(this._determineValidFromMessagesOptions(),null))},_SaveAttributes:function(e){this._IsCustomElement()||this._SaveAllAttributes(e)},_RestoreAttributes:function(e){this._IsCustomElement()||this._RestoreAllAttributes(e)},_AfterSetOption:function(t,i){switch(t){case"disabled":this._AfterSetOptionDisabledReadOnly(t,e.EditableValueUtils.disabledOptionOptions);break;case"displayOptions":this._initComponentMessaging();break;case"labelEdge":this._initComponentMessaging(),this._setAriaLabelFromLabelHint();break;case"labelHint":this._setAriaLabelFromLabelHint();break;case"help":this._IsCustomElement()?this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.TITLE)):this._Refresh(t,this.options[t]);break;case"messagesCustom":this._messagesCustomOptionChanged(i),this._setValidOption(this._determineValidFromMessagesOptions(),null);break;case"placeholder":this._SetPlaceholder(this.options.placeholder),this._placeholderOptionChanged(i);break;case"title":this._IsCustomElement()||this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.TITLE));break;case"translations":this.refresh();break;case"userAssistanceDensity":this._initComponentMessaging();break;case"value":this._AfterSetOptionValue(t,i)}},_AfterSetOptionDisabledReadOnly:function(e,t){var i=!this.options[e];this._Refresh(e,this.options[e]),i&&this._runMixedValidationAfterSetOption(t)},_AfterSetOptionValue:function(e,t){var i,n=t?t._context:null,s=!1;n&&(s=!!n.originalEvent,i=n.doNotClearMessages||!1),s||(i||this._clearAllMessages(null),this._runDeferredValidation(this._VALIDATION_CONTEXT.VALUE_OPTION_CHANGE)),this._Refresh(e,this.options[e],!0)},_CanSetValue:function(){return!(this.options.disabled||!1)},_destroy:function(){var e,i,n=this._super();if(this._clearAllMessages(null,!0),this.widget().removeUniqueId(),this._getComponentMessaging()._isActive()&&this._getComponentMessaging().deactivate(),this.$label)for(i=this.$label.length,e=0;e<i;e++)this.$label[e]&&null!=o.__GetWidgetConstructor(this.$label[e])&&t(this.$label[e]).ojLabel("destroy");return n},GetFocusElement:function(){return this._GetContentElement()[0]},_setOption:function(e,t,i){var n,s,a,o=!1;switch(e){case"messagesHidden":case"messagesShown":case"rawValue":o=!0;break;case"describedBy":s=this.options.describedBy,a=t,this._describedByUpdated(s,a);break;case"labelledBy":t&&this._labelledByUpdated(t);break;case"readOnly":this._addRemoveOjReadOnlyClassOnLabel(document.getElementById(this.options.labelledBy),t)}return o?(h.error(e+" option cannot be set"),this):(n=this._superApply(arguments),this._AfterSetOption(e,i),n)},_GetContentElement:function(){return this.element},_GetLabelElement:function(){if(this._IsCustomElement())return null;var i;if(this.$label)return this.$label;if(e.EditableValueUtils.hasNoLabelFlag(this.widget()))return null;var n=this._getAriaLabelledByElement(this.element);if(null!==n&&0!==n.length)return n;var s=this.element[0].id;return void 0!==s&&0!==(n=t("label[for='"+s+"']")).length?n:0!==(i=this.element.closest("[aria-labelledby]")).length&&null!==(n=this._getAriaLabelledByElement(i))&&0!==n.length?n:null},_GetElementValue:function(){return this.element.val()},_GetMessagingLauncherElement:function(){return this._GetContentElement()},_GetConverter:function(){return null},_GetImplicitValidators:function(){return this._implicitSyncValidators||(this._implicitSyncValidators={}),this._implicitSyncValidators},_GetDisplayValue:function(e){return this._GetContentElement().val()},_GetNormalizedValidatorsFromOption:function(){return[]},_GetNormalizedAsyncValidatorsFromOption:function(){return[]},_GetAllValidatorsFromValidatorsOptionAndImplicit:function(){var e,t,i,n,s=[];if(!this._allValidators){t=this._GetImplicitValidators(),i=[];var a,o=Object.keys(t),l=o.length;if(l>0){for(e=0;e<l;e++)a=o[e],i.push(t[a]);s=s.concat(i)}(n=this._GetNormalizedValidatorsFromOption()).length>0&&n.forEach(function(e){s.push(e)}),this._allValidators=s}return this._allValidators},_ResetAllValidators:function(){this._allValidators&&(this._allValidators.length=0),this._allValidators=null,this._IsCustomElement()?this._updateValidatorMessagingHint():this._getComponentMessaging().update(this._getValidatorHintsMC())},_GetAriaLabelElement:function(){return this._getRootElement()},_addRemoveOjReadOnlyClassOnLabel:function(e,t){if(e&&void 0!==t){const i="oj-read-only";t?e.classList.add(i):e.classList.remove(i)}},_setAriaLabelFromLabelHint:function(){if(this._IsCustomElement()){var e=this._GetAriaLabelElement(),t=e.getAttribute("aria-label");let i=this._getReadonlyDiv();this.options.labelledBy||!this.options.labelHint||"none"!==this.options.labelEdge||t&&t!==this._ariaLabelFromHint||this._getRootElement().getAttribute("aria-labelledby")?this._ariaLabelFromHint&&this._ariaLabelFromHint===t?(e.removeAttribute("aria-label"),i&&i.removeAttribute("aria-label")):t?i&&i.setAttribute("aria-label",t):i&&i.removeAttribute("aria-label"):(e.setAttribute("aria-label",this.options.labelHint),i&&i.setAttribute("aria-label",this.options.labelHint),this._ariaLabelFromHint=this.options.labelHint)}},_getAllAsyncValidatorsWithHint:function(){var e,t,i=this._GetNormalizedAsyncValidatorsFromOption(),n=[];if(this._IsRequired()&&"hint"in(t=this._getImplicitRequiredValidator())&&n.push(t),i.length>0)for(e=0;e<i.length;e++)"hint"in(t=i[e])&&n.push(t);var s=this._GetAllValidatorsFromValidatorsOptionAndImplicit();if(s.length>0)for(e=0;e<s.length;e++)"hint"in(t=s[e])&&n.push(t);return n},_initAsyncValidatorMessagingHint:function(){var e,t,i=this._getAllAsyncValidatorsWithHint(),n=this;this._asyncValidatorHintCounter=0,i.length>0&&(t=this._getValidatorHintsMC(),e=this._asyncValidatorHintCounter,this._setBusyStateAsyncValidatorHint(e),this._addAsyncValidatorsHintsMessagingContent(i,t).then(function(){n._clearBusyStateAsyncValidatorHint(e)}))},_getValidatorHintsMC:function(){return this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDATOR_HINTS)},_updateValidatorMessagingHint:function(){var e,t=this._getAllAsyncValidatorsWithHint(),i=this._getComponentMessaging(),n=this,s=this._getValidatorHintsMC();t.length>0?(this._asyncValidatorHintCounter+=1,e=this._asyncValidatorHintCounter,this._setBusyStateAsyncValidatorHint(e),this._addAsyncValidatorsHintsMessagingContent(t,s).then(function(){n._clearBusyStateAsyncValidatorHint(e)})):i.update(s)},_addAsyncValidatorsHintsMessagingContent:function(e,t){var i,n=this._asyncValidatorHintCounter,s=this._getComponentMessaging(),a=[],o=this,l=[];for(i=0;i<e.length;i++)l.push(e[i].hint);function r(e){return e.then(function(e){var i,l={};return o._asyncValidatorHintCounter===n?(null!==e&&(a.push(e),l.validatorHint=t.validatorHint.concat(a),s.update(l)),i="resolved"):i="ignore",{v:e,status:i}},function(e){return{e:e,status:"rejected"}})}return new Promise(function(e){Promise.all(l.map(r)).then(function(){e(a)})})},_IsRequired:function(){return!1},_HandleChangeEvent:function(e){var t=this._GetDisplayValue();this._SetValue(t,e)},_SetRawValue:function(e,t){var i={};i._context={originalEvent:t,writeback:!0,internalSet:!0,readOnly:!0},this._CompareOptionValues("rawValue",this.options.rawValue,e)||this.option("rawValue",e,i)},_IsValueEmpty:function(t){return null==t||("string"==typeof t?e.StringUtils.isEmptyOrUndefined(t):"number"==typeof t?isNaN(t):!!Array.isArray(t)&&(0===t.length||1===t.length&&(null===t[0]||void 0===t[0])))},_toggleOjHasNoValueClass:function(e){let t=this._getRootElement();this._IsValueEmpty(e)?t.classList.add("oj-has-no-value"):t.classList.remove("oj-has-no-value")},_Refresh:function(e,t,i){var n,s;switch(e){case"converter":var a=this.options.value;this._refreshComponentDisplayValue(a,i);break;case"disabled":this._refreshTheming("disabled",this.options.disabled);break;case"help":if(!this._IsCustomElement()&&this.$label){n=this.options.help.definition,s=this.options.help.source,this.$label.ojLabel("option","help",{definition:n,source:s});var o=this.$label[0];if(o){let e=o.id;if(e){let t=e+"_helpIcon";null!=s||null!=n?this._describedByUpdated(null,t):this._describedByUpdated(t,null)}}}break;case"value":this._refreshComponentDisplayValue(t,i)}},_NotifyHidden:function(){this._superApply(arguments),this._getComponentMessaging().close()},_NotifyDetached:function(){this._superApply(arguments),this._getComponentMessaging().close()},_ResetComponentState:function(){this.$label&&this.$label.ojLabel("refresh"),this._implicitReqValidator=null,this._converter=null,this._ResetAllValidators()},_SetDisplayValue:function(e){var t=this._GetContentElement();t.val()!==e&&t.val(e)},_SetDisabledDom:function(e){"boolean"==typeof this.options.disabled&&(e[0].disabled=this.options.disabled)},_SetPlaceholder:function(e){var t=this._GetContentElement()[0];t&&(null==e?t.removeAttribute("placeholder"):t.setAttribute("placeholder",e))},_SetPlaceholderOption:function(e){this.options.placeholder=e},_HasPlaceholderSet:function(){return this.options.placeholder},_ClearPlaceholder:function(){this._SetPlaceholderOption(""),this._SetPlaceholder("")},_SetValue:function(e,t,i){var n,s,a,o=!i||"boolean"!=typeof i.doValueChangeCheck||i.doValueChangeCheck,l=this,r=!1;return this._toggleOjHasNoValueClass(e),void 0===e?(h.warn("Attempt to set a value of undefined"),!1):(o&&e===l._getLastDisplayValue()?h.level>h.LEVEL_WARN&&h.info((e.toString,e.toString())):(n=e+"_"+(this._asyncValidatorValidateCounter+1),(s=this._AsyncValidate(e,t,i,n))instanceof Promise?r=s.then(function(e){return a=e,l._afterAsyncValidateUpdateValue(e,t,i)}).then(function(){return l._clearBusyState(n),void 0!==a}):(this._afterAsyncValidateUpdateValue(s,t,i),r=void 0!==s)),r)},_ParseValueShowErrors:function(e,t){var i;this._clearAllMessages(t);try{return this._parseValue(e,t)}catch(e){i=this._processValidationErrors(e),this._updateMessagesOption("messagesShown",i,t),this._setValidOption(c,t)}},_AsyncValidate:function(e,t,i,n){var s,a,o,l=i&&i.validationMode?i.validationMode:this._VALIDATION_MODE.FULL,r=i&&i.validationContext?i.validationContext:this._VALIDATION_CONTEXT.USER_ACTION,d=i&&i.doNotClearMessages||!1;if(void 0!==e){if(this._CanSetValue()){d||this._clearAllMessages(t);try{return this._asyncValidatorValidateCounter+=1,l===this._VALIDATION_MODE.FULL?(this._setLastDisplayValue(e),a=this._parseValue(e,t,!0)):a=e,(o=this._asyncValidateValue(a,t,r))instanceof Promise?(this._setBusyState(n),o.then(function(e){if("valid"===e)return a})):o}catch(e){s=this._processValidationErrors(e,r),this._updateMessagesOption("messagesShown",s,t),this._setValidOption(c,t)}}else h.level>h.LEVEL_WARN&&h.info("Validation skipped and value option not set as component state does not  allow setting value. For example if the component is readonly or disabled.");return o}h.warn("Attempt to set a value of undefined")},_afterAsyncValidateUpdateValue:function(e,t,i){var n,s=!1;return void 0!==e&&(i&&!0===i.doNotClearMessages?this.isValid()||!this._hasInvalidComponentMessagesShowing():this.isValid())&&(i&&i._context&&(n=i._context),this._updateValueOption(e,t,i&&i.validationContext,n,i),s=!0),s},_CompareOptionValues:function(t,i,n){return"value"===t||"rawValue"===t?e.Object.compareValues(i,n):0===t.indexOf("messages")?this._messagesEquals(i,n):this._superApply(arguments)},_GetDefaultStyleClass:function(){return e.Assert.failedInAbstractFunction(),""},_MESSAGING_CONTENT_UPDATE_TYPE:{INIT:1,VALIDITY_STATE:2,CONVERTER_HINT:3,VALIDATOR_HINTS:4,TITLE:5},_OPTION_TO_CSS_MAPPING:{disabled:"oj-disabled",required:"oj-required"},_clearAllMessages:function(e,t){t?(this.options.messagesHidden=[],this.options.messagesShown=[],this.options.messagesCustom=[]):(this._clearMessages("messagesHidden",e),this._clearMessages("messagesShown",e),this._clearMessages("messagesCustom",e))},_clearComponentMessages:function(){var t,i=this.options.messagesShown;t=i.length,this._clearMessages("messagesHidden");for(var n=t-1;n>=0;n--)i[n]instanceof e.ComponentMessage&&i.splice(n,1);i.length!==t&&this._setMessagesOption("messagesShown",i,null,!0)},_setMessagesOption:function(e,t,i,n){var s={},a=0===t.length&&0===this.options[e].length;!n&&a||(s._context={originalEvent:i,writeback:!0,internalSet:!0},"messagesCustom"!==e&&(s._context.readOnly=!0),s.changed=n||!a,this._resetValid(),this.option(e,t,s),this._updateMessagingContent())},_setValidOption:function(e,t){var i={};"pending"===e&&"valid"!==this._determineValidFromMessagesOptions()||e!==this.options.valid&&(i._context={originalEvent:t,writeback:!0,internalSet:!0,readOnly:!0},this.option("valid",e,i))},_clearMessages:function(e,t){this._setMessagesOption(e,[],t)},_cloneMessagesBeforeSet:function(e){var t,i,n,s=[];if(e&&e.length>0)for(t=0;t<e.length;t++)n=e[t],i=new r(n.summary,n.detail,n.severity),i=Object.freeze?Object.freeze(i):i,s.push(i);return s},_createOjLabel:function(){var e,t;this._IsCustomElement()||(this.$label=this._GetLabelElement(),this.$label&&(e=this.options.help.definition,t=this.options.help.source,this.$label.ojLabel({rootAttributes:{class:this._GetDefaultStyleClass()+"-label"},help:{definition:e,source:t}}),this._createDescribedByForLabel()))},_createDescribedByForLabel:function(){var e,t=this.options.help.definition;if(null!=this.options.help.source||null!=t){var i=this.$label[0];i&&(e=i.id),e&&this._describedByUpdated(null,e+"_helpIcon")}},_doRefresh:function(){var t,i=!1;this._ResetComponentState(),this._initComponentMessaging(),this._Refresh("disabled",this.options.disabled),this._hasInvalidMessagesShowing()&&(i=!0),this._clearComponentMessages(),i?(t=this._GetDisplayValue(),this._SetValue(t,null,e.EditableValueUtils.refreshMethodOptions)):(this._IsRequired()&&this._runDeferredValidation(e.EditableValueUtils.refreshMethodOptions.validationContext),this._Refresh("value",this.options.value,!0))},_getLastModelValue:function(){return this._oj_lastModelValue},_getLastDisplayValue:function(){return void 0===this._oj_lastElementValue&&(this._oj_lastElementValue=""),this._oj_lastElementValue},_getAriaLabelledByElement:function(e){if(this._IsCustomElement())return null;var i=e[0].getAttribute("aria-labelledby");return void 0!==i?t("label[id='"+i+"']"):null},_getMessages:function(){var e=[];return this.options.messagesShown&&(e=e.concat(this.options.messagesShown)),this.options.messagesHidden&&(e=e.concat(this.options.messagesHidden)),e},_getLabelText:function(){if(this.$label)return this.$label[0].textContent;var t=e.EditableValueUtils._getCustomOjLabelElements(this.options.labelledBy),i=null;if(t)for(var n=0;n<t.length;n++){n>0&&(i+=" "),i=t[n].textContent}return i},_getValidityState:function(){return this._validityState?this._validityState:(this._validityState=new e.ComponentValidity(this.isValid(),this._getMessages()),this._validityState)},_hasValidityState:function(){return!!this._validityState},_hasInvalidMessages:function(){return!r.isValid(this._getMessages())},_hasInvalidMessagesShowing:function(){return!this.isValid()&&this.options.messagesShown.length>0},_hasInvalidComponentMessagesShowing:function(){for(var t,i,n=this.options.messagesShown,s=0;s<n.length;s++)(i=n[s])instanceof e.ComponentMessage&&i._isMessageAddedByComponent()&&(t=t||[]).push(i);return void 0!==t&&!r.isValid(t)},_initComponentMessaging:function(){var e=this._getComponentMessaging(),t=this._GetMessagingLauncherElement(),i=this._GetContentElement(),n=this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.INIT);this._customPlaceholderSet||this._ClearPlaceholder(),e.activate(t,i,n),this._asyncValidatorValidateCounter=0},_messagesCustomOptionChanged:function(t){var i,n,s=t?t._context:null,a=this.options.messagesCustom,o=this.options.messagesShown,l=[];for(i=0;i<o.length;i++)(n=o[i])instanceof e.ComponentMessage&&n._isMessageAddedByComponent()&&l.push(n);for(i=0;i<a.length;i++)l.push(a[i]);this._setMessagesOption("messagesShown",l,s?s.originalEvent:null,t&&t.changed)},_placeholderOptionChanged:function(e){"displayOptions"===this._getResolvedUserAssistance()&&(!(e&&e._context||{}).internalMessagingSet?(this._customPlaceholderSet=!0,this._GetConverter()&&this._initComponentMessaging()):this._customPlaceholderSet=!1)},_setLastModelValue:function(e){this._oj_lastModelValue=e},_setLastDisplayValue:function(e){this._oj_lastElementValue=e},_updateMessagesOption:function(e,t,i){var n,s,a;if("object"==typeof t&&Array.isArray(t))for(a=this.options[e],s=t.length,n=0;n<s;n++)a.push(t[n]);this._setMessagesOption(e,a,i,!0)},_updateMessagingContent:function(){this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDITY_STATE))},_updateValueOption:function(e,t,i,n,s){var a,o,l=n||{};switch(t&&(l.originalEvent=t),i){case this._VALIDATION_CONTEXT.CONVERTER_OPTION_CHANGE:case this._VALIDATION_CONTEXT.DISABLED_OPTION_CHANGE:case this._VALIDATION_CONTEXT.READONLY_OPTION_CHANGE:case this._VALIDATION_CONTEXT.REFRESH_METHOD:case this._VALIDATION_CONTEXT.REQUIRED_OPTION_CHANGE:case this._VALIDATION_CONTEXT.VALIDATE_METHOD:case this._VALIDATION_CONTEXT.VALIDATORS_OPTION_CHANGE:l.writeback=!0,l.doNotClearMessages=!0}if(l.internalSet=!0,s&&s.targetOptions){a={},o=!1;for(var r=0;r<s.targetOptions.length;r++)a[s.targetOptions[r]]=e,o=o||"value"===s.targetOptions[r]}else a={value:e},o=!0;this.option(a,{_context:l}),o&&this._AfterSetOptionValue("value",{_context:l})},_resetValid:function(){this._valid=void 0},_determineValidFromMessagesOptions:function(){var e=this.options.messagesHidden,t=this.options.messagesShown,i="valid";return t&&0!==t.length&&!r.isValid(t)?i=c:e&&0!==e.length&&!r.isValid(e)&&(i="invalidHidden"),i},_formatValue:function(e){var t=e,i=this._GetConverter();return i&&"object"==typeof i&&(i.format&&"function"==typeof i.format?t=i.format(e):h.level>h.LEVEL_WARN&&h.info("converter does not support the format method.")),t},_getComponentMessaging:function(){return this._componentMessaging||(this._componentMessaging=new e.ComponentMessaging(this)),this._componentMessaging},_getHintsFromAllValidatorsWithGetHintFunction:function(e){var t,i,n=[],s="";for(this._IsRequired()&&(i=this._getImplicitRequiredValidator()).getHint&&"function"==typeof i.getHint&&(s=i.getHint())&&n.push(s),t=0;t<e.length;t++)s="","object"==typeof(i=e[t])&&i.getHint&&"function"==typeof i.getHint&&(s=i.getHint())&&n.push(s);return n},_getImplicitRequiredValidator:function(){var e,t={};return null==this._implicitReqValidator&&(e={hint:(t=this.options.translations&&this.options.translations.required||{}).hint||null,label:this._getLabelText(),messageSummary:t.messageSummary||null,messageDetail:t.messageDetail||null},this._implicitReqValidator=new u(e)),this._implicitReqValidator},_getResolvedUserAssistance:function(){let e=a.parseJSONFromFontFamily("oj-form-control-option-defaults");if(e){return"use"===e.useUserAssistanceOptionDefault?this.options.userAssistanceDensity:"displayOptions"}return"displayOptions"},_showUserAssistanceNotInline:function(){let e=this._getResolvedUserAssistance();return"compact"===e||"displayOptions"===e},_getMessagingContent:function(e){var t,i,n={},s="";if((e=e||this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDITY_STATE)!==this._MESSAGING_CONTENT_UPDATE_TYPE.INIT&&e!==this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDITY_STATE||(n.validityState=this._getMessagingContentValidityState()),e!==this._MESSAGING_CONTENT_UPDATE_TYPE.INIT&&e!==this._MESSAGING_CONTENT_UPDATE_TYPE.CONVERTER_HINT||((i=this._GetConverter())&&"object"==typeof i&&i.getHint&&"function"==typeof i.getHint&&(s=i.getHint()||""),n.converterHint=s),e===this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDATOR_HINTS){t=this._GetAllValidatorsFromValidatorsOptionAndImplicit();let e=this._getHintsFromAllValidatorsWithGetHintFunction(t)||[];n.validatorHint=e}if(e===this._MESSAGING_CONTENT_UPDATE_TYPE.INIT||e===this._MESSAGING_CONTENT_UPDATE_TYPE.TITLE){var a;if(this._IsCustomElement()){var o=this.options.help;null!=o&&(a=o.instruction)}else a=this.options.title;n.title=a||""}return n},_getMessagingContentValidityState:function(){let e;return this._hasValidityState()?(e=this._getValidityState()).update(this.isValid(),this._getMessages()):e=this._getValidityState(),e},_messagesEquals:function(e,i){var n,s=-1,a=!0,o=t.extend([],e),l=t.extend([],i);return o.length===l.length&&(o.forEach(function(e){e instanceof r?n=e:(n=new r(e.summary,e.detail,e.severity),n=Object.freeze?Object.freeze(n):n),s=-1,l.forEach(function(e,t){r.getSeverityLevel(n.severity)===r.getSeverityLevel(e.severity)&&n.summary===e.summary&&n.detail===e.detail&&(s=t)}),s>-1?l.splice(s,1):a=!1}),a)},_parseValue:function(e,t,i){var n=this._GetConverter(),s=e;if(n&&"object"==typeof n)if(n.parse&&"function"==typeof n.parse)try{i&&this._setValidOption("pending",t),s=n.parse(e)}catch(e){throw e}else h.level>h.LEVEL_WARN&&h.info("converter does not support the parse method.");return s},_addValidationError:function(t,i){var s,a,o,l;t instanceof e.ConverterError||t instanceof e.ValidatorError?(a=(o=t.getMessage()).severity||r.SEVERITY_LEVEL.ERROR,l=o.summary||n.getTranslatedString("oj-message.error"),s=o.detail||n.getTranslatedString("oj-converter.detail")):t.summary||t.detail?(a=r.SEVERITY_LEVEL.ERROR,l=t.summary||n.getTranslatedString("oj-message.error"),s=t.detail||n.getTranslatedString("oj-converter.detail")):(a=r.SEVERITY_LEVEL.ERROR,l=n.getTranslatedString("oj-message.error"),s=t.message||n.getTranslatedString("oj-converter.detail")),i.push({summary:l,detail:s,severity:a})},_processValidationErrors:function(t,i,n){var s,a=[],o=t._messages||[],l={};l.context=i||0,l.display=n||e.ComponentMessage.DISPLAY.SHOWN,0===o.length&&this._addValidationError(t,o);for(var r=0;r<o.length;r++)s=o[r],a.push(this._createComponentMessage(s.summary,s.detail,s.severity,l));return a||null},_createComponentMessage:function(t,i,n,s){var a;return a=new e.ComponentMessage(t,i,n,s),a=Object.seal?Object.seal(a):a},_refreshComponentDisplayValue:function(e,t){var i;return this._toggleOjHasNoValueClass(e),(t||e!==this._getLastModelValue())&&(i=this._UpdateElementDisplayValue(e)),i},_refreshTheming:function(e,t){-1!==Object.keys(this._OPTION_TO_CSS_MAPPING).indexOf(e)&&(t?this.widget()[0].classList.add(this._OPTION_TO_CSS_MAPPING[e]):this.widget()[0].classList.remove(this._OPTION_TO_CSS_MAPPING[e]))},_runDeferredValidation:function(e){var t=this;if(this._CanSetValue()){if(!this._resolveBusyStateDeferredValidation){var i=this.element[0],n=s.getContext(i).getBusyContext(),a="The page is waiting for async deferred validation ";i&&i.id&&(a+='for "'+i.id+'" '),a+="to finish.",this._resolveBusyStateDeferredValidation=n.addBusyState({description:a})}var o=this._validateValueForRequiredOnly(this.options.value,e);if(!(o instanceof Promise))return this._setValidOption(this._determineValidFromMessagesOptions(),null),void(this._resolveBusyStateDeferredValidation&&(this._resolveBusyStateDeferredValidation(),delete this._resolveBusyStateDeferredValidation));o.then(function(){t._resolveBusyStateDeferredValidation&&(t._resolveBusyStateDeferredValidation(),delete t._resolveBusyStateDeferredValidation),t._setValidOption(t._determineValidFromMessagesOptions(),null)})}else h.level>h.LEVEL_WARN&&h.info("Deferred validation skipped as component is readonly or disabled.");this._setValidOption(this._determineValidFromMessagesOptions(),null)},_runMixedValidationAfterSetOption:function(e){var t,i=!1;this._hasInvalidMessagesShowing()&&(i=!0),this._clearComponentMessages(),i&&(t=this._GetDisplayValue(),this._SetValue(t,null,e)),!i&&this._IsRequired()?this._runDeferredValidation(e.validationContext):this._setValidOption(this._determineValidFromMessagesOptions(),null)},_UpdateElementDisplayValue:function(e,t){var i,n;i=e;try{i=this._formatValue(e);try{this._setLastModelValue(e),this._afterConverterFormat(i)}catch(e){throw e}n=i}catch(s){t||this._afterConverterFormatFailure(s),this._setLastModelValue(e),this._afterConverterFormat(i),n=void 0}return n},_SetLoading:function(){var e=this.widget()[0],t=this.GetFocusElement();e.classList.add("oj-loading"),this._saveAriaLabel=t.getAttribute("aria-label");var i=n.getTranslatedString("oj-ojEditableValue.loading");t.setAttribute("aria-label",i)},_ClearLoading:function(){var e=this.widget()[0],t=this.GetFocusElement();e.classList.remove("oj-loading"),this._saveAriaLabel?t.setAttribute("aria-label",this._saveAriaLabel):t.removeAttribute("aria-label")},_UseReadonlyDiv:function(){return"div"===a.parseJSONFromFontFamily("oj-form-control-option-defaults").readonlyElem},_ShowHelpHints:function(){return this._IsTextFieldComponent()?"focus":"always"},_ShowHelpHintsLocation:function(){return"inline"},_afterConverterFormat:function(e){var t;this._SetDisplayValue(e),t=this._GetDisplayValue(),this._setLastDisplayValue(t),this._SetRawValue(t,null)},_afterConverterFormatFailure:function(e){var t;t=this._processValidationErrors(e),this._updateMessagesOption("messagesShown",t),this._setValidOption(c,null)},_loadingConverter:function(t){var i=this,n=e.EditableValueUtils._getShowLoadingDelay(),s=this._converterChangedCounter,a=setTimeout(function(){s===i._converterChangedCounter&&i._SetLoading()},n);return t.then(function(e){return i._ClearLoading(),clearTimeout(a),e})},_validateValueForRequiredOnly:function(t,i){var n,s,a=this;if(this._IsRequired()){s=this._getImplicitRequiredValidator();try{this._setValidOption("pending",null);var o=s.validate(e.StringUtils.trim(t));if(o instanceof Promise)return o.then(function(){},function(t){(n=a._processValidationErrors(t,i,e.ComponentMessage.DISPLAY.HIDDEN))&&a._updateMessagesOption("messagesHidden",n)})}catch(t){(n=this._processValidationErrors(t,i,e.ComponentMessage.DISPLAY.HIDDEN))&&this._updateMessagesOption("messagesHidden",n)}}return null},_asyncValidateValue:function(t,i,n){var s,a,o,l,r,d=this._GetNormalizedAsyncValidatorsFromOption(),u=this._GetAllValidatorsFromValidatorsOptionAndImplicit(),p=!1,g=this,_=[],y=this._asyncValidatorValidateCounter,m=[],v=this._IsRequired();if(v&&(l=this._getImplicitRequiredValidator()),(v||d.length>0||u.length>0)&&this._setValidOption("pending",i),l)try{var f=l.validate(e.StringUtils.trim(t));f&&m.push(f)}catch(e){this._addValidationError(e,_),this._setValidOption(c,i),p=!0}for(s=0;s<d.length;s++){try{r=d[s].validate(t)}catch(e){r=Promise.reject(e)}r instanceof Promise||(r=Promise.resolve(r)),m.push(r)}for(s=0;s<u.length;s++)try{(r=u[s].validate(t))instanceof Promise&&m.push(r)}catch(e){this._addValidationError(e,_),this._setValidOption(c,i),p=!0}if(_.length>0){let e=new Error;e._messages=_,o=this._processValidationErrors(e,n),this._updateMessagesOption("messagesShown",o,i)}function C(e){return e.then(function(e){var i;return g._asyncValidatorValidateCounter===y?i="resolved":(h.level>h.LEVEL_WARN&&h.info("Validate ignored because new value came in before async validator finished for "+t),i="ignore"),{v:e,status:i}},function(e){var s;return g._asyncValidatorValidateCounter===y?(o=g._processValidationErrors(e,n),g._updateMessagesOption("messagesShown",o,i),p||(g._setValidOption(c,i),p=!0),s="rejected"):(h.level>h.LEVEL_WARN&&h.info("Validate ignored because new value came in before async validator finished for "+t),s="ignore"),{e:e,status:s}})}return m.length>0?new Promise(function(e){Promise.all(m.map(C)).then(function(t){t.filter(function(e){return"ignore"===e.status}).length>0?a="ignoreValidation":(a=p?c:"valid",g._setValidOption(g._determineValidFromMessagesOptions(),i)),e(a)})}):(0===_.length&&this._setValidOption(g._determineValidFromMessagesOptions(),i),0===_.length?t:void 0)},_labelledByUpdated:function(t){var i=e.EditableValueUtils._getCustomOjLabelElements(t);if(i)for(let e=0;e<i.length;e++){var n=i[e];n.classList.add(this._GetDefaultStyleClass()+"-label"),void 0===this.widget().attr("data-oj-internal")&&void 0!==this.options.readOnly&&this._addRemoveOjReadOnlyClassOnLabel(n,this.options.readOnly)}},_describedByUpdated:p._describedByUpdated,_setBusyState:e.EditableValueUtils._SetBusyState,_clearBusyState:e.EditableValueUtils._ClearBusyState,_setBusyStateAsyncValidatorHint:e.EditableValueUtils._SetBusyStateAsyncValidatorHint,_clearBusyStateAsyncValidatorHint:e.EditableValueUtils._ClearBusyStateAsyncValidatorHint,_setBusyStateAsyncConverterLoading:e.EditableValueUtils._SetBusyStateAsyncConverterLoading,_clearBusyStateAsyncConverterLoading:e.EditableValueUtils._ClearBusyStateAsyncConverterLoading,_AfterCreateConverterCached:e.EditableValueUtils._AfterCreateConverterCached,_getReadonlyDiv:e.EditableValueUtils._getReadonlyDiv,_createOrUpdateReadonlyDiv:e.EditableValueUtils._createOrUpdateReadonlyDiv,_createReadonlyDiv:e.EditableValueUtils._createReadonlyDiv,_setReadonlyDivLabelledBy:e.EditableValueUtils._setReadonlyDivLabelledBy,_GetFormControlContainer:function(){if(this._IsCustomElement()){var e="."+[this._GetComponentManagedBaseLabelStyleClass(),"container"].join("-");return this._getRootElement().querySelector(e)}},_IsTextFieldComponent:function(){return!1},_GetComponentManagedBaseLabelStyleClass:function(){return this._IsTextFieldComponent()?"oj-text-field":"oj-form-control"},_CreateMiddleWrapper:function(){var e=document.createElement("div");return e.className="oj-text-field-middle",e},_ResolveLabelEdgeStrategyType:function(){var t=this.options.labelEdge;return this._IsCustomElement()&&"inside"===t&&(this._IsTextFieldComponent()||(t=e.ComponentMessaging._STRATEGY_TYPE.LABEL_EDGE_INSIDE_FORM_CNTRL)),t}},!0),o.setDefaultOptions({editableValue:{displayOptions:o.createDynamicPropertyGetter(function(e){var t={messages:e.containers.indexOf("ojDataGrid")>=0||e.containers.indexOf("ojTable")>=0?["notewindow"]:["inline"],converterHint:["placeholder","notewindow"],validatorHint:["notewindow"]};return t[e.isCustomElement?"helpInstruction":"title"]=["notewindow"],t}),help:o.createDynamicPropertyGetter(function(e){return e.isCustomElement?{instruction:""}:{definition:null,source:null}}),labelEdge:o.createDynamicPropertyGetter(function(e){if(e.isCustomElement)return(a.parseJSONFromFontFamily("oj-form-control-option-defaults")||{}).labelEdge}),userAssistanceDensity:o.createDynamicPropertyGetter(function(e){return e.containers.indexOf("ojDataGrid")>=0||e.containers.indexOf("ojTable")>=0?"compact":"reflow"})}});var _=function(e,t){this.Init(e),this._userAssistanceDivElement=t};e.Object.createSubclass(_,e.MessagingStrategy,"InlineHelpHintsStrategy"),_.prototype.activate=function(e){_.superclass.activate.call(this,e),null==this.containerRoot&&this._createInlineHelpHints()},_.prototype.reactivate=function(e,t){_.superclass.reactivate.call(this,e),this._userAssistanceDivElement=t,this._isContainerRootDomInDocument()||this._createInlineHelpHints()},_.prototype.shouldUpdate=function(e){let t=!(!e||void 0===e.title),i=!(!e||void 0===e.validatorHint);return t||i},_.prototype.update=function(){_.superclass.update.call(this),this._updateInlineHelpHints()},_.prototype.deactivate=function(){var e=this.GetComponent()._getRootElement(),t=this._getHelpHintsInlineContainer(e);t&&(this.RemoveAriaDescribedByForInlineMessaging(t),t.parentElement.removeChild(t)),this._focusinCallback&&this._deleteFocusEventHandlers(e),_.superclass.deactivate.call(this)},_.prototype._createInlineHelpHints=function(){var e=this.GetComponent();let t=e._ShowHelpHints();"always"===t&&this._addHelpHintsContent(e),"focus"===t&&this._createFocusEventHandlers(e),this._createHelpHintsAttributeEventHandlers(e)},_.prototype._createFocusEventHandlers=function(e){var t=e._getRootElement();this._focusinCallback=_._focusinHandler.bind(this,e),t.addEventListener("focusin",this._focusinCallback),this._focusoutCallback=_._focusoutHandler.bind(this,e),t.addEventListener("focusout",this._focusoutCallback)},_.prototype._deleteFocusEventHandlers=function(e){e.removeEventListener("focusin",this._focusinCallback),delete this._focusinCallback,e.removeEventListener("focusout",this._focusoutCallback),delete this._focusoutCallback},_.prototype._createHelpHintsAttributeEventHandlers=function(e){var t=e._getRootElement();this._helpHintsChangedCallback=_._helpHintsChangedHandler.bind(this,e),t.addEventListener("helpHintsChanged",this._helpHintsChangedCallback)},_.prototype._deleteHelpHintsAttributeEventHandlers=function(e){e.removeEventListener("helpHintsChanged",this._helpHintsChangedCallback),delete this._helpHintsChangedCallback},_.prototype._getHelpHintsInlineContainer=function(e){return e.querySelector(".oj-helphints-inline-container")},_.prototype._isContainerRootDomInDocument=function(){let e=!1;if(this.containerRoot){let t=this.containerRoot.id;e=document.getElementById(t)}return null!==e},_._focusinHandler=function(e,t){this._userAssistanceDivElement.classList.add("oj-focus"),this._contentAddedOnFocus||(this._contentAddedOnFocus=this._addHelpHintsContent(e))},_._helpHintsChangedHandler=function(e,t){this._addHelpHintsContent(e)},_.prototype._addHelpHintsContent=function(i){let n,s=i.options.help,a=s?s.instruction:null;if(a){let t=e.PopupMessagingStrategyUtils.GetTextDom(document,a,!0);n=t?t.outerHTML:""}if(!n&&this.ShowValidatorHint()){let e=this.GetValidatorHints();e.length>0&&(n=e.join("<br/>"))}if(!n){let e=i.options.helpHints,t=e?e.definition:null;t&&(n=t)}if(!n&&this.ShowConverterHint()){let e=this.GetConverterHint();e.length>0&&(n=e.join("<br/>"))}if(n&&!this.containerRoot){if(this.containerRoot=document.createElement("div"),this.containerRoot.classList.add("oj-helphints-inline-container"),t(this.containerRoot).uniqueId(),this.AddAriaDescribedByForInlineMessaging(this.containerRoot),"inline"===i._ShowHelpHintsLocation())this._userAssistanceDivElement.appendChild(this.containerRoot);else{let e=i._GetFormControlContainer();e.parentElement.insertBefore(this.containerRoot,e)}}return this.containerRoot&&(this.containerRoot.innerHTML=n||""),this._userAssistanceDivElement&&(n?this._userAssistanceDivElement.classList.add("oj-has-helphints"):this._userAssistanceDivElement.classList.remove("oj-has-helphints")),n},_.prototype._updateInlineHelpHints=function(){const e=this.GetComponent();this._addHelpHintsContent(e)},_._focusoutHandler=function(e,t){this._userAssistanceDivElement.classList.remove("oj-focus")},e.InlineMessagingStrategy=function(e,t){this.Init(e),this._parentElement=t},e.ComponentMessaging.registerMessagingStrategy(e.ComponentMessaging._STRATEGY_TYPE.INLINE,e.InlineMessagingStrategy),e.Object.createSubclass(e.InlineMessagingStrategy,e.MessagingStrategy,"oj.InlineMessagingStrategy"),e.InlineMessagingStrategy.prototype.activate=function(t){e.InlineMessagingStrategy.superclass.activate.call(this,t)},e.InlineMessagingStrategy.prototype.reactivate=function(t,i){e.InlineMessagingStrategy.superclass.reactivate.call(this,t),this._parentElement=i,this._updateInlineMessage()},e.InlineMessagingStrategy.prototype.shouldUpdate=function(e){return!(!e||void 0===e.validityState)},e.InlineMessagingStrategy.prototype.update=function(){e.InlineMessagingStrategy.superclass.update.call(this),this._updateInlineMessage()},e.InlineMessagingStrategy.prototype.deactivate=function(){this._removeMessagingContentRootDom(),e.InlineMessagingStrategy.superclass.deactivate.call(this)},e.InlineMessagingStrategy.prototype._getDefaultAnimation=function(){if(!e.InlineMessagingStrategy._defaultAnimation){var t=(a.parseJSONFromFontFamily("oj-messaging-inline-option-defaults")||{}).animation;t=t||{},e.InlineMessagingStrategy._defaultAnimation=t}return e.InlineMessagingStrategy._defaultAnimation},e.InlineMessagingStrategy.prototype._replaceAnimationOptions=function(t,i){var n,s;e.StringUtils.isString(t)?(s=!0,n=t+""):(s=!1,n=JSON.stringify(t));for(var a=Object.keys(i),o=0;o<a.length;o++){var l=a[o];n=n.replace(new RegExp(l,"g"),i[l])}return s?n:JSON.parse(n)},e.InlineMessagingStrategy.prototype._determineAnimation=function(e,t){var i,n,s,a=this._getDefaultAnimation();if(a){var o,l=e[0],r=l.innerHTML,d=l.offsetHeight;l.innerHTML=t,o=l.offsetHeight,l.innerHTML=r,"noanimation"!==(i=o>d?"open":o<d?"close":"noanimation")&&(n=a[i])&&(s=this._replaceAnimationOptions(n,{"#oldHeight":d+"px","#newHeight":o+"px"}))}return{action:i,effect:s}},e.InlineMessagingStrategy.prototype._setBusyState=function(){if(!this._resolveBusyState){var e=this.GetComponent(),t=e?e.element:null,i=t?t[0]:null,n=s.getContext(i).getBusyContext(),a="The page is waiting for inline message ";i&&i.id&&(a+='for "'+i.id+'" '),a+="to open/close",this._resolveBusyState=n.addBusyState({description:a})}},e.InlineMessagingStrategy.prototype._clearBusyState=function(){this._resolveBusyState&&(this._resolveBusyState(),this._resolveBusyState=null)},e.InlineMessagingStrategy.prototype._queueAction=function(e){var t=this,i=this.$messagingContentRoot;t._inInlineMessagingAnimation?this._currentContentToShow=e:(this._currentContentToShow=null,this._setBusyState(),this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=setTimeout(function(){if(t._timeoutId=null,i&&i[0]){var n=t._determineAnimation(i,e),s=n.action,a=n.effect;"noanimation"===s?(i[0].innerHTML=e,t._clearBusyState()):("close"===s?i[0].setAttribute("aria-live","off"):i[0].setAttribute("aria-live","polite"),"open"===s&&(i[0].innerHTML=e),t._inInlineMessagingAnimation=!0,l.startAnimation(i[0],"inline-"+s,a,t.GetComponent()).then(function(){var n;t._inInlineMessagingAnimation=!1,"close"===s&&(i[0].setAttribute("aria-live","polite"),i[0].innerHTML=e),null!==t._currentContentToShow?(n=t._currentContentToShow,t._currentContentToShow=null,t._queueAction(n)):t._clearBusyState()}))}else t._clearBusyState()},0))},e.InlineMessagingStrategy.prototype._updateInlineMessage=function(){var e;e=this._buildInlineHtml(),this._parentElement&&(e?this._parentElement.classList.add("oj-has-messages"):this._parentElement.classList.remove("oj-has-messages"));var t=this._isMessagingContentRootDomInDocument();e&&!t&&this._createInlineMessage(),this.$messagingContentRoot&&this.$messagingContentRoot[0]&&(this.GetComponent()._IsCustomElement()?this._queueAction(e):this.$messagingContentRoot[0].innerHTML=e)},e.InlineMessagingStrategy.prototype._createInlineMessage=function(){this.$messagingContentRoot=t(this._getInlineContentHtml()),this.AddAriaDescribedByForInlineMessaging(this.$messagingContentRoot[0]),this._addAriaLive(this.$messagingContentRoot),this._parentElement?this._parentElement.appendChild(this.$messagingContentRoot[0]):this.GetComponent().widget()[0].appendChild(this.$messagingContentRoot[0])},e.InlineMessagingStrategy.prototype._getInlineContentHtml=function(){return"<div class='oj-messaging-inline-container'></div>"},e.InlineMessagingStrategy.prototype._removeMessagingContentRootDom=function(){if(this._isMessagingContentRootDomInDocument()){this.RemoveAriaDescribedByForInlineMessaging(this.$messagingContentRoot[0]);let e=this.$messagingContentRoot[0].parentNode;e&&e.removeChild(this.$messagingContentRoot[0])}this.$messagingContentRoot=null},e.InlineMessagingStrategy.prototype._addAriaLive=function(i){e.Assert.assertPrototype(i,t),i[0].setAttribute("aria-live","polite")},e.InlineMessagingStrategy.prototype._buildInlineHtml=function(){var e;return this.ShowMessages()?(e=this.GetComponent().document[0],this._buildMessagesHtml(e)):""},e.InlineMessagingStrategy.prototype._buildMessagesHtml=function(t){var i,n,s="";return this.HasMessages()&&(n=this.GetMessages(),i=this.GetMaxSeverity(),s=e.PopupMessagingStrategyUtils.buildMessagesHtml(t,n,i,!0)),s},e.InlineMessagingStrategy.prototype._isMessagingContentRootDomInDocument=function(){var e=!1;if(!this.$messagingContentRoot)return!1;{let t=this.$messagingContentRoot[0].id;e=document.getElementById(t)}return null!==e};var y=function(e,t){this.Init(e),this._parentElement=t};e.Object.createSubclass(y,e.MessagingStrategy,"InlineRequiredStrategy"),y.prototype.activate=function(e){y.superclass.activate.call(this,e),null==this.containerRoot&&this._createInlineRequired()},y.prototype.reactivate=function(e,t){y.superclass.reactivate.call(this,e),this._parentElement=t,this._isContainerRootDomInDocument()||this._createInlineRequired()},y.prototype.shouldUpdate=function(e){return!1},y.prototype.update=function(){y.superclass.update.call(this)},y.prototype.deactivate=function(){var e=this._getRequiredInlineContainer();e&&this._parentElement.removeChild(e),this.GetComponent()._getRootElement().removeEventListener("requiredChanged",this._requiredChangedCallback),delete this._requiredChangedCallback,this._parentElement=null,this.containerRoot=null,y.superclass.deactivate.call(this)},y.prototype._createInlineRequired=function(){var e=this.GetComponent();const i=e.options,s=e._getRootElement();if(i.required){this.containerRoot=document.createElement("div"),this.containerRoot.classList.add("oj-required-inline-container");let i=n.getTranslatedString("oj-ojEditableValue.requiredText");this.containerRoot.textContent=i,t(this.containerRoot).uniqueId(),this._parentElement.appendChild(this.containerRoot),e._AriaRequiredUnsupported()&&this.AddDescribedByToElement(s,this.containerRoot.id)}this._requiredChangedCallback||(this._requiredChangedCallback=this._requiredChangedHandler.bind(this,e),s.addEventListener("requiredChanged",this._requiredChangedCallback))},y.prototype._getRequiredInlineContainer=function(){return this._parentElement.querySelector(".oj-required-inline-container")},y.prototype._requiredChangedHandler=function(e,t){let i=t.detail.value,n=this._getRequiredInlineContainer();i&&null===n?this._createInlineRequired():i||null===n||n&&this._parentElement.removeChild(n)},y.prototype._isContainerRootDomInDocument=function(){let e=!1;if(this.containerRoot){let t=this.containerRoot.id;e=document.getElementById(t)}return null!==e};var m=function(e){this.Init(e),this._displayOptions=e};e.ComponentMessaging.registerMessagingStrategy(e.ComponentMessaging._STRATEGY_TYPE.USER_ASSISTANCE_INLINE,m),e.Object.createSubclass(m,e.MessagingStrategy,"InlineUserAssistanceStrategy"),m.prototype.activate=function(e){m.superclass.activate.call(this,e),this._componentMessaging=e;const t=this.GetComponent(),i=t.options,n=t._getRootElement();this._readonlyChangedCallback=this._readonlyChangedHandler.bind(this,t),n.addEventListener("readonlyChanged",this._readonlyChangedCallback),this._disabledChangedCallback=this._disabledChangedHandler.bind(this,t),n.addEventListener("disabledChanged",this._disabledChangedCallback),this._userAssistanceDensityChangedCallback=this._userAssistanceDensityChangedHandler.bind(this,t),n.addEventListener("userAssistanceDensityChanged",this._userAssistanceDensityChangedCallback),null==this.containerRoot&&this._createInlineContainer(),this._isDisabledOrReadonly()||this._activateContainerStrategies(e,i)},m.prototype.reactivate=function(e){m.superclass.reactivate.call(this,e);const t=this.GetComponent().options;this._isDisabledOrReadonly(t)||(this._isContainerRootDomInDocument()||this._createInlineContainer(),this._inlineMessagingStrategy?(this._inlineMessagingStrategy.reactivate(e,this.containerRoot),this._inlineRequiredStrategy&&this._inlineRequiredStrategy.reactivate(e,this.containerRoot),this._inlineHelpHintsStrategy&&this._inlineHelpHintsStrategy.reactivate(e,this.containerRoot)):this._activateContainerStrategies(this._componentMessaging,t))},m.prototype.shouldUpdate=function(e){return!this._isDisabledOrReadonly()&&(this._shouldUpdateContent=e,!0)},m.prototype.update=function(){m.superclass.update.call(this),this._inlineMessagingStrategy&&(this._isDisabledOrReadonly()||(this._inlineMessagingStrategy.shouldUpdate(this._shouldUpdateContent)&&this._inlineMessagingStrategy.update(),this._inlineRequiredStrategy&&this._inlineRequiredStrategy.shouldUpdate(this._shouldUpdateContent)&&this._inlineRequiredStrategy.update(),this._inlineHelpHintsStrategy&&this._inlineHelpHintsStrategy.shouldUpdate(this._shouldUpdateContent)&&this._inlineHelpHintsStrategy.update()))},m.prototype.deactivate=function(){this._inlineMessagingStrategy.deactivate(),this._inlineRequiredStrategy&&this._inlineRequiredStrategy.deactivate(),this._inlineHelpHintsStrategy&&this._inlineHelpHintsStrategy.deactivate(),this._removeContainerRootDom(),delete this._inlineMessagingStrategy,delete this._inlineRequiredStrategy,delete this._inlineHelpHintsStrategy;const e=this.GetComponent()._getRootElement();e.removeEventListener("readonlyChanged",this._readonlyChangedCallback),delete this._readonlyChangedCallback,e.removeEventListener("disabledChanged",this._disabledChangedCallback),delete this._disabledChangedCallback,e.removeEventListener("userAssistanceDensityChanged",this._userAssistanceDensityChangedCallback),delete this._userAssistanceDensityChangedCallback,m.superclass.deactivate.call(this)},m.prototype._createInlineContainer=function(){this.containerRoot=document.createElement("div"),this.containerRoot.classList.add("oj-user-assistance-inline-container");const e=this.GetComponent(),i=e.options.userAssistanceDensity;"efficient"===i?this.containerRoot.classList.add("oj-efficient"):"reflow"===i&&this.containerRoot.classList.add("oj-reflow"),t(this.containerRoot).uniqueId(),e.widget()[0].appendChild(this.containerRoot)},m.prototype._removeContainerRootDom=function(){if(this._isContainerRootDomInDocument()){let e=this.containerRoot.parentNode;e&&e.removeChild(this.containerRoot)}this.containerRoot=null},m.prototype._isContainerRootDomInDocument=function(){var e=!1;if(this.containerRoot){let t=this.containerRoot.id;e=document.getElementById(t)}return null!==e},m.prototype._activateContainerStrategies=function(t,i){var n=e.InlineMessagingStrategy;this._inlineMessagingStrategy=new n(this._displayOptions,this.containerRoot),this._inlineMessagingStrategy.activate(t),void 0!==i.required&&(n=y,this._inlineRequiredStrategy=new n(this._displayOptions,this.containerRoot),this._inlineRequiredStrategy.activate(t)),n=_,this._inlineHelpHintsStrategy=new n(this._displayOptions,this.containerRoot),this._inlineHelpHintsStrategy.activate(t)},m.prototype._userAssistanceDensityChangedHandler=function(e,t){let i=t.detail.value;"efficient"===i?(this.containerRoot.classList.add("oj-efficient"),this.containerRoot.classList.remove("oj-reflow")):"reflow"===i?(this.containerRoot.classList.add("oj-reflow"),this.containerRoot.classList.remove("oj-efficient")):(this.containerRoot.classList.remove("oj-efficient"),this.containerRoot.classList.remove("oj-reflow"))},m.prototype._readonlyChangedHandler=function(e,t){if(t.detail.value)this._deactivateContainerStrategies();else{const t=e.options;this._activateContainerStrategies(this._componentMessaging,t)}},m.prototype._disabledChangedHandler=function(e,t){if(t.detail.value)this._deactivateContainerStrategies();else{const t=e.options;this._activateContainerStrategies(this._componentMessaging,t)}},m.prototype._deactivateContainerStrategies=function(){this._inlineMessagingStrategy&&this._inlineMessagingStrategy.deactivate(),this._inlineRequiredStrategy&&this._inlineRequiredStrategy.deactivate(),this._inlineHelpHintsStrategy&&this._inlineHelpHintsStrategy.deactivate(),delete this._inlineMessagingStrategy,delete this._inlineRequiredStrategy,delete this._inlineHelpHintsStrategy},m.prototype._isDisabledOrReadonly=function(e=this.GetComponent().options){var t=e.disabled||!1,i=e.readOnly||!1;return t||i};var v=function(e){this.Init(e)};e.ComponentMessaging.registerMessagingStrategy(e.ComponentMessaging._STRATEGY_TYPE.LABEL_EDGE_INSIDE_FORM_CNTRL,v),e.Object.createSubclass(v,g,"InsideFormControlLabelStrategy"),v.prototype.activate=function(e){v.superclass.activate.call(this,e),this._CreateLabel()},v.prototype.reactivate=function(e){v.superclass.reactivate.call(this,e),this._DestroyLabel(),this._CreateLabel()},v.prototype.shouldUpdate=function(){return!1},v.prototype.update=function(){v.superclass.update.call(this)},v.prototype.deactivate=function(){this._DestroyLabel(),v.superclass.deactivate.call(this)},v.prototype._GetFormControlLabelStyleClass=function(){return"oj-form-control-label-inside"},v.prototype._InsertOjLabel=function(e,t,i){let n=i._getRootElement();n.insertBefore(e,n.firstElementChild)},v.prototype._CreateEventHandlers=function(e,t,i,n){v.superclass._CreateEventHandlers.call(this,e,t,i,n)},v._labelHintChangedHandler=function(e,t){e.innerText=t.detail.value},e.InsideLabelPlaceholderStrategy=function(e){this.Init(e)},e.Object.createSubclass(e.InsideLabelPlaceholderStrategy,e.MessagingStrategy,"oj.InsideLabelPlaceholderStrategy"),e.InsideLabelPlaceholderStrategy.prototype.activate=function(t){e.InsideLabelPlaceholderStrategy.superclass.activate.call(this,t),this._createPlaceholderToggle()},e.InsideLabelPlaceholderStrategy.prototype.reactivate=function(t){e.InsideLabelPlaceholderStrategy.superclass.reactivate.call(this,t),this._destroyPlaceholderToggle(),this._createPlaceholderToggle()},e.InsideLabelPlaceholderStrategy.prototype.deactivate=function(){this._destroyPlaceholderToggle(),e.InsideLabelPlaceholderStrategy.superclass.deactivate.call(this)},e.InsideLabelPlaceholderStrategy.prototype.shouldUpdate=function(e){return e&&void 0!==e.converterHint||this.GetComponent().options.placeholder},e.InsideLabelPlaceholderStrategy.prototype.update=function(){e.InsideLabelPlaceholderStrategy.superclass.update.call(this),this._placeholderChanged()},e.InsideLabelPlaceholderStrategy.prototype._destroyPlaceholderToggle=function(){var e=this.GetComponent(),t=e._GetContentElement()[0],i=e._getRootElement();this._blurCallback(),t.removeEventListener("focusout",this._blurCallback,!1),delete this._blurCallback,t.removeEventListener("focusin",this._focusCallback,!1),delete this._focusCallback,i.removeEventListener("placeholderChanged",this._placeholderChangedCallback,!1),delete this._placeholderChangedCallback,e._HasPlaceholderSet()&&(e._SetPlaceholder(e.options.placeholder),e._customPlaceholderSet=!0)},e.InsideLabelPlaceholderStrategy.prototype._createPlaceholderToggle=function(){var t=this.GetComponent(),i=t._GetContentElement()[0],n=t._getRootElement();t._customPlaceholderSet=!0,this._blurCallback=e.InsideLabelPlaceholderStrategy._blurHandler.bind(this,i),i.addEventListener("focusout",this._blurCallback,!1),this._focusCallback=e.InsideLabelPlaceholderStrategy._focusHandler.bind(this),i.addEventListener("focusin",this._focusCallback,!1),this._placeholderChangedCallback=this._placeholderChanged.bind(this),n.addEventListener("placeholderChanged",this._placeholderChangedCallback,!1),this._placeholderChanged()},e.InsideLabelPlaceholderStrategy.prototype._placeholderChanged=function(){var t,i=this.GetComponent()._GetContentElement()[0];t=e.FocusUtils.containsFocus(i)?this._focusCallback:this._blurCallback,Promise.resolve(!0).then(function(){t()})},e.InsideLabelPlaceholderStrategy.ShowConverterHintAsPlaceholder=function(e){var t=e.options.displayOptions;if(!t||"displayOptions"!==e._getResolvedUserAssistance())return!1;var i=t.converterHint;return i instanceof Array?"placeholder"===i[0]:"placeholder"===i},e.InsideLabelPlaceholderStrategy._focusHandler=function(){var t,i=this.GetComponent();if(e.InsideLabelPlaceholderStrategy.ShowConverterHintAsPlaceholder(i)){var n=this.GetConverterHint();t=n.length>0?n[0]:null}t||(t=i.options.placeholder),i._SetPlaceholder(t)},e.InsideLabelPlaceholderStrategy._blurHandler=function(t){if(t.hasAttribute("aria-haspopup")){var i=t.getAttribute("aria-owns"),n=document.getElementById(i);if(e.FocusUtils.containsFocus(n))return}var s,a=this.GetComponent();if(e.InsideLabelPlaceholderStrategy.ShowConverterHintAsPlaceholder(a)){var o=this.GetConverterHint();s=o.length>0?o[0]:null}s||(s=a.options.placeholder),null==s?a._SetPlaceholder(null):a._SetPlaceholder("")},e.InsideLabelStrategy=function(e){this.Init(e),this._displayOptions=e},e.ComponentMessaging.registerMessagingStrategy(e.ComponentMessaging._STRATEGY_TYPE.LABEL_EDGE_INSIDE,e.InsideLabelStrategy),e.Object.createSubclass(e.InsideLabelStrategy,g,"oj.InsideLabelStrategy"),e.InsideLabelStrategy.prototype.activate=function(t){e.InsideLabelStrategy.superclass.activate.call(this,t),this._componentMessaging=t;const i=this.GetComponent()._getRootElement();this._placeholderChangedCallback=this._placeholderChangedHandler.bind(this),i.addEventListener("placeholderChanged",this._placeholderChangedCallback),this._activatePlaceholderStrategyIfNeeded(t),this._CreateLabel()},e.InsideLabelStrategy.prototype.reactivate=function(t){e.InsideLabelStrategy.superclass.reactivate.call(this,t),this._DestroyLabel(),this._CreateLabel(),this._placeholderStrategy?this._placeholderStrategy.reactivate(t):this._activatePlaceholderStrategyIfNeeded(this._componentMessaging)},e.InsideLabelStrategy.prototype.shouldUpdate=function(e){return!!this._placeholderStrategy&&this._placeholderStrategy.shouldUpdate(e)},e.InsideLabelStrategy.prototype.update=function(){this._placeholderStrategy&&this._placeholderStrategy.update()},e.InsideLabelStrategy.prototype.deactivate=function(){this._placeholderStrategy&&(this._placeholderStrategy.deactivate(),delete this._placeholderStrategy),this.GetComponent()._getRootElement().removeEventListener("placeholderChanged",this._placeholderChangedCallback),delete this._placeholderChangedCallback,this._DestroyLabel(),e.InsideLabelStrategy.superclass.deactivate.call(this)},e.InsideLabelStrategy.prototype._activatePlaceholderStrategyIfNeeded=function(t){if(void 0===this._placeholderStrategy){let i=()=>{let i=e.InsideLabelPlaceholderStrategy;this._placeholderStrategy=new i(this._displayOptions),this._placeholderStrategy.activate(t)};const n=this.GetComponent();(n.options.placeholder||"displayOptions"===n._getResolvedUserAssistance()&&e.InsideLabelPlaceholderStrategy.ShowConverterHintAsPlaceholder(n))&&i()}},e.InsideLabelStrategy.prototype._placeholderChangedHandler=function(){this._activatePlaceholderStrategyIfNeeded(this._componentMessaging)},e.InsideLabelStrategy.prototype._GetContainer=function(e){let t=e._GetFormControlContainer();if(!t)return null;let i="_GetContentWrapper";return e[i]&&(t=e[i]()),t},e.InsideLabelStrategy.prototype._GetFormControlLabelStyleClass=function(){return[e.InsideLabelStrategy._BASE_STYLE_CLASS,"label","inside".toLowerCase()].join("-")},e.InsideLabelStrategy.prototype._InsertOjLabel=function(e,t){t.insertBefore(e,t.firstElementChild)},e.InsideLabelStrategy._BASE_STYLE_CLASS="oj-text-field",e.PopupMessagingStrategy=function(e){this.Init(e)},e.ComponentMessaging.registerMessagingStrategy(e.ComponentMessaging._STRATEGY_TYPE.NOTEWINDOW,e.PopupMessagingStrategy),e.Object.createSubclass(e.PopupMessagingStrategy,e.MessagingStrategy,"oj.PopupMessagingStrategy"),e.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT={ojRadioset:{position:"launcher",events:{open:"focusin mouseenter press",close:"mouseleave"}},ojCheckboxset:{position:"launcher",events:{open:"focusin mouseenter press",close:"mouseleave"}},ojInputText:{position:"launcher",events:{open:"focusin"}},ojTextArea:{position:"launcher",events:{open:"focusin"}},ojInputPassword:{position:"launcher",events:{open:"focusin"}},ojSwitch:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},ojSlider:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},ojColorSpectrum:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},ojColorPalette:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},default:{position:"launcher-wrapper",events:{open:"focusin"}}},e.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT="oj-form-control-hint",e.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_CONVERTER="oj-form-control-hint-converter",e.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_VALIDATOR="oj-form-control-hint-validator",e.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_TITLE="oj-form-control-hint-title",e.PopupMessagingStrategy._OPEN_NAMESPACE=".ojPopupMessagingOpen",e.PopupMessagingStrategy._CLOSE_NAMESPACE=".ojPopupMessagingClose",e.PopupMessagingStrategy.prototype.activate=function(t){e.PopupMessagingStrategy.superclass.activate.call(this,t),this._initMessagingPopup()},e.PopupMessagingStrategy.prototype.reactivate=function(t){e.PopupMessagingStrategy.superclass.reactivate.call(this,t),this._updatePopupIfOpenOrComponentHasFocus()},e.PopupMessagingStrategy.prototype.update=function(){e.PopupMessagingStrategy.superclass.update.call(this),this._updatePopupIfOpenOrComponentHasFocus()},e.PopupMessagingStrategy.prototype.deactivate=function(){this._unregisterLauncherEvents(),this._destroyTooltip(),e.PopupMessagingStrategy.superclass.deactivate.call(this)},e.PopupMessagingStrategy.prototype.close=function(){this._closePopup()},e.PopupMessagingStrategy.prototype._closePopup=function(){this._queueAction(function(e){if(this._isPopupInitialized())return e&&this._setActionResolver(this.$messagingContentRoot,"close",e),void this.$messagingContentRoot.ojPopup("close");e&&e(!0)}.bind(this))},e.PopupMessagingStrategy.prototype._initMessagingPopup=function(){this._openPopupCallback||this._registerLauncherEvents()},e.PopupMessagingStrategy.prototype._addAnimateEventListeners=function(e){var t=function(e,t,i){var n=this.GetComponent();n&&n._trigger&&(t.stopPropagation(),n._trigger(e,null,i)||t.preventDefault())};e.on("ojanimatestart.notewindow",t.bind(this,"animateStart")),e.on("ojanimateend.notewindow",t.bind(this,"animateEnd"))},e.PopupMessagingStrategy.prototype._removeAnimateEventListeners=function(e){e.off("ojanimatestart.notewindow"),e.off("ojanimateend.notewindow")},e.PopupMessagingStrategy.prototype._setBusyState=function(e){var t=this.GetComponent(),i=t?t.element:null,n=i?i[0]:null,a=s.getContext(n).getBusyContext(),o="The page is waiting for note window ";return n&&n.id&&(o+='for "'+n.id+'" '),o+="to "+e,a.addBusyState({description:o})},e.PopupMessagingStrategy.prototype._setActionResolver=function(e,t,i){var n;this._actionCount>1&&(n=e.ojPopup("option","animation"),e.ojPopup("option","animation",null));var s=this._setBusyState(t);e.one("oj"+t,function(){n&&e.ojPopup("option","animation",n),s(),i(!0)})},e.PopupMessagingStrategy.prototype._queueAction=function(e){if(this.GetComponent()._IsCustomElement()){var t=this,i=function(e){var i=new Promise(e);return i.then(function(){t._actionCount-=1}),i};this._actionCount?(this._actionCount+=1,this._actionPromise=this._actionPromise.then(function(){return i(e)})):(this._actionCount=1,this._actionPromise=i(e))}else e(null)},e.PopupMessagingStrategy.prototype._openPopup=function(t){this._queueAction(function(i){var n,s,a;if(this._canOpenPopup()&&(s=this._buildPopupHtml(),!e.StringUtils.isEmptyOrUndefined(s))){var o=this._getPopupElement(),l=o.ojPopup("isOpen");if((n=e.PopupMessagingStrategyPoolUtils.getPopupContentNode(o)).innerHTML="",n.innerHTML=s,!l)return a=this.GetLauncher(),t&&"press"===t.type&&this._openPopupOnPressEvent(a),i&&this._setActionResolver(o,"open",i),void o.ojPopup("open",a);l&&o.ojPopup("refresh")}i&&i(!0)}.bind(this))},e.PopupMessagingStrategy.prototype._openPopupOnPressEvent=function(e){this._inPressEvent=!0,e[0].addEventListener("click",this._eatChangeAndClickOnPress,!0),e[0].addEventListener("change",this._eatChangeAndClickOnPress,!0),e.one("touchend",function(){setTimeout(function(){this._inPressEvent=!1},50)})},e.PopupMessagingStrategy.prototype._eatChangeAndClickOnPress=function(e){this._inPressEvent&&(e.preventDefault(),e.stopPropagation(),"click"===e.type&&(this._inPressEvent=!1))},e.PopupMessagingStrategy.prototype._canOpenPopup=function(){var e=this.GetComponent().options,t=e.disabled||!1,i=e.readOnly||!1;return!(t||i)},e.PopupMessagingStrategy.prototype._updatePopupIfOpenOrComponentHasFocus=function(){var t,i,n,s;null!=this.GetLauncher()&&(n=this.GetLauncher()[0].contains(document.activeElement),this._isPopupInitialized()?(s=this._getPopupElement()).ojPopup("isOpen")&&((t=this._buildPopupHtml())?((i=e.PopupMessagingStrategyPoolUtils.getPopupContentNode(s)).innerHTML="",i.innerHTML=t,s.ojPopup("refresh")):s.ojPopup("close")):n&&(t=this._buildPopupHtml())&&this._openPopup(void 0))},e.PopupMessagingStrategy.prototype._unregisterLauncherEvents=function(){var t=this.GetLauncher();t.off(e.PopupMessagingStrategy._OPEN_NAMESPACE),t.off(e.PopupMessagingStrategy._CLOSE_NAMESPACE),t[0].removeEventListener("click",this._eatChangeAndClickOnPress,!0),t[0].removeEventListener("change",this._eatChangeAndClickOnPress,!0),e.DomUtils.isTouchSupported()&&(t.ojHammer().off("press"),t.ojHammer("destroy"),t.off("contextmenu",this._eatContextMenuOnOpenPopupListener),this._eatContextMenuOnOpenPopupListener=null,this._inPressEvent=null),this._openPopupCallback=null,this._closePopupCallback=null},e.PopupMessagingStrategy.prototype._registerLauncherEvents=function(){var t,n,s,a,o,l,r,d,u=this.GetLauncher();(a=(s=e.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT[this.GetComponent().widgetName])?s.events:e.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT.default.events).open&&((r=this._openPopupCallback)||(r=this._openPopup.bind(this),this._openPopupCallback=r),d=a.open.indexOf("press"),l=this._getNamespacedEvents(a.open.replace("press",""),e.PopupMessagingStrategy._OPEN_NAMESPACE),u.on(l,r),e.DomUtils.isTouchSupported()&&-1!==d&&(this._eatContextMenuOnOpenPopupListener=function(){return!1},u.on("contextmenu",this._eatContextMenuOnOpenPopupListener),o={recognizers:[[i.Press,{time:750}]]},u.ojHammer(o).on("press",r))),a.close&&((n=this._closePopupCallback)||(n=this._closePopup.bind(this),this._closePopupCallback=n),t=this._getNamespacedEvents(a.close,e.PopupMessagingStrategy._CLOSE_NAMESPACE),u.on(t,n))},e.PopupMessagingStrategy.prototype._getNamespacedEvents=function(e,t){var i,n,s;if(""===e||""===t)return e;s=(i=e.split(" ")).length,n=[];for(var a=0;a<s;a++)i[a]&&n.push(i[a]+t);return n.join(" ")},e.PopupMessagingStrategy.prototype._getPopupPosition=function(){var t,i,n;return(t=(i=e.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT[this.GetComponent().widgetName])?i.position:e.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT.default.position)&&("launcher"===t?n=this.GetLauncher():"launcher-wrapper"===t&&(n=this.GetLauncher().parent())),n||(n=this.GetComponent().widget()),{my:"start bottom",at:"end top",collision:"flipcenter",of:n}},e.PopupMessagingStrategy.prototype._getPopupElement=function(){var t,i;if(this.$messagingContentRoot)return this.$messagingContentRoot;if(t=e.PopupMessagingStrategyPoolUtils.getNextFreePopup(),i=this._getPopupPosition(),t.ojPopup("option","position",i),t.ojPopup("option","beforeClose",this._popupBeforeCloseCallback.bind(this)),t.ojPopup("option","close",this._popupCloseCallback.bind(this)),t.ojPopup("option","open",this._popupOpenCallback.bind(this)),this.GetComponent()._IsCustomElement()){var n=(a.parseJSONFromFontFamily("oj-messaging-popup-option-defaults")||{}).animation;n.actionPrefix="notewindow",t.ojPopup("option","animation",n),this._addAnimateEventListeners(t)}else t.ojPopup("option","animation",null);return this.$messagingContentRoot=t,this.$messagingContentRoot},e.PopupMessagingStrategy.prototype._popupOpenCallback=function(e){var i=t(e.target),n=this;window.setTimeout(function(){o.isComponentInitialized(i,"ojPopup")?i.ojPopup("option","autoDismiss","focusLoss"):delete n.$messagingContentRoot},10)},e.PopupMessagingStrategy.prototype._popupBeforeCloseCallback=function(){this._resolveBusyState=this._setBusyState("close")},e.PopupMessagingStrategy.prototype._popupCloseCallback=function(i){var n=this.GetLauncher(),s=t(i.target);this._removeAnimateEventListeners(s),o.isComponentInitialized(s,"ojPopup")&&(s.ojPopup("option","autoDismiss","none"),s.ojPopup("option","open",null),s.ojPopup("option","close",null),s.ojPopup("option","beforeClose",null)),n&&n[0]&&(n[0].removeEventListener("click",this._eatChangeAndClickOnPress,!0),n[0].removeEventListener("change",this._eatChangeAndClickOnPress,!0)),this.$messagingContentRoot=null,this._inPressEvent=null,e.PopupMessagingStrategyPoolUtils.getPopupContentNode(s).innerHTML="",this._resolveBusyState&&(this._resolveBusyState(),this._resolveBusyState=null)},e.PopupMessagingStrategy.prototype._destroyTooltip=function(){this._closePopup(),e.PopupMessagingStrategyPoolUtils.destroyFreePopup()},e.PopupMessagingStrategy.prototype._buildPopupHtml=function(){var t=!1,i=this.GetComponent().document[0],n=[],s="";return this.ShowMessages()&&n.push(this._buildMessagesHtml(i)),(this.ShowConverterHint()||this.ShowValidatorHint()||this.ShowTitle())&&n.push(this._buildHintsHtml(i)),n.forEach(function(n){n&&(t?s=s.concat(e.PopupMessagingStrategyUtils.getSeparatorHtml(i)):t=!0,s=s.concat(n))}),s},e.PopupMessagingStrategy.prototype._buildMessagesHtml=function(t){var i,n="",s=this.GetMaxSeverity();return this.HasMessages()&&(i=this.GetMessages(),n=e.PopupMessagingStrategyUtils.buildMessagesHtml(t,i,s,!1)),n},e.PopupMessagingStrategy.prototype._buildHintsHtml=function(t){var i,n,s=[],a="";if(this.ShowConverterHint()&&(i=(s=this.GetConverterHint()).length?s[0]:"",a+=e.PopupMessagingStrategyUtils.buildHintHtml(t,e.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_CONVERTER,i,!1,e.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT)),this.ShowValidatorHint())for(s=this.GetValidatorHints(),n=0;n<s.length;n++)a+=e.PopupMessagingStrategyUtils.buildHintHtml(t,e.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_VALIDATOR,s[n],!1,e.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT);return this.ShowTitle()&&(a+=e.PopupMessagingStrategyUtils.buildHintHtml(t,e.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_TITLE,this.GetTitle(),!0,e.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT)),a?"<div class='oj-form-control-hints'>"+a+"</div>":""},e.PopupMessagingStrategy.prototype._isPopupInitialized=function(){return!!this.$messagingContentRoot&&o.isComponentInitialized(this.$messagingContentRoot,"ojPopup")},e.PopupMessagingStrategyUtils={},e.PopupMessagingStrategyUtils.buildHintHtml=function(t,i,n,s,a){var o;if(n){o=t.createElement("div");for(var l=a.split(" "),r=0,d=l.length;r<d;++r)o.classList.add(l[r]);o.classList.add(i),e.PopupMessagingStrategyUtils._appendTextDom(o,e.PopupMessagingStrategyUtils.GetTextDom(t,n,s))}return o?o.outerHTML:""},e.PopupMessagingStrategyUtils.getSeverityTranslatedString=function(e){var t;switch(e){case r.SEVERITY_LEVEL.FATAL:t=n.getTranslatedString("oj-message.fatal");break;case r.SEVERITY_LEVEL.ERROR:t=n.getTranslatedString("oj-message.error");break;case r.SEVERITY_LEVEL.WARNING:t=n.getTranslatedString("oj-message.warning");break;case r.SEVERITY_LEVEL.INFO:t=n.getTranslatedString("oj-message.info");break;case r.SEVERITY_LEVEL.CONFIRMATION:t=n.getTranslatedString("oj-message.confirmation")}return t},e.PopupMessagingStrategyUtils.getSeparatorHtml=function(e){var i;return(i=t(e.createElement("hr")))?i.get(0).outerHTML:""},e.PopupMessagingStrategyUtils.buildMessagesHtml=function(t,i,n,s){var a,o,l,d,u,h,p,g,c="",_=[],y={};for(o=0;o<i.length;o++)u=(d=i[o])instanceof r?d:new r(d.summary,d.detail,d.severity),y[h=r.getSeverityLevel(u.severity)]||(y[h]=[]),y[h].push(u);for(o=n;o>=r.SEVERITY_LEVEL.CONFIRMATION;o--)for(_=y[o]||[],l=0;l<_.length;l++)d=_[l],h=r.getSeverityLevel(d.severity),p=e.PopupMessagingStrategyUtils.getSeverityTranslatedString(h),g=d.summary||p,a=d.detail||"",c=c.concat(e.PopupMessagingStrategyUtils.buildMessageHtml(t,g,a,h,s));return c},e.PopupMessagingStrategyUtils.buildMessageHtml=function(t,i,n,s,o){var l,r,d,u,h,p=e.PopupMessagingStrategyUtils.getSeverityTranslatedString(s);if((d=t.createElement("div")).classList.add(e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE),o)for(var g=e.PopupMessagingStrategyUtils._getSeveritySelector(s).split(" "),c=0,_=g.length;c<_;++c)d.classList.add(g[c]);u=t.createElement("span");for(var y=e.PopupMessagingStrategyUtils._getSeverityIconSelector(s).split(" "),m=0,v=y.length;m<v;++m)u.classList.add(y[m]);if(null==p?u.removeAttribute("title"):u.setAttribute("title",p),u.setAttribute("role","img"),d.appendChild(u),(l=t.createElement("span")).classList.add(e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONTENT),"header"===(a.parseJSONFromFontFamily("oj-messaging-popup-option-defaults")||{}).messageSummaryOptionDefault&&((h=t.createElement("div")).classList.add(e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_SUMMARY),h.textContent=i,l.appendChild(h)),n){var f=e.PopupMessagingStrategyUtils.GetTextDom(t,n,!0);(r=t.createElement("div")).classList.add(e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_DETAIL),e.PopupMessagingStrategyUtils._appendTextDom(r,f),l.appendChild(r)}return d.appendChild(l),d.outerHTML},e.PopupMessagingStrategyUtils._getSeverityIconSelector=function(t){var i;switch(t){case r.SEVERITY_LEVEL.FATAL:case r.SEVERITY_LEVEL.ERROR:i=e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR_ICON;break;case r.SEVERITY_LEVEL.WARNING:i=e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING_ICON;break;case r.SEVERITY_LEVEL.INFO:i=e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO_ICON;break;case r.SEVERITY_LEVEL.CONFIRMATION:i=e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION_ICON}return e.PopupMessagingStrategyUtils._DEFAULT_STATUS_ICON_SELECTORS+i},e.PopupMessagingStrategyUtils._getSeveritySelector=function(t){var i;switch(t){case r.SEVERITY_LEVEL.FATAL:case r.SEVERITY_LEVEL.ERROR:i=e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR;break;case r.SEVERITY_LEVEL.WARNING:i=e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING;break;case r.SEVERITY_LEVEL.INFO:i=e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO;break;case r.SEVERITY_LEVEL.CONFIRMATION:default:i=e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION}return i},e.PopupMessagingStrategyUtils.GetTextDom=function(t,i,n){var s=null;return e.StringUtils.isString(i)&&(n&&e.DomUtils.isHTMLContent(i)?s=e.DomUtils.cleanHtml(i.substring(6,i.length-7)):(s=t.createElement("span")).textContent=i),s},e.PopupMessagingStrategyUtils._appendTextDom=function(t,i){e.StringUtils.isString(i)?t.innerHTML=i:t.appendChild(i)},e.PopupMessagingStrategyUtils._DEFAULT_STATUS_ICON_SELECTORS="oj-component-icon oj-message-status-icon ",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE="oj-message",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_SUMMARY="oj-message-summary",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_DETAIL="oj-message-detail",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONTENT="oj-message-content",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR_ICON="oj-message-error-icon",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING_ICON="oj-message-warning-icon",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO_ICON="oj-message-info-icon",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION_ICON="oj-message-confirmation-icon",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR="oj-message-error",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING="oj-message-warning",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO="oj-message-info",e.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION="oj-message-confirmation",e.PopupMessagingStrategyPoolUtils={},e.PopupMessagingStrategyPoolUtils.getNextFreePopup=function(){var i,n=e.PopupMessagingStrategyPoolUtils._getPool(),s=n.find("."+e.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING);if(0===s.length){(i=t(e.PopupMessagingStrategyPoolUtils._getPopupContentHtml()))[0].style.display="none",i.appendTo(n);i.ojPopup({initialFocus:"none",tail:"simple",autoDismiss:"none",modality:"modeless",animation:{open:null,close:null}})}else i=t(s[0]);return i},e.PopupMessagingStrategyPoolUtils.getPopupContentNode=function(t){return t.find("."+e.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING_CONTAINER)[0]},e.PopupMessagingStrategyPoolUtils.destroyFreePopup=function(){var t;if(e.PopupMessagingStrategyPoolUtils._getFreePoolCount()>0){var i=(t=e.PopupMessagingStrategyPoolUtils.getNextFreePopup())[0];t.ojPopup("destroy"),i.parentNode.removeChild(i)}},e.PopupMessagingStrategyPoolUtils._getPool=function(){var i=t("#"+e.PopupMessagingStrategyPoolUtils._MESSAGING_POPUP_POOL_ID);if(i.length>0)return i;var n=(i=t("<div>"))[0];return n.setAttribute("id",e.PopupMessagingStrategyPoolUtils._MESSAGING_POPUP_POOL_ID),n.setAttribute("role","presentation"),document.body.appendChild(n),i},e.PopupMessagingStrategyPoolUtils._getFreePoolCount=function(){return e.PopupMessagingStrategyPoolUtils._getPool().find("."+e.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING).length},e.PopupMessagingStrategyPoolUtils._getPopupContentHtml=function(){return'<div class="'+e.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING+'"><div class="'+e.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING_CONTAINER+'"></div></div>'},e.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING_CONTAINER="oj-messaging-popup-container",e.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING="oj-messaging-popup",e.PopupMessagingStrategyPoolUtils._MESSAGING_POPUP_POOL_ID="__oj_messaging_popup_pool"});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojvalidator-regexp',["ojs/ojcore","ojs/ojtranslation","ojs/ojvalidator","ojs/ojvalidation-error"],function(t,o,i){"use strict";var e=function(t){this.Init(t)};return t.Object.createSubclass(e,i,"oj.RegExpValidator"),e._BUNDLE_KEY_DETAIL="oj-validator.regExp.detail",e._BUNDLE_KEY_SUMMARY="oj-validator.regExp.summary",e.prototype.Init=function(t){e.superclass.Init.call(this),this._options=t},e.prototype.validate=function(i){var e,a,r,n=this._options&&this._options.pattern||"";if(null!=i&&""!==i){var s=i.toString(),l="^("+n+")$",p=s.match(l);if(null===p||p[0]!==s){this._options&&(r=this._options.messageSummary||null,e=this._options.messageDetail||null,a=this._options&&this._options.label||"");var _={label:a,pattern:n,value:s},u=r?o.applyParameters(r,_):o.getTranslatedString(this._getSummaryKey(),_),h=e?o.applyParameters(e,_):o.getTranslatedString(this._getDetailKey(),_);throw new t.ValidatorError(u,h)}}},e.prototype.getHint=function(){var t=null,i={};return this._options&&this._options.hint&&(i={pattern:this._options.pattern},t=o.applyParameters(this._options.hint,i)),t},e.prototype._getSummaryKey=function(){return e._BUNDLE_KEY_SUMMARY},e.prototype._getDetailKey=function(){return e._BUNDLE_KEY_DETAIL},e});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojfilter',["ojs/ojcore"],function(e){"use strict"});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojfilter-length',["ojs/ojcore","ojs/ojfilter"],function(t,o){"use strict";return class{constructor(t){if(this.options=t,!t.max)throw new Error("length filter's max option cannot be less than 1. max option is "+t.max);if(isNaN(t.max))throw new Error("length filter's max option is not a number. max option is "+t.max);if(null!==t.max&&t.max<1)throw new Error("length filter's max option cannot be less than 1. max option is "+t.max);t.countBy=void 0===t.countBy?"codePoint":t.countBy}filter(t,o){return this.calcLength(o)<=this.options.max?o:t.slice(0,this.options.max)}calcLength(t){let o=this.options.countBy;if(""==t||null==t||null==t)return 0;let n,e=t.length,i=0;switch(o){case"codePoint":for(let o=0;o<e;o++)55296==(63488&t.charCodeAt(o))&&(i+=1);n=e-i/2;break;case"codeUnit":default:n=e}return n}}});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojinputtext',["ojs/ojcore","jquery","ojs/ojvalidator-regexp","ojs/ojlogger","ojs/ojfilter-length","ojs/ojthemeutils","ojs/ojeditablevalue"],function(e,t,i,n,s,r){"use strict";var a,o={properties:{asyncValidators:{type:"Array<Object>",value:[]},autocomplete:{type:"string",value:"on",extension:{_COPY_TO_INNER_ELEM:!0}},autofocus:{type:"boolean",value:!1,extension:{_COPY_TO_INNER_ELEM:!0}},describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string",value:""}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelEdge:{type:"string",enumValues:["inside","none","provided"]},labelHint:{type:"string",value:""},labelledBy:{type:"string"},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},name:{type:"string",value:"",extension:{_COPY_TO_INNER_ELEM:!0}},placeholder:{type:"string"},rawValue:{type:"string",writeback:!0,readOnly:!0},readonly:{type:"boolean",value:!1},required:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{accessibleMaxLengthExceeded:{type:"string"},accessibleMaxLengthRemaining:{type:"string"},regexp:{type:"object",properties:{messageDetail:{type:"string"},messageSummary:{type:"string"}}},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}}}},userAssistanceDensity:{type:"string",enumValues:["compact","efficient","reflow"],value:"reflow"},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},validators:{type:"Array<Object>",value:[]},value:{type:"string",writeback:!0}},methods:{refresh:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}},l={properties:{asyncValidators:{type:"Array<Object>",value:[]},autocomplete:{type:"string",value:"on",extension:{_COPY_TO_INNER_ELEM:!0}},autofocus:{type:"boolean",value:!1,extension:{_COPY_TO_INNER_ELEM:!0}},clearIcon:{type:"string",enumValues:["always","conditional","never"],value:"never"},converter:{type:"object"},describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string",value:""}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelEdge:{type:"string",enumValues:["inside","none","provided"]},labelHint:{type:"string",value:""},labelledBy:{type:"string"},length:{type:"object",properties:{countBy:{type:"string",enumValues:["codePoint","codeUnit"],value:"codePoint"},max:{type:"number"}}},list:{type:"string",extension:{_COPY_TO_INNER_ELEM:!0}},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},name:{type:"string",value:"",extension:{_COPY_TO_INNER_ELEM:!0}},placeholder:{type:"string"},rawValue:{type:"string",writeback:!0,readOnly:!0},readonly:{type:"boolean",value:!1},required:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{accessibleMaxLengthExceeded:{type:"string"},accessibleMaxLengthRemaining:{type:"string"},regexp:{type:"object",properties:{messageDetail:{type:"string"},messageSummary:{type:"string"}}},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}}}},userAssistanceDensity:{type:"string",enumValues:["compact","efficient","reflow"],value:"reflow"},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},validators:{type:"Array<Object>",value:[]},value:{type:"any",writeback:!0},virtualKeyboard:{type:"string",enumValues:["auto","email","number","search","tel","text","url"],value:"auto"}},methods:{refresh:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}},p={properties:{asyncValidators:{type:"Array<Object>",value:[]},autocomplete:{type:"string",value:"on",extension:{_COPY_TO_INNER_ELEM:!0}},autofocus:{type:"boolean",value:!1,extension:{_COPY_TO_INNER_ELEM:!0}},converter:{type:"object"},describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string",value:""}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelEdge:{type:"string",enumValues:["inside","none","provided"]},labelHint:{type:"string",value:""},labelledBy:{type:"string"},length:{type:"object",properties:{countBy:{type:"string",enumValues:["codePoint","codeUnit"],value:"codePoint"},counter:{type:"string",enumValues:["none","remaining"],value:"none"},max:{type:"number"}}},maxRows:{type:"number",value:0},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},name:{type:"string",value:"",extension:{_COPY_TO_INNER_ELEM:!0}},placeholder:{type:"string"},rawValue:{type:"string",writeback:!0,readOnly:!0},readonly:{type:"boolean",value:!1},required:{type:"boolean",value:!1},resizeBehavior:{type:"string",enumValues:["both","horizontal","none","vertical"],value:"none"},rows:{type:"number",extension:{_COPY_TO_INNER_ELEM:!0}},translations:{type:"object",value:{},properties:{accessibleMaxLengthExceeded:{type:"string"},accessibleMaxLengthRemaining:{type:"string"},regexp:{type:"object",properties:{messageDetail:{type:"string"},messageSummary:{type:"string"}}},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}}}},userAssistanceDensity:{type:"string",enumValues:["compact","efficient","reflow"],value:"reflow"},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},validators:{type:"Array<Object>",value:[]},value:{type:"any",writeback:!0}},methods:{refresh:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}};e.__registerWidget("oj.inputBase",t.oj.editableValue,{version:"1.0.0",widgetEventPrefix:"oj",_ATTR_CHECK:[],_CLASS_NAMES:"",_WIDGET_CLASS_NAMES:"",_ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES:"",_GET_INIT_OPTIONS_PROPS_FOR_WIDGET:[{attribute:"disabled",validateOption:!0},{attribute:"pattern"},{attribute:"placeholder"},{attribute:"value"},{attribute:"readonly",option:"readOnly",validateOption:!0},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"title"},{attribute:"spellcheck"}],_INPUT_HELPER_KEY:"",_BLUR_HANDLER_KEY:"blur",_KEYDOWN_HANDLER_KEY:"keydown",_KEYUP_HANDLER_KEY:"keyup",_COMPOSITIONSTART_HANDLER_KEY:"compositionstart",_COMPOSITIONEND_HANDLER_KEY:"compositionend",_INPUT_HANDLER_KEY:"input",_DROP_HANDLER_KEY:"drop",_CLICK_HANDLER_KEY:"click",_TEXT_FIELD_COUNTER_CLASS:"oj-text-field-counter",_TEXT_FIELD_HIDDEN_ARIA_LIVE_CLASS:"oj-text-field-hidden-aria-live",_TEXT_FIELD_MAX_LENGTH_REMAINING_KEY:"accessibleMaxLengthRemaining",_TEXT_FIELD_MAX_LENGTH_EXCEEDED_KEY:"accessibleMaxLengthExceeded",_counterSpanEl:null,options:{asyncValidators:[],autocomplete:void 0,autofocus:!1,labelledBy:null,name:"",placeholder:"",rawValue:void 0,readOnly:!1,required:!1,validators:[]},_SaveAttributes:function(e){var t=this._superApply(arguments);return this._processAttrCheck(),t},_InitOptions:function(t,i){this._super(t,i),this._IsCustomElement()||e.EditableValueUtils.initializeOptionsFromDom(this._GET_INIT_OPTIONS_PROPS_FOR_WIDGET,i,this)},_ComponentCreate:function(){var e=this._superApply(arguments),i=this.options.readOnly;if(this._rtl="rtl"===this._GetReadingDirection(),"boolean"==typeof i&&this.element.prop("readonly",i),this._DoWrapElement()){var n,r;if(this.OuterWrapper?(n=this.OuterWrapper).className?n.className=n.className+" "+this._WIDGET_CLASS_NAMES:n.className=this._WIDGET_CLASS_NAMES:((n=document.createElement("div")).className=this._WIDGET_CLASS_NAMES,this.element[0].parentNode&&this.element[0].parentNode.insertBefore(n,this.element[0])),r=n,this._wrapper=t(n),this._DoWrapElementAndTriggers()){var a=this._CreateContainerWrapper();n.appendChild(a),r=a;var o=this._CreateMiddleWrapper();o&&(a.appendChild(o),r=o)}r.appendChild(this.element[0]),this._focusable({element:this._wrapper,applyHighlight:!0})}else this._focusable({element:this.element,applyHighlight:!0});if(this._CLASS_NAMES&&(this.element.addClass(this._CLASS_NAMES),this.element.addClass("oj-text-field-input")),this._defaultRegExpValidator={},this._eventHandlers=null,this._hasMaxLength()){this.lengthFilter=new s(this.options.length);var l=this.options.value;this._filterTextAndSetValues(l,l,!0,!0)}return e},_AfterCreate:function(){var e=this._superApply(arguments),i=this;if(this._refreshRequired(this.options.required),this._attachDetachEventHandlers(),this._AppendInputHelper(),this._AppendAriaLiveHelper(),t.each(["disabled","readOnly"],function(e,t){i.options[t]&&i._processOptions(t,i.options[t])}),this._IsCustomElement()){let e=this.options.labelledBy;this._initInputIdLabelForConnection(this._GetContentElement()[0],this.widget()[0].id,e)}return this._hasMaxLength()&&this._processLengthCounterAttr(this.options.length.counter),e},_IsRequired:function(){return this.options.required},_AfterSetOptionRequired:e.EditableValueUtils._AfterSetOptionRequired,_AfterSetOptionValidators:e.EditableValueUtils._AfterSetOptionValidators,_AfterSetOptionAsyncValidators:e.EditableValueUtils._AfterSetOptionAsyncValidators,_AfterSetOptionConverter:e.EditableValueUtils._AfterSetOptionConverter,_ResetConverter:e.EditableValueUtils._ResetConverter,_GetConverter:e.EditableValueUtils._GetConverter,_GetNormalizedValidatorsFromOption:e.EditableValueUtils._GetNormalizedValidatorsFromOption,_GetNormalizedAsyncValidatorsFromOption:e.EditableValueUtils._GetNormalizedAsyncValidatorsFromOption,_SetDisplayValue:function(e){if(this._superApply(arguments),this.options.readOnly){let t=this._getReadonlyDiv();t&&(t.textContent=e)}},_createOrUpdateReadonlyDiv:e.EditableValueUtils._createOrUpdateReadonlyDiv,_processOptions:function(e,t){"disabled"===e&&this.element.prop("disabled",t),"readOnly"===e&&(this.element.prop("readonly",t),t&&this._createOrUpdateReadonlyDiv(this.element[0],this._DoWrapElement()&&this.OuterWrapper),this._refreshStateTheming("readOnly",t)),"disabled"!==e&&"readOnly"!==e||this._attachDetachEventHandlers()},_setOption:function(e,t,i){var n=this._superApply(arguments);if("disabled"===e||"readOnly"===e)this._processOptions(e,t);else if("pattern"===e)this._defaultRegExpValidator.regexp=this._getImplicitRegExpValidator(),this._AfterSetOptionValidators();else if("labelledBy"===e){let e=this.options.labelledBy;if(e){var s=this._GetContentElement()[0].id;this._labelledByUpdatedForInputComp(e,s)}}return n},_AfterSetOption:function(t,i,n){switch(this._superApply(arguments),t){case"readOnly":this._AfterSetOptionDisabledReadOnly(t,e.EditableValueUtils.readOnlyOptionOptions);break;case"required":this._AfterSetOptionRequired(t);break;case"validators":this._AfterSetOptionValidators(t);break;case"asyncValidators":this._AfterSetOptionAsyncValidators(t);break;case"converter":this._AfterSetOptionConverter(t);break;case"length":this._AfterSetOptionLength(this.options.length)}},_hasMaxLength:function(){return this.options.length&&this.options.length.max&&!isNaN(this.options.length.max)},_filterTextOnValueChange:function(){if(this.options.length.max){var e=this.options.rawValue,t=this.options.value;this._filterTextAndSetValues(e,t,!0,!1)}},_destroy:function(){var t=this._superApply(arguments);return this.element.off("blur drop keydown keyup compositionstart compositionend input"),this._inputHelper&&this._inputHelper.remove(),this._DoWrapElement()&&!this._IsCustomElement()&&(this._DoWrapElementAndTriggers()?e.DomUtils.unwrap(this.element,this._wrapper):e.DomUtils.unwrap(this.element)),t},_SetLoading:function(){this._super(),this.element.prop("readonly",!0)},_ClearLoading:function(){this._super(),this.element.prop("readonly",this.options.readOnly)},_attachDetachEventHandlers:function(){if(this.options.readOnly||this.options.disabled){if(this._eventHandlers)for(var e=[this._BLUR_HANDLER_KEY,this._KEYDOWN_HANDLER_KEY,this._KEYUP_HANDLER_KEY,this._COMPOSITIONSTART_HANDLER_KEY,this._COMPOSITIONEND_HANDLER_KEY,this._INPUT_HANDLER_KEY,this._DROP_HANDLER_KEY],i=0,n=e.length;i<n;i++)this._eventHandlers[e[i]]&&(this.element.off(e[i],this._eventHandlers[e[i]]),delete this._eventHandlers[e[i]])}else{this._eventHandlers={};var s=t.proxy(this._onBlurHandler,this),r=t.proxy(this._onKeyDownHandler,this),a=t.proxy(this._onKeyUpHandler,this),o=t.proxy(this._onCompositionStartHandler,this),l=t.proxy(this._onCompositionEndHandler,this),p=t.proxy(this._onInputHandler,this),_=function(){this.focus()};this.element.on(this._BLUR_HANDLER_KEY,s),this.element.on(this._KEYDOWN_HANDLER_KEY,r),this.element.on(this._KEYUP_HANDLER_KEY,a),this.element.on(this._COMPOSITIONSTART_HANDLER_KEY,o),this.element.on(this._COMPOSITIONEND_HANDLER_KEY,l),this.element.on(this._INPUT_HANDLER_KEY,p),this.element.on(this._DROP_HANDLER_KEY,_),this._eventHandlers[this._BLUR_HANDLER_KEY]=s,this._eventHandlers[this._KEYDOWN_HANDLER_KEY]=r,this._eventHandlers[this._KEYUP_HANDLER_KEY]=a,this._eventHandlers[this._COMPOSITIONSTART_HANDLER_KEY]=o,this._eventHandlers[this._COMPOSITIONEND_HANDLER_KEY]=l,this._eventHandlers[this._INPUT_HANDLER_KEY]=p,this._eventHandlers[this._DROP_HANDLER_KEY]=_}},_OPTION_TO_CSS_MAPPING:{readOnly:"oj-read-only"},_processAttrCheck:function(){for(var e=this._ATTR_CHECK,t=0,i=e.length;t<i;t++){var n=e[t].attr;"setMandatory"in e[t]&&this.element.attr(n,e[t].setMandatory)}},_onBlurHandler:function(e){this._SetValue(this._GetDisplayValue(),e)},_onKeyDownHandler:function(e){},_onKeyUpHandler:function(e){e.keyCode===t.ui.keyCode.ENTER&&this._SetValue(this._GetDisplayValue(),e)},_onCompositionStartHandler:function(){this._isComposing=!0},_onCompositionEndHandler:function(e){this._isComposing=!1,this._SetRawValue(this._GetContentElement().val(),e),this._hasMaxLength()&&this._onInputHandler(e)},_onInputHandler:function(e){this._isComposing||(this._hasMaxLength()?this._filterTextAndSetValues(this.lastFilteredText,this._GetContentElement().val(),!1,!0):this._SetRawValue(this._GetContentElement().val(),e))},_DoWrapElement:function(){return this._WIDGET_CLASS_NAMES},_DoWrapElementAndTriggers:function(){return this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES},_CreateContainerWrapper:function(){var e=document.createElement("div");return e.setAttribute("role","presentation"),e.className=this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES,e},_AppendInputHelper:function(){if(this._INPUT_HELPER_KEY&&this._DoWrapElement()){var e=this.element.attr("aria-describedby")||"",i=this._GetSubId(this._INPUT_HELPER_KEY);e+=" "+i,this.element.attr("aria-describedby",e),this._inputHelper=t("<div class='oj-helper-hidden-accessible' aria-hidden='true' id='"+i+"'>"+this._EscapeXSS(this.getTranslatedString(this._INPUT_HELPER_KEY))+"</div>"),this._AppendInputHelperParent().append(this._inputHelper)}},_AppendAriaLiveHelper:function(){var e=this._AppendInputHelperParent();if(this.options.length&&this.options.length.max){var t=document.createElement("div");t.classList.add("oj-helper-hidden-accessible"),t.classList.add(this._TEXT_FIELD_HIDDEN_ARIA_LIVE_CLASS);var i=document.createElement("div");i.setAttribute("aria-live","polite");var n=document.createElement("div");n.setAttribute("aria-live","assertive"),t.appendChild(i),t.appendChild(n),e[0].appendChild(t)}},_EscapeXSS:function(e){return t("<span>"+e+"</span>").text()},_AppendInputHelperParent:function(){return this.widget()},_GetImplicitValidators:function(){var e=this._superApply(arguments);if(this.options.pattern){var t=this._getImplicitRegExpValidator();this._defaultRegExpValidator.regexp=t}return Object.assign(this._defaultRegExpValidator,e)},_CanSetValue:function(){return!!this._super()&&!(this.options.readOnly||!1)},_refreshStateTheming:function(e,t){-1!==Object.keys(this._OPTION_TO_CSS_MAPPING).indexOf(e)&&this.widget().toggleClass(this._OPTION_TO_CSS_MAPPING[e],!!t)},_getImplicitRegExpValidator:function(){if(!this.options.pattern)return null;var e={pattern:this.options.pattern,label:this._getLabelText()};return t.extend(e,this.options.translations.regexp||{}),new i(e)},_GetAriaLabelElement:function(){return this.element[0]},_GetSubId:function(e){return this.uuid+"_"+e},_IsRTL:function(){return this._rtl},_IsTextFieldComponent:function(){return!0},_GetContentWrapper:function(){var e=this._GetContentElement()[0];if(!e.parentElement.classList.contains("oj-text-field-middle")){var t=document.createElement("DIV");t.classList.add("oj-text-field-middle"),e.parentElement.insertBefore(t,e),t.appendChild(e)}return e.parentElement},_resetLengthFilter:function(e){this.lengthFilter=new s(e)},_AfterSetOptionLength:function(e){var t;e.max&&(this._resetLengthFilter(e),t=this._GetContentWrapper().parentElement.parentNode.classList.contains("oj-complete")?this.element[0].value:this.options.value,this._filterTextAndSetValues(t,t,!0,!1));this._processLengthCounterAttr(e.counter)},_setFocusOnTextAreaBind:function(){this._setFocusOnTextArea=function(){this.element[0].focus()}.bind(this)},_processLengthCounterAttr:function(e){var t=this._GetContentWrapper().parentElement,i=t.querySelector("."+this._TEXT_FIELD_COUNTER_CLASS),n=t.parentNode.querySelector("."+this._TEXT_FIELD_HIDDEN_ARIA_LIVE_CLASS),s=this.lengthFilter?this.lengthFilter.calcLength(this.options.rawValue):-1,r="",a="";if("none"===e||null==e||0===this.options.length.max||this.options.disabled||this.options.readOnly)i&&(i.removeEventListener(this._CLICK_HANDLER_KEY,this._setFocusOnTextArea),t.removeChild(i)),this._counterSpanEl=null,-1===s||0===this.options.length.max||this.options.disabled||this.options.readOnly?a="":(r=this.options.length.max-s,a=this.getTranslatedString(this._TEXT_FIELD_MAX_LENGTH_REMAINING_KEY,{chars:r}));else{if(null===i){var o=document.createElement("div");o.className=this._TEXT_FIELD_COUNTER_CLASS,this._TEXTAREA_COUNTER_CONTAINER&&(o.className+=" "+this._TEXTAREA_COUNTER_CONTAINER),i=document.createElement("span"),this._INPUTTEXT_COUNTER_EL&&(i.className+=" "+this._INPUTTEXT_COUNTER_EL),this._TEXTAREA_COUNTER_EL&&(i.className+=" "+this._TEXTAREA_COUNTER_EL,this._setFocusOnTextAreaBind(),o.addEventListener(this._CLICK_HANDLER_KEY,this._setFocusOnTextArea)),o.appendChild(i),t.appendChild(o),this._counterSpanEl=i,this._counterSpanEl.textContent=""}-1!==s&&(r=this.options.length.max-s,a=this.getTranslatedString(this._TEXT_FIELD_MAX_LENGTH_REMAINING_KEY,{chars:r}))}(this._counterSpanEl&&(this._counterSpanEl.textContent=r),n)&&(n.children[0].textContent=a)},_filterTextAndSetValues(e,t,i,n){var s=this.lengthFilter.filter(e,t);this._SetRawValue(s,null),this._SetDisplayValue(s,null);var r=this._GetContentWrapper().parentElement.parentNode.querySelector("."+this._TEXT_FIELD_HIDDEN_ARIA_LIVE_CLASS);if(r){var a=r.children[1];(s?s.length:0)<(t?t.length:0)?(a.textContent="",a.textContent=this.getTranslatedString(this._TEXT_FIELD_MAX_LENGTH_EXCEEDED_KEY,{len:this.options.length.max})):this.lastFilteredText!==t&&(a.textContent="")}this.lastFilteredText=s,i&&this._SetValue(this.lastFilteredText),n&&this._processLengthCounterAttr(this.options.length.counter)},refresh:function(){var e=this._superApply(arguments);return this._rtl="rtl"===this._GetReadingDirection(),this._refreshRequired(this.options.required),e},_refreshRequired:e.EditableValueUtils._refreshRequired,_labelledByUpdatedForInputComp:e.EditableValueUtils._labelledByUpdatedForInputComp,_initInputIdLabelForConnection:e.EditableValueUtils._initInputIdLabelForConnection,_linkLabelForInputComp:e.EditableValueUtils._linkLabelForInputComp,_ValidateReturnBoolean:e.EditableValueUtils._ValidateReturnBoolean,_ValidateReturnPromise:e.EditableValueUtils._ValidateReturnPromise,getNodeBySubId:function(e){return this._super(e)},validate:e.EditableValueUtils.validate,_AriaRequiredUnsupported:function(){return!1},widget:function(){return this._DoWrapElement()?this._wrapper:this.element}},!0),e.__registerWidget("oj.ojInputPassword",t.oj.inputBase,{version:"1.0.0",defaultElement:"<input>",widgetEventPrefix:"oj",_ATTR_CHECK:[{attr:"type",setMandatory:"password"}],_CLASS_NAMES:"oj-inputpassword-input",_WIDGET_CLASS_NAMES:"oj-inputpassword oj-form-control oj-component",_INPUT_CONTAINER_CLASS:"oj-text-field-container",options:{converter:null,pattern:"",value:void 0},_DoWrapElementAndTriggers:function(){return this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES=this._INPUT_CONTAINER_CLASS,!0},_UseReadonlyDiv:function(){return!1},getNodeBySubId:function(e){var t=this._superApply(arguments);return t||"oj-inputpassword-input"===e.subId&&(t=this.element?this.element[0]:null),t||null},_GetDefaultStyleClass:function(){return"oj-inputpassword"}}),e.__registerWidget("oj.ojInputText",t.oj.inputBase,{version:"1.0.0",defaultElement:"<input>",widgetEventPrefix:"oj",_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],_CLASS_NAMES:"oj-inputtext-input",_WIDGET_CLASS_NAMES:"oj-inputtext oj-form-control oj-component",_ALLOWED_TYPES:["email","number","search","tel","text","url"],_CLICK_HANDLER_KEY:"click",_INPUT_CONTAINER_CLASS:"oj-text-field-container",_INPUTTEXT_COUNTER_EL:"oj-inputtext-counter-el",options:{clearIcon:"never",converter:null,list:"",pattern:"",virtualKeyboard:"auto",length:{max:null,countBy:"codePoint"}},_ComponentCreate:function(){var e=this._super(),t=this.options.clearIcon;return this._processClearIconAttr(t),this._processSlottedChildren(),this._AddHoverable(this._wrapper),this._SetInputType(this._ALLOWED_TYPES),e},_DoWrapElementAndTriggers:function(){return this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES=this._INPUT_CONTAINER_CLASS,!0},_processClearIconAttr:function(t){var i=this._GetContentWrapper().parentElement,n=i.querySelector("a.oj-inputtext-clear-icon-btn");if("never"===t||this.options.disabled||this.options.readOnly)n&&i.removeChild(n),i.classList.remove("oj-inputtext-clearicon-visible"),i.classList.remove("oj-inputtext-clearicon-conditional");else{if(null===n){var s,r=e.AgentUtils.getAgentInfo();(n=document.createElement("a")).className="oj-inputtext-clear-icon-btn oj-component-icon oj-clickable-icon-nocontext",n.setAttribute("tabindex","-1"),r.os===e.AgentUtils.OS.ANDROID||r.os===e.AgentUtils.OS.IOS||r.os===e.AgentUtils.OS.WINDOWSPHONE?n.setAttribute("aria-label","Clear input"):n.setAttribute("aria-hidden","true"),n.setAttribute("target","_blank"),(s=document.createElement("span")).className="oj-inputtext-clear-icon",n.appendChild(s),i.appendChild(n),n.addEventListener(this._CLICK_HANDLER_KEY,this._onClearIconClickHandler.bind(this))}var a;if("always"===t)i.classList.add("oj-inputtext-clearicon-visible");else i.classList.remove("oj-inputtext-clearicon-visible"),i.classList.add("oj-inputtext-clearicon-conditional"),(a=i.classList.contains("oj-complete")?this.element[0].value:this.options.value)&&""!==a?i.classList.remove("oj-form-control-empty-clearicon"):i.classList.add("oj-form-control-empty-clearicon")}},_processSlottedChildren:function(){var t=e.BaseCustomElementBridge.getSlotMap(this._getRootElement());!function(e){for(var t={contextMenu:!0,start:!0,end:!0,"":!0},i=Object.keys(e),n=i.length-1;n>-1;n--){var s=i[n];if(!t[s])for(var r=e[s],a=0;a<r.length;a++){var o=r[a];o.parentElement.removeChild(o)}}}(t);var i=this._GetContentWrapper(),n="start";t[n]&&function(e,t){var i=document.createElement("span"),n=e.parentElement;i.classList.add("oj-text-field-start"),n.insertBefore(i,e),n.classList.add("oj-text-field-has-start-slot");for(var s=0;s<t.length;s++){var r=t[s];i.appendChild(r)}}(i,t[n]),t[n="end"]&&function(e,t){var i=document.createElement("span"),n=e.parentElement;i.classList.add("oj-text-field-end"),n.appendChild(i),n.classList.add("oj-text-field-has-end-slot");for(var s=0;s<t.length;s++){var r=t[s];i.appendChild(r)}}(i,t[n])},_AfterSetOption:function(e,t){switch(this._super(e,t),e){case"clearIcon":case"disabled":case"readOnly":this._processClearIconAttr(this.options.clearIcon);break;case"virtualKeyboard":this._SetInputType(this._ALLOWED_TYPES);break;case"value":this._processClearIconAttr(this.options.clearIcon),this._filterTextOnValueChange(),this._AfterSetOptionLength(this.options.length)}},_onInputHandler:function(e){this._super(e);var t=e.target,i=this._GetContentWrapper().parentElement;"conditional"===this.options.clearIcon&&(""!==t.value?i.classList.remove("oj-form-control-empty-clearicon"):i.classList.add("oj-form-control-empty-clearicon"))},_onClearIconClickHandler:function(e){var t=this.element[0];t.value="",this._SetRawValue(t.value,e),t.focus(),this._GetContentWrapper().parentElement.classList.add("oj-form-control-empty-clearicon"),this._processLengthCounterAttr(this.options.length.counter)},_onBlurHandler:function(t){var i=this._wrapper[0],n=t.relatedTarget;n&&n.classList.contains("oj-inputtext-clear-icon-btn")&&n.parentElement&&e.DomUtils.isAncestorOrSelf(i,n.parentElement)?i.classList.add("oj-focus"):this._super(t)},getNodeBySubId:function(e){var t=this._superApply(arguments);return t||"oj-inputtext-input"===e.subId&&(t=this.element?this.element[0]:null),t||null},_GetDefaultStyleClass:function(){return"oj-inputtext"},_GetTranslationsSectionName:function(){return"oj-inputBase"},_SetInputType:e.EditableValueUtils._SetInputType}),e.__registerWidget("oj.ojTextArea",t.oj.inputBase,{version:"1.0.0",defaultElement:"<textarea>",widgetEventPrefix:"oj",_ATTR_CHECK:[],_CLASS_NAMES:"oj-textarea-input",_WIDGET_CLASS_NAMES:"oj-textarea oj-form-control oj-component",_INPUT_CONTAINER_CLASS:"oj-text-field-container",_TEXTAREA_COUNTER_CONTAINER:"oj-textarea-counter-container",_TEXTAREA_COUNTER_EL:"oj-textarea-counter-el",_INPUT_HANDLER_KEY:"input",options:{converter:null,maxRows:0,pattern:"",resizeBehavior:"none",rows:void 0,length:{max:null,countBy:"codePoint",counter:"none"}},_AfterSetOption:function(e,t){switch(this._super(e,t),e){case"value":this._filterTextOnValueChange(),this._AfterSetOptionLength(this.options.length)}},_AfterCreate:function(){var e=this._superApply(arguments);return this._GetContentElement()[0].style.resize=this.options.resizeBehavior,this._setupResizeTextareaBind(),-1===this.options.maxRows&&this.widget()[0].classList.add("oj-maxrows-neg1"),e},_AfterCreateConverterCached:function(){var e=this._super(),t=this._GetContentElement()[0],i=this.options.maxRows;return!this._textAreaElementNotDisplayed()&&(-1===i||i>t.rows)&&(this._calculateLineHeight(t),this._resizeTextArea()),e},_setOption:function(e,t,i){var n=this._superApply(arguments);if("resizeBehavior"===e)this._GetContentElement()[0].style.resize=t;else if("value"===e){let e=this._textAreaElementNotDisplayed(),t=this.options.maxRows;!e&&(-1===t||t>this._GetContentElement()[0].rows)&&this._resizeTextArea()}return n},_NotifyAttached:function(){this._super();var e=this.options.maxRows;(-1===e||e>this._GetContentElement()[0].rows)&&this._resizeTextArea()},_onInputHandler:function(e){this._super(e);var t=this._GetContentElement()[0],i=this.options.maxRows;(-1===i||i>t.rows)&&this._resizeTextArea()},_resizeTextArea:function(){if(!this._textAreaElementNotDisplayed()&&void 0!==this._lineHeight){var e,t=this.options.maxRows,i=this._GetContentElement()[0],n=i.rows;if(i.style.height=0,-1===t)e=i.scrollHeight+this._getStylingHeight(i,"border");else if(t>n){var s=this._lineHeight*t+this._getStylingHeight(i,"padding"),r=this._lineHeight*n+this._getStylingHeight(i,"padding"),a=i.scrollHeight;e=a>s?s+this._getStylingHeight(i,"border"):a<r?r+this._getStylingHeight(i,"border"):a+this._getStylingHeight(i,"border")}else e=this._lineHeight*n+this._getStylingHeight(i,"paddingAndBorder");i.style.height=e+"px"}},_setupResizeTextareaBind:function(){this._textAreaElementNotDisplayed()||(this._resizeTextareaBind=function(){var e=this._GetContentElement()[0],t=this.options.maxRows;(-1===t||t>e.rows)&&this._resizeTextArea()}.bind(this),window.addEventListener("resize",this._resizeTextareaBind,!1))},_getStylingHeight:function(e,t){var i=window.getComputedStyle(e),n=0;"padding"!==t&&"paddindAndBorder"!==t||(n+=parseInt(i.paddingTop,10)+parseInt(i.paddingBottom,10));"border"!==t&&"paddingAndBorder"!==t||(n+=parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10));return n},_calculateLineHeight:function(e){if(!this._textAreaElementNotDisplayed()){var t=window.getComputedStyle(e);if("none"!==t.display){var i=t.lineHeight;switch(i){case"normal":var n=parseInt(t.fontSize,10);this._lineHeight=1.2*n;break;default:this._lineHeight=parseInt(i,10)}}}},_cleanUpListeners:function(){this._resizeTextareaBind&&window.removeEventListener("resize",this._resizeTextareaBind)},_ReleaseResources:function(){this._super(),this._cleanUpListeners()},getNodeBySubId:function(e){var t=this._superApply(arguments);return t||"oj-textarea-input"===e.subId&&(t=this.element?this.element[0]:null),t||null},_DoWrapElementAndTriggers:function(){return this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES=this._INPUT_CONTAINER_CLASS,!0},_UseReadonlyDiv:function(){var e=this._super();return e?-1===this.options.maxRows:e},_GetDefaultStyleClass:function(){return"oj-textarea"},_GetTranslationsSectionName:function(){return"oj-inputBase"},_isConverAsync:function(){return this._GetConverter()instanceof Promise},_onKeyUpHandler:function(e){},_textAreaElementNotDisplayed:function(){return this._UseReadonlyDiv()&&this.options.readOnly&&-1===this.options.maxRows}}),a={properties:{readonly:{binding:{consume:{name:"readonly"}}},userAssistanceDensity:{binding:{consume:{name:"userAssistanceDensity"}}}}},o.extension._WIDGET_NAME="ojInputPassword",o.extension._INNER_ELEM="input",o.extension._GLOBAL_TRANSFER_ATTRS=["accesskey","aria-label","tabindex"],o.extension._ALIASED_PROPS={readonly:"readOnly"},e.CustomElementBridge.register("oj-input-password",{metadata:e.CollectionUtils.mergeDeep(o,a)}),l.extension._WIDGET_NAME="ojInputText",l.extension._INNER_ELEM="input",l.extension._GLOBAL_TRANSFER_ATTRS=["accesskey","aria-label","tabindex"],l.extension._ALIASED_PROPS={readonly:"readOnly"},e.CustomElementBridge.register("oj-input-text",{metadata:e.CollectionUtils.mergeDeep(l,a)}),p.extension._WIDGET_NAME="ojTextArea",p.extension._INNER_ELEM="textarea",p.extension._GLOBAL_TRANSFER_ATTRS=["accesskey","aria-label","tabindex"],p.extension._ALIASED_PROPS={readonly:"readOnly"},e.CustomElementBridge.register("oj-text-area",{metadata:e.CollectionUtils.mergeDeep(p,a)})});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojselectsingle',["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojconfig","ojs/ojhtmlutils","ojs/ojlogger","ojs/ojthemeutils","ojs/ojcachingdataprovider","ojs/ojlistdataproviderview","ojs/ojtreedataproviderview","ojs/ojcontext","ojs/ojtimerutils","ojs/ojkeyset","ojs/ojeditablevalue","ojs/ojlistview","ojs/ojpopupcore","ojs/ojinputtext"],function(e,t,i,n,r,o,a,s,l,d,u,c,h){"use strict";var p={properties:{data:{type:"oj.DataProvider"},describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]}}},help:{type:"object",properties:{instruction:{type:"string",value:""}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},itemText:{type:"string|function",value:"label"},labelEdge:{type:"string",enumValues:["inside","none","provided"]},labelHint:{type:"string",value:""},labelledBy:{type:"string"},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},placeholder:{type:"string",value:""},readonly:{type:"boolean",value:!1},required:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{cancel:{type:"string"},labelAccClearValue:{type:"string"},labelAccOpenDropdown:{type:"string"},multipleMatchesFound:{type:"string"},nOrMoreMatchesFound:{type:"string"},noMatchesFound:{type:"string"},noResultsLine1:{type:"string"},noResultsLine2:{type:"string"},oneMatchFound:{type:"string"},required:{type:"object",properties:{hint:{type:"string"},messageDetail:{type:"string"},messageSummary:{type:"string"}}}}},userAssistanceDensity:{type:"string",enumValues:["compact","efficient","reflow"],value:"reflow"},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},value:{type:"any",writeback:!0},valueItem:{type:"object",writeback:!0,value:{key:null,data:null,metadata:null}},virtualKeyboard:{type:"string",enumValues:["email","number","search","tel","text","url"],value:"search"}},methods:{refresh:{},validate:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}};function _(t){function i(e,t){var i=new function(e,t){this.next=function(){var i=e.next();return new Promise(function(e,n){i.then(function(i){var n=i.value;n.data&&(t.count+=n.data.length),t.done=i.done,e(i)},function(e){n(e)})})}}(e,t);this[Symbol.asyncIterator]=function(){return i}}this._fetchedDataCount={count:0,done:!0},this.setFilterCriterion=function(t){var i,n,r=this._filterCriterion;if(this._filterCriterion=t,i=r,n=this._filterCriterion,!(i===n||!i&&!n||i&&n&&i.text===n.text)){var o=new e.DataProviderRefreshEvent;Object.defineProperty(o,"filterCriterionChanged",{value:!0}),this.dispatchEvent(o)}},this.getFetchedDataCount=function(){return this._fetchedDataCount},this.fetchFirst=function(e){if(t)return this._filterCriterion&&(e.filterCriterion=this._filterCriterion),this._fetchedDataCount={count:0,done:!0},new i(t.fetchFirst(e)[Symbol.asyncIterator](),this._fetchedDataCount);var n={};return n[Symbol.asyncIterator]=function(){return{next:function(){return Promise.resolve({value:{data:[],fetchParameters:e,metadata:[]},done:!0})}}},n},this.containsKeys=function(e){return t?t.containsKeys(e):Promise.resolve({containsParameters:e,results:new Set})},this.fetchByKeys=function(e){return t?t.fetchByKeys(e):Promise.resolve({fetchParameters:e,results:new Map})},this.fetchByOffset=function(e){return t?(this._filterCriterion&&(e.filterCriterion=this._filterCriterion),t.fetchByOffset(e)):Promise.resolve({done:!0,fetchParameters:e,results:[]})},this.isEmpty=function(){return t?t.isEmpty():"yes"},this.getTotalSize=function(){return t?t.getTotalSize():Promise.resolve(0)},this.addEventListener=function(e,i){t&&t.addEventListener(e,i)},this.removeEventListener=function(e,i){t&&t.removeEventListener(e,i)},this.dispatchEvent=function(e){return!t||t.dispatchEvent(e)},this.getCapability=function(e){return t?t.getCapability(e):null},t&&e.DataProviderFeatureChecker.isTreeDataProvider(t)&&(this.getChildDataProvider=function(){let e=t.getChildDataProvider.apply(t,arguments);return e&&(e=new _(e),this._filterCriterion&&e.setFilterCriterion(this._filterCriterion)),e}.bind(this))}var v,f={KEYS:{TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46},_isControlKey:function(e){switch(e.which){case f.KEYS.SHIFT:case f.KEYS.CTRL:case f.KEYS.ALT:return!0;default:return e.metaKey||e.ctrlKey}},_isFunctionKey:function(e){var t=e.which?e.which:e;return t>=112&&t<=123},isControlOrFunctionKey:function(e){return f._isControlKey(e)||f._isFunctionKey(e)},nextUid:(v=1,function(){var e=v;return v+=1,e}),killEvent:function(e){e.preventDefault()},stopEventPropagation:function(e){e.stopPropagation()},addBusyState:function(e,t){var i={description:"The component identified by '"+e.id+"' "+t};return u.getContext(e).getBusyContext().addBusyState(i)},createValueItem:function(e,t,i){return{key:e,data:t,metadata:i}},dispatchCustomEvent:function(e,t,i,n){var r=n||{};r.subtype=i;var o={bubbles:!1,cancelable:!1,detail:r};return e.dispatchEvent(new CustomEvent(t,o))},isValueItemForPlaceholder:function(e){return null==e||f.isValueForPlaceholder(e.key)},isValueForPlaceholder:function(e){return null==e},copyAttribute:function(e,t,i,n){var r=e.getAttribute(t);null===r?i.removeAttribute(n):i.setAttribute(n,r)}},m=function(){};m.prototype.init=function(e){this._dataProvider=e.dataProvider,this._fullScreenPopup=e.fullScreenPopup,this._bodyElem=t(e.bodyElem),this._itemTemplate=e.itemTemplate,this._collectionTemplate=e.collectionTemplate,this._getTemplateEngineFunc=e.getTemplateEngineFunc,this._templateContextComponentElement=e.templateContextComponentElement,this._addBusyStateFunc=e.addBusyStateFunc,this._itemTextRendererFunc=e.itemTextRendererFunc,this._filterInputText=e.filterInputText,this._currentFirstItem=null,this._templateEngine=null,this._resultsCount=null,this._NO_RESULTS_FOUND_CLASSNAME="oj-listbox-searchselect-no-results";var i=this._addBusyStateFunc("LovDropdown initializing");this._addDataProviderEventListeners();var n,r,o=this._createInnerDom(e);this._containerElem=o;var a=new Promise(function(e,t){n=e,r=t});this._collectionContext={parentElement:this._containerElem[0],idSuffix:e.idSuffix,renderDone:n,renderError:r,data:this._dataProvider,searchText:void 0,selected:void 0,selectedItem:void 0,selectedItemChangedListener:this._handleCollectionSelectedItemChanged.bind(this),currentRow:{rowIndex:void 0,rowKey:void 0},currentRowChangedListener:this._handleCollectionCurrentRowChanged.bind(this),currentRowKeyChangedListener:this._handleCollectionCurrentRowKeyChanged.bind(this),handleRowAction:this._handleRowAction.bind(this)},this._collectionRendererFunc=this._collectionTemplate?this._templateCollectionRenderer.bind(this):this._defaultCollectionRenderer.bind(this),this._collectionRendererFunc(this._collectionContext),o.on("change","."+e.className+"-input",f.stopEventPropagation),o.on("click mouseup mousedown",f.stopEventPropagation);var s=function(){e.afterDropdownInitFunc&&e.afterDropdownInitFunc(this._resultsElem[0]),i()}.bind(this);if(a.then(s,s),o.on("keydown",this._handleKeyDown.bind(this)),this._updateLabelFunc){var l=this._updateLabelFunc;this._updateLabelFunc=null,l()}},m.prototype._dispatchEvent=function(e,t){return f.dispatchCustomEvent(this._containerElem[0],"lovDropdownEvent",e,t)},m.prototype.destroy=function(){(this._itemTemplate||this._collectionTemplate)&&this._containerElem&&this._getTemplateEngineFunc().then(function(e){e.clean(this._containerElem[0])}.bind(this)),this._removeDataProviderEventListeners()},m.prototype.getElement=function(){return this._containerElem?this._containerElem[0]:null},m.prototype._createInnerDom=function(e){var i=e.idSuffix,n=document.createElement("div");n.setAttribute("data-oj-containerid",e.parentId),n.setAttribute("data-oj-context",""),n.setAttribute("id","lovDropdown_"+i),n.setAttribute("class","oj-listbox-drop oj-listbox-searchselect"+(this._fullScreenPopup?" oj-listbox-fullscreen":"")),n.style.display="none",n.setAttribute("role","presentation"),this._fullScreenPopup&&n.appendChild(this._filterInputText);var r=document.createElement("div");return r.setAttribute("class","oj-searchselect-results-placeholder"),n.appendChild(r),t(n)},m._highlighter=function(e,t){if(t&&t.length>0){var i=m._escapeRegExp(t);return e.replace(new RegExp(i,"gi"),'<span class="oj-listbox-highlighter">$&</span>')}return e},m._escapeRegExp=function(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")},m.prototype._defaultItemRenderer=function(e){for(var t=e.parentElement,i=this._itemTextRendererFunc({key:e.key,data:e.data,metadata:e.metadata}),n=!1===e.leaf?i:m._highlighter(i,this._collectionContext.searchText),o=r.stringToNodeArray("<span>"+n+"</span>"),a=0;a<o.length;a++)t.appendChild(o[a])},m.prototype._templateItemRenderer=function(e,i){var n=t.extend({},i);n.componentElement=this._templateContextComponentElement,n.searchText=this._collectionContext.searchText;var r=n.parentElement;if(e)for(var o=e.execute(n.componentElement,this._itemTemplate,n),a=0;a<o.length;a++)r.appendChild(o[a])},m.prototype.renderResults=function(e,t,i,n){var r,a,s=this._addBusyStateFunc("LovDropdown rendering results");this._latestFilterCriteria=t,this._clearSelection(),this._duringListViewInitialization=!0;var l=new Promise(function(e,t){r=e,a=t}),d=new Promise(function(t,r){l.then(function(){u.getContext(this._containerElem[0]).getBusyContext().whenReady().then(function(){this._configureResults(e,i,n).then(t,r)}.bind(this),r)}.bind(this),r)}.bind(this));this._lastRenderResultsPromise=d;var c=this._collectionContext;c.data=this._dataProvider,c.searchText=e,u.getContext(this._containerElem[0]).getBusyContext().whenReady().then(function(){if(c.renderError){var e=c.renderError;this._clearContextRenderPromiseFunctions(c),e("LovDropdown.renderResults: rejecting earlier promise")}c.renderDone=r,c.renderError=a,this._dataProvider.setFilterCriterion(t),this._collectionRendererFunc(c)}.bind(this));var h=function(){d===this._lastRenderResultsPromise&&(this._duringListViewInitialization=!1),s()}.bind(this);return d.then(function(){h()},function(e){d===this._lastRenderResultsPromise&&o.warn("Select: LovDropdown.renderResults retPromise rejected: "+e),h()}.bind(this))},m.prototype.updateLabel=function(e,t){var i=this._resultsElem;if(i){if(!this._collectionTemplate){var n=i[0];e?(n.setAttribute("aria-labelledby",e),n.setAttribute("aria-label","")):t&&(n.setAttribute("aria-label",t),n.setAttribute("aria-labelledby",""))}}else this._updateLabelFunc=this.updateLabel.bind(this,e,t)},m.prototype._configureResults=function(e,t,i){var n=u.getContext(this._containerElem[0]).getBusyContext();return this._setCurrentFirstItem(null),this._resultsCount=this._dataProvider.getFetchedDataCount()||{},null==this._resultsCount.count||0===this._resultsCount.count?(this._containerElem.addClass(this._NO_RESULTS_FOUND_CLASSNAME),Promise.resolve()):(this._containerElem.removeClass(this._NO_RESULTS_FOUND_CLASSNAME),i?null!=t&&this._resultsCount.count>0?(this._setCollectionCurrentRow({rowKey:t}),this._setCollectionSelectedKeySet(t),n.whenReady()):Promise.resolve():null==e||""===e?(this._clearSelection(),n.whenReady()):this._fetchFirstResult().then(function(e){if(null==e)return this._clearSelection(),n.whenReady();var t=e.key;return this._setCurrentFirstItem(e),this._setCollectionCurrentRow({rowKey:t}),this._setCollectionSelectedKeySet(t),n.whenReady()}.bind(this)))},m.prototype._fetchFirstResult=function(){return e.DataProviderFeatureChecker.isTreeDataProvider(this._dataProvider)?this._fetchFirstLeafData():this._fetchFirstFlatData()},m.prototype._fetchFirstFlatData=function(){var e=this._dataProvider.fetchByOffset({offset:0,size:1}),t=null,i=function(e){if(null!=e){let i=e.results;if(i.length>0){let e=i[0];t=this._createValueItemFromItem(e)}}return Promise.resolve(t)}.bind(this);return e.then(i)},m.prototype._fetchFirstLeafData=function(){var e={size:1},t=this,i=!1,n=function(r){let o=null,a=r.fetchFirst(e)[Symbol.asyncIterator](),s=function(e){let l=e.value.data,d=e.value.metadata,u=function(e){if(e<l.length&&!i){let a=l[e],s=d[e],c=r.getChildDataProvider(a.value);if(null!=c)return n(c).then(function(t){return o=t,u(e+1)});let h={data:a,metadata:s};o=t._createValueItemFromItem(h),i=!0}return Promise.resolve(o)};return u(0).then(function(){return e.done||i?Promise.resolve(o):a.next().then(s)})};return a.next().then(s)};return n(this._dataProvider)},m.prototype._clearSelection=function(){this._setCollectionCurrentRow({rowKey:null}),this._setCollectionSelectedKeySet(null)},m.prototype._clearContextRenderPromiseFunctions=function(e){e.renderDone=null,e.renderError=null},m.prototype._defaultCollectionRenderer=function(i){var n,r=i.renderDone,a=i.renderError;if(this._resultsElem)n=this._resultsElem[0],u.getContext(n).getBusyContext().whenReady().then(function(){n.data=i.data,n.selected=i.selected,n.currentItem=i.currentRow.rowKey,this._clearContextRenderPromiseFunctions(i),r()}.bind(this),function(e){o.warn("Select: busyContext promise rejected before setting props on listView: "+e),this._clearContextRenderPromiseFunctions(i),a(e)}.bind(this));else{var s=t(i.parentElement).find(".oj-searchselect-results-placeholder")[0],l=i.idSuffix;(n=document.createElement("oj-list-view")).setAttribute("data-oj-internal",""),n.setAttribute("data-oj-binding-provider","none"),n.setAttribute("id","oj-searchselect-results-"+l),n.setAttribute("selection-mode","single"),n.setAttribute("class","oj-select-results"),n.setAttribute("drill-mode","none"),n.setAttribute("gridlines.item","hidden");var d=document.createElement("template");d.setAttribute("slot","noData");var c=document.createElement("div");c.setAttribute("class","oj-searchselect-no-results-container"),d.content?d.content.appendChild(c):d.appendChild(c),n.appendChild(d),i.parentElement.replaceChild(n,s),this._resultsElem=t(n),this._resultsElem.on("click",f.killEvent),u.getContext(n).getBusyContext().whenReady().then(function(){n.addEventListener("ojItemAction",i.handleRowAction),n.addEventListener("currentItemChanged",function(e){i.currentRowKeyChangedListener(e.detail.value)}),i.data&&e.DataProviderFeatureChecker&&e.DataProviderFeatureChecker.isTreeDataProvider(i.data)&&(n.setProperty("item.focusable",e=>e.leaf),n.setProperty("item.selectable",e=>e.leaf)),this._itemTemplate?this._getTemplateEngineFunc().then(function(e){n.setProperty("item.renderer",this._templateItemRenderer.bind(this,e)),this._clearContextRenderPromiseFunctions(i),r()}.bind(this),function(e){o.warn("Select: template item renderer template engine promise rejected: "+e),this._clearContextRenderPromiseFunctions(i),a(e)}.bind(this)):(n.setProperty("item.renderer",this._defaultItemRenderer.bind(this)),this._clearContextRenderPromiseFunctions(i),r())}.bind(this),function(e){o.warn("Select: creating default listView busyContext promise rejected: "+e),this._clearContextRenderPromiseFunctions(i),a(e)}.bind(this))}},m.prototype._templateCollectionRenderer=function(e){var i=e.renderDone,n=e.renderError;if(this._resultsElem){var r=this._collectionTemplateContext;r.data=e.data,r.searchText=e.searchText,r.selected=e.selected,this._clearContextRenderPromiseFunctions(e),i()}else{var a=t(e.parentElement),s=a.find(".oj-searchselect-results-placeholder")[0];this._getTemplateEngineFunc().then(function(t){this._templateEngine=t,this._collectionTemplateContext=this._createCollectionTemplateContext(t,e);for(var n=t.execute(this._templateContextComponentElement,this._collectionTemplate,this._collectionTemplateContext),r=0;r<n.length;r++)s.parentNode.insertBefore(n[r],s);s.parentNode.removeChild(s),this._resultsElem=a.find(".oj-select-results"),this._resultsElem.on("click",f.killEvent),this._clearContextRenderPromiseFunctions(e),i()}.bind(this),function(t){o.warn("Select: template collection renderer template engine promise rejected: "+t),this._clearContextRenderPromiseFunctions(e),n(t)}.bind(this))}},m.prototype._addDataProviderEventListeners=function(){var e=this._dataProvider;if(e){var t=this._handleDataProviderEvent.bind(this);this._savedDataProviderEH=t,e.addEventListener("mutate",t),e.addEventListener("refresh",t)}},m.prototype._removeDataProviderEventListeners=function(){var e=this._dataProvider,t=this._savedDataProviderEH;e&&t&&(e.removeEventListener("mutate",t),e.removeEventListener("refresh",t)),this._savedDataProviderEH=void 0},m.prototype._handleDataProviderEvent=function(e){var t=this._addBusyStateFunc("LovDropdown handling data provider event");u.getContext(this._containerElem[0]).getBusyContext().whenReady().then(function(){t()},function(e){o.warn("Select: LovDropdown.handleDataProviderEvent busyContext promise rejected: "+e),t()})},m.prototype.close=function(){var t=document.activeElement;e.DomUtils.isAncestor(this.getElement(),t)&&t.blur(),this._clearSelection();var i={};i[e.PopupService.OPTION.POPUP]=this._containerElem,e.PopupService.getInstance().close(i),this._containerElem.detach(),this._dispatchEvent("dropdownClosed")},m.prototype.open=function(){var t=this._containerElem;t[0]!==this._bodyElem.children().last()[0]&&t.appendTo(this._bodyElem);var i={};i[e.PopupService.EVENT.POPUP_CLOSE]=function(){this._dispatchEvent("closeDropdown",{trigger:"popupCloseEvent"})}.bind(this),i[e.PopupService.EVENT.POPUP_REMOVE]=this._surrogateRemoveHandler.bind(this),i[e.PopupService.EVENT.POPUP_AUTODISMISS]=this._clickAwayHandler.bind(this),i[e.PopupService.EVENT.POPUP_REFRESH]=function(){this._dispatchEvent("sizeDropdown"),this._dispatchEvent("adjustDropdownPosition",{popupElem:t[0]})}.bind(this),i[e.PopupService.EVENT.POPUP_AFTER_OPEN]=function(e){var t=e.popup[0];this._dispatchEvent("sizeDropdown"),this._dispatchEvent("adjustDropdownPosition",{popupElem:t}),this._fullScreenPopup&&t.scrollIntoView()}.bind(this);var n={};n[e.PopupService.OPTION.POPUP]=t,n[e.PopupService.OPTION.EVENTS]=i,n[e.PopupService.OPTION.LAYER_SELECTORS]="oj-listbox-drop-layer",n[e.PopupService.OPTION.CUSTOM_ELEMENT]=!0,this._fullScreenPopup&&(n[e.PopupService.OPTION.MODALITY]=e.PopupService.MODALITY.MODAL),this._dispatchEvent("openPopup",{psOptions:n})},m.prototype._clickAwayHandler=function(e){var i=this._containerElem,n=t(e.target);if(!n.closest(i).length&&!n.closest("#"+t.escapeSelector(i.attr("data-oj-containerid"))).length){var r=i.closest(".oj-listbox-drop-layer");r.length>0&&n.closest(r).length>0||i.length>0&&this._dispatchEvent("closeDropdown",{trigger:"clickAway"})}},m.prototype._surrogateRemoveHandler=function(){this._containerElem&&this._containerElem.remove()},m.prototype._handleKeyDown=function(e){e.which===f.KEYS.TAB?this._dispatchEvent("tabOut"):e.which===f.KEYS.ESC&&this._dispatchEvent("closeDropdown",{trigger:"escKeyDown"})},m.prototype._handleCollectionSelectedItemChanged=function(e,t){if(!this._duringListViewInitialization){var i=f.isValueItemForPlaceholder(e)?null:e;this._collectionContext.selectedItem=i,this._handleSelection(i,t)}},m.prototype._handleCollectionCurrentRowChanged=function(e){this._duringListViewInitialization||null==e||(this._collectionContext.currentRow={rowIndex:e.rowIndex,rowKey:e.rowKey},this._handleCollectionCurrentRowKeyChanged(e.rowKey))},m.prototype._handleCollectionCurrentRowKeyChanged=function(e){this._duringListViewInitialization||null==e||(this._collectionContext.currentRow.rowKey=e,this._setCollectionSelectedKeySet(e))},m.prototype._handleRowAction=function(e,t){var i=this._createValueItemFromItem(e.detail.context);this._handleSelection(i,e)},m.prototype._handleSelection=function(e,t){e&&this._dispatchEvent("handleSelection",{valueItem:e,event:t})},m.prototype._createCollectionTemplateContext=function(e,t){var i={};if(e){i.data=t.data,i.searchText=t.searchText,e.defineTrackableProperty(i,"selected"),e.defineTrackableProperty(i,"selectedItem",void 0,t.selectedItemChangedListener);let n={};e.defineTrackableProperty(n,"rowKey",void 0,t.currentRowKeyChangedListener),e.defineTrackableProperty(i,"currentRow",n,t.currentRowChangedListener),i.handleRowAction=t.handleRowAction}else o.error("JET Select: template engine not available when creating context for collectionTemplate");return i},m.prototype._createValueItemFromItem=function(e){return null==e.data||null==e.metadata?null:{key:e.metadata.key,data:e.data,metadata:e.metadata}},m.prototype._setCollectionSelectedKeySet=function(e){var t;t=null!=e?new h.KeySetImpl([e]):new h.KeySetImpl([]),this._collectionContext.selected=t,null!=this._collectionTemplateContext?this._collectionTemplateContext.selected=t:null==this._collectionTemplate&&this._resultsElem&&this._resultsElem[0].setProperty("selected",t)},m.prototype._setCollectionCurrentRow=function(e){this._collectionContext.currentRow={rowIndex:e.rowIndex,rowKey:e.rowKey},null!=this._collectionTemplateContext?(this._addListenerForRowKeyProperty(e),this._collectionTemplateContext.currentRow=e):null==this._collectionTemplate&&this._resultsElem&&this._resultsElem[0].setProperty("currentItem",e.rowKey)},m.prototype.getValueItemForSelection=function(){var e=this._collectionContext.currentRow.rowKey,t=this._currentFirstItem,i=this._collectionContext.selectedItem;if(null!=e){let i={};return i.key=e,t&&t.key===e&&(i.data=t.data,i.metadata=t.metadata),i}return i},m.prototype.getResultsCount=function(){return this._resultsCount},m.prototype._setCurrentFirstItem=function(e){this._currentFirstItem=e},m.prototype._addListenerForRowKeyProperty=function(e){var t=this._collectionContext,i=e.rowKey;this._templateEngine&&this._templateEngine.defineTrackableProperty(e,"rowKey",i,t.currentRowKeyChangedListener)};var y=function(e){this._addBusyStateFunc=e.addBusyStateFunc,this._forceReadOnly=e.forceReadOnly,this._createOrUpdateReadonlyDivFunc=e.createOrUpdateReadonlyDivFunc,this._containerElem=this._createInnerDom(e);var i=t(this._containerElem).find("input."+e.className+"-input");this._inputElem=i[0]};y.prototype.getElement=function(){return this._containerElem},y.prototype.getInputElem=function(){return this._inputElem},y.prototype.getInputText=function(){return this._inputElem.value||""},y.prototype._createInnerDom=function(e){var t=e.className,i=e.idSuffix,n=e.inputType,r=e.enabled,o=e.readOnly,a=e.ariaLabel,s=e.ariaControls,l=e.cachedMainFieldInputElement,d=document.createElement("div");d.setAttribute("class","oj-text-field-container"),d.setAttribute("role","presentation");var u=document.createElement("div");u.setAttribute("class","oj-text-field-middle"),d.appendChild(u);var c=l||document.createElement("input");return c.setAttribute("id",t+"-input-"+i),c.setAttribute("autocomplete","off"),c.setAttribute("autocorrect","off"),c.setAttribute("autocapitalize","off"),c.setAttribute("spellcheck","false"),c.setAttribute("class",t+"-input oj-text-field-input"),c.setAttribute("aria-autocomplete","list"),c.setAttribute("placeholder",e.placeholder),c.disabled=!r&&!o,(o||this._forceReadOnly&&r)&&c.setAttribute("readonly","true"),o||(c.setAttribute("role","combobox"),c.setAttribute("aria-expanded","false")),a&&c.setAttribute("aria-label",a),s&&c.setAttribute("aria-controls",s),null!==n&&""!==n?c.setAttribute("type",n):c.setAttribute("type","text"),u.appendChild(c),e.endContent&&d.appendChild(e.endContent),o&&this._createOrUpdateReadonlyDivFunc(c),d},y.prototype.updateLabel=function(e,t){e?(this._inputElem.setAttribute("aria-labelledby",e),this._inputElem.removeAttribute("aria-label")):t&&(this._inputElem.setAttribute("aria-label",t),this._inputElem.removeAttribute("aria-labelledby"))};var b=function(e){this._minLength=0,this._className=e.className,this._dataProvider=e.dataProvider,this._containerElem=e.containerElem,this._fullScreenPopup=e.fullScreenPopup,this._idSuffix=e.idSuffix,this._enabled=e.enabled,this._readonly=e.readOnly,this._value=e.value,this._getTranslatedStringFunc=e.getTranslatedStringFunc,this._addBusyStateFunc=e.addBusyStateFunc,this._lovMainField=e.lovMainField,this._filterInputText=e.filterInputText,this._lovDropdown=e.lovDropdown,this._liveRegion=e.liveRegion,this._showMainFieldFunc=e.showMainFieldFunc,this._setFilterFieldTextFunc=e.setFilterFieldTextFunc,this._setUiLoadingStateFunc=e.setUiLoadingStateFunc,this._lastDataProviderPromise=null,this._fetchType=this.hasData()?"init":null};b.prototype.setValue=function(e){this._value=e},b.prototype.getFetchType=function(){return this._fetchType},b.prototype.destroy=function(){var e=this._closeDelayTimer;isNaN(e)||(delete this._closeDelayTimer,window.clearTimeout(e)),this.closeDropdown()},b.prototype.hasData=function(){return null!=this._dataProvider},b.prototype.isDropdownOpen=function(){return t(this._containerElem).hasClass("oj-listbox-dropdown-open")},b.prototype._usingHandler=function(i,n){if(e.PositionUtils.isAligningPositionClipped(n)){var r=this._addBusyStateFunc("closing popup");this._closeDelayTimer=window.setTimeout(function(){this.closeDropdown(),r()}.bind(this),1)}else{var o=t(this._containerElem),a=n.element.element;a.css(i),"bottom"===n.vertical?(o.addClass("oj-listbox-drop-above"),a.addClass("oj-listbox-drop-above")):(o.removeClass("oj-listbox-drop-above"),a.removeClass("oj-listbox-drop-above"))}},b.prototype.getDropdownPosition=function(){var t;if(this._fullScreenPopup){var i=window.scrollX||window.pageXOffset,n=window.scrollY||window.pageYOffset;t={my:"start top",at:"start top",of:window,offset:{x:i,y:n}}}else t={my:"start top",at:"start bottom",of:this._lovMainField.getElement(),collision:"flip",using:this._usingHandler.bind(this)};var r="rtl"===e.DomUtils.getReadingDirection();return e.PositionUtils.normalizeHorizontalAlignment(t,r)},b.prototype.sizeDropdown=function(){var e=this._lovDropdown.getElement();if(this._fullScreenPopup){var i=Math.min(window.innerWidth,window.screen.availWidth),r=Math.min(window.innerHeight,window.screen.availHeight);if("phone"===n.getDeviceType()&&window.parent&&window!==window.parent){var o=Math.min(window.parent.innerHeight,window.parent.screen.availHeight),a=Math.min(r,o);if(r>a){var s=r-a;e.style.paddingBottom=s+"px"}}e.style.width=i+"px",e.style.height=r+"px"}else e.style.minWidth=t(this._containerElem).width()+"px"},b.prototype.adjustDropdownPosition=function(e){if(!this._fullScreenPopup){var i,n=t(e),r=e.getBoundingClientRect(),o=this._containerElem.getBoundingClientRect(),a=Math.min(window.innerWidth,window.screen.availWidth),s=n.css("left"),l=parseFloat(s);if(r.left>=o.left)i=a-r.left-10,n.css("left",l+"px");else{i=o.right-10;var d=n.css("width"),u=parseFloat(d);if(u>i){var c=u-i;n.css("left",l+c+"px")}else if(r.left+r.width<o.left+o.width){var h=o.left+o.width-(r.left+r.width);n.css("left",l+h+"px")}}n.css("max-width",i+"px")}},b.prototype.openDropdown=function(e){if(this.isDropdownOpen()||!1===this._enabled||!0===this._readonly)return!1;if(this._fullScreenPopup){var i=this._lovMainField.getInputElem();this._setFilterFieldTextFunc(i.value)}return t(this._containerElem).addClass("oj-listbox-dropdown-open"),e||this.updateResults(!0,this._fullScreenPopup),!0},b.prototype.closeDropdown=function(){if(this.isDropdownOpen()){var e=t(this._containerElem);e.removeClass("oj-listbox-dropdown-open"),this._ariaExpanded&&(e.removeClass("oj-listbox-drop-above"),t(this._lovDropdown.getElement()).removeClass("oj-listbox-drop-above"),this._lovDropdown.close(),this._ariaExpanded=!1,this._lovMainField.getInputElem().setAttribute("aria-expanded","false"),this._lastSearchTerm=null)}},b.prototype.updateResults=function(e,t){var i;i=!0===e?"":this._filterInputText.rawValue||"";var n=this._lastSearchTerm;!0!==e&&n&&i===n||(this._lastSearchTerm=i,i.length>=this._minLength?e&&!0!==e?this._runQuery(i,t):this._runQuery(i,t,!0===e):this.closeDropdown())},b.prototype._runQuery=function(t,i,n){var r=this._lovDropdown;if(this._minLength>t.length)this.closeDropdown();else if(this.openDropdown(!0),this.hasData()){this._ariaExpanded||(r.open(),this._ariaExpanded=!0,this._lovMainField.getInputElem().setAttribute("aria-expanded","true")),i&&e.FocusUtils.focusFirstTabStop(r.getElement());var a=this._fetchFromDataProvider(t,n);a.then(function(){a===this._lastDataProviderPromise&&this._handleQueryResultsFetch()}.bind(this),function(e){a===this._lastDataProviderPromise&&(o.warn("Select: _fetchFromDataProvider promise was rejected: "+e),this._handleQueryResultsFetch())}.bind(this))}},b.prototype._handleQueryResultsFetch=function(){if(this.isDropdownOpen()){var e,t=this._lovDropdown.getResultsCount(),i=t?t.count:0,n=!t||t.done;0===i?e=this._getTranslatedStringFunc("noMatchesFound"):(this.sizeDropdown(),e=n?this._getTranslatedStringFunc("multipleMatchesFound",{num:String(i)}):this._getTranslatedStringFunc("nOrMoreMatchesFound",{num:String(i)})),this.updateLiveRegion(e)}},b.prototype.updateLiveRegion=function(e){t(this._liveRegion).text(e)},b.prototype.cancel=function(){this.closeDropdown()},b.prototype.handleDataProviderEvent=function(e){this._lastSearchTerm=null},b.prototype._fetchFromDataProvider=function(t,i){var n=!1,r=this._addBusyStateFunc("fetching data");"init"===this._fetchType&&(this.isDropdownOpen()||(n=!0,this._setUiLoadingStateFunc("start")),this._fetchType=null);var a=null;if(t){if(this._dataProvider){var s=this._dataProvider.getCapability("filter");s&&s.textFilter||o.error("Select: DataProvider does not support text filter.  Filtering results in dropdown may not work correctly.")}a=e.FilterFactory.getFilter({filterDef:{text:t}})}var l=new Promise(function(e,s){var d=this._lovDropdown.renderResults(t,a,f.isValueForPlaceholder(this._value)?null:this._value,i),u=function(){n&&this._setUiLoadingStateFunc("stop"),r(),l===this._lastDataProviderPromise?e():s("AbstractLovBase._fetchFromDataProvider: rejecting earlier promise")}.bind(this);d.then(function(){u()},function(e){l===this._lastDataProviderPromise&&o.warn("Select: renderResults promise was rejected: "+e),u()})}.bind(this));return this._lastDataProviderPromise=l,l},e.__registerWidget("oj.ojSelect2",t.oj.editableValue,{defaultElement:"<input>",widgetEventPrefix:"oj",_ALLOWED_INPUT_TYPES:["email","number","search","tel","text","url"],options:{placeholder:"",data:null,required:!1,virtualKeyboard:"search",readOnly:!1,valueItem:{key:null,data:null,metadata:null},itemText:"label",labelledBy:null},widget:function(){return t(this.OuterWrapper)},_ComponentCreate:function(){this._super(),this._cssOptionDefaults=a.parseJSONFromFontFamily("oj-searchselect-option-defaults")||{},this._fullScreenPopup="phone"===n.getDeviceRenderMode(),this._valueForPlaceholder=null,this._valueItemForPlaceholder={key:null,data:null,metadata:null},this._setupSelectResources()},_AfterCreate:function(){this._super(),this._initInputIdLabelForConnection(this._GetContentElement()[0],this.OuterWrapper.id,this.options.labelledBy);var e=this._getRootElement();this._focusable({element:e,applyHighlight:!1,afterToggle:this._handleAfterFocusToggle.bind(this,e)}),"none"===this.options.labelEdge&&this._updateLabel()},_IsTextFieldComponent:function(){return!0},_GetContentWrapper:function(){return this._lovMainField.getElement().querySelector(".oj-text-field-middle")},_handleAfterFocusToggle:function(e,t){"focusout"===t&&this._abstractLovBase.isDropdownOpen()&&e.classList.add("oj-focus")},_IsRequired:function(){return this.options.required},_labelledByUpdatedForInputComp:e.EditableValueUtils._labelledByUpdatedForInputComp,_initInputIdLabelForConnection:e.EditableValueUtils._initInputIdLabelForConnection,_linkLabelForInputComp:e.EditableValueUtils._linkLabelForInputComp,_AfterSetOptionRequired:e.EditableValueUtils._AfterSetOptionRequired,_GetTranslationsSectionName:function(){return"oj-ojSelectSingle"},_getTemplateSlot:function(t){var i=e.BaseCustomElementBridge.getSlotMap(this.OuterWrapper)[t];return i&&i[0]&&"TEMPLATE"===i[0].tagName?i[0]:null},_setupSelectResources:function(e){this._loadingIndicatorCount=0;for(var i=this.OuterWrapper,n=i.childNodes,r=[],o=0;o<n.length;o++)r.push(n[o]);var a=this.options;this._wrapDataProviderIfNeeded(a.data),this._addDataProviderEventListeners(),this._SetInputType(this._ALLOWED_INPUT_TYPES);var s=this,l=function(){return s.getTranslatedString.apply(s,arguments)},d=function(e){return f.addBusyState(i,e)},u=i.getAttribute("id");u||(u="oj-selectsingle-"+f.nextUid(),i.setAttribute("id",u));var c=u;this._idSuffix=u;var h=!a.disabled;this._lovEnabled=h;var p=a.readOnly||!1,_=this.element;_.prop("disabled",!(h&&!p));var v=this._cssOptionDefaults.showIndicatorDelay;v=parseInt(v,10),v=isNaN(v)?250:v,this._showIndicatorDelay=v;var g=_.attr("type");this._resolveValueItemLater=!1;var E="oj-searchselect";this._className=E,this._initContainer(E,c,p);var w=new y({className:E,ariaLabel:i.getAttribute("aria-label"),ariaControls:i.getAttribute("aria-controls"),idSuffix:c,inputType:g,enabled:h,readOnly:p,placeholder:a.placeholder,addBusyStateFunc:d,forceReadOnly:this._fullScreenPopup,endContent:this._createMainFieldEndContent(h,p),cachedMainFieldInputElement:e,createOrUpdateReadonlyDivFunc:this._createOrUpdateReadonlyDiv.bind(this)});this._lovMainField=w,this._initLovMainField(w);var S=w.getElement();i.appendChild(S);var F=this._createFilterInputText(E,c);this._fullScreenPopup||(F.style.visibility="hidden",i.appendChild(F)),this._filterInputText=F;var P=new m;this._initLovDropdownFunc=function(e){var n=function(t){this._fullScreenPopup&&F.setAttribute("aria-controls",t.id),e&&e()}.bind(this);this._initLovDropdown(c,g,u,l,d,n);var r=P.getElement();i.appendChild(r),r.addEventListener("lovDropdownEvent",this._handleLovDropdownEvent.bind(this)),t(w.getInputElem()).attr("aria-owns",r.id)}.bind(this),this._lovDropdown=P;var C=new b({className:E,dataProvider:this._wrappedDataProvider,containerElem:i,fullScreenPopup:this._fullScreenPopup,idSuffix:c,lovMainField:w,filterInputText:F,lovDropdown:P,liveRegion:this._liveRegion,enabled:h,readOnly:p,value:a.value,getTranslatedStringFunc:l,addBusyStateFunc:d,showMainFieldFunc:this._showMainField.bind(this),setFilterFieldTextFunc:this._setFilterFieldText.bind(this),setUiLoadingStateFunc:this._setUiLoadingState.bind(this)});this._abstractLovBase=C,_.attr("tabindex","-1").hide().attr("aria-hidden",!0),C.hasData()&&this._initSelectedValue(a.valueItem),this._refreshRequired(a.required),this._resolveValueItemLater=this._mergeValueAndValueItem(a.value,a.valueItem),this._updateLabel();for(var D=0;D<r.length;D++)i.appendChild(r[D])},_releaseSelectResources:function(e){for(var i=this._loadingIndicatorCount;i>=0;i--)this._setUiLoadingState("stop");this._loadingIndicatorCount=0,this._savedLoadingIndicator=!1,this._deferredSetDisplayValue=null,this._clearMainFieldFocusHandlerTimer(),t(this._filterInputText).remove(),e&&(t(this._lovMainField.getInputElem()).detach(),this._cleanUpMainFieldInputElement(),t(this._lovMainField.getInputElem()).off(this._lovMainFieldInputEventListeners)),t(this._lovMainField.getElement()).remove(),t(this._liveRegion).remove(),this._abstractLovBase.destroy(),this._lovDropdown.getElement()&&(t(this._lovDropdown.getElement()).remove(),this._lovDropdown.destroy());var n=this.OuterWrapper,r=n.classList;r.remove(this._className),r.remove("oj-form-control"),r.remove("oj-component"),r.remove("oj-read-only"),r.remove("oj-enabled"),r.remove("oj-disabled"),t(n).off("change","."+this._className+"-input",f.stopEventPropagation).off(this._containerEventListeners),this._containerEventListeners=null,this.element.removeAttr("aria-hidden tabindex").show();var o=this._$labelElem;o.attr("for",o.attr("data-oj-lov-for")),o.removeAttr("data-oj-lov-for"),this._$labelElem=null,this._removeDataProviderEventListeners(),this._wrappedDataProvider=null,this._liveRegion=null,this._abstractLovBase=null,this._lovMainField=null,this._filterInputText=null,this._lovDropdown=null},_cleanUpMainFieldInputElement:function(){var t=this._lovMainField.getInputElem();if(e.AgentUtils.getAgentInfo().browser===e.AgentUtils.BROWSER.IE)t.removeAttribute("readonly"),t.removeAttribute("role"),t.removeAttribute("type"),t.removeAttribute("aria-controls"),t.removeAttribute("aria-expanded"),t.removeAttribute("aria-label"),t.removeAttribute("aria-labelledby");else for(;t.hasAttributes();){var i=t.attributes[0].name;t.removeAttribute(i)}t.value=""},_updateLabel:function(){var e=this._GetLabelElement()||t();this._$labelElem=e;var i,n,r=this.options,o=this._lovMainField,a=this._lovDropdown,s=this._filterInputText;if(e.length>0?(e.attr("id")||e.attr("id",this._className+"-label-"+this._idSuffix),e.attr("data-oj-lov-for",e.attr("for")),i=e.attr("id")):r.labelledBy&&(i=r.labelledBy),e.length>0){var l=t(o.getInputElem());e.attr("for",l.attr("id"))}if(e.length>0)i||(n=e.text());else{var d=this.OuterWrapper.getAttribute("aria-label");d&&(n=d)}a.updateLabel(i,n),o.updateLabel(i,n),i?(s.setAttribute("labelled-by",i),s.setAttribute("aria-label","")):n&&(s.setAttribute("aria-label",n),s.setAttribute("labelled-by",""))},_initContainer:function(e,i,n){var r=this.OuterWrapper,o=t(r),a=r.classList;a.add(e),a.add("oj-form-control"),a.add("oj-component"),n?a.add("oj-read-only"):a.add(this._lovEnabled?"oj-enabled":"oj-disabled"),this._fullScreenPopup?a.add("oj-searchselect-mobile"):a.remove("oj-searchselect-mobile"),this._toggleNoValueStyleClass();var s=document.createElement("div");s.setAttribute("id","oj-listbox-live-"+i),s.setAttribute("class","oj-helper-hidden-accessible oj-listbox-liveregion"),s.setAttribute("aria-live","polite"),r.appendChild(s),o.on("change","."+e+"-input",f.stopEventPropagation),this._containerEventListeners={click:f.killEvent,keydown:this._handleContainerKeyDown.bind(this),mouseup:function(){o.removeClass("oj-active")}},o.on(this._containerEventListeners),this._liveRegion=s},_toggleNoValueStyleClass:function(){var e=this.OuterWrapper.classList;f.isValueForPlaceholder(this.options.value)?e.add("oj-searchselect-no-value"):e.remove("oj-searchselect-no-value")},_setFilterFieldText:function(e){this._ignoreFilterFieldRawValueChanged=!0,this._filterInputText.value=e,this._filterInputText.refresh(),this._ignoreFilterFieldRawValueChanged=!1},_showFilterField:function(t){if(!this._fullScreenPopup){var i=this._filterInputText;if("hidden"===i.style.visibility){var n=this._lovMainField,r=n.getInputElem();t||(this._setFilterFieldText(r.value),f.copyAttribute(r,"aria-describedby",i,"described-by"));var o=this._getFilterInputElem();o&&(o.setAttribute("role","combobox"),t||(f.copyAttribute(r,"aria-required",o,"aria-required"),f.copyAttribute(r,"aria-invalid",o,"aria-invalid"))),n.getInputElem().style.visibility="hidden",i.style.visibility="",this.OuterWrapper.appendChild(i)}if(!t)if(e.AgentUtils.getAgentInfo().browser===e.AgentUtils.BROWSER.IE){var a=f.addBusyState(this.OuterWrapper,"Select transferring focus to filter field");setTimeout(function(){i.focus(),a()},0)}else i.focus()}},_showMainField:function(){if(!this._fullScreenPopup){var e=this._filterInputText;if("hidden"!==e.style.visibility){var t=this._lovMainField.getInputElem();t.setSelectionRange(1e6,1e6),t.style.visibility="",e.style.visibility="hidden"}}},_isFilterInputTextCleared:function(){var e=this._filterInputText.rawValue;return null==e||""===e},_handleContainerKeyDown:function(t){if(this._lovEnabled&&!this.options.readOnly&&!f.isControlOrFunctionKey(t))if(t.which!==f.KEYS.PAGE_UP&&t.which!==f.KEYS.PAGE_DOWN){var i,n=this._abstractLovBase,r=this._lovDropdown;switch(t.which){case f.KEYS.UP:case f.KEYS.DOWN:if(n.isDropdownOpen())if(e.FocusUtils.focusFirstTabStop(r.getElement()),this.OuterWrapper.classList.add("oj-focus"),e.AgentUtils.getAgentInfo().browser===e.AgentUtils.BROWSER.IE){var o=f.addBusyState(this.OuterWrapper,"Select showing filter field while arrowing into dropdown");setTimeout(function(){this._showFilterField(!0),o()}.bind(this),0)}else this._showFilterField(!0);else this._openDropdown();t.preventDefault();break;case f.KEYS.ENTER:t.preventDefault(),!this._fullScreenPopup&&this._isFilterInputTextCleared()?this._handleSelection(this._valueItemForPlaceholder):!this._fullScreenPopup&&n.isDropdownOpen()&&null!=(i=r.getValueItemForSelection())&&this._fetchDataAndSelect(i,t);break;case f.KEYS.TAB:if(!this._fullScreenPopup){if(t.shiftKey)for(var a=this._filterInputText,s=a.parentNode;s.firstChild!==a;)s.appendChild(s.firstChild);this._isFilterInputTextCleared()?this._handleSelection(this._valueItemForPlaceholder):n.isDropdownOpen()&&null!=(i=r.getValueItemForSelection())&&this._fetchDataAndSelect(i,t)}this._closeDropdown();break;case f.KEYS.ESC:n.isDropdownOpen()&&(n.cancel(),t.preventDefault())}}else t.preventDefault()},_handleContainerMouseDown:function(i){var n=this._abstractLovBase;this._lovEnabled||i.preventDefault();var r=this.OuterWrapper,o=t(r),a=!1;if(r.classList.contains("oj-form-control-label-top")){var s=o.children(".oj-label");s.length>0&&e.DomUtils.isAncestorOrSelf(s[0],i.target)&&(a=!0)}var l=0===i.button,d=!1;if(l&&!this.options.readOnly){if(this._fullScreenPopup){var u=r.querySelector(".oj-searchselect-clear-value");if(u&&e.DomUtils.isAncestorOrSelf(u,i.target))return}n.isDropdownOpen()||!this._lovEnabled||a||(this._openDropdown(),this._fullScreenPopup&&i.preventDefault())}a||(o.addClass("oj-active"),l&&(!this._fullScreenPopup&&this._lovEnabled&&("hidden"===this._filterInputText.style.visibility?(d=!0,this._lovMainField.getInputElem().focus()):this.options.readOnly||(i.target===this._getFilterInputElem()&&(d=!0),this._showFilterField())),d||i.preventDefault()))},_handleLovDropdownEvent:function(i){var n=i.detail,r=this._abstractLovBase;switch(n.subtype){case"closeDropdown":"escKeyDown"===n.trigger?this._filterInputText.focus():"clickAway"===n.trigger&&(this._showMainField(),this.OuterWrapper.classList.remove("oj-focus")),this._closeDropdown();break;case"tabOut":if(this._filterInputText.focus(),!this._fullScreenPopup){let e=this._lovDropdown.getValueItemForSelection();null!=e&&this._fetchDataAndSelect(e,i)}break;case"sizeDropdown":r.sizeDropdown();break;case"adjustDropdownPosition":var o=r.getDropdownPosition();t(n.popupElem).position(o),r.adjustDropdownPosition(n.popupElem);break;case"openPopup":var a=n.psOptions;a[e.PopupService.OPTION.LAUNCHER]=this.element,a[e.PopupService.OPTION.POSITION]=r.getDropdownPosition(),e.PopupService.getInstance().open(a);break;case"handleSelection":this._handleSelection(n.valueItem,n.event);break;case"dropdownClosed":this._searchTextOnKeyDown=void 0}},_fetchDataAndSelect:function(e,t){if(null!=e.data)this._handleSelection(e,t);else{var i=[e.key],n=function(){this._handleSelection(this._valueItemForPlaceholder)}.bind(this),r=function(i){if(i.data.length>0){var r={};r.key=e.key,r.data=i.data[0],r.metadata=i.metadata[0],this._handleSelection(r,t)}else n()}.bind(this);this._fetchByKeysFromDataProvider(i).then(r,n)}},_handleSelection:function(e,t){var i=f.isValueItemForPlaceholder(e)?this._valueItemForPlaceholder:e;if(this._handleUserSelectedValueItem(i,t,void 0),!t||"blur"!==t.type){var n=this._lovMainField.getInputElem();this._fullScreenPopup?n.focus():(f.isValueItemForPlaceholder(i)&&(n.value=""),this._setFilterFieldText(n.value),this._showFilterField())}this._closeDropdown()},_closeDropdown:function(){var e=this._lovDropdown.getElement();if(null!=e){var t=f.addBusyState(this.OuterWrapper,"Select waiting for dropdown busy context before closing dropdown"),i=function(){t(),this._abstractLovBase.closeDropdown()}.bind(this);u.getContext(e).getBusyContext().whenReady().then(i,function(e){o.warn("Select: dropdown busy context rejected when closing dropdown: "+e),i()})}},_handleUserSelectedValueItem:function(e,t,i){var n=this._abstractLovBase;this._cachedFetchByKeys&&(this._valueHasChanged=!0,this._setUiLoadingState("stop")),this._resolveValueItemLater=!0;var r=null;f.isValueItemForPlaceholder(e)||(r=e.key),n.setValue(r),this._userSelectedValueItem=e;var o=this._SetValue(r,t,{doValueChangeCheck:!1,_context:i}),a=function(){this._userSelectedValueItem=null}.bind(this);o instanceof Promise?o.then(a,a):a()},_createMainFieldEndContent:function(e,t){var i=document.createElement("span"),n=this._createDropdownIcon(e,t);if(i.appendChild(n),this._fullScreenPopup){var r=this._createClearValueIcon();i.appendChild(r)}return i},_createDropdownIcon:function(e,t){var i=this._className,n=document.createElement("a"),r=i+"-arrow "+i+"-open-icon "+i+"-icon oj-component-icon oj-clickable-icon-nocontext";t||e||(r+=" oj-disabled"),n.setAttribute("class",r),n.setAttribute("role","presentation");var o=this.getTranslatedString("labelAccOpenDropdown");return n.setAttribute("aria-label",o),n},_createClearValueIcon:function(){var e=this._className,t=document.createElement("a"),i=e+"-clear-value "+e+"-clear-value-icon "+e+"-icon oj-component-icon oj-clickable-icon-nocontext";t.setAttribute("class",i),t.setAttribute("role","button");var n=this.getTranslatedString("labelAccClearValue");return t.setAttribute("aria-label",n),t.addEventListener("click",function(){this._handleSelection(this._valueItemForPlaceholder)}.bind(this)),t},_initLovMainField:function(e){this._lovMainFieldInputEventListeners={focus:function(e){if(f.killEvent(e),!this._fullScreenPopup&&!this.options.readOnly){this._clearMainFieldFocusHandlerTimer();var t=f.addBusyState(this.OuterWrapper,"Select showing filter field after focusing main field");this._mainFieldFocusHandlerTimer=c.getTimer(0),this._mainFieldFocusHandlerTimer.getPromise().then(function(e){e&&(this._mainFieldFocusHandlerTimer=null,this._showFilterField(),this._transferSelectionRangeToFilterField()),t()}.bind(this))}}.bind(this)},t(e.getInputElem()).on(this._lovMainFieldInputEventListeners),t(e.getElement()).on({mousedown:this._handleContainerMouseDown.bind(this)})},_clearMainFieldFocusHandlerTimer:function(){this._mainFieldFocusHandlerTimer&&(this._mainFieldFocusHandlerTimer.clear(),this._mainFieldFocusHandlerTimer=null)},_transferSelectionRangeToFilterField:function(){var e=this._lovMainField.getInputElem(),t=this._getFilterInputElem();t&&t.setSelectionRange(e.selectionStart,e.selectionEnd,e.selectionDirection)},_getFilterInputElem:function(){var e=t(this._filterInputText).find("input");return e.length>0?e[0]:null},_createFilterInputText:function(i,n){var r=this.OuterWrapper.getAttribute("aria-label"),o=this.OuterWrapper.getAttribute("aria-controls"),a=this.options,s=document.createElement("oj-input-text");if(s.setAttribute("display-options.messages","none"),s.setAttribute("user-assistance-density","compact"),s.setAttribute("id",i+"-filter-"+n),s.setAttribute("class",i+"-filter"),s.setAttribute("clear-icon",this._fullScreenPopup?"always":"never"),s.setAttribute("autocomplete","off"),s.setAttribute("aria-autocomplete","list"),s.setAttribute("data-oj-internal",""),s.setAttribute("data-oj-binding-provider","none"),a.placeholder&&s.setAttribute("placeholder",a.placeholder),r&&s.setAttribute("aria-label",r),!this._fullScreenPopup&&o&&s.setAttribute("aria-controls",o),s.setAttribute("virtual-keyboard",a.virtualKeyboard),this._fullScreenPopup){var l=this.getTranslatedString("cancel"),d=document.createElement("span");d.setAttribute("id","cancelButton_"+this._idSuffix),d.setAttribute("slot","start"),d.setAttribute("class",i+"-back-button"),d.setAttribute("aria-label",l),d.addEventListener("click",function(){this._lovMainField.getInputElem().focus(),this._abstractLovBase.cancel()}.bind(this)),s.appendChild(d);var u=document.createElement("span");u.setAttribute("class",i+"-back-icon "+i+"-icon oj-component-icon oj-clickable-icon-nocontext"),d.appendChild(u)}else{var c=document.createElement("a");c.setAttribute("class",i+"-arrow "+i+"-open-icon "+i+"-icon oj-component-icon oj-clickable-icon-nocontext"),c.setAttribute("slot","end"),c.style.visibility="hidden",s.appendChild(c)}var h=t(this.OuterWrapper);return s.addEventListener("rawValueChanged",function(e){this._ignoreFilterFieldRawValueChanged||this._updateResults(e)}.bind(this)),s.addEventListener("focus",function(){h.addClass("oj-focus")}),s.addEventListener("blur",function(t){h.removeClass("oj-focus"),this._fullScreenPopup||t.relatedTarget&&e.DomUtils.isAncestor(this._lovDropdown.getElement(),t.relatedTarget)||this._showMainField()}.bind(this)),this._fullScreenPopup||s.addEventListener("mousedown",this._handleContainerMouseDown.bind(this)),s},_initLovDropdown:function(e,i,n,r,o,a){this._lovDropdown.init({dataProvider:this._wrappedDataProvider,className:"oj-select",parentId:n,idSuffix:e,fullScreenPopup:this._fullScreenPopup,inputType:i,bodyElem:t(this.OuterWrapper).closest("body")[0],itemTemplate:this._getTemplateSlot("itemTemplate"),collectionTemplate:this._getTemplateSlot("collectionTemplate"),getTemplateEngineFunc:this._loadTemplateEngine.bind(this),templateContextComponentElement:this.OuterWrapper,getTranslatedStringFunc:r,addBusyStateFunc:o,itemTextRendererFunc:this._itemTextRenderer.bind(this),filterInputText:this._filterInputText,afterDropdownInitFunc:a})},_openDropdown:function(){var e=this._abstractLovBase;if(this._initLovDropdownFunc){var t=this._initLovDropdownFunc;this._initLovDropdownFunc=null,t(function(){e.openDropdown()})}else e.openDropdown()},_updateResults:function(e){var t=this._abstractLovBase;if(this._initLovDropdownFunc){var i=this._initLovDropdownFunc;this._initLovDropdownFunc=null,i(function(){t.updateResults(e)})}else t.updateResults(e)},_loadTemplateEngine:function(){if(!this._templateEngine){var e=f.addBusyState(this.OuterWrapper,"Select loading template engine");return new Promise(function(t,i){n.__getTemplateEngine().then(function(i){this._templateEngine=i,t(i),e()}.bind(this),function(t){i(new Error("Error loading template engine: "+t)),e()})}.bind(this))}return Promise.resolve(this._templateEngine)},_refreshRequired:e.EditableValueUtils._refreshRequired,_createOrUpdateReadonlyDiv:e.EditableValueUtils._createOrUpdateReadonlyDiv,_AriaRequiredUnsupported:function(){return!1},refresh:function(){var e=this._lovMainField.getInputElem();this._bSuperRefreshing=!0,this._super(),this._bSuperRefreshing=!1,this._releaseSelectResources(!0),this._setupSelectResources(e),this._initComponentMessaging(),this._deferredSetDisplayValue&&this._deferredSetDisplayValue()},_SetupResources:function(){this._super(),this._bReleasedResources&&(this._bReleasedResources=!1,this._setupSelectResources(),this._initComponentMessaging())},_ReleaseResources:function(){this._super(),this._bReleasedResources=!0,this._releaseSelectResources()},_setOptions:function(e,t){var i;this._processSetOptions||(this._processSetOptions=[]),this._processSetOptions.push({});var n=!1,r=e.hasOwnProperty("data"),o=e.hasOwnProperty("value"),a=e.hasOwnProperty("valueItem");r&&(o?(this._deferSettingValue=!0,i=f.addBusyState(this.OuterWrapper,"Defer setting value")):a||(n=this._valueItemSetInternally));try{this._super(e,t);var s=this._processSetOptions.pop();s.forRefresh&&s.forRefresh(),i&&(this._deferSettingValue=!1),s.value?s.value():n&&this._setOption("value",this.options.value)}finally{i&&i()}},_setOption:function(e,t,i){var n,r=this._abstractLovBase;if(this._super(e,t,i),this._processSetOptions&&this._processSetOptions.length>0&&(n=this._processSetOptions[this._processSetOptions.length-1]),"valueItem"===e)this._valueItemSetInternally=!1,this._syncValueWithValueItem(t,this.options.value);else if("value"===e){var o=function(){r.setValue(t),f.isValueForPlaceholder(t)?this._setValueItem(this._valueItemForPlaceholder):this._updateValueItem(t),this._SetDisplayValue()}.bind(this);n?n.value=o:o()}else if("disabled"===e||"readOnly"===e||"placeholder"===e||"data"===e||"itemText"===e){var a=function(){this.refresh()}.bind(this);n?n.forRefresh=a:a()}else if("labelledBy"===e){if(this.options.labelledBy){var s=this._GetContentElement()[0].id;this._labelledByUpdatedForInputComp(this.options.labelledBy,s)}this._updateLabel()}},_AfterSetOption:function(e,t){switch(this._superApply(arguments),e){case"required":this._AfterSetOptionRequired(e);break;case"virtualKeyboard":this._SetInputType(this._ALLOWED_INPUT_TYPES),this.refresh();break;case"labelHint":case"labelEdge":this._updateLabel()}},_AfterSetOptionValue:function(e,t){this._superApply(arguments),"value"===e&&this._toggleNoValueStyleClass()},_NotifyDetached:function(){this._superApply(arguments),this._abstractLovBase.closeDropdown()},_NotifyHidden:function(){this._superApply(arguments),this._abstractLovBase.closeDropdown()},_VerifyConnectedForSetup:function(){return!0},_SetInputType:e.EditableValueUtils._SetInputType,_SetDisplayValue:function(e){this._deferSettingValue||(this._bSuperRefreshing?this._deferredSetDisplayValue=function(){this._deferredSetDisplayValue=null,this._SetDisplayValue(e)}.bind(this):(this._applyValueItem(this.options.valueItem)||this._initSelectedValue(),this._resolveValueItemLater=!1))},validate:function(){var e=t(this._lovMainField.getInputElem()).val(),i=this._SetValue(e,null,this._VALIDATE_METHOD_OPTIONS);return i=i instanceof Promise?i.then(function(e){return Promise.resolve(e?"valid":"invalid")}):Promise.resolve(i?"valid":"invalid")},_SetValue:function(e,t,i){return e===this._GetDisplayValue()&&void 0===(e=this.options.value)&&(e=null),this._super(e,t,i)},_NotifyContextMenuGesture:function(e,t,i){var n=this._GetMessagingLauncherElement();this._OpenContextMenu(t,i,{launcher:n})},_GetContentElement:function(){return this._lovMainField?t(this._lovMainField.getInputElem()):this.element},_GetDefaultStyleClass:function(){return"oj-select"},_isDataProvider:function(t){return!(!t||!e.DataProviderFeatureChecker)&&e.DataProviderFeatureChecker.isDataProvider(t)},_isTreeDataProvider:function(t){return!(!t||!e.DataProviderFeatureChecker)&&e.DataProviderFeatureChecker.isTreeDataProvider(t)},_wrapDataProviderIfNeeded:function(e){if(this._isDataProvider(e)){var t=e;this._isTreeDataProvider(e)?e instanceof d||(t=new d(e)):(e instanceof l||(t=new l(e)),t=new s(t)),t=new _(t),this._wrappedDataProvider=t}else this._wrappedDataProvider=new _},_addDataProviderEventListeners:function(){var e=this._wrappedDataProvider;if(e){this._removeDataProviderEventListeners();var t=this._handleDataProviderEvent.bind(this);this._savedDataProviderEH=t,e.addEventListener("mutate",t),e.addEventListener("refresh",t)}},_removeDataProviderEventListeners:function(){var e=this._wrappedDataProvider,t=this._savedDataProviderEH;e&&t&&(e.removeEventListener("mutate",t),e.removeEventListener("refresh",t),this._savedDataProviderEH=void 0)},_handleDataProviderEvent:function(t){if(!t.filterCriterionChanged){var i=this.options.value;if("mutate"===t.type)if(null!=t.detail.remove)t.detail.remove.keys.forEach(function(t){e.Object.compareValues(t,i)&&(i=this._valueForPlaceholder,o.warn("Select: selected value removed from data provider"))}.bind(this));this._setOption("value",i),this._abstractLovBase.handleDataProviderEvent(t)}},_mergeValueAndValueItem:function(t,i){var n=!1;return f.isValueForPlaceholder(t)?i&&this._syncValueWithValueItem(i,t):i&&(n=!e.Object.compareValues(t,i.key)),n},_syncValueWithValueItem:function(t,i){var n,r=this._abstractLovBase;if(n=f.isValueItemForPlaceholder(t)?f.isValueForPlaceholder(i)?i:this._valueForPlaceholder:t?t.key:null,!e.Object.compareValues(n,i)){var o={doValueChangeCheck:!1,_context:{internalSet:!0,writeback:!0}};this.option("value",n,o),r.setValue(n),this._AfterSetOptionValue("value",o)}},_initSelectedValue:function(e){if(!this._applyValueItem(e)){var t=f.isValueItemForPlaceholder(e)?this.options.value:e.key;!f.isValueForPlaceholder(t)&&this._deferSettingValue||this._initSelectionHelper(t,this._updateSelectedOption.bind(this))}},_applyValueItem:function(e){return!this._resolveValueItemLater&&!f.isValueItemForPlaceholder(e)&&(this._updateInputElemValue(e),!0)},_updateSelectedOption:function(e){this._updateInputElemValue(e),this._setValueItem(e)},_setValueItem:function(e){this._valueItemSetInternally=!0;var t=e;e&&!f.isValueItemForPlaceholder(e)&&(t=f.createValueItem(e.key,e.data,e.metadata));this.option("valueItem",t,{_context:{internalSet:!0,changed:!0,writeback:!0}})},_updateValueItem:function(e){this._initSelectionHelper(e,function(e){this._setValueItem(e),this._updateSelectedOption(e)}.bind(this))},_updateInputElemValue:function(e){var i=t(this._lovMainField.getInputElem());this._selectedValueItem=e;var n=null;if(e&&e.data){var r=this._itemTextRenderer(e),o=i.val();void 0!==r&&o!==r&&(n=r)}else n="";if(null!==n){if(i.val(n),this.options.readOnly){let e=this._getReadonlyDiv();e&&(e.textContent=n)}(!this._fullScreenPopup&&"hidden"!==this._filterInputText.style.visibility||this._fullScreenPopup&&this._abstractLovBase.isDropdownOpen())&&this._setFilterFieldText(n)}},_itemTextRenderer:function(e){var t;if(e&&e.data){var i=this.options.itemText;t="string"==typeof i?e.data[i]:i(e)}return t},_initSelectionHelper:function(e,t){if(f.isValueForPlaceholder(e))t(this._valueItemForPlaceholder);else if(this._abstractLovBase.hasData())if(this._userSelectedValueItem){var i=this._userSelectedValueItem;this._initSelectionFetchByKey({data:[i.data],metadata:[i.metadata]},e,t)}else this.options.data?(this._loadingAwaitingData&&(this._loadingAwaitingData=!1,this._setUiLoadingState("stop")),this._fetchByKeysFromDataProvider([e]).then(function(i){this._bReleasedResources||this._initSelectionFetchByKey(i,e,t)}.bind(this),function(){this._bReleasedResources||this._initSelectionFetchByKey(null,e,t)}.bind(this))):this._loadingAwaitingData||(this._loadingAwaitingData=!0,this._setUiLoadingState("start"))},_initSelectionFetchByKey:function(t,i,n){if(e.Object.compareValues(i,this.options.value)&&!this._valueHasChanged){var r=null,a=null;t&&t.data&&t.data.length>0?(r=t.data[0],a=t.metadata[0]):o.warn("SelectSingle: could not fetch data for selected value: "+i),n(f.createValueItem(i,r,a)),this._valueHasChanged=void 0}},_fetchByKeysFromDataProvider:function(t){var i;if(this._cachedFetchByKeys&&this._cachedFetchByKeys.promise&&e.Object.compareValues(t,this._cachedFetchByKeys.key))i=this._cachedFetchByKeys.promise;else{var n=f.addBusyState(this.OuterWrapper,"fetching selected data"),r=!1;"init"===this._abstractLovBase.getFetchType()&&(this._abstractLovBase.isDropdownOpen()||(r=!0,this._setUiLoadingState("start"))),i=new Promise(function(e,i){this._wrappedDataProvider.fetchByKeys({keys:new Set(t)}).then(function(t){var i=[],n=[];t.results.forEach(function(e){i.push(e.data),n.push(e.metadata)}),e({data:i,metadata:n})},function(e){i(e)})}.bind(this)),this._cachedFetchByKeys={key:t,promise:i};var a=function(){this._bReleasedResources||(this._cachedFetchByKeys=void 0,r&&this._setUiLoadingState("stop")),n()}.bind(this);i.then(function(){a()},function(e){o.warn("Select: fetchByKeys promise was rejected: "+e),a()})}return i},_setUiLoadingState:function(e){"start"===e?(this._loadingIndicatorTimer&&this._loadingIndicatorTimer.clear(),this._loadingIndicatorTimer=c.getTimer(this._showIndicatorDelay),this._loadingIndicatorTimer.getPromise().then(function(e){e&&this._addLoadingIndicator()}.bind(this))):"stop"===e&&(this._loadingIndicatorTimer&&(this._loadingIndicatorTimer.clear(),this._loadingIndicatorTimer=null),this._removeLoadingIndicator())},_addLoadingIndicator:function(){this._loadingIndicatorCount+=1,this._savedLoadingIndicator||(this._SetLoading(),this._savedLoadingIndicator=!0)},_removeLoadingIndicator:function(){this._loadingIndicatorCount>0&&(this._loadingIndicatorCount-=1),0===this._loadingIndicatorCount&&this._savedLoadingIndicator&&(this._ClearLoading(),this._savedLoadingIndicator=!1)}}),i.setDefaultOptions({ojSelect2:{displayOptions:{converterHint:["none"]}}}),p.extension._WIDGET_NAME="ojSelect2",p.extension._INNER_ELEM="input",p.extension._ALIASED_PROPS={readonly:"readOnly"},e.CustomElementBridge.register("oj-select-single",{metadata:e.CollectionUtils.mergeDeep(p,{properties:{readonly:{binding:{consume:{name:"readonly"}}},userAssistanceDensity:{binding:{consume:{name:"userAssistanceDensity"}}}}})})});
define('ojs/ojfilepicker',["exports","ojs/ojcore-base","ojs/ojdomutils","ojs/ojvcomponent","ojs/ojtranslation"],function(e,t,i,r,l){"use strict";
/**
    * @license
    * Copyright (c) 2017 2020, Oracle and/or its affiliates.
    * The Universal Permissive License (UPL), Version 1.0
    * as shown at https://oss.oracle.com/licenses/upl/
    * @ignore
    */var n=function(e,t,i,r){var l,n=arguments.length,s=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(l=e[a])&&(s=(n<3?l(s):n>3?l(t,i,s):l(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s};e.FilePicker=class extends r.VComponent{constructor(e){super(e),this.state={focus:!1,validity:"NA"},this.inputElemRef=(e=>{this.inputElem=e}),this.rootElemRef=(e=>{this.rootElem=e})}_handleSelectingFiles(e){return("click"===e.type||"keypress"===e.type&&13===e.keyCode)&&(this.selecting=!0,e.preventDefault(),this.inputElem.value=null,this.inputElem.click(),!0)}_handleFileSelected(e){e.preventDefault(),e.stopPropagation();var t=e.target.files;if(t.length>0){var i=this._validateTypes(t).rejected;i.length>0?this._fireInvalidSelectAction(this._getMimeTypeValidationMessages(i),e,!1):this._handleFilesAdded(t,e)}this.selecting=!1}_handleDragEnter(e){e.preventDefault(),e.stopPropagation()}_handleDragOver(e){e.preventDefault(),e.stopPropagation();var i=e.dataTransfer;if(!this.inDropZone){var r=t.AgentUtils.getAgentInfo();if(this.inDropZone=!0,this.isDroppable=!0,r.browser!==t.AgentUtils.BROWSER.SAFARI&&r.browser!==t.AgentUtils.BROWSER.IE){var n=i.items,s=[],a=this._validateSelectionMode(n),o=this._validateTypes(n);a&&0===o.rejected.length?this.updateState({validity:"valid"}):(this.isDroppable=!1,a?s=this._getMimeTypeValidationMessages(o.rejected):s.push({severity:"error",summary:l.getTranslatedString("oj-ojFilePicker.singleFileUploadError")}),this._fireInvalidSelectAction(s,e,!0))}else this.updateState({validity:"valid"})}}_handleDragLeave(e,t){this.inDropZone&&(e.preventDefault(),e.stopPropagation(),this.rootElem.contains(e.relatedTarget)||(this.inDropZone=!1,this.updateState({validity:"NA"}),this.isDroppable||t||(this.dragPromiseResolver(),this.dragPromiseResolver=null)))}_handleFileDrop(e){if(this.inDropZone){e.preventDefault(),e.stopPropagation();var t=this._createFileList(e.dataTransfer.files),i=!1;if(this.isDroppable){var r=[];if(this._validateSelectionMode(t)){var n=this._validateTypes(t);n.rejected.length>0&&(r=this._getMimeTypeValidationMessages(n.rejected),i=!0)}else r.push({severity:"error",summary:l.getTranslatedString("oj-ojFilePicker.singleFileUploadError")});r.length>0&&(this.isDroppable=!1,this._fireInvalidSelectAction(r,e,!1)),this.isDroppable&&this._handleFilesAdded(t,e)}this._handleDragLeave(e,i)}}_handleFocusIn(e){this.selecting||this.updateState({focus:!i.recentPointer()})}_handleFocusOut(e){this.selecting||this.updateState({focus:!1})}render(){var e,t;const i=this.props,r=null===(t=(e=this.props).trigger)||void 0===t?void 0:t.call(e);if(i.disabled)return this._renderDisabled(i,r);const l="drop"!=i.selectOn?this._handleSelectingFiles:void 0;return r?this._renderWithCustomTrigger(i,r,l):this._renderWithDefaultTrigger(i,l)}_renderDisabled(e,t){const i=t?"oj-filepicker":"oj-filepicker oj-filepicker-no-trigger";return r.h("oj-file-picker",{class:i},r.h("div",{class:"oj-filepicker-disabled oj-filepicker-container"},t||this._renderDefaultTriggerContent(e)))}_renderWithCustomTrigger(e,t,i){const l=this._getDndHandlers(e);return r.h("oj-file-picker",{class:"oj-filepicker"+this._getFocusClass(),ref:this.rootElemRef,onFocusin:this._handleFocusIn,onFocusout:this._handleFocusOut},this._renderInputElement(e),r.h("div",{onClick:i,onKeypress:this._handleSelectingFiles,onDragenter:l.handleDragEnter,onDragover:l.handleDragOver,onDragleave:l.handleDragLeave,onDragend:l.handleDragLeave,onDrop:l.handleFileDrop,class:"oj-filepicker-container"},t))}_renderWithDefaultTrigger(e,t){const i=this.state.validity,l="valid"===i?" oj-valid-drop":"invalid"===i?" oj-invalid-drop":"",n=this._getDndHandlers(e);return r.h("oj-file-picker",{class:"oj-filepicker oj-filepicker-no-trigger",ref:this.rootElemRef},this._renderInputElement(e),r.h("div",{onClick:t,onKeypress:this._handleSelectingFiles,class:"oj-filepicker-container"},r.h("div",{tabindex:"0",class:"oj-filepicker-dropzone"+l+this._getFocusClass(),onDragenter:n.handleDragEnter,onDragover:n.handleDragOver,onDragleave:n.handleDragLeave,onDragend:n.handleDragLeave,onDrop:n.handleFileDrop,onFocusin:this._handleFocusIn,onFocusout:this._handleFocusOut},this._renderDefaultTriggerContent(e))))}_renderDefaultTriggerContent(e){const t="single"==e.selectionMode;return[r.h("div",null,r.h("div",{class:"oj-filepicker-text"},l.getTranslatedString("oj-ojFilePicker.dropzonePrimaryText")),r.h("div",{class:"oj-filepicker-secondary-text"},t?l.getTranslatedString("oj-ojFilePicker.secondaryDropzoneText"):l.getTranslatedString("oj-ojFilePicker.secondaryDropzoneTextMultiple"))),r.h("div",{class:"oj-filepicker-icon oj-fwk-icon-plus oj-fwk-icon"})]}_renderInputElement(e){const t=e.accept,i=t&&t.length?t.join(","):null;return r.h("input",{type:"file",class:"oj-helper-hidden",multiple:"multiple"==this.props.selectionMode,accept:i,ref:this.inputElemRef,onChange:this._handleFileSelected,capture:"implementation"===e.capture?"":e.capture})}_getDndHandlers(e){return"click"!=e.selectOn?{handleDragEnter:this._handleDragEnter,handleDragOver:this._handleDragOver,handleDragLeave:this._handleDragLeave,handleFileDrop:this._handleFileDrop}:{}}_getFocusClass(){return this.state.focus?" oj-focus-highlight":""}_validateSelectionMode(e){return"single"!==this.props.selectionMode||1===e.length}_validateTypes(e){var t,i,r=[],n=[];if(e)for(var s=0;s<e.length;s++){var a=(t=e[s]).name;if(i=l.getTranslatedString("oj-ojFilePicker.unknownFileType"),a){var o=a.split(".");i=o.length>1?"."+o.pop():i}i=t.type?t.type:i,-1===r.indexOf(i)&&-1===n.indexOf(i)&&(this._acceptFile(t)?r.push(i):n.push(i))}return{accepted:r,rejected:n}}_getMimeTypeValidationMessages(e){var t=[];return 1===e.length?t.push({severity:"error",summary:l.getTranslatedString("oj-ojFilePicker.singleFileTypeUploadError",{fileType:e[0]})}):t.push({severity:"error",summary:l.getTranslatedString("oj-ojFilePicker.multipleFileTypeUploadError",{fileTypes:e.join(l.getTranslatedString("oj-converter.plural-separator"))})}),t}_acceptFile(e){var i,r=this.props.accept;if(!r||0===r.length||!e)return!0;for(var l=0;l<r.length;l++){if(!(i=t.StringUtils.trim(r[l])))return!0;if(i.startsWith(".",0)){if(!e.name||e.name&&e.name.endsWith(i))return!0}else{if(!e.type)return!1;if("image/*"===i){if(e.type.startsWith("image/",0))return!0}else if("video/*"===i){if(e.type.startsWith("video/",0))return!0}else if("audio/*"===i){if(e.type.startsWith("audio/",0))return!0}else if(e.type===i)return!0}}return!1}_handleFilesAdded(e,t){var i,r,l=this._createFileList(e);null===(r=(i=this.props).onOjBeforeSelect)||void 0===r||r.call(i,{files:l,originalEvent:t}).then(()=>{var e,i;null===(i=(e=this.props).onOjSelect)||void 0===i||i.call(e,{files:l,originalEvent:t})},e=>{this._fireInvalidSelectAction(e,t,!1)})}_fireInvalidSelectAction(e,t,i){var r,l;i&&this.updateState({validity:"invalid"});var n=i?new Promise(e=>{this.dragPromiseResolver=e}):null;null===(l=(r=this.props).onOjInvalidSelect)||void 0===l||l.call(r,{messages:e,originalEvent:t,until:n})}_createFileList(e){for(var t={length:{value:e.length},item:{value:function(e){return this[e]}}},i=0;i<e.length;i++)t[i]={value:e[i],enumerable:!0};return Object.create(FileList.prototype,t)}},e.FilePicker.metadata={extension:{_DEFAULTS:class{constructor(){this.accept=null,this.capture=null,this.disabled=!1,this.selectOn="auto",this.selectionMode="multiple"}}},properties:{accept:{type:"Array<string>|null",value:null},capture:{type:"string|null",enumValues:["environment","implementation","user"],value:null},disabled:{type:"boolean",value:!1},selectOn:{type:"string",enumValues:["auto","click","clickAndDrop","drop"],value:"auto"},selectionMode:{type:"string",enumValues:["multiple","single"],value:"multiple"}},slots:{trigger:{}},events:{ojBeforeSelect:{cancelable:!0},ojInvalidSelect:{},ojSelect:{}}},n([r.listener()],e.FilePicker.prototype,"_handleSelectingFiles",null),n([r.listener()],e.FilePicker.prototype,"_handleFileSelected",null),n([r.listener()],e.FilePicker.prototype,"_handleDragEnter",null),n([r.listener()],e.FilePicker.prototype,"_handleDragOver",null),n([r.listener()],e.FilePicker.prototype,"_handleDragLeave",null),n([r.listener()],e.FilePicker.prototype,"_handleFileDrop",null),n([r.listener()],e.FilePicker.prototype,"_handleFocusIn",null),n([r.listener()],e.FilePicker.prototype,"_handleFocusOut",null),e.FilePicker=n([r.customElement("oj-file-picker")],e.FilePicker),Object.defineProperty(e,"__esModule",{value:!0})});
var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};define('viewModels/x-modal',["require","exports","ojs/ojarraydataprovider","knockout","../app/format","../app/bgv-parse","ojs/ojdialog","ojs/ojlabel","ojs/ojlabelvalue","ojs/ojformlayout","ojs/ojselectsingle","ojs/ojfilepicker","ojs/ojbutton","ojs/ojinputtext"],(function(require,e,t,r,o,a){"use strict";return r=__importStar(r),function(){function e(e){var n=this;this.selectedFormat=r.observable(o.Format.defaultFormat);var i=o.Format.formats.map((function(e){return{value:e,label:o.Format.create(e).longName}}));this.formats=new t(i,{keyAttributes:"value"}),this.error=r.observable(""),this.description=r.pureComputed((function(){return o.Format.create(n.selectedFormat()).description})),this.selectedFile=r.observable(""),this.selectedFileContent=r.observable(),this.showError=r.observable(!1),this.dataSourceName=r.observable(""),this.isVisible=r.pureComputed((function(){return void 0!==n.selectedFileContent()})),this.message=r.pureComputed((function(){return n.showError()?n.error():n.selectedFile()?n.selectedFileContent()?n.selectedFile():"Loading to memory...":"No file selected"})),this.ok=function(t){if(n.validate(n.selectedFile(),n.dataSourceName(),n.showError)){var r=o.Format.parse(n.selectedFile(),n.selectedFormat(),n.selectedFileContent());null!=r&&e.model.ensureDataSource(n.dataSourceName(),n.selectedFormat(),r).then(n.close).catch((function(e){n.clean(),n.showError(!0),n.error(e)}))}},this.validate=function(t,r,o){var a=!1;return t||(o(!0),a=!0),e.model.dataSourceNameIndex.hasOwnProperty(r)&&(o(!0),n.error("Name already exists"),a=!0),!a},this.close=function(e){var t;n.clean(),null===(t=document.getElementById("modal"))||void 0===t||t.close()},this.selectListener=function(e){n.showError(!1),n.selectedFileContent(void 0),n.error("");var t=e.detail.files;t.length>0&&(n.selectedFile(t[0].name),n.dataSourceName(n.makeFileName(t[0])),t[0].name.endsWith(".dump")?t[0].text().then((function(e){n.selectedFileContent(e)})):t[0].name.endsWith(".bgv")?a.BGVParser.read(t[0]).then((function(e){n.selectedFileContent(e)})):(n.showError(!0),n.error("Unknown dump extension")))}}return e.prototype.clean=function(){var e;null===(e=document.getElementById("name"))||void 0===e||e.reset(),this.selectedFile(""),this.dataSourceName(""),this.selectedFileContent(void 0),this.showError(!1),this.error("")},e.prototype.makeFileName=function(e){return e.name+" - "+new Date(e.lastModified).toLocaleString()},e}()}));
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojmasonrylayout',["ojs/ojcore","jquery","ojs/ojcontext","ojs/ojconfig","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojanimation","ojs/ojlogger","ojdnd"],function(e,t,i,n,s,r,a,o){"use strict";var l={properties:{reorderHandle:{type:"string"},translations:{type:"object",value:{},properties:{labelCut:{type:"string"},labelPasteAfter:{type:"string"},labelPasteBefore:{type:"string"}}}},methods:{refresh:{},resizeTile:{},insertTile:{},removeTile:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{},ojBeforeInsert:{},ojInsert:{},ojBeforeRemove:{},ojRemove:{},ojBeforeResize:{},ojResize:{},ojBeforeReorder:{},ojReorder:{}},extension:{}};function h(e,t,i,n,s,r){var a=h;null==a._agentTypeAndVersion&&(a._agentTypeAndVersion=a._getAgentTypeAndVersion(navigator.userAgent)),this._elem=e,this._rtl=t,this._automationEnabled=i,this._tilesSelector=n.tiles,this._transitionShowFromStyleClass=s.transitionShowFromStyleClass,this._addStyleClassNameFunc=r.addStyleClassName,this._removeStyleClassNameFunc=r.removeStyleClassName,this._getSizeStyleClassNameFunc=r.getSizeStyleClassName,this._getTileSpanFunc=r.getTileSpan,this._showTileOnEndFunc=r.showTileOnEndFunc,this._hideTileOnEndFunc=r.hideTileOnEndFunc,this._startAnimationFunc=r.startAnimationFunc,this._layoutOnEndFunc=r.layoutOnEndFunc,this._layoutCycleOnStartFunc=r.layoutCycleOnStartFunc,this._layoutCycleOnEndFunc=r.layoutCycleOnEndFunc,this._sortTilesOriginalOrderFunc=r.sortTilesOriginalOrderFunc,this._subtreeAttachedFunc=r.subtreeAttached,this._subtreeDetachedFunc=r.subtreeDetached,this._addBusyStateFunc=r.addBusyState;var o=document.createElement("div"),l=o.style;l.display="inline-block",l.overflow="hidden",l.visibility="hidden";var d=document.createElement("div");(l=d.style).display="inline-block",o.appendChild(d),e.insertBefore(o,e.firstChild),this._sizeDivWrapper=o,this._sizeDiv=d;var u=this;this._hideTilesFunc=function(){u._hideTiles()},this._resolveBusyStateFunc=function(){u._resolveBusyState()}}h.prototype.setup=function(e,t){var i=!1;return e?(i=!!this._layout(),this._reorderTilesForLayout()):(this._busyStateResolveFunc=this._addBusyStateFunc("performing layout (setup)"),this._layoutCycleOnStartFunc(),this._transitionStart(t),i=this._transitionLayout()),i},h.prototype.destroy=function(){this._resolveBusyState();for(var e=this._elem,t=this._getTileChildren(),i=0;i<t.length;i++){var n=t[i].style;this._rtl?n.right="":n.left="",n.top=""}e.removeChild(this._sizeDivWrapper),this._sizeDivWrapper=null,this._sizeDiv=null,this._hideTilesFunc=null,this._resolveBusyStateFunc=null,this._arMovedInfolets=null,this._arInfoletsToResize=null,this._arInfoletsToShow=null,this._arInfoletsToHide=null,this._arFireHideOnEnd=null,this._elem=null,this._addStyleClassNameFunc=null,this._removeStyleClassNameFunc=null,this._getSizeStyleClassNameFunc=null,this._getTileSpanFunc=null,this._showTileOnEndFunc=null,this._hideTileOnEndFunc=null,this._startAnimationFunc=null,this._layoutOnEndFunc=null,this._layoutCycleOnStartFunc=null,this._layoutCycleOnEndFunc=null,this._sortTilesOriginalOrderFunc=null,this._subtreeAttachedFunc=null,this._subtreeDetachedFunc=null,this._addBusyStateFunc=null},h.prototype.resizeTile=function(e,t){var i=this._elem.querySelector(e);this._arInfoletsToResize||(this._arInfoletsToResize=[]);var n=this._arInfoletsToResize;n.push(i),n.push(t),this._resizingInfolet=!0,this._queueRelayout()},h.prototype.insertTileDomElem=function(e,t){var i=this._getTileChildren();this._sortTilesOriginalOrderFunc(i);var n=null;t>=0&&t<i.length&&(n=i[t]),this._elem.insertBefore(e,n),this._queueRelayout()},h.prototype.showTile=function(e){var t=this._elem.querySelector(e);if(t){this._arInfoletsToShow||(this._arInfoletsToShow=[]),this._arInfoletsToShow.push(t),this._showingInfolets=!0;var i=h;this._layoutPhase!==i._PHASE_HIDE&&this._layoutPhase!==i._PHASE_LAYOUT?this._queueRelayout():this._showingInfolets=!1}},h.prototype.hideTile=function(e){var t=this._elem.querySelector(e);t&&(this._arInfoletsToHide||(this._arInfoletsToHide=[]),this._arInfoletsToHide.push(t),this._hidingInfolets=!0,this._queueRelayout())},h.prototype.resizeNotify=function(){this._resizingInfolet||this._hidingInfolets||this._showingInfolets||(this._busyStateResolveFunc=this._addBusyStateFunc("performing layout (resizeNotify)"),this._layoutCycleOnStartFunc(),this._transitionStart(!1),this._transitionLayout())},h.prototype.getCellSize=function(){return this._cellSize},h.prototype.isAnimationEnabled=function(){if(this._temporarilyDisableAnimation)return!1;if(!this._cachedAnimationEnabled){if(this._automationEnabled)this._animationEnabled=!1;else{var e=h,t=e._agentTypeAndVersion[0],i=e._agentTypeAndVersion[1];this._animationEnabled=e._isMinimumAgentMet(t,i,["gecko",16,"trident",6,"webkit",533.1])}this._cachedAnimationEnabled=!0}return this._animationEnabled},h.prototype.isInLayoutCycle=function(){return null!=this._layoutPhase||null!=this._arMovedInfolets&&this._arMovedInfolets.length>0},h.prototype.finishLayoutCycle=function(){this._temporarilyDisableAnimation=!0,this._removeStyleClassFromTiles(this._transitionShowFromStyleClass);for(var e=h,t=this._getTileChildren(),i=0;i<t.length;i++){var n=t[i];n._afrCellSize&&delete n._afrCellSize}this._hideTilesAnimationStarted?(this._hideTilesAnimationStarted=!1,this._handleHideTransitionEnd(null)):this._showTilesTimeout?(clearTimeout(this._showTilesTimeout),this._showTilesTimeout=null,this._showTiles()):this._layoutPhase===e._PHASE_LAYOUT||null!=this._arMovedInfolets&&this._arMovedInfolets.length>0?this._handleTransitionEnd(null):this._layoutPhase===e._PHASE_SHOW&&this._handleShowTransitionEnd(null),this._temporarilyDisableAnimation=!1},h._getElemSize=function(e){var t=h,i=t._getComputedStyle(e),n=t._getCSSLengthAsInt(i.marginLeft)+t._getCSSLengthAsInt(i.marginRight),s=t._getCSSLengthAsInt(i.marginTop)+t._getCSSLengthAsInt(i.marginBottom);return{w:e.offsetWidth+n,h:e.offsetHeight+s}},h._getElemInsets=function(e){var t=h,i=t._getComputedStyle(e);return{paddingLeft:t._getCSSLengthAsInt(i.paddingLeft),paddingRight:t._getCSSLengthAsInt(i.paddingRight),paddingTop:t._getCSSLengthAsInt(i.paddingTop),paddingBottom:t._getCSSLengthAsInt(i.paddingBottom),borderLeftWidth:t._getCSSLengthAsInt(i.borderLeftWidth),borderRightWidth:t._getCSSLengthAsInt(i.borderRightWidth),borderTopWidth:t._getCSSLengthAsInt(i.borderTopWidth),borderBottomWidth:t._getCSSLengthAsInt(i.borderBottomWidth)}},h._getComputedStyle=function(e){var t=e.ownerDocument.defaultView;return t?t.getComputedStyle(e,null):e.currentStyle},h._getCSSLengthAsInt=function(e){if(e.length>0&&"auto"!==e){var t=parseInt(e,10);return isNaN(t)&&(t=0),t}return 0},h._arrayIndexOf=function(e,t){if(e)for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1},h._isMinimumAgentMet=function(e,t,i){var n=i.length;if(n%2==0)for(var s=0;s<=n-2;s+=2){if(e===i[s])return t>=i[1+s]}return!1},h._getAgentTypeAndVersion=function(e){var t=h._parseFloatVersion,i=null,n=-1,s=e.toLowerCase();if(-1!==s.indexOf("msie")||-1!==s.indexOf("trident")){i="trident";var r=t(s,/trident\/(\d+[.]\d+)/);-1!==r?n=r:(-1===(r=t(s,/msie (\d+\.\d+);/))&&(r=t(s,/msie (\d+\.\d+)b;/)),n=r-4),null!=document.documentMode&&(n=Math.min(n,document.documentMode-4))}else-1!==s.indexOf("applewebkit")?(i="webkit",n=t(s,/applewebkit\/(\d+([.]\d+)*)/)):-1!==s.indexOf("gecko/")&&(i="gecko",n=t(s,/rv:(\d+[.]\d+)/));return[i,n]},h._parseFloatVersion=function(e,t){var i=e.match(t);if(i){var n=i[1];if(n)return parseFloat(n)}return-1},h._compareTilePositions=function(e,t){return e.startRow>t.startRow?1:e.startRow<t.startRow?-1:e.startCol>t.startCol?1:-1},h.prototype._queueRelayout=function(){this._hideTilesTimeout||(this._layoutPhase?this._queuedRelayout||(this._queuedRelayout=!0):(this._busyStateResolveFunc=this._addBusyStateFunc("performing layout"),this._hideTilesTimeout=setTimeout(this._hideTilesFunc,0)))},h.prototype._getTileChildren=function(){for(var e=this._elem.querySelectorAll(this._tilesSelector),t=[],i=0;i<e.length;i++){var n=e[i],s=n.style;n.offsetWidth>0&&n.offsetHeight>0&&"hidden"!==s.visibility&&t.push(n)}return t},h.prototype._transitionLayout=function(){var e=this._arMovedInfolets,t=this._layout();if(this._arInfoletsToResize){var i=this._arInfoletsToResize;t||(t=[]);for(var n=h,s=0;s<i.length;s+=2){var r=i[s];n._arrayIndexOf(t,r)<0&&t.push(r)}}var a=!1;!t||t.length<1?(!e||e.length<1)&&(this._arMovedInfolets=null,this._handleTransitionEnd(null),a=!0):this._arMovedInfolets=t;var o=null!=t&&t.length>0;return this.isAnimationEnabled()||a||this._handleTransitionEnd(null),o},h.prototype._layout=function(){var e=this._elem,t=this._getTileChildren();this._sortTilesOriginalOrderFunc(t),this._cellSize=null;var i=null;this._cols=0,this._rows=1,this._occupancyMap=null;var n,s,r,a,o,l=[],d=[],u=[],_=[],c=this._rtl,f=h,g=f._getElemInsets(e),m=0,p=[];for(this._arTilePositions=p,n=0;n<t.length;n++){(s=t[n])._afrCellSize&&(this._cellSize=s._afrCellSize,delete s._afrCellSize);var v=this._getTileSpanFunc(s);if(this._cellSize||(this._cellSize=this._calcCellSize(s,v)),i=this._cellSize,!this._occupancyMap){var y=e.offsetWidth-g.paddingLeft-g.paddingRight-g.borderLeftWidth-g.borderRightWidth;this._cols=Math.max(Math.floor(y/i.w),1),this._initOccupancyMap(this._cols,this._rows),m=this._cols}v.colSpan>m&&(m=v.colSpan),v.colSpan>this._cols&&(v.colSpan=this._cols);for(var T=!1,S=0;S<this._rows;S++){for(var O=0;O<this._cols;O++)if(this._fits(O,S,v)){o={top:(r=s.style).top},c?o.right=r.right:o.left=r.left,d.push(o),a=this._calcPosition(s,O,S,v,i,g),u.push(a),c&&_.push(O),T=!0,p.push({startCol:O,startRow:S,tile:s});break}if(T)break;S===this._rows-1&&this._addRow()}}if(i){var C=this._sizeDiv.style;if(C){var b=m*i.w,E=this._rows*i.h,F=C.width?h._getCSSLengthAsInt(C.width.toString()):0,D=C.height?h._getCSSLengthAsInt(C.height.toString()):0;(F>b||D>E)&&(this._afrSizeDivDims={},this._afrSizeDivDims.width=b+"px",this._afrSizeDivDims.height=E+"px"),C.width=(F>b?F:b)+"px",C.height=(D>E?D:E)+"px"}}for(n=0;n<t.length;n++)r=(s=t[n]).style,a=u[n],""!==(o=d[n]).top&&(c&&parseInt(a.right,10)!==parseInt(o.right,10)||!c&&parseInt(a.left,10)!==parseInt(o.left,10)||parseInt(a.top,10)!==parseInt(o.top,10))&&(l.push(s),this._layoutTransition&&f._arrayIndexOf(this._arInfoletsToResize,s)<0&&this._animateLayout(s,this._reorderTransitionStarted?"reorder":"move")),r.top=a.top,this._rtl?r.right=a.right:r.left=a.left;return l.length<1&&(l=null),l},h.prototype._updateSizeDivOnEnd=function(){if(this._afrSizeDivDims){var e=this._sizeDiv.style;e.width=this._afrSizeDivDims.width,e.height=this._afrSizeDivDims.height,delete this._afrSizeDivDims}},h.prototype._reorderTilesForLayout=function(){var e=this._arTilePositions;this._arTilePositions=null;var t=h;e=e.sort(t._compareTilePositions);for(var i=this._getTileChildren(),n=0;n<i.length;n++){var s=i[n],r=e[n].tile;if(s!==r){this._subtreeDetachedFunc(r),s.parentNode.insertBefore(r,s),this._subtreeAttachedFunc(r);var a=t._arrayIndexOf(i,r);a>n&&(i.splice(a,1),i.splice(n,0,r))}}},h.prototype._initOccupancyMap=function(e,t){this._occupancyMap=[];for(var i=this._occupancyMap,n=0;n<t;n++){var s=[];i.push(s);for(var r=0;r<e;r++)s[r]=!1}},h.prototype._addRow=function(){this._rows+=1;var e=[];this._occupancyMap.push(e);for(var t=0;t<this._cols;t++)e[t]=!1},h.prototype._fits=function(e,t,i){for(var n=i.colSpan,s=i.rowSpan,r=t;r<t+s;r++){r>=this._rows&&this._addRow();for(var a=e;a<e+n;a++){if(a>=this._cols)return!1;if(this._occupancyMap[r][a])return!1}}return!0},h.prototype._calcPosition=function(e,t,i,n,s,r){for(var a=n.colSpan,o=n.rowSpan,l=this._occupancyMap,h=i;h<i+o;h++)for(var d=t;d<t+a;d++)l[h][d]=!0;var u={},_=r.paddingTop+i*s.h;if(u.top=_+"px",this._rtl){var c=r.paddingRight+t*s.w;u.right=c+"px"}else{var f=r.paddingLeft+t*s.w;u.left=f+"px"}return u},h.prototype._removeStyleClassFromTiles=function(e){for(var t=this._getTileChildren(),i=0;i<t.length;i++)this._removeStyleClassNameFunc(t[i],e)},h.prototype._animateLayout=function(e,t){if(this.isAnimationEnabled()){var i=this;i._startAnimationFunc(e,t).then(function(){i._layoutTransition&&i._handleTransitionEnd(e)})}},h.prototype._transitionStart=function(e){this._layoutTransition||(this._reorderTransitionStarted=e,this._layoutTransition=!0)},h.prototype._handleTransitionEnd=function(e){var t=!0;if(this._arMovedInfolets){var i=this._arMovedInfolets;if(e){for(var n=0;n<i.length;n++)if(e===i[n]){this._arMovedInfolets=[],i=this._arMovedInfolets;break}}else this.isAnimationEnabled()||(this._arMovedInfolets=[],i=this._arMovedInfolets);i.length>0&&(t=!1)}if(t){this._arInfoletsToResize&&(this._arInfoletsToResize=null),this._reorderTransitionStarted&&(this._reorderTransitionStarted=!1);var s=h;if(this._layoutTransition=!1,this._resizingInfolet=!1,this._hidingInfolets=!1,this._showingInfolets=!1,this._reorderTilesForLayout(),this._layoutOnEndFunc(),this._updateSizeDivOnEnd(),this._layoutPhase===s._PHASE_LAYOUT)if(this.isAnimationEnabled()){var r=this;this._showTilesTimeout=setTimeout(function(){r._showTiles()},0)}else this._showTiles();else this._layoutPhase||this._layoutCycleOnEndFunc(this._resolveBusyStateFunc)}},h.prototype._calcCellSize=function(e,t){var i=h._getElemSize(e);return{w:i.w/t.colSpan,h:i.h/t.rowSpan}},h.prototype._hideTiles=function(){this._hideTilesTimeout&&(clearTimeout(this._hideTilesTimeout),this._hideTilesTimeout=null),this._layoutCycleOnStartFunc();var e=h;if(this._layoutPhase=e._PHASE_HIDE,this._arInfoletsToHide&&this.isAnimationEnabled()){var t=this._arInfoletsToHide,i=this;this._hideTilesAnimationStarted=!0;for(var n=0;n<t.length;n++){var s=t[n],r=function(e){i._handleHideTransitionEnd(e)}.bind(null,s);this._startAnimationFunc(s,"remove").then(r)}}else this._handleHideTransitionEnd(null)},h.prototype._handleHideTransitionEnd=function(e){this._hideTilesAnimationStarted&&(this._hideTilesAnimationStarted=!1);var t,i,n,s,r=h,a=this._arInfoletsToHide;if(e){if(t=e,a){for(n=0;n<a.length;n++)if((i=a[n])===t){a.splice(n,1),this._arFireHideOnEnd||(this._arFireHideOnEnd=[]),(s=this._arFireHideOnEnd).push(t);break}a.length<1&&(this._arInfoletsToHide=null)}}else if(!this.isAnimationEnabled()&&a){for(n=0;n<a.length;n++)i=a[n],this._arFireHideOnEnd||(this._arFireHideOnEnd=[]),(s=this._arFireHideOnEnd).push(i);this._arInfoletsToHide=null}if(!this._arInfoletsToHide){if(this._arFireHideOnEnd){for(s=this._arFireHideOnEnd,n=0;n<s.length;n++){var o=(t=s[n]).style;this._rtl?o.right="":o.left="",o.top="",this._hideTileOnEndFunc(t)}this._arFireHideOnEnd=null}if(this._layoutPhase=r._PHASE_LAYOUT,this._transitionStart(!1),this._arInfoletsToResize){var l=this._arInfoletsToResize;for(n=0;n<l.length;n+=2){t=l[n];var d=l[n+1],u=this._getSizeStyleClassNameFunc(t);this.isAnimationEnabled()&&(t._afrCellSize=this._cellSize,this._animateLayout(t,"resize")),this._removeStyleClassNameFunc(t,u),this._addStyleClassNameFunc(t,d)}}this._transitionLayout()}},h.prototype._showTiles=function(){this._showTilesTimeout&&(clearTimeout(this._showTilesTimeout),this._showTilesTimeout=null);var e,t,i=h;this._layoutPhase=i._PHASE_SHOW;var n=this._arInfoletsToShow;if(n&&this.isAnimationEnabled()){var s=this;for(e=0;e<n.length;e++){t=n[e],this._removeStyleClassNameFunc(t,this._transitionShowFromStyleClass);var r=function(e){s._handleShowTransitionEnd(e)}.bind(null,t);this._startAnimationFunc(t,"insert").then(r)}}else{if(n)for(e=0;e<n.length;e++)t=n[e],this._removeStyleClassNameFunc(t,this._transitionShowFromStyleClass);this._handleShowTransitionEnd(null)}},h.prototype._handleShowTransitionEnd=function(e){var t,i,n=this._arInfoletsToShow;if(e){var s=e;if(n){for(t=0;t<n.length;t++)if((i=n[t])===s){n.splice(t,1),this._showTileOnEndFunc(s);break}n.length<1&&(this._arInfoletsToShow=null)}}else if(!this.isAnimationEnabled()&&n){for(t=0;t<n.length;t++)i=n[t],this._showTileOnEndFunc(i);this._arInfoletsToShow=null}this._arInfoletsToShow||(this._layoutPhase=null,this._layoutCycleOnEndFunc(this._resolveBusyStateFunc),this._queuedRelayout&&(this._queuedRelayout=!1,this._queueRelayout()))},h.prototype._resolveBusyState=function(){this._busyStateResolveFunc&&(this._busyStateResolveFunc(),this._busyStateResolveFunc=null)},h._PHASE_HIDE=1,h._PHASE_LAYOUT=2,h._PHASE_SHOW=3,function(){var l="hidden",d="none",u="oj-masonrylayout-tile",_=/oj-masonrylayout-tile-[0-9]+x[0-9]+/,c="."+u,f={cut:"ojmasonrylayoutcut","paste-before":"ojmasonrylayoutpastebefore","paste-after":"ojmasonrylayoutpasteafter"},g={cut:"labelCut","paste-before":"labelPasteBefore","paste-after":"labelPasteAfter"};function m(e){return t(e).offset()}function p(e,i){t(e).addClass(i)}function v(e,i){t(e).removeClass(i)}function y(e){var i=null,n=t(e).attr("class").match(_);return n&&(i=n[0]),i}function T(e){var i=t(e).attr("class").match(_)[0].substring(u.length+1),n=i.indexOf("x"),s=i.substring(0,n),r=i.substring(n+1);return{colSpan:h._getCSSLengthAsInt(s),rowSpan:h._getCSSLengthAsInt(r)}}function S(e){return e&&e.sort(O),e}function O(e,t){return t._jetDataMasonryOriginalOrder<e._jetDataMasonryOriginalOrder?1:e._jetDataMasonryOriginalOrder<t._jetDataMasonryOriginalOrder?-1:0}function C(e,t){for(var i=e;i;){var n=i.style;if(n&&(n.visibility===l||n.display===d))break;var s=i.parentNode;if(s===t)return i;i=s}return null}function b(e){for(var t=e;t;){var i=t.nextSibling,n=!0;if(i){var s=i.style;!s||s.visibility!==l&&s.display!==d||(n=!1)}if(i&&1===i.nodeType&&n)return i;t=i}return null}e.__registerWidget("oj.ojMasonryLayout",t.oj.baseComponent,{defaultElement:"<div>",widgetEventPrefix:"oj",options:{reorderHandle:null,animateStart:null,animateEnd:null,beforeInsert:null,insert:null,beforeRemove:null,remove:null,beforeResize:null,resize:null,beforeReorder:null,reorder:null},_ComponentCreate:function(){this._super(),this.element.addClass("oj-masonrylayout oj-component"),this.options.disabled&&o.warn("JET MasonryLayout: 'disabled' property not supported"),this.reorderHandleEventNamespace=this.eventNamespace+"ReorderHandle",this._menu={},this._menu.usermenu=!1,this._menu.$container=!1,this._menu.$elemCut=!1,this._menu.$elemPasteBefore=!1,this._menu.$elemPasteAfter=!1,this._initMenu(),this._applyMenu(),this._setup(!0)},refresh:function(){this._super();var e="rtl"===this._GetReadingDirection()!==this._bRTL;e&&this._destroyMLCommon(),this._setup(e)},_NotifyShown:function(){(this._super(),this._needsSetup)?this._setup(this._needsSetup[0]):this._mlCommon.setup(!0)},_NotifyAttached:function(){(this._super(),this._needsSetup)?this._setup(this._needsSetup[0]):this._mlCommon.setup(!0)},_NotifyContextMenuGesture:function(e,i,n){this._prepareContextMenuBeforeOpen(i);var s=this._menu.$container.children().not(".oj-helper-hidden");s&&s.length>0&&this._OpenContextMenu(i,n,{launcher:t(i.target).closest(":tabbable")})},_setup:function(t){var i=this;if(!this._canCalculateSizes()){var s=!1;return this._needsSetup&&(s=this._needsSetup[0]),void(this._needsSetup=[t||s])}this._needsSetup=null,this._bRTL="rtl"===this._GetReadingDirection(),this._bTouchSupported=e.DomUtils.isTouchSupported();var a=this.element,o=this.options;if(t){if(this._showTileOnEndFunc=function(e){i._showTileOnEnd(e)},this._hideTileOnEndFunc=function(e){i._hideTileOnEnd(e)},this._startAnimationFunc=function(e,t){return i._startAnimation(e,t)},this._layoutOnEndFunc=function(){i._layoutOnEnd()},this._layoutCycleOnStartFunc=function(){i._layoutCycleOnStart()},this._layoutCycleOnEndFunc=function(e){i._layoutCycleOnEnd(e)},!this._mlCommon){var l={};l.tiles=c;var d={transitionShowFromStyleClass:"oj-masonrylayout-tile-transition-show-from"},u={};u.addStyleClassName=p,u.removeStyleClassName=v,u.getSizeStyleClassName=y,u.getTileSpan=T,u.showTileOnEndFunc=this._showTileOnEndFunc,u.hideTileOnEndFunc=this._hideTileOnEndFunc,u.startAnimationFunc=this._startAnimationFunc,u.layoutOnEndFunc=this._layoutOnEndFunc,u.layoutCycleOnStartFunc=this._layoutCycleOnStartFunc,u.layoutCycleOnEndFunc=this._layoutCycleOnEndFunc,u.sortTilesOriginalOrderFunc=S,u.subtreeAttached=r.subtreeAttached,u.subtreeDetached=r.subtreeDetached,u.addBusyState=function(e){return i._addBusyState(e)},this._applyTileStyleClass(),this._saveTilesOriginalOrder(),this._mlCommon=new h(a[0],this._bRTL,"enabled"===n.getAutomationMode(),l,d,u)}this._handleDragStartFunc=function(e){i._handleDragStart(e)},this._handleDragEnterFunc=function(e){i._handleDragEnter(e)},this._handleDragOverFunc=function(e){i._handleDragOver(e)},this._handleDragLeaveFunc=function(e){i._handleDragLeave(e)},this._handleDragEndFunc=function(e){i._handleDragEnd(e)},this._handleDropFunc=function(e){i._handleDrop(e)},o.reorderHandle&&this._setupReorderHandles()}else{this._applyTileStyleClass();var _=a.children();this._tearDownReorderHandlesForElem(_),this._setupReorderHandlesForElem(_),this._checkTilesOriginalOrder()}this._mlCommon.setup(t),t&&(this._handleResizeFunc=function(e,t){i._handleResize()},e.DomUtils.addResizeListener(a[0],this._handleResizeFunc,25))},_destroy:function(){this._clearMenu();var t=this.element;e.DomUtils.removeResizeListener(t[0],this._handleResizeFunc),this._handleResizeFunc=null,this._restoreTilesOriginalOrder();for(var i=this._getTileElements(),n=i.length,s=0;s<n;s++){delete i[s]._jetDataMasonryOriginalOrder}this._destroyMLCommon(),t.removeClass("oj-masonrylayout oj-component"),this.options.reorderHandle&&this._tearDownReorderHandles(),t.children("."+u).removeClass(u),this._handleDragStartFunc=null,this._handleDragEnterFunc=null,this._handleDragOverFunc=null,this._handleDragLeaveFunc=null,this._handleDragEndFunc=null,this._handleDropFunc=null,this._showTileOnEndFunc=null,this._hideTileOnEndFunc=null,this._startAnimationFunc=null,this._layoutOnEndFunc=null,this._layoutCycleOnStartFunc=null,this._layoutCycleOnEndFunc=null,this._arTilesToInsert=null,this._super()},_setOption:function(t,i,n){var s=!1,r=!1;switch(t){case"reorderHandle":this._tearDownReorderHandles(),s=!0;break;case"disabled":o.warn("JET MasonryLayout: 'disabled' property not supported");break;case"contextMenu":e.DomUtils.isTouchSupported()||(this._clearMenu(),i&&this._initMenu(i));break;case"translations":e.Object.compareValues(i,this.options[t])||(r=!0)}this._super(t,i,n),r&&this._refreshMenu(),s&&i&&this._setupReorderHandles()},resizeTile:function(e,i){var n=this._mlCommon;n.isInLayoutCycle()&&n.finishLayoutCycle();var s=t(e),r=s[0];if(!r)throw new Error("JET MasonryLayout: Unable to resize tile because no tile found for selector: "+e);var a=y(r);if(i===a)throw new Error("JET MasonryLayout: Unable to resize child "+e+" to style class "+i+" because "+i+" is already applied.");var o={tile:s,previousSizeStyleClass:a,sizeStyleClass:i};!1!==this._trigger("beforeResize",null,o)&&(this._arResizingTiles||(this._arResizingTiles=[]),this._arResizingTiles.push(r,a,i),n.resizeTile(e,i))},insertTile:function(e,i){var n=this._mlCommon;n.isInLayoutCycle()&&n.finishLayoutCycle(),isNaN(i)&&(i=-1);var s=t(e),a=s[0];if(!a)throw new Error("JET MasonryLayout: Unable to insert tile because no tile found for selector: "+e);s.addClass(u);var o={tile:s,index:i};if(!1!==this._trigger("beforeInsert",null,o)){a._jetDataTileInsertIndex=i,n.isAnimationEnabled()&&s.addClass("oj-masonrylayout-tile-transition-show-from");var l=a.style;l.top="-1px",this._bRTL?l.right="-1px":l.left="-1px",this._insertTileOriginalOrder(a,i),n.insertTileDomElem(a,i),r.subtreeAttached(a),this._arTilesToInsert||(this._arTilesToInsert=[]),this._arTilesToInsert.push(e)}},removeTile:function(i){var n=this._mlCommon;n.isInLayoutCycle()&&n.finishLayoutCycle();var s=t(i),r=s[0];if(!r)throw new Error("JET MasonryLayout: Unable to remove tile because no tile found for selector: "+i);if(e.FocusUtils.containsFocus(r)){var a=this._getTileElements(!0),o=a.indexOf(r);o>0&&(this._deletingTileWithFocusPrev=a[o-1])}var l={tile:s};!1!==this._trigger("beforeRemove",null,l)&&n.hideTile(i)},_handleResize:function(){this._bDragging||this._inLayoutCycle||this._mlCommon.resizeNotify()},_showTileOnEnd:function(e){var i=t(e),n=e._jetDataTileInsertIndex;delete e._jetDataTileInsertIndex,this.options.reorderHandle&&this._setupReorderHandlesForElem(i);var s={tile:i,index:n};this._eventsToFire.push("insert",s)},_hideTileOnEnd:function(e){var i=t(e);this.options.reorderHandle&&this._tearDownReorderHandlesForElem(i),i.removeClass(u),r.subtreeDetached(e),e.parentNode.removeChild(e),this._removeTileOriginalOrder(e);var n={tile:i};this._eventsToFire.push("remove",n)},_startAnimation:function(e,t){var i=(s.parseJSONFromFontFamily("oj-masonrylayout-option-defaults")||{}).animation,n=i?i[t]:null;return a.startAnimation(e,t,n,this)},_layoutOnEnd:function(){var e;if(this._arTilesToInsert){var i=this._mlCommon,n=this._arTilesToInsert;for(e=0;e<n.length;e++){var s=n[e];i.showTile(s)}this._arTilesToInsert=null}if(this._arResizingTiles){var r=this._arResizingTiles;for(e=0;e<r.length;e+=3){var a=r[e],o=r[e+1],l=r[e+2],h={tile:t(a),previousSizeStyleClass:o,sizeStyleClass:l};this._eventsToFire.push("resize",h)}this._arResizingTiles=null}this._bDragging&&(this._bDragMoveTransition?this._handleDragMoveTransitionEnd():this._bDragEndTransition&&this._handleDragEndTransitionEnd())},_layoutCycleOnStart:function(){this._inLayoutCycle=!0,this._layoutStartActiveDomElem=null,this._eventsToFire||(this._eventsToFire=[]);var t=document.activeElement;t&&e.DomUtils.isAncestor(this.element[0],t)&&(this._layoutStartActiveDomElem=t)},_layoutCycleOnEnd:function(t){this._inLayoutCycle=!1;var i=this.element[0];if(this._layoutStartActiveDomElem){var n=this._layoutStartActiveDomElem;if(this._layoutStartActiveDomElem=null,this._deletingTileWithFocusPrev){var s=this._deletingTileWithFocusPrev;if(this._deletingTileWithFocusPrev=null,s&&e.DomUtils.isAncestor(i,s)){var r=this._getTileElements(i,!0),a=r.indexOf(s);a>=0&&a<r.length-1?e.FocusUtils.focusFirstTabStop(r[a+1]):e.FocusUtils.focusFirstTabStop(s)}}else e.DomUtils.isAncestor(i,n)?e.FocusUtils.focusElement(n):e.FocusUtils.focusFirstTabStop(i)}if(t&&t(),this._eventsToFire){var o=this._eventsToFire;this._eventsToFire=[];for(var l=0;l<o.length;l+=2){var h=o[l],d=o[l+1];this._trigger(h,null,d)}}},_destroyMLCommon:function(){var e=this._mlCommon;e&&e.destroy(),this._mlCommon=null},_canCalculateSizes:function(){var e=document.createElement("div"),t=e.style;t.width="10px",t.height="10px";var i=this.element[0];i.appendChild(e);var n=!1;try{n=e.offsetWidth>0&&e.offsetHeight>0}catch(e){}return i.removeChild(e),n},_getTileElements:function(e){for(var t=this.element.children(c),i=t.length,n=[],s=0;s<i;s++){var r=t[s];if(!e||e&&r!==this._dropSite){var a=r.style;a.visibility!==l&&a.display!==d&&n.push(r)}}return n},_saveTilesOriginalOrder:function(){var e=this._getTileElements();if(e)for(var t=0;t<e.length;t++){var i=e[t];i._jetDataMasonryOriginalOrder||(i._jetDataMasonryOriginalOrder=t+1)}},_checkTilesOriginalOrder:function(){var e=this._getTileElements();if(e)for(var t=0;t<e.length;t++){var i=e[t];i._jetDataMasonryOriginalOrder||this._insertTileOriginalOrder(i,t)}},_restoreTilesOriginalOrder:function(){var e=this._getTileElements(),t=this._getTileElements();S(t);for(var i=0;i<e.length;i++){var n=e[i],s=t[i];if(n!==s){r.subtreeDetached(s),n.parentNode.insertBefore(s,n),r.subtreeAttached(s);var a=e.indexOf(s);a>i&&(e.splice(a,1),e.splice(i,0,s))}}},_insertTileOriginalOrder:function(e,t){var i=this._getTileElements();if(t<0&&(t=i.length),i)for(var n=0;n<i.length;n++){var s=i[n];s._jetDataMasonryOriginalOrder&&s._jetDataMasonryOriginalOrder>=t+1&&(s._jetDataMasonryOriginalOrder+=1)}e._jetDataMasonryOriginalOrder=t+1},_removeTileOriginalOrder:function(e){if(e._jetDataMasonryOriginalOrder){var t=this._getTileElements();if(t)for(var i=0;i<t.length;i++){var n=t[i];n._jetDataMasonryOriginalOrder&&n._jetDataMasonryOriginalOrder>e._jetDataMasonryOriginalOrder&&(n._jetDataMasonryOriginalOrder-=1)}delete e._jetDataMasonryOriginalOrder}},_applyTileStyleClass:function(){var e=this.element.children();(e=(e=e.not("."+u)).filter(function(e,t){return t.className.match(_)})).addClass(u)},_initMenu:function(e){var i=this._GetContextMenu();if(e||i||this._IsCustomElement()||(i=this.element.attr("contextmenu"))&&(this.options.contextMenu="#"+i),e||i){if(i=e||i,"function"===t.type(i)){try{i=i()}catch(e){i=null}t.type(i)}if(i){var n=t(i);if(n.length>0){n.css("display",d);var s=this._menu;if(!s)return;s.$container=n,s.usermenu=!0}this._menu.usermenu&&e&&this._applyMenu()}}},_applyMenu:function(){if(this._menu&&this._menu.usermenu&&this.options.reorderHandle){var e=this._menu.$container,i=this;"OJ-MENU"===e[0].tagName?e[0].addEventListener("ojAction",this._handleContextMenuSelect.bind(this)):e.on("ojselect",this._handleContextMenuSelect.bind(this));var n=e.find("[data-oj-command]"),s=!1;n.each(function(){var n=t(this).attr("data-oj-command");n.indexOf("oj-masonrylayout-")>=0&&(n=n.slice("oj-masonrylayout-".length));var r="OJ-MENU"===e[0].tagName?this.tagName:"li",a=i._buildContextMenuItem(n,r);t(this).attr("id",a.attr("id")),"OJ-OPTION"===this.tagName?(this.innerHTML=a.get(0).innerHTML,t(this).attr("data-oj-command",a.attr("data-oj-command"))):(a.get(0).className=t(this).get(0).className,t(this).replaceWith(a)),s=!0}),s&&("OJ-MENU"===e[0].tagName?e[0].refresh():e.ojMenu("refresh")),this._menu.$elemCut=e.find("#ojmasonrylayoutcut"),this._menu.$elemPasteBefore=e.find("#ojmasonrylayoutpastebefore"),this._menu.$elemPasteAfter=e.find("#ojmasonrylayoutpasteafter")}},_clearMenu:function(){var e=this._menu;e&&e.usermenu&&(e.usermenu=!1,"OJ-MENU"===e.$container[0].tagName?e.$container[0].removeEventListener("ojAction",this._handleContextMenuSelect):e.$container.off("ojselect"),e.$container=null)},_refreshMenu:function(){this._clearMenu(),this._initMenu(),this._applyMenu()},_prepareContextMenuBeforeOpen:function(e){var i=this.element,n=e.originalEvent.target,s=this.options.reorderHandle,r=!1;if(s){var a=t(n).closest(s);a&&a.length>0&&(r=!0)}var o,l=C(n,i[0]);if(this._menu.tile=l,this._menu.usermenu){var h=this._menu.cutTile,d=!1,u=this._menu.$elemCut;if(u){var _=u.hasClass("oj-helper-hidden");r||_?r&&_&&(u.removeClass("oj-helper-hidden"),d=!0):(u.addClass("oj-helper-hidden"),d=!0);var c=u.hasClass("oj-disabled");o=!1,h&&l===h&&(o=!0),o&&!c?(u.addClass("oj-disabled"),d=!0):!o&&c&&(u.removeClass("oj-disabled"),d=!0)}var f=this._menu.$elemPasteBefore;if(f){var g=f.hasClass("oj-helper-hidden");r||g?r&&g&&(f.removeClass("oj-helper-hidden"),d=!0):(f.addClass("oj-helper-hidden"),d=!0);var m=f.hasClass("oj-disabled");o=!1,h&&l!==h&&l!==b(h)||(o=!0),o&&!m?(f.addClass("oj-disabled"),d=!0):!o&&m&&(f.removeClass("oj-disabled"),d=!0)}var p=this._menu.$elemPasteAfter;if(p){var v=p.hasClass("oj-helper-hidden");r||v?r&&v&&(p.removeClass("oj-helper-hidden"),d=!0):(p.addClass("oj-helper-hidden"),d=!0);var y=p.hasClass("oj-disabled");o=!1,h&&h!==l&&h!==b(l)||(o=!0),o&&!y?(p.addClass("oj-disabled"),d=!0):!o&&y&&(p.removeClass("oj-disabled"),d=!0)}if(d){var T=this._menu.$container;"OJ-MENU"===T[0].tagName?T[0].refresh():T.ojMenu("refresh")}}},_buildContextMenuItem:function(e,i){var n=f[e],s=t(document.createElement(i));return s.attr("id",n),s.attr("data-oj-command",e),s.append(this._buildContextMenuLabel(e,"OJ-OPTION"===i)),s},_buildContextMenuLabel:function(e,i){var n=g[e],s=document.createTextNode(this.getTranslatedString(n));return i?s:t('<a href="#"></a>').append(s)},_menuCut:function(e){e&&(this._menu.cutTile=e)},_menuPaste:function(e,t){if(e&&this._menu.cutTile){var i=this._menu.cutTile;this._menu.cutTile=!1,this._doPaste(i,e,t)}},_doPaste:function(e,i,n){var s=e._jetDataMasonryOriginalOrder-1,r=t(e),a={tile:r,fromIndex:s};if(!1!==this._trigger("beforeReorder",null,a)){this._removeTileOriginalOrder(e);var o=i._jetDataMasonryOriginalOrder-1;n||(o+=1);var l=this.element[0];if(n)this._insertTileOriginalOrder(e,o),l.insertBefore(e,i);else{var h=b(i);this._insertTileOriginalOrder(e,o),l.insertBefore(e,h)}this._mlCommon.setup(!0);var d={tile:r,fromIndex:s,toIndex:o};this._trigger("reorder",null,d)}},_handleContextMenuSelect:function(e,i){var n=(i?i.item:t(e.target)).attr("id");"ojmasonrylayoutcut"===n?this._menuCut(this._menu.tile):"ojmasonrylayoutpastebefore"===n?this._menuPaste(this._menu.tile,!0):"ojmasonrylayoutpasteafter"===n&&this._menuPaste(this._menu.tile,!1)},_getTileIndex:function(e){var t=this._getTileElements(!0);S(t);for(var i=t.length,n=0;n<i;n++)if(t[n]===e)return n;return-1},_setupReorderHandles:function(){var e=this.element,t=e.children();this._setupReorderHandlesForElem(t),e.on("dragstart"+this.reorderHandleEventNamespace,this._handleDragStartFunc).on("dragenter"+this.reorderHandleEventNamespace,this._handleDragEnterFunc).on("dragover"+this.reorderHandleEventNamespace,this._handleDragOverFunc).on("dragleave"+this.reorderHandleEventNamespace,this._handleDragLeaveFunc).on("dragend"+this.reorderHandleEventNamespace,this._handleDragEndFunc).on("drop"+this.reorderHandleEventNamespace,this._handleDropFunc)},_setupReorderHandlesForElem:function(e){var t=this.options;e.filter(t.reorderHandle).attr("draggable","true").addClass("oj-draggable"),e.find(t.reorderHandle).attr("draggable","true").addClass("oj-draggable")},_tearDownReorderHandles:function(){var e=this.element,t=e.children();this._tearDownReorderHandlesForElem(t),e.off(this.reorderHandleEventNamespace)},_tearDownReorderHandlesForElem:function(e){var t=this.options;e.filter(t.reorderHandle).removeAttr("draggable").removeClass("oj-draggable"),e.find(t.reorderHandle).removeAttr("draggable").removeClass("oj-draggable")},_handleDragStart:function(e){var i,n=this.options;i=e.originalEvent.target;var s=t(i).closest(n.reorderHandle);if(s&&!(s.length<1)&&!this._bDragging){var r=C(i=e.target,this.element[0]);if(r){var a=this._getTileIndex(r);r._jetDataMasonryDragSourceIndex=a;var o={tile:t(r),fromIndex:a};if(!1!==this._trigger("beforeReorder",null,o)){var l=e.originalEvent;this._dragStart(r,l.pageX,l.pageY,l.dataTransfer)}}}},_handleDragEnter:function(i){if(this._bDragging){var n=i.originalEvent,s=n.relatedTarget,r=this.element[0],a=!1;if(s)a=r!==s&&!e.DomUtils.isAncestor(r,s);else if(this._dragLeftMasonryLayout){var o=document.elementFromPoint(n.clientX,n.clientY);a=o&&(o===r||e.DomUtils.isAncestor(r,o))}if(a)if(this._dragLeftMasonryLayout=!1,this._draggedTile){if(this._dropSite){t(this._dropSite).css("display",""),this._mlCommon.setup(!1,!0)}}else n.dataTransfer.dropEffect="none"}},_handleDragOver:function(e){if(!this._bDragging)return!1;var t=e.originalEvent;return t.dataTransfer.dropEffect="move",this._dragMove(t.pageX,t.clientX,t.clientY),e.preventDefault(),!1},_handleDragLeave:function(i){if(this._bDragging){var n=i.originalEvent,s=n.relatedTarget,r=this.element[0],a=!1;if(s)a=r!==s&&!e.DomUtils.isAncestor(r,s);else{var o=document.elementFromPoint(n.clientX,n.clientY);a=o&&o!==r&&!e.DomUtils.isAncestor(r,o)}if(a)if(this._dragLeftMasonryLayout=!0,this._dropSite)t(this._dropSite).css("display",d),this._mlCommon.setup(!1,!0)}},_clearDragStartHideTileTimeout:function(){if(this._dragStartHideTileTimeout){clearTimeout(this._dragStartHideTileTimeout),this._dragStartHideTileTimeout=null,this._busyStateResolveFunc(),this._busyStateResolveFunc=null;var e=this._draggedTile;e&&t(e).removeClass("oj-drag")}},_handleDragEnd:function(i){if(this._clearDragStartHideTileTimeout(),this._bDragging&&!this._bDropping){var n=this._draggedTile;if(n&&this._dropSite){var s=this._dropSite,r=this.element[0];if(e.DomUtils.isAncestor(r,n))t(s).css("display",""),this._removeTileOriginalOrder(s),s.parentNode.removeChild(s),t(n).css("display",""),this._insertTileOriginalOrder(n,n._jetDataMasonryOriginalOrder-1),this._mlCommon.setup(!1,!0);delete n._jetDataMasonryDragSourceIndex}this._draggedTile=null,this._dropSite=null,this._prevTileUnderPoint=null,this._prevCellUnderPoint=null,this._bDragMoveTransition=!1,this._bMouseMoved=!1,this._dragOffset=null,this._bDragEndTransition=!1,this._bDragging=!1}},_handleDrop:function(e){if(!this._bDragging)return!1;var t=this._mlCommon;t.isInLayoutCycle()&&t.finishLayoutCycle(),this._clearDragStartHideTileTimeout();var i=e.originalEvent;return this._drop(this._draggedTile,i.pageX,i.pageY),e.stopPropagation(),!1},_dragStart:function(e,i,n,s){this._bDragging=!0,this._bDropping=!1,this._bMouseMoved=!1,this._bDragStartTileHidden=!1,this._draggedTile=e;var a=this.element[0],o=y(e);this._dropSite=document.createElement("div");var l=this._dropSite;l._jetDataMasonryOriginalOrder=e._jetDataMasonryOriginalOrder,l.className=o+" oj-drop "+u;var h=l.style,_=e.style;h.top=_.top,this._bRTL?h.right=_.right:h.left=_.left;var c=m(e);a.insertBefore(l,e);var f={left:i-c.left,top:n-c.top};this._dragOffset=f,t(e).addClass("oj-drag"),s.effectAllowed="move",s.setData("text/html",e.outerHTML),s.setDragImage(e,f.left,f.top);var g=this;this._busyStateResolveFunc=this._addBusyState("Wait for dragStartHideTile timeout"),this._dragStartHideTileTimeout=setTimeout(function(){g._bDragStartTileHidden=!0,_.display=d,t(e).removeClass("oj-drag"),g._dragStartHideTileTimeout=null,g._busyStateResolveFunc(),g._busyStateResolveFunc=null,r.subtreeHidden(e)},0)},_dragMove:function(e,i,n){if(this._bMouseMoved=!0,this._bDragStartTileHidden&&!this._bDragMoveTransition){var s=this.element[0],r=C(document.elementFromPoint(i,n),s),a=!1;if(r){var o=t(r),l=this.options.reorderHandle;if(o.is(l))a=!0;else{var h=o.find(l);a=h&&h.length>0}}var d=!1;if(null==r||r===this._dropSite||r===this._draggedTile)this._prevTileUnderPoint=null,this._prevCellUnderPoint=null;else if(this._prevTileUnderPoint&&this._prevCellUnderPoint&&this._prevTileUnderPoint!==r){var u=this._getCellPosition(i,n);u&&u.row===this._prevCellUnderPoint.row&&u.col===this._prevCellUnderPoint.col&&(d=!0)}if(r&&!d&&r!==this._dropSite&&r!==this._draggedTile&&a){var _=e-m(s).left,c=b(this._dropSite),f=_>=r.offsetLeft+.5*r.offsetWidth;if(this._removeTileOriginalOrder(this._dropSite),f&&!this._bRTL||!f&&this._bRTL){var g=b(r);g?(this._insertTileOriginalOrder(this._dropSite,g._jetDataMasonryOriginalOrder-1),s.insertBefore(this._dropSite,g)):(this._insertTileOriginalOrder(this._dropSite,r._jetDataMasonryOriginalOrder),s.appendChild(this._dropSite))}else this._insertTileOriginalOrder(this._dropSite,r._jetDataMasonryOriginalOrder-1),s.insertBefore(this._dropSite,r);if(c!==b(this._dropSite)){var p=this._mlCommon,v=r,y=this._getCellPosition(i,n);this._bDragMoveTransition=p.setup(!1,!0),this._bDragMoveTransition&&(this._prevTileUnderPoint=v,this._prevCellUnderPoint=y)}}}},_handleDragMoveTransitionEnd:function(){this._bDragMoveTransition=!1},_drop:function(e,i,n){this._bDropping=!0;var s=this.element[0],a=this._dropSite;this._dropSite=null,this._prevTileUnderPoint=null,this._prevCellUnderPoint=null,r.subtreeDetached(e),s.insertBefore(e,a),s.removeChild(a),r.subtreeAttached(e),e._jetDataMasonryOriginalOrder=a._jetDataMasonryOriginalOrder;var o=e.style;o.display="",r.subtreeShown(e);var l=m(s),h=this._dragOffset;o.top=n-h.top-l.top+"px";var d=i-h.left-l.left;if(this._bRTL?(o.right=s.offsetWidth-(d+t(e).outerWidth(!0))+"px",o.left=""):o.left=d+"px",this._dragOffset=null,this._bMouseMoved){var u=this._mlCommon;this._bDragEndTransition=u.setup(!1,!0)}else this._handleDragEndTransitionEnd()},_handleDragEndTransitionEnd:function(){this._bDragEndTransition=!1,this._bDragging=!1,this._bDropping=!1,this._bMouseMoved=!1,this._bDragStartTileHidden=!1;var e=this._draggedTile;this._draggedTile=null;var i=e._jetDataMasonryDragSourceIndex;delete e._jetDataMasonryDragSourceIndex;var n=this._getTileIndex(e),s={tile:t(e),fromIndex:i,toIndex:n};this._trigger("reorder",null,s)},_getCellPosition:function(e,t){var i=this._mlCommon.getCellSize(),n=null;return i&&(n={col:parseInt(e/i.w,10),row:parseInt(t/i.h,10)}),n},_addBusyState:function(e){var t=this.element,n=i.getContext(t[0]).getBusyContext(),s="MasonryLayout";s+=" (id='"+t.attr("id")+"')";var r={description:s+=": "+e};return n.addBusyState(r)},getNodeBySubId:function(e){return this._super(e)},getSubIdByNode:function(e){return this._super(e)}})}(),l.extension._WIDGET_NAME="ojMasonryLayout",e.CustomElementBridge.register("oj-masonry-layout",{metadata:l})});
var __importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};define('viewModels/x-mosaic',["require","exports","ojs/ojarraydataprovider","ojs/ojmodule-element-utils","ojs/ojmasonrylayout"],(function(require,t,e,i){"use strict";return i=__importStar(i),function(){function t(t){var o=this;this.dataprovider=new e(t.model.visibleTiles,{keyAttributes:"id"}),this.removeTile=function(e){var i,r=null===(i=o.closestByClass(e.target,"x-mosaic-tile"))||void 0===i?void 0:i.getAttribute("id");(null==r?void 0:r.startsWith("mosaic-tile-"))&&t.model.hideTile(r.substring("mosaic-tile-".length))},this.tileConfig=function(e){return i.createConfig({name:e.componentName,params:{model:t.model,tile:e}})}}return t.prototype.getTileId=function(t){return"mosaic-tile-"+t},t.prototype.getLabel=function(t){var e,i;return t.dataSource.name+" - "+t.dataSource.format.sections[t.sectionName].title+((null===(e=t.contextualData)||void 0===e?void 0:e.entryPointName)?" - "+(null===(i=t.contextualData)||void 0===i?void 0:i.entryPointName):"")},t.prototype.closestByClass=function(t,e){for(;!t.classList.contains(e);)if(!(t=t.parentNode))return null;return t},t}()}));
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojattributegrouphandler',["ojs/ojcore","jquery"],function(t,e){"use strict";var r=function(t){this.Init(t)};t.Object.createSubclass(r,t.Object,"AttributeGroupHandler"),r.prototype.Init=function(t){if(this._assignments={},this._valueIndex=0,this._matchRules={},null!=t)for(var e=Object.keys(t),r=0;r<e.length;r++){var a=e[r];this.addMatchRule(a,t[a])}},r.prototype.getValueRamp=function(){return[]},r.prototype.getValue=function(t){return this._matchRules[t]?this._matchRules[t]:(this._assignments[t]||(this._values||(this._values=this.getValueRamp().slice()),this._assignments[t]=this._values[this._valueIndex],this._valueIndex+=1,this._valueIndex===this._values.length&&(this._valueIndex=0)),this._assignments[t])},r.prototype.getCategoryAssignments=function(){for(var t=[],e=Object.keys(this._assignments),r=0;r<e.length;r++){var a=e[r];t.push({category:a,value:this._assignments[a]})}return t},r.prototype.addMatchRule=function(t,e){this._matchRules[t]=e};var a=function(t){if(this._attributeValues=[],e(document.body).hasClass("oj-hicontrast"))this._attributeValues=a._DEFAULT_COLORS.slice();else{var r=a.__createAttrDiv();r&&(a.__processAttrDiv(r),r.remove()),a._colors.length>0?this._attributeValues=a._colors.slice():this._attributeValues=a._DEFAULT_COLORS.slice()}this.Init(t)};t.Object.createSubclass(a,r,"ColorAttributeGroupHandler"),a._DEFAULT_COLORS=["#237bb1","#68c182","#fad55c","#ed6647","#8561c8","#6ddbdb","#ffb54d","#e371b2","#47bdef","#a2bf39","#a75dba","#f7f37b"],a._STYLE_CLASSES=["oj-dvt-category1","oj-dvt-category2","oj-dvt-category3","oj-dvt-category4","oj-dvt-category5","oj-dvt-category6","oj-dvt-category7","oj-dvt-category8","oj-dvt-category9","oj-dvt-category10","oj-dvt-category11","oj-dvt-category12"],a._colors=null,a.prototype.getValueRamp=function(){return this._attributeValues},a.__createAttrDiv=function(){if(a._colors)return null;var t=e(document.createElement("div"));t.css("display","none;"),t.attr("id","attrGps"),e(document.body).append(t);for(var r=0;r<a._STYLE_CLASSES.length;r++){var s=e(document.createElement("div"));s.addClass(a._STYLE_CLASSES[r]),t.append(s)}return t},a.__processAttrDiv=function(t){a._colors=[];for(var r=t.children(),s=0;s<r.length;s++){var o=e(r[s]).css("color");o&&a._colors.push(o)}};var s=function(t){this.Init(t)};t.Object.createSubclass(s,r,"ShapeAttributeGroupHandler"),s._attributeValues=["square","circle","diamond","plus","triangleDown","triangleUp","human"],s.prototype.getValueRamp=function(){return s._attributeValues};var o={};return o.AttributeGroupHandler=r,o.ColorAttributeGroupHandler=a,o.ShapeAttributeGroupHandler=s,o});
var __read=this&&this.__read||function(t,o){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,i,s=e.call(t),r=[];try{for(;(void 0===o||o-- >0)&&!(n=s.next()).done;)r.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(e=s.return)&&e.call(s)}finally{if(i)throw i.error}}return r},__spread=this&&this.__spread||function(){for(var t=[],o=0;o<arguments.length;o++)t=t.concat(__read(arguments[o]));return t};define('app/debug',["require","exports","./util"],(function(require,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=function(){},n=function(){function t(){this._isDebugMode=o.util.getUrlParams().debug,this._isDebugMode&&console.log("Debug mode is enabled."),this._showPointstoNodeIds=!0,this._showExplorationNodeIds=!0,this._showCodeLocationForAllTypes=!0,this._showCodeLocationForTypes=["callsite"],this.pointstoDebugInfo=null,this.methodDiscrepancies=null,this._showExploreMethodButton=!0,this.pointstoExampleMethodName="ch.experiment.printing.FormattedPrinter.printToOutput(String)",this.pointstoExampleDataSourceIndex=0,this._showFullyExpandButton=!0,this._showEdgeLabels=!0,this._edgeLabelsReasonOnly=!1}return t.prototype.isDebugMode=function(){return this._isDebugMode},t.prototype.showPointstoNodeIds=function(){return!!this._isDebugMode&&this._showPointstoNodeIds},t.prototype.showExplorationNodeIds=function(){return!!this._isDebugMode&&this._showExplorationNodeIds},t.prototype.showExploreMethodButton=function(){return!!this._isDebugMode&&this._showExploreMethodButton},t.prototype.showCodeLocationForAllTypes=function(){return!this._isDebugMode||this._showCodeLocationForAllTypes},t.prototype.showCodeLocationForTypes=function(){return this._isDebugMode?this._showCodeLocationForTypes:[]},t.prototype.showFullyExpandButton=function(){return!!this._isDebugMode&&this._showFullyExpandButton},t.prototype.showEdgeLabels=function(){return!this._isDebugMode||this._showEdgeLabels},t.prototype.edgeLabelsReasonOnly=function(){return!!this._isDebugMode&&this._edgeLabelsReasonOnly},t.prototype.generateDebugInfoForPointstoEvent=function(t){if(this.isDebugMode()){var o=new e;this.pointstoDebugInfo=o,o.poinstoEvent=t;var n=[];Object.entries(t.data.pointsToGraph).forEach((function(t){n.push(t[1])})),o.pointstoGraphNodes=n;var i=r(n);o.availableFlowTypes=i;var s={};i.forEach((function(t){var o=function(t){var o=[];return n.forEach((function(e){e.flowType===t&&o.push(e)})),o}(t);s[t]={};var e=a(o);s[t].inputs=r(e);var i=u(o);s[t].uses=r(i)})),o.dependencyFlowTypeIndex=s}function r(t){var o=new Set;return t.forEach((function(t){return o.add(t.flowType)})),o}function a(o){var e=[];return o.forEach((function(o){e=e.concat(function(o){var e=[];return o.info.inputs.forEach((function(o){e.push(t.data.pointsToGraph[o])})),e}(o))})),e}function u(o){var e=[];return o.forEach((function(o){e=e.concat(function(o){var e=[];return o.info.uses.forEach((function(o){e.push(t.data.pointsToGraph[o])})),e}(o))})),e}},t.prototype.findMethodDiscrepancies=function(t){if(this.isDebugMode()){var o=t.events.LoadSVMMethodHistogramEvent,e=new Set;o.data.forEach((function(t){var o=t[0].split(" "),n=o.slice(0,o.length-1);e.add(n.join(" "))}));var n=t.events.LoadSVMPointstoAnalysisEvent,i=new Set;Object.keys(n.data.methodNameIndex).forEach((function(t){return i.add(t)}));var s=__spread(e).filter((function(t){return!i.has(t)})),r=__spread(i).filter((function(t){return!e.has(t)})),a={missingInHist:new Set(r),missingInPointsto:new Set(s)};this.methodDiscrepancies=a}},t}();t.DebugContext=n}));
define('ojtranslations/nls/localeElements',{root:{supplemental:{weekData:{firstDay:{"001":1,AE:6,BH:6,BR:0,DZ:6,EG:6,IQ:6,JO:6,KW:6,LB:1,LY:6,MA:6,OM:6,QA:6,SA:0,SD:6,SY:6,TN:0,YE:0,BY:1,BG:1,ES:1,CZ:1,DK:1,AT:1,CH:1,DE:1,LU:1,CY:1,GR:1,AU:0,CA:0,GB:1,IE:0,IN:0,MT:0,NZ:0,PH:0,SG:0,US:0,ZA:0,AR:0,CL:1,CO:0,CR:1,DO:0,EC:1,GT:0,HN:0,MX:0,NI:0,PA:0,PE:0,PR:0,PY:0,SV:0,UY:1,VE:0,EE:1,FI:1,BE:1,FR:1,IL:0,HR:1,HU:1,ID:0,IS:1,IT:1,JP:0,KR:0,LT:1,LV:1,MK:1,MY:1,NO:1,NL:1,PL:1,PT:1,RO:1,RU:1,SK:1,SI:1,AL:1,BA:1,ME:1,RS:1,SE:1,TH:0,TR:1,UA:1,VN:1,CN:0,HK:0,MO:0,TW:0},weekendStart:{"001":6,AE:5,BH:5,DZ:5,EG:5,IQ:5,JO:5,KW:5,LY:5,MA:5,OM:5,QA:5,SA:5,SD:5,SY:5,TN:5,YE:5,IN:0,IL:5},weekendEnd:{"001":0,AE:6,BH:6,DZ:6,EG:6,IQ:6,JO:6,KW:6,LY:6,MA:6,OM:6,QA:6,SA:6,SD:6,SY:6,TN:6,YE:6,IL:6}},prefferedHours:{"001":"H",AE:"h",BH:"h",DZ:"h",EG:"h",IQ:"h",JO:"h",KW:"h",LB:"h",LY:"h",MA:"H",OM:"h",QA:"h",SA:"h",SD:"h",SY:"h",TN:"h",YE:"h",BG:"H",ES:"H",CZ:"H",DK:"H",AT:"H",CH:"H",DE:"H",LU:"H",CY:"h",GR:"h",AU:"h",CA:"h",GB:"H",IE:"H",IN:"h",NZ:"h",PH:"h",SG:"h",US:"h",ZA:"h",AR:"H",BO:"H",CL:"H",CO:"h",CR:"H",CU:"H",DO:"h",EC:"H",GT:"H",HN:"H",MX:"H",NI:"H",PA:"h",PE:"H",PR:"h",SV:"H",UY:"H",VE:"h",EE:"H",FI:"H",BE:"H",FR:"H",IL:"H",HR:"H",ID:"H",IS:"H",IT:"H",JP:"H",KR:"h",LT:"H",LV:"H",MK:"H",MY:"h",NL:"H",PT:"H",RO:"H",RU:"H",SK:"H",SI:"H",AL:"h",BA:"H",ME:"H",RS:"H",SE:"H",TR:"H",UA:"H",CN:"h",HK:"h",MO:"h",TW:"h"},plurals:{ar:function(r){return 0===r?"zero":1===r?"one":2===r?"two":r%100===Math.floor(r%100)&&r%100>=3&&r%100<=10?"few":r%100===Math.floor(r%100)&&r%100>=11&&r%100<=99?"many":"other"},as:function(r){return 0===Math.floor(Math.abs(r))||1===r?"one":"other"},be:function(r){return r%10==1&&r%100!=11?"one":r%10===Math.floor(r%10)&&r%10>=2&&r%10<=4&&!(r%100>=12&&r%100<=14)?"few":r%10==0||r%10===Math.floor(r%10)&&r%10>=5&&r%10<=9||r%100===Math.floor(r%100)&&r%100>=11&&r%100<=14?"many":"other"},bg:function(r){return 1===r?"one":"other"},bn:function(r){return 0===Math.floor(Math.abs(r))||1===r?"one":"other"},bo:function(r){return"other"},brx:function(r){return 1===r?"one":"other"},ca:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length;return 1===t&&0===n?"one":"other"},cs:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length;return 1===t&&0===n?"one":t===Math.floor(t)&&t>=2&&t<=4&&0===n?"few":0!==n?"many":"other"},da:function(r){var t=Math.floor(Math.abs(r)),n=parseInt(r.toString().replace(/^[^.]*.?|0+$/g,""),10);return 1===r||0!==n&&(0===t||1===t)?"one":"other"},de:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length;return 1===t&&0===n?"one":"other"},el:function(r){return 1===r?"one":"other"},en:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length;return 1===t&&0===n?"one":"other"},es:function(r){return 1===r?"one":"other"},et:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length;return 1===t&&0===n?"one":"other"},fi:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length;return 1===t&&0===n?"one":"other"},fr:function(r){var t=Math.floor(Math.abs(r));return 0===t||1===t?"one":"other"},ga:function(r){return 1===r?"one":2===r?"two":r===Math.floor(r)&&r>=3&&r<=6?"few":r===Math.floor(r)&&r>=7&&r<=10?"many":"other"},gu:function(r){return 0===Math.floor(Math.abs(r))||1===r?"one":"other"},he:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length;return 1===t&&0===n?"one":2===t&&0===n?"two":0!==n||r>=0&&r<=10||r%10!=0?"other":"many"},hi:function(r){return 0===Math.floor(Math.abs(r))||1===r?"one":"other"},hr:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length,e=parseInt(r.toString().replace(/^[^.]*.?/,""),10);return 0===n&&t%10==1&&(t%100!=11||e%10==1&&e%100!=11)?"one":0===n&&t%10===Math.floor(t%10)&&t%10>=2&&t%10<=4&&(!(t%100>=12&&t%100<=14)||e%10===Math.floor(e%10)&&e%10>=2&&e%10<=4&&!(e%100>=12&&e%100<=14))?"few":"other"},hu:function(r){return 1===r?"one":"other"},id:function(r){return"other"},is:function(r){var t=Math.floor(Math.abs(r)),n=parseInt(r.toString().replace(/^[^.]*.?|0+$/g,""),10);return 0!==n||t%10!=1||t%100==11&&0===n?"other":"one"},it:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length;return 1===t&&0===n?"one":"other"},ja:function(r){return"other"},kn:function(r){return 0===Math.floor(Math.abs(r))||1===r?"one":"other"},ko:function(r){return"other"},kok:function(r){return"other"},ks:function(r){return 1===r?"one":"other"},lt:function(r){var t=parseInt(r.toString().replace(/^[^.]*.?/,""),10);return r%10!=1||r%100>=11&&r%100<=19?r%10===Math.floor(r%10)&&r%10>=2&&r%10<=9&&!(r%100>=11&&r%100<=19)?"few":0!==t?"many":"other":"one"},lv:function(r){var t=r.toString().replace(/^[^.]*.?/,"").length,n=parseInt(r.toString().replace(/^[^.]*.?/,""),10);return r%10==0||r%100===Math.floor(r%100)&&r%100>=11&&r%100<=19||2===t&&n%100===Math.floor(n%100)&&n%100>=11&&n%100<=19?"zero":r%10==1&&(r%100!=11||2===t&&n%10==1&&(n%100!=11||2!==t&&n%10==1))?"one":"other"},mk:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length,e=parseInt(r.toString().replace(/^[^.]*.?/,""),10);return 0!==n||t%10!=1&&e%10!=1?"other":"one"},ml:function(r){return 1===r?"one":"other"},mr:function(r){return 0===Math.floor(Math.abs(r))||1===r?"one":"other"},ms:function(r){return"other"},mt:function(r){return 1===r?"one":0===r||r%100===Math.floor(r%100)&&r%100>=2&&r%100<=10?"few":r%100===Math.floor(r%100)&&r%100>=11&&r%100<=19?"many":"other"},nb:function(r){return 1===r?"one":"other"},ne:function(r){return 1===r?"one":"other"},nl:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length;return 1===t&&0===n?"one":"other"},nn:function(r){return 1===r?"one":"other"},no:function(r){return 1===r?"one":"other"},or:function(r){return 1===r?"one":"other"},pa:function(r){return r===Math.floor(r)&&r>=0&&r<=1?"one":"other"},pl:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length;return 1===t&&0===n?"one":0===n&&t%10===Math.floor(t%10)&&t%10>=2&&t%10<=4&&!(t%100>=12&&t%100<=14)?"few":0===n&&1!==t&&(t%10===Math.floor(t%10)&&t%10>=0&&t%10<=1||0===n&&(t%10===Math.floor(t%10)&&t%10>=5&&t%10<=9||0===n&&t%100===Math.floor(t%100)&&t%100>=12&&t%100<=14))?"many":"other"},pt:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length,e=parseInt(r.toString().replace(/^[^.]*.?|0+$/g,""),10);return 1===t&&(0===n||0===t&&1===e)?"one":"other"},"pt-PT":function(r){var t=r.toString().replace(/^[^.]*.?/,"").length;return 1===r&&0===t?"one":"other"},ro:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length;return 1===t&&0===n?"one":0!==n||0===r||1!==r&&r%100===Math.floor(r%100)&&r%100>=1&&r%100<=19?"few":"other"},ru:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length;return 0===n&&t%10==1&&t%100!=11?"one":0===n&&t%10===Math.floor(t%10)&&t%10>=2&&t%10<=4&&!(t%100>=12&&t%100<=14)?"few":0===n&&(t%10==0||0===n&&(t%10===Math.floor(t%10)&&t%10>=5&&t%10<=9||0===n&&t%100===Math.floor(t%100)&&t%100>=11&&t%100<=14))?"many":"other"},sk:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length;return 1===t&&0===n?"one":t===Math.floor(t)&&t>=2&&t<=4&&0===n?"few":0!==n?"many":"other"},sl:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length;return 0===n&&t%100==1?"one":0===n&&t%100==2?"two":0===n&&(t%100===Math.floor(t%100)&&t%100>=3&&t%100<=4||0!==n)?"few":"other"},sq:function(r){return 1===r?"one":"other"},sr:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length,e=parseInt(r.toString().replace(/^[^.]*.?/,""),10);return 0===n&&t%10==1&&(t%100!=11||e%10==1&&e%100!=11)?"one":0===n&&t%10===Math.floor(t%10)&&t%10>=2&&t%10<=4&&(!(t%100>=12&&t%100<=14)||e%10===Math.floor(e%10)&&e%10>=2&&e%10<=4&&!(e%100>=12&&e%100<=14))?"few":"other"},sv:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length;return 1===t&&0===n?"one":"other"},ta:function(r){return 1===r?"one":"other"},te:function(r){return 1===r?"one":"other"},th:function(r){return"other"},tr:function(r){return 1===r?"one":"other"},uk:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length;return 0===n&&t%10==1&&t%100!=11?"one":0===n&&t%10===Math.floor(t%10)&&t%10>=2&&t%10<=4&&!(t%100>=12&&t%100<=14)?"few":0===n&&(t%10==0||0===n&&(t%10===Math.floor(t%10)&&t%10>=5&&t%10<=9||0===n&&t%100===Math.floor(t%100)&&t%100>=11&&t%100<=14))?"many":"other"},ur:function(r){var t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*.?/,"").length;return 1===t&&0===n?"one":"other"},vi:function(r){return"other"},zh:function(r){return"other"}},currencyData:{fractions:{IDR:{_rounding:"0",_digits:"0"},JPY:{_rounding:"0",_digits:"0"},KRW:{_rounding:"0",_digits:"0"}}}}},ar:1,"ar-AE":1,"ar-BH":1,"ar-DZ":1,"ar-EG":1,"ar-IQ":1,"ar-JO":1,"ar-KW":1,"ar-LB":1,"ar-LY":1,"ar-MA":1,"ar-OM":1,"ar-QA":1,"ar-SA":1,"ar-SD":1,"ar-SY":1,"ar-TN":1,"ar-YE":1,as:1,be:1,"be-BY":1,bg:1,"bg-BG":1,bn:1,bo:1,"bo-IN":1,brx:1,ca:1,"ca-ES":1,cs:1,"cs-CZ":1,da:1,"da-DK":1,de:1,"de-AT":1,"de-CH":1,"de-DE":1,"de-LU":1,el:1,"el-CY":1,"el-GR":1,en:1,"en-AU":1,"en-CA":1,"en-GB":1,"en-IE":1,"en-IN":1,"en-MT":1,"en-NZ":1,"en-PH":1,"en-SG":1,"en-US":1,"en-ZA":1,es:1,"es-AR":1,"es-BO":1,"es-CL":1,"es-CO":1,"es-CR":1,"es-CU":1,"es-DO":1,"es-EC":1,"es-ES":1,"es-GT":1,"es-HN":1,"es-MX":1,"es-NI":1,"es-PA":1,"es-PE":1,"es-PR":1,"es-PY":1,"es-SV":1,"es-US":1,"es-UY":1,"es-VE":1,et:1,"et-EE":1,fi:1,"fi-FI":1,fr:1,"fr-BE":1,"fr-CA":1,"fr-CH":1,"fr-FR":1,"fr-LU":1,ga:1,"ga-IE":1,gu:1,he:1,"he-IL":1,hi:1,"hi-IN":1,hr:1,"hr-HR":1,hu:1,"hu-HU":1,id:1,"id-ID":1,is:1,"is-IS":1,it:1,"it-CH":1,"it-IT":1,ja:1,"ja-JP":1,kn:1,ko:1,"ko-KR":1,kok:1,ks:1,lt:1,"lt-LT":1,lv:1,"lv-LV":1,mk:1,"mk-MK":1,ml:1,mr:1,ms:1,"ms-MY":1,mt:1,"mt-MT":1,nb:1,"nb-NO":1,ne:1,"ne-IN":1,nl:1,"nl-BE":1,"nl-NL":1,nn:1,"nn-NO":1,no:1,"no-NO":1,or:1,pa:1,pl:1,"pl-PL":1,pt:1,"pt-BR":1,"pt-PT":1,ro:1,"ro-RO":1,ru:1,"ru-RU":1,sk:1,"sk-SK":1,sl:1,"sl-SI":1,sq:1,"sq-AL":1,sr:1,"sr-Cyrl":1,"sr-Cyrl-BA":1,"sr-Cyrl-ME":1,"sr-Cyrl-RS":1,"sr-Latn":1,"sr-Latn-BA":1,"sr-Latn-ME":1,"sr-Latn-RS":1,sv:1,"sv-SE":1,ta:1,te:1,th:1,"th-TH":1,tr:1,"tr-TR":1,uk:1,"uk-UA":1,ur:1,"ur-IN":1,vi:1,"vi-VN":1,zh:1,"zh-Hans":1,"zh-Hans-CN":1,"zh-Hans-SG":1,"zh-Hant":1,"zh-Hant-HK":1,"zh-Hant-MO":1,"zh-Hant-TW":1,__noOverlay:!0,__defaultNoOverlayLocale:"en-US"});

/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojlocaledata',["ojs/ojcore-base","ojL10n!ojtranslations/nls/localeElements"],function(e,t){"use strict";var n={setBundle:function(e){n._bundle=e},getFirstDayOfWeek:function(){return n._getWeekData("firstDay")},getWeekendStart:function(){return n._getWeekData("weekendStart")},getWeekendEnd:function(){return n._getWeekData("weekendEnd")},getDayNames:function(e){(null==e||"abbreviated"!==e&&"narrow"!==e)&&(e="wide");var t=n._getCalendarData().days["stand-alone"][e];return[t.sun,t.mon,t.tue,t.wed,t.thu,t.fri,t.sat]},getMonthNames:function(e){(null==e||"abbreviated"!==e&&"narrow"!==e)&&(e="wide");var t=n._getCalendarData().months["stand-alone"][e];return[t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12]]},isMonthPriorToYear:function(){var e=n._getCalendarData().dateFormats.long.toUpperCase();return e.indexOf("M")<e.indexOf("Y")},_getWeekData:function(e){var t=n.__getBundle(),a=n._getRegion()||"001",r=t.supplemental.weekData[e],o=r[a];return void 0===o&&(o=r["001"]),o},_getCalendarData:function(){var e=n.__getBundle().main;return e[Object.keys(e)[0]].dates.calendars.gregorian},_getRegion:function(){var t=e.Config.getLocale();if(t){var n=t.toUpperCase().split(/-|_/);if(n.length>=2){var a=n[1];if(4!==a.length)return a;if(n.length>=3)return n[2]}}return null},__getBundle:function(){var a=n._bundle;return a||(e.__isAmdLoaderPresent()?(e.Assert.assert(void 0!==t,"LocaleElements module must be loaded"),t):{})},__updateBundle:function(e){t=e}};return e.LocaleData=n,n});
/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 */
define('ojs/internal-deps/dvt/DvtToolkit',['jquery'], function($) {
  "use strict";
  // Internal use only.  All APIs and functionality are subject to change at any time.

  // Declare dvt, since it will be used in the toolkit source.
  var dvt;

dvt=function(){var t={Obj:function(){}};t.Obj._GET_FUNCTION_NAME_REGEXP=/function\s+([\S^]+)\s*\(/,t.Obj.createSubclass=function(e,i){var n=t.Obj._tempSubclassConstructor;n.prototype=i.prototype,e.prototype=new n,e.prototype.constructor=e,e.superclass=i.prototype},t.Obj._tempSubclassConstructor=function(){},t.Obj.prototype.clone=function(){return null},t.Obj.createCallback=function(t,e){return function(){return e.apply(t,arguments)}},t.Obj.compareValues=function(t,e,i){return t.oj.KeyUtils.equals(e,i)},t.Context=function(e,i,n){var o=i?i+"_svg":null;this._root=t.ToolkitUtils.createSvgDocument(o),e.appendChild(this._root),"blink"!==t.Agent.engine&&"safari"!==t.Agent.browser||(this._root.style.position="absolute",this._root.style.left="0px",this._root.style.top="0px",this._root.style.padding="inherit",this._sizingSvg=document.createElementNS(t.ToolkitUtils.SVG_NS,"svg"),this._sizingSvg.style.width="100%",this._sizingSvg.style.height="100%",e.appendChild(this._sizingSvg)),this._parentDiv=e,this._appAriaRole=this._parentDiv.getAttribute("role"),this._role=this._appAriaRole,this._referenceDiv=n,this._defs=t.SvgShapeUtils.createElement("defs"),t.ToolkitUtils.appendChildElem(this._root,this._defs),this._keyboardFocusArray=[],this._keyboardFocusIndex=0,this._dndEventManagers=[],this.Init(this._root,i),t.ToolkitUtils.appendChildElem(this._root,this._stage.getElem()),this.oj=null},t.Obj.createSubclass(t.Context,t.Obj),t.Context._DEFAULT_FONT_FAMILY="-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif",t.Context._DEFAULT_FONT_WEIGHT="400",t.Context._id=0,t.Context.DEFAULT_FONT_SIZE="12px",t.Context.ARIA_LABEL_STATE_DELIMITER=", ",t.Context.ARIA_LABEL_DESC_DELIMITER=". ",t.Context.prototype.Init=function(e,i){var n=(i||"_dvt"+t.Context._id)+"_stage";this._stage=new g(this,e,n),t.Context._id++,this._normalizedFontFamilyCache={},this.setDefaultFontSize(t.Context.DEFAULT_FONT_SIZE),this.setDefaultFontFamily(t.Context._DEFAULT_FONT_FAMILY),this.setDefaultFontWeight(t.Context._DEFAULT_FONT_WEIGHT),this._tooltipManagers=new Object,this._customTooltipManagers=new Object,this._scheduler=null,this._globalDefsMap={}},t.Context.prototype.getDefaultFontFamily=function(){return this._defaultFontFamily},t.Context.prototype.setDefaultFontFamily=function(e){e&&(this._defaultFontFamily=this._normalizeFontFamily(e),t.ToolkitUtils.setAttrNullNS(this._stage.getElem(),"font-family",this.getDefaultFontFamily()))},t.Context.prototype.isDefaultFontFamily=function(t){return!!t&&this._defaultFontFamily===this._normalizeFontFamily(t)},t.Context.prototype.getDefaultFontSize=function(){return this._defaultFontSize},t.Context.prototype.setDefaultFontSize=function(e){e&&(this._defaultFontSize=e,t.ToolkitUtils.setAttrNullNS(this._stage.getElem(),"font-size",this.getDefaultFontSize()))},t.Context.prototype.getDefaultFontWeight=function(){return this._defaultFontWeight},t.Context.prototype.setDefaultFontWeight=function(e){e&&(this._defaultFontWeight=e,t.ToolkitUtils.setAttrNullNS(this._stage.getElem(),"font-weight",this.getDefaultFontWeight()))},t.Context.prototype._normalizeFontFamily=function(t){var e=this._normalizedFontFamilyCache[t];return e||(e=t.replace(/, /g,",").replace(/"/g,"'"),this._normalizedFontFamilyCache[t]=e),e},t.Context.prototype.getStage=function(){return this._stage},t.Context.prototype.isReadyToRender=function(){if(this._destroyed)return!1;if(null!=this._parentDiv.offsetParent)return!0;var t=window.getComputedStyle(this._parentDiv);return!(!t||"fixed"!=t.position)&&"none"!=t.display},t.Context.prototype.getSvgDocument=function(){return this._root},t.Context.prototype.getSizingSvg=function(){return this._sizingSvg},t.Context.prototype.removeSizingSvg=function(){this._sizingSvg&&(t.ToolkitUtils.removeAttrNullNS(this._root,"style"),this.getContainer().removeChild(this._sizingSvg),this._sizingSvg=null)},t.Context.prototype.setReadingDirection=function(t){this._readingDirection=t},t.Context.prototype.getReadingDirection=function(){return this._readingDirection},t.Context.prototype.existsGlobalDefReference=function(t){return this._globalDefsMap[t]>0},t.Context.prototype.increaseGlobalDefReference=function(t){null!=t&&(this._globalDefsMap[t]?this._globalDefsMap[t]++:this._globalDefsMap[t]=1)},t.Context.prototype.decreaseGlobalDefReference=function(t){if(null!=t){var e=this._globalDefsMap[t];e&&(1==e?delete this._globalDefsMap[t]:this._globalDefsMap[t]=e-1),this._globalDefsMap[t]||this.removeDefsById(t)}},t.Context.prototype.getTooltipManager=function(e){return e||(e="_dvtTooltip"),e+=this.getStage().getId(),this._tooltipManagers[e]||(this._tooltipManagers[e]=new t.HtmlTooltipManager(this,e)),this._tooltipManagers[e]},t.Context.prototype.hideTooltips=function(){for(var t in this._tooltipManagers)this._tooltipManagers[t].hideTooltip()},t.Context.prototype.getScheduler=function(){return this._scheduler||(this._scheduler=new e(this)),this._scheduler},t.Context.prototype.pageToStageCoords=function(e,i){var n=this.getStageAbsolutePosition(),o=e-n.x,r=i-n.y;return new t.Point(o,r)},t.Context.prototype.stageToPageCoords=function(e,i){var n=this.getStageAbsolutePosition(),o=e+n.x,r=i+n.y;return new t.Point(o,r)},t.Context.prototype.getStageAbsolutePosition=function(){var e=this._referenceDiv;if(!e){var i=this.getStage().getSVGRoot();e=i.parentNode?i.parentNode:i}var n=t.Agent.getElementPosition(e);return new t.Point(parseInt(n.x),parseInt(n.y))},t.Context.prototype.isOffscreen=function(t){if(null!=this._bOffscreen&&!t)return this._bOffscreen;var e,i=this.getStage().getSVGRoot();try{var n=i.getBoundingClientRect();e=n.bottom<0||n.right<0||n.top>(window.innerHeight||document.documentElement.clientHeight)||n.left>(window.innerWidth||document.documentElement.clientWidth)}catch(t){e=!0}return t||(this._bOffscreen=e),e},t.Context.prototype.resetIsOffscreen=function(){this._bOffscreen=null},t.Context.prototype.getCustomTooltipManager=function(t){return t||(t="_dvtCustomTooltip"),t+=this.getStage().getId(),this._customTooltipManagers[t]||(this._customTooltipManagers[t]=new y(this,t)),this._customTooltipManagers[t]},t.Context.prototype.appendDefs=function(e){t.ToolkitUtils.appendChildElem(this._defs,e)},t.Context.prototype.getDefs=function(){return this._defs},t.Context.prototype.removeDefs=function(t){t._obj&&t._obj.destroy(),this._defs.removeChild(t)},t.Context.prototype.removeDefsById=function(t){for(var e=this._defs.childNodes,i=e.length,n=0;n<i;n++){var o=e[n];if(o.id===t)return void this.removeDefs(o)}},t.Context.prototype.getRootAttribute=function(e){return t.ToolkitUtils.getAttrNullNS(this._root,e)},t.Context.resetUniqueSeeds=function(){l._counter=0,t.ClipPath._uniqueSeed=0,t.SvgShapeUtils._uniqueSeed=0,t.Mask._uniqueSeed=0,t.Use._uniqueSeed=0,t.Agent._bInitialized=!1},t.Context.resetCaches=function(){t.TextUtils.clearCaches()},t.Context.prototype.setActiveElement=function(e){this._activeElement&&(t.ToolkitUtils.removeAttrNullNS(this._activeElement.getElem(),"id"),this._activeElement=null);var i=e.getElem(),n=t.ToolkitUtils.getAttrNullNS(i,"id");n||(n=t.Context._generateActiveElementId(e),t.ToolkitUtils.setAttrNullNS(i,"id",n),this._activeElement=e),e.applyAriaProperties(),"application"==this._role&&this._parentDiv.setAttribute("aria-activedescendant",n)},t.Context._generateActiveElementId=function(e){var i="_dvtActiveElement"+(t.Agent.isEnvironmentTest()?"":Math.floor(1e9*Math.random())),n=e.getId();return"string"==typeof n||n instanceof String||"number"==typeof n||n instanceof Number?i+"_"+n:i},t.Context.prototype.setAriaLabel=function(e){this._parentDiv.getAttribute("aria-label")||(e?this._parentDiv.setAttribute("aria-label",t.TextUtils.processAriaLabel(e)):this._parentDiv.removeAttribute("aria-label"))},t.Context.prototype.setAriaRole=function(t){this._appAriaRole||(t?this._parentDiv.setAttribute("role",t):this._parentDiv.removeAttribute("role"),this._role=t)},t.Context.prototype.setTooltipAttachedCallback=function(t){this._tooltipAttachedCallback=t},t.Context.prototype.getTooltipAttachedCallback=function(){return this._tooltipAttachedCallback},t.Context.prototype.resetCurrentKeyboardFocus=function(e){this._keyboardFocusArray&&0!==this._keyboardFocusArray.length&&(e.keyCode==t.KeyboardEvent.TAB&&e.shiftKey?this.setCurrentKeyboardFocus(this._keyboardFocusArray[this._keyboardFocusArray.length-1]):e.keyCode==t.KeyboardEvent.TAB&&this.setCurrentKeyboardFocus(this._keyboardFocusArray[0]))},t.Context.prototype.setKeyboardFocusArray=function(t){(this._keyboardFocusArray=t,this._keyboardFocusIndex=0,t.length>0)&&(this._root.parentNode._currentObj=this._keyboardFocusArray[this._keyboardFocusIndex])},t.Context.prototype.getCurrentKeyboardFocus=function(){return this._keyboardFocusArray.length<=this._keyboardFocusIndex?null:this._keyboardFocusArray[this._keyboardFocusIndex]},t.Context.prototype.setCurrentKeyboardFocus=function(t){var e=this._keyboardFocusArray.indexOf(t);if(-1==e)return!1;var i=this._keyboardFocusArray[e];return this._keyboardFocusIndex=e,this._root.parentNode._currentObj=i,!0},t.Context.prototype.nextKeyboardFocus=function(){var t=this._keyboardFocusArray[this._keyboardFocusIndex+1];return t?(this._keyboardFocusIndex++,this._root.parentNode._currentObj=t,t):null},t.Context.prototype.previousKeyboardFocus=function(){var t=this._keyboardFocusArray[this._keyboardFocusIndex-1];return t?(this._keyboardFocusIndex--,this._root.parentNode._currentObj=t,t):null},t.Context.prototype.getNumberConverter=function(t){var e=this.getLocaleHelpers();return e.createNumberConverter?e.createNumberConverter(t):null},t.Context.prototype.getLocaleHelpers=function(){return this._localeHelpers?this._localeHelpers:{}},t.Context.prototype.setLocaleHelpers=function(t){this._localeHelpers=t},t.Context.requestAnimationFrame=function(e){return t.Agent.isTouchDevice()&&"chrome"===t.Agent.browser?window.setTimeout(e,1e3/60):window.requestAnimationFrame(e)},t.Context.cancelAnimationFrame=function(e){t.Agent.isTouchDevice()&&"chrome"===t.Agent.browser?clearTimeout(e):window.cancelAnimationFrame(e)},t.Context.prototype.getContainer=function(){return this._parentDiv},t.Context.prototype.createOverlayDiv=function(){var t=document.createElement("div");return t.style.top="-100%",t.style.position="relative",t},t.Context.prototype.setOverlayAttachedCallback=function(t){this._overlayAttachedCallback=t},t.Context.prototype.getOverlayAttachedCallback=function(){return this._overlayAttachedCallback},t.Context.prototype.addDndEventManager=function(t){this._dndEventManagers.push(t)},t.Context.prototype.removeDndEventManager=function(t){var e=this._dndEventManagers.indexOf(t);this._dndEventManagers.splice(e,1)},t.Context.prototype.isLastDndEventManager=function(t){return this._dndEventManagers[this._dndEventManagers.length-1]===t},t.Context.prototype.setFixContextCallback=function(t){this._fixContextCallback=t},t.Context.prototype.fixRendererContext=function(t){return this._fixContextCallback?this._fixContextCallback(t):t},t.Context.prototype.setCustomElement=function(t){this._customElement=t},t.Context.prototype.isCustomElement=function(){return this._customElement},t.Context.prototype.destroy=function(){this._destroyed=!0},t.Context.prototype.setJetProperties=function(t){this._jetProps=t,Object.assign(this,t)},t.Context.prototype.getJetProperties=function(){return this._jetProps};var e=function(t){this.Init(t)};t.Obj.createSubclass(e,t.Obj),e.prototype.Init=function(t){this._scheduledItems=new Array,this._bRunning=!1},e.prototype.HandleTimer=function(){for(var i=(new Date).getTime(),n=0;n<this._scheduledItems.length;n++){var o=this._scheduledItems[n];o.processTime(i)&&this.removeScheduled(o)}this._scheduledItems.length<1?(this._bRunning&&(this._bRunning=!1,this._animationRequestId&&t.Context.cancelAnimationFrame(this._animationRequestId)),this._animationRequestId=null):this._animationRequestId=t.Context.requestAnimationFrame(t.Obj.createCallback(this,this.HandleTimer)),e._frameCount++},e.prototype.addScheduled=function(t){this._scheduledItems.indexOf(t)<0&&this._scheduledItems.push(t),this.play()},e.prototype.removeScheduled=function(t){var e=this._scheduledItems.indexOf(t);e>=0&&this._scheduledItems.splice(e,1)},e.prototype.play=function(){if(!this._bRunning){for(var e=0;e<this._scheduledItems.length;e++){var i=this._scheduledItems[e];i.isRunning()||i.play()}this._bRunning=!0,this._animationRequestId=t.Context.requestAnimationFrame(t.Obj.createCallback(this,this.HandleTimer))}},t.Animator=function(t,e,n,o){this._context=t,this._scheduler=t.getScheduler(),this._duration=e||.5,this._delay=n||0,this.setEasing(o),this._bRunning=!1,this._startTime=null,this._progress=0,this._state=i,this._onInit=null,this._onInitObj=null,this._onEnd=null,this._onEndObj=null,this._context=t,this._props=new Map};var i=0;t.Animator.TYPE_NUMBER="typeNumber",t.Animator.TYPE_MATRIX="typeMatrix",t.Animator.TYPE_NUMBER_ARRAY="typeNumberArray",t.Animator.TYPE_COLOR="typeColor",t.Animator.TYPE_COLOR_ARRAY="typeColorArray",t.Animator.TYPE_GROW_POLYLINE="typeGrowPolyline",t.Animator.TYPE_RECTANGLE="typeRectangle",t.Animator.TYPE_POINT="typePoint",t.Animator.TYPE_PATH="typePath",t.Animator.TYPE_GROW_PATH="typeGrowPath",t.Animator.TYPE_FILL="typeFill",t.Animator.TYPE_STROKE="typeStroke",t.Animator.TYPE_POLYLINE="typePolyline",t.Animator.prototype.addProp=function(t,e,i,o,r){var s=this._getPropItem(e,i);s?s.destVal=r:(s=new n(t,o,r),this._setPropItem(e,i,s))},t.Animator.prototype.getDestVal=function(t,e,i){var n=this._getPropItem(t,e);return n?n.destVal:i?e.call(t):null},t.Animator.prototype.setEasing=function(e){this._easing=e||t.Easing.cubicInOut},t.Animator.prototype.getOnEnd=function(){return[this._onEnd,this._onEndObj]},t.Animator.prototype.setOnEnd=function(t,e){this._onEnd=t,this._onEndObj=e||null},t.Animator.prototype.getOnInit=function(){return[this._onInit,this._onInitObj]},t.Animator.prototype.setOnInit=function(t,e){this._onInit=t,this._onInitObj=e||null},t.Animator.prototype.isRunning=function(){return this._bRunning},t.Animator.prototype.play=function(e){e?this._play():this._animationRequestId=t.Context.requestAnimationFrame(t.Obj.createCallback(this,this._play))},t.Animator.prototype.processTime=function(t){if(this._bRunning){var e=t-this._startTime;if(e<0)return!1;var i=1e3*this._getTotalDuration(),n=1;0!=i&&(n=e/i),n>1&&(n=1),this._processStep(n);var o=n>=1;return o&&this._processEnd(),o}},t.Animator.prototype.stop=function(e){this._animationRequestId&&(t.Context.cancelAnimationFrame(this._animationRequestId),this._animationRequestId=null),this._scheduler.removeScheduled(this),e&&this._processStep(1),this._processEnd()},t.Animator.prototype._getPropItem=function(t,e){var i=this._props.get(t);return i?i.get(e):null},t.Animator.prototype._setPropItem=function(t,e,i){var n=this._props.get(t);n||(n=new Map,this._props.set(t,n)),n.set(e,i)},t.Animator.prototype._getTotalDuration=function(){return this._delay+this._duration},t.Animator.prototype._play=function(){this._bRunning||(this._bRunning=!0,this._processPlay(),this._scheduler.addScheduled(this)),this._context.isOffscreen()&&this.stop(!0),this._animationRequestId=null},t.Animator.prototype._processEnd=function(){this._bRunning&&(this._bRunning=!1,this._progress=1,this._state=1),this._onEnd&&!this._ended&&(this._onEnd.call(this._onEndObj),this._ended=!0)},t.Animator.prototype._processInitialize=function(){this._onInit&&this._onInit.call(this._onInitObj),this._props.forEach(function(t,e){t.forEach(function(t,i){t.startVal=i.call(e)})}),this._state=1},t.Animator.prototype._processPlay=function(){if(this._state==i&&this._processInitialize(),1==this._state)this._startTime=(new Date).getTime(),this._bRunning=!0,this._progress=0;else{var t=1e3*this._progress*this._getTotalDuration();this._startTime=(new Date).getTime()-t}this._state=2},t.Animator.prototype._processStep=function(t){this._progress=t;var e=t;if(this._delay>0){var i=this._delay/this._getTotalDuration(),n=1-i;e=0===n?.5:Math.min(1,(t-i)/n)}if(e>=0){this._easing&&(e=this._easing(e));var r=this._context;this._props.forEach(function(t,i){t.forEach(function(t,n){var s=o.interpolate(r,t.type,t.startVal,t.destVal,e);t.setter.call(i,s)})})}};var n=function(t,e,i){this.type=t,this.setter=e,this.destVal=i,this.startVal=null};t.Playable=function(t){this.Init(t)},t.Obj.createSubclass(t.Playable,t.Obj),t.Playable.appendOnEnd=function(t,e,i){if(t&&e){var n=t.getOnEnd();if(n&&n[0]){t.setOnEnd(function(){n[0].call(n[1]),e.call(i)})}else t.setOnEnd(e,i)}},t.Playable.prependOnInit=function(t,e,i){if(t&&e&&t.getOnInit&&t.setOnInit){var n=t.getOnInit();if(n&&n[0]){t.setOnInit(function(){e.call(i),n[0].call(n[1])})}else t.setOnInit(e,i)}},t.Playable.prototype.Init=function(t){this.Context=t,this._onEnd=null,this._onEndObj=null},t.Playable.prototype.setOnEnd=function(t,e){this._onEnd=t,this._onEndObj=e||null,this.OnEndUpdated()},t.Playable.prototype.CallOnEnd=function(){this._onEnd&&!this._ended&&(this._onEnd.call(this._onEndObj),this._ended=!0)},t.Playable.prototype.getOnEnd=function(){return[this._onEnd,this._onEndObj]},t.Playable.prototype.OnEndUpdated=function(){},t.Playable.prototype.getDuration=function(){return 0},t.Playable.prototype.initialize=function(){},t.Playable.prototype.play=function(t){},t.Playable.prototype.stop=function(t){},t.ParallelPlayable=function(t){var e;arguments&&arguments.length>1&&arguments[1]instanceof Array?e=arguments[1]:(e=[].slice.call(arguments)).splice(0,1),this.Init(t,e)},t.Obj.createSubclass(t.ParallelPlayable,t.Playable),t.ParallelPlayable.prototype.Init=function(e,i){t.ParallelPlayable.superclass.Init.call(this,e),this._runningCounter=0,this._arPlayables=i||[],this._bStarted=!1},t.ParallelPlayable.prototype.getDuration=function(){for(var e=0,i=0;i<this._arPlayables.length;i++){var n=this._arPlayables[i];n instanceof t.Playable&&(e=Math.max(e,n.getDuration()))}return e},t.ParallelPlayable.prototype.initialize=function(){for(var e=0;e<this._arPlayables.length;e++)this._arPlayables[e]instanceof t.Playable&&this._arPlayables[e].initialize()},t.ParallelPlayable.prototype.play=function(e){this._arPlayables.length>0?e?this._play():(this.initialize(),this._animationRequestId=t.Context.requestAnimationFrame(t.Obj.createCallback(this,this._play))):this._animationRequestId=t.Context.requestAnimationFrame(t.Obj.createCallback(this,this.DoEnd))},t.ParallelPlayable.prototype._play=function(){var e;if(!this._bStarted)for(var i=0;i<this._arPlayables.length;i++)(e=this._arPlayables[i])instanceof t.Playable&&(this._runningCounter++,t.Playable.appendOnEnd(e,this.OnPlayableEnd,this));for(i=0;i<this._arPlayables.length;i++)(e=this._arPlayables[i])instanceof t.Playable&&e.play(!0);this._bStarted=!0,this._animationRequestId=null},t.ParallelPlayable.prototype.stop=function(e){if(this._animationRequestId)return t.Context.cancelAnimationFrame(this._animationRequestId),void this.DoEnd();for(var i,n=0;n<this._arPlayables.length;n++)(i=this._arPlayables[n])instanceof t.Playable&&i.stop(e)},t.ParallelPlayable.prototype.OnPlayableEnd=function(){this._runningCounter--,this._runningCounter<1&&this.DoEnd()},t.ParallelPlayable.prototype.DoEnd=function(){this.CallOnEnd(),this._animationRequestId=null},t.SequentialPlayable=function(t){var e;arguments&&arguments.length>1&&arguments[1]instanceof Array?e=arguments[1]:(e=[].slice.call(arguments)).splice(0,1),this.Init(t,e)},t.Obj.createSubclass(t.SequentialPlayable,t.Playable),t.SequentialPlayable.prototype.Init=function(e,i){t.SequentialPlayable.superclass.Init.call(this,e),this._arPlayables=i||[],this._currIndex=-1,this._bStarted=!1},t.SequentialPlayable.prototype.getDuration=function(){for(var e=0,i=0;i<this._arPlayables.length;i++){var n=this._arPlayables[i];n instanceof t.Playable&&(e+=n.getDuration())}return e},t.SequentialPlayable.prototype.initialize=function(){this._arPlayables.length>0&&this._arPlayables[0]instanceof t.Playable&&this._arPlayables[0].initialize()},t.SequentialPlayable.prototype.play=function(e){this._arPlayables&&this._arPlayables.length>0?e?this._play():(this.initialize(),this._animationRequestId=t.Context.requestAnimationFrame(t.Obj.createCallback(this,this._play))):this._animationRequestId=t.Context.requestAnimationFrame(t.Obj.createCallback(this,this.DoEnd))},t.SequentialPlayable.prototype._play=function(){if(this._bStarted){var e=this._arPlayables[this._currIndex];e instanceof t.Playable&&e.play(!0)}else{var i,n,o;this._arPlayables[0]instanceof t.Playable&&(i=this._arPlayables[0]),this._arPlayables[this._arPlayables.length-1]instanceof t.Playable&&(n=this._arPlayables[this._arPlayables.length-1]);for(var r=0;r<this._arPlayables.length-1;r++)(o=this._arPlayables[r])instanceof t.Playable&&t.Playable.appendOnEnd(o,this.DoSequenceStep,this);n&&t.Playable.appendOnEnd(n,this.DoEnd,this),this._bStarted=!0,this._currIndex=0,i&&i.play(!0),this._animationRequestId=null}},t.SequentialPlayable.prototype.DoSequenceStep=function(){var e=this._arPlayables[++this._currIndex];e instanceof t.Playable?e.play(!0):this.DoSequenceStep()},t.SequentialPlayable.prototype.stop=function(e){if(this._animationRequestId)return t.Context.cancelAnimationFrame(this._animationRequestId),void this.DoEnd();if(this._arPlayables)for(var i,n=this._currIndex;n<this._arPlayables.length;n++)(i=this._arPlayables[n])&&i instanceof t.Playable&&i.stop(e)},t.SequentialPlayable.prototype.DoEnd=function(){this.CallOnEnd(),this._animationRequestId=null},t.BlackBoxAnimationHandler=function(){},t.Obj.createSubclass(t.BlackBoxAnimationHandler,t.Obj),t.BlackBoxAnimationHandler.ALPHA_FADE="alphaFade",t.BlackBoxAnimationHandler.SLIDE_TO_RIGHT="slideToRight",t.BlackBoxAnimationHandler.SLIDE_TO_LEFT="slideToLeft",t.BlackBoxAnimationHandler.ZOOM="zoom",t.BlackBoxAnimationHandler.isSupported=function(e){return e==t.BlackBoxAnimationHandler.ALPHA_FADE||e==t.BlackBoxAnimationHandler.SLIDE_TO_RIGHT||e==t.BlackBoxAnimationHandler.SLIDE_TO_LEFT||e==t.BlackBoxAnimationHandler.ZOOM},t.BlackBoxAnimationHandler.getInAnimation=function(e,i,n,o,r){return i==t.BlackBoxAnimationHandler.ALPHA_FADE?new t.AnimFadeIn(e,n,r):i==t.BlackBoxAnimationHandler.SLIDE_TO_RIGHT?(t.BlackBoxAnimationHandler._offsetObjects(n,-o.w,0),new t.AnimMoveBy(e,n,new t.Point(o.w,0),r)):i==t.BlackBoxAnimationHandler.SLIDE_TO_LEFT?(t.BlackBoxAnimationHandler._offsetObjects(n,o.w,0),new t.AnimMoveBy(e,n,new t.Point(-o.w,0),r)):i==t.BlackBoxAnimationHandler.ZOOM?new t.AnimScaleFadeIn(e,n,o,t.BaseAnimation.DIR_C,.5,r):null},t.BlackBoxAnimationHandler.getCombinedAnimation=function(e,i,n,o,a,l){return i==t.BlackBoxAnimationHandler.ALPHA_FADE?new r(e,n,o,l):i==t.BlackBoxAnimationHandler.SLIDE_TO_RIGHT?(t.BlackBoxAnimationHandler._offsetObjects(o,-a.w,0),new t.CombinedAnimMoveBy(e,n,o,new t.Point(a.w,0),new t.Point(a.w,0),l)):i==t.BlackBoxAnimationHandler.SLIDE_TO_LEFT?(t.BlackBoxAnimationHandler._offsetObjects(o,a.w,0),new t.CombinedAnimMoveBy(e,n,o,new t.Point(-a.w,0),new t.Point(-a.w,0),l)):i==t.BlackBoxAnimationHandler.ZOOM?new s(e,n,o,a,t.BaseAnimation.DIR_C,t.BaseAnimation.DIR_C,.5,l):null},t.BlackBoxAnimationHandler._offsetObjects=function(e,i,n){if(e.length)for(var o=0;o<e.length;o++)t.BlackBoxAnimationHandler._offsetObjects(e[o],i,n);else e&&e.setTranslate(e.getTranslateX()+i,e.getTranslateY()+n)},t.DataAnimationHandler=function(t,e){this.Init(t,e)},t.Obj.createSubclass(t.DataAnimationHandler,t.Obj),t.DataAnimationHandler._OVERLAP_RATIO=.4,t.DataAnimationHandler.prototype.Init=function(t,e){this._context=t,this._deleteContainer=e,this._playables=[]},t.DataAnimationHandler.prototype.getCtx=function(){return this._context},t.DataAnimationHandler.prototype.constructAnimation=function(t,e){if(e&&!this._context.isOffscreen()){e=e.slice(0);var i=[];if(t){for(var n=new this._context.ojMap,o=0;o<e.length;o++){(s=e[o])&&s.getId()&&n.set(s.getId(),s)}for(var r=0;r<t.length;r++){var s,a=t[r],l=a?a.getId():void 0;(s=l?n.get(l):void 0)?(i.push(s.getId()),s.animateUpdate(this,a)):a&&a.animateDelete(this,this._deleteContainer)}}for(var h=new this._context.KeySetImpl(i),u=0;u<e.length;u++)!e[u]||e[u].getId()&&h.has(e[u].getId())||e[u].animateInsert(this)}},t.DataAnimationHandler.prototype.add=function(t,e){if(t){for(e||(e=0);this._playables.length<=e;)this._playables.push(new Array);this._playables[e].push(t)}},t.DataAnimationHandler.prototype.getAnimation=function(e){for(var i=[],n=0;n<this._playables.length;n++)if(this._playables[n].length>0){var o=new t.ParallelPlayable(this._context,this._playables[n]);i.push(o)}if(e){for(var r=[],s=0,a=0;a<i.length;a++){if(s>0){var l=new t.CustomAnimation(this._context,null,s);r.push(new t.SequentialPlayable(this._context,[l,i[a]]))}else r.push(i[a]);s+=(1-t.DataAnimationHandler._OVERLAP_RATIO)*i[a].getDuration()}return new t.ParallelPlayable(this._context,r)}return new t.SequentialPlayable(this._context,i)},t.DataAnimationHandler.prototype.getNumPlayables=function(){return this._playables.length},t.Easing=function(){this.Init()},t.Obj.createSubclass(t.Easing,t.Obj),t.Easing.linear=function(t){return t},t.Easing.quadraticIn=function(e){return t.Easing.PolyIn(e,2)},t.Easing.quadraticOut=function(e){return t.Easing.PolyOut(e,2)},t.Easing.quadraticInOut=function(e){return t.Easing.PolyInOut(e,2)},t.Easing.cubicIn=function(e){return t.Easing.PolyIn(e,3)},t.Easing.cubicOut=function(e){return t.Easing.PolyOut(e,3)},t.Easing.cubicInOut=function(e){return t.Easing.PolyInOut(e,3)},t.Easing.backOut=function(t,e){return e||(e=1.70158),1-(t=1-t)*t*((e+1)*t-e)},t.Easing.backIn=function(t,e){return e||(e=1.70158),t*t*((e+1)*t-e)},t.Easing.elasticIn=function(t,e,i){return t<=0||t>=1?t:(i||(i=.45),!e||e<1?(e=1,n=i/4):n=i/(2*Math.PI)*Math.asin(1/e),-e*Math.pow(2,10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/i));var n},t.Easing.elasticOut=function(e,i,n){return 1-t.Easing.elasticIn(1-e,i,n)},t.Easing.PolyIn=function(t,e){return t<0?0:t>1?1:Math.pow(t,e)},t.Easing.PolyOut=function(t,e){return t<0?0:t>1?1:1-Math.pow(1-t,e)},t.Easing.PolyInOut=function(t,e){return t<0?0:t>1?1:t<.5?.5*Math.pow(2*t,e):.5*(2-Math.pow(2*(1-t),e))},t.Easing.prototype.Init=function(){};var o=function(){this.Init()};t.Obj.createSubclass(o,t.Obj),o.interpolate=function(t,e,i,n,r){var s=o._getInterpolator(e);return s?s(t,i,n,r):n},o._getInterpolator=function(t){return o._map[t]},o.InterpolateNumber=function(e,i,n,o){return t.Math.interpolateNumber(i,n,o)},o.InterpolateNumberArray=function(t,e,i,n){for(var r=e.length,s=i.length,a=[],l=0;l<Math.max(r,s);l++){var h,u;h=l<r?e[l]:e[r-1],u=l<s?i[l]:i[s-1],a.push(o.InterpolateNumber(t,h,u,n))}return a},o.InterpolateMatrix=function(e,i,n,r){var s=o.InterpolateNumber(e,i.getA(),n.getA(),r),a=o.InterpolateNumber(e,i.getB(),n.getB(),r),l=o.InterpolateNumber(e,i.getC(),n.getC(),r),h=o.InterpolateNumber(e,i.getD(),n.getD(),r),u=o.InterpolateNumber(e,i.getTx(),n.getTx(),r),c=o.InterpolateNumber(e,i.getTy(),n.getTy(),r);return new t.Matrix(s,a,l,h,u,c)},o.InterpolateColor=function(e,i,n,o){return t.ColorUtils.interpolateColor(i,n,o)},o.InterpolateColorArray=function(t,e,i,n){for(var r=e.length,s=i.length,a=[],l=0;l<Math.max(r,s);l++){var h,u;h=l<r?e[l]:e[r-1],u=l<s?i[l]:i[s-1],a.push(o.InterpolateColor(t,h,u,n))}return a},o.InterpolateGrowPolyline=function(t,e,i,n){if(0===n)return[i[0],i[1]];if(1===n)return i;for(var r,s=i.length,a=[i[0],i[1]],l=n*o.CalcPolylineLength(i),h=0,u=2;u<s-1;u+=2){var c=i[u-2],p=i[u-1],_=i[u],g=i[u+1];if(h+(r=o.CalcPolylineLength([c,p,_,g]))>l){var d=(l-h)/r,S=_-c,f=g-p;a.push(c+d*S),a.push(p+d*f);break}h+=r,a.push(_),a.push(g)}return a},o.InterpolateGrowPath=function(t,e,i,n){if(0===n)return[i[0],i[1]];if(1===n)return i;for(var r,s,a,l,h,u,c,p,_,g=i.length,d=[],S=n*o.CalcPathLength(i),f=0,y=0;y<g;y++){var T,v=i[y];switch(v){case"M":T=[p=s=i[++y],_=a=i[++y],p,_];break;case"L":T=[p,_,s=i[++y],a=i[++y]];break;case"Q":l=i[++y],h=i[++y],T=[p,_,s=i[++y],a=i[++y]];break;case"C":l=i[++y],h=i[++y],u=i[++y],c=i[++y],T=[p,_,s=i[++y],a=i[++y]]}if(f+(r=o.CalcPolylineLength(T))>S){var m=(S-f)/r;switch(d.push(v),v){case"Q":d.push(p+m*(l-p),_+m*(h-_));break;case"C":d.push(p+m*(l-p),_+m*(h-_),p+m*(u-p),_+m*(c-_))}d.push(p+m*(s-p),_+m*(a-_));break}switch(f+=r,d.push(v),v){case"Q":d.push(l,h);break;case"C":d.push(l,h,u,c)}d.push(s),d.push(a),p=s,_=a}return d},o.CalcPolylineLength=function(t){for(var e,i,n,o,r=0,s=0;s<t.length;s+=2){if(n=t[s],o=t[s+1],s>0)if(n===e)r+=Math.abs(o-i);else if(o===i)r+=Math.abs(n-e);else{var a=Math.abs(n-e),l=Math.abs(o-i);r+=Math.sqrt(a*a+l*l)}e=n,i=o}return r},o.CalcPathLength=function(t){for(var e,i,n,o,r=0,s=0;s<t.length;){switch(t[s]){case"M":e=n=t[s+1],i=o=t[s+2],s+=3;continue;case"L":n=t[s+1],o=t[s+2],s+=3;break;case"Q":n=t[s+3],o=t[s+4],s+=5;break;case"C":n=t[s+5],o=t[s+6],s+=7}if(s>0)if(n===e)r+=Math.abs(o-i);else if(o===i)r+=Math.abs(n-e);else{var a=Math.abs(n-e),l=Math.abs(o-i);r+=Math.sqrt(a*a+l*l)}e=n,i=o}return r},o.InterpolateRectangle=function(e,i,n,r){var s=o.InterpolateNumber(e,i.x,n.x,r),a=o.InterpolateNumber(e,i.y,n.y,r),l=o.InterpolateNumber(e,i.w,n.w,r),h=o.InterpolateNumber(e,i.h,n.h,r);return new t.Rectangle(s,a,l,h)},o.InterpolatePoint=function(e,i,n,r){var s=o.InterpolateNumber(e,i.x,n.x,r),a=o.InterpolateNumber(e,i.y,n.y,r);return new t.Point(s,a)},o.InterpolatePath=function(t,e,i,n){var r=e.length,s=i.length;if(r!=s)return i;for(var a=[],l=0,h=0;l<r&&h<s;){var u=e[l],c=i[h],p=!isNaN(u),_=!isNaN(c);p||_?p&&_&&a.push(o.InterpolateNumber(t,u,c,n)):u===c&&a.push(u),l++,h++}return a},o.InterpolateFill=function(e,i,n,r){if(i instanceof t.SolidFill&&n instanceof t.SolidFill){var s=o.InterpolateColor(e,i.getColor(),n.getColor(),r),a=o.InterpolateNumber(e,i.getAlpha(),n.getAlpha(),r);return new t.SolidFill(s,a)}return n},o.InterpolateStroke=function(e,i,n,r){if(i instanceof t.Stroke&&n instanceof t.Stroke){var s=o.InterpolateColor(e,i.getColor(),n.getColor(),r),a=o.InterpolateNumber(e,i.getAlpha(),n.getAlpha(),r),l=o.InterpolateNumber(e,i.getWidth(),n.getWidth(),r);return new t.Stroke(s,a,l,n.isFixedWidth(),n.getDashProps(),n.getLineProps())}return n},o.InterpolatePolyline=function(t,e,i,n){for(var r=e.length,s=i.length,a=[],l=0;l<Math.max(r,s);l++){var h,u,c=2;l%2==1&&(c=1),h=l<r?e[l]:e[r-c],u=l<s?i[l]:i[s-c],a.push(o.InterpolateNumber(t,h,u,n))}if(s<r){var p=a.length,_=a[p-2],g=a[p-1];for(l=p-4;l>=0;l-=2){var d=a[l],S=a[l+1];if(d!=_||S!=g)break;a.splice(l,2)}}return a},o.prototype.Init=function(){},o._map={},o._map[t.Animator.TYPE_NUMBER]=o.InterpolateNumber,o._map[t.Animator.TYPE_MATRIX]=o.InterpolateMatrix,o._map[t.Animator.TYPE_NUMBER_ARRAY]=o.InterpolateNumberArray,o._map[t.Animator.TYPE_COLOR]=o.InterpolateColor,o._map[t.Animator.TYPE_COLOR_ARRAY]=o.InterpolateColorArray,o._map[t.Animator.TYPE_GROW_POLYLINE]=o.InterpolateGrowPolyline,o._map[t.Animator.TYPE_RECTANGLE]=o.InterpolateRectangle,o._map[t.Animator.TYPE_POINT]=o.InterpolatePoint,o._map[t.Animator.TYPE_PATH]=o.InterpolatePath,o._map[t.Animator.TYPE_GROW_PATH]=o.InterpolateGrowPath,o._map[t.Animator.TYPE_FILL]=o.InterpolateFill,o._map[t.Animator.TYPE_STROKE]=o.InterpolateStroke,o._map[t.Animator.TYPE_POLYLINE]=o.InterpolatePolyline,t.Timer=function(t,e,i,n,o){this.Init(t,e,i,n,o)},t.Obj.createSubclass(t.Timer,t.Obj),t.Timer.prototype.Init=function(t,e,i,n,o){this._interval=e,this._callback=i,this._callbackObj=n,this._repeatCount=o,this._bRunning=!1,this._numIterations=0},t.Timer.prototype.start=function(){this._bRunning||(this._bRunning=!0,this.StartTimer())},t.Timer.prototype.stop=function(){this._bRunning&&(this._bRunning=!1,this.StopTimer())},t.Timer.prototype.reset=function(){this._bRunning&&this.stop(),this._numIterations=0},t.Timer.prototype.isRunning=function(){return this._bRunning},t.Timer.prototype.HandleTimer=function(){this._callback&&(this._callback.call(this._callbackObj),this._repeatCount&&(this._numIterations++,this._numIterations>=this._repeatCount&&this.stop()))},t.Timer.prototype.setInterval=function(t){var e=t;e<0&&(e=0);var i=this._bRunning;i&&this.stop(),this._interval=e,i&&this.start()},t.Timer.prototype.getInterval=function(){return this._interval},t.Timer.prototype.StartTimer=function(){var t=this,e=this.HandleTimer;this._timerId=window.setInterval(function(){e.call(t)},this.getInterval())},t.Timer.prototype.StopTimer=function(){this._timerId&&(window.clearInterval(this._timerId),this._timerId=null)},t.BaseAnimation=function(t,e,i,n){this.Init(t,e,i,n)},t.Obj.createSubclass(t.BaseAnimation,t.Playable),t.BaseAnimation.EASING_LINEAR=1,t.BaseAnimation.EASING_CUBIC_IN_OUT=2,t.BaseAnimation.EASING_CUBIC_IN=3,t.BaseAnimation.EASING_CUBIC_OUT=4,t.BaseAnimation.EASING_QUADRATIC_IN_OUT=5,t.BaseAnimation.EASING_QUADRATIC_IN=6,t.BaseAnimation.EASING_QUADRATIC_OUT=7,t.BaseAnimation.EASING_BOUNCE_IN=8,t.BaseAnimation.EASING_BOUNCE_OUT=9,t.BaseAnimation.EASING_ELASTIC_IN=10,t.BaseAnimation.EASING_ELASTIC_OUT=11,t.BaseAnimation.DIR_C=1,t.BaseAnimation.DIR_N=2,t.BaseAnimation.DIR_NE=3,t.BaseAnimation.DIR_E=4,t.BaseAnimation.DIR_SE=5,t.BaseAnimation.DIR_S=6,t.BaseAnimation.DIR_SW=7,t.BaseAnimation.DIR_W=8,t.BaseAnimation.DIR_NW=9,t.BaseAnimation.AXIS_X=1,t.BaseAnimation.AXIS_Y=2,t.BaseAnimation.ROT_DIR_CLOCKWISE=1,t.BaseAnimation.ROT_DIR_COUNTERCLOCKWISE=2,t.BaseAnimation.GetEasingFunction=function(e){switch(e){case t.BaseAnimation.EASING_LINEAR:return t.Easing.linear;case t.BaseAnimation.EASING_CUBIC_IN:return t.Easing.cubicIn;case t.BaseAnimation.EASING_CUBIC_OUT:return t.Easing.cubicOut;case t.BaseAnimation.EASING_QUADRATIC_IN_OUT:return t.Easing.quadraticInOut;case t.BaseAnimation.EASING_QUADRATIC_IN:return t.Easing.quadraticIn;case t.BaseAnimation.EASING_QUADRATIC_OUT:return t.Easing.quadraticOut;case t.BaseAnimation.EASING_BOUNCE_IN:return t.Easing.backIn;case t.BaseAnimation.EASING_BOUNCE_OUT:return t.Easing.backOut;case t.BaseAnimation.EASING_ELASTIC_IN:return t.Easing.elasticIn;case t.BaseAnimation.EASING_ELASTIC_OUT:return t.Easing.elasticOut;case t.BaseAnimation.EASING_CUBIC_IN_OUT:default:return t.Easing.cubicInOut}},t.BaseAnimation.GetCompassPoint=function(e,i){switch(i){case t.BaseAnimation.DIR_N:return new t.Point(e.x+.5*e.w,e.y);case t.BaseAnimation.DIR_NE:return new t.Point(e.x+e.w,e.y);case t.BaseAnimation.DIR_E:return new t.Point(e.x+e.w,e.y+.5*e.h);case t.BaseAnimation.DIR_SE:return new t.Point(e.x+e.w,e.y+e.h);case t.BaseAnimation.DIR_S:return new t.Point(e.x+.5*e.w,e.y+e.h);case t.BaseAnimation.DIR_SW:return new t.Point(e.x,e.y+e.h);case t.BaseAnimation.DIR_W:return new t.Point(e.x,e.y+.5*e.h);case t.BaseAnimation.DIR_NW:return new t.Point(e.x,e.y);case t.BaseAnimation.DIR_C:default:return new t.Point(e.x+.5*e.w,e.y+.5*e.h)}},t.BaseAnimation.GetAlignCompassPoint=function(e,i,n){var o=t.BaseAnimation.GetCompassPoint(i,n);switch(n){case t.BaseAnimation.DIR_N:return new t.Point(o.x-.5*e.w,o.y);case t.BaseAnimation.DIR_NE:return new t.Point(o.x-e.w,o.y);case t.BaseAnimation.DIR_E:return new t.Point(o.x-e.w,o.y-.5*e.h);case t.BaseAnimation.DIR_SE:return new t.Point(o.x-e.w,o.y-e.h);case t.BaseAnimation.DIR_S:return new t.Point(o.x-.5*e.w,o.y-e.h);case t.BaseAnimation.DIR_SW:return new t.Point(o.x,o.y-e.h);case t.BaseAnimation.DIR_W:return new t.Point(o.x,o.y-.5*e.h);case t.BaseAnimation.DIR_NW:return new t.Point(o.x,o.y);case t.BaseAnimation.DIR_C:default:return new t.Point(o.x-.5*e.w,o.y-.5*e.h)}},t.BaseAnimation.prototype.Init=function(e,i,n,o){t.BaseAnimation.superclass.Init.call(this,e),this._context=e,i instanceof Array?this._arObjects=i:this._arObjects=[i],this._duration=n||.5,this._delay=o||0,this._easing=t.BaseAnimation.EASING_CUBIC_IN_OUT,this._bInitialized=!1,this._bSaveAndRestoreOriginalMatrices=!1,this._origMatrixArray=null,this._bHideObjectsOnEnd=!1,this.CreateAnimator(e)},t.BaseAnimation.prototype.GetContext=function(){return this._context},t.BaseAnimation.prototype.isRunning=function(){return!!this._animator&&this._animator.isRunning()},t.BaseAnimation.prototype.initialize=function(){this._bInitialized||(this._initializeEndStates(this._arObjects),this._initializeStartStates(this._arObjects),this.InitializePlay(),this._bInitialized=!0)},t.BaseAnimation.prototype.play=function(t){this.initialize(),this._animator&&this._animator.play(t)},t.BaseAnimation.prototype.stop=function(t){this._animator&&this._animator.stop(t)},t.BaseAnimation.prototype.getDuration=function(){return this._duration},t.BaseAnimation.prototype.setEasing=function(e){this._easing=e,this._animator&&this._animator.setEasing(t.BaseAnimation.GetEasingFunction(this._easing))},t.BaseAnimation.prototype.CreateAnimator=function(e){this._animator=new t.Animator(e,this._duration,this._delay,t.BaseAnimation.GetEasingFunction(this._easing)),this._animator.setOnEnd(this.OnAnimEnd,this)},t.BaseAnimation.prototype.OnAnimEnd=function(){this._bHideObjectsOnEnd&&this.SetObjectsVisible(!1),this._bSaveAndRestoreOriginalMatrices&&this.RestoreOriginalMatrices(),this.CallOnEnd()},t.BaseAnimation.prototype.InitializePlay=function(){},t.BaseAnimation.prototype._initializeStartStates=function(t){if(t)for(var e,i=0;i<t.length;i++)(e=t[i])&&(this._bSaveAndRestoreOriginalMatrices&&(this._origMatrixArray||(this._origMatrixArray=[]),this._origMatrixArray.push(e.getMatrix())),this.InitStartState(e))},t.BaseAnimation.prototype._initializeEndStates=function(t){if(t)for(var e,i=0;i<t.length;i++)(e=t[i])&&this.InitEndState(e)},t.BaseAnimation.prototype.InitStartState=function(t){},t.BaseAnimation.prototype.InitEndState=function(t){},t.BaseAnimation.prototype.SetObjectsVisible=function(t){if(this._arObjects)for(var e,i=this._arObjects.length-1;i>=0;i--)(e=this._arObjects[i])&&e.setVisible(t)},t.BaseAnimation.prototype.RestoreOriginalMatrices=function(){if(this._arObjects)for(var t,e=this._arObjects.length-1;e>=0;e--)(t=this._arObjects[e])&&this._origMatrixArray&&t.setMatrix(this._origMatrixArray.pop())},t.CustomAnimation=function(t,e,i,n){this.Init(t,e,i,n)},t.Obj.createSubclass(t.CustomAnimation,t.BaseAnimation),t.CustomAnimation.prototype.getAnimator=function(){return this._animator},t.AnimFadeIn=function(t,e,i,n){this.Init(t,e,i,n)},t.Obj.createSubclass(t.AnimFadeIn,t.BaseAnimation),t.AnimFadeIn.prototype.Init=function(e,i,n,o){t.AnimFadeIn.superclass.Init.call(this,e,i,n,o)},t.AnimFadeIn.prototype.InitStartState=function(t){t.setAlpha(0)},t.AnimFadeIn.prototype.InitEndState=function(e){this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getAlpha,e.setAlpha,1)},t.AnimFadeOut=function(t,e,i,n){this.Init(t,e,i,n)},t.Obj.createSubclass(t.AnimFadeOut,t.BaseAnimation),t.AnimFadeOut.prototype.Init=function(e,i,n,o){t.AnimFadeOut.superclass.Init.call(this,e,i,n,o)},t.AnimFadeOut.prototype.InitEndState=function(e){this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getAlpha,e.setAlpha,0)},t.AnimMoveBy=function(t,e,i,n,o){this.Init(t,e,i,n,o)},t.Obj.createSubclass(t.AnimMoveBy,t.BaseAnimation),t.AnimMoveBy.prototype.Init=function(e,i,n,o,r){n instanceof Array?this._arOffsets=n:n instanceof t.Point?this._arOffsets=[n]:this._arOffsets=[new t.Point(0,0)],this._currIndex=0,t.AnimMoveBy.superclass.Init.call(this,e,i,o,r)},t.AnimMoveBy.prototype.InitEndState=function(e){var i;i=this._currIndex<this._arOffsets.length?this._arOffsets[this._currIndex]:this._arOffsets[this._arOffsets.length-1],this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getTranslateX,e.setTranslateX,e.getTranslateX()+i.x),this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getTranslateY,e.setTranslateY,e.getTranslateY()+i.y),this._currIndex++},t.AnimMoveTo=function(t,e,i,n,o){this.Init(t,e,i,n,o)},t.Obj.createSubclass(t.AnimMoveTo,t.BaseAnimation),t.AnimMoveTo.prototype.Init=function(e,i,n,o,r){n instanceof Array?this._arPoints=n:n instanceof t.Point?this._arPoints=[n]:this._arPoints=[new t.Point(0,0)],this._currIndex=0,t.AnimMoveTo.superclass.Init.call(this,e,i,o,r)},t.AnimMoveTo.prototype.InitEndState=function(e){var i;i=this._currIndex<this._arPoints.length?this._arPoints[this._currIndex]:this._arPoints[this._arPoints.length-1],this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getTranslateX,e.setTranslateX,i.x),this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getTranslateY,e.setTranslateY,i.y),this._currIndex++},t.AnimScaleFadeIn=function(t,e,i,n,o,r,s){this.Init(t,e,i,n,o,r,s)},t.Obj.createSubclass(t.AnimScaleFadeIn,t.AnimFadeIn),t.AnimScaleFadeIn.prototype.Init=function(e,i,n,o,r,s,a){this._boundsRect=n,this._direction=o||t.BaseAnimation.DIR_NW,this._minScale=r||.5,t.AnimScaleFadeIn.superclass.Init.call(this,e,i,s,a),this._bSaveAndRestoreOriginalMatrices=!0},t.AnimScaleFadeIn.prototype.InitStartState=function(e){t.AnimScaleFadeIn.superclass.InitStartState.call(this,e);var i=this._minScale*e.getScaleX(),n=this._minScale*e.getScaleY(),o=e.getDimensions(),r=new t.Rectangle(0,0,i*o.w,n*o.h),s=t.BaseAnimation.GetAlignCompassPoint(r,this._boundsRect,this._direction);e.setTranslate(s.x,s.y),e.setScale(i,n)},t.AnimScaleFadeIn.prototype.InitEndState=function(e){t.AnimScaleFadeIn.superclass.InitEndState.call(this,e);var i=e.getMatrix();this._animator.addProp(t.Animator.TYPE_MATRIX,e,e.getMatrix,e.setMatrix,i)},t.AnimScaleTo=function(t,e,i,n,o){this.Init(t,e,i,n,o)},t.Obj.createSubclass(t.AnimScaleTo,t.BaseAnimation),t.AnimScaleTo.prototype.Init=function(e,i,n,o,r){n instanceof Array?this._arScales=n:n instanceof t.Point?this._arScales=[n]:this._arScales=[new t.Point(1,1)],this._currIndex=0,t.AnimScaleTo.superclass.Init.call(this,e,i,o,r)},t.AnimScaleTo.prototype.InitEndState=function(e){var i;i=this._currIndex<this._arScales.length?this._arScales[this._currIndex]:this._arScales[this._arScales.length-1],this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getScaleX,e.setScaleX,i.x),this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getScaleY,e.setScaleY,i.y),this._currIndex++},t.AnimPopIn=function(t,e,i,n,o){this.Init(t,e,i,n,o)},t.Obj.createSubclass(t.AnimPopIn,t.BaseAnimation),t.AnimPopIn.BackOut=function(e){return t.Easing.backOut(e,2.5)},t.AnimPopIn.prototype.Init=function(e,i,n,o,r){this._bCenter=n,this._bCenter&&(this._tempContainers=[],this._currIndex=0),t.AnimPopIn.superclass.Init.call(this,e,i,o,r)},t.AnimPopIn.prototype.setEasing=function(t){},t.AnimPopIn.prototype.CreateAnimator=function(e){t.AnimPopIn.superclass.CreateAnimator.call(this,e),this._animator.setEasing(t.AnimPopIn.BackOut),this._bCenter&&t.Playable.appendOnEnd(this._animator,this.RemoveTempContainers,this)},t.AnimPopIn.prototype.InitStartState=function(t){if(this._bCenter){var e=this._tempContainers[this._currIndex],i=t.getDimensions();e._dvtAnimPopInOrigTx=t.getTranslateX(),e._dvtAnimPopInOrigTy=t.getTranslateY();var n=i.x+.5*i.w,o=i.y+.5*i.h;e.setTranslate(e._dvtAnimPopInOrigTx+n,e._dvtAnimPopInOrigTy+o),t.setTranslate(-n,-o);var r=t.getParent().getChildIndex(t);e._dvtAnimPopInChildIndex=r,t.getParent().addChildAt(e,r),e.addChild(t),e.setScale(.01,.01),this._currIndex++}else t.setScale(.01,.01);t.setVisible(!0)},t.AnimPopIn.prototype.InitEndState=function(e){if(this._bCenter){var i=new t.Container(this._context);this._tempContainers.push(i),this._animator.addProp(t.Animator.TYPE_NUMBER,i,i.getScaleX,i.setScaleX,1),this._animator.addProp(t.Animator.TYPE_NUMBER,i,i.getScaleY,i.setScaleY,1)}else this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getScaleX,e.setScaleX,1),this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getScaleY,e.setScaleY,1)},t.AnimPopIn.prototype.RemoveTempContainers=function(){if(this._tempContainers){for(var t=0;t<this._tempContainers.length;t++){var e=this._tempContainers[t];if(this._tempContainers[t]=null,e.getNumChildren()>0){var i=e.getChildAt(0);i&&(i.setTranslate(e._dvtAnimPopInOrigTx,e._dvtAnimPopInOrigTy),e.getParent().addChildAt(i,e._dvtAnimPopInChildIndex))}e.getParent().removeChild(e)}this._tempContainers=null}};var r=function(t,e,i,n,o){this.Init(t,e,i,n,o)};t.Obj.createSubclass(r,t.ParallelPlayable),r.prototype.Init=function(e,i,n,o,s){o||(o=.5),s||(s=0);var a=new t.AnimFadeOut(e,i,o,s),l=new t.AnimFadeIn(e,n,o,.5*a.getDuration()+s);r.superclass.Init.call(this,e,[a,l])},t.CombinedAnimMoveBy=function(t,e,i,n,o,r,s){this.Init(t,e,i,n,o,r,s)},t.Obj.createSubclass(t.CombinedAnimMoveBy,t.ParallelPlayable),t.CombinedAnimMoveBy.prototype.Init=function(e,i,n,o,r,s,a){s||(s=.5),a||(a=0);var l=new t.AnimMoveBy(e,i,o,s,a),h=new t.AnimMoveBy(e,n,r,s,a);t.CombinedAnimMoveBy.superclass.Init.call(this,e,[l,h])};var s=function(t,e,i,n,o,r,s,a,l){this.Init(t,e,i,n,o,r,s,a,l)};t.Obj.createSubclass(s,t.ParallelPlayable),s.prototype.Init=function(e,i,n,o,r,a,l,h,u){r||(r=t.BaseAnimation.DIR_NE),a||(a=t.BaseAnimation.DIR_NW),l||(l=.5),h||(h=.5),u||(u=0);var c=new t.AnimScaleFadeOut(e,i,o,r,l,h,u),p=new t.AnimScaleFadeIn(e,n,o,a,l,h,.3*c.getDuration()+u);s.superclass.Init.call(this,e,[c,p])},t.ColorUtils={},t.Obj.createSubclass(t.ColorUtils,t.Obj),t.ColorUtils._RED=0,t.ColorUtils._GREEN=1,t.ColorUtils._BLUE=2,t.ColorUtils._ALPHA=3,t.ColorUtils._RGBA="rgba(",t.ColorUtils._RGB="rgb(",t.ColorUtils._POUND="#",t.ColorUtils._FACTOR=.15,t.ColorUtils._names,t.ColorUtils._CONTRASTING_TEXT_COLOR_CACHE={},t.ColorUtils.getColorFromName=function(e){if(!t.ColorUtils._names){var i=[];i.aliceblue="#f0f8ff",i.antiquewhite="#faEbd7",i.aqua="#00ffff",i.aquamarine="#7fffd4",i.azure="#f0ffff",i.beige="#f5f5dc",i.bisque="#ffE4c4",i.black="#000000",i.blanchedalmond="#ffEbcd",i.blue="#0000ff",i.blueviolet="#8a2bE2",i.brown="#a52a2a",i.burlywood="#dEb887",i.cadetblue="#5f9Ea0",i.chartreuse="#7fff00",i.chocolate="#d2691E",i.coral="#ff7f50",i.cornflowerblue="#6495Ed",i.cornsilk="#fff8dc",i.crimson="#dc143c",i.cyan="#00ffff",i.darkblue="#00008b",i.darkcyan="#008b8b",i.darkgoldenrod="#b8860b",i.darkgray="#a9a9a9",i.darkgreen="#006400",i.darkkhaki="#bdb76b",i.darkmagenta="#8b008b",i.darkolivegreen="#556b2f",i.darkorange="#ff8c00",i.darkorchid="#9932cc",i.darkred="#8b0000",i.darksalmon="#E9967a",i.darkseagreen="#8fbc8f",i.darkslateblue="#483d8b",i.darkslategray="#2f4f4f",i.darkturquoise="#00cEd1",i.darkviolet="#9400d3",i.deeppink="#ff1493",i.deepskyblue="#00bfff",i.dimgray="#696969",i.dodgerblue="#1E90ff",i.firebrick="#b22222",i.floralwhite="#fffaf0",i.forestgreen="#228b22",i.fuchsia="#ff00ff",i.gainsboro="#dcdcdc",i.ghostwhite="#f8f8ff",i.gold="#ffd700",i.goldenrod="#daa520",i.gray="#808080",i.green="#008000",i.greenyellow="#adff2f",i.honeydew="#f0fff0",i.hotpink="#ff69b4",i["indianred "]="#cd5c5c",i["indigo "]="#4b0082",i.ivory="#fffff0",i.khaki="#f0E68c",i.lavender="#E6E6fa",i.lavenderblush="#fff0f5",i.lawngreen="#7cfc00",i.lemonchiffon="#fffacd",i.lightblue="#add8E6",i.lightcoral="#f08080",i.lightcyan="#E0ffff",i.lightgoldenrodyellow="#fafad2",i.lightgray="#d3d3d3",i.lightgreen="#90EE90",i.lightpink="#ffb6c1",i.lightsalmon="#ffa07a",i.lightseagreen="#20b2aa",i.lightskyblue="#87cEfa",i.lightslategray="#778899",i.lightsteelblue="#b0c4dE",i.lightyellow="#ffffE0",i.lime="#00ff00",i.limegreen="#32cd32",i.linen="#faf0E6",i.magenta="#ff00ff",i.maroon="#800000",i.mediumaquamarine="#66cdaa",i.mediumblue="#0000cd",i.mediumorchid="#ba55d3",i.mediumpurple="#9370db",i.mediumseagreen="#3cb371",i.mediumslateblue="#7b68EE",i.mediumspringgreen="#00fa9a",i.mediumturquoise="#48d1cc",i.mediumvioletred="#c71585",i.midnightblue="#191970",i.mintcream="#f5fffa",i.mistyrose="#ffE4E1",i.moccasin="#ffE4b5",i.navajowhite="#ffdEad",i.navy="#000080",i.oldlace="#fdf5E6",i.olive="#808000",i.olivedrab="#6b8E23",i.orange="#ffa500",i.orangered="#ff4500",i.orchid="#da70d6",i.palegoldenrod="#EEE8aa",i.palegreen="#98fb98",i.paleturquoise="#afEEEE",i.palevioletred="#db7093",i.papayawhip="#ffEfd5",i.peachpuff="#ffdab9",i.peru="#cd853f",i.pink="#ffc0cb",i.plum="#dda0dd",i.powderblue="#b0E0E6",i.purple="#800080",i.rebeccapurple="#663399",i.red="#ff0000",i.rosybrown="#bc8f8f",i.royalblue="#4169E1",i.saddlebrown="#8b4513",i.salmon="#fa8072",i.sandybrown="#f4a460",i.seagreen="#2E8b57",i.seashell="#fff5EE",i.sienna="#a0522d",i.silver="#c0c0c0",i.skyblue="#87cEEb",i.slateblue="#6a5acd",i.slategray="#708090",i.snow="#fffafa",i.springgreen="#00ff7f",i.steelblue="#4682b4",i.tan="#d2b48c",i.teal="#008080",i.thistle="#d8bfd8",i.tomato="#ff6347",i.turquoise="#40E0d0",i.violet="#EE82EE",i.wheat="#f5dEb3",i.white="#ffffff",i.whitesmoke="#f5f5f5",i.yellow="#ffff00",i.yellowgreen="#9acd32",i.transparent="rgba(255,255,255,0)",t.ColorUtils._names=i}return t.ColorUtils._names[e.toLowerCase()]},t.ColorUtils._getChannel=function(e,i){var n=i,o=null,r=t.ColorUtils.getColorFromName(n);if(r&&(n=r),e===t.ColorUtils._ALPHA){if("#"===n.charAt(0))return n.length>7?parseInt(n.substring(1,3),16)/255:1;if("none"===n)return 0}var s=n.indexOf("(");if(s<0)a=[],n.length>7?(a[0]=parseInt(n.substr(3,2),16),a[1]=parseInt(n.substr(5,2),16),a[2]=parseInt(n.substr(7,2),16),a[3]=parseInt(n.substr(1,2),16)/255):(a[0]=parseInt(n.substr(1,2),16),a[1]=parseInt(n.substr(3,2),16),a[2]=parseInt(n.substr(5,2),16),a[3]=1),o=a[e];else{var a=n.substring(s+1).match(/[^,|)]+/gm);o=3===a.length&&e===t.ColorUtils._ALPHA?1:parseFloat(a[e])}return o},t.ColorUtils.getDarker=function(e,i){var n=t.ColorUtils.getRed(e),o=t.ColorUtils.getGreen(e),r=t.ColorUtils.getBlue(e),s=t.ColorUtils.getAlpha(e);return i||(i=t.ColorUtils._FACTOR),n=Math.max(parseInt(n*(1-i)),0),o=Math.max(parseInt(o*(1-i)),0),r=Math.max(parseInt(r*(1-i)),0),t.ColorUtils.makeRGBA(n,o,r,s)},t.ColorUtils.getBrighter=function(e,i){var n=t.ColorUtils.getAlpha(e),o=t.ColorUtils.getRed(e),r=t.ColorUtils.getGreen(e),s=t.ColorUtils.getBlue(e);i||(i=t.ColorUtils._FACTOR);var a=Math.min(o+parseInt((255-o)*i),255),l=Math.min(r+parseInt((255-r)*i),255),h=Math.min(s+parseInt((255-s)*i),255);return t.ColorUtils.makeRGBA(a,l,h,n)},t.ColorUtils.makeRGB=function(e,i,n){return n=null===n||isNaN(n)?0:n,i=null===i||isNaN(i)?0:i,e=null===e||isNaN(e)?0:e,t.ColorUtils._RGB+e+","+i+","+n+")"},t.ColorUtils.makeRGBA=function(e,i,n,o){return n=null===n||isNaN(n)?0:Math.round(n),i=null===i||isNaN(i)?0:Math.round(i),e=null===e||isNaN(e)?0:Math.round(e),o=null===o||isNaN(o)?1:o,t.ColorUtils._RGBA+e+","+i+","+n+","+o+")"},t.ColorUtils.makePound=function(t,e,i){var n=Math.round(t),o=Math.round(e),r=Math.round(i),s=n.toString(16),a=o.toString(16),l=r.toString(16);return"#"+(1===s.length?"0":"")+s+(1===a.length?"0":"")+a+(1===l.length?"0":"")+l},t.ColorUtils.getPound=function(e){var i;if("#"===e.charAt(0)){if(e.length<=7)return e;i=t.ColorUtils._POUND,i+=e.substring(3,5)+e.substring(5,7)+e.substring(7,9)}else{var n=t.ColorUtils.getRed(e),o=t.ColorUtils.getGreen(e),r=t.ColorUtils.getBlue(e);i=t.ColorUtils.makePound(n,o,r)}return i},t.ColorUtils.getRGB=function(e){var i,n=t.ColorUtils.getColorFromName(e);if(n&&(e=n),"#"===e.charAt(0)){i=t.ColorUtils._RGB;var o=e.length;if(o>7)i+=parseInt(e.substring(3,5),16)+","+parseInt(e.substring(5,7),16)+","+parseInt(e.substring(7,9),16);else if(7===o)i+=parseInt(e.substring(1,3),16)+","+parseInt(e.substring(3,5),16)+","+parseInt(e.substr(5),16);else if(4===o){var r=e.substring(1,2);r+=r;var s=e.substring(2,3);s+=s;var a=e.substring(3);a+=a,i+=parseInt(r,16)+","+parseInt(s,16)+","+parseInt(a,16)}else 5===o?i+=parseInt(e.substring(1,3),16)+","+parseInt(e.substring(3,5),16)+",0,1":3===o&&(i+=parseInt(e.substring(1,3),16)+",0,0,1");i+=")"}else if(e.substr(0,5)===t.ColorUtils._RGBA){var l=e.lastIndexOf(",");i=t.ColorUtils._RGB,i+=e.substring(5,l),i+=")"}else i=e;return i},t.ColorUtils.getRGBA=function(e){var i,n=t.ColorUtils.getColorFromName(e);if(n&&(e=n),"#"===e.charAt(0)){i=t.ColorUtils._RGBA;var o=e.length;if(o>7)i+=parseInt(e.substring(3,5),16)+","+parseInt(e.substring(5,7),16)+","+parseInt(e.substring(7,9),16)+","+parseInt(e.substring(1,3),16)/255;else if(7===o)i+=parseInt(e.substring(1,3),16)+","+parseInt(e.substring(3,5),16)+","+parseInt(e.substr(5),16)+",1";else if(5===o)i+=parseInt(e.substring(1,3),16)+","+parseInt(e.substring(3,5),16)+",0,1";else if(4===o){var r=e.substring(1,2);r+=r;var s=e.substring(2,3);s+=s;var a=e.substring(3);a+=a,i+=parseInt(r,16)+","+parseInt(s,16)+","+parseInt(a,16)+",1"}else 3===o&&(i+=parseInt(e.substring(1,3),16)+",0,0,1");i+=")"}else e.substr(0,4)===t.ColorUtils._RGB?(i=t.ColorUtils._RGBA,i+=e.substring(4,e.length-1)+",1)"):i=e;return i},t.ColorUtils._setChannel=function(e,i,n){if(void 0===e||void 0===n||e<t.ColorUtils._RED||e>t.ColorUtils._ALPHA)return i;var o=t.ColorUtils.getColorFromName(i);o&&(i=o);var r="#"===i.charAt(0);if(r)(h=[]).push(parseInt(i.substr(1,2),16)),h.push(parseInt(i.substr(3,2),16)),h.push(parseInt(i.substr(5,2),16)),e===t.ColorUtils._ALPHA&&(h.push(n),r=!1,s=!0);else{var s=i.substr(0,5)===t.ColorUtils._RGBA,a=i.indexOf("("),l=i.indexOf(")"),h=i.substring(a+1,l).split(",");s||e!==t.ColorUtils._ALPHA||(h.push(n),s=!0)}return h[e]=n,r?t.ColorUtils.makePound(h[0],h[1],h[2]):s?t.ColorUtils.makeRGBA(h[0],h[1],h[2],h[3]):t.ColorUtils.makeRGB(h[0],h[1],h[2])};["Red","Green","Blue","Alpha"].forEach(function(e){t.ColorUtils["get"+e]=t.ColorUtils._getChannel.bind(null,t.ColorUtils["_"+e.toUpperCase()]),t.ColorUtils["set"+e]=t.ColorUtils._setChannel.bind(null,t.ColorUtils["_"+e.toUpperCase()])}),t.ColorUtils.rgb2hsl=function(t,e,i){t/=255,e/=255,i/=255;var n,o,r=Math.max(t,e,i),s=Math.min(t,e,i),a=r+s,l=a/2;if(r==s)n=0,o=0;else{var h=r-s;o=l>.5?h/(2-a):h/a,r==t?n=(e-i)/h+(e<i?6:0):r==e?n=(i-t)/h+2:r==i&&(n=(t-e)/h+4),n/=6}return{h:360*n,s:o,l:l}},t.ColorUtils.hsl2rgb=function(e,i,n){var o,r,s;if(e/=360,0==i)o=r=s=n;else{var a=n<.5?n*(1+i):n+i-n*i,l=2*n-a;o=t.ColorUtils._hue2rgb(l,a,e+1/3),r=t.ColorUtils._hue2rgb(l,a,e),s=t.ColorUtils._hue2rgb(l,a,e-1/3)}return{r:255*o,g:255*r,b:255*s}},t.ColorUtils._hue2rgb=function(t,e,i){return i<0?i+=1:i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},t.ColorUtils.adjustHSL=function(e,i,n,o){t.ColorUtils._hslCache||(t.ColorUtils._hslCache=new t.Cache(100));var r=e+":"+i+":"+n+":"+o,s=t.ColorUtils._hslCache.get(r);if(null!=s)return s;var a=t.ColorUtils.getRed(e),l=t.ColorUtils.getGreen(e),h=t.ColorUtils.getBlue(e),u=t.ColorUtils.getAlpha(e),c=t.ColorUtils.rgb2hsl(a,l,h),p=Math.min(Math.max(0,c.h+i),360),_=Math.min(Math.max(0,c.s+n),1),g=Math.min(Math.max(0,c.l+o),1),d=t.ColorUtils.hsl2rgb(p,_,g);return s=1==u?t.ColorUtils.makePound(d.r,d.g,d.b):t.ColorUtils.makeRGBA(d.r,d.g,d.b,u),t.ColorUtils._hslCache.put(r,s),s},t.ColorUtils.interpolateColor=function(e,i,n){var o=t.ColorUtils.getRed(e),r=t.ColorUtils.getGreen(e),s=t.ColorUtils.getBlue(e),a=t.ColorUtils.getAlpha(e),l=t.ColorUtils.getRed(i),h=t.ColorUtils.getGreen(i),u=t.ColorUtils.getBlue(i),c=t.ColorUtils.getAlpha(i),p=Math.round(t.Math.interpolateNumber(o,l,n)),_=Math.round(t.Math.interpolateNumber(r,h,n)),g=Math.round(t.Math.interpolateNumber(s,u,n)),d=t.Math.interpolateNumber(a,c,n);return t.ColorUtils.makeRGBA(p,_,g,d)},t.ColorUtils.getLuminance=function(e){var i=function(t){var e=t/255;return e<.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)},n=t.ColorUtils.getRed(e),o=t.ColorUtils.getGreen(e),r=t.ColorUtils.getBlue(e);return.2126*i(n)+.7152*i(o)+.0722*i(r)},t.ColorUtils.getContrastRatio=function(e,i){return t.ColorUtils.getContrastRatioByLuminance(t.ColorUtils.getLuminance(e),t.ColorUtils.getLuminance(i))},t.ColorUtils.getContrastRatioByLuminance=function(t,e){var i=t+.05,n=e+.05;return i>n?i/n:n/i},t.ColorUtils.getContrastingTextColor=function(e){if(!t.ColorUtils._CONTRASTING_TEXT_COLOR_CACHE[e]){var i=t.ColorUtils.getLuminance(e),n=t.ColorUtils.getContrastRatioByLuminance(i,1)>t.ColorUtils.getContrastRatioByLuminance(i,0)?"#FFFFFF":"#000000";t.ColorUtils._CONTRASTING_TEXT_COLOR_CACHE[e]=n}return t.ColorUtils._CONTRASTING_TEXT_COLOR_CACHE[e]},t.ColorUtils.fixColorForPlatform=function(e,i){if(!e)return null;"#"==e.charAt(0)&&e.length>8&&(e=t.ColorUtils.getRGBA(e));var n={};return n.color=e,null!=i&&(n.alpha=i),n},t.ClipPath=function(e){this._id=(e?e+"$":"")+"cp"+t.ClipPath._uniqueSeed++,this._regions=[]},t.Obj.createSubclass(t.ClipPath,t.Obj),t.ClipPath._uniqueSeed=0,t.ClipPath.NONE=0,t.ClipPath.RECT=1,t.ClipPath.PATH=2,t.ClipPath.POLYGON=3,t.ClipPath.CIRCLE=5,t.ClipPath.prototype.getId=function(){return this._id},t.ClipPath.prototype.getRegions=function(t){return this._regions},t.ClipPath.prototype.addRect=function(e,i,n,o,r,s){var a={};a.type=t.ClipPath.RECT,a.x=e,a.y=i,a.w=n,a.h=o,a.rx=r,a.ry=s,this._regions.push(a)},t.ClipPath.prototype.addCircle=function(e,i,n){var o={};o.type=t.ClipPath.CIRCLE,o.cx=e,o.cy=i,o.r=n,this._regions.push(o)},t.ClipPath.prototype.addPolygon=function(e){var i={};i.type=t.ClipPath.POLYGON,i.points=e,this._regions.push(i)},t.ClipPath.prototype.addPath=function(e){var i={};i.type=t.ClipPath.PATH,i.d=e,this._regions.push(i)},t.Mask=function(e,i){this._id="mask"+t.Mask._uniqueSeed++,this._gradient=e,this._bounds=i},t.Obj.createSubclass(t.Mask,t.Obj),t.Mask._uniqueSeed=0,t.Mask.prototype.getId=function(){return this._id},t.Mask.prototype.getGradient=function(){return this._gradient},t.Mask.prototype.getBounds=function(){return this._bounds},t.SolidFill=function(t,e){this._fc=t,this._fa=null!=e?e:1},t.Obj.createSubclass(t.SolidFill,t.Obj),t.SolidFill.prototype.getColor=function(){return this._fc},t.SolidFill.prototype.getAlpha=function(){return this._fa},t.SolidFill.invisibleFill=function(){return t.SolidFill._INVISIBLE_FILL||(t.SolidFill._INVISIBLE_FILL=new t.SolidFill("rgba(0,0,0,0)")),t.SolidFill._INVISIBLE_FILL},t.SolidFill.prototype.equals=function(e){return e instanceof t.SolidFill&&e.getColor()==this.getColor()&&e.getAlpha()==this.getAlpha()},t.Stroke=function(t,e,i,n,o,r){this._color=t,this._alpha=null!=e?e:1,this._width=null===i||isNaN(i)?1:i,this._fixedWidth=n||!1,this._dashProps=o,this._lineProps=r},t.Obj.createSubclass(t.Stroke,t.Obj),t.Stroke.prototype.getLineProps=function(){return this._lineProps},t.Stroke.prototype.getDashProps=function(){return this._dashProps},t.Stroke.prototype.getAlpha=function(){return this._alpha},t.Stroke.prototype.getColor=function(){return this._color},t.Stroke.prototype.getWidth=function(){return this._width},t.Stroke.prototype.isFixedWidth=function(){return this._fixedWidth},t.Stroke.getDefaultDashProps=function(t,e){return"solid"===t?null:(e=Math.ceil(e),"dashed"==t?{dashArray:""+Math.max(6,2*e)}:"dotted"==t?{dashArray:""+Math.max(2,e)}:null)},t.Shadow=function(e,i,n,o){this.__type="shadow",this._dx=e,this._dy=i,this._stdDeviation=n,this._floodColor=o,this._Id="ds"+t.Shadow._uniqueId++},t.Obj.createSubclass(t.Shadow,t.Obj),t.Shadow._uniqueId=1,t.GradientFill=function(t,e,i,n){this.Init(t,e,i,n)},t.Obj.createSubclass(t.GradientFill,t.Obj),t.GradientFill.prototype.getAlphas=function(){return this._arAlphas},t.GradientFill.prototype.getBounds=function(){return this._arBounds},t.GradientFill.prototype.getColors=function(){return this._arColors},t.GradientFill.prototype.getStops=function(){return this._arStops},t.GradientFill.prototype.Init=function(t,e,i,n){if(!e&&(e=[],t))for(var o=0;o<t.length;o++)e.push(1);var r=t?t.length-1:0;if(!i){i=[];var s=r>0?1/r:0,a=0;do{i.push(a),a+=s}while(--r>0);i.push(1)}this._arColors=t,this._arAlphas=e,this._arStops=i,this._arBounds=n},t.GradientFill.prototype.equals=function(e){return e instanceof t.GradientFill&&t.ArrayUtils.equals(this.getColors(),e.getColors())&&t.ArrayUtils.equals(this.getStops(),e.getStops())&&t.ArrayUtils.equals(this.getAlphas(),e.getAlphas())&&t.ArrayUtils.equals(this.getBounds(),e.getBounds())},t.LinearGradientFill=function(t,e,i,n,o){this.Init(t,e,i,n,o)},t.Obj.createSubclass(t.LinearGradientFill,t.GradientFill),t.LinearGradientFill.prototype.Init=function(e,i,n,o,r){t.LinearGradientFill.superclass.Init.call(this,i,n,o,r),null===e||isNaN(e)?e=0:Math.abs(e)>360&&(e%=360),this._angle=e},t.LinearGradientFill.prototype.getAngle=function(){return this._angle},t.LinearGradientFill.prototype.equals=function(e){return e instanceof t.LinearGradientFill&&e.getAngle()==this.getAngle()&&t.LinearGradientFill.superclass.equals.call(this,e)},t.PatternFill=function(e,i,n,o){this._pattern=e?t.PatternFill._convertPatternValue(e):t.PatternFill.SM_DIAG_UP_LT,this._fillColor=i||"#000000",this._backgroundColor=n||"#ffffff",this._matrix=o},t.Obj.createSubclass(t.PatternFill,t.Obj),t.PatternFill.SM_DIAG_UP_LT="sDUL",t.PatternFill.LG_DIAG_UP_LT="lDUL",t.PatternFill.SM_DIAG_UP_RT="sDUR",t.PatternFill.LG_DIAG_UP_RT="lDUR",t.PatternFill.SM_CROSSHATCH="sC",t.PatternFill.LG_CROSSHATCH="lC",t.PatternFill.SM_CHECK="sCh",t.PatternFill.LG_CHECK="lCh",t.PatternFill.SM_TRIANGLE_CHECK="sTCh",t.PatternFill.LG_TRIANGLE_CHECK="lTCh",t.PatternFill.SM_DIAMOND_CHECK="sDCh",t.PatternFill.LG_DIAMOND_CHECK="lDCh",t.PatternFill.prototype.getPattern=function(){return this._pattern},t.PatternFill.prototype.getColor=function(){return this._fillColor},t.PatternFill.prototype.getBackgroundColor=function(){return this._backgroundColor},t.PatternFill.prototype.equals=function(e){return e instanceof t.PatternFill&&e.getPattern()==this.getPattern()&&e.getColor()==this.getColor()&&e.getBackgroundColor()==this.getBackgroundColor()},t.PatternFill.prototype.getMatrix=function(){return this._matrix||new t.Matrix},t.PatternFill._convertPatternValue=function(e){return"smallDiagonalLeft"==e?t.PatternFill.SM_DIAG_UP_LT:"largeDiagonalLeft"==e?t.PatternFill.LG_DIAG_UP_LT:"smallDiagonalRight"==e?t.PatternFill.SM_DIAG_UP_RT:"largeDiagonalRight"==e?t.PatternFill.LG_DIAG_UP_RT:"smallCrosshatch"==e?t.PatternFill.SM_CROSSHATCH:"largeCrosshatch"==e?t.PatternFill.LG_CROSSHATCH:"smallChecker"==e?t.PatternFill.SM_CHECK:"largeChecker"==e?t.PatternFill.LG_CHECK:"smallTriangle"==e?t.PatternFill.SM_TRIANGLE_CHECK:"largeTriangle"==e?t.PatternFill.LG_TRIANGLE_CHECK:"smallDiamond"==e?t.PatternFill.SM_DIAMOND_CHECK:"largeDiamond"==e?t.PatternFill.LG_DIAMOND_CHECK:e},t.SelectionEffectUtils={},t.Obj.createSubclass(t.SelectionEffectUtils,t.Obj),t.SelectionEffectUtils.getHoverBorderColor=function(e){return t.ColorUtils.adjustHSL(e,0,0,.15)},t.SelectionEffectUtils.createSelectingStroke=function(e){return new t.Stroke(t.SelectionEffectUtils.getHoverBorderColor(e),1,2,!1,null,{miterLimit:1})},t.SelectionEffectUtils.getSelectingCursor=function(){return"pointer"},t.KeyboardFocusEffect=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)},t.Obj.createSubclass(t.KeyboardFocusEffect,t.Obj),t.KeyboardFocusEffect.FOCUS_BORDER_RADIUS=1,t.KeyboardFocusEffect.FOCUS_STROKE_WIDTH=1,t.KeyboardFocusEffect.FOCUS_STROKE_ALPHA=1,t.KeyboardFocusEffect.prototype.Init=function(e,i,n,o,r,s){this._container=i,this._focusEffect=new t.Rect(e,n.x,n.y,n.w,n.h,r);var a=this.CreateStroke();this._focusEffect.setStroke(a),this._focusEffect.setRx(t.KeyboardFocusEffect.FOCUS_BORDER_RADIUS),this._focusEffect.setRy(t.KeyboardFocusEffect.FOCUS_BORDER_RADIUS),o&&this._focusEffect.setMatrix(o),this._focusEffect.setFill(null),this._appendLast=s},t.KeyboardFocusEffect.prototype.CreateStroke=function(){var e,i=t.Agent.getFocusColor(),n=t.KeyboardFocusEffect.FOCUS_STROKE_WIDTH,o=t.KeyboardFocusEffect.FOCUS_STROKE_ALPHA;return"safari"===t.Agent.browser||"blink"===t.Agent.engine?n=2:e={dashArray:n,dashOffset:n},new t.Stroke(i,o,n,!1,e)},t.KeyboardFocusEffect.prototype.getEffect=function(){return this._focusEffect},t.KeyboardFocusEffect.prototype.setEffect=function(t){this._focusEffect=t},t.KeyboardFocusEffect.prototype.show=function(){this._focusEffect instanceof t.Shape&&(this._appendLast?this._container.addChild(this._focusEffect):this._container.addChildAt(this._focusEffect,0))},t.KeyboardFocusEffect.prototype.hide=function(){this._focusEffect instanceof t.Shape&&this._container.removeChild(this._focusEffect)};var a=function(){this.Init()};t.Obj.createSubclass(a,t.Obj),a.prototype.Init=function(){this._regionPctRect=new t.Rectangle(-10,-10,120,120),this._counter=0},a.prototype.getRegionPctRect=function(){return this._regionPctRect},a.prototype.createResultId=function(t){return t||(t="filtRes"),t+this._counter++};var l=function(){};t.Obj.createSubclass(l,t.Obj),l._counter=0,l.createFilter=function(e,i){for(var n=t.SvgShapeUtils.createElement("filter",l.CreateFilterId()),o=new a,r=0;r<e.length;r++){var s=e[r];s&&l.CreateFilterPrimitives(n,s,i,o)}var h=!1;if(i){var u=i.getElem().getBBox();if(u){var c=u.width,p=u.height;if(0==p||0==c){var _;i.getStroke&&(_=i.getStroke());var g=10;_&&(g=_.getWidth());var d=u.x,S=u.y;0==p&&(p=2*g,S-=g),0==c&&(c=2*g,d-=g),t.ToolkitUtils.setAttrNullNS(n,"x",d),t.ToolkitUtils.setAttrNullNS(n,"y",S),t.ToolkitUtils.setAttrNullNS(n,"width",c),t.ToolkitUtils.setAttrNullNS(n,"height",p),t.ToolkitUtils.setAttrNullNS(n,"filterUnits","userSpaceOnUse"),h=!0}}}return h||(-10!=o.getRegionPctRect().x&&"Infinity"!=o.getRegionPctRect().x&&"-Infinity"!=o.getRegionPctRect().x&&t.ToolkitUtils.setAttrNullNS(n,"x",o.getRegionPctRect().x+"%"),-10!=o.getRegionPctRect().y&&"Infinity"!=o.getRegionPctRect().y&&"-Infinity"!=o.getRegionPctRect().y&&t.ToolkitUtils.setAttrNullNS(n,"y",o.getRegionPctRect().y+"%"),120!=o.getRegionPctRect().w&&"Infinity"!=o.getRegionPctRect().w&&"-Infinity"!=o.getRegionPctRect().w&&t.ToolkitUtils.setAttrNullNS(n,"width",o.getRegionPctRect().w+"%"),120!=o.getRegionPctRect().h&&"Infinity"!=o.getRegionPctRect().h&&"-Infinity"!=o.getRegionPctRect().h&&t.ToolkitUtils.setAttrNullNS(n,"height",o.getRegionPctRect().h+"%")),n},l.CreateFilterPrimitives=function(e,i,n,o){return i instanceof t.Shadow&&c.createFilterPrimitives(e,i,n,o),null},l.CreateFilterId=function(){return"filt"+l._counter++};var h=function(){};t.Obj.createSubclass(h,t.Obj),h.createElem=function(e,i){var n,o=t.SvgShapeUtils.createElement("linearGradient",i),r=e.getColors(),s=e.getAlphas(),a=e.getStops(),l=e.getBounds(),h=r.length;for(n=0;n<h;n++){var u=t.SvgShapeUtils.createElement("stop");t.ToolkitUtils.setAttrNullNS(u,"offset",100*a[n]+"%");var c=r[n];if(c){var p=s[n];t.ToolkitUtils.setAttrNullNS(u,"stop-color",c),null!=p&&t.ToolkitUtils.setAttrNullNS(u,"stop-opacity",p,1)}t.ToolkitUtils.appendChildElem(o,u)}var _=!l||0==l[0]&&0==l[1]&&0==l[2]&&0==l[3],g=e.getAngle(),d="0%",S="0%",f="100%",y="0%",T=!0;if(_)45===g?(S="100%",f="100%"):90===g?(S="100%",f="0%"):135===g?(d="100%",f="0%",y="100%"):270===g?(f="0%",y="100%"):0!==g&&(g=-g,t.ToolkitUtils.setAttrNullNS(o,"gradientTransform","rotate("+g+" .5 .5)"),T=!1);else{t.ToolkitUtils.setAttrNullNS(o,"gradientUnits","userSpaceOnUse"),d="0",S="0.5",f="1",y="0.5";var v=l[2],m=l[3],E=l[0],C=l[1],b="scale("+v+" "+m+")"+" "+("rotate("+(g=-g)+" .5 .5)");0==E&&0==C||(b="translate("+E+" "+C+")"+" "+b),t.ToolkitUtils.setAttrNullNS(o,"gradientTransform",b)}return T&&(t.ToolkitUtils.setAttrNullNS(o,"x1",d),t.ToolkitUtils.setAttrNullNS(o,"y1",S),t.ToolkitUtils.setAttrNullNS(o,"x2",f),t.ToolkitUtils.setAttrNullNS(o,"y2",y)),o};var u=function(){};t.Obj.createSubclass(u,t.Obj),u._SM_WIDTH=8,u._SM_HEIGHT=8,u._LG_WIDTH=16,u._LG_HEIGHT=16,u.createElem=function(e,i){var n,o,r=t.SvgShapeUtils.createElement("pattern",i),s=e.getPattern();u.IsSmallPattern(s)?(n=u._SM_WIDTH,o=u._SM_HEIGHT):(n=u._LG_WIDTH,o=u._LG_HEIGHT),t.ToolkitUtils.setAttrNullNS(r,"x",0),t.ToolkitUtils.setAttrNullNS(r,"y",0),t.ToolkitUtils.setAttrNullNS(r,"width",n),t.ToolkitUtils.setAttrNullNS(r,"height",o),t.ToolkitUtils.setAttrNullNS(r,"patternUnits","userSpaceOnUse");var a=e.getMatrix();if(a){var l="matrix("+a.getA()+","+a.getC()+","+a.getB()+","+a.getD()+","+a.getTx()+","+a.getTy()+")";t.ToolkitUtils.setAttrNullNS(r,"patternTransform",l)}return u.CreatePatternElems(e,r),r},u.IsSmallPattern=function(t){return"s"===t.charAt(0)},u.CreatePatternElems=function(e,i){var n,o,r,s,a,l,h,c=e.getPattern(),p=e.getColor(),_=t.ColorUtils.getRGB(p),g=t.ColorUtils.getAlpha(p),d=e.getBackgroundColor(),S=t.ColorUtils.getRGB(d),f=t.ColorUtils.getAlpha(d);u.IsSmallPattern(c)?(n=u._SM_WIDTH,o=u._SM_HEIGHT,r=u._SM_WIDTH,s=u._SM_HEIGHT):(n=u._LG_WIDTH,o=u._LG_HEIGHT,r=u._LG_WIDTH,s=u._LG_HEIGHT),S&&f>0&&(h=t.SvgShapeUtils.createElement("rect"),t.ToolkitUtils.setAttrNullNS(h,"stroke",S),t.ToolkitUtils.setAttrNullNS(h,"stroke-opacity",f),t.ToolkitUtils.setAttrNullNS(h,"stroke-width",1),t.ToolkitUtils.setAttrNullNS(h,"fill",S),t.ToolkitUtils.setAttrNullNS(h,"fill-opacity",f),t.ToolkitUtils.setAttrNullNS(h,"x",0),t.ToolkitUtils.setAttrNullNS(h,"y",0),t.ToolkitUtils.setAttrNullNS(h,"width",n),t.ToolkitUtils.setAttrNullNS(h,"height",o),t.ToolkitUtils.appendChildElem(i,h)),c===t.PatternFill.SM_DIAG_UP_LT||c===t.PatternFill.LG_DIAG_UP_LT?(h=t.SvgShapeUtils.createElement("path"),t.ToolkitUtils.setAttrNullNS(h,"stroke",_),t.ToolkitUtils.setAttrNullNS(h,"stroke-opacity",g),t.ToolkitUtils.setAttrNullNS(h,"stroke-width",1),t.ToolkitUtils.setAttrNullNS(h,"stroke-linecap","square"),t.ToolkitUtils.setAttrNullNS(h,"d",t.PathUtils.moveTo(0,-s/2)+t.PathUtils.lineTo(3*r/2,s)+t.PathUtils.moveTo(-r/2,0)+t.PathUtils.lineTo(r/2,s)),t.ToolkitUtils.appendChildElem(i,h)):c===t.PatternFill.SM_DIAG_UP_RT||c===t.PatternFill.LG_DIAG_UP_RT?(h=t.SvgShapeUtils.createElement("path"),t.ToolkitUtils.setAttrNullNS(h,"stroke",_),t.ToolkitUtils.setAttrNullNS(h,"stroke-opacity",g),t.ToolkitUtils.setAttrNullNS(h,"stroke-width",1),t.ToolkitUtils.setAttrNullNS(h,"stroke-linecap","square"),t.ToolkitUtils.setAttrNullNS(h,"d",t.PathUtils.moveTo(-r/2,s)+t.PathUtils.lineTo(r,-s/2)+t.PathUtils.moveTo(0,3*s/2)+t.PathUtils.lineTo(3*r/2,0)),t.ToolkitUtils.appendChildElem(i,h)):c===t.PatternFill.SM_CROSSHATCH||c===t.PatternFill.LG_CROSSHATCH?(h=t.SvgShapeUtils.createElement("path"),t.ToolkitUtils.setAttrNullNS(h,"stroke",_),t.ToolkitUtils.setAttrNullNS(h,"stroke-opacity",g),t.ToolkitUtils.setAttrNullNS(h,"stroke-width",1),t.ToolkitUtils.setAttrNullNS(h,"d","M0,0L"+n+","+o+"M"+n+",0L0,"+o),t.ToolkitUtils.appendChildElem(i,h)):c===t.PatternFill.SM_CHECK||c===t.PatternFill.LG_CHECK?(a=r/2,l=s/2,h=t.SvgShapeUtils.createElement("path"),t.ToolkitUtils.setAttrNullNS(h,"stroke",_),t.ToolkitUtils.setAttrNullNS(h,"stroke-opacity",g),t.ToolkitUtils.setAttrNullNS(h,"stroke-width",1),t.ToolkitUtils.setAttrNullNS(h,"fill",_),t.ToolkitUtils.setAttrNullNS(h,"fill-opacity",g),t.ToolkitUtils.setAttrNullNS(h,"d","M"+a+",0L"+r+",0L"+r+","+l+"L"+a+","+l+"ZM0,"+l+"L"+a+","+l+"L"+a+","+s+"L0,"+s+"Z"),t.ToolkitUtils.appendChildElem(i,h)):c===t.PatternFill.SM_TRIANGLE_CHECK||c===t.PatternFill.LG_TRIANGLE_CHECK?(h=t.SvgShapeUtils.createElement("polygon"),t.ToolkitUtils.setAttrNullNS(h,"stroke",_),t.ToolkitUtils.setAttrNullNS(h,"stroke-opacity",g),t.ToolkitUtils.setAttrNullNS(h,"stroke-width",1),t.ToolkitUtils.setAttrNullNS(h,"fill",_),t.ToolkitUtils.setAttrNullNS(h,"fill-opacity",g),t.ToolkitUtils.setAttrNullNS(h,"points","0,"+o+" "+n+",0 "+n+","+o),t.ToolkitUtils.appendChildElem(i,h)):c!==t.PatternFill.SM_DIAMOND_CHECK&&c!==t.PatternFill.LG_DIAMOND_CHECK||(a=r/2,l=s/2,h=t.SvgShapeUtils.createElement("polygon"),t.ToolkitUtils.setAttrNullNS(h,"stroke",_),t.ToolkitUtils.setAttrNullNS(h,"stroke-opacity",g),t.ToolkitUtils.setAttrNullNS(h,"stroke-width",1),t.ToolkitUtils.setAttrNullNS(h,"fill",_),t.ToolkitUtils.setAttrNullNS(h,"fill-opacity",g),t.ToolkitUtils.setAttrNullNS(h,"points","0,"+l+" "+a+",0 "+n+","+a+" "+a+","+o),t.ToolkitUtils.appendChildElem(i,h))};var c=function(){};t.Obj.createSubclass(c,t.Obj),c.RADS_PER_DEGREE=Math.PI/180,c.createFilterPrimitives=function(e,i,n,o){var r=i._dx,s=i._dy,a=i._stdDeviation,l=i._floodColor,h=n.getDimensions(n.getParent());if(h){var u=2*a,c=u,p=u,_=u,g=u;(c-=r)<0&&(c=0),(_-=s)<0&&(_=0),(p+=r)<0&&(p=0),(g+=s)<0&&(g=0);var d=c/h.w*100,S=p/h.w*100,f=_/h.h*100,y=g/h.h*100;o.getRegionPctRect().x>-d&&(o.getRegionPctRect().x=-d),o.getRegionPctRect().y>-f&&(o.getRegionPctRect().y=-f),o.getRegionPctRect().w<100+d+S&&(o.getRegionPctRect().w=100+d+S),o.getRegionPctRect().h<100+f+y&&(o.getRegionPctRect().h=100+f+y)}if(n instanceof t.Polyline){var T=n.getStroke().getWidth();T>1&&(o.getRegionPctRect().h=o.getRegionPctRect().h+T,o.getRegionPctRect().y=o.getRegionPctRect().y-T)}if("ie"!==t.Agent.browser&&"edge"!==t.Agent.browser){var v=t.SvgShapeUtils.createElement("feDropShadow");t.ToolkitUtils.setAttrNullNS(v,"dx",r),t.ToolkitUtils.setAttrNullNS(v,"dy",s),t.ToolkitUtils.setAttrNullNS(v,"stdDeviation",a),t.ToolkitUtils.setAttrNullNS(v,"flood-color",l),t.ToolkitUtils.appendChildElem(e,v)}else{var m=t.SvgShapeUtils.createElement("feGaussianBlur");t.ToolkitUtils.setAttrNullNS(m,"stdDeviation",a);var E=t.SvgShapeUtils.createElement("feOffset"),C=o.createResultId("offset");t.ToolkitUtils.setAttrNullNS(E,"dx",r),t.ToolkitUtils.setAttrNullNS(E,"dy",s),t.ToolkitUtils.setAttrNullNS(E,"result",C);var b=t.SvgShapeUtils.createElement("feFlood"),A=l.split(/[\(,\)]/);6===A.length?(t.ToolkitUtils.setAttrNullNS(b,"flood-color",`${A[0].substr(0,3)}(${A[1]},${A[2]},${A[3]})`),t.ToolkitUtils.setAttrNullNS(b,"flood-opacity",A[4])):t.ToolkitUtils.setAttrNullNS(b,"flood-color",l);var O=t.SvgShapeUtils.createElement("feComposite");t.ToolkitUtils.setAttrNullNS(O,"in2",C),t.ToolkitUtils.setAttrNullNS(O,"operator","in");var M=t.SvgShapeUtils.createElement("feMerge"),I=t.SvgShapeUtils.createElement("feMergeNode"),x=t.SvgShapeUtils.createElement("feMergeNode");t.ToolkitUtils.setAttrNullNS(x,"in","SourceGraphic"),t.ToolkitUtils.appendChildElem(M,I),t.ToolkitUtils.appendChildElem(M,x),t.ToolkitUtils.appendChildElem(e,m),t.ToolkitUtils.appendChildElem(e,E),t.ToolkitUtils.appendChildElem(e,b),t.ToolkitUtils.appendChildElem(e,O),t.ToolkitUtils.appendChildElem(e,M)}},t.Dimension=function(t,e){this.w=null===t||isNaN(t)?0:t,this.h=null===e||isNaN(e)?0:e},t.Matrix=function(t,e,i,n,o,r){this._a=null==t?1:t,this._b=null==e?0:e,this._c=null==i?0:i,this._d=null==n?1:n,this._tx=null==o?0:o,this._ty=null==r?0:r,this._u=0,this._v=0,this._w=1},t.Obj.createSubclass(t.Matrix,t.Obj),t.Matrix._DECOMP_TX=0,t.Matrix._DECOMP_TY=1,t.Matrix._DECOMP_R=2,t.Matrix._DECOMP_SKEWX=3,t.Matrix._DECOMP_SX=4,t.Matrix._DECOMP_SY=5,t.Matrix.prototype.getA=function(){return this._a},t.Matrix.prototype.getB=function(){return this._b},t.Matrix.prototype.getC=function(){return this._c},t.Matrix.prototype.getD=function(){return this._d},t.Matrix.prototype.getTx=function(){return this._tx},t.Matrix.prototype.getTy=function(){return this._ty},t.Matrix.prototype.concat=function(e){var i=this._a*e.getA()+this._c*e.getB()+this._u*e.getTx(),n=this._b*e.getA()+this._d*e.getB()+this._v*e.getTx(),o=this._tx*e.getA()+this._ty*e.getB()+this._w*e.getTx(),r=this._a*e.getC()+this._c*e.getD()+this._u*e.getTy(),s=this._b*e.getC()+this._d*e.getD()+this._v*e.getTy(),a=this._tx*e.getC()+this._ty*e.getD()+this._w*e.getTy();return new t.Matrix(i,n,r,s,o,a)},t.Matrix.prototype.translate=function(e,i){return this.concat(new t.Matrix(1,0,0,1,e,i))},t.Matrix.prototype.scale=function(e,i,n,o){var r=this;(n||o)&&(r=this.translate(-n,-o));var s=new t.Matrix(e,0,0,i);return r=r.concat(s),(n||o)&&(r=r.translate(n,o)),r},t.Matrix.prototype.rotate=function(e){var i=Math.cos(e),n=Math.sin(e),o=new t.Matrix(i,-n,n,i);return this.concat(o)},t.Matrix.prototype.skew=function(e,i){var n=new t.Matrix(1,Math.tan(e),Math.tan(i),1);return this.concat(n)},t.Matrix.prototype._determinant=function(){return this._a*(this._d*this._w-this._ty*this._v)-this._b*(this._c*this._w-this._ty*this._u)+this._tx*(this._c*this._v-this._d*this._u)},t.Matrix.prototype.invert=function(){var e=this._determinant(),i=this._d*this._w-this._ty*this._v,n=this._tx*this._v-this._b*this._w,o=this._b*this._ty-this._tx*this._d,r=this._ty*this._u-this._c*this._w,s=this._a*this._w-this._tx*this._u,a=this._tx*this._c-this._a*this._ty;return new t.Matrix(i/e,n/e,r/e,s/e,o/e,a/e)},t.Matrix.prototype._decompose=function(){var t=this._a,e=this._b,i=this._c,n=this._d,o=this._tx,r=this._ty;if(t*n-e*i==0)return null;var s=Math.sqrt(t*t+i*i),a=(t/=s)*e+(i/=s)*n;e-=t*a,n-=i*a;var l=Math.sqrt(e*e+n*n);return a/=l,-1===t*(n/=l)-(e/=l)*i&&(a=-a,l=-l),[o,r,Math.atan2(i,t),Math.atan(a),s,l]},t.Matrix.prototype._recompose=function(e){var i=new t.Matrix,n=e[0],o=e[1],r=e[2],s=e[3],a=e[4],l=e[5];return(i=(i=(i=i.scale(a,l)).skew(s,0)).rotate(r)).translate(n,o)},t.Matrix.prototype.equals=function(t){return!(!this&&t)&&(!(this&&!t)&&(!this&&!t||this._a===t.getA()&&this._b===t.getB()&&this._c===t.getC()&&this._d===t.getD()&&this._tx===t.getTx()&&this._ty===t.getTy()))},t.Matrix.prototype.transformPoint=function(e){var i=this._a*e.x+this._b*e.y+1*this._tx,n=this._c*e.x+this._d*e.y+1*this._ty;return new t.Point(i,n)},t.Matrix.prototype.isIdentity=function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},t.Point=function(t,e){this.x=null===t||isNaN(t)?0:t,this.y=null===e||isNaN(e)?0:e},t.Point.prototype.equals=function(e){return e instanceof t.Point&&this.x===e.x&&this.y===e.y},t.Rectangle=function(t,e,i,n){this.x=null===t||isNaN(t)?0:t,this.y=null===e||isNaN(e)?0:e,this.w=null===i||isNaN(i)?0:i,this.h=null===n||isNaN(n)?0:n},t.Obj.createSubclass(t.Rectangle,t.Obj),t.Rectangle.create=function(e){return new t.Rectangle(e[0],e[1],e[2],e[3])},t.Rectangle.prototype.containsPoint=function(t,e){return t>=this.x&&t<=this.x+this.w&&e>=this.y&&e<=this.y+this.h},t.Rectangle.prototype.getCenter=function(){return new t.Point(this.x+this.w/2,this.y+this.h/2)},t.Rectangle.prototype.getUnion=function(e){var i=new t.Rectangle;if(e&&0!==e.w&&0!==e.h)if(0!==this.w&&0!==this.h){var n=this.x+this.w,o=this.y+this.h,r=e.x+e.w,s=e.y+e.h,a=Math.min(this.x,e.x),l=Math.min(this.y,e.y);i.w=n<r?r-a:n-a,i.h=o>s?o-l:s-l,i.x=a,i.y=l}else i.x=e.x,i.y=e.y,i.w=e.w,i.h=e.h;else i.x=this.x,i.y=this.y,i.w=this.w,i.h=this.h;return i},t.Rectangle.prototype.getIntersection=function(e){var i=new t.Rectangle;if(!e||0===e.w||0===e.h)return null;if(0===this.w||0===this.h)return null;var n=this.x+this.w,o=this.y+this.h,r=e.x+e.w,s=e.y+e.h,a=Math.max(this.x,e.x),l=Math.max(this.y,e.y);return a>=n||a>=r||l>=o||l>=s?null:(i.w=n<r?n-a:r-a,i.h=o>s?s-l:o-l,i.x=a,i.y=l,i)},t.Rectangle.prototype.intersects=function(t){if(t&&0!==t.w&&0!==t.h&&0!==this.w&&0!==this.h){var e=this.x+this.w,i=this.y+this.h,n=t.x+t.w,o=t.y+t.h;return!(t.x>e||n<this.x||t.y>i||o<this.y)}return!1},t.Rectangle.prototype.clone=function(){return new t.Rectangle(this.x,this.y,this.w,this.h)},t.Rectangle.prototype.equals=function(e){return e instanceof t.Rectangle&&this.x==e.x&&this.y==e.y&&this.w==e.w&&this.h==e.h},t.Rectangle.prototype.toString=function(){return this.x+", "+this.y+", "+this.w+", "+this.h},t.Array2D=function(){this.Init()},t.Obj.createSubclass(t.Array2D,t.Obj),t.Array2D.prototype.Init=function(){this._data=[]},t.Array2D.prototype.get=function(t,e){return this._getInner(t)[e]},t.Array2D.prototype.put=function(t,e,i){var n=this._getInner(t),o=n[e];return n[e]=i,o},t.Array2D.prototype._getInner=function(t){var e=this._data[t];return e||(e=[],this._data[t]=e),e},t.Cache=function(t){this.Init(t)},t.Obj.createSubclass(t.Cache,t.Obj),t.Cache._TARGET_SIZE=1e3,t.Cache._BUFFER_SIZE=.5,t.Cache.prototype.Init=function(e){this._targetSize=null!=e?e:t.Cache._TARGET_SIZE,this._maxSize=Math.ceil(this._targetSize*(1+t.Cache._BUFFER_SIZE)),this._cache={},this._lruArray=[],this._hits=0,this._misses=0},t.Cache.prototype.get=function(t){var e=this._cache[t];return null!=e?(this._hits++,e):(this._misses++,null)},t.Cache.prototype.put=function(t,e){var i=null!=this._cache[t];if(this._cache[t]=e,i){var n=this._lruArray.indexOf(t);this._lruArray.splice(n,1),this._lruArray.push(t)}else if(this._lruArray.push(t),this._lruArray.length>this._maxSize)for(var o=this._lruArray.splice(0,this._maxSize-this._targetSize),r=0;r<o.length;r++)delete this._cache[o[r]]},t.Cache.prototype.toString=function(){var t="Cache Size: "+this._lruArray.length;return t+="\nHits: "+this._hits,t+="\nMisses: "+this._misses,t+="\nHit %: "+Math.round(1e4*this._hits/(this._hits+this._misses))/100},t.DragAndDropUtils={},t.Obj.createSubclass(t.DragAndDropUtils,t.Obj),t.DragAndDropUtils.getDragFeedbackBounds=function(t,e){if(!t)return null;var i=null;if(t instanceof Array){if(t.length>0){i=t[0].getDimensions(e||t[0].getParent());for(var n=1;n<t.length;n++){var o=t[n],r=o.getDimensions(e||o.getParent());r.x<i.x&&(i.w+=i.x-r.x,i.x=r.x),r.y<i.y&&(i.h+=i.y-r.y,i.y=r.y),r.x+r.w>i.x+i.w&&(i.w=r.x+r.w-i.x),r.y+r.h>i.y+i.h&&(i.h=r.y+r.h-i.y)}}}else i=t.getDimensions(e||t.getParent());return i},t.LayoutUtils={},t.Obj.createSubclass(t.LayoutUtils,t.Obj),t.LayoutUtils.position=function(e,i,n,o,r,s){n&&(s=o*r>0?s:0,"start"==i?i=t.Agent.isRightToLeft(n.getCtx())?"right":"left":"end"==i&&(i=t.Agent.isRightToLeft(n.getCtx())?"left":"right"),"top"==i?(n.setTranslate(e.x+e.w/2-o/2,e.y),e.y+=r+s,e.h-=r+s):"bottom"==i?(n.setTranslate(e.x+e.w/2-o/2,e.y+e.h-r),e.h-=r+s):"left"==i?(n.setTranslate(e.x,e.y+e.h/2-r/2),e.x+=o+s,e.w-=o+s):"right"==i&&(n.setTranslate(e.x+e.w-o,e.y+e.h/2-r/2),e.w-=o+s))},t.LayoutUtils.align=function(e,i,n,o){if(n){var r=i;"start"==r?r=t.Agent.isRightToLeft(n.getCtx())?"right":"left":"end"==r&&(r=t.Agent.isRightToLeft(n.getCtx())?"left":"right"),"left"==r?n.setX(e.x):"center"==r?n.setX(e.x+e.w/2-o/2):"right"==r&&n.setX(e.x+e.w-o)}},t.LayoutUtils.getBubbleSize=function(t,e,i,n,o){if(t<=0)return 0;var r=n*n,s=o*o;if(i/e<s/r){var a=Math.sqrt(r*s),l=Math.sqrt(e*i);if(t==l)return Math.sqrt(a);s=i/l*a,r=e/l*a}var h=r+(t-e)/(i-e)*(s-r);return Math.sqrt(h)},t.Math=new Object,t.Obj.createSubclass(t.Math,t.Obj),t.Math.RADS_PER_DEGREE=Math.PI/180,t.Math.DEGREES_PER_RAD=180/Math.PI,t.Math.TWO_PI=2*Math.PI,t.Math.HALF_PI=Math.PI/2,t.Math.QUARTER_PI=Math.PI/4,t.Math.TOLERANCE=.1,t.Math.degreesToRads=function(e){return e*t.Math.RADS_PER_DEGREE},t.Math.radsToDegrees=function(e){return e*t.Math.DEGREES_PER_RAD},t.Math.interpolateNumber=function(t,e,i){return t+i*(e-t)},t.Math.log10=function(t){return Math.log(t)/Math.LN10},t.Math.calculateAngleBetweenTwoVectors=function(e,i,n,o){var r=Math.atan2(o,n)-Math.atan2(i,e);return r<0?r+t.Math.TWO_PI:r},t.Map2D=function(){this.Init()},t.Obj.createSubclass(t.Map2D,t.Obj),t.Map2D.prototype.Init=function(){this._map={}},t.Map2D.prototype.get=function(t,e){return this._getInnerMap(t)[e]},t.Map2D.prototype.put=function(t,e,i){var n=this._getInnerMap(t),o=n[e];return n[e]=i,o},t.Map2D.prototype._getInnerMap=function(t){var e=this._map[t];return e||(e={},this._map[t]=e),e},t.PixelMap=function(t,e){this.Init(t,e)},t.Obj.createSubclass(t.PixelMap,t.Array2D),t.PixelMap._INITIAL_SIZE=1500,t.PixelMap.prototype.Init=function(e,i){t.PixelMap.superclass.Init.call(this),this._innerMap=i,this._innerMap&&(this._innerMap._outerMap=this,this._innerMap._bOuterMap=!0),this._scale=e||1,this._capacity=this._scale*this._scale,this._bInnerMap=null!=this._innerMap,this._bOuterMap=!1;for(var n=t.PixelMap._INITIAL_SIZE/this._scale,o=0;o<n;o++)for(var r=0;r<n;r++)this.put(o,r,0)},t.PixelMap.prototype.isObscured=function(t,e,i,n){for(var o=this._adjustForScale(t),r=this._adjustForScale(e),s=this._adjustForScale(i),a=this._adjustForScale(n),l=o;l<=s;l++)for(var h=r;h<=a;h++){if(!0!==this.get(l,h)){if(!this._bInnerMap)return!1;var u=Math.max(t,l*this._scale),c=Math.max(e,h*this._scale),p=Math.min(i,(l+1)*this._scale-1),_=Math.min(n,(h+1)*this._scale-1);if(!this._innerMap.isObscured(u,c,p,_))return!1}}return!0},t.PixelMap.prototype.obscure=function(t,e,i,n,o){for(var r=this._adjustForScale(t),s=this._adjustForScale(e),a=this._adjustForScale(i),l=this._adjustForScale(n),h=r;h<=a;h++)for(var u=s;u<=l;u++){if(!0!==this.get(h,u))if(this._bInnerMap){var c=Math.max(t,h*this._scale),p=Math.max(e,u*this._scale),_=Math.min(i,(h+1)*this._scale-1),g=Math.min(n,(u+1)*this._scale-1);this._innerMap.obscure(c,p,_,g,o)}else this._increment(h,u,o)}},t.PixelMap.prototype._increment=function(t,e,i){var n=this._adjustForScale(t),o=this._adjustForScale(e),r=this.get(n,o);(r=null!=r?r+i:i)>=this._capacity&&(r=!0),this.put(n,o,r),!0===r&&this._bOuterMap&&this._outerMap._increment(t,e,this._capacity)},t.PixelMap.prototype._adjustForScale=function(t){return Math.floor(t/this._scale)},t.ImageLoader={_cache:{}},t.Obj.createSubclass(t.ImageLoader,t.Obj),t.ImageLoader.addBubbleEventListener=function(e,i,n){return window.addEventListener?(t.ToolkitUtils.addDomEventListener(e,i,n,!1),!0):!!window.attachEvent&&(e.attachEvent("on"+i,n),!0)},t.ImageLoader.loadImage=function(e,i){var n=this._cache[e];if(n){if(!n._image)return i&&i(n),n;t.ImageLoader._addListenerToQueue(n._listeners,i)}else this.loadNewImage(e,i);return null},t.ImageLoader.loadNewImage=function(e,i){var n=document.createElement("img"),o={_listeners:[],url:e,_image:n};i&&t.ImageLoader._addListenerToQueue(o._listeners,i),this._cache[e]=o,t.ImageLoader.addBubbleEventListener(n,"load",function(t){var e;o.width=n.width,o.height=n.height,delete o._image;var i=o._listeners.length;for(e=0;e<i;e++)o._listeners[e]&&o._listeners[e](o);delete o._listeners}),n.src=e},t.ImageLoader._addListenerToQueue=function(t,e){if(e){for(var i=0;i<t.length;i++)if(t[i]===e)return;t.push(e)}},t.JsonUtils=new Object,t.Obj.createSubclass(t.JsonUtils,t.Obj),t.JsonUtils.clone=function(e,i,n){if(null==e)return null;var o=null;if(e instanceof Array){o=[];for(var r=0;r<e.length;r++)t.JsonUtils._isDeepClonable(e[r])?o[r]=t.JsonUtils.clone(e[r],i,n):o[r]=e[r]}else if(e instanceof t.CSSStyle)o=e.clone();else if(e instanceof Date)o=e.getTime();else if(t.JsonUtils._isClonableObject(e))for(var s in o={},e)if(!i||i(s)){var a=e[s];if(n&&1==n[s]||!t.JsonUtils._isDeepClonable(a)||"_widgetConstructor"==s)o[s]=a;else{var l=n?n[s]:null;o[s]=t.JsonUtils.clone(a,i,l)}}return o},t.JsonUtils.merge=function(e,i,n){var o=e&&e._dvtNoClone?e:t.JsonUtils.clone(e,null,n);if(i&&i._dvtNoClone)throw new Error("Do not merge because content will be modified.");var r=t.JsonUtils.clone(i,null,n);if(null==o)return r;if(null==r&&o._dvtNoClone)throw new Error("Do not return an uncloned object.");return null==r?o:(t.JsonUtils._copy(o,r),r)},t.JsonUtils._copy=function(e,i){for(var n in e){var o=e[n];void 0!==o&&(o&&o instanceof Array||"_widgetConstructor"==n?i[n]=o:i[n]&&i[n]instanceof t.CSSStyle?o instanceof t.CSSStyle?i[n].merge(o):i[n].merge(new t.CSSStyle(o)):t.JsonUtils._isDeepClonable(o)&&i[n]?t.JsonUtils._copy(o,i[n]):i[n]=o)}},t.JsonUtils._isDeepClonable=function(t){return t instanceof Object&&(!t.has&&(!t._dvtNoClone&&!(t instanceof Boolean||t instanceof String||t instanceof Number||t instanceof Function||t.then)))},t.JsonUtils._isClonableObject=function(t){return t instanceof Object&&(!t.then&&(!t.jquery&&(!t.has&&(!("undefined"!=typeof NodeList&&t instanceof NodeList)&&(!("undefined"!=typeof Node&&t instanceof Node)&&!t._dvtNoClone)))))},t.ToolkitUtils={},t.Obj.createSubclass(t.ToolkitUtils,t.Obj),t.ToolkitUtils.SVG_NS="http://www.w3.org/2000/svg",t.ToolkitUtils.XLINK_NS="http://www.w3.org/1999/xlink",t.ToolkitUtils._IMAGE_URL_CACHE={},t.ToolkitUtils._ICON_CACHE={},t.ToolkitUtils.createSvgDocument=function(e){var i=document.createElementNS(t.ToolkitUtils.SVG_NS,"svg");return null!=e&&t.ToolkitUtils.setAttrNullNS(i,"id",e),t.ToolkitUtils.setAttrNullNS(i,"width","100%"),t.ToolkitUtils.setAttrNullNS(i,"height","100%"),"ie"!==t.Agent.browser&&"edge"!==t.Agent.browser||t.ToolkitUtils.setAttrNullNS(i,"focusable","false"),i},t.ToolkitUtils.getDragFeedback=function(e,i){var n=new Object;if(!e)return n.width=1,n.height=1,n.svg=t.ToolkitUtils.createSvgDocument("dnd"),n;e instanceof Array||(e=[e]);var o=t.DragAndDropUtils.getDragFeedbackBounds(e,i),r=t.ToolkitUtils._getDragFeedbackSVG(e,o);return n.width=o.w+2*t.DragSource.DRAG_FEEDBACK_MARGIN,n.height=o.h+2*t.DragSource.DRAG_FEEDBACK_MARGIN,r&&(n.svg=r),n},t.ToolkitUtils._getDragFeedbackSVG=function(e,i){var n=t.ToolkitUtils.createSvgDocument("dnd");t.ToolkitUtils.setAttrNullNS(n,"class","oj-drag");var o="translate("+(t.DragSource.DRAG_FEEDBACK_MARGIN-i.x)+","+(t.DragSource.DRAG_FEEDBACK_MARGIN-i.y)+")",r=t.SvgShapeUtils.createElement("g");t.ToolkitUtils.setAttrNullNS(r,"transform",o),t.ToolkitUtils.appendChildElem(n,r);for(var s=0;s<e.length;s++){var a=e[s],l=a.getElem().cloneNode(!0);t.ToolkitUtils.getAttrNullNS(l,"filter")&&t.ToolkitUtils.setAttrNullNS(l,"filter",null);var h=t.SvgShapeUtils.createElement("g");t.ToolkitUtils.appendChildElem(r,h);for(var u=a.getPathToStage(),c=null,p=1;p<u.length;p++)c=c?c.concat(u[p].getMatrix()):u[p].getMatrix();if(c){var _="matrix("+c.getA()+","+c.getC()+","+c.getB()+","+c.getD()+","+c.getTx()+","+c.getTy()+")";t.ToolkitUtils.setAttrNullNS(h,"transform",_)}t.ToolkitUtils.appendChildElem(h,l)}return n},t.ToolkitUtils.addDomEventListener=function(t,e,i,n){t&&t.addEventListener&&t.addEventListener(e,i,n)},t.ToolkitUtils.removeDomEventListener=function(t,e,i,n){t&&t.removeEventListener&&t.removeEventListener(e,i,n)},t.ToolkitUtils.appendChildElem=function(t,e){return t.appendChild(e)},t.ToolkitUtils.removeChildElem=function(t,e){return e.parentNode!=t?null:t.removeChild(e)},t.ToolkitUtils.getAttrNullNS=function(t,e){return t.getAttribute(e)},t.ToolkitUtils.hasAttrNullNS=function(t,e){return t.hasAttribute(e)},t.ToolkitUtils.setAttrNullNS=function(e,i,n,o){null==o||n!=o?e.setAttribute(i,n):t.ToolkitUtils.hasAttrNullNS(e,i)&&t.ToolkitUtils.removeAttrNullNS(e,i)},t.ToolkitUtils.removeAttrNullNS=function(e,i){t.ToolkitUtils.hasAttrNullNS(e,i)&&e.removeAttribute(i)},t.ToolkitUtils.setHref=function(e,i){"safari"===t.Agent.browser||"firefox"===t.Agent.browser&&t.Agent.version<51?e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i):t.ToolkitUtils.setAttrNullNS(e,"href",i)},t.ToolkitUtils.getLinkCallback=function(t,e){if(t||e){return function(){if(null==t)self.location=e;else{var i=window.open(e,t);i&&i.focus()}}}return null},t.ToolkitUtils.getUrlPathById=function(e){return(("ie"===t.Agent.browser||"edge"===t.Agent.browser?null!=document.querySelector("base"):document.URL!=document.baseURI)?document.URL.split("#")[0]+"#":"#")+e},t.ToolkitUtils.getUrlById=function(e){return"url("+t.ToolkitUtils.getUrlPathById(e)+")"},t.ToolkitUtils.setSvgSize=function(e,i,n){var o=e.getSvgDocument();t.ToolkitUtils.setAttrNullNS(o,"width",i+"px"),t.ToolkitUtils.setAttrNullNS(o,"height",n+"px")},t.ToolkitUtils.getOuterDivSize=function(e){var i=e.getSvgDocument().parentNode,n=window.getComputedStyle(i);return new t.Dimension(parseFloat(n.width),parseFloat(n.height))},t.ToolkitUtils.getEventForSyntax=function(t,e){var i=e.getNativeEvent();if(!t.isCustomElement()&&"undefined"!=typeof $){var n=$.event.fix(i);return n.dataTransfer=i.dataTransfer,n}return i},t.ToolkitUtils.getImageUrl=function(e,i){return null==i||-1!==i.indexOf(".")?i:t.ToolkitUtils.getImageUrls(e,[i])[i]},t.ToolkitUtils.getImageUrls=function(e,i){if(0==i.length)return{};var n={},o=document.createElement("div");o.style.display="none";for(var r=0;r<i.length;r++){var s,a,l=i[r];null!=l&&(-1===l.indexOf(".")?null==(s=t.ToolkitUtils._IMAGE_URL_CACHE[l])?((a=document.createElement("div")).className=l,t.ToolkitUtils.appendChildElem(o,a)):n[l]=s:n[l]=l)}return o.hasChildNodes()?(t.ToolkitUtils.appendChildElem(e.getContainer(),o),Array.prototype.forEach.call(o.childNodes,function(e){var i=e.className,o=window.getComputedStyle(e).getPropertyValue("background-image");o=o&&-1!==o.indexOf("url(")?o.slice(o.indexOf("url(")+4,o.length-1).replace(/["']/g,""):i,n[i]=o,t.ToolkitUtils._IMAGE_URL_CACHE[i]=o}),t.ToolkitUtils.removeChildElem(e.getContainer(),o),n):n},t.ToolkitUtils.getIconStyle=function(e,i){return t.ToolkitUtils.getIconStyles(e,[i])[i]},t.ToolkitUtils.getIconStyles=function(e,i){if(0==i.length)return{};var n={},o=document.createElement("div"),r=o.style;r.width="0px",r.height="0px",r.visibility="hidden";for(var s=0;s<i.length;s++){var a,l,h=i[s];null!=h&&(null==(a=t.ToolkitUtils._ICON_CACHE[h])?((l=document.createElement("div")).className=h,t.ToolkitUtils.appendChildElem(o,l)):n[h]=a)}return o.hasChildNodes()?(t.ToolkitUtils.appendChildElem(e.getContainer(),o),Array.prototype.forEach.call(o.childNodes,function(e){var i,o=e.className,r=window.getComputedStyle(e,":before"),s=r.getPropertyValue("content"),a=s.charAt('"'===s.charAt(0)?1:0),l=r.getPropertyValue("transform");if("none"===l)i=new t.Matrix;else{var h=l.match(/matrix\((.*)\)/)[1].split(", ").map(t=>Number(t));i=new t.Matrix(...h)}var u={character:a,transform:i};n[o]=u,t.ToolkitUtils._ICON_CACHE[o]=u}),t.ToolkitUtils.removeChildElem(e.getContainer(),o),n):n},t.ToolkitUtils.addClassName=function(e,i){if(e&&i)if(t.ToolkitUtils.hasAttrNullNS(e,"class")){var n=t.ToolkitUtils.getAttrNullNS(e,"class").split(" ");-1==n.indexOf(i)&&(n.push(i),t.ToolkitUtils.setAttrNullNS(e,"class",n.join(" ")))}else t.ToolkitUtils.setAttrNullNS(e,"class",i)},t.ToolkitUtils.removeClassName=function(e,i){if(e&&i&&t.ToolkitUtils.hasAttrNullNS(e,"class")){var n=t.ToolkitUtils.getAttrNullNS(e,"class").split(" "),o=n.indexOf(i);o>=0&&(n.splice(o,1),t.ToolkitUtils.setAttrNullNS(e,"class",n.join(" ")))}},t.ToolkitUtils.getGrabCursor=function(){return"ie"===t.Agent.browser?"move":"grab"},t.ToolkitUtils.getGrabbingCursor=function(){return"ie"===t.Agent.browser?"move":"grabbing"},t.ToolkitUtils.cleanDragDataContext=function(t){return delete t.componentElement,delete t.component,t},t.ToolkitUtils.getUseCaptureFromOptions=function(t){return null!=t&&("boolean"==typeof t?t:t.capture||!1)},t.SvgDocumentUtils=function(){},t.Obj.createSubclass(t.SvgDocumentUtils,t.Obj),t.SvgDocumentUtils.elementFromPoint=function(t,e){for(var i=document.elementFromPoint(t,e);i;){if(i._obj)return i._obj;i=i.parentNode}return null},t.SvgDocumentUtils.elementFromTouch=function(t){return this.elementFromPoint(t.clientX,t.clientY)},t.SvgDocumentUtils.addDragListeners=function(e,i,n,o,r,s){var a=t.Agent.isTouchDevice(),l=e.getCtx(),h=document.body.style,u=function(t){t.stopPropagation()},c=function(e){i.call(r,e)&&(a?(document.addEventListener("touchmove",p,!0),document.addEventListener("touchend",_,!0)):(document.addEventListener("mousemove",p,!0),document.addEventListener("mouseup",_,!0),s&&document.addEventListener("click",u,!0)),t.SvgDocumentUtils._webkitUserSelect=h.webkitUserSelect,t.SvgDocumentUtils._mozUserSelect=h.MozUserSelect,h.webkitUserSelect="none",h.MozUserSelect="none")},p=t.SvgDocumentUtils.createStaticCallback(l,n,r),_=function(e){a?(document.removeEventListener("touchmove",p,!0),document.removeEventListener("touchend",_,!0)):(document.removeEventListener("mousemove",p,!0),document.removeEventListener("mouseup",_,!0),a||setTimeout(function(){document.removeEventListener("click",u,!0)},50)),h.webkitUserSelect=t.SvgDocumentUtils._webkitUserSelect,h.MozUserSelect=t.SvgDocumentUtils._mozUserSelect;var i=t.DomEventFactory.newEvent(e,l);o.call(r,i)};a?e.addEvtListener(t.TouchEvent.TOUCHSTART,c):e.addEvtListener(t.MouseEvent.MOUSEDOWN,c)},t.SvgDocumentUtils.createStaticCallback=function(e,i,n){return function(o){var r=t.DomEventFactory.newEvent(o,e);i.call(n,r)}},t.SvgDocumentUtils.disableMouseEvents=function(e){if(e.style&&(e.style.pointerEvents="none"),e.childNodes)for(var i=0;i<e.childNodes.length;i++)t.SvgDocumentUtils.disableMouseEvents(e.childNodes[i])},t.ArrayUtils=new Object,t.Obj.createSubclass(t.ArrayUtils,t.Obj),t.ArrayUtils.removeItem=function(t,e){var i=t.indexOf(e);i>-1&&t.splice(i,1)},t.ArrayUtils.insert=function(t,e,i){if(!Array.isArray(t))return null;if(!Array.isArray(e))return t;var n;if(0===i)n=e.concat(t);else if(i>0&&i<t.length){var o=t.splice(0,i);n=(o=o.concat(e)).concat(t)}else n=t.concat(e);return n},t.ArrayUtils.equals=function(t,e){if(!t&&e)return!1;if(t&&!e)return!1;if(t||e){if(t.length!=e.length)return!1;for(var i=0;i<=t.length;i++)if(t[i]!==e[i])return!1;return!0}return!0},t.ArrayUtils.hasAnyMapItem=function(t,e){if(!t||!e)return!1;for(var i=0;i<e.length;i++)if(t[e[i]])return!0;return!1},t.ArrayUtils.hasAllMapItems=function(t,e){if(!t||!e)return!1;for(var i=0;i<e.length;i++)if(!t[e[i]])return!1;return!0},t.ArrayUtils.hasAnyItem=function(e,i){return t.ArrayUtils.hasAnyMapItem(t.ArrayUtils.createBooleanMap(e),i)},t.ArrayUtils.hasAllItems=function(e,i){return t.ArrayUtils.hasAllMapItems(t.ArrayUtils.createBooleanMap(e),i)},t.ArrayUtils.createBooleanMap=function(t){if(!t)return null;for(var e={},i=0;i<t.length;i++)e[t[i]]=!0;return e},t.ResourceUtils={format:function(t,e){return t?t.replace(/\{(\d+)\}/g,function(){return e[arguments[1]]}):t}},t.BaseEvent=function(){},t.Obj.createSubclass(t.BaseEvent,t.Obj),t.BaseEvent.prototype.Init=function(e){this.type=e.type,this.target=t.BaseEvent.FindDisplayable(e.target),this._isPropagationStopped=!1,this._event=e},t.BaseEvent.prototype.getNativeEvent=function(){return this._event},t.BaseEvent.prototype.preventDefault=function(){this._event.cancelable&&this._event.preventDefault()},t.BaseEvent.prototype.stopPropagation=function(){this._event.stopPropagation&&this._event.stopPropagation(),this._event.cancelBubble=!0,this._event.cancel=!0,this._event.returnValue=!1,this._isPropagationStopped=!0},t.BaseEvent.prototype.isPropagationStopped=function(){return this._isPropagationStopped},t.BaseEvent.FindDisplayable=function(t){for(;t;){if(t._obj)return t._obj;t=t.parentNode}return null};var p=function(t){this.Init(t)};t.Obj.createSubclass(p,t.BaseEvent),p.FOCUS="focus",p.FOCUSIN="focusin",p.FOCUSOUT="focusout",p.BLUR="blur",p.prototype.Init=function(e){p.superclass.Init.call(this,e),this.bubbles=e.bubbles,this.cancelable=e.cancelable,this.view=e.view,null!=e.relatedTarget&&(this.relatedTarget=t.BaseEvent.FindDisplayable(e.relatedTarget))},t.KeyboardEvent=function(t){this.Init(t)},t.Obj.createSubclass(t.KeyboardEvent,t.BaseEvent),t.KeyboardEvent.KEYDOWN="keydown",t.KeyboardEvent.KEYUP="keyup",t.KeyboardEvent.KEYPRESS="keypress",t.KeyboardEvent.TAB=9,t.KeyboardEvent.ENTER=13,t.KeyboardEvent.SHIFT=16,t.KeyboardEvent.CONTROL=17,t.KeyboardEvent.ESCAPE=27,t.KeyboardEvent.SPACE=32,t.KeyboardEvent.PAGE_UP=33,t.KeyboardEvent.PAGE_DOWN=34,t.KeyboardEvent.UP_ARROW=38,t.KeyboardEvent.DOWN_ARROW=40,t.KeyboardEvent.LEFT_ARROW=37,t.KeyboardEvent.RIGHT_ARROW=39,t.KeyboardEvent.OPEN_BRACKET=219,t.KeyboardEvent.CLOSE_BRACKET=221,t.KeyboardEvent.ZERO=48,t.KeyboardEvent.NUMPAD_ZERO=96,t.KeyboardEvent.NUMPAD_PLUS=107,t.KeyboardEvent.NUMPAD_MINUS=109,t.KeyboardEvent.WEBKIT_PLUS=187,t.KeyboardEvent.WEBKIT_MINUS=189,t.KeyboardEvent.GECKO_PLUS=61,t.KeyboardEvent.GECKO_MINUS=173,t.KeyboardEvent.M=77,t.KeyboardEvent.OPEN_ANGLED_BRACKET=188,t.KeyboardEvent.CLOSE_ANGLED_BRACKET=190,t.KeyboardEvent.prototype.Init=function(e){t.KeyboardEvent.superclass.Init.call(this,e),this.bubbles=e.bubbles,this.cancelable=e.cancelable,this.view=e.view,this.charCode=e.charCode,this.keyCode=e.keyCode,this.location=e.location,this.ctrlKey=e.ctrlKey||e.metaKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.repeat=e.repeat,this.locale=e.locale},t.KeyboardEvent.isPlus=function(e){var i=e.keyCode;return i==t.KeyboardEvent.NUMPAD_PLUS||("firefox"===t.Agent.browser?!(i!=t.KeyboardEvent.GECKO_PLUS||!e.shiftKey):!(i!=t.KeyboardEvent.WEBKIT_PLUS||!e.shiftKey))},t.KeyboardEvent.isEquals=function(e){var i=e.keyCode;return"firefox"===t.Agent.browser?i==t.KeyboardEvent.GECKO_PLUS&&!e.shiftKey:i==t.KeyboardEvent.WEBKIT_PLUS&&!e.shiftKey},t.KeyboardEvent.isMinus=function(e){var i=e.keyCode;return i==t.KeyboardEvent.NUMPAD_MINUS||("firefox"===t.Agent.browser?i==t.KeyboardEvent.GECKO_MINUS&&!e.shiftKey:i==t.KeyboardEvent.WEBKIT_MINUS&&!e.shiftKey)},t.KeyboardEvent.isUnderscore=function(e){var i=e.keyCode;return"firefox"===t.Agent.browser?!(i!=t.KeyboardEvent.GECKO_MINUS||!e.shiftKey):!(i!=t.KeyboardEvent.WEBKIT_MINUS||!e.shiftKey)},t.MouseEvent=function(t){this.Init(t)},t.Obj.createSubclass(t.MouseEvent,t.BaseEvent),t.MouseEvent.CLICK="click",t.MouseEvent.DBLCLICK="dblclick",t.MouseEvent.MOUSEOVER="mouseover",t.MouseEvent.MOUSEOUT="mouseout",t.MouseEvent.MOUSEDOWN="mousedown",t.MouseEvent.MOUSEUP="mouseup",t.MouseEvent.MOUSEMOVE="mousemove",t.MouseEvent.MOUSEWHEEL="wheel",t.MouseEvent.RIGHT_CLICK_BUTTON=2,t.MouseEvent.prototype.Init=function(e){t.MouseEvent.superclass.Init.call(this,e),null!=e.relatedTarget&&(this.relatedTarget=t.BaseEvent.FindDisplayable(e.relatedTarget)),this.button=e.button,this.ctrlKey=e.ctrlKey||e.metaKey,this.shiftKey=e.shiftKey,this.pageX=e.pageX,this.pageY=e.pageY,this._isEventModifiedForIE=!1,null!=e.wheelDeltaY?this.wheelDelta=e.wheelDeltaY/40:null!=e.deltaY?(this.deltaMode=e.deltaMode,this.deltaY=e.deltaY,e.deltaMode==e.DOM_DELTA_LINE?this.wheelDelta=-e.deltaY:e.deltaMode==e.DOM_DELTA_PIXEL&&(this.wheelDelta=-e.deltaY/15)):null!=e.wheelDelta?this.wheelDelta=e.wheelDelta/40:this.wheelDelta=e.detail},t.MouseEvent.prototype.modifyEventForIE=function(e,i){this._isEventModifiedForIE||(this.type=e,this.relatedTarget=this.target,this.target=t.BaseEvent.FindDisplayable(i),this._isEventModifiedForIE=!0)},t.TouchEvent=function(t){this.Init(t)},t.Obj.createSubclass(t.TouchEvent,t.BaseEvent),t.TouchEvent.TOUCHSTART="touchstart",t.TouchEvent.TOUCHMOVE="touchmove",t.TouchEvent.TOUCHEND="touchend",t.TouchEvent.TOUCHCANCEL="touchcancel",t.TouchEvent.prototype.Init=function(e){t.TouchEvent.superclass.Init.call(this,e),e.type==t.TouchEvent.TOUCHCANCEL&&(this.type=t.TouchEvent.TOUCHEND),this.touches=t.TouchEvent.createTouchArray(e.touches),this.targetTouches=t.TouchEvent.createTouchArray(e.targetTouches),this.changedTouches=t.TouchEvent.createTouchArray(e.changedTouches),this._touchManager=null},t.TouchEvent.prototype.blockTouchHold=function(){this.getNativeEvent()._touchHoldBlocked=!0},t.TouchEvent.prototype.isInitialTouch=function(){return this.touches.length-this.changedTouches.length==0},t.TouchEvent.prototype.isTouchHoldBlocked=function(){return!!this.getNativeEvent()._touchHoldBlocked},t.TouchEvent.createTouchArray=function(e){for(var i=new Array,n=0;n<e.length;n++){var o=e[n],r=new t.Touch(o);i.push(r)}return i},t.TouchEvent.prototype.stopPropagation=function(){t.TouchEvent.superclass.stopPropagation.call(this),this._touchManager&&this._touchManager.postEventBubble(this)},t.TouchEvent.prototype.setTouchManager=function(t){this._touchManager=t},t.Touch=function(t){this.Init(t)},t.Obj.createSubclass(t.Touch,t.Obj),t.Touch.prototype.Init=function(t){this.clientX=t.clientX,this.clientY=t.clientY,this.screenX=t.screenX,this.screenY=t.screenY,this.pageX=t.pageX,this.pageY=t.pageY,this.target=t.target,this.identifier=null==t.identifier||isNaN(t.identifier)?1:t.identifier},t.TouchManager=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.TouchManager,t.Obj),t.TouchManager.TOUCH_MODE="mode",t.TouchManager.TOUCH_MODE_DEFAULT="defaultMode",t.TouchManager.TOUCH_MODE_LONG_PRESS="longPressMode",t.TouchManager.PREV_HOVER_OBJ="prevHoverObj",t.TouchManager.HOVER_TOUCH_KEY="hoverTouch",t.TouchManager.prototype.Init=function(e,i,n){this._context=i,this._id=e,this._eventManager=n,this._touchCount=0,this._touchHoldTimer=new t.Timer(this._context,200,this._handleTouchHoldStartTimer,this),this._blockTouchHold=!1,this._touchMap=new Object,this._savedTouchInfo=new Array,this._addTouchHoldMoveEventListener(this._onTouchHoldHover,this),this._doubleTapTimer=new t.Timer(this._context,600,this._handleDoubleTapTimer,this,1),this._dvtTouchEvent=null},t.TouchManager.prototype.blockTouchHold=function(){this._stopTouchHoldTimer(),this._blockTouchHold=!0},t.TouchManager.prototype.unblockTouchHold=function(){this._blockTouchHold=!1},t.TouchManager.prototype._addTouchHoldMoveEventListener=function(e,i){this.addTouchEventListener(t.ComponentTouchEvent.TOUCH_HOLD_START_TYPE,e,i),this.addTouchEventListener(t.ComponentTouchEvent.TOUCH_HOLD_MOVE_TYPE,e,i),this.addTouchEventListener(t.ComponentTouchEvent.TOUCH_HOLD_END_TYPE,e,i)},t.TouchManager.prototype._onTouchHoldHover=function(e){var i=e.type,n=e.touch,o=e.getNativeEvent(),r=this._touchMap[n.identifier],s=e.target;if(i==t.ComponentTouchEvent.TOUCH_HOLD_END_TYPE){var a=new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_HOVER_END_TYPE,n,s,null,o);a._isCancelEvent=this._isCancelEvent,null!=s&&this.FireListener(new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_HOVER_OUT_TYPE,n,s,null,o)),r[t.TouchManager.PREV_HOVER_OBJ]=null,this.FireListener(a)}else i==t.ComponentTouchEvent.TOUCH_HOLD_START_TYPE?(r[t.TouchManager.PREV_HOVER_OBJ]=null,null!=s&&this.FireListener(new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_HOVER_OVER_TYPE,n,s,null,o)),r[t.TouchManager.PREV_HOVER_OBJ]=s,this.FireListener(new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_HOVER_START_TYPE,n,s,null,o))):i==t.ComponentTouchEvent.TOUCH_HOLD_MOVE_TYPE&&(this._fireHoverOverOutEvents(s,r[t.TouchManager.PREV_HOVER_OBJ],n,o),r[t.TouchManager.PREV_HOVER_OBJ]=s,this.FireListener(new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_HOVER_MOVE_TYPE,n,s,null,o)))},t.TouchManager.prototype._getObjFromTouch=function(e){return e?t.SvgDocumentUtils.elementFromTouch(e):null},t.TouchManager.prototype._fireHoverOverOutEvents=function(e,i,n,o){i!=e&&(null!=i&&this.FireListener(new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_HOVER_OUT_TYPE,n,i,e,o)),null!=e&&this.FireListener(new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_HOVER_OVER_TYPE,n,e,i,o)))},t.TouchManager.prototype.addTouchEventListener=function(t,e,i){var n=this._getListeners(t,!0);n.push(e),n.push(i)},t.TouchManager.prototype.removeTouchEventListener=function(t,e,i){var n=this._getListeners(t,!1);if(n)for(var o=0;o<n.length;o+=2)if(n[o]===e&&n[o+1]===i){n.splice(o,2);break}},t.TouchManager.prototype._getListeners=function(t,e){if(!this._listenerObj){if(!e)return null;this._listenerObj={}}var i=t,n=this._listenerObj[i];return!n&&e&&(n=[],this._listenerObj[i]=n),n},t.TouchManager.prototype.FireListener=function(t){var e=this._getListeners(t.type,!1);if(e)for(var i=0;i<e.length;i+=2){var n=e[i+1];e[i].call(n,t)}},t.TouchManager.prototype.startTouchHold=function(e){var i=this._startSingleFingerTouchId;if(null!=i&&!isNaN(i)){var n=this._touchMap[i];if(n){for(var o=n.startTarget,r=n.startTouch,s=e.getNativeEvent(),a=this._findMatches("touchId",i),l=0;l<a.length;l++){var h=a[l],u=h.touchObj,c=h.touchId;if(u!=t.TouchManager.HOVER_TOUCH_KEY){var p=this.getTouchInfo(c).startTouch;this.performAssociatedTouchEnd(p,u,null)}}n[t.TouchManager.TOUCH_MODE]=t.TouchManager.TOUCH_MODE_LONG_PRESS,this.saveProcessedTouch(i,t.TouchManager.HOVER_TOUCH_KEY,null,t.TouchManager.HOVER_TOUCH_KEY,t.TouchManager.HOVER_TOUCH_KEY,this.HoverMoveInternal,this.HoverEndInternal,this);var _=new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_HOLD_START_TYPE,r,o,null,s);this.FireListener(_)}}},t.TouchManager.prototype.fireLogicalEvents=function(e){var i=e.type,n=e.getNativeEvent();if(i==t.TouchEvent.TOUCHSTART?(e.isTouchHoldBlocked()||this.processAssociatedTouchAttempt(e,t.TouchManager.HOVER_TOUCH_KEY,this.HoverStartInternal,this),this._doubleTapAttemptStarted&&e.preventDefault()):i==t.TouchEvent.TOUCHMOVE?this.processAssociatedTouchMove(e,t.TouchManager.HOVER_TOUCH_KEY):i==t.TouchEvent.TOUCHEND&&this.processAssociatedTouchEnd(e,t.TouchManager.HOVER_TOUCH_KEY),i==t.TouchEvent.TOUCHEND){this._context.oj.Logger.log("received touch end:"+performance.now());for(var o=this._getStoredTouches(e.changedTouches),r=0;r<o.length;r++){var s=o[r],a=s.identifier,l=this.getTouchInfo(a),h=l.currentObj;if(l[t.TouchManager.TOUCH_MODE]!=t.TouchManager.TOUCH_MODE_LONG_PRESS&&l.fireClick){var u=new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_CLICK_TYPE,s,h,null,n);if(u.touchEvent=e,this._context.oj.Logger.log("doubleTapAttemptStarted:"+this._doubleTapAttemptStarted),this._doubleTapAttemptStarted){var c=this._doubleTapAttemptObj;if(this.resetDoubleTap(),h==c||c.contains(h)){var p=new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_DOUBLE_CLICK_TYPE,s,h,null,n);p.touchEvent=e,this._context.oj.Logger.log("firing double tap"),this.FireListener(p)}else this.FireListener(u)}else this._context.oj.Logger.log("firing tap"),this.FireListener(u),this.resetDoubleTap(),this._context.oj.Logger.log("starting double tap timer"),this._doubleTapTimer.start(),this._doubleTapAttemptStarted=!0,this._doubleTapAttemptObj=h}}}},t.TouchManager.prototype.getTouchInfo=function(t){return this._touchMap[t]},t.TouchManager.prototype.HoverStartInternal=function(t,e){if(!this._blockTouchHold){var i=e.identifier;this._startSingleFingerTouchId=i,this._stopTouchHoldTimer(),this._startTouchHoldTimer(t)}},t.TouchManager.prototype.HoverMoveInternal=function(e,i){var n=i.identifier,o=this.getTouchInfo(n).currentObj,r=new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_HOLD_MOVE_TYPE,i,o,null,e.getNativeEvent());this.FireListener(r),e.preventDefault()},t.TouchManager.prototype.HoverEndInternal=function(e,i){var n=i.identifier,o=this.getTouchInfo(n).currentObj,r=new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_HOLD_END_TYPE,i,o,null,e.getNativeEvent());this.FireListener(r),e&&e.preventDefault()},t.TouchManager.prototype.resetTouchHold=function(){this._startSingleFingerTouchId=null,this._stopTouchHoldTimer()},t.TouchManager.prototype.preEventBubble=function(e){e.setTouchManager&&e.setTouchManager(this);var i=e.type;i==t.TouchEvent.TOUCHSTART?this.processTouchStart(e):i==t.TouchEvent.TOUCHMOVE?this.processTouchMove(e):i==t.TouchEvent.TOUCHEND&&this.processTouchEnd(e)},t.TouchManager.prototype.postEventBubble=function(e){var i=e.type;if(i==t.TouchEvent.TOUCHSTART);else if(i==t.TouchEvent.TOUCHMOVE);else if(i==t.TouchEvent.TOUCHEND)for(var n=this._getStoredTouches(e.changedTouches),o=0;o<n.length;o++){var r=n[o].identifier;delete this._touchMap[r],this._startSingleFingerTouchId==r&&(this._startSingleFingerTouchId=null);for(var s=this._findMatches("touchId",r),a=0;a<s.length;a++){var l=s[a];this.removeTooltipInfo(l.touchId,l.touchObj)}}},t.TouchManager.prototype.saveProcessedTouch=function(e,i,n,o,r,s,a,l){if(null!=e&&!isNaN(e)){var h=t.TouchManager.createSavedTouchInfo(e,i,n,o,r,s,a,l);return this._savedTouchInfo.push(h),!0}return!1},t.TouchManager.prototype.cancelTouchHold=function(){for(var e=t.TouchManager.HOVER_TOUCH_KEY,i=this.getTouchIdsForObj(e),n=0;n<i.length;n++){var o=i[n],r=this.getTouchInfo(o).startTouch;r&&(this._isCancelEvent=!0,this.performAssociatedTouchEnd(r,e,null),this._isCancelEvent=!1,delete this._touchMap[o])}},t.TouchManager.prototype.performAssociatedTouchEnd=function(t,e,i){for(var n=t.identifier,o=this._getSavedTouchInfo(n,e),r=0;r<o.length;r++){var s=o[r],a=s.listenerObj,l=s.endListener;this.removeTooltipInfo(n,e),l&&l.call(a,i,t,s)}},t.TouchManager.prototype.processAssociatedTouchAttempt=function(t,e,i,n){for(var o=t.changedTouches,r=0;r<o.length;r++){var s=o[r];s&&i&&i.call(n,t,s)}},t.TouchManager.prototype.processAssociatedTouchMove=function(e,i){for(var n=this.getTouchIdsForObj(i),o=0;o<n.length;o++){var r=n[o];if(null!=r&&!isNaN(r)){var s=t.TouchManager.getTouchById(r,this._getStoredTouches(e.changedTouches));if(s){var a=this._getSavedTouchInfo(s.identifier,i);for(o=0;o<a.length;o++){var l=a[o],h=l.listenerObj,u=l.moveListener;u&&u.call(h,e,s)}}}}},t.TouchManager.prototype.processAssociatedTouchEnd=function(e,i){for(var n=this.getTouchIdsForObj(i),o=0;o<n.length;o++){var r=n[o],s=t.TouchManager.getTouchById(r,this._getStoredTouches(e.changedTouches));s&&this.performAssociatedTouchEnd(s,i,e)}},t.TouchManager.prototype._findMatches=function(t,e){for(var i=new Array,n=0;n<this._savedTouchInfo.length;n++){var o=this._savedTouchInfo[n];o[t]==e&&i.push(o)}return i},t.TouchManager.prototype._getSavedTouchInfo=function(t,e){for(var i=this._findMatches("touchId",t),n=[],o=0;o<i.length;o++){var r=i[o];r.touchObj==e&&n.push(r)}return n},t.TouchManager.prototype.getTouchIdsForObj=function(t){for(var e=new Array,i=this._findMatches("touchObj",t),n=0;n<i.length;n++){var o=i[n].touchId;e.push(o)}return e},t.TouchManager.prototype.removeTooltipInfo=function(t,e){for(var i=this._findMatches("touchId",t),n=new Array,o=0;o<i.length;o++){(l=i[o]).touchObj==e&&n.push(l)}for(o=0;o<n.length;o++){for(var r=n[o],s=-1,a=0;a<this._savedTouchInfo.length;a++){var l;(l=this._savedTouchInfo[a])==r&&(s=a)}-1!=s&&(this._savedTouchInfo.splice(s,1),0==this._savedTouchInfo.length&&this._context.getTooltipManager().hideTooltip())}},t.TouchManager.prototype.setTooltipEnabled=function(t,e){for(var i=this._savedTouchInfo,n=0;n<i.length;n++){var o=i[n];o.touchId==t&&(o.allowTooltips=e)}},t.TouchManager.prototype.getTooltipInfo=function(){for(var t=new Object,e=new Array,i=null,n=null,o=!1,r=this._findMatches("allowTooltips",!0),s=0;s<r.length;s++){var a,l=r[s],h=l.touchId;n?l.grouping!=n&&(o=!0):n=l.grouping;var u=this._touchMap[h];u&&(a=u.currentObj),l.tooltipObjOverride&&(a=l.tooltipObjOverride),e.push(h),i=a}return o&&(e=new Array),t.touchIds=e,t.tooltipTarget=i,t},t.TouchManager.prototype.processTouchStart=function(e){var i=e.changedTouches,n=e.touches;this._touchCount=n.length;for(var o=0;o<i.length;o++){var r=i[o],s=r.screenX,a=r.screenY,l=r.identifier,h=this._getObjFromTouch(r),u={x:s,y:a,prevX:s,prevY:a,pageX:r.pageX,pageY:r.pageY,prevPageX:r.pageX,prevPageY:r.pageY,dx:0,dy:0,fireClick:!0,startTarget:h,currentObj:h,touchMoved:!1,touchtype:null,startTouch:r};u[t.TouchManager.TOUCH_MODE]=t.TouchManager.TOUCH_MODE_DEFAULT,u.origx=s,u.origy=a,this._touchMap[l]=u}return!this._isHovering()&&this._isTouchHoldAllowed()||e.blockTouchHold(),!0},t.TouchManager.prototype._isTouchHoldAllowed=function(){var t=!1,e=0;for(var i in this._touchMap){this.getTouchInfo(i).touchMoved&&(t=!0),e++}return!(e>1&&!t)||(this.resetTouchHold(),!1)},t.TouchManager.prototype._isHovering=function(){for(var e in this._touchMap){if(this.getTouchInfo(e)[t.TouchManager.TOUCH_MODE]==t.TouchManager.TOUCH_MODE_LONG_PRESS)return!0}return!1},t.TouchManager.prototype._getStoredTouches=function(t){for(var e=new Array,i=0;i<t.length;i++){var n=t[i],o=n.identifier;this.getTouchInfo(o)&&e.push(n)}return e},t.TouchManager.prototype.processTouchMove=function(e){for(var i=this._getStoredTouches(e.changedTouches),n=this._getStoredTouches(e.touches),o=0;o<i.length;o++){var r=i[o],s=this._getObjFromTouch(r),a=r.identifier;if((c=this.getTouchInfo(a)).currentObj=s,c.touchMoved=!0,c[t.TouchManager.TOUCH_MODE]!=t.TouchManager.TOUCH_MODE_LONG_PRESS){var l=Math.abs(c.pageX-r.pageX),h=Math.abs(c.pageY-r.pageY);this._startSingleFingerTouchId==a&&(l>0||h>0)&&this.resetTouchHold(),c.touchMoved=l>3||h>3}(c.touchMoved||c.fireClick&&c[t.TouchManager.TOUCH_MODE]!=t.TouchManager.TOUCH_MODE_LONG_PRESS&&c.currentObj!=c.startTarget&&c.currentObj!=this._eventManager.getMarqueeGlassPane())&&(c.fireClick=!1)}for(o=0;o<n.length;o++){var u=(r=n[o]).identifier,c=this.getTouchInfo(u),p=r.screenX,_=r.screenY,g=p-c.x,d=_-c.y;c.prevX=c.x,c.prevY=c.y,c.dx=g,c.dy=d,c.x=p,c.y=_,c.prevPageX=c.pageX,c.prevPageY=c.pageY,c.pageX=r.pageX,c.pageY=r.pageY}return!0},t.TouchManager.prototype.processTouchEnd=function(e){var i=e.changedTouches;this._touchCount=e.touches.length;for(var n=0;n<i.length;n++){var o=i[n],r=this._getObjFromTouch(o),s=o.identifier,a=this.getTouchInfo(s);if(a&&a.fireClick)if(a[t.TouchManager.TOUCH_MODE]==t.TouchManager.TOUCH_MODE_LONG_PRESS)this._startSingleFingerTouchId=null;else{var l=r==a.startTarget,h=a.touchMoved,u=l&&!h;a.fireClick=u}}return!0},t.TouchManager.getTouchById=function(t,e){if(null!=t&&!isNaN(t))for(var i=0;i<e.length;i++){var n=e[i];if(n.identifier==t)return n}return null},t.TouchManager.createSavedTouchInfo=function(t,e,i,n,o,r,s,a){var l={touchId:t,tooltipObjOverride:i,grouping:n,type:o,touchObj:e,allowTooltips:!0};return l.moveListener=r,l.endListener=s,l.listenerObj=a,l},t.TouchManager.prototype._handleTouchHoldStartTimer=function(){var t=this._dvtTouchEvent;this._stopTouchHoldTimer(),this.startTouchHold(t)},t.TouchManager.prototype._startTouchHoldTimer=function(t){this._dvtTouchEvent=t,this._touchHoldTimer&&this._touchHoldTimer.start()},t.TouchManager.prototype._stopTouchHoldTimer=function(){this._dvtTouchEvent=null,this._touchHoldTimer&&this._touchHoldTimer.stop()},t.TouchManager.prototype._handleDoubleTapTimer=function(){this._context.oj.Logger.log("double tap timer expired"),this.resetDoubleTap()},t.TouchManager.prototype.resetDoubleTap=function(){this._doubleTapAttemptStarted=!1,this._doubleTapAttemptObj=null,this._doubleTapTimer.stop()},t.TouchManager.prototype.getMultiTouchData=function(t){if(2==t.length){var e=this._touchMap[t[0]],i=this._touchMap[t[1]];if(null==e||null==i)return null;if(0==e.dx&&0==i.dy)return null;var n=e.pageX-i.pageX,o=e.pageY-i.pageY,r=Math.sqrt(n*n+o*o),s=e.prevPageX-i.prevPageX,a=e.prevPageY-i.prevPageY,l=r-Math.sqrt(s*s+a*a),h=(e.pageX+i.pageX)/2,u=(e.pageY+i.pageY)/2;return{dz:l,cx:h,cy:u,dcx:h-(e.prevPageX+i.prevPageX)/2,dcy:u-(e.prevPageY+i.prevPageY)/2,dist:r}}return null},t.TouchManager.prototype.calcAveragePosition=function(e){for(var i=0,n=0,o=e.length,r=0;r<o;r++){var s=e[r],a=this.getTouchInfo(s);i+=a.pageX,n+=a.pageY}return i/=o,n/=o,new t.Point(i,n)},t.TouchManager.prototype.getStartTargetsByIds=function(t){for(var e=new Array,i=0;i<t.length;i++){var n=this.getTouchInfo(t[i]);e.push(n.startTarget)}return e},t.TouchManager.prototype.reset=function(){this._touchMap=new Object,this._savedTouchInfo=new Array,this.resetTouchHold(),this.resetDoubleTap()},t.ComponentTouchEvent=function(t,e,i,n,o){this.type=t,this.touch=e,this.target=i,this.relatedTarget=n,this._nativeEvent=o,this._isPropagationStopped=!1},t.ComponentTouchEvent.TOUCH_HOLD_START_TYPE="touchholdstart",t.ComponentTouchEvent.TOUCH_HOLD_MOVE_TYPE="touchholdmove",t.ComponentTouchEvent.TOUCH_HOLD_END_TYPE="touchholdend",t.ComponentTouchEvent.TOUCH_HOVER_START_TYPE="touchhoverstart",t.ComponentTouchEvent.TOUCH_HOVER_MOVE_TYPE="touchhovermove",t.ComponentTouchEvent.TOUCH_HOVER_END_TYPE="touchhoverend",t.ComponentTouchEvent.TOUCH_HOVER_OVER_TYPE="touchhoverover",t.ComponentTouchEvent.TOUCH_HOVER_OUT_TYPE="touchhoverout",t.ComponentTouchEvent.TOUCH_CLICK_TYPE="touchclick",t.ComponentTouchEvent.TOUCH_DOUBLE_CLICK_TYPE="touchdblclick",t.ComponentTouchEvent.prototype.preventDefault=function(){},t.ComponentTouchEvent.prototype.stopPropagation=function(){this._isPropagationStopped=!0},t.ComponentTouchEvent.prototype.isPropagationStopped=function(){return this._isPropagationStopped},t.ComponentTouchEvent.prototype.getNativeEvent=function(){return this._nativeEvent},t.DomEventFactory=new Object,t.Obj.createSubclass(t.DomEventFactory,t.Obj),t.DomEventFactory.newEvent=function(e,i){var n=e.type;return n==t.TouchEvent.TOUCHSTART||n==t.TouchEvent.TOUCHMOVE||n==t.TouchEvent.TOUCHEND||n==t.TouchEvent.TOUCHCANCEL?new t.TouchEvent(e):n==t.KeyboardEvent.KEYDOWN||n==t.KeyboardEvent.KEYUP||n==t.KeyboardEvent.KEYPRESS?new t.KeyboardEvent(e):(i._nativeEvent!=e&&(i._nativeEvent=e,i._logicalEvent=n==p.FOCUS||n==p.FOCUSIN||n==p.FOCUSOUT||n==p.BLUR?new p(e):new t.MouseEvent(e)),i._logicalEvent)},t.EventFactory=new Object,t.Obj.createSubclass(t.EventFactory,t.Obj),t.EventFactory.newEvent=function(t,e){var i={type:t};return e&&(i.id=e),i},t.EventFactory.newOptionChangeEvent=function(e,i,n){var o=t.EventFactory.newEvent("optionChange");return o.key=e,o.value=i,o.optionMetadata=n,o},t.EventFactory.newRenderEvent=function(){return t.EventFactory.newEvent("dvtRender")},t.EventFactory.newCategoryHideEvent=function(e,i){var n=t.EventFactory.newEvent("categoryHide");return n.category=e,n.hiddenCategories=i,n},t.EventFactory.newCategoryShowEvent=function(e,i){var n=t.EventFactory.newEvent("categoryShow");return n.category=e,n.hiddenCategories=i,n},t.EventFactory.newCategoryHighlightEvent=function(e,i){var n=t.EventFactory.newEvent("categoryHighlight");return n._highlightType=i?"over":"out",e=e||[],n.categories=e instanceof Array?e:[e],n},t.EventFactory.newDrillEvent=function(e){return t.EventFactory.newEvent("drill",e)},t.EventFactory.newReadyEvent=function(){return t.EventFactory.newEvent("ready")},t.EventFactory.newSelectionEvent=function(e){var i=t.EventFactory.newEvent("selection");return i.selection=e,i},t.EventFactory.newTouchHoldReleaseEvent=function(e){var i=t.EventFactory.newEvent("touchHoldRelease");return i.nativeEvent=e,i},t.EventFactory.newValueChangeEvent=function(e,i,n){var o=t.EventFactory.newEvent("valueChange");return o.oldValue=e,o.newValue=i,o.complete=n,o},t.EventFactory.newActionTooltipEvent=function(e,i){var n=t.EventFactory.newEvent(e);return n.target=i,n},t.EventFactory.newPanZoomEvent=function(e,i,n,o,r,s,a,l,h){var u=t.EventFactory.newEvent("dvtPanZoom");return u.subtype=e,u.dxMin=i,u.dxMax=n,u.dyMin=o,u.dyMax=r,u.dxMinTotal=s,u.dxMaxTotal=a,u.dyMinTotal=l,u.dyMaxTotal=h,u},t.EventFactory.newSimpleScrollbarEvent=function(e,i,n){var o=t.EventFactory.newEvent("dvtSimpleScrollbar");return o.subtype=e,o.newMin=i,o.newMax=n,o},t.EventFactory.newOverviewEvent=function(e,i,n,o,r,s,a,l,h){var u=t.EventFactory.newEvent("overview");return u.subtype=e,u.newX1=i,u.newX2=n,u.newY1=o,u.newY2=r,u.oldX1=s,u.oldX2=a,u.oldY1=l,u.oldY2=h,u},t.EventFactory.newChartDrillEvent=function(e,i,n){var o=t.EventFactory.newDrillEvent(e);return o.series=i,o.group=n,o},t.EventFactory.newChartSelectionEvent=function(e,i,n,o,r,s,a,l,h,u){var c=t.EventFactory.newSelectionEvent(e);return c.complete=i,c.xMin=n,c.xMax=o,c.startGroup=r,c.endGroup=s,c.yMin=a,c.yMax=l,c.y2Min=h,c.y2Max=u,c},t.EventFactory.newChartViewportChangeEvent=function(e,i,n,o,r,s,a){var l=t.EventFactory.newEvent("viewportChange");return l.complete=e,l.xMin=i,l.xMax=n,l.startGroup=o,l.endGroup=r,l.yMin=s,l.yMax=a,l},t.EventFactory.newMarqueeEvent=function(e,i,n,o,r,s){var a=t.EventFactory.newEvent("dvtMarquee");return a.subtype=e,a.x=i,a.y=n,a.w=o,a.h=r,a.ctrlKey=s,a},t.EventFactory.newExpandCollapseEvent=function(e,i,n,o,r){var s=t.EventFactory.newEvent(e,i);return s.expanded=r,s.data=n,s.component=o,s},t.EventFactory.newTreeDrillEvent=function(e,i,n){var o=t.EventFactory.newDrillEvent(e);return o.data=i,o.component=n,o},t.EventFactory.newBreadcrumbsDrillEvent=function(e){return t.EventFactory.newEvent("breadcrumbsDrill",e)},t.EventFactory.newSunburstRotationEvent=function(e,i){var n=t.EventFactory.newEvent("rotation");return n.complete=i,n.startAngle=e%360,n},t.EventFactory.newThematicMapViewportChangeEvent=function(e,i,n){var o=t.EventFactory.newEvent("viewportChange");return o.panX=e,o.panY=i,o.zoom=n,o},t.EventFactory.newTimelineViewportChangeEvent=function(e,i,n){var o=t.EventFactory.newEvent("viewportChange");return o.viewportStart=e,o.viewportEnd=i,o.minorAxisScale=n,o},t.EventFactory.newGanttViewportChangeEvent=function(e,i,n,o){var r=t.EventFactory.newTimelineViewportChangeEvent(e,i,o);return r.majorAxisScale=n,r},t.EventFactory.newGanttMoveEvent=function(e,i,n,o,r,s,a){var l=t.EventFactory.newEvent("move");return l.taskContexts=e,l.value=i,l.start=n,l.end=o,l.baselineStart=r,l.baselineEnd=s,l.rowContext=a,l},t.EventFactory.newGanttResizeEvent=function(e,i,n,o,r){var s=t.EventFactory.newEvent("resize");return s.taskContexts=e,s.value=i,s.start=n,s.end=o,s.typeDetail=r,s},t.EventFactory.newGanttScrollPositionChangeEvent=function(e,i,n){var o=t.EventFactory.newEvent("scrollPositionChange");return o.y=e,o.rowIndex=i,o.offsetY=n,o},t.EventFactory.newGanttExpandCollapseEvent=function(e,i,n,o,r){var s=t.EventFactory.newEvent(e,i);return s.rowData=n,s.itemData=o,s.expanded=r,s},t.EventFactory.newTreemapIsolateEvent=function(e){return t.EventFactory.newEvent("isolate",e)},t.EventFactory.newPanEvent=function(e,i,n,o,r,s){var a=t.EventFactory.newEvent("dvtPan");return a.subtype=e,a.newX=i,a.newY=n,a.oldX=o,a.oldY=r,a.animator=s,a},t.EventFactory.newZoomEvent=function(e,i,n,o,r,s,a){var l=t.EventFactory.newEvent("dvtZoom");return l.subtype=e,l.newZoom=i,l.oldZoom=n,l.animator=o,l.centerPoint=r,l.tx=s,l.ty=a,l},t.EventFactory.newTimelineOverviewEvent=function(e,i,n){var o=t.EventFactory.newEvent("timeline");return o.subtype=e,o.itemId=i,o.isMultiSelect=n,o};var _={};t.Obj.createSubclass(_,t.Obj),_.lineLinear=function(t){return t.join("L")},_.lineCardinalClosed=function(t,e){return t.length<3?_.lineLinear(t):t[0]+_.lineHermite((t.push(t[0]),t),_.lineCardinalTangents([t[t.length-2]].concat(t,[t[1]]),e))},_.lineCardinal=function(t,e){return t.length<3?_.lineLinear(t):t[0]+_.lineHermite(t,_.lineCardinalTangents(t,e))},_.lineHermite=function(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return _.lineLinear(t);var i=t.length!=e.length,n="",o=t[0],r=t[1],s=e[0],a=s,l=1;if(i&&(n+="Q"+Math.round(r[0]-2*s[0]/3)+","+Math.round(r[1]-2*s[1]/3)+","+Math.round(r[0])+","+Math.round(r[1]),o=t[1],l=2),e.length>1){a=e[1],r=t[l],l++,n+="C"+Math.round(o[0]+s[0])+","+Math.round(o[1]+s[1])+","+Math.round(r[0]-a[0])+","+Math.round(r[1]-a[1])+","+Math.round(r[0])+","+Math.round(r[1]);for(var h=2;h<e.length;h++,l++)r=t[l],a=e[h],n+="S"+Math.round(r[0]-a[0])+","+Math.round(r[1]-a[1])+","+Math.round(r[0])+","+Math.round(r[1])}if(i){var u=t[l];n+="Q"+Math.round(r[0]+2*a[0]/3)+","+Math.round(r[1]+2*a[1]/3)+","+Math.round(u[0])+","+Math.round(u[1])}return n},_.lineCardinalTangents=function(t,e){for(var i,n=[],o=(1-e)/2,r=t[0],s=t[1],a=1,l=t.length;++a<l;)i=r,r=s,s=t[a],n.push([o*(s[0]-i[0]),o*(s[1]-i[1])]);return n},_.lineSlope=function(t,e){return(e[1]-t[1])/(e[0]-t[0])},_.lineFiniteDifferences=function(t){for(var e=0,i=t.length-1,n=[],o=t[0],r=t[1],s=n[0]=_.lineSlope(o,r);++e<i;)n[e]=(s+(s=_.lineSlope(o=r,r=t[e+1])))/2;return n[e]=s,n},_.lineMonotoneTangents=function(t,e){e&&(t=_._rotatePoints(t));for(var i,n,o,r,s=[],a=_.lineFiniteDifferences(t),l=-1,h=t.length-1;++l<h;)i=_.lineSlope(t[l],t[l+1]),Math.abs(i)<1e-6?a[l]=a[l+1]=0:(r=(n=a[l]/i)*n+(o=a[l+1]/i)*o)>9&&(r=3*i/Math.sqrt(r),a[l]=r*n,a[l+1]=r*o);for(l=-1;++l<=h;)r=(t[Math.min(h,l+1)][0]-t[Math.max(0,l-1)][0])/(6*(1+a[l]*a[l])),s.push([r||0,a[l]*r||0]);return e&&(s=_._rotatePoints(s)),s},_.lineMonotone=function(t,e){return t.length<3?_.lineLinear(t):t[0]+_.lineHermite(t,_.lineMonotoneTangents(t,e))},_._rotatePoints=function(t){for(var e=[],i=0;i<t.length;i++)e.push([t[i][1],t[i][0]]);return e},t.DisplayableUtils=function(){},t.Obj.createSubclass(t.DisplayableUtils,t.Obj),t.DisplayableUtils.getDimensionsForced=function(t,e){var i,n=e.getParent();n&&(i=n.getChildIndex(e));var o=t.getStage();o.addChild(e);var r=e.getDimensions();return o.removeChild(e),n&&n.addChildAt(e,i),r},t.DisplayableUtils.getDimForced=function(e,i){if(i._dim||!e)return i._dim;var n=t.DisplayableUtils.getDimensionsForced(e,i);return t.DisplayableUtils._setDimForced(i,n),n},t.DisplayableUtils._setDimForced=function(t,e){t._dim=e},t.PathUtils={},t.Obj.createSubclass(t.PathUtils,t.Obj),t.PathUtils.SPLINE_TYPE_MONOTONE_VERTICAL="mv",t.PathUtils.SPLINE_TYPE_MONOTONE_HORIZONTAL="mh",t.PathUtils.SPLINE_TYPE_CARDINAL_CLOSED="cc",t.PathUtils.SPLINE_TYPE_CARDINAL="c",t.PathUtils.moveTo=function(t,e){return"M"+t+","+e},t.PathUtils.lineTo=function(t,e){return"L"+t+","+e},t.PathUtils.quadTo=function(t,e,i,n){return"Q"+t+","+e+","+i+","+n},t.PathUtils.horizontalLineTo=function(t){return"H"+t},t.PathUtils.verticalLineTo=function(t){return"V"+t},t.PathUtils.cubicTo=function(t,e,i,n,o,r){return"C"+t+","+e+","+i+","+n+","+o+","+r},t.PathUtils.arcTo=function(t,e,i,n,o,r){var s="A"+t+","+e+",0,";return i>Math.PI?s+="1,":s+="0,",s+=n+","+o+","+r},t.PathUtils.closePath=function(){return"Z"},t.PathUtils.roundedRectangle=function(e,i,n,o,r,s,a,l){return t.PathUtils._roundedRectangle(e,i,n,o,r,r,s,s,a,a,l,l)},t.PathUtils.rectangleWithBorderRadius=function(e,i,n,o,r,s,a){var l=a,h=a,u=a,c=a,p=a,_=a,g=a,d=a;if(r)if(-1!=r.indexOf("/")){var S=r.split("/"),f=S[0].trim().split(/\s+/),y=S[1].trim().split(/\s+/);1==f.length?l=u=p=g=f[0]:2==f.length?(l=p=f[0],u=g=f[1]):3==f.length?(l=f[0],u=g=f[1],p=f[2]):4==f.length&&(l=f[0],u=f[1],p=f[2],g=f[3]),1==y.length?h=c=_=d=y[0]:2==y.length?(h=_=y[0],c=d=y[1]):3==y.length?(h=y[0],c=d=y[1],_=y[2]):4==y.length&&(h=y[0],c=y[1],_=y[2],d=y[3])}else if("auto"!=r){var T=r.trim().split(/\s+/);1==T.length?l=u=p=g=h=c=_=d=T[0]:2==T.length?(l=p=h=_=T[0],u=g=c=d=T[1]):3==T.length?(l=h=T[0],u=g=c=d=T[1],p=_=T[2]):4==T.length&&(l=h=T[0],u=c=T[1],p=_=T[2],g=d=T[3])}return r&&"0"!=r?t.PathUtils._roundedRectangle(e,i,n,o,t.PathUtils._parseBorderRadiusItem(l,s),t.PathUtils._parseBorderRadiusItem(h,s),t.PathUtils._parseBorderRadiusItem(u,s),t.PathUtils._parseBorderRadiusItem(c,s),t.PathUtils._parseBorderRadiusItem(p,s),t.PathUtils._parseBorderRadiusItem(_,s),t.PathUtils._parseBorderRadiusItem(g,s),t.PathUtils._parseBorderRadiusItem(d,s)):t.PathUtils._rectangle(e,i,n,o)},t.PathUtils._parseBorderRadiusItem=function(t,e){var i=Math.min(parseFloat(t),e/2);return-1!=t.indexOf("%")&&(i=.01*Math.min(50,parseFloat(t))*e),i},t.PathUtils._roundedRectangle=function(e,i,n,o,r,s,a,l,h,u,c,p){return s=Math.min(s,.5*o),l=Math.min(l,.5*o),u=Math.min(u,.5*o),p=Math.min(p,.5*o),r=Math.min(r,.5*n),a=Math.min(a,.5*n),h=Math.min(h,.5*n),c=Math.min(c,.5*n),t.PathUtils.moveTo(e+r,i)+t.PathUtils.lineTo(e+n-a,i)+t.PathUtils.arcTo(a,l,Math.PI/2,1,e+n,i+l)+t.PathUtils.lineTo(e+n,i+o-u)+t.PathUtils.arcTo(h,u,Math.PI/2,1,e+n-h,i+o)+t.PathUtils.lineTo(e+c,i+o)+t.PathUtils.arcTo(c,p,Math.PI/2,1,e,i+o-p)+t.PathUtils.lineTo(e,i+s)+t.PathUtils.arcTo(r,s,Math.PI/2,1,e+r,i)+t.PathUtils.closePath()},t.PathUtils.polyline=function(e,i){if(e.length<2)return"";for(var n=i?t.PathUtils.lineTo(e[0],e[1]):t.PathUtils.moveTo(e[0],e[1]),o=2;o<e.length;o+=2)n+=t.PathUtils.lineTo(e[o],e[o+1]);return n},t.PathUtils.curveThroughPoints=function(e,i,n){if(0==e.length)return"";for(var o=[],r=0;r<e.length;r+=2)o.push([e[r],e[r+1]]);var s=i?"L":"M";return n==t.PathUtils.SPLINE_TYPE_MONOTONE_VERTICAL?s+_.lineMonotone(o,!1):n==t.PathUtils.SPLINE_TYPE_MONOTONE_HORIZONTAL?s+_.lineMonotone(o,!0):n==t.PathUtils.SPLINE_TYPE_CARDINAL_CLOSED?s+_.lineCardinalClosed(o,.7):s+_.lineCardinal(o,.7)},t.PathUtils.createPathArray=function(t){if(!t)return null;var e,i=(t=t.replace(/([0-9])([\-])/g,"$1 $2")).replace(/([mlqhvzcast])/gi,",$1,").split(/[ ,]/g),n=i.length;for(e=0;e<n;e++){var o=i[e];o?isNaN(o)||(i[e]=parseFloat(o)):(i.splice(e,1),e--,n--)}return i},t.PathUtils.getDimensions=function(e){if(!e||!e.length)return new t.Rectangle;var i,n,o,r,s,a,l,h,u,c,p,_,g=e.length,d=!0,S=Number.MAX_VALUE,f=-1*Number.MAX_VALUE,y=Number.MAX_VALUE,T=-1*Number.MAX_VALUE,v=[];for(c=0;c<g;c++){o=!1;var m=0;switch(p=0,e[c]){case"m":o=!0;case"M":do{r=e[c+1],s=e[c+2],d?d=!1:o&&(r+=i,s+=n),i=r,n=s,v[p++]=r,v[p++]=s,m++,c+=2}while(!isNaN(e[c+1]));break;case"c":o=!0;case"C":do{r=e[c+1],s=e[c+2],a=e[c+3],l=e[c+4],h=e[c+5],u=e[c+6],o&&(r+=i,s+=n,a+=i,l+=n,h+=i,u+=n),i=h,n=u,v[p++]=h,v[p++]=u,m++,c+=6}while(!isNaN(e[c+1]));break;case"q":o=!0;case"Q":do{r=e[c+1],s=e[c+2],a=e[c+3],l=e[c+4],o&&(r+=i,s+=n,a+=i,l+=n),i=a,n=l,v[p++]=a,v[p++]=l,m++,c+=4}while(!isNaN(e[c+1]));break;case"l":o=!0;case"L":do{r=e[c+1],s=e[c+2],o&&(r+=i,s+=n),i=r,n=s,v[p++]=r,v[p++]=s,m++,c+=2}while(!isNaN(e[c+1]));break;case"h":o=!0;case"H":do{r=e[c+1],o&&(r+=i),i=r,v[p++]=r,v[p++]=n,m++,c+=1}while(!isNaN(e[c+1]));break;case"v":o=!0;case"V":do{s=e[c+1],o&&(s+=n),n=s,v[p++]=i,v[p++]=s,m++,c+=1}while(!isNaN(e[c+1]))}for(p=0,_=0;_<m;_++)r=v[p++],s=v[p++],S=Math.min(S,r),f=Math.max(f,r),y=Math.min(y,s),T=Math.max(T,s)}return new t.Rectangle(S,y,Math.abs(f-S),Math.abs(T-y))},t.PathUtils.getPathString=function(t){for(var e="",i=t.length,n=0;n<i;n++)null!=t[n]&&(e+=(n>0?" ":"")+t[n]);return e},t.PathUtils.transformPath=function(t,e,i,n,o){if(t){for(var r,s="",a="",l=0;l<t.length;l++){"string"==typeof t[l]&&(r=(a=t[l])===a.toUpperCase(),s+=a+" ");for(var h=[];l<t.length-1&&"number"==typeof t[l+1];)l++,h.push(t[l]);if("A"===a.toUpperCase())for(var u=0;u<h.length;u+=7)s+=parseFloat(h[u])*n+" ",s+=parseFloat(h[u+1])*o+" ",s+=h[u+2]+" ",s+=h[u+3]+" ",s+=h[u+4]+" ",s+=parseFloat(h[u+5])*n+(r?e:0)+" ",s+=parseFloat(h[u+6])*o+(r?i:0)+" ";else{var c=[],p=[];"H"===a.toUpperCase()?(c.push(n),p.push(r?e:0)):"V"===a.toUpperCase()?(c.push(o),p.push(r?i:0)):(c.push(n),c.push(o),p.push(r?e:0),p.push(r?i:0));for(u=0;u<h.length;u++){var _=c[u%c.length],g=p[u%p.length];s+=parseFloat(h[u])*_+g+" "}}}return s}},t.PathUtils._fitsInScale=function(t,e,i){return Math.abs(t)>i||Math.abs(e)>i},t.PathUtils.simplifyPath=function(e,i){for(var n,o,r="",s="",a=0,l=0,h=0,u=0,c=0,p=0;p<e.length;p++)if(isNaN(e[p]))"Z"!=(n=e[p])&&"z"!=n||(o=n,s+=n,c>0&&(r+=s,h=0,u=0),s="",c=0,a=0,l=0);else switch(n){case"M":h=0,u=0;case"m":s=s+n+(h+=e[p])+" "+(u+=e[p+1]),o=n,p++;break;case"l":a+=e[p],l+=e[p+1],t.PathUtils._fitsInScale(a,l,i)&&(o!=n?(o=n,s+=n):s+=" ",s=s+a+" "+l,a=0,l=0,c++),p++;break;case"h":case"v":"h"==n?a+=e[p]:l+=e[p],t.PathUtils._fitsInScale(a,l,i)&&(0!=a&&0!=l?("l"!=o?(o="l",s+="l"):s+=" ",s=s+a+" "+l):(o=n,s=s+n+("h"==n?a:l)),a=0,l=0,c++)}return r},t.PathUtils._rectangle=function(e,i,n,o){return t.PathUtils.moveTo(e,i)+t.PathUtils.horizontalLineTo(e+n)+t.PathUtils.verticalLineTo(i+o)+t.PathUtils.horizontalLineTo(e)+t.PathUtils.closePath()},t.PolygonUtils={},t.Obj.createSubclass(t.PolygonUtils,t.Obj),t.PolygonUtils.getDimensions=function(e){if(!e||0===e.length)return new t.Rectangle;for(var i,n,o=Number.MAX_VALUE,r=-1*Number.MAX_VALUE,s=Number.MAX_VALUE,a=-1*Number.MAX_VALUE,l=e.length,h=0;h<l;h++)i=e[h++],n=e[h],o=Math.min(o,i),r=Math.max(r,i),s=Math.min(s,n),a=Math.max(a,n);return new t.Rectangle(o,s,Math.abs(r-o),Math.abs(a-s))},t.PolygonUtils.getRegularPolygonPoints=function(t,e,i,n,o,r){for(var s,a=[],l=0;l<i;l++)s=o+l/i*2*Math.PI*(0==r?-1:1),a.push(t+n*Math.sin(s),e-n*Math.cos(s));return a},t.PolygonUtils.scale=function(t,e,i){for(var n=[],o=0;o<t.length-1;o+=2)n.push(t[o]*e),n.push(t[o+1]*i);return n},t.PolygonUtils.translate=function(t,e,i){for(var n=[],o=0;o<t.length-1;o+=2)n.push(t[o]+e),n.push(t[o+1]+i);return n},t.TextUtils={},t.Obj.createSubclass(t.TextUtils,t.Obj),t.TextUtils._cachedTextWidth={},t.TextUtils._cachedRepTextDimensions={},t.TextUtils._canvasCtx=document.createElement("CANVAS").getContext("2d"),t.TextUtils.EMPTY_TEXT_BUFFER=2,t.TextUtils.getMaxTextDimensions=function(e){for(var i=0,n=0,o=0;o<e.length;o++)if(null!=e[o]){var r=e[o].getDimensions();i=Math.max(i,r.w),n=Math.max(n,r.h)}return new t.Dimension(i,n)},t.TextUtils.getMaxTextStringWidth=function(e,i,n){for(var o=0,r=Array.isArray(n),s=0;s<i.length;s++)if(null!=i[s]&&0!=i[s].length){var a=n?r?n[s]:n:null,l=t.TextUtils.getTextStringWidth(e,i[s],a);l>o&&(o=l)}return o},t.TextUtils.getTextStringDimensions=function(e,i,n){var o=t.TextUtils._getRepresentativeDimensions(e,n);return new t.Rectangle(0,o.y,t.TextUtils.getTextStringWidth(e,i,n),o.h)},t.TextUtils.getTextStringWidth=function(e,i,n){if(null==i||0==i.length)return 0;var o=i+(null!=n?n.hashCodeForTextMeasurement():""),r=t.TextUtils._cachedTextWidth[o];if(null!=r)return r;var s=t.TextUtils._getCanvasTextWidth(e,i,n);return t.TextUtils._cachedTextWidth[o]=s,s},t.TextUtils.getTextStringHeight=function(e,i){return t.TextUtils._getRepresentativeDimensions(e,i).h},t.TextUtils.fitText=function(e,i,n,o,r,s){var a=e.getTextString();if(e instanceof t.OutputText){var l=t.TextUtils.getTextStringDimensions(e.getCtx(),a,e.getCSSStyle());if(l.h>n)return s||e.removeFromParent(),!1;if(l.w<=i)return o.addChild(e),!0}return o.addChild(e),r="number"!=typeof r||null==r?1:r,e instanceof t.MultilineText||e instanceof t.BackgroundMultilineText?e.__fitText(i,n,r):(e instanceof t.OutputText||e instanceof t.BackgroundOutputText?t.TextUtils._truncateOutputText(e,i,r):e.setMaxWidth(i,r),""==e.getTextString()?(s||o.removeChild(e),e.setTextString(a),!1):(e.getTextString()!=a&&e.setUntruncatedTextString(a),!0))},t.TextUtils.renderEmptyText=function(e,i,n,o,r){var s=new t.MultilineText(e.getCtx(),i,n.x+n.w/2,n.y+n.h/2);r&&s.setCSSStyle(r),s.alignCenter(),s.alignMiddle();var a=n.w-2*t.TextUtils.EMPTY_TEXT_BUFFER;return t.TextUtils.fitText(s,a,1/0,e,0)&&(s.isTruncated()&&o.associate(s,new t.SimpleObjPeer(s.getUntruncatedTextString())),s.setAriaProperty("hidden",null)),s},t.TextUtils.centerTextVertically=function(e,i){"ie"===t.Agent.browser||"edge"===t.Agent.browser?(e.setY(i),e.alignMiddle()):e.setY(i-e.getDimensions().h/2)},t.TextUtils._truncateOutputText=function(e,i,n){if(i<=0)e.setTextString("");else{var o=e.getDimensions();if(!(o.w<=i)){var r=e.getTextString(),s=r.length,a=o.w/t.TextUtils._getTextLength(r),l=Math.max(Math.floor(i/a)-2,n),h=r.substring(0,l)+t.OutputText.ELLIPSIS;e.setTextString(h);for(var u=h,c=o=e.getDimensions();o.w<i&&!(l>=r.length);){var p=i-o.w,_=Math.min(s-l,Math.max(Math.floor(p/a),1));if(l+=_,h=r.substring(0,l)+t.OutputText.ELLIPSIS,e.setTextString(h),o=e.getDimensions(),1==_&&o.w>i){e.setTextString(u),o=c;break}u=h,c=o}for(;o.w>i;){if(l<=n){e.setTextString("");break}l-=1,h=r.substring(0,l)+t.OutputText.ELLIPSIS,e.setTextString(h),o=e.getDimensions()}}}},t.TextUtils._getTextLength=function(t){return(t=t.replace(/[\u200A\u200B\u200C\u200D\u200E\u200F\uFEFF]/g,"")).length},t.TextUtils._getRepresentativeDimensions=function(e,i){var n=null!=i?i.hashCodeForTextMeasurement():"",o=t.TextUtils._cachedRepTextDimensions[n];if(null==o){var r=new t.OutputText(e,t.OutputText.REPRESENTATIVE_TEXT);r.alignAuto(),r.setCSSStyle(i);var s=r.getCtx().getStage();s.addChild(r);var a=r.GetSvgDimensions();s.removeChild(r),o={x:a.x,y:a.y,w:.5*a.w,h:a.h},t.TextUtils._cachedRepTextDimensions[n]=o}return o},t.TextUtils.getBaselineTranslation=function(e){var i=e.getVertAlignment();if(i!=t.OutputText.V_ALIGN_AUTO){var n=t.TextUtils._getRepresentativeDimensions(e.getCtx(),e.getCSSStyle());if(i==t.OutputText.V_ALIGN_TOP)return-n.y;if(i==t.OutputText.V_ALIGN_MIDDLE)return-n.y-n.h/2;if(i==t.OutputText.V_ALIGN_CENTRAL)return-n.y/2;if(i==t.OutputText.V_ALIGN_BOTTOM)return-n.y-n.h}return 0},t.TextUtils._getCanvasTextWidth=function(e,i,n){var o=(n?n.getStyle("font-style"):null)||"normal",r=(n?n.getStyle("font-variant"):null)||"normal",s=(n?n.getStyle("font-weight"):null)||"normal",a=(n?n.getStyle("font-family"):null)||e.getDefaultFontFamily()||"",l=(n?n.getFontSize():null)||e.getDefaultFontSize()||"12px";isNaN(l)||(l+="px");var h=o+" "+r+" "+s+" "+l+" "+a;return t.TextUtils._configureCanvas(e,h),t.TextUtils._canvasCtx.measureText(i).width},t.TextUtils._configureCanvas=function(e,i){"ie"!==t.Agent.browser&&"edge"!==t.Agent.browser||(i=i.replace(/-apple-system(-\w+)*,?/g,""),t.TextUtils._canvasCtx.canvas.parentNode||(t.TextUtils._canvasCtx.canvas.style.display="none",e.getContainer().appendChild(t.TextUtils._canvasCtx.canvas))),t.TextUtils._canvasCtx.font=i},t.TextUtils.clearCaches=function(){t.TextUtils._cachedTextWidth={},t.TextUtils._cachedRepTextDimensions={}},t.TextUtils.getOptimalFontSize=function(e,i,n,o){n=n?n.clone():new t.CSSStyle;for(var r=Math.max(Math.round(Math.min(o.w/i.length,o.h/2)),9);r<51;r+=1){n.setFontSize("font-size",r+"px",e);var s=t.TextUtils.getTextStringDimensions(e,i,n);if(s.w>o.w||s.h>o.h)return Math.min(r-1,50)+"px"}return"50px"},t.TextUtils.processAriaLabel=function(t){var e=t;return e&&(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/(<|&#60;)/g,"&lt;")).replace(/(>|&#62;)/g,"&gt;")).replace(/&lt;b&gt;/g,"")).replace(/&lt;\/b&gt;/g,"")).replace(/&lt;i&gt;/g,"")).replace(/&lt;\/i&gt;/g,"")).replace(/\n/g,"; ")).replace(/&#92;n/g,"; ")).replace(/&lt;br&gt;/g,"; ")).replace(/&lt;br\/&gt;/g,"; ")),e},t.SvgShapeUtils=function(){},t.Obj.createSubclass(t.SvgShapeUtils,t.Obj),t.SvgShapeUtils._uniqueSeed=0,t.SvgShapeUtils.addClipPath=function(e,i){var n=e.getId();if(!n)return!1;var o=i.getDefs();if(!o)return!1;for(var r=o.childNodes,s=r.length,a=0;a<s;a++){if(r[a].id===n)return!0}var l=t.SvgShapeUtils.createElement("clipPath",n);i.appendDefs(l);var h=e.getRegions();for(a=0;a<h.length;a++){var u=h[a];if(u){var c=null;u.type===t.ClipPath.RECT?(c=t.SvgShapeUtils.createElement("rect"),t.ToolkitUtils.setAttrNullNS(c,"x",u.x),t.ToolkitUtils.setAttrNullNS(c,"y",u.y),t.ToolkitUtils.setAttrNullNS(c,"width",u.w),t.ToolkitUtils.setAttrNullNS(c,"height",u.h),u.rx&&t.ToolkitUtils.setAttrNullNS(c,"rx",u.rx),u.ry&&t.ToolkitUtils.setAttrNullNS(c,"ry",u.ry)):u.type===t.ClipPath.PATH?(c=t.SvgShapeUtils.createElement("path"),t.ToolkitUtils.setAttrNullNS(c,"d",u.d)):u.type===t.ClipPath.POLYGON?(c=t.SvgShapeUtils.createElement("polygon"),t.ToolkitUtils.setAttrNullNS(c,"points",u.points)):u.type===t.ClipPath.ELLIPSE?(c=t.SvgShapeUtils.createElement("ellipse"),t.ToolkitUtils.setAttrNullNS(c,"cx",u.cx),t.ToolkitUtils.setAttrNullNS(c,"cy",u.cy),t.ToolkitUtils.setAttrNullNS(c,"rx",u.rx),t.ToolkitUtils.setAttrNullNS(c,"ry",u.ry)):u.type===t.ClipPath.CIRCLE&&(c=t.SvgShapeUtils.createElement("circle"),t.ToolkitUtils.setAttrNullNS(c,"cx",u.cx),t.ToolkitUtils.setAttrNullNS(c,"cy",u.cy),t.ToolkitUtils.setAttrNullNS(c,"r",u.r)),c&&t.ToolkitUtils.appendChildElem(l,c)}}return!0},t.SvgShapeUtils.addMask=function(e,i){var n=e.getId();if(!n)return!1;var o=i.getDefs();if(!o)return!1;for(var r=o.childNodes,s=r.length,a=0;a<s;a++){if(r[a].id===n)return!0}var l=t.SvgShapeUtils.createElement("mask",n);i.appendDefs(l);var h=e.getGradient(),u=t.SvgShapeUtils.addSpecialFill(h,i),c=e.getBounds(),p=t.SvgShapeUtils.createElement("rect");return t.ToolkitUtils.setAttrNullNS(p,"x",c.x),t.ToolkitUtils.setAttrNullNS(p,"y",c.y),t.ToolkitUtils.setAttrNullNS(p,"width",c.w),t.ToolkitUtils.setAttrNullNS(p,"height",c.h),t.ToolkitUtils.setAttrNullNS(p,"fill",t.ToolkitUtils.getUrlById(u)),t.ToolkitUtils.appendChildElem(l,p),!0},t.SvgShapeUtils.addSpecialFill=function(e,i){if(!e._defPresent){var n=e._defElem;n||(e instanceof t.GradientFill?(e._id=t.SvgShapeUtils.getUniqueId("Gr"),n=h.createElem(e,e._id)):e instanceof t.PatternFill&&(e._id=t.SvgShapeUtils.getUniqueId("pat"),n=u.createElem(e,e._id))),e._defElem=n,i.appendDefs(n),e._defPresent=!0}return e._id},t.SvgShapeUtils.createElement=function(e,i){var n=document.createElementNS(t.ToolkitUtils.SVG_NS,e);return i&&t.ToolkitUtils.setAttrNullNS(n,"id",i),n},t.SvgShapeUtils.getUniqueId=function(e){return(e||"$")+t.SvgShapeUtils._uniqueSeed++},t.SvgShapeUtils.convertPointsArray=function(t){for(var e=t.length,i="",n=0;n<e;n++)n>0&&(i+=" "),i+=t[n];return i},t.Displayable=function(){},t.Obj.createSubclass(t.Displayable,t.Obj),t.Displayable._ATTRS_TRANSFERABLE_TO_OUTER=["clip-path"],t.Displayable.SET_ID_ON_DOM=!1,t.Displayable.prototype.Init=function(e,i,n){this._context=e,this._elem=t.SvgShapeUtils.createElement(i),this._elem._obj=this,this.setId(n),this._bVisible=!0,this._cursor=null,this._alpha=1,this._matrix=null,this._ariaProperties={},this._properties={}},t.Displayable.prototype.getCtx=function(){return this._context},t.Displayable.prototype.getElem=function(){return this._elem},t.Displayable.prototype.getOuterElem=function(){return this._outerElem?this._outerElem:this.getElem()},t.Displayable.prototype.getId=function(){return this._id},t.Displayable.prototype.setId=function(e,i){this._id!==e&&(e&&0===e.length&&(e=null),this._id=e,(t.Displayable.SET_ID_ON_DOM||i)&&(e?t.ToolkitUtils.setAttrNullNS(this.getOuterElem(),"id",e):t.ToolkitUtils.removeAttrNullNS(this.getOuterElem(),"id")))},t.Displayable.prototype.getParent=function(){return this._parent},t.Displayable.prototype.setParent=function(t){this._parent=t},t.Displayable.prototype.isDescendantOf=function(t){return!(!t||!this.getParent())&&(this.getParent()==t||this.getParent().isDescendantOf(t))},t.Displayable.prototype.setPixelHinting=function(e){e?t.ToolkitUtils.setAttrNullNS(this._elem,"shape-rendering","crispEdges"):t.ToolkitUtils.removeAttrNullNS(this._elem,"shape-rendering")},t.Displayable.prototype.getVisible=function(){return this._bVisible},t.Displayable.prototype.setVisible=function(e){if(this._bVisible!==e){this._bVisible=e;var i=this.getElem();e?t.ToolkitUtils.removeAttrNullNS(i,"visibility"):t.ToolkitUtils.setAttrNullNS(i,"visibility","hidden")}},t.Displayable.prototype.setClipPath=function(e){if(e){if(this.ClipPathId==e.getId())return;this.ClipPathId&&this._context.decreaseGlobalDefReference(this.ClipPathId),this.ClipPathId=e.getId(),this._context.increaseGlobalDefReference(this.ClipPathId),!this._outerElem&&this._matrix&&this._createOuterGroupElem();var i=e.getId();if(i){var n=this.getCtx();t.SvgShapeUtils.addClipPath(e,n)&&t.ToolkitUtils.setAttrNullNS(this.getOuterElem(),"clip-path",t.ToolkitUtils.getUrlById(i))}}else if(!e&&this.ClipPathId)return this._context.decreaseGlobalDefReference(this.ClipPathId),this.ClipPathId=null,void t.ToolkitUtils.removeAttrNullNS(this.getOuterElem(),"clip-path")},t.Displayable.prototype.setMask=function(e){if(e){if(this.MaskId==e.getId())return;this.MaskId&&this._context.decreaseGlobalDefReference(this.MaskId),this.MaskId=e.getId(),this._context.increaseGlobalDefReference(this.MaskId),!this._outerElem&&this._matrix&&this._createOuterGroupElem();var i=e.getId();if(i){var n=this.getCtx();t.SvgShapeUtils.addMask(e,n)&&t.ToolkitUtils.setAttrNullNS(this.getOuterElem(),"mask",t.ToolkitUtils.getUrlById(i))}}else if(!e&&this.MaskId)return this._context.decreaseGlobalDefReference(this.MaskId),this.MaskId=null,void t.ToolkitUtils.removeAttrNullNS(this.getOuterElem(),"mask")},t.Displayable.prototype.ConvertCoordSpaceRect=function(e,i){if(!i||i===this)return e;var n=this.localToStage(new t.Point(e.x,e.y)),o=this.localToStage(new t.Point(e.x+e.w,e.y+e.h)),r=i.stageToLocal(n),s=i.stageToLocal(o);return new t.Rectangle(Math.min(r.x,s.x),Math.min(r.y,s.y),Math.abs(s.x-r.x),Math.abs(s.y-r.y))},t.Displayable.prototype.GetSvgDimensions=function(){try{var e=this.getElem().getBBox()}catch(t){return null}return new t.Rectangle(e.x,e.y,e.width,e.height)},t.Displayable.prototype.getDimensions=function(t){var e=this.GetSvgDimensions();return this.ConvertCoordSpaceRect(e,t)},t.Displayable.prototype.getDimensionsWithStroke=function(t){var e=this.GetDimensionsWithStroke();return this.ConvertCoordSpaceRect(e,t)},t.Displayable.prototype.GetDimensionsWithStroke=function(t){var e=this.GetElemDimensionsWithStroke();return t&&t!==this?this.ConvertCoordSpaceRect(e,t):e},t.Displayable.prototype.GetElemDimensionsWithStroke=function(){return this.GetSvgDimensions()},t.Displayable.HasAttributes=function(e,i){if(i)for(var n=i.length,o=0;o<n;o++)if(t.ToolkitUtils.getAttrNullNS(e,i[o]))return!0;return!1},t.Displayable.TransferAttributes=function(e,i,n){if(n)for(var o,r,s=n.length,a=0;a<s;a++)o=n[a],(r=t.ToolkitUtils.getAttrNullNS(e,o))&&(t.ToolkitUtils.removeAttrNullNS(e,o),t.ToolkitUtils.setAttrNullNS(i,o,r),"ie"!==t.Agent.browser&&"edge"!==t.Agent.browser||t.ToolkitUtils.setAttrNullNS(e,o,null))},t.Displayable.prototype._createOuterGroupElem=function(){if(!this._outerElem){var e=this._id?this._id+"_outer":null;this._outerElem=t.SvgShapeUtils.createElement("g",e);var i=this.getParent();if(i)i.getElem().replaceChild(this._outerElem,this.getElem());t.ToolkitUtils.appendChildElem(this._outerElem,this.getElem()),t.Displayable.TransferAttributes(this.getElem(),this._outerElem,t.Displayable._ATTRS_TRANSFERABLE_TO_OUTER)}},t.Displayable.prototype.getCSSStyle=function(){return this._cssStyle},t.Displayable.prototype.setCSSStyle=function(t){this._cssStyle=t},t.Displayable.prototype.setCursor=function(e){this._cursor=e,e?t.ToolkitUtils.setAttrNullNS(this.getElem(),"cursor",e):t.ToolkitUtils.removeAttrNullNS(this.getElem(),"cursor")},t.Displayable.prototype.getCursor=function(){return this._cursor},t.Displayable.prototype.setMouseEnabled=function(e){var i=e?"visiblePainted":"none";t.ToolkitUtils.setAttrNullNS(this.getElem(),"pointer-events",i)},t.Displayable.prototype.getAlpha=function(){return this._alpha},t.Displayable.prototype.setAlpha=function(e){e<1e-5&&(e=0),e!==this._alpha&&(this._alpha=e,t.ToolkitUtils.setAttrNullNS(this.getElem(),"opacity",this._alpha,1))},t.Displayable.prototype.applyAriaProperties=function(){if(t.Agent.deferAriaCreation())for(var e in this._ariaRole&&this._setAriaRole(this._ariaRole),this._ariaProperties)this._setAriaProperty(e,this._ariaProperties[e])},t.Displayable.prototype.setAriaRole=function(e,i){t.Agent.deferAriaCreation()&&!i||this._setAriaRole(e),this._ariaRole=e},t.Displayable.prototype._setAriaRole=function(e){var i=this.GetAriaElem();e?t.ToolkitUtils.setAttrNullNS(i,"role",e):t.ToolkitUtils.removeAttrNullNS(i,"role")},t.Displayable.prototype.getAriaRole=function(){return this._ariaRole},t.Displayable.prototype.GetAriaElem=function(){return this.getElem()},t.Displayable.prototype.setAriaProperty=function(e,i,n){e&&(t.Agent.deferAriaCreation()&&!n||this._setAriaProperty(e,i),this._ariaProperties[e]=i)},t.Displayable.prototype._setAriaProperty=function(e,i){var n=this.GetAriaElem();null!=i&&""!==i?("label"==e&&(i=t.TextUtils.processAriaLabel(i)),t.ToolkitUtils.setAttrNullNS(n,"aria-"+e,i)):t.ToolkitUtils.removeAttrNullNS(n,"aria-"+e)},t.Displayable.prototype.getAriaProperty=function(t){return t?this._ariaProperties[t]:null},t.Displayable.prototype.stageToLocal=function(t){for(var e=this.getPathToStage(),i=t,n=e.length-1;n>=0;n--)i=e[n].getMatrix().invert().transformPoint(i);return i},t.Displayable.prototype.localToStage=function(t){for(var e=this.getPathToStage(),i=t,n=0;n<e.length;n++)i=e[n].getMatrix().transformPoint(i);return i},t.Displayable.prototype.getPathToStage=function(){for(var t=this,e=[];t;)e.push(t),t=t.getParent();return e},t.Displayable.prototype.removeFromParent=function(){this._parent&&this._parent.removeChild(this)},t.Displayable.prototype.destroy=function(){this.removeAllDrawEffects(),this.ClipPathId&&this.setClipPath(null)},t.Displayable.prototype.GetProperty=function(t){return this._properties[t]},t.Displayable.prototype.SetProperty=function(t,e){return e!==this._properties[t]&&(this._properties[t]=e),this},t.Displayable.prototype.SetSvgProperty=function(e,i,n){return i!==this._properties[e]&&(this._properties[e]=i,t.ToolkitUtils.setAttrNullNS(this._elem,e,i,n),this.SvgPropertyChanged(e)),this},t.Displayable.defineProps=function(t,e){Object.keys(e).forEach(function(i){var n=e[i],o=n.name||i;o=o.charAt(0).toUpperCase()+o.slice(1),t.prototype["get"+o]=function(){return this.GetProperty(i)},t.prototype["set"+o]=function(t){return this.SetSvgProperty(i,t,n.value)}})},t.Displayable.prototype.SvgPropertyChanged=function(t){},t.Displayable.generateAriaLabel=function(e,i){var n=[],o=i&&i.length>0;return e&&n.push(e),o&&n.push(i.join(t.Context.ARIA_LABEL_STATE_DELIMITER)),n.join(t.Context.ARIA_LABEL_DESC_DELIMITER)},t.Displayable.prototype.addDrawEffect=function(t){this._drawEffects||(this._drawEffects=[]),this._drawEffects.push(t),this._applyDrawEffects()},t.Displayable.prototype.removeAllDrawEffects=function(){this._drawEffects&&(this._drawEffects=null,this._applyDrawEffects(this._drawEffects))},t.Displayable.prototype._applyDrawEffects=function(){var e=this._drawEffects;if(this._filter&&(t.ToolkitUtils.removeAttrNullNS(this.getOuterElem(),"filter"),this.getCtx().removeDefs(this._filter),this._filter=null),!this._outerElem&&this._matrix&&this._createOuterGroupElem(),e&&e.length>0&&(this._filter=l.createFilter(e,this),this._filter)){this.getCtx().appendDefs(this._filter);var i=t.ToolkitUtils.getAttrNullNS(this._filter,"id");t.ToolkitUtils.setAttrNullNS(this.getOuterElem(),"filter",t.ToolkitUtils.getUrlById(i))}},t.Displayable.prototype.addEvtListener=function(e,i,n,o){var r=t.ToolkitUtils.getUseCaptureFromOptions(n),s=this._getListeners(e,r,!0);s.push(i),s.push(o),this._addListener(e,n)},t.Displayable.prototype.removeEvtListener=function(e,i,n,o){var r=t.ToolkitUtils.getUseCaptureFromOptions(n),s=this._getListeners(e,r,!1);if(s)for(var a=0;a<s.length;a+=2)if(s[a]===i&&s[a+1]===o){s.splice(a,2);break}s&&s.length<=0&&this._removeListener(e,n)},t.Displayable.prototype.AddElemListener=function(e,i,n){t.ToolkitUtils.addDomEventListener(this.getElem(),e,i,n),e==t.TouchEvent.TOUCHEND&&t.ToolkitUtils.addDomEventListener(this.getElem(),t.TouchEvent.TOUCHCANCEL,i,n)},t.Displayable.prototype.FireListener=function(t,e){var i=this._getListeners(t.type,e,!1);if(i)for(var n=0;n<i.length;n+=2){var o=i[n+1];i[n]&&i[n].call(o,t)}},t.Displayable.prototype.fireKeyboardListener=function(t,e){this.FireListener(t,e)},t.Displayable.prototype._getListeners=function(t,e,i){if(!this._listenerObj){if(!i)return null;this._listenerObj={}}var n=t+"_"+!!e,o=this._listenerObj[n];return!o&&i&&(o=[],this._listenerObj[n]=o),o},t.Displayable.prototype._addListener=function(e,i){var n=t.ToolkitUtils.getUseCaptureFromOptions(i),o=this._getListener(n);if(e==t.KeyboardEvent.KEYUP||e==t.KeyboardEvent.KEYDOWN||e==t.KeyboardEvent.KEYPRESS||e==p.FOCUS||e==p.FOCUSIN||e==p.FOCUSOUT||e==p.BLUR){var r=this.getCtx().getStage().getSVGRoot().parentNode;if(!r)return;r._keyboardListeners||(r._keyboardListeners=[]),-1==r._keyboardListeners.indexOf(this)&&r._keyboardListeners.push(this),o=t.HtmlKeyboardListenerUtils.getListener(n),t.ToolkitUtils.addDomEventListener(r,e,o,i)}else this.AddElemListener(e,o,i)},t.Displayable.prototype._removeListener=function(e,i){var n=t.ToolkitUtils.getUseCaptureFromOptions(i),o=this._getListener(n);if(e==t.KeyboardEvent.KEYUP||e==t.KeyboardEvent.KEYDOWN||e==t.KeyboardEvent.KEYPRESS||e==p.FOCUS||e==p.FOCUSIN||e==p.FOCUSOUT||e==p.BLUR){var r=this.getCtx().getStage().getSVGRoot().parentNode;t.ToolkitUtils.removeDomEventListener(r,e,o,i);var s=r._keyboardListeners.indexOf(this);-1!==s&&r._keyboardListeners.splice(s,1)}else t.ToolkitUtils.removeDomEventListener(this.getElem(),e,o,i)},t.Displayable.prototype._getListener=function(t){var e=this;return t?(this._captureClosure||(this._captureClosure=function(t){e._captureListener(t)}),this._captureClosure):(this._bubbleClosure||(this._bubbleClosure=function(t){e._bubbleListener(t)}),this._bubbleClosure)},t.Displayable.prototype._shouldIgnoreEvent=function(e,i){var n=i?this._captureHoverItem:this._bubbleHoverItem;if(n){if(e.type===t.MouseEvent.MOUSEOVER)return n===e.target;if(e.type===t.MouseEvent.MOUSEOUT)return n===e.relatedTarget}return!1},t.Displayable.prototype._fireMissedEvent=function(e,i){if(e.type===t.MouseEvent.MOUSEOVER||t.MouseEvent.MOUSEOUT){var n=i?this._captureHoverItem:this._bubbleHoverItem;if(n&&n!==e.target){var o=t.DomEventFactory.newEvent(e,this.getCtx());o.modifyEventForIE(t.MouseEvent.MOUSEOUT,n),this.FireListener(o,i)}}},t.Displayable.prototype._bubbleListener=function(e){if("ie"===t.Agent.browser||"edge"===t.Agent.browser){if(this._shouldIgnoreEvent(e,!1))return;this._fireMissedEvent(e,!1),e.type==t.MouseEvent.MOUSEOVER?this._bubbleHoverItem=e.target:e.type==t.MouseEvent.MOUSEOUT&&(this._bubbleHoverItem=null)}var i=t.DomEventFactory.newEvent(e,this.getCtx());this.FireListener(i,!1)},t.Displayable.prototype._captureListener=function(e){if("ie"===t.Agent.browser||"edge"===t.Agent.browser){if(this._shouldIgnoreEvent(e,!0))return;this._fireMissedEvent(e,!0),e.type==t.MouseEvent.MOUSEOVER?this._captureHoverItem=e.target:e.type==t.MouseEvent.MOUSEOUT&&(this._captureHoverItem=null)}var i=t.DomEventFactory.newEvent(e,this.getCtx());this.FireListener(i,!0)},t.Displayable.prototype.getFill=function(){return this.GetProperty("fill")},t.Displayable.prototype.setFill=function(e){if(this._manageDefinitions(this.GetProperty("fill"),e),!e)return t.ToolkitUtils.setAttrNullNS(this._elem,"fill","none"),t.ToolkitUtils.removeAttrNullNS(this._elem,"fill-opacity"),void this.SetProperty("fill",null);if(this.GetProperty("fill")!==e){if(this.SetProperty("fill",e),e instanceof t.GradientFill||e instanceof t.PatternFill){var i=t.SvgShapeUtils.addSpecialFill(e,this.getCtx());t.ToolkitUtils.setAttrNullNS(this._elem,"fill",t.ToolkitUtils.getUrlById(i))}else{var n=t.ColorUtils.fixColorForPlatform(e.getColor(),e.getAlpha());n&&n.color&&(t.ToolkitUtils.setAttrNullNS(this._elem,"fill",n.color),null!=n.alpha&&t.ToolkitUtils.setAttrNullNS(this._elem,"fill-opacity",n.alpha,1))}this.UpdateSelectionEffect()}},t.Displayable.prototype.getClassName=function(){return this._className},t.Displayable.prototype.setClassName=function(e){return this._className&&!e?t.ToolkitUtils.removeAttrNullNS(this._elem,"class"):e&&t.ToolkitUtils.setAttrNullNS(this._elem,"class",e),this._className=e,this},t.Displayable.prototype.getStyle=function(){return this._style},t.Displayable.prototype.setStyle=function(e){return this._style&&t.ToolkitUtils.removeAttrNullNS(this._elem,"style"),e&&t.CSSStyle.applyCssObjectToElement(e,this._elem),this._style=e,this},t.Displayable.prototype.setSolidFill=function(e,i){this.setFill(new t.SolidFill(e,i))},t.Displayable.prototype.setInvisibleFill=function(){this.setFill(t.SolidFill.invisibleFill())},t.Displayable.prototype.getStroke=function(){return this._stroke},t.Displayable.prototype.setStroke=function(e){if(this._manageDefinitions(this._stroke,e),this._stroke=e,!e)return t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke"),t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-opacity"),t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-width"),t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-dasharray"),t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-dashoffset"),t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-linejoin"),t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-linecap"),void t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-miterlimit");var i=t.ColorUtils.fixColorForPlatform(e.getColor(),e.getAlpha());i&&i.color?(t.ToolkitUtils.setAttrNullNS(this._elem,"stroke",i.color),null!=i.alpha&&t.ToolkitUtils.setAttrNullNS(this._elem,"stroke-opacity",i.alpha,1)):(t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke"),t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-opacity")),t.ToolkitUtils.setAttrNullNS(this._elem,"stroke-width",e.getWidth(),1),e.isFixedWidth()&&t.ToolkitUtils.setAttrNullNS(this._elem,"vector-effect","non-scaling-stroke");var n=e.getDashProps();n&&n.dashArray?t.ToolkitUtils.setAttrNullNS(this._elem,"stroke-dasharray",n.dashArray):t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-dasharray"),n&&n.dashOffset?t.ToolkitUtils.setAttrNullNS(this._elem,"stroke-dashoffset",n.dashOffset):t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-dashoffset");var o=e.getLineProps();o&&o.lineJoin?t.ToolkitUtils.setAttrNullNS(this._elem,"stroke-linejoin",o.lineJoin):t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-linejoin"),o&&o.lineCap?t.ToolkitUtils.setAttrNullNS(this._elem,"stroke-linecap",o.lineCap):t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-linecap"),o&&o.miterLimit?t.ToolkitUtils.setAttrNullNS(this._elem,"stroke-miterlimit",o.miterLimit):t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-miterlimit")},t.Displayable.prototype.setSolidStroke=function(e,i,n){this.setStroke(new t.Stroke(e,i,n))},t.Displayable.prototype._manageDefinitions=function(t,e){t!=e&&(t&&(t._referenceCount--,0==t._referenceCount&&t._defElem&&(this.getCtx().removeDefs(t._defElem),t._defPresent=!1)),e&&(e._referenceCount||(e._referenceCount=0),e._referenceCount++))},t.Displayable.prototype.setTranslate=function(t,e){this._modifyMatrix(null,null,t,e)},t.Displayable.prototype.getTranslateX=function(){var e=this.getMatrix();return e?e._decompose()[t.Matrix._DECOMP_TX]:0},t.Displayable.prototype.setTranslateX=function(t){this._modifyMatrix(null,null,t)},t.Displayable.prototype.getTranslateY=function(){var e=this.getMatrix();return e?e._decompose()[t.Matrix._DECOMP_TY]:0},t.Displayable.prototype.setTranslateY=function(t){this._modifyMatrix(null,null,null,t)},t.Displayable.prototype.setScale=function(t,e){this._modifyMatrix(t,e)},t.Displayable.prototype.getScaleX=function(){var e=this.getMatrix();return e?e._decompose()[t.Matrix._DECOMP_SX]:1},t.Displayable.prototype.setScaleX=function(t){this._modifyMatrix(t)},t.Displayable.prototype.getScaleY=function(){var e=this.getMatrix();return e?e._decompose()[t.Matrix._DECOMP_SY]:1},t.Displayable.prototype.setScaleY=function(t){this._modifyMatrix(null,t)},t.Displayable.prototype.getRotation=function(){var e=this.getMatrix();return e?e._decompose()[t.Matrix._DECOMP_R]:0},t.Displayable.prototype.setRotation=function(t){this._modifyMatrix(null,null,null,null,t)},t.Displayable.prototype.getMatrix=function(){return this._matrix?this._matrix:new t.Matrix},t.Displayable.prototype.setMatrix=function(e){if(e&&e.isIdentity()&&(e=null),this._matrix!=e)if(this._matrix=e,!this._outerElem&&t.Displayable.HasAttributes(this.getElem(),t.Displayable._ATTRS_TRANSFERABLE_TO_OUTER)&&this._createOuterGroupElem(),this._matrix=e,e){var i="matrix("+e.getA()+","+e.getC()+","+e.getB()+","+e.getD()+","+e.getTx()+","+e.getTy()+")";t.ToolkitUtils.setAttrNullNS(this.getElem(),"transform",i,"matrix(1,0,0,1,0,0)")}else{t.ToolkitUtils.getAttrNullNS(this.getElem(),"transform")&&(t.ToolkitUtils.removeAttrNullNS(this.getElem(),"transform"),"ie"!==t.Agent.browser&&"edge"!==t.Agent.browser||t.ToolkitUtils.setAttrNullNS(this.getElem(),"transform",null))}},t.Displayable.prototype._modifyMatrix=function(e,i,n,o,r){var s=this.getMatrix()._decompose(),a=s[t.Matrix._DECOMP_SX],l=s[t.Matrix._DECOMP_SY],h=s[t.Matrix._DECOMP_TX],u=s[t.Matrix._DECOMP_TY],c=s[t.Matrix._DECOMP_R],p=!1;if(null!=e&&a!=e&&(s[t.Matrix._DECOMP_SX]=e,p=!0),null!=i&&l!=i&&(s[t.Matrix._DECOMP_SY]=i,p=!0),null!=n&&h!=n&&(s[t.Matrix._DECOMP_TX]=n,p=!0),null!=o&&u!=o&&(s[t.Matrix._DECOMP_TY]=o,p=!0),null!=r&&c!=r&&(s[t.Matrix._DECOMP_R]=r,p=!0),p){var _=this.getMatrix();this.setMatrix(_._recompose(s))}},t.Container=function(t,e){this.Init(t,"g",e)},t.Obj.createSubclass(t.Container,t.Displayable),t.Container.prototype.Init=function(e,i,n){this._bShapeContainer=this instanceof t.Shape,t.Container.superclass.Init.call(this,e,null!=i?i:"g",n),this._childGroupElem=null},t.Container.AttributesTransferableToGroup=["transform","opacity","visibility","pointer-events","clip-path","cursor"],t.Container.prototype.addChild=function(e){if(e){var i=e.getParent();i&&i.removeChild(e),this._arList||(this._arList=[]),e.setParent(this),this._bShapeContainer&&this.CreateChildGroupElem(!1);var n=this.getContainerElem();t.ToolkitUtils.appendChildElem(n,e.getOuterElem()),this._arList.push(e)}},t.Container.prototype.addChildAt=function(t,e){this.AddChildAt(t,e)},t.Container.prototype.AddChildAt=function(t,e){if(e>=0&&e<=this.getNumChildren()&&t){var i=this._findChild(t);if(i>=0&&i==e)return;var n=t.getParent();n&&n.removeChild(t),t.setParent(this),i>=0&&e==this.getNumChildren()+1&&e--;var o=e;this._bShapeContainer&&(this.CreateChildGroupElem(!1),o++);var r=this.getContainerElem(),s=r.childNodes[o];s||(s=null),r.insertBefore(t.getOuterElem(),s),this._arList||(this._arList=[]),this._arList.splice(e,0,t)}},t.Container.prototype.contains=function(t){return this._findChild(t)>=0},t.Container.prototype._findChild=function(t){var e=-1;if(this._arList)for(var i=this._arList.length,n=0;n<i;n++)if(this._arList[n]===t){e=n;break}return e},t.Container.prototype.getChildAfter=function(t){var e=null,i=this._findChild(t);return i>=0&&++i<this._arList.length&&(e=this._arList[i]),e},t.Container.prototype.getChildBefore=function(t){var e=null,i=this._findChild(t);return i>0&&(e=this._arList[--i]),e},t.Container.prototype.getChildAt=function(t){var e=null;return this._arList&&this._arList.length>t&&t>=0&&(e=this._arList[t]),e},t.Container.prototype.getChildIndex=function(t){return this._findChild(t)},t.Container.prototype.getNumChildren=function(){return this._arList?this._arList.length:0},t.Container.prototype.removeChild=function(t){var e=this._findChild(t);-1!==e&&this._removeObj(t,e)},t.Container.prototype.removeChildImpl=function(e){var i=e.getOuterElem(),n=e.getParent();i&&n&&this.getContainerElem().removeChild(i);if(!this._anchorElem&&this._bShapeContainer&&1===this.getNumChildren()){var o=this._childGroupElem,r=o?o.parentNode:null;r&&(t.Displayable.TransferAttributes(o,this._elem,this.GetAttributesTransferableToGroup()),r.replaceChild(this._elem,o),this._childGroupElem=null)}},t.Container.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e&&this._removeObj(e,t),e},t.Container.prototype.removeChildren=function(){if(this._arList)for(var t=this._arList;this.getNumChildren()>0;)this._removeObj(t[0],0)},t.Container.prototype._removeObj=function(t,e){this.removeChildImpl(t),t.setParent(null),this._arList.splice(e,1),0===this._arList.length&&(this._arList=null)},t.Container.prototype.destroy=function(){t.Container.superclass.destroy.call(this);for(var e=this.getNumChildren(),i=0;i<e;i++){this.getChildAt(i).destroy()}},t.Container.prototype.GetAttributesTransferableToGroup=function(){return t.Container.AttributesTransferableToGroup},t.Container.prototype.getElem=function(){return this._childGroupElem?this._childGroupElem:this._elem},t.Container.prototype.CreateChildGroupElem=function(e,i){if(this._childGroupElem||!i&&0!==this.getNumChildren())e&&this.removeChildren();else{var n=t.Displayable.SET_ID_ON_DOM&&this._id?this._id+"_g":null;this._childGroupElem=t.SvgShapeUtils.createElement("g",n);var o=this.getParent();o&&o.getElem().replaceChild(this._childGroupElem,this._elem),e||t.ToolkitUtils.appendChildElem(this._childGroupElem,this._elem),t.Displayable.TransferAttributes(this._elem,this._childGroupElem,this.GetAttributesTransferableToGroup()),this._elem._obj&&(this._childGroupElem._obj=this._elem._obj)}},t.Container.prototype.getDimensionsWithStroke=function(){for(var t=[],e=this.getNumChildren(),i=0;i<e;i++)t.push(this.getChildAt(i));for(var n=null;t.length>0;){var o=t.shift(),r=o.GetDimensionsWithStroke(this);if(r&&(n=n?n.getUnion(r):r),!o.includeChildSubtree||o.includeChildSubtree()){e=o.getNumChildren();for(i=0;i<e;i++)t.push(o.getChildAt(i))}}return n},t.Container.prototype.GetDimensionsWithStroke=function(t){return null},t.Container.prototype.getContainerElem=function(){return this._anchorElem?this._anchorElem:this.getElem()},t.Container.prototype.UpdateSelectionEffect=function(){},t.Container.prototype.setHollow=function(t,e){for(var i=0;i<this.getNumChildren();i++){var n=this.getChildAt(i),o=n.getFill()?n.getFill().getColor():t;n.setHollow(o,e)}},t.Container.prototype.includeChildSubtree=function(){return!0};var g=function(t,e,i){this.Init(t,"g",i),this._SVGRoot=e,this.disableSelection(this._elem),this.setCursor("default")};t.Obj.createSubclass(g,t.Container),g.prototype.addChild=function(t){g.superclass.addChild.call(this,t)},g.prototype.getSVGRoot=function(){return this._SVGRoot},g.prototype.disableSelection=function(t){t.onselectstart=function(){return!1}},t.Shape=function(){},t.Obj.createSubclass(t.Shape,t.Container),t.Shape.prototype.Init=function(e,i,n){t.Shape.superclass.Init.call(this,e,i,n),this._bSelectable=!1,this.IsSelected=!1,this.InnerShape=null,this.HoverInnerStroke=null,this.HoverOuterStroke=null,this.SelectedInnerStroke=null,this.SelectedOuterStroke=null,this.SelectedHoverInnerStroke=null,this.SelectedHoverOuterStroke=null,this.OriginalStroke=null,this._isOriginalStrokeSet=!1,this.IsShowingHoverEffect=!1},t.Shape.prototype.setHollow=function(e,i){if(this._bHollow)this.setFill(this._origFill),this.setStroke(this._origStroke),this._bHollow=!1;else{this._origFill=this.GetProperty("fill"),this._origStroke=this.getStroke();var n,o=t.SolidFill.invisibleFill();n=e?new t.Stroke(t.ColorUtils.getRGB(e),t.ColorUtils.getAlpha(e),i):new t.Stroke(this.GetProperty("fill").getColor(),this.GetProperty("fill").getAlpha(),i),this.setFill(o),this.setStroke(n),this._bHollow=!0}},t.Shape.prototype.isHollow=function(){return this._bHollow},t.Shape.prototype.destroy=function(){t.Shape.superclass.destroy.call(this),this.setFill(null),this.setStroke(null)},t.Shape.prototype.getDimensionsWithStroke=function(){var e=this.GetElemDimensionsWithStroke(),i=t.Shape.superclass.getDimensionsWithStroke.call(this);return e&&i?e=e.getUnion(i):i&&(e=i),e},t.Shape.prototype.GetDimensionsWithStroke=function(t){var e=this.GetElemDimensionsWithStroke();return t&&t!==this?this.ConvertCoordSpaceRect(e,t):e},t.Shape.prototype.GetElemDimensionsWithStroke=function(){var e=this.getDimensionsSelf&&this.getNumChildren()-this._getInnerShapeCount()==0?this.getDimensionsSelf():t.Shape.superclass.getDimensions.call(this),i=this.getStroke();if(e&&i){var n=i.getWidth();if(n){var o=.5*n;e.x-=o,e.y-=o,e.w+=n,e.h+=n}}return e},t.Shape.prototype.UpdateSelectionEffect=function(){var e;(this.isSelected()||this.isHoverEffectShown())&&(this.InnerShape&&(e=this.InnerShape.getStroke(),this.removeChild(this.InnerShape)),this.InnerShape=this.copyShape(),this.InnerShape._setOuterShape(this),this.InnerShape.setMouseEnabled(!1),this.InnerShape.setFill(this.getFill()),this.InnerShape.setStyle(this.getStyle()).setClassName(this.getClassName()),e&&this.InnerShape.setStroke(e),this.InnerShape.setMouseEnabled(!1),this.InnerShape.setCursor(t.SelectionEffectUtils.getSelectingCursor()),this.AddChildAt(this.InnerShape,0))},t.Shape.prototype._setOuterShape=function(t){this._outerShape=t},t.Shape.prototype.GetHoverSelectionInnerStroke=function(){var t;return this.InnerShape&&(this.isSelected()?t=this.isHoverEffectShown()?this.SelectedHoverInnerStroke:this.SelectedInnerStroke:this.isHoverEffectShown()&&(t=this.HoverInnerStroke)),t},t.Shape.prototype.GetHoverSelectionOuterStroke=function(){var t;return this._outerShape&&(this._outerShape.isSelected()?t=this._outerShape.isHoverEffectShown()?this._outerShape.SelectedHoverOuterStroke:this._outerShape.SelectedOuterStroke:this._outerShape.isHoverEffectShown()&&(t=this._outerShape.HoverOuterStroke)),t},t.Shape.prototype.setHoverStroke=function(t,e){return this.HoverInnerStroke=t,this.HoverOuterStroke=e,this},t.Shape.prototype.setSelectedStroke=function(t,e){return this.SelectedInnerStroke=t,this.SelectedOuterStroke=e,this},t.Shape.prototype.setSelectedHoverStroke=function(t,e){return this.SelectedHoverInnerStroke=t,this.SelectedHoverOuterStroke=e,this},t.Shape.prototype.setSelectable=function(e){this._bSelectable=e,this._bSelectable?this.setCursor(t.SelectionEffectUtils.getSelectingCursor()):this.setCursor(null)},t.Shape.prototype.isSelectable=function(){return this._bSelectable},t.Shape.prototype.isSelected=function(){return this.IsSelected},t.Shape.prototype.setSelected=function(t){this.IsSelected!=t&&(this._isOriginalStrokeSet||(this._isOriginalStrokeSet=!0,this.OriginalStroke=this.getStroke()),this.IsSelected=t,this.isSelected()?(this.UpdateSelectionEffect(),this.isHoverEffectShown()?(this.CreateSelectedHoverStrokes(),this.InnerShape.setStroke(this.SelectedHoverInnerStroke),this.setStroke(this.SelectedHoverOuterStroke)):(this.InnerShape.setStroke(this.SelectedInnerStroke),this.setStroke(this.SelectedOuterStroke))):(this.removeChild(this.InnerShape),this.setStroke(this.OriginalStroke)))},t.Shape.prototype.showHoverEffect=function(){this.IsShowingHoverEffect||(this.IsShowingHoverEffect=!0,this._isOriginalStrokeSet||(this._isOriginalStrokeSet=!0,this.OriginalStroke=this.getStroke()),this.UpdateSelectionEffect(),this.isSelected()?(this.CreateSelectedHoverStrokes(),this.InnerShape.setStroke(this.SelectedHoverInnerStroke),this.setStroke(this.SelectedHoverOuterStroke)):(this.InnerShape.setStroke(this.HoverInnerStroke),this.setStroke(this.HoverOuterStroke)))},t.Shape.prototype.CreateSelectedHoverStrokes=function(){this.SelectedHoverInnerStroke||(this.SelectedHoverInnerStroke=this.HoverInnerStroke),this.SelectedHoverOuterStroke||(this.SelectedHoverOuterStroke=new t.Stroke(this.SelectedOuterStroke.getColor(),this.SelectedOuterStroke.getAlpha(),this.SelectedOuterStroke.getWidth()+(this.HoverInnerStroke.getWidth()-this.SelectedInnerStroke.getWidth())))},t.Shape.prototype.hideHoverEffect=function(){this.IsShowingHoverEffect&&(this.IsShowingHoverEffect=!1,this.isSelected()?(this.InnerShape.setStroke(this.SelectedInnerStroke),this.setStroke(this.SelectedOuterStroke)):(this.removeChild(this.InnerShape),this.setStroke(this.OriginalStroke)))},t.Shape.prototype.isHoverEffectShown=function(){return this.IsShowingHoverEffect},t.Shape.prototype.addChildAt=function(e,i){t.Shape.superclass.addChildAt.call(this,e,i+this._getInnerShapeCount())},t.Shape.prototype.getChildAt=function(e,i){return t.Shape.superclass.getChildAt.call(this,e,i+this._getInnerShapeCount())},t.Shape.prototype.getChildIndex=function(e){return t.Shape.superclass.getChildIndex.call(this,e)-this._getInnerShapeCount()},t.Shape.prototype.removeChildAt=function(e){t.Shape.superclass.removeChildAt.call(this,e+this._getInnerShapeCount())},t.Shape.prototype.getDimensions=function(e){return this.getDimensionsSelf&&this.getNumChildren()-this._getInnerShapeCount()==0?this.getDimensionsSelf(e):t.Shape.superclass.getDimensions.call(this,e)},t.Shape.prototype._getInnerShapeCount=function(){return this.isSelected()||this.isHoverEffectShown()?1:0},t.Shape.prototype.SvgPropertyChanged=function(t){this.UpdateSelectionEffect()},t.Shape.prototype.copyShape=function(){return null};var d=function(){};t.Obj.createSubclass(d,t.Shape),d.prototype.Init=function(t,e,i,n){d.superclass.Init.call(this,t,e,n),i&&this.setPoints(i)},d.prototype.getPoints=function(){return this.GetProperty("arPoints")},d.prototype.setPoints=function(e){return this.SetProperty("arPoints",e),this.SetSvgProperty("points",t.SvgShapeUtils.convertPointsArray(e))},d.prototype.getDimensionsSelf=function(e){var i=t.PolygonUtils.getDimensions(this.getPoints());return this.ConvertCoordSpaceRect(i,e)},t.Circle=function(t,e,i,n,o){this.Init(t,e,i,n,o)},t.Obj.createSubclass(t.Circle,t.Shape),t.Circle.prototype.Init=function(e,i,n,o,r){t.Circle.superclass.Init.call(this,e,"circle",r),this.setCx(i).setCy(n),this.setRadius(o)},t.Displayable.defineProps(t.Circle,{r:{name:"radius"},cx:{value:0},cy:{value:0}}),t.Circle.prototype.copyShape=function(){return new t.Circle(this.getCtx(),this.getCx(),this.getCy(),this.getRadius())},t.Circle.prototype.getDimensionsSelf=function(e){var i=new t.Rectangle(this.getCx()-this.getRadius(),this.getCy()-this.getRadius(),2*this.getRadius(),2*this.getRadius());return this.ConvertCoordSpaceRect(i,e)},t.Image=function(t,e,i,n,o,r,s){this.Init(t,e,i,n,o,r,s)},t.Obj.createSubclass(t.Image,t.Shape),t.Image.prototype.Init=function(e,i,n,o,r,s,a){t.Image.superclass.Init.call(this,e,"image",a),i=t.ToolkitUtils.getImageUrl(e,i),"ie"!==t.Agent.browser&&"edge"!==t.Agent.browser||(t.ToolkitUtils.setAttrNullNS(this._elem,"fill","#FFFFFF"),t.ToolkitUtils.setAttrNullNS(this._elem,"fill-opacity","0")),this.setSrc(i),this.setX(n).setY(o),this.setWidth(r),this.setHeight(s),t.ToolkitUtils.setAttrNullNS(this._elem,"preserveAspectRatio","none"),this.setAriaProperty("hidden","true")},t.Displayable.defineProps(t.Image,{x:{},y:{},width:{},height:{}}),t.Image.prototype.getSrc=function(){return this._src},t.Image.prototype.setSrc=function(e){if(e!==this._src){var i=e;this._src=e,t.ToolkitUtils.setHref(this._elem,i)}return this},t.Image.prototype.getDimensions=function(e){if(this.getDimensionsSelf&&this.getNumChildren()-this._getInnerShapeCount()==0)return this.getDimensionsSelf(e);var i=this.getElem().getBBox();return i=i.width&&i.height?new t.Rectangle(i.x,i.y,i.width,i.height):new t.Rectangle(i.x,i.y,this.getWidth(),this.getHeight()),this.ConvertCoordSpaceRect(i,e)},t.Image.prototype.__setDimensions=function(t){this.setWidth(t.width),this.setHeight(t.height)},t.Image.prototype.UpdateSelectionEffect=function(){},t.Image.prototype.copyShape=function(){return new t.Image(this.getCtx(),this.getSrc(),this.getX(),this.getY(),this.getWidth(),this.getHeight())},t.Image.prototype.getDimensionsSelf=function(e){var i=new t.Rectangle(this.getX(),this.getY(),this.getWidth(),this.getHeight());return this.ConvertCoordSpaceRect(i,e)},t.Image.prototype.setAriaProperty=function(e,i){t.Image.superclass.setAriaProperty.call(this,e,i),"hidden"!=e&&t.Image.superclass.setAriaProperty.call(this,"hidden",null)},t.Line=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)},t.Obj.createSubclass(t.Line,t.Shape),t.Line.prototype.Init=function(e,i,n,o,r,s){t.Line.superclass.Init.call(this,e,"line",s),this.setX1(i).setY1(n).setX2(o).setY2(r),this._bHollow=!1},t.Displayable.defineProps(t.Line,{x1:{value:0},x2:{value:0},y1:{value:0},y2:{value:0}}),t.Line.prototype.setHollow=function(){var e=this._elem.parentNode;if(this._bHollow)this._origElem&&(e.replaceChild(this._origElem,this._elem),t.ToolkitUtils.setAttrNullNS(this._origElem,"opacity",this._alpha),this._elem=this._origElem,this._origElem=null,this._bHollow=!1);else{var i;this._origElem=this._elem;var n=this.getX2()-this.getX1(),o=n,r=this.getY1()-n/2,s=this.getStroke();i=t.SvgShapeUtils.createElement("rect"),t.ToolkitUtils.setAttrNullNS(i,"x",this.getX1()),t.ToolkitUtils.setAttrNullNS(i,"y",r),t.ToolkitUtils.setAttrNullNS(i,"width",this.getX2()-this.getX1()),t.ToolkitUtils.setAttrNullNS(i,"height",o);var a=s.getColor();if(a){var l=s.getAlpha();"safari"===t.Agent.browser&&-1!==a.indexOf("rgba")?(t.ToolkitUtils.setAttrNullNS(i,"stroke",t.ColorUtils.getRGB(a)),null!=l?t.ToolkitUtils.setAttrNullNS(i,"stroke-opacity",t.ColorUtils.getAlpha(a)*l):t.ToolkitUtils.setAttrNullNS(i,"stroke-opacity",t.ColorUtils.getAlpha(a))):(t.ToolkitUtils.setAttrNullNS(i,"stroke",a),null!=l&&t.ToolkitUtils.setAttrNullNS(i,"stroke-opacity",l))}t.ToolkitUtils.setAttrNullNS(i,"fill","#ffffff"),t.ToolkitUtils.setAttrNullNS(i,"fill-opacity","0.001"),t.ToolkitUtils.setAttrNullNS(i,"shape-rendering","crispEdges"),i._obj=this,e.replaceChild(i,this._elem),this._elem=i,t.ToolkitUtils.setAttrNullNS(this._elem,"opacity",this._alpha),this._bHollow=!0}},t.Line.prototype.getDimensions=function(e){var i=t.Line.superclass.getDimensions.call(this,e);if(this._childGroupElem&&this._elem){var n=this._childGroupElem.getBBox();if(0==n.x&&0==n.y&&0==n.width&&0==n.height){var o=this._elem.getBBox();i=new t.Rectangle(o.x,o.y,o.width,o.height)}}return i},t.Line.prototype.copyShape=function(){return new t.Line(this.getCtx(),this.getX1(),this.getY1(),this.getX2(),this.getY2())},t.Line.prototype.getDimensionsSelf=function(e){var i=Math.min(this.getX1(),this.getX2()),n=Math.min(this.getY1(),this.getY2()),o=Math.abs(this.getX1()-this.getX2()),r=Math.abs(this.getY1()-this.getY2()),s=new t.Rectangle(i,n,o,r);return this.ConvertCoordSpaceRect(s,e)},t.Line.prototype._adjustDimensionsForStyle=function(){this.getX1()==this.getX2()?this.setX2(this.getX2()+.001):this.getY1()==this.getY2()&&this.setY2(this.getY2()+.001)},t.Line.prototype.setStyle=function(e,i){return e&&!i&&this._adjustDimensionsForStyle(),t.Line.superclass.setStyle.call(this,e)},t.Line.prototype.setClassName=function(e,i){return e&&!i&&this._adjustDimensionsForStyle(),t.Line.superclass.setClassName.call(this,e)},t.SimpleMarker=function(t,e,i,n,o,r,s,a,l,h){this.Init(t,e,i,n,o,r,s,a,l,h)},t.Obj.createSubclass(t.SimpleMarker,t.Shape),t.SimpleMarker.CIRCLE="circle",t.SimpleMarker.ELLIPSE="ellipse",t.SimpleMarker.SQUARE="square",t.SimpleMarker.RECTANGLE="rectangle",t.SimpleMarker.DIAMOND="diamond",t.SimpleMarker.TRIANGLE_UP="triangleUp",t.SimpleMarker.TRIANGLE_DOWN="triangleDown",t.SimpleMarker.PLUS="plus",t.SimpleMarker.HUMAN="human",t.SimpleMarker.STAR="star",t.SimpleMarker._CIRCLE_ELEM="circle",t.SimpleMarker._ELLIPSE_ELEM="ellipse",t.SimpleMarker._RECT_ELEM="rect",t.SimpleMarker._PATH_ELEM="path",t.SimpleMarker._POLYGON_ELEM="polygon",t.SimpleMarker._SHAPE_ELEM_MAP={},t.SimpleMarker._SHAPE_ELEM_MAP[t.SimpleMarker.CIRCLE]=t.SimpleMarker._CIRCLE_ELEM,t.SimpleMarker._SHAPE_ELEM_MAP[t.SimpleMarker.ELLIPSE]=t.SimpleMarker._ELLIPSE_ELEM,t.SimpleMarker._SHAPE_ELEM_MAP[t.SimpleMarker.SQUARE]=t.SimpleMarker._PATH_ELEM,t.SimpleMarker._SHAPE_ELEM_MAP[t.SimpleMarker.RECTANGLE]=t.SimpleMarker._PATH_ELEM,t.SimpleMarker._SHAPE_ELEM_MAP[t.SimpleMarker.DIAMOND]=t.SimpleMarker._POLYGON_ELEM,t.SimpleMarker._SHAPE_ELEM_MAP[t.SimpleMarker.TRIANGLE_UP]=t.SimpleMarker._POLYGON_ELEM,t.SimpleMarker._SHAPE_ELEM_MAP[t.SimpleMarker.TRIANGLE_DOWN]=t.SimpleMarker._POLYGON_ELEM,t.SimpleMarker._SHAPE_ELEM_MAP[t.SimpleMarker.PLUS]=t.SimpleMarker._POLYGON_ELEM,t.SimpleMarker._SHAPE_ELEM_MAP[t.SimpleMarker.HUMAN]=t.SimpleMarker._PATH_ELEM,t.SimpleMarker._SHAPE_ELEM_MAP[t.SimpleMarker.STAR]=t.SimpleMarker._POLYGON_ELEM,t.SimpleMarker.DEFAULT_BORDER_RADIUS="6",t.SimpleMarker._HUMAN_CMDS="M 306.40625 386.78125 C 304.19988 386.78125 302.40625 389.07579 302.40625 391.90625 C 302.40625 394.73671 304.19988 397.03125 306.40625 397.03125 C 308.61263 397.03125 310.40625 394.73671 310.40625 391.90625 C 310.40625 389.07579 308.61263 386.78125 306.40625 386.78125 z M 301.78125 396.0625 C 300.43025 397.2945 298.28125 400.28125 298.90625 403.15625 C 302.41725 405.79925 309.20225 406.154 314.03125 403 C 314.21825 399.828 312.68325 397.5635 310.90625 396.0625 C 308.65625 400.7185 304.28125 399.7815 301.78125 396.0625 z ",t.SimpleMarker._SHAPE_STAR_CMDS=[-50,-11.22,-16.69,-17.94,0,-47.55,16.69,-17.94,50,-11.22,26.69,13.8,30.9,47.56,0,33.42,-30.9,47.56,-26.69,13.8],t.SimpleMarker.prototype.Init=function(e,i,n,o,r,s,a,l,h,u){h&&(n=Math.round(n),o=Math.round(o),r=Math.round(r),s=(s=Math.round(s))%2==1?s+1:s,r=r%2==1?r+1:r),this._bMaintainAspectRatio=!0,!1===l&&(this._bMaintainAspectRatio=!1,i==t.SimpleMarker.CIRCLE&&(i=t.SimpleMarker.ELLIPSE)),a&&"0"!=a&&(this._borderRadius=a),this._shape=i||t.SimpleMarker.RECTANGLE,this._dataColor="#000000";var c=i?t.SimpleMarker._SHAPE_ELEM_MAP[i]:t.SimpleMarker._PATH_ELEM;null==c&&(this._isCustomShape=!0,this._path=new t.Path(e,i),c=t.SimpleMarker._PATH_ELEM),t.SimpleMarker.superclass.Init.call(this,e,c,u),this._shape!=t.SimpleMarker.SQUARE&&this._shape!=t.SimpleMarker.RECTANGLE||(this._path=this._getBorderRadiusPath(e,n,o,r,s,a)),this._shape==t.SimpleMarker.HUMAN&&(this._path=new t.Path(e,t.SimpleMarker._HUMAN_CMDS)),this._propertyChange={},this.setCenter(n,o,!0).setSize(r,s)},t.SimpleMarker.prototype.setCenterDimensions=function(t){return this.setCenter(t.x,t.y,!0).setSize(t.w,t.h)},t.SimpleMarker.prototype.getCenterDimensions=function(){return new t.Rectangle(this._cx,this._cy,this._width,this._height)},t.SimpleMarker.prototype.setSize=function(t,e,i){return this.setWidth(t,!0).setHeight(e,i)},t.SimpleMarker.prototype.setCenter=function(t,e,i){return this.setCx(t,!0).setCy(e,i)},t.SimpleMarker.prototype._updateSvgProperties=function(){if(this._propertyChange.width||this._propertyChange.height){var e=Math.min(this._width,this._height);this._propertyChange.s=this._s!=e,this._s=e}if(this._shape!=t.SimpleMarker.RECTANGLE&&this._shape!=t.SimpleMarker.SQUARE||this._borderRadius)this._shape==t.SimpleMarker.CIRCLE||this._shape==t.SimpleMarker.ELLIPSE?(this._propertyChange.cx&&t.ToolkitUtils.setAttrNullNS(this._elem,"cx",this._cx,0),this._propertyChange.cy&&t.ToolkitUtils.setAttrNullNS(this._elem,"cy",this._cy,0),this._shape==t.SimpleMarker.CIRCLE?this._propertyChange.s&&t.ToolkitUtils.setAttrNullNS(this._elem,"r",this._s/2,0):(this._propertyChange.width&&t.ToolkitUtils.setAttrNullNS(this._elem,"rx",this._width/2,0),this._propertyChange.height&&t.ToolkitUtils.setAttrNullNS(this._elem,"ry",this._height/2,0))):this._isPolygon()?(this._propertyChange.s||this._propertyChange.cx||this._propertyChange.cy)&&this._setPolygon(this._getPolygonArray()):this._isPath()&&(this._propertyChange.width||this._propertyChange.height||this._propertyChange.cx||this._propertyChange.cy)&&this._setCmds(this._getCmds());else if(this._propertyChange.width||this._propertyChange.height||this._propertyChange.cx||this._propertyChange.cy){var i=t.PathUtils.rectangleWithBorderRadius(this._cx-this._width/2,this._cy-this._height/2,this._width,this._height);this._setCmds(i)}return this.UpdateSelectionEffect(),this._propertyChange={},this},t.SimpleMarker.prototype.getCx=function(){return this._cx},t.SimpleMarker.prototype.setCx=function(t,e){return this._propertyChange.cx=this._cx!=t,this._cx=t,e?this:this._updateSvgProperties()},t.SimpleMarker.prototype.getCy=function(){return this._cy},t.SimpleMarker.prototype.setCy=function(t,e){return this._propertyChange.cy=this._cy!=t,this._cy=t,e?this:this._updateSvgProperties()},t.SimpleMarker.prototype.getSize=function(){return this._s},t.SimpleMarker.prototype.getWidth=function(){return this._width},t.SimpleMarker.prototype.setWidth=function(t,e){return this._propertyChange.width=this._width!=t,this._width=t,e?this:this._updateSvgProperties()},t.SimpleMarker.prototype.getHeight=function(){return this._height},t.SimpleMarker.prototype.setHeight=function(t,e){return this._propertyChange.height=this._height!=t,this._height=t,e?this:this._updateSvgProperties()},t.SimpleMarker.prototype._getPolygonArray=function(){var e=[],i=this._cx,n=this._cy,o=this.getMaintainAspectRatio()?this._s/2:this._width/2,r=this.getMaintainAspectRatio()?this._s/2:this._height/2,s=this.getMaintainAspectRatio()?this._s/6:this._width/6,a=this.getMaintainAspectRatio()?this._s/6:this._height/6;return this._shape==t.SimpleMarker.TRIANGLE_UP?e=[i-o,n+r,i,n-r,i+o,n+r]:this._shape==t.SimpleMarker.TRIANGLE_DOWN?e=[i-o,n-r,i,n+r,i+o,n-r]:this._shape==t.SimpleMarker.DIAMOND?e=[i-o,n,i,n-r,i+o,n,i,n+r]:this._shape==t.SimpleMarker.PLUS?e=[i-o,n-a,i-s,n-a,i-s,n-r,i+s,n-r,i+s,n-a,i+o,n-a,i+o,n+a,i+s,n+a,i+s,n+r,i-s,n+r,i-s,n+a,i-o,n+a]:this._shape==t.SimpleMarker.STAR&&(e=t.SimpleMarker._SHAPE_STAR_CMDS,e=t.PolygonUtils.scale(e,this.getMaintainAspectRatio()?this._s/100:this._width/100,this.getMaintainAspectRatio()?this._s/100:this._height/100),e=t.PolygonUtils.translate(e,i,n)),e},t.SimpleMarker.prototype._setPolygon=function(e){t.ToolkitUtils.setAttrNullNS(this._elem,"points",t.SvgShapeUtils.convertPointsArray(e))},t.SimpleMarker.prototype._getCmds=function(){var e=t.DisplayableUtils.getDimForced(this.getCtx(),this._path),i=Math.max(e.w,e.h),n=this.getMaintainAspectRatio();this._shape==t.SimpleMarker.RECTANGLE&&(n=!1);var o=n?this._s/i:this._width/e.w,r=n?this._s/i:this._height/e.h,s=this._cx-e.x*o-e.w*o/2,a=this._cy-e.y*r-e.h*r/2;return t.PathUtils.transformPath(this._path.getCommandsArray(),s,a,o,r)},t.SimpleMarker.prototype._setCmds=function(e){t.ToolkitUtils.setAttrNullNS(this._elem,"d",e)},t.SimpleMarker.prototype.getType=function(){return this._shape},t.SimpleMarker.prototype._isPolygon=function(){return t.SimpleMarker._SHAPE_ELEM_MAP[this._shape]==t.SimpleMarker._POLYGON_ELEM},t.SimpleMarker.prototype._isPath=function(){return t.SimpleMarker._SHAPE_ELEM_MAP[this._shape]==t.SimpleMarker._PATH_ELEM||this._isCustomShape},t.SimpleMarker.prototype.GetStrokeWidth=function(){var t=this.getStroke();return t?t.getWidth():0},t.SimpleMarker.prototype._getBorderRadiusPath=function(e,i,n,o,r,s){if(this._shape==t.SimpleMarker.SQUARE||this._shape==t.SimpleMarker.RECTANGLE){var a=Math.min(o,r),l=this._shape==t.SimpleMarker.SQUARE?a:o,h=this._shape==t.SimpleMarker.SQUARE?a:r,u=i-l/2,c=n-h/2,p=t.PathUtils.rectangleWithBorderRadius(u,c,l,h,s,a,"0");return new t.Path(e,p)}return null},t.SimpleMarker.prototype._getBorderRadius=function(){return this._borderRadius},t.SimpleMarker.prototype.setDataColor=function(e,i){if(this._dataColor=e,!i){var n=t.SelectionEffectUtils.getHoverBorderColor(e);this.setHoverStroke(new t.Stroke("#FFFFFF",1,1,!0),new t.Stroke(n,1,3.5,!0)),this.setSelectedStroke(new t.Stroke("#FFFFFF",1,1.5,!0),new t.Stroke("#5A5A5A",1,4.5,!0)),this.setSelectedHoverStroke(new t.Stroke("#FFFFFF",1,1.5,!0),new t.Stroke(n,1,4.5,!0))}},t.SimpleMarker.prototype.getDataColor=function(){return this._dataColor},t.SimpleMarker.prototype.setHollow=function(e){var i=this.GetStrokeWidth();i=i||1,t.SimpleMarker.superclass.setHollow.call(this,e,i)},t.SimpleMarker.prototype.setText=function(t){this._markerText=t},t.SimpleMarker.prototype.setAlpha=function(e){t.SimpleMarker.superclass.setAlpha.call(this,e),e!==this.getAlpha()&&(this._markerText&&this._markerText.setAlpha(e),this.UpdateSelectionEffect())},t.SimpleMarker.prototype.copyShape=function(){return new t.SimpleMarker(this.getCtx(),this._shape,this.getCx(),this.getCy(),this.getWidth(),this.getHeight(),this._getBorderRadius(),this.getMaintainAspectRatio())},t.SimpleMarker.prototype.getDimensions=function(t){return this.getDimensionsSelf(t)},t.SimpleMarker.prototype.getDimensionsSelf=function(e){var i=this.getCx()-this.getWidth()/2,n=this.getCy()-this.getHeight()/2,o=new t.Rectangle(i,n,this.getWidth(),this.getHeight());return this.ConvertCoordSpaceRect(o,e)},t.SimpleMarker.prototype.setMaintainAspectRatio=function(t){this._bMaintainAspectRatio=t},t.SimpleMarker.prototype.getMaintainAspectRatio=function(){return this._bMaintainAspectRatio},t.ImageMarker=function(t,e,i,n,o,r,s,a,l,h,u){this.Init(t,e,i,n,o,r,s,a,l,h,u)},t.Obj.createSubclass(t.ImageMarker,t.Shape),t.ImageMarker.prototype.Init=function(e,i,n,o,r,s,a,l,h,u,c){t.ImageMarker.superclass.Init.call(this,e,"image",c),this._setMarkerImageStates(a,l,h,u);var p=this._getImage();this._setSource(p),this._propertyChange={},this.setCenter(i,n,!0).setSize(o,r),this._updateBorder(s),"ie"!==t.Agent.browser&&"edge"!==t.Agent.browser||(t.ToolkitUtils.setAttrNullNS(this._elem,"fill","#FFFFFF"),t.ToolkitUtils.setAttrNullNS(this._elem,"fill-opacity","0"))},t.ImageMarker.prototype.setPreserveAspectRatio=function(e){t.ToolkitUtils.setAttrNullNS(this._elem,"preserveAspectRatio",e,"xMidYMid")},t.ImageMarker.prototype.setCenterDimensions=function(t){return this.setCenter(t.x,t.y,!0).setSize(t.w,t.h)},t.ImageMarker.prototype.getCenterDimensions=function(){return new t.Rectangle(this._cx,this._cy,this._width,this._height)},t.ImageMarker.prototype.setSize=function(t,e,i){return this.setWidth(t,!0).setHeight(e,i)},t.ImageMarker.prototype.getSize=function(){return Math.max(this.getWidth(),this.getHeight())},t.ImageMarker.prototype.setCenter=function(t,e,i){return this.setCx(t,!0).setCy(e,i)},t.ImageMarker.prototype._updateSvgProperties=function(){return(this._propertyChange.cx||this._propertyChange.width)&&t.ToolkitUtils.setAttrNullNS(this._elem,"x",this._cx-this._width/2,0),(this._propertyChange.cy||this._propertyChange.height)&&t.ToolkitUtils.setAttrNullNS(this._elem,"y",this._cy-this._height/2,0),this._propertyChange.width&&t.ToolkitUtils.setAttrNullNS(this._elem,"width",this._width,0),this._propertyChange.height&&t.ToolkitUtils.setAttrNullNS(this._elem,"height",this._height,0),this._updateBorder(this._borderRadius),this.UpdateSelectionEffect(),this._propertyChange={},this},t.ImageMarker.prototype.getCx=function(){return this._cx},t.ImageMarker.prototype.setCx=function(t,e){return this._propertyChange.cx=this._cx!=t,this._cx=t,e?this:this._updateSvgProperties()},t.ImageMarker.prototype.getCy=function(){return this._cy},t.ImageMarker.prototype.setCy=function(t,e){return this._propertyChange.cy=this._cy!=t,this._cy=t,e?this:this._updateSvgProperties()},t.ImageMarker.prototype.getWidth=function(){return this._width},t.ImageMarker.prototype.setWidth=function(t,e){return this._propertyChange.width=this._width!=t,this._width=t,e?this:this._updateSvgProperties()},t.ImageMarker.prototype.getHeight=function(){return this._height},t.ImageMarker.prototype.setHeight=function(t,e){return this._propertyChange.height=this._height!=t,this._height=t,e?this:this._updateSvgProperties()},t.ImageMarker.prototype._setSource=function(e){t.ToolkitUtils.setHref(this._elem,t.ToolkitUtils.getImageUrl(this.getCtx(),e))},t.ImageMarker.prototype._setMarkerImageStates=function(t,e,i,n){var o=t;this._imageStates=[o],this._imageStates.push(e||o),this._imageStates.push(i||o),this._imageStates.push(n||this._imageStates[1])},t.ImageMarker.prototype._getImage=function(){return this._imageStates[0]},t.ImageMarker.prototype._getImageSelected=function(){return this._imageStates[1]},t.ImageMarker.prototype._getImageHover=function(){return this._imageStates[2]},t.ImageMarker.prototype._getImageHoverSelected=function(){return this._imageStates[3]},t.ImageMarker.prototype.showHoverEffect=function(){this.IsShowingHoverEffect=!0,this.isSelected()?this._setSource(this._getImageHoverSelected()):this._setSource(this._getImageHover())},t.ImageMarker.prototype.hideHoverEffect=function(){this.IsShowingHoverEffect=!1,this.isSelected()?this._setSource(this._getImageSelected()):this._setSource(this._getImage())},t.ImageMarker.prototype.setSelected=function(t){this.IsSelected!=t&&(this.IsSelected=t,t?this.isHoverEffectShown()?this._setSource(this._getImageHoverSelected()):this._setSource(this._getImageSelected()):this._setSource(this._getImage()))},t.ImageMarker.prototype._updateBorder=function(e){if(e||this._borderPath){if(e&&"0"!=e){var i=t.PathUtils.rectangleWithBorderRadius(this._cx-this._width/2,this._cy-this._height/2,this._width,this._height,e,Math.min(this._width,this._height),"0"),n=new t.ClipPath;n.addPath(i),this.setClipPath(n)}if(this._borderPath){var o=t.PathUtils.rectangleWithBorderRadius(this._cx-this._width/2+this._borderWidth/2,this._cy-this._height/2+this._borderWidth/2,this._width-this._borderWidth,this._height-this._borderWidth,e,Math.min(this._width,this._height),"0");this._borderPath.setCmds(o)}}this._borderRadius=e},t.ImageMarker.prototype._getBorderRadius=function(){return this._borderRadius},t.ImageMarker.prototype.setStroke=function(e){if(!e||e.getWidth()<=0)return this._borderWidth=0,void(this._borderPath&&(this.removeChild(this._borderPath),this._borderPath=null));var i=e.getWidth();if(!this._borderPath||i!=this._borderWidth){var n=t.PathUtils.rectangleWithBorderRadius(this._cx-this._width/2+i/2,this._cy-this._height/2+i/2,this._width-i,this._height-i,this._borderRadius,Math.min(this._width,this._height),"0");this._borderPath?this._borderPath.setCmds(n):(this._borderPath=new t.Path(this.getCtx(),n),this._borderPath.setInvisibleFill(),this.addChild(this._borderPath))}this._borderWidth=i,this._borderPath.setStroke(e)},t.ImageMarker.prototype.setHollow=function(e,i){t.ImageMarker.superclass.setHollow.call(this,e,i);var n=this.isHollow();n?(this._imageContainer=this._elem.parentNode,this._imageContainer.removeChild(this._elem)):!n&&this._imageContainer&&this._imageContainer.appendChild(this._elem)},t.ImageMarker.prototype.copyShape=function(){return new t.ImageMarker(this.getCtx(),this.getCx(),this.getCy(),this.getWidth(),this.getHeight(),this._getBorderRadius(),this._getImage(),this._getImageSelected(),this._getImageHover(),this._getImageHoverSelected(),null)},t.ImageMarker.prototype.getDimensionsSelf=function(e){var i=this.getCx()-this.getWidth()/2,n=this.getCy()-this.getHeight()/2,o=new t.Rectangle(i,n,this.getWidth(),this.getHeight());return this.ConvertCoordSpaceRect(o,e)},t.Path=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.Path,t.Shape),t.Path.prototype.Init=function(e,i,n){t.Path.superclass.Init.call(this,e,"path",n),Array.isArray(i)?this.setCmds(t.PathUtils.getPathString(i)):this.setCmds(i)},t.Path.prototype.getCmds=function(){return this.GetProperty("d")},t.Path.prototype.setCmds=function(t){return t&&this.SetSvgProperty("d",t),this.SetProperty("arCmds",null),this},t.Path.prototype.getCommandsArray=function(){var e=this.GetProperty("arCmds");return e||(e=t.PathUtils.createPathArray(this.getCmds()),this.SetProperty("arCmds",e)),e},t.Path.prototype.setCommandsArray=function(e){var i=e?t.PathUtils.getPathString(e):null;return this.setCmds(i),this.SetProperty("arCmds",e),this},t.Path.prototype.copyShape=function(){return new t.Path(this.getCtx(),this.getCmds())},t.Path.prototype.GetAriaElem=function(){return t.Agent.isTouchDevice()&&this.CreateChildGroupElem(!1,!0),t.Path.superclass.GetAriaElem.call(this)},t.Polygon=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.Polygon,d),t.Polygon.prototype.Init=function(e,i,n){t.Polygon.superclass.Init.call(this,e,"polygon",i,n)},t.Polygon.prototype.copyShape=function(){return new t.Polygon(this.getCtx(),this.getPoints())},t.Polygon.prototype.GetAriaElem=function(){return t.Agent.isTouchDevice()&&this.CreateChildGroupElem(!1,!0),t.Polygon.superclass.GetAriaElem.call(this)},t.Polyline=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.Polyline,d),t.Polyline.prototype.Init=function(e,i,n){t.Polyline.superclass.Init.call(this,e,"polyline",i,n),t.ToolkitUtils.setAttrNullNS(this._elem,"fill","none")},t.Polyline.prototype.copyShape=function(){return new t.Polyline(this.getCtx(),this.getPoints())},t.Rect=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)},t.Obj.createSubclass(t.Rect,t.Shape),t.Rect._cssAttrs=["background-color","border-color","border-width"],t.Rect.prototype.Init=function(e,i,n,o,r,s){t.Rect.superclass.Init.call(this,e,"rect",s),this._strokeAlignment="center",this.setX(i).setY(n).setWidth(o).setHeight(r)},t.Displayable.defineProps(t.Rect,{x:{value:0},y:{value:0},width:{value:0},height:{value:0},rx:{},ry:{}}),t.Rect.prototype.setCSSStyle=function(e){t.Rect.superclass.setCSSStyle.call(this,e);var i=this._elem;if(e){var n=e.getStyle("background-color");if(n&&t.ToolkitUtils.setAttrNullNS(i,"fill",n),(n=e.getStyle("border-color"))&&t.ToolkitUtils.setAttrNullNS(i,"stroke",n),(n=e.getStyle("border-width"))&&t.ToolkitUtils.setAttrNullNS(i,"stroke-width",n),n=e.getStyle("border-radius")){var o=n.trim().split(" ");o.length>0&&o[0]&&this.setRx(o[0]),o.length>1&&o[1]&&this.setRy(o[1])}}else t.ToolkitUtils.removeAttrNullNS(this._elem,"style")},t.Rect.prototype.SetSvgProperty=function(t,e,i){return e!==this.GetProperty(t)&&(this.SetProperty(t,e),this._setAttributeWithStroke(t,e,i),this.SvgPropertyChanged(t)),this},t.Rect.prototype._setAttributeWithStroke=function(e,i,n){if(null!=i&&"center"!=this._strokeAlignment){var o=this._getStrokeOffset();switch(e){case"x":case"y":i-=o;break;case"width":case"height":i+=2*o}}t.ToolkitUtils.setAttrNullNS(this._elem,e,i,n)},t.Rect.prototype.setStrokeAlignment=function(t){this._strokeAlignment!=t&&(this._strokeAlignment=t,this._updateElemStrokeDimensions())},t.Rect.prototype.getStrokeAlignment=function(){return this._strokeAlignment},t.Rect.prototype._updateElemStrokeDimensions=function(){this._setAttributeWithStroke("x",this.getX(),0),this._setAttributeWithStroke("y",this.getY(),0),this._setAttributeWithStroke("width",this.getWidth()),this._setAttributeWithStroke("height",this.getHeight())},t.Rect.prototype._getStrokeOffset=function(){var t=0,e=this.getStroke();if(e)if("outer"==this._strokeAlignment){t=e.getWidth()/2;var i=this.GetHoverSelectionInnerStroke();null!=i&&(t+=i.getWidth())}else if("inner"==this._strokeAlignment){t=-e.getWidth()/2;var n=this.GetHoverSelectionOuterStroke();null!=n&&(t-=n.getWidth())}return t},t.Rect.prototype.setStroke=function(e){t.Rect.superclass.setStroke.call(this,e),"center"!=this._strokeAlignment&&this._updateElemStrokeDimensions()},t.Rect.prototype.GetElemDimensionsWithStroke=function(){var e=t.Rect.superclass.GetElemDimensionsWithStroke.call(this);if(e&&"center"!=this._strokeAlignment){var i=this._getStrokeOffset();e.x-=i,e.y-=i,e.w+=2*i,e.h+=2*i}return e},t.Rect.prototype.setCornerRadius=function(t,e){this.setRx(t).setRy(e)},t.Rect.prototype.setRect=function(e,i,n,o){e instanceof t.Rectangle?this.setX(e.x).setY(e.y).setWidth(e.w).setHeight(e.h):this.setX(e).setY(i).setWidth(n).setHeight(o)},t.Rect.prototype.copyShape=function(){var e=new t.Rect(this.getCtx(),this.getX(),this.getY(),this.getWidth(),this.getHeight());return e.setRx(this.getRx()).setRy(this.getRy()),e.setStrokeAlignment(this.getStrokeAlignment()),e},t.Rect.prototype.getDimensionsSelf=function(e){var i=new t.Rectangle(this.getX(),this.getY(),this.getWidth(),this.getHeight());return this.ConvertCoordSpaceRect(i,e)},t.OutputText=function(t,e,i,n,o){this.Init(t,e,i,n,o)},t.Obj.createSubclass(t.OutputText,t.Shape),t.OutputText.ELLIPSIS="…",t.OutputText.REPRESENTATIVE_TEXT="MW",t.OutputText.BIDI_ZERO_WIDTH="​",t.OutputText.H_ALIGN_LEFT="left",t.OutputText.H_ALIGN_CENTER="center",t.OutputText.H_ALIGN_RIGHT="right",t.OutputText.V_ALIGN_TOP="top",t.OutputText.V_ALIGN_MIDDLE="middle",t.OutputText.V_ALIGN_CENTRAL="central",t.OutputText.V_ALIGN_BOTTOM="bottom",t.OutputText.V_ALIGN_AUTO="auto",t.OutputText.prototype.Init=function(e,i,n,o,r){t.OutputText.superclass.Init.call(this,e,"text",r),this._x=null!=n?n:0,this._baseline=!1,!t.Agent.isRightToLeft(e)||"ie"!==t.Agent.browser&&"edge"!==t.Agent.browser||t.ToolkitUtils.setAttrNullNS(this.getElem(),"unicode-bidi","embed"),this.alignLeft(),this.alignTop(),this.setTextString(i),this.setX(n),this.setY(o),t.ToolkitUtils.removeAttrNullNS(this.getElem(),"fill"),this.setAriaProperty("hidden","true")},t.OutputText.prototype.getTextString=function(){return this._textString},t.OutputText.prototype.setTextString=function(e){e=null!=e?String(e).trim():"",!this._needsTextAnchorAdjustment()||"ie"!==t.Agent.browser&&"edge"!==t.Agent.browser||e.charAt(0)==t.OutputText.BIDI_ZERO_WIDTH||(e=t.OutputText.BIDI_ZERO_WIDTH+e),this._textString=e;var i=this.getElem().firstChild;return null!==i?i.nodeValue=e:(i=document.createTextNode(e),t.ToolkitUtils.appendChildElem(this.getElem(),i)),"ie"!==t.Agent.browser&&"edge"!==t.Agent.browser||this.setX(this._x),this},t.OutputText.prototype.isTruncated=function(){return null!=this.getUntruncatedTextString()},t.OutputText.prototype.getUntruncatedTextString=function(){return this._untruncatedTextString},t.OutputText.prototype.setUntruncatedTextString=function(t){t!=this.getTextString()&&(this._untruncatedTextString=t)},t.OutputText.prototype.getX=function(){return("ie"===t.Agent.browser||"edge"===t.Agent.browser?this._x:this.GetProperty("x"))||0},t.OutputText.prototype.setX=function(e){return this._x=null!=e?e:0,"ie"===t.Agent.browser||"edge"===t.Agent.browser?this.SetSvgProperty("x",this._x+this._getIEAlignmentOffset(),0):this.SetSvgProperty("x",e,0)},t.OutputText.prototype._getIEAlignmentOffset=function(){var e=this.getHorizAlignment(),i=t.Agent.isRightToLeft(this.getCtx());return e==t.OutputText.H_ALIGN_LEFT?i?t.TextUtils.getTextStringWidth(this.getCtx(),this.getTextString(),this.getCSSStyle()):0:e==t.OutputText.H_ALIGN_CENTER?i?t.TextUtils.getTextStringWidth(this.getCtx(),this.getTextString(),this.getCSSStyle())/2:t.TextUtils.getTextStringWidth(this.getCtx(),this.getTextString(),this.getCSSStyle())/2*-1:e==t.OutputText.H_ALIGN_RIGHT?i?0:-1*t.TextUtils.getTextStringWidth(this.getCtx(),this.getTextString(),this.getCSSStyle()):void 0},t.OutputText.prototype.getY=function(){var t=this.GetProperty("y");return t||0},t.OutputText.prototype.setY=function(t){return this.SetSvgProperty("y",t,0)},t.OutputText.prototype.setFontSize=function(e){var i=this.getCSSStyle();(i=i?i.clone():new t.CSSStyle).setFontSize(t.CSSStyle.FONT_SIZE,String(e),this.getCtx()),this.setCSSStyle(i)},t.OutputText.prototype.getHorizAlignment=function(){return this._horizAlign},t.OutputText.prototype.setHorizAlignment=function(e){e==t.OutputText.H_ALIGN_LEFT?this.alignLeft():e==t.OutputText.H_ALIGN_CENTER?this.alignCenter():e==t.OutputText.H_ALIGN_RIGHT&&this.alignRight()},t.OutputText.prototype.getVertAlignment=function(){return this._vertAlign},t.OutputText.prototype.setVertAlignment=function(e){e==t.OutputText.V_ALIGN_TOP?this.alignTop():e==t.OutputText.V_ALIGN_MIDDLE?this.alignMiddle():e==t.OutputText.V_ALIGN_CENTRAL?this.alignCentral():e==t.OutputText.V_ALIGN_BOTTOM?this.alignBottom():e==t.OutputText.V_ALIGN_AUTO&&this.alignAuto()},t.OutputText.prototype.alignLeft=function(){if(this._horizAlign!=t.OutputText.H_ALIGN_LEFT)if(this._horizAlign=t.OutputText.H_ALIGN_LEFT,"ie"===t.Agent.browser||"edge"===t.Agent.browser)this.setX(this._x);else{var e=this._needsTextAnchorAdjustment();t.ToolkitUtils.setAttrNullNS(this.getElem(),"text-anchor",e?"end":"start","start")}},t.OutputText.prototype.alignCenter=function(){this._horizAlign!=t.OutputText.H_ALIGN_CENTER&&(this._horizAlign=t.OutputText.H_ALIGN_CENTER,"ie"===t.Agent.browser||"edge"===t.Agent.browser?this.setX(this._x):t.ToolkitUtils.setAttrNullNS(this.getElem(),"text-anchor","middle","start"))},t.OutputText.prototype.alignRight=function(){if(this._horizAlign!=t.OutputText.H_ALIGN_RIGHT)if(this._horizAlign=t.OutputText.H_ALIGN_RIGHT,"ie"===t.Agent.browser||"edge"===t.Agent.browser)this.setX(this._x);else{var e=this._needsTextAnchorAdjustment();t.ToolkitUtils.setAttrNullNS(this.getElem(),"text-anchor",e?"start":"end","start")}},t.OutputText.prototype.alignTop=function(){this._vertAlign!=t.OutputText.V_ALIGN_TOP&&(this._vertAlign==t.OutputText.V_ALIGN_BOTTOM&&"safari"===t.Agent.browser&&this._setBaseline(!1),this._vertAlign=t.OutputText.V_ALIGN_TOP,"ie"===t.Agent.browser||"edge"===t.Agent.browser?this._setBaseline(!0):this.SetDominantBaselineAttr("text-before-edge"))},t.OutputText.prototype.alignMiddle=function(){this._vertAlign!=t.OutputText.V_ALIGN_MIDDLE&&(this._vertAlign==t.OutputText.V_ALIGN_BOTTOM&&"safari"===t.Agent.browser&&this._setBaseline(!1),this._vertAlign=t.OutputText.V_ALIGN_MIDDLE,"ie"===t.Agent.browser||"edge"===t.Agent.browser?this._setBaseline(!0):this.SetDominantBaselineAttr("middle"))},t.OutputText.prototype.alignCentral=function(){this._vertAlign!=t.OutputText.V_ALIGN_CENTRAL&&(this._vertAlign==t.OutputText.V_ALIGN_BOTTOM&&"safari"===t.Agent.browser&&this._setBaseline(!1),this._vertAlign=t.OutputText.V_ALIGN_CENTRAL,"ie"===t.Agent.browser||"edge"===t.Agent.browser?this._setBaseline(!0):this.SetDominantBaselineAttr("central"))},t.OutputText.prototype.alignBottom=function(){this._vertAlign!=t.OutputText.V_ALIGN_BOTTOM&&(this._vertAlign=t.OutputText.V_ALIGN_BOTTOM,"ie"===t.Agent.browser||"edge"===t.Agent.browser?this._setBaseline(!0):"safari"===t.Agent.browser?(this._setBaseline(!0),this.SetDominantBaselineAttr(null)):this.SetDominantBaselineAttr("text-after-edge"))},t.OutputText.prototype.alignAuto=function(){this._vertAlign!=t.OutputText.V_ALIGN_AUTO&&(this._vertAlign==t.OutputText.V_ALIGN_BOTTOM&&"safari"===t.Agent.browser&&this._setBaseline(!1),this._vertAlign=t.OutputText.V_ALIGN_AUTO,"ie"===t.Agent.browser||"edge"===t.Agent.browser?this._setBaseline(!1):this.SetDominantBaselineAttr(null))},t.OutputText.prototype._setBaseline=function(t){this._baseline=t,this.setMatrix(this.getMatrix())},t.OutputText.prototype.SetDominantBaselineAttr=function(e){e?t.ToolkitUtils.setAttrNullNS(this.getElem(),"dominant-baseline",e):t.ToolkitUtils.removeAttrNullNS(this.getElem(),"dominant-baseline")},t.OutputText.prototype.setCSSStyle=function(e){t.OutputText.superclass.setCSSStyle.call(this,e);var i=this.getOuterElem();if(e){var n=e.getStyle("color"),o=t.ColorUtils.fixColorForPlatform(n);o&&o.color&&(t.ToolkitUtils.setAttrNullNS(i,"fill",o.color),null!=o.alpha&&t.ToolkitUtils.setAttrNullNS(i,"fill-opacity",o.alpha,1)),(n=e.getStyle("font-family"))&&!this.getCtx().isDefaultFontFamily(n)?t.ToolkitUtils.setAttrNullNS(i,"font-family",n):t.ToolkitUtils.removeAttrNullNS(i,"font-family"),(n=e.getStyle("font-size"))&&n!=this.getCtx().getDefaultFontSize()?(t.ToolkitUtils.setAttrNullNS(i,"font-size",n),"ie"!==t.Agent.browser&&"edge"!==t.Agent.browser&&"safari"!==t.Agent.browser||this.setMatrix(this.getMatrix())):t.ToolkitUtils.removeAttrNullNS(i,"font-size"),(n=e.getStyle("font-style"))&&t.ToolkitUtils.setAttrNullNS(i,"font-style",n),(n=e.getStyle("font-weight"))&&n!=this.getCtx().getDefaultFontWeight()?t.ToolkitUtils.setAttrNullNS(i,"font-weight",n):t.ToolkitUtils.removeAttrNullNS(i,"font-weight"),(n=e.getStyle("text-decoration"))&&t.ToolkitUtils.setAttrNullNS(i,"text-decoration",n),(n=e.getStyle("cursor"))&&t.ToolkitUtils.setAttrNullNS(i,"cursor",n),"ie"!==t.Agent.browser&&"edge"!==t.Agent.browser||this.setX(this._x)}},t.OutputText.prototype._getBaselineTranslation=function(){if(this._baseline){if(this._textString&&!this._isRepresentativeText())return t.TextUtils.getBaselineTranslation(this);var e=this.getVertAlignment();if(e!=t.OutputText.V_ALIGN_AUTO){var i=t.ToolkitUtils.getAttrNullNS(this.getElem(),"font-size");if(i||(i=t.ToolkitUtils.getAttrNullNS(this.getOuterElem(),"font-size")),(!i||isNaN(i)&&-1==i.indexOf("px"))&&(i=this.getCtx().getDefaultFontSize()),i=parseFloat(i),e==t.OutputText.V_ALIGN_TOP)return.8*i;if(e==t.OutputText.V_ALIGN_MIDDLE)return.3*i;if(e==t.OutputText.V_ALIGN_CENTRAL)return.4*i;if(e==t.OutputText.V_ALIGN_BOTTOM)return-.2*i}}return 0},t.OutputText.prototype._getBaselineAdjustedMatrix=function(e){this._baseline&&(e||(e=new t.Matrix),e=new t.Matrix(null,null,null,null,null,this._getBaselineTranslation()).concat(e));return e},t.OutputText.prototype.setMatrix=function(e){"ie"!==t.Agent.browser&&"edge"!==t.Agent.browser&&"safari"!==t.Agent.browser||(this._matrixForIE=e,e=this._getBaselineAdjustedMatrix(e)),t.OutputText.superclass.setMatrix.call(this,e)},t.OutputText.prototype.getMatrix=function(){var e=null;return"ie"!==t.Agent.browser&&"edge"!==t.Agent.browser&&"safari"!==t.Agent.browser||(e=this._matrixForIE),e||(e=t.OutputText.superclass.getMatrix.call(this)),e},t.OutputText.prototype._isRepresentativeText=function(){return this._textString==t.OutputText.REPRESENTATIVE_TEXT||this._textString==t.OutputText.BIDI_ZERO_WIDTH||this._textString==t.OutputText.BIDI_ZERO_WIDTH+t.OutputText.REPRESENTATIVE_TEXT},t.OutputText.prototype.GetSvgDimensions=function(){var e=t.OutputText.superclass.GetSvgDimensions.call(this);return e&&(e.y+=this._getBaselineTranslation(),this._isRepresentativeText()||(e.h=t.TextUtils.getTextStringHeight(this.getCtx(),this.getCSSStyle()))),e},t.OutputText.prototype.UpdateSelectionEffect=function(){},t.OutputText.prototype.getDimensions=function(e){var i=this.getHorizAlignment(),n=this.getVertAlignment(),o=t.TextUtils.getTextStringDimensions(this.getCtx(),this.getTextString(),this.getCSSStyle());return o.x=this.getX(),i===t.OutputText.H_ALIGN_RIGHT?o.x-=o.w:i===t.OutputText.H_ALIGN_CENTER&&(o.x-=o.w/2),n===t.OutputText.V_ALIGN_TOP?o.y=this.getY():n===t.OutputText.V_ALIGN_BOTTOM?o.y=this.getY()-o.h:n===t.OutputText.V_ALIGN_MIDDLE?o.y=this.getY()-o.h/2:n===t.OutputText.V_ALIGN_CENTRAL?o.y=this.getY()-.4*o.h:n===t.OutputText.V_ALIGN_AUTO&&(o.y+=this.getY()),e&&e!==this?this.ConvertCoordSpaceRect(o,e):o},t.OutputText.prototype.copyShape=function(){var e=new t.OutputText(this.getCtx(),this.getTextString(),this.getX(),this.getY());return e.setCSSStyle(this.getCSSStyle()),e.setHorizAlignment(this.getHorizAlignment()),e.setVertAlignment(this.getVertAlignment()),e},t.OutputText.prototype._needsTextAnchorAdjustment=function(){return t.Agent.isRightToLeft(this.getCtx())},t.OutputText.createIcon=function(){var e={};return function(i,n){var o=n.style,r=n.size,s=n.pos||{x:r/2,y:r/2},a=new t.OutputText(i,o.character);if(a.setClassName("oj-fwk-icon oj-dvt-icon"),a.getElem().style.fontSize=r+"px","ie"===t.Agent.browser||"edge"===t.Agent.browser){a.SetSvgProperty("x",0,0);var l="ie"===t.Agent.browser?.8*r:function(i,n,o){if(!e[n]){var r=new t.OutputText(i,o);r.setClassName("oj-fwk-icon oj-dvt-icon"),r.getElem().style.fontSize=n+"px",r.alignAuto();var s=i.getStage();s.addChild(r);var a=r.GetSvgDimensions();s.removeChild(r),e[n]=-a.y}return e[n]}(i,r,o.character),h=t.Agent.isRightToLeft(i),u=new t.Matrix(1,0,0,1,h?r/2:-r/2,l-r/2);t.OutputText.superclass.setMatrix.call(a,u.concat(o.transform).translate(s.x,s.y))}else a.alignCenter(),a.alignCentral(),a.setMatrix(o.transform.translate(s.x,s.y));return a}}(),t.BackgroundOutputText=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)},t.Obj.createSubclass(t.BackgroundOutputText,t.Container),t.BackgroundOutputText._PADDING=.15,t.BackgroundOutputText.prototype.Init=function(e,i,n,o,r,s){t.BackgroundOutputText.superclass.Init.call(this,e,"g",s),this.TextInstance=this.CreateTextInstance(e,i,n,o,s),this._backgroundRect=null,r&&this.setCSSStyle(r),this.addChild(this.TextInstance)},t.BackgroundOutputText.prototype.getTextString=function(){return this.TextInstance.getTextString()},t.BackgroundOutputText.prototype.setTextString=function(t){return this.TextInstance.setTextString(t),this},t.BackgroundOutputText.prototype.isTruncated=function(){return this.TextInstance.isTruncated()},t.BackgroundOutputText.prototype.getUntruncatedTextString=function(){return this.TextInstance.getUntruncatedTextString()},t.BackgroundOutputText.prototype.setUntruncatedTextString=function(t){this.TextInstance.setUntruncatedTextString(t)},t.BackgroundOutputText.prototype.getX=function(){return this.TextInstance.getX()},t.BackgroundOutputText.prototype.setX=function(t){return this.TextInstance=this.TextInstance.setX(t),this._realignBackground(),this},t.BackgroundOutputText.prototype.getY=function(){return this.TextInstance.getY()},t.BackgroundOutputText.prototype.setY=function(t){return this.TextInstance=this.TextInstance.setY(t),this._realignBackground(),this},t.BackgroundOutputText.prototype.setFontSize=function(e){this.TextInstance.setFontSize(e),this._style.setFontSize(t.CSSStyle.FONT_SIZE,String(e),this.getCtx()),this._realignBackground()},t.BackgroundOutputText.prototype.getHorizAlignment=function(){return this.TextInstance.getHorizAlignment()},t.BackgroundOutputText.prototype.setHorizAlignment=function(t){this.TextInstance.setHorizAlignment(t),this._realignBackground()},t.BackgroundOutputText.prototype.getVertAlignment=function(){return this.TextInstance.getVertAlignment()},t.BackgroundOutputText.prototype.setVertAlignment=function(t){this.TextInstance.setVertAlignment(t),this._realignBackground()},t.BackgroundOutputText.prototype.alignLeft=function(){this.TextInstance.alignLeft(),this._realignBackground()},t.BackgroundOutputText.prototype.alignCenter=function(){this.TextInstance.alignCenter(),this._realignBackground()},t.BackgroundOutputText.prototype.alignRight=function(){this.TextInstance.alignRight(),this._realignBackground()},t.BackgroundOutputText.prototype.alignTop=function(){this.TextInstance.alignTop(),this._realignBackground()},t.BackgroundOutputText.prototype.alignMiddle=function(){this.TextInstance.alignMiddle(),this._realignBackground()},t.BackgroundOutputText.prototype.alignBottom=function(){this.TextInstance.alignBottom(),this._realignBackground()},t.BackgroundOutputText.prototype.alignAuto=function(){this.TextInstance.alignAuto(),this._realignBackground()},t.BackgroundOutputText.prototype.setCSSStyle=function(e){e.getStyle(t.CSSStyle.BACKGROUND_COLOR)&&!e.getStyle(t.CSSStyle.COLOR)&&e.setStyle(t.CSSStyle.COLOR,t.ColorUtils.getContrastingTextColor(e.getStyle(t.CSSStyle.BACKGROUND_COLOR))),this.TextInstance&&this.TextInstance.setCSSStyle(e),(this._backgroundRect||t.BackgroundOutputText._hasBackgroundStyles(e))&&(this._backgroundRect||(this._backgroundRect=this.CreateBackground(this.getCtx(),this.TextInstance),this.addChildAt(this._backgroundRect,0)),this._setBackgroundCSSStyle(this._backgroundRect,e)),this._style=e},t.BackgroundOutputText.prototype.getCSSStyle=function(){return this._style},t.BackgroundOutputText.prototype.setMatrix=function(t){this.TextInstance.setMatrix(t),this._backgroundRect&&this._backgroundRect.setMatrix(t)},t.BackgroundOutputText.prototype.getMatrix=function(){return this.TextInstance.getMatrix()},t.BackgroundOutputText.prototype.getTextDimensions=function(t){return this.TextInstance.getDimensions(t)},t.BackgroundOutputText.prototype.getDimensions=function(e){var i=this.TextInstance.getDimensions(),n=i.h*t.BackgroundOutputText._PADDING;return i.x-=n,i.w+=2*n,this.ConvertCoordSpaceRect(i,e)},t.BackgroundOutputText.prototype.getDimensionsWithStroke=function(){return this.GetElemDimensionsWithStroke()},t.BackgroundOutputText.prototype.GetDimensionsWithStroke=function(t){var e=this.GetElemDimensionsWithStroke();return t&&t!==this?this.ConvertCoordSpaceRect(e,t):e},t.BackgroundOutputText.prototype.GetElemDimensionsWithStroke=function(){var t=this.getDimensions(),e=(this._backgroundRect?this._backgroundRect:this.TextInstance).getStroke();if(t&&e){var i=e.getWidth();if(i){var n=.5*i;t.x-=n,t.y-=n,t.w+=i,t.h+=i}}return t},t.BackgroundOutputText.prototype.copyShape=function(){return this.TextInstance.copyShape()},t.BackgroundOutputText.prototype.CreateTextInstance=function(e,i,n,o,r){return new t.OutputText(e,i,n,o,r)},t.BackgroundOutputText.prototype.CreateBackground=function(e,i){var n=i.getDimensions(),o=n.h*t.BackgroundOutputText._PADDING;return new t.Rect(e,n.x-o,n.y,n.w+2*o,n.h)},t.BackgroundOutputText.prototype._realignBackground=function(){if(this._backgroundRect){var e=this.TextInstance.getDimensions(),i=.15*e.h,n=this.getHorizAlignment(),o=this.getVertAlignment();n==t.OutputText.H_ALIGN_LEFT?this._backgroundRect.setX(this.getX()-i):n==t.OutputText.H_ALIGN_CENTER?this._backgroundRect.setX(this.getX()-.5*e.w-i):n==t.OutputText.H_ALIGN_RIGHT&&this._backgroundRect.setX(this.getX()-e.w-i);var r=parseFloat(this._style.getFontSize());isNaN(r)&&(r=0);var s=0;"blink"===t.Agent.engine&&o==t.OutputText.V_ALIGN_MIDDLE?s=.12*r:"ie"!==t.Agent.browser&&"edge"!==t.Agent.browser||o!=t.OutputText.V_ALIGN_BOTTOM||(s=.4*-r);var a=this.GetTextDimensionsForRealign(e);o==t.OutputText.V_ALIGN_TOP?this._backgroundRect.setY(this.getY()):o==t.OutputText.V_ALIGN_MIDDLE?this._backgroundRect.setY(this.getY()-.5*a-s):o==t.OutputText.V_ALIGN_CENTRAL?this._backgroundRect.setY(this.getY()-.5*a):o==t.OutputText.V_ALIGN_BOTTOM?this._backgroundRect.setY(this.getY()-a-s):o==t.OutputText.V_ALIGN_AUTO&&this._backgroundRect.setY(e.y),this._backgroundRect.setWidth(e.w+2*i),this._backgroundRect.setHeight(e.h)}},t.BackgroundOutputText.prototype._setBackgroundCSSStyle=function(e,i){if(i){var n=i.getStyle(t.CSSStyle.BACKGROUND_COLOR);null!=n?e.setSolidFill(n):e.setInvisibleFill();var o=i.getStyle(t.CSSStyle.BORDER_COLOR),r=i.getStyle(t.CSSStyle.BORDER_WIDTH),s=i.getStyle(t.CSSStyle.BORDER_RADIUS);if(o||r||s){var a=new t.CSSStyle;a.setStyle(t.CSSStyle.BORDER_COLOR,o),a.setStyle(t.CSSStyle.BORDER_WIDTH,r),a.setStyle(t.CSSStyle.BORDER_RADIUS,s),e.setCSSStyle(a)}}else e.setInvisibleFill();e.setMouseEnabled(!1)},t.BackgroundOutputText.prototype.GetTextDimensionsForRealign=function(t){return t.h},t.BackgroundOutputText._hasBackgroundStyles=function(t){return!!t&&t.hasBackgroundStyles()},t.BackgroundOutputText.prototype.includeChildSubtree=function(){return!1},t.MultilineText=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)},t.Obj.createSubclass(t.MultilineText,t.Container),t.MultilineText._LINE_SPACE=0,t.MultilineText.H_ALIGN_LEFT="left",t.MultilineText.H_ALIGN_CENTER="center",t.MultilineText.H_ALIGN_RIGHT="right",t.MultilineText.V_ALIGN_TOP="top",t.MultilineText.V_ALIGN_MIDDLE="middle",t.MultilineText.V_ALIGN_CENTRAL="central",t.MultilineText.V_ALIGN_BOTTOM="bottom",t.MultilineText.prototype.Init=function(e,i,n,o,r,s){t.MultilineText.superclass.Init.call(this,e,null,r),this._textInstance=null,this._additionalLines=[],this._lineHeight=null,this._yCoord=null,this._noWrap=!1,this._preserveNewLine=s||!1,this._preservedLines=[],this.setTextString(i),this.setX(n||0),this.setY(o||0),this.setMaxLines(1/0)},t.MultilineText.prototype.getTextString=function(){return this._textString},t.MultilineText.prototype.setTextString=function(e){this._textString=null!=e?String(e):null,this._textInstance?(this._textInstance.setTextString(e),this._removeAdditionalLines()):(this._textInstance=new t.OutputText(this.getCtx(),this._textString),this.addChild(this._textInstance)),this._preserveNewLine&&(this._generatePreservedLines(),this.wrapText(1/0,1/0,1,!1)),this._bTruncated=!1},t.MultilineText.prototype._getTextLines=function(){var t=this._additionalLines.slice();return this._textInstance.getParent()==this&&t.unshift(this._textInstance),t},t.MultilineText.prototype.getX=function(){return this._textInstance.getX()},t.MultilineText.prototype.setX=function(t){return this._getTextLines().forEach(function(e){e.setX(t)}),this},t.MultilineText.prototype.getY=function(){return this._textInstance.getY()},t.MultilineText.prototype.getYAlignCoord=function(){return this._yCoord},t.MultilineText.prototype.setY=function(t){if(this._yCoord=t,this._vertAlign)this._alignVerticalText();else{var e=t-this._textInstance.getY();e||(e=t),this._getTextLines().forEach(function(t){var i=t.getY();t.setY(i?i+e:e)})}return this},t.MultilineText.prototype.getMaxLines=function(){return this.GetProperty("maxLines")},t.MultilineText.prototype.setMaxLines=function(t){if(t>0)return this.SetProperty("maxLines",t)},t.MultilineText.prototype.isTruncated=function(){return this._bTruncated},t.MultilineText.prototype.getHorizAlignment=function(){return this._textInstance.getHorizAlignment()},t.MultilineText.prototype.setHorizAlignment=function(t){return this._getTextLines().forEach(function(e){e.setHorizAlignment(t)}),this},t.MultilineText.prototype.alignLeft=function(){this._horizAlign!=t.MultilineText.H_ALIGN_LEFT&&(this._horizAlign=t.MultilineText.H_ALIGN_LEFT,this._getTextLines().forEach(function(t){t.alignLeft()}))},t.MultilineText.prototype.alignCenter=function(){this._horizAlign!=t.MultilineText.H_ALIGN_CENTER&&(this._horizAlign=t.MultilineText.H_ALIGN_CENTER,this._getTextLines().forEach(function(t){t.alignCenter()}))},t.MultilineText.prototype.alignRight=function(){this._horizAlign!=t.MultilineText.H_ALIGN_RIGHT&&(this._horizAlign=t.MultilineText.H_ALIGN_RIGHT,this._getTextLines().forEach(function(t){t.alignRight()}))},t.MultilineText.prototype.alignTop=function(){this._vertAlign!=t.MultilineText.V_ALIGN_TOP&&(this._vertAlign=t.MultilineText.V_ALIGN_TOP,this._alignVerticalText(),this._getTextLines().forEach(function(t){t.alignTop()}))},t.MultilineText.prototype.alignMiddle=function(){this._vertAlign!=t.MultilineText.V_ALIGN_MIDDLE&&(this._vertAlign=t.MultilineText.V_ALIGN_MIDDLE,this._alignVerticalText(),this._getTextLines().forEach(function(t){t.alignMiddle()}))},t.MultilineText.prototype.alignCentral=function(){this._vertAlign!=t.MultilineText.V_ALIGN_CENTRAL&&(this._vertAlign=t.MultilineText.V_ALIGN_CENTRAL,this._alignVerticalText(),this._getTextLines().forEach(function(t){t.alignCentral()}))},t.MultilineText.prototype.alignBottom=function(){this._vertAlign!=t.MultilineText.V_ALIGN_BOTTOM&&(this._vertAlign=t.MultilineText.V_ALIGN_BOTTOM,this._alignVerticalText(),this._getTextLines().forEach(function(t){t.alignBottom()}))},t.MultilineText.prototype._alignVerticalText=function(){if(this._vertAlign)for(var e=this.getYAlignCoord(),i=this.getLineCount(),n=this.getLineHeight(),o=this._getTextLines(),r=0,s=0;s<o.length;s++){var a=o[s];if(this._vertAlign==t.MultilineText.V_ALIGN_TOP)r=n*s;else if(this._vertAlign==t.MultilineText.V_ALIGN_MIDDLE||this.vertAlign==t.MultilineText.V_ALIGN_CENTRAL){r=n*s-n*(i-1)/2}else this._vertAlign==t.MultilineText.V_ALIGN_BOTTOM&&(r=-n*(i-s-1));a.setY(e+r)}},t.MultilineText.prototype.getCSSStyle=function(){return this._textInstance.getCSSStyle()},t.MultilineText.prototype.setCSSStyle=function(t){return this._lineHeight=null,this._getTextLines().forEach(function(e){e.setCSSStyle(t)}),this},t.MultilineText.prototype.copyShape=function(){var e=new t.MultilineText(this.getCtx(),this.getTextString(),this.getX(),this.getY());return e.setCSSStyle(this.getCSSStyle()).setHorizAlignment(this.getHorizAlignment()).setMaxLines(this.getMaxLines()),e},t.MultilineText.prototype._removeAdditionalLines=function(){for(var t=0;t<this._additionalLines.length;t++)this.removeChild(this._additionalLines[t]);this._additionalLines=[]},t.MultilineText.prototype._generatePreservedLines=function(){if(this._preserveNewLine){this._preservedLines=[];var t=this.getTextString().split(/\n+/),e=this._textInstance,i=null;this._preservedLines.push(e);for(var n=0;n<t.length;n++)if(i=t[n].replace(/\s+/g," "),e.setTextString(i),n<t.length-1){var o=e.copyShape();this._preservedLines.push(o),e=o}}},t.MultilineText.prototype.__fitText=function(e,i,n){if(!this._preserveNewLine){if(this._textInstance.setTextString(this.getTextString()),this._removeAdditionalLines(),!t.TextUtils.fitText(this._textInstance,e,i,this,n))return this.getParent().removeChild(this),!1;if(!this._textInstance.isTruncated())return!0;if(!this.isWrapEnabled())return!0}return this.wrapText(e,i,n,!1)},t.MultilineText.prototype.wrapText=function(e,i,n,o){this.getLineCount()>1&&this._removeAdditionalLines();var r=this.getLineHeight(),s=r*t.MultilineText._LINE_SPACE,a=this.getMaxLines(),l=Math.min(i,a*(r+s)-s)-r-s;if(this._preserveNewLine){for(var h=!1,u=null,c=0;c<this._preservedLines.length;c++){var p=this._preservedLines[c];if(l<s+r)return this._bTruncated=!0,h;if(t.TextUtils.fitText(p,e,1/0,this,n)){if(h=!0,l-=s+r,p.isTruncated()&&!this.isTruncated()&&(this._bTruncated=!0),c>0){this._additionalLines.push(p);var _=u?u.getY()+s+r:this.getY();p.setY(_),this.addChild(p)}u=p}}return h}p=this._textInstance;var g=null,d=null,S=null,f=this.getTextString().split(/\s+/);f.reverse();for(var y=function(){var t=p.copyShape();t.setY(p.getY()+s+r),this.addChild(t),this._additionalLines.push(t),p=t,g=null,l-=s+r}.bind(this),T=!0;f.length>0;){var v=f.pop(),m=g?g+" "+v:v;if(p.setTextString(m),p.setUntruncatedTextString(null),t.TextUtils.fitText(p,e,1/0,this,n,!0))if(p.isTruncated()){if(l<s+r)return this._bTruncated=!0,!0;if(S=p.getTextString(),d=p,g)p.setTextString(g),f.push(v);else{if(o)return this._textInstance.setTextString(this.getTextString()),this._removeAdditionalLines(),!1;this._bTruncated=!0}f.length>0&&y()}else g=m;else{if(null==g){if(T||!d)return this._textInstance.setTextString(null),this._removeAdditionalLines(),!1;d.setTextString(S);for(var E=this._additionalLines.pop();E&&E!==d;)this.removeChild(E),E=this._additionalLines.pop();return E&&this._additionalLines.push(E),!0}f.push(v),y()}T=!1}return!0},t.MultilineText.prototype.GetSvgDimensions=function(e){var i=this._getTextLines();if(0==i.length)return new t.Rectangle(0,0,0,0);var n=new t.Rectangle(1/0,1/0,0,0);return i.forEach(function(t){var e=t.getDimensions();n.x=Math.min(n.x,e.x),n.y=Math.min(n.y,e.y),n.w=Math.max(n.w,e.w),n.h+=e.h}),this.ConvertCoordSpaceRect(n,e)},t.MultilineText.prototype.getLineCount=function(){return this._additionalLines.length+1},t.MultilineText.prototype.getLineHeight=function(){return this._lineHeight||(this._lineHeight=t.TextUtils.getTextStringHeight(this.getCtx(),this.getCSSStyle())),this._lineHeight},t.MultilineText.prototype.setWrapEnabled=function(t){0==t&&(this._textInstance.getParent()!=this&&this.addChild(this._textInstance),this._textInstance.getTextString()||this._textInstance.setTextString(this.getTextString()),this._removeAdditionalLines()),this._noWrap=!t},t.MultilineText.prototype.isWrapEnabled=function(){return 0==this._noWrap},t.MultilineText.prototype.getUntruncatedTextString=function(){return this.isTruncated()?this.getTextString():null},t.MultilineText.prototype.setUntruncatedTextString=function(t){},t.MultilineText.prototype.getDimensions=function(t){return this.GetSvgDimensions(t)},t.MultilineText.prototype.UpdateSelectionEffect=function(){},t.MultilineText.prototype.getHorizAlignment=function(){return this._horizAlign},t.MultilineText.prototype.setHorizAlignment=function(e){e==t.MultilineText.H_ALIGN_LEFT?this.alignLeft():e==t.MultilineText.H_ALIGN_CENTER?this.alignCenter():e==t.MultilineText.H_ALIGN_RIGHT&&this.alignRight()},t.MultilineText.prototype.getVertAlignment=function(){return this._vertAlign},t.MultilineText.prototype.setVertAlignment=function(e){e==t.MultilineText.V_ALIGN_TOP?this.alignTop():e==t.MultilineText.V_ALIGN_MIDDLE?this.alignMiddle():e==t.MultilineText.V_ALIGN_CENTRAL?this.alignCentral():e==t.MultilineText.V_ALIGN_BOTTOM&&this.alignBottom()},t.BackgroundMultilineText=function(t,e,i,n,o,r,s){this.Init(t,e,i,n,o,r,s)},t.Obj.createSubclass(t.BackgroundMultilineText,t.BackgroundOutputText),t.BackgroundMultilineText.prototype.Init=function(e,i,n,o,r,s,a){this._preserveNewLine=a||!1,t.BackgroundMultilineText.superclass.Init.call(this,e,i,n,o,r,s)},t.BackgroundMultilineText.prototype.wrapText=function(t,e,i,n){return this.TextInstance.wrapText(t,e,i,n)},t.BackgroundMultilineText.prototype.CreateTextInstance=function(e,i,n,o,r){return new t.MultilineText(e,i,n,o,r,this._preserveNewLine)},t.BackgroundMultilineText.prototype.GetTextDimensionsForRealign=function(){return this.getLineHeight()},t.BackgroundMultilineText.prototype.getDimensions=function(e){var i=this.TextInstance.getDimensions(),n=i.h*t.BackgroundOutputText._PADDING/this.getLineCount();return i.x-=n,i.w+=2*n,this.ConvertCoordSpaceRect(i,e)},t.BackgroundMultilineText.prototype.__fitText=function(t,e,i){return this.TextInstance.__fitText(t,e,i)},t.BackgroundMultilineText.prototype._getTextLines=function(){return this.TextInstance._getTextLines()},t.BackgroundMultilineText.prototype.getLineHeight=function(){return this.TextInstance.getLineHeight()},t.BackgroundMultilineText.prototype.getLineCount=function(){return this.TextInstance.getLineCount()},t.BackgroundMultilineText.prototype.getYAlignCoord=function(){return this.TextInstance.getYAlignCoord()},t.BackgroundMultilineText.prototype.setWrapEnabled=function(t){this.TextInstance.setWrapEnabled(t)},t.BackgroundMultilineText.prototype.isWrapEnabled=function(){return this.TextInstance.isWrapEnabled()},t.BackgroundMultilineText.prototype.UpdateSelectionEffect=function(){},t.Use=function(t,e,i,n,o){this.Init(t,e,i,n,o)},t.Obj.createSubclass(t.Use,t.Displayable),t.Use._uniqueSeed=0,t.Use.prototype.Init=function(e,i,n,o,r){t.Use.superclass.Init.call(this,e,"use",r);var s=o.getId();if(s||(s="use"+t.Use._uniqueSeed++,o.setId(s)),e.existsGlobalDefReference(s))e.increaseGlobalDefReference(s);else{var a=o.getElem();t.ToolkitUtils.setAttrNullNS(a,"id",s),e.appendDefs(a),e.increaseGlobalDefReference(s)}this._targetId=s,t.ToolkitUtils.setHref(this._elem,t.ToolkitUtils.getUrlPathById(s)),this.setX(i).setY(n)},t.Displayable.defineProps(t.Use,{x:{value:0},y:{value:0}}),t.Use.prototype.destroy=function(){this.getCtx().decreaseGlobalDefReference(this._targetId),t.Use.superclass.destroy.call(this)},t.CSSGradient=function(t){this.Init(t)},t.Obj.createSubclass(t.CSSGradient,t.Obj),t.CSSGradient.LINEAR=0,t.CSSGradient.RADIAL=1,t.CSSGradient.prototype.Init=function(t){this._type=t},t.CSSGradient.prototype.getAlphas=function(){return this._arAlphas},t.CSSGradient.prototype.setAlphas=function(t){this._arAlphas=t},t.CSSGradient.prototype.getColors=function(){return this._arColors},t.CSSGradient.prototype.setColors=function(t){this._arColors=t},t.CSSGradient.prototype.getRatios=function(){return this._arRatios},t.CSSGradient.prototype.setRatios=function(t){this._arRatios=t};var S,f=function(){this.Init()};t.Obj.createSubclass(f,t.CSSGradient),f.LEFT=0,f.BOTTOM_LEFT=45,f.BOTTOM=90,f.BOTTOM_RIGHT=135,f.RIGHT=180,f.TOP_RIGHT=225,f.TOP=270,f.TOP_LEFT=315,f.prototype.Init=function(){f.superclass.Init.call(this,t.CSSGradient.LINEAR)},f.prototype.getAngle=function(){return this._angle},f.prototype.setAngle=function(t){this._angle=t},t.GradientParser=function(){},t.Obj.createSubclass(t.GradientParser,t.Obj),t.GradientParser.GD_LINEAR="linear-gradient",t.GradientParser.GD_TOP="top",t.GradientParser.GD_BOTTOM="bottom",t.GradientParser.GD_LEFT="left",t.GradientParser.GD_RIGHT="right",t.GradientParser.GD_TO="to",t.GradientParser.parseCSSGradient=function(e){return null!=e&&(e=e.trim(),t.GradientParser._startsWith(e,t.GradientParser.GD_LINEAR))?(e=t.GradientParser._removeParenthesis(e,t.GradientParser.GD_LINEAR),t.GradientParser._parseLinearGradient(e)):null},t.GradientParser._parseLinearGradient=function(e){var i=new RegExp("(-?(?:\\d*\\.)?\\d+)"),n=new RegExp("(deg|rad|grad|turn)"),o=new RegExp("(left|right)"),r=new RegExp("(top|bottom)"),s=new RegExp("(?:(to)\\s+)"),a=new RegExp("(?:"+i.source+n.source+")"),l=new RegExp("(?:"+o.source+"(?:\\s+"+r.source+")?)"),h=new RegExp("(?:"+r.source+"(?:\\s+"+o.source+")?)"),u=new RegExp("(?:"+l.source+"|"+h.source+")"),c=new RegExp("(?:"+a.source+"|(?:"+s.source+"?"+u.source+"))"),p=new RegExp("(?:\\s*"+c.source+"\\s*,\\s*)","i"),_=e.match(p);if(null==_||0==_.length)return null;_.length;var g=new f,d=_[5]==t.GradientParser.GD_TOP||_[6]==t.GradientParser.GD_TOP,S=_[5]==t.GradientParser.GD_BOTTOM||_[6]==t.GradientParser.GD_BOTTOM,y=_[4]==t.GradientParser.GD_LEFT||_[7]==t.GradientParser.GD_LEFT,T=_[4]==t.GradientParser.GD_RIGHT||_[7]==t.GradientParser.GD_RIGHT;if(_[3]==t.GradientParser.GD_TO&&((d||S)&&(d=!d,S=!S),(y||T)&&(y=!y,T=!T)),d)y?g.setAngle(f.TOP_LEFT):T?g.setAngle(f.TOP_RIGHT):g.setAngle(f.TOP);else if(S)y?g.setAngle(f.BOTTOM_LEFT):T?g.setAngle(f.BOTTOM_RIGHT):g.setAngle(f.BOTTOM);else if(y)g.setAngle(f.LEFT);else if(T)g.setAngle(f.RIGHT);else if(_[2]){a=parseFloat(_[1]);isNaN(a)||("grad"==_[2]?a=a/200*180:"rad"==_[2]?a=a/Math.PI*180:"turn"==_[2]&&(a=a/.5*180),g.setAngle(a))}return e=e.substring(_[0].length),t.GradientParser._parseCSSColorStops(e,g),g},t.GradientParser._parseCSSColorStops=function(e,i){var n=e.match(/(#[0-9a-f]+|rgb\(\s*(\d+),\s*(\d+),\s*(\d+)\s*\)|rgba\(\s*(\d+),\s*(\d+),\s*(\d+),\s*(\d?)(\.\d+)?\s*\)|[a-z]+)(\s+\d+\.?\d*%)?/gi);null!=n&&n.length>0&&t.GradientParser._parseColorStops(n,i)},t.GradientParser._parseColorStops=function(e,i){for(var n,o,r,s=e.length,a=[],l=[],h=[],u=!0,c=[],p=0;p<e.length;p++)r=t.CSSStyle.parseBorderColor(e[p],c),n=c.pop(),l[p]=n,a[p]=t.ColorUtils.getAlpha(n),(r=r.trim()).length>0&&(o=parseFloat(r),isNaN(o)||r.endsWith("%")&&(h[p]=o/100,u=!1));if(s>1&&u)for(var _=0;_<s;_++)h[_]=_/(s-1);else u&&(h[0]=0);i.setColors(l),i.setAlphas(a),i.setRatios(h)},t.GradientParser._removeParenthesis=function(e,i){return")"!=e.charAt(e.length-1)?null:(e=e.substring(i.length),t.GradientParser.removeQuotes(e,"(",")"))},t.GradientParser.removeQuotes=function(t,e,i){if((t=t.trim()).charAt(0)!=e)return t;null==i&&(i=e);var n=t.lastIndexOf(i);return n<0?t.substring(1):t.substring(1,n)},t.GradientParser._startsWith=function(t,e){return 0==t.indexOf(e)},t.CSSStyle=function(t){this.Init(t)},t.Obj.createSubclass(t.CSSStyle,t.Obj),t.CSSStyle.SKIN_ALTA="alta",t.CSSStyle.BACKGROUND="background",t.CSSStyle.BACKGROUND_COLOR="background-color",t.CSSStyle.BACKGROUND_IMAGE="background-image",t.CSSStyle.BACKGROUND_REPEAT="background-repeat",t.CSSStyle.BACKGROUND_POSITION="background-position",t.CSSStyle.BORDER="border",t.CSSStyle.BORDER_TOP="border-top",t.CSSStyle.BORDER_BOTTOM="border-bottom",t.CSSStyle.BORDER_LEFT="border-left",t.CSSStyle.BORDER_RIGHT="border-right",t.CSSStyle.BORDER_WIDTH="border-width",t.CSSStyle.BORDER_TOP_WIDTH="border-top-width",t.CSSStyle.BORDER_BOTTOM_WIDTH="border-bottom-width",t.CSSStyle.BORDER_LEFT_WIDTH="border-left-width",t.CSSStyle.BORDER_RIGHT_WIDTH="border-right-width",t.CSSStyle.BORDER_COLOR="border-color",t.CSSStyle.BORDER_TOP_COLOR="border-top-color",t.CSSStyle.BORDER_BOTTOM_COLOR="border-bottom-color",t.CSSStyle.BORDER_LEFT_COLOR="border-left-color",t.CSSStyle.BORDER_RIGHT_COLOR="border-right-color",t.CSSStyle.BORDER_STYLE="border-style",t.CSSStyle.BORDER_RADIUS="border-radius",t.CSSStyle.BORDER_TOP_LEFT_RADIUS="border-top-left-radius",t.CSSStyle.BORDER_TOP_RIGHT_RADIUS="border-top-right-radius",t.CSSStyle.BORDER_BOTTOM_RIGHT_RADIUS="border-bottom-right-radius",t.CSSStyle.BORDER_BOTTOM_LEFT_RADIUS="border-bottom-left-radius",t.CSSStyle.MARGIN="margin",t.CSSStyle.MARGIN_TOP="margin-top",t.CSSStyle.MARGIN_BOTTOM="margin-bottom",t.CSSStyle.MARGIN_LEFT="margin-left",t.CSSStyle.MARGIN_RIGHT="margin-right",t.CSSStyle.PADDING="padding",t.CSSStyle.PADDING_TOP="padding-top",t.CSSStyle.PADDING_BOTTOM="padding-bottom",t.CSSStyle.PADDING_LEFT="padding-left",t.CSSStyle.PADDING_RIGHT="padding-right",t.CSSStyle.COLOR="color",t.CSSStyle.FONT_FAMILY="font-family",t.CSSStyle.FONT_SIZE="font-size",t.CSSStyle.FONT_STYLE="font-style",t.CSSStyle.FONT_WEIGHT="font-weight",t.CSSStyle.TEXT_DECORATION="text-decoration",t.CSSStyle.TEXT_ALIGN="text-align",t.CSSStyle.HEIGHT="height",t.CSSStyle.WIDTH="width",t.CSSStyle.MAX_WIDTH="max-width",t.CSSStyle.NO_REPEAT="no-repeat",t.CSSStyle.REPEAT="repeat",t.CSSStyle.REPEAT_X="repeat-x",t.CSSStyle.REPEAT_Y="repeat-y",t.CSSStyle.AUTO="auto",t.CSSStyle.AUTO_MARGIN="8",t.CSSStyle.WHITE_SPACE="white-space",t.CSSStyle._NAMED_FONT_SIZE_MAP={"xx-small":"9","x-small":"10",small:"13",medium:"16",large:"18","x-large":"24","xx-large":"32"},t.CSSStyle._NAMED_WIDTH_MAP={thin:"2",medium:"4",thick:"6"},t.CSSStyle._numericAttrsList=[t.CSSStyle.MAX_WIDTH,t.CSSStyle.WIDTH,t.CSSStyle.HEIGHT,t.CSSStyle.BORDER_WIDTH,t.CSSStyle.BORDER_TOP_WIDTH,t.CSSStyle.BORDER_BOTTOM_WIDTH,t.CSSStyle.BORDER_LEFT_WIDTH,t.CSSStyle.BORDER_RIGHT_WIDTH,t.CSSStyle.MARGIN,t.CSSStyle.MARGIN_TOP,t.CSSStyle.MARGIN_BOTTOM,t.CSSStyle.MARGIN_LEFT,t.CSSStyle.MARGIN_RIGHT,t.CSSStyle.PADDING,t.CSSStyle.PADDING_TOP,t.CSSStyle.PADDING_BOTTOM,t.CSSStyle.PADDING_LEFT,t.CSSStyle.PADDING_RIGHT],t.CSSStyle._DOUBLE_QUOTE='"',t.CSSStyle._SINGLE_QUOTE="'",t.CSSStyle.COLORS_ALTA=["#237bb1","#68c182","#fad55c","#ed6647","#8561c8","#6ddbdb","#ffb54d","#e371b2","#47bdef","#a2bf39","#a75dba","#f7f37b"],t.CSSStyle.prototype.Init=function(t){this._styleMap={},this.parseInlineStyle(t)},t.CSSStyle.prototype.parseInlineStyle=function(e){if(e){var i=this;if(e instanceof Object)for(var n in e){var o=e[n];n=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i.setStyle(n,o)}else t.CSSStyle._parseStyleString(e,function(t,e){i.setStyle(t,e)})}},t.CSSStyle.prototype.setStyle=function(e,i){if(null==i)this._setStyleAttr(e,i);else switch(e){case"background-repeat":this._setBackgroundRepeat(e,i);break;case"color":case"background-color":case"border-top-color":case"border-bottom-color":case"border-left-color":case"border-right-color":this._setColorAttr(e,i);break;case"border-top":case"border-bottom":case"border-left":case"border-right":this._setBorderSide(e,i);break;case"border":this._setBorderShorthand(e,i);break;case"border-color":this._setBorderColorShorthand(e,i);break;case"border-width":this._setBorderWidthShorthand(e,i);break;case"border-radius":this._setBorderRadius(e,i);break;case"padding":this._setPaddingShorthand(e,i);break;case"margin":this._setMarginShorthand(e,i);break;case"font-size":this.setFontSize(e,i);break;case"background-image":var n=t.GradientParser.parseCSSGradient(i);n&&(i=n),this._setStyleAttr(e,i);break;default:this._setStyleAttr(e,i)}return this},t.CSSStyle.prototype.getStyle=function(t){return this._styleMap[t]},t.CSSStyle.prototype._setStyleAttr=function(t,e){return null!=e?this._styleMap[t]=e:delete this._styleMap[t],this},t.CSSStyle.prototype.setFontSize=function(e,i,n){var o=i.trim(),r=t.CSSStyle._NAMED_FONT_SIZE_MAP[o];if(r)this._setStyleAttr(e,String(r)+"px");else{var s=n?n.getDefaultFontSize():t.Context.DEFAULT_FONT_SIZE;this._setStyleAttr(e,isNaN(parseFloat(o))?s:o)}},t.CSSStyle.prototype._setBorderWidthShorthand=function(e,i){var n=i.split(" "),o=null;switch(n.length){case 1:this._setStyleAttr(e,t.CSSStyle._getBorderWidth(n[0])),this._setStyleAttr(t.CSSStyle.BORDER_TOP_WIDTH,null),this._setStyleAttr(t.CSSStyle.BORDER_BOTTOM_WIDTH,null),this._setStyleAttr(t.CSSStyle.BORDER_RIGHT_WIDTH,null),this._setStyleAttr(t.CSSStyle.BORDER_LEFT_WIDTH,null);break;case 2:o=t.CSSStyle._getBorderWidth(n[0]),this._setStyleAttr(t.CSSStyle.BORDER_TOP_WIDTH,o),this._setStyleAttr(t.CSSStyle.BORDER_BOTTOM_WIDTH,o),o=t.CSSStyle._getBorderWidth(n[1]),this._setStyleAttr(t.CSSStyle.BORDER_LEFT_WIDTH,o),this._setStyleAttr(t.CSSStyle.BORDER_RIGHT_WIDTH,o);break;case 3:this._setStyleAttr(t.CSSStyle.BORDER_TOP_WIDTH,t.CSSStyle._getBorderWidth(n[0])),o=t.CSSStyle._getBorderWidth(n[1]),this._setStyleAttr(t.CSSStyle.BORDER_LEFT_WIDTH,o),this._setStyleAttr(t.CSSStyle.BORDER_RIGHT_WIDTH,o),this._setStyleAttr(t.CSSStyle.BORDER_BOTTOM_WIDTH,t.CSSStyle._getBorderWidth(n[2]));break;case 4:this._setStyleAttr(t.CSSStyle.BORDER_TOP_WIDTH,t.CSSStyle._getBorderWidth(n[0])),this._setStyleAttr(t.CSSStyle.BORDER_RIGHT_WIDTH,t.CSSStyle._getBorderWidth(n[1])),this._setStyleAttr(t.CSSStyle.BORDER_BOTTOM_WIDTH,t.CSSStyle._getBorderWidth(n[2])),this._setStyleAttr(t.CSSStyle.BORDER_LEFT_WIDTH,t.CSSStyle._getBorderWidth(n[3]))}},t.CSSStyle._getBorderWidth=function(e){var i=e.trim(),n=t.CSSStyle._NAMED_WIDTH_MAP[i];return n||(n=isNaN(parseFloat(i))?"0px":i),n},t.CSSStyle.prototype._setBorderSide=function(e,i){for(var n,o=i.split(" "),r=null,s=!1,a=0;a<o.length;a++)if(n=e,0==(r=o[a]).indexOf("rgb")){for(var l=a+1;l<o.length&&(r+=o[l],a++,-1==o[l].indexOf(")"));l++);e.endsWith("-"+t.CSSStyle.COLOR)||(n=e+"-"+t.CSSStyle.COLOR),this._setStyleAttr(n,r)}else t.CSSStyle._isColorValue(r)?(e.endsWith("-"+t.CSSStyle.COLOR)||(n=e+"-"+t.CSSStyle.COLOR),this._setStyleAttr(n,t.CSSStyle._parseHexColor(r))):t.CSSStyle._isBorderWidthValue(r)?(e.endsWith("-"+t.CSSStyle.WIDTH)||(n=e+"-"+t.CSSStyle.WIDTH),this._setStyleAttr(n,r)):"none"==i&&(s=!0);s&&this._setStyleAttr(e+"-"+t.CSSStyle.WIDTH,"0")},t.CSSStyle.prototype.getMargin=function(e){return this._getSideWidth(e,t.CSSStyle.MARGIN)},t.CSSStyle.prototype.getPadding=function(e){return this._getSideWidth(e,t.CSSStyle.PADDING)},t.CSSStyle.prototype.getBorderWidth=function(){var e=this.getStyle(t.CSSStyle.BORDER_WIDTH);return e?t.CSSStyle.toNumber(e):(e=this.getStyle(t.CSSStyle.BORDER_TOP_WIDTH))?t.CSSStyle.toNumber(e):(e=this.getStyle(t.CSSStyle.BORDER_RIGHT_WIDTH))?t.CSSStyle.toNumber(e):(e=this.getStyle(t.CSSStyle.BORDER_BOTTOM_WIDTH))?t.CSSStyle.toNumber(e):(e=this.getStyle(t.CSSStyle.BORDER_LEFT_WIDTH))?t.CSSStyle.toNumber(e):0},t.CSSStyle.prototype.getMaxWidth=function(){return this.getStyle(t.CSSStyle.MAX_WIDTH)},t.CSSStyle.prototype.getWidth=function(){return this.getStyle(t.CSSStyle.WIDTH)},t.CSSStyle.prototype.getHeight=function(){return this.getStyle(t.CSSStyle.HEIGHT)},t.CSSStyle.toNumber=function(t){return t?(t=parseFloat(t),isNaN(t)?0:t):0},t.CSSStyle.prototype._setBorderColorShorthand=function(e,i){var n,o=t.CSSStyle._parseBorderColorString(e,i);switch(o.length){case 1:this._setStyleAttr(e,o[0]),this._setStyleAttr(t.CSSStyle.BORDER_TOP_COLOR,null),this._setStyleAttr(t.CSSStyle.BORDER_BOTTOM_COLOR,null),this._setStyleAttr(t.CSSStyle.BORDER_RIGHT_COLOR,null),this._setStyleAttr(t.CSSStyle.BORDER_LEFT_COLOR,null);break;case 2:n=o[0],this._setStyleAttr(t.CSSStyle.BORDER_TOP_COLOR,n),this._setStyleAttr(t.CSSStyle.BORDER_BOTTOM_COLOR,n),n=o[1],this._setStyleAttr(t.CSSStyle.BORDER_LEFT_COLOR,n),this._setStyleAttr(t.CSSStyle.BORDER_RIGHT_COLOR,n);break;case 3:this._setStyleAttr(t.CSSStyle.BORDER_TOP_COLOR,o[0]),n=o[1],this._setStyleAttr(t.CSSStyle.BORDER_LEFT_COLOR,n),this._setStyleAttr(t.CSSStyle.BORDER_RIGHT_COLOR,n),this._setStyleAttr(t.CSSStyle.BORDER_BOTTOM_COLOR,o[2]);break;case 4:this._setStyleAttr(t.CSSStyle.BORDER_TOP_COLOR,o[0]),this._setStyleAttr(t.CSSStyle.BORDER_RIGHT_COLOR,o[1]),this._setStyleAttr(t.CSSStyle.BORDER_BOTTOM_COLOR,o[2]),this._setStyleAttr(t.CSSStyle.BORDER_LEFT_COLOR,o[3])}},t.CSSStyle.prototype._setPaddingShorthand=function(e,i){var n=i.split(" "),o=null;switch(n.length){case 1:this._setStyleAttr(e,this._getPercent(n[0])),this._setStyleAttr(t.CSSStyle.PADDING_TOP,null),this._setStyleAttr(t.CSSStyle.PADDING_BOTTOM,null),this._setStyleAttr(t.CSSStyle.PADDING_RIGHT,null),this._setStyleAttr(t.CSSStyle.PADDING_LEFT,null);break;case 2:o=this._getPercent(n[0]),this._setStyleAttr(t.CSSStyle.PADDING_TOP,o),this._setStyleAttr(t.CSSStyle.PADDING_BOTTOM,o),o=this._getPercent(n[1]),this._setStyleAttr(t.CSSStyle.PADDING_LEFT,o),this._setStyleAttr(t.CSSStyle.PADDING_RIGHT,o);break;case 3:this._setStyleAttr(t.CSSStyle.PADDING_TOP,this._getPercent(n[0])),o=this._getPercent(n[1]),this._setStyleAttr(t.CSSStyle.PADDING_LEFT,o),this._setStyleAttr(t.CSSStyle.PADDING_RIGHT,o),this._setStyleAttr(t.CSSStyle.PADDING_BOTTOM,this._getPercent(n[2]));break;case 4:this._setStyleAttr(t.CSSStyle.PADDING_TOP,this._getPercent(n[0])),this._setStyleAttr(t.CSSStyle.PADDING_RIGHT,this._getPercent(n[1])),this._setStyleAttr(t.CSSStyle.PADDING_BOTTOM,this._getPercent(n[2])),this._setStyleAttr(t.CSSStyle.PADDING_LEFT,this._getPercent(n[3]))}},t.CSSStyle.prototype._setMarginShorthand=function(e,i){var n=i.split(" "),o=null;switch(n.length){case 1:this._setStyleAttr(e,this._getMargin(n[0])),this._setStyleAttr(t.CSSStyle.MARGIN_TOP,null),this._setStyleAttr(t.CSSStyle.MARGIN_BOTTOM,null),this._setStyleAttr(t.CSSStyle.MARGIN_RIGHT,null),this._setStyleAttr(t.CSSStyle.MARGIN_LEFT,null);break;case 2:o=this._getMargin(n[0]),this._setStyleAttr(t.CSSStyle.MARGIN_TOP,o),this._setStyleAttr(t.CSSStyle.MARGIN_BOTTOM,o),o=this._getMargin(n[1]),this._setStyleAttr(t.CSSStyle.MARGIN_LEFT,o),this._setStyleAttr(t.CSSStyle.MARGIN_RIGHT,o);break;case 3:this._setStyleAttr(t.CSSStyle.MARGIN_TOP,this._getMargin(n[0])),o=this._getMargin(n[1]),this._setStyleAttr(t.CSSStyle.MARGIN_LEFT,o),this._setStyleAttr(t.CSSStyle.MARGIN_RIGHT,o),this._setStyleAttr(t.CSSStyle.MARGIN_BOTTOM,this._getMargin(n[2]));break;case 4:this._setStyleAttr(t.CSSStyle.MARGIN_TOP,this._getMargin(n[0])),this._setStyleAttr(t.CSSStyle.MARGIN_RIGHT,this._getMargin(n[1])),this._setStyleAttr(t.CSSStyle.MARGIN_BOTTOM,this._getMargin(n[2])),this._setStyleAttr(t.CSSStyle.MARGIN_LEFT,this._getMargin(n[3]))}},t.CSSStyle.prototype._getMargin=function(e){var i=e.trim();return t.CSSStyle.AUTO==i?t.CSSStyle.AUTO_MARGIN:this._getPercent(i)},t.CSSStyle.prototype._getPercent=function(t){return t.trim()},t.CSSStyle.prototype._setBorderShorthand=function(e,i){for(var n=i.split(" "),o=null,r=!1,s=0;s<n.length;s++)if(0==(o=n[s]).indexOf("rgb")){for(var a=s+1;a<n.length&&(o+=n[a],s++,-1==n[a].indexOf(")"));a++);this._setBorderColorShorthand(t.CSSStyle.BORDER_COLOR,o)}else t.CSSStyle._isColorValue(o)?this._setBorderColorShorthand(t.CSSStyle.BORDER_COLOR,o):t.CSSStyle._isBorderWidthValue(o)?this._setBorderWidthShorthand(t.CSSStyle.BORDER_WIDTH,o):"none"==i&&(r=!0);r&&this._setBorderWidthShorthand(t.CSSStyle.BORDER_WIDTH,"0")},t.CSSStyle._getBorderRadius=function(t){var e=t.trim();return isNaN(parseFloat(e))?"0px":e},t.CSSStyle.prototype._setBorderRadius=function(e,i){var n=i.split("/");if(null!=n[0]){var o=n[0].trim().split(" ");switch(o.length){case 1:default:this._setStyleAttr(e,t.CSSStyle._getBorderRadius(o[0])),this._setStyleAttr(t.CSSStyle.BORDER_TOP_LEFT_RADIUS,null),this._setStyleAttr(t.CSSStyle.BORDER_TOP_RIGHT_RADIUS,null),this._setStyleAttr(t.CSSStyle.BORDER_BOTTOM_RIGHT_RADIUS,null),this._setStyleAttr(t.CSSStyle.BORDER_BOTTOM_LEFT_RADIUS,null)}if(2==n.length&&null!=n[1]){var r=n[1].trim().split(" ");switch(r.length){case 1:this.getStyle(e)?this._setStyleAttr(e,this.getStyle(e)+" "+t.CSSStyle._getBorderRadius(r[0])):this._setStyleAttr(e,t.CSSStyle._getBorderRadius(r[0]))}}}else this._setStyleAttr(e,"0px")},t.CSSStyle.prototype.getBorderRadius=function(){return"undefined"!==this.getStyle(t.CSSStyle.BORDER_RADIUS)&&null!==this.getStyle(t.CSSStyle.BORDER_RADIUS)?t.CSSStyle.toNumber(this.getStyle(t.CSSStyle.BORDER_RADIUS)):0},t.CSSStyle.prototype._setBackgroundRepeat=function(e,i){var n=i.split(" ");2==n.length&&(n[0]==n[1]?i=n[0]:n[0]==t.CSSStyle.REPEAT&&n[1]==t.CSSStyle.NO_REPEAT&&(i=t.CSSStyle.REPEAT_X),n[0]==t.CSSStyle.NO_REPEAT&&n[1]==t.CSSStyle.REPEAT&&(i=t.CSSStyle.REPEAT_Y)),this._setStyleAttr(e,i)},t.CSSStyle.prototype._setColorAttr=function(e,i){var n=t.ColorUtils.getColorFromName(i);n?this._setStyleAttr(e,n):t.CSSStyle._isColorValue(i)&&this._setStyleAttr(e,i)},t.CSSStyle.prototype.clone=function(){var e=new t.CSSStyle;for(var i in this._styleMap)e._setStyleAttr(i,this.getStyle(i));return e},t.CSSStyle.prototype.merge=function(t){if(t)for(var e in t._styleMap)this._setStyleAttr(e,t.getStyle(e));return this},t.CSSStyle.prototype.mergeUnder=function(t){if(t)for(var e in t._styleMap)this.getStyle(e)||this._setStyleAttr(e,t.getStyle(e));return this},t.CSSStyle.prototype.toString=function(){var t="";for(var e in this._styleMap)t+=e+":"+this.getStyle(e)+"; ";return t},t.CSSStyle.prototype.hasBackgroundStyles=function(){return!!(this.getStyle(t.CSSStyle.BORDER_COLOR)||this.getStyle(t.CSSStyle.BORDER_WIDTH)||this.getStyle(t.CSSStyle.BORDER_RADIUS)||this.getStyle(t.CSSStyle.BACKGROUND_COLOR))},t.CSSStyle._isColorValue=function(e){return 0==(e=e.trim()).indexOf("rgb")||0==e.indexOf("#")||!!t.ColorUtils.getColorFromName(e)},t.CSSStyle._isBorderWidthValue=function(e){var i=e.trim();return!!t.CSSStyle._NAMED_WIDTH_MAP[i]||!isNaN(parseFloat(i))},t.CSSStyle._parseBorderColorString=function(e,i){i=i.trim();for(var n=[];null!=i&&i.length>0;)i=t.CSSStyle.parseBorderColor(i,n);return n},t.CSSStyle.parseBorderColor=function(e,i){var n,o=(e=e.trim()).length,r=-1;if(!e)return e;if(0==e.indexOf("rgb"))r=e.indexOf(")")+1,n=e.slice(0,r);else{-1==(r=e.indexOf(" "))&&(r=o);var s=e.slice(0,r);(n=t.ColorUtils.getColorFromName(s))||(n=t.CSSStyle._parseHexColor(s))}return n&&(i.push(n),e=e.slice(r)),e},t.CSSStyle._parseHexColor=function(t){return t?"#"!==t.charAt(0)||isNaN("0x"+t.substring(1))?"#000000":t:null},t.CSSStyle.prototype._getSideWidth=function(e,i){var n=this.getStyle(e);return n||(n=this.getStyle(i)),t.CSSStyle.toNumber(n)},t.CSSStyle.prototype.getFontSize=function(){return this.getStyle(t.CSSStyle.FONT_SIZE)},t.CSSStyle.mergeStyles=function(e){var i=new t.CSSStyle;if(e)for(var n=0;n<e.length;n++)i.merge(e[n]);return i},t.CSSStyle.prototype.isEmpty=function(){for(var t in this._styleMap)return!1;return!0},t.CSSStyle.prototype.hashCodeForTextMeasurement=function(){for(var e="",i=t.CSSStyle.getTextMeasurementProperties(),n=0;n<i.length;n++){var o=this.getStyle(i[n]);o&&(e+=o)}return e},t.CSSStyle.getTextMeasurementProperties=function(){return[t.CSSStyle.FONT_FAMILY,t.CSSStyle.FONT_SIZE,t.CSSStyle.FONT_STYLE,t.CSSStyle.FONT_WEIGHT]},t.CSSStyle.cssObjectToString=function(t){var e="";return t&&JSON.parse(JSON.stringify(t),function(t,i){t&&(t=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e+=t+":"+i+";")}),e},t.CSSStyle.cssStringToObject=function(e){var i={};return t.CSSStyle._parseStyleString(e,function(e,n){e=t.CSSStyle.cssStringToObjectProperty(e),i[e]=n}),i},t.CSSStyle.cssStringToObjectProperty=function(t){return t&&(t=t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})),t},t.CSSStyle._parseStyleString=function(e,i){if(e&&e.length>0)for(var n=e.split(";"),o=0;o<n.length;o++){var r=n[o];if(r&&r.length>0){var s=r.indexOf(":");if(s>-1){var a=r.substring(0,s).trim(),l=r.substring(s+1).trim();a&&a.length>0&&l&&l.length>0&&(a==t.CSSStyle.BACKGROUND_IMAGE&&l.indexOf("data:image/")>=0&&(l=l+";"+n[o+1],o++),i(a,l))}}}},t.CSSStyle.getTimeMilliseconds=function(t){return"string"==typeof t&&(t="ms"==t.slice(-2)?parseInt(t.slice(0,-2)):"s"==t.slice(-1)?1e3*parseFloat(t.slice(0,-1)):parseInt(t)),t},t.CSSStyle.prototype.applyStylesToElement=function(e){t.CSSStyle.applyCssObjectToElement(this._styleMap,e)},t.CSSStyle.applyCssObjectToElement=function(e,i){for(var n=Object.keys(e),o=0;o<n.length;o++){var r=n[o];i.style[t.CSSStyle.cssStringToObjectProperty(r)]=e[r]}},t.BaseComponent=function(){},t.Obj.createSubclass(t.BaseComponent,t.Container),t.BaseComponent.prototype.Init=function(e,i,n){t.BaseComponent.superclass.Init.call(this,e),this._callback=i,this._callbackObj=n,this.Defaults=null,this.Options=null,this.Width=0,this.Height=0,this.EventManager=null,this.Animation=null,this.AnimationStopped=!1,this._optionsCache=new t.BaseComponentCache,this._cache=new t.BaseComponentCache,this._SHARED_DEFS_DIV_ID="_dvtSharedDefs"},t.BaseComponent.prototype.GetDefaults=function(t){return this.Defaults?this.Defaults.getDefaults(t):{}},t.BaseComponent.prototype.GetComponentDescription=function(){return this.getOptions().translations.componentName},t.BaseComponent.prototype.IsParentRoot=function(){return this.getParent()==this.getCtx().getStage()},t.BaseComponent.prototype.UpdateAriaAttributes=function(){if(this.IsParentRoot()){var e=this.getOptions().translations;this.getCtx().setAriaRole("application"),this.getCtx().setAriaLabel(t.ResourceUtils.format(e.labelAndValue,[e.labelDataVisualization,t.TextUtils.processAriaLabel(this.GetComponentDescription())]))}},t.BaseComponent.prototype.SetOptions=function(t){},t.BaseComponent.prototype.getOptions=function(){return this.Options||(this.Options=this.GetDefaults()),this.Options},t.BaseComponent.prototype.applyOptions=function(e,i){this.Options&&e&&this.SetOptions(t.JsonUtils.merge(e,this.Options,i))},t.BaseComponent.prototype.render=function(t,e,i){},t.BaseComponent.prototype.RenderComplete=function(){this.Animation=null,this.AnimationStopped=!1,this.getCtx().resetIsOffscreen(),this.dispatchEvent(t.EventFactory.newReadyEvent())},t.BaseComponent.prototype.getWidth=function(){return this.Width},t.BaseComponent.prototype.getHeight=function(){return this.Height},t.BaseComponent.prototype.highlight=function(t){},t.BaseComponent.prototype.select=function(t){},t.BaseComponent.prototype.dispatchEvent=function(t){this._callback&&this._callback.call&&this._callback.call(this._callbackObj,t,this)},t.BaseComponent.prototype.getDimensionsWithStroke=function(t){return this.getDimensions(t)},t.BaseComponent.prototype.getEventManager=function(){return this.EventManager},t.BaseComponent.prototype.getKeyboardFocus=function(){var t=this.getEventManager();return t&&t.getFocus()?t.getFocus().getTargetElem():null},t.BaseComponent.prototype.getCache=function(){return this._cache},t.BaseComponent.prototype.getOptionsCache=function(){return this._optionsCache},t.BaseComponent.prototype.StopAnimation=function(t){this.Animation&&(this.AnimationStopped=!0,this.Animation.stop(t||!1),this.Animation=null)},t.BaseComponent.prototype.appendSharedDefs=function(e){var i=document.getElementById(this._SHARED_DEFS_DIV_ID);if(!i){(i=document.createElement("div")).id=this._SHARED_DEFS_DIV_ID,i.style.visibility="hidden",i.style.width="0px",i.style.height="0px",i.style.left="0px",i.style.top="0px",i.style.position="absolute";var n=t.ToolkitUtils.createSvgDocument();t.ToolkitUtils.setAttrNullNS(n,"width","0px"),t.ToolkitUtils.setAttrNullNS(n,"height","0px");var o=t.SvgShapeUtils.createElement("defs");n.appendChild(o),i.appendChild(n),document.body.appendChild(i)}return(o=i.childNodes[0].childNodes[0]).appendChild(e),e},t.BaseComponent.prototype.destroy=function(){this.StopAnimation(),this.EventManager&&(this.EventManager.removeListeners(this),this.EventManager.destroy(),this.EventManager=null);var e=1===document.getElementsByClassName("oj-dvtbase").length,i=document.getElementById(this._SHARED_DEFS_DIV_ID);e&&i&&document.body.removeChild(i),t.BaseComponent.superclass.destroy.call(this)},t.BaseComponentDefaults=function(){this.Init()},t.Obj.createSubclass(t.BaseComponentDefaults,t.Obj),t.BaseComponentDefaults.FONT_SIZE="font-size: ",t.BaseComponentDefaults.FONT_SIZE_11=t.BaseComponentDefaults.FONT_SIZE+"11px;",t.BaseComponentDefaults.FONT_SIZE_12=t.BaseComponentDefaults.FONT_SIZE+"12px;",t.BaseComponentDefaults.FONT_SIZE_13=t.BaseComponentDefaults.FONT_SIZE+"13px;",t.BaseComponentDefaults.FONT_SIZE_14=t.BaseComponentDefaults.FONT_SIZE+"14px;",t.BaseComponentDefaults.FONT_WEIGHT_BOLD="font-weight: bold;",t.BaseComponentDefaults.FONT_FAMILY_ALTA="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;",t.BaseComponentDefaults.FONT_FAMILY_ALTA_11=t.BaseComponentDefaults.FONT_FAMILY_ALTA+t.BaseComponentDefaults.FONT_SIZE_11,t.BaseComponentDefaults.FONT_FAMILY_ALTA_12=t.BaseComponentDefaults.FONT_FAMILY_ALTA+t.BaseComponentDefaults.FONT_SIZE_12,t.BaseComponentDefaults.FONT_FAMILY_ALTA_13=t.BaseComponentDefaults.FONT_FAMILY_ALTA+t.BaseComponentDefaults.FONT_SIZE_13,t.BaseComponentDefaults.FONT_FAMILY_ALTA_14=t.BaseComponentDefaults.FONT_FAMILY_ALTA+t.BaseComponentDefaults.FONT_SIZE_14,t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD=t.BaseComponentDefaults.FONT_FAMILY_ALTA+t.BaseComponentDefaults.FONT_WEIGHT_BOLD,t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD_11=t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD+t.BaseComponentDefaults.FONT_SIZE_11,t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD_12=t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD+t.BaseComponentDefaults.FONT_SIZE_12,t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD_13=t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD+t.BaseComponentDefaults.FONT_SIZE_13,t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD_14=t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD+t.BaseComponentDefaults.FONT_SIZE_14,t.BaseComponentDefaults._SKINS=[t.CSSStyle.SKIN_ALTA],t.BaseComponentDefaults.prototype.Init=function(t,e){this._defaults=t||{},this._context=e,this.constructor.defaultsCache||(this.constructor.defaultsCache={})},t.BaseComponentDefaults.prototype.getBaseSkinName=function(){return t.CSSStyle.SKIN_ALTA},t.BaseComponentDefaults.prototype.calcOptions=function(e){var i=e?e.skin:null,n=this.getDefaults(i);if(!e)return n;var o=this.getNoCloneObject();if(this._context&&this._context.dataProviderProps)for(var r=this._context.dataProviderProps,s=0;s<r.length;s++)o[r[s]]=!0;var a=t.JsonUtils.merge(e,n,o);return 0==this.getAnimationDuration(a)&&(a.animationOnDataChange="none",a.animationOnDisplay="none"),a},t.BaseComponentDefaults.prototype.getDefaults=function(e){if(e||(e=this.getBaseSkinName()),this.constructor.defaultsCache[e])return t.JsonUtils.clone(this.constructor.defaultsCache[e]);for(var i=Math.max(t.BaseComponentDefaults._SKINS.indexOf(e),0),n=t.JsonUtils.clone(this._defaults[t.BaseComponentDefaults._SKINS[0]]),o=1;o<=i;o++)n=t.JsonUtils.merge(this._defaults[t.BaseComponentDefaults._SKINS[o]],n);return this.constructor.defaultsCache[e]=t.JsonUtils.clone(n),n},t.BaseComponentDefaults.prototype.getNoCloneObject=function(){return{}},t.BaseComponentDefaults.prototype.getAnimationDuration=function(t){return t.styleDefaults?t.styleDefaults.animationDuration:null},t.BaseComponentCache=function(){this.Init()},t.BaseComponentCache.prototype.Init=function(){this.Cache={}},t.BaseComponentCache.prototype.clearCache=function(){this.Cache={}},t.BaseComponentCache.prototype.getFromCache=function(t){return this.Cache[t]},t.BaseComponentCache.prototype.putToCache=function(t,e){this.Cache[t]=e},t.BaseComponentCache.prototype.getFromCachedMap=function(t,e){return this._getCachedMap(t)[e]},t.BaseComponentCache.prototype._getCachedMap=function(t){var e=this.getFromCache(t);return e||(e={},this.putToCache(t,e)),e},t.BaseComponentCache.prototype.putToCachedMap=function(t,e,i){this._getCachedMap(t)[e]=i},t.BaseComponentCache.prototype.getFromCachedMap2D=function(t,e,i){return this._getCachedMap2D(t).get(e,i)},t.BaseComponentCache.prototype._getCachedMap2D=function(e){var i=this.getFromCache(e);return i||(i=new t.Map2D,this.putToCache(e,i)),i},t.BaseComponentCache.prototype.putToCachedMap2D=function(t,e,i,n){this._getCachedMap2D(t).put(e,i,n)},t.SimpleScrollbar=function(e,i,n,o){t.SimpleScrollbar.superclass.Init.call(this,e),this._callback=i,this._callbackObj=n,this._dragTarget=o},t.Obj.createSubclass(t.SimpleScrollbar,t.Container),t.SimpleScrollbar._THUMB_MIN_SIZE=12,t.SimpleScrollbar.prototype.render=function(e,i,n){this._width=i,this._height=n,this._globalMin=e.min,this._globalMax=e.max,this._isHoriz=e.isHorizontal,this._isReversed=e.isReversed;var o=new t.Rect(this.getCtx(),0,0,i,n);o.setSolidFill(e.backgroundColor),o.setPixelHinting(!0),this.addChild(o),this._thumb=new t.Rect(this.getCtx(),0,0,i,n),this._thumb.setSolidFill(e.color),this._thumb.setPixelHinting(!0),this.addChild(this._thumb),this._thumbMin=this._globalMin,this._thumbMax=this._globalMax,this._renderedThumbMin=this._thumbMin,this._renderedThumbMax=this._thumbMax;var r=t.Agent.isTouchDevice()?8:4,s=new t.Rect(this.getCtx(),-r,-r,this._width+2*r,this._height+2*r);s.setInvisibleFill(),this.addChild(s);var a=null!=this._dragTarget;t.SvgDocumentUtils.addDragListeners(a?this._dragTarget:this,this._onDragStart,this._onDragMove,this._onDragEnd,this,!a),t.Agent.isTouchDevice()||a||this.addEvtListener(t.MouseEvent.CLICK,this._onClick,!1,this),this._dragged=!1},t.SimpleScrollbar.prototype.setViewportRange=function(e,i,n,o){null!=n&&(this._globalMin=n),null!=o&&(this._globalMax=o),this._thumbMin=e,this._thumbMax=i;var r=i-e,s=this._globalMax-this._globalMin,a=Math.min(t.SimpleScrollbar._THUMB_MIN_SIZE/(this._isHoriz?this._width:this._height)*s,s);r<a&&(i+=(a-r)/2,(e-=(a-r)/2)<this._globalMin&&(e=this._globalMin,i=this._globalMin+a),i>this._globalMax&&(i=this._globalMax,e=this._globalMax-a)),this._renderedThumbMin=e,this._renderedThumbMax=i;var l=this._getCoord(e),h=this._getCoord(i);this._isHoriz?(this._thumb.setX(Math.min(l,h)),this._thumb.setWidth(Math.abs(h-l))):(this._thumb.setY(Math.min(l,h)),this._thumb.setHeight(Math.abs(h-l)))},t.SimpleScrollbar.prototype._getCoord=function(t){var e=(t-this._globalMin)/(this._globalMax-this._globalMin);return this._isReversed&&(e=1-e),this._isHoriz?e*this._width:e*this._height},t.SimpleScrollbar.prototype._getValue=function(t,e){var i=this.stageToLocal(this.getCtx().pageToStageCoords(t,e)),n=this._isHoriz?i.x/this._width:i.y/this._height;return this._isReversed&&(n=1-n),n=Math.min(Math.max(n,0),1),this._globalMin+n*(this._globalMax-this._globalMin)},t.SimpleScrollbar.prototype._onClick=function(t){var e=this._getValue(t.pageX,t.pageY);if(!(e>=this._renderedThumbMin&&e<=this._renderedThumbMax)){var i=this._thumbMax-this._thumbMin;this._setViewportRange(e-i/2,e+i/2,"end")}},t.SimpleScrollbar.prototype._onDragStart=function(t){var e;if(t.touches){if(1!=t.touches.length)return!1;e=this._getValue(t.touches[0].pageX,t.touches[0].pageY)}else e=this._getValue(t.pageX,t.pageY);return!!(this._dragTarget||e>=this._renderedThumbMin&&e<=this._renderedThumbMax)&&(this._prevVal=Math.min(Math.max(e,this._thumbMin),this._thumbMax),this._dragged=!0,!0)},t.SimpleScrollbar.prototype._onDragMove=function(t){if(this._dragged){var e;if(t.touches){if(1!=t.touches.length)return;e=this._getValue(t.touches[0].pageX,t.touches[0].pageY)}else e=this._getValue(t.pageX,t.pageY);var i=e-this._prevVal;this._dragTarget&&(i*=-1),this._setViewportRange(this._thumbMin+i,this._thumbMax+i,"move"),this._prevVal=e,t.preventDefault()}},t.SimpleScrollbar.prototype._onDragEnd=function(t){if(this._dragged){if(t.touches)this._setViewportRange(this._thumbMin,this._thumbMax,"end");else{var e=this._getValue(t.pageX,t.pageY)-this._prevVal;this._setViewportRange(this._thumbMin+e,this._thumbMax+e,"end")}this._dragged=!1}},t.SimpleScrollbar.prototype._setViewportRange=function(e,i,n){var o=i-e;if(e<this._globalMin&&(e=this._globalMin,i=this._globalMin+o),i>this._globalMax&&(i=this._globalMax,e=this._globalMax-o),this.setViewportRange(e,i),this._callback){var r=t.EventFactory.newSimpleScrollbarEvent(n,e,i);this._callback.call(this._callbackObj,r,this)}},t.SimpleScrollableContainer=function(e,i,n,o){t.SimpleScrollableContainer.superclass.Init.call(this,e),this._contentSize=o?i:n,this._width=i,this._height=n,this._background=new t.Rect(e,0,0,i,n),this._background.setInvisibleFill(),this.addChild(this._background),this._container=new t.Container(e),this.addChild(this._container),this._isHorizontalScrolling=o,this._isScrollbarVisible=!1,t.Agent.isTouchDevice()||this.addEvtListener(t.MouseEvent.MOUSEWHEEL,this._onMouseWheel,!1,this)},t.Obj.createSubclass(t.SimpleScrollableContainer,t.Container),t.SimpleScrollableContainer._SCROLLBAR_WIDTH=3,t.SimpleScrollableContainer._SCROLLBAR_GAP=2,t.SimpleScrollableContainer.prototype.getScrollingPane=function(){return this._container},t.SimpleScrollableContainer.prototype.prepareContentPane=function(){var e=this._container.getDimensions();if(this._isHorizontalScrolling?this._contentSize=e.w+e.x:this._contentSize=e.h+e.y,this.hasScrollingContent()){if(this._isHorizontalScrolling?this._contentSize+=e.x:this._contentSize+=e.y,!this._maskContainer){var i=new t.Rectangle(0,0,this._width,this._height);this._fadeTop=new t.Mask(new t.LinearGradientFill(this._isHorizontalScrolling?0:270,["#FFFFFF","#FFFFFF"],[0,1],[0,.1]),i),this._fadeBottom=new t.Mask(new t.LinearGradientFill(this._isHorizontalScrolling?180:90,["#FFFFFF","#FFFFFF"],[0,1],[0,.1]),i),this._fadeTopBottom=new t.Mask(new t.LinearGradientFill(this._isHorizontalScrolling?180:90,["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"],[0,1,1,0],[0,.1,.9,1]),i),this._maskContainer=new t.Container(this.getCtx()),this.addChild(this._maskContainer);var n=new t.ClipPath;n.addRect(0,0,this._width,this._height),this._container.setClipPath(n),this._maskContainer.addChild(this._container),this._scrollbar=new t.SimpleScrollbar(this.getCtx(),this._handleScrollbar,this,this),this._scrollbarTimer=new t.Timer(this.getCtx(),100,this._hideScrollbar,this)}this._maskContainer.setMask(this._fadeBottom);var o={color:"#9E9E9E",backgroundColor:"#F0F0F0",isHorizontal:this._isHorizontalScrolling,isReversed:!1,min:0,max:this._contentSize};this._isHorizontalScrolling?(this._scrollbar.render(o,this._getScrollbarWidth(),t.SimpleScrollableContainer._SCROLLBAR_WIDTH),this._scrollbar.setTranslate(t.SimpleScrollableContainer._SCROLLBAR_GAP,this._height-(t.SimpleScrollableContainer._SCROLLBAR_WIDTH+t.SimpleScrollableContainer._SCROLLBAR_GAP))):(this._scrollbar.render(o,t.SimpleScrollableContainer._SCROLLBAR_WIDTH,this._getScrollbarWidth()),this._scrollbar.setTranslate(t.Agent.isRightToLeft(this.getCtx())?t.SimpleScrollableContainer._SCROLLBAR_GAP:this._width-(t.SimpleScrollableContainer._SCROLLBAR_WIDTH+t.SimpleScrollableContainer._SCROLLBAR_GAP),t.SimpleScrollableContainer._SCROLLBAR_GAP)),this._scrollbar.setViewportRange(0,this._getAvailSize()),t.Agent.isEnvironmentTest()||this._scrollbar.setAlpha(0),this.addChild(this._scrollbar)}else this.addChild(this._container),this.removeChild(this._maskContainer),this.removeChild(this._scrollbar)},t.SimpleScrollableContainer.prototype._getScrollbarWidth=function(){return(this._isHorizontalScrolling?this._width:this._height)-2*t.SimpleScrollableContainer._SCROLLBAR_GAP},t.SimpleScrollableContainer.prototype._getAvailSize=function(){return this._isHorizontalScrolling?this._width:this._height},t.SimpleScrollableContainer.prototype._hideScrollbar=function(e){this._isScrollbarVisible&&(this._isScrollbarVisible=!1,this._scrollbarTimer.reset(),this._fadeOutAnim=new t.AnimFadeOut(this.getCtx(),this._scrollbar,.2),this._fadeOutAnim.play())},t.SimpleScrollableContainer.prototype._showScrollbar=function(t){this._isScrollbarVisible?(this._scrollbarTimer.reset(),this._scrollbarTimer.start()):(this._fadeOutAnim&&(this._fadeOutAnim.stop(!0),this._fadeOutAnim=null),this._scrollbar.setAlpha(1),this._isScrollbarVisible=!0,this._scrollbarTimer.start())},t.SimpleScrollableContainer.prototype._updateFade=function(t){0==t?this._maskContainer.setMask(this._fadeBottom):t+this._getAvailSize()>=this._contentSize?this._maskContainer.setMask(this._fadeTop):this._maskContainer.setMask(this._fadeTopBottom)},t.SimpleScrollableContainer.prototype._onMouseWheel=function(t){if(this.hasScrollingContent()){this._showScrollbar();var e=null!=t.wheelDelta?t.wheelDelta:0,i=-1*(this._isHorizontalScrolling?this._container.getTranslateX():this._container.getTranslateY())-4*e,n=Math.max(this._contentSize-this._getAvailSize(),0),o=Math.max(Math.min(i,n),0);this._isHorizontalScrolling?(this._container.setTranslateX(-1*o),this._scrollbar.setViewportRange(o+this._width,o)):(this._container.setTranslateY(-1*o),this._scrollbar.setViewportRange(o,o+this._height)),this._updateFade(o),t.preventDefault()}},t.SimpleScrollableContainer.prototype._handleScrollbar=function(t){this._showScrollbar(),this._isHorizontalScrolling?this._container.setTranslateX(-1*t.newMin):this._container.setTranslateY(-1*t.newMin),this._updateFade(t.newMin)},t.SimpleScrollableContainer.prototype.getWidth=function(){return this._width},t.SimpleScrollableContainer.prototype.getHeight=function(){return this._height},t.SimpleScrollableContainer.prototype.scrollIntoView=function(t){if(this.hasScrollingContent()){var e,i=t.getDimensions(t.getParent()),n=this._container.getDimensions();if(this._isHorizontalScrolling){var o=-1*this._container.getTranslateX(),r=i.x-n.x,s=i.x+i.w-this._width+n.x;o<s?(this._container.setTranslateX(-1*s),this._scrollbar.setViewportRange(s+this._width,s),e=s):o>r&&(this._container.setTranslateX(-1*r),this._scrollbar.setViewportRange(r+this._width,r),e=r)}else{var a=-1*this._container.getTranslateY(),l=i.y-n.y,h=i.y+i.h-this._height+n.y;a<h?(this._container.setTranslateY(-1*h),this._scrollbar.setViewportRange(h,h+this._height),e=h):a>l&&(this._container.setTranslateY(-1*l),this._scrollbar.setViewportRange(l,l+this._height),e=l)}null!=e&&this._updateFade(e)}},t.SimpleScrollableContainer.prototype.hasScrollingContent=function(){return this._contentSize>this._getAvailSize()},t.DragSource=function(t){this.Init(t)},t.Obj.createSubclass(t.DragSource,t.Obj),t.DragSource.DRAG_FEEDBACK_MARGIN=2,t.DragSource.prototype.Init=function(t){this._context=t,this._dragCandidate=null,this._dragObj=null,this._dragCoords=null},t.DragSource.prototype.getDragCandidate=function(){return this._dragCandidate},t.DragSource.prototype.setDragCandidate=function(t){t&&t.isDragAvailable&&t.getDragTransferable?this._dragCandidate=t:this._dragCandidate=null},t.DragSource.prototype.isDragAvailable=function(t){return null!=this._dragCandidate?this._dragCandidate.isDragAvailable(t):null},t.DragSource.prototype.getDragTransferable=function(t,e){return this._dragCandidate?(this._dragObj=this._dragCandidate,this._dragCoords={x:t,y:e},this._dragCandidate.getDragTransferable(t,e)):null},t.DragSource.prototype.getDragOverFeedback=function(t,e){this._context.getTooltipManager().hideTooltip();var i=this.getDragObject();return i&&i.getDragFeedback?i.getDragFeedback(t,e):null},t.DragSource.prototype.getDragContext=function(t,e){return this._dragObj&&this._dragObj.getDragContext?this._dragObj.getDragContext(t,e):null},t.DragSource.prototype.getDragObject=function(){return this._dragObj},t.DragSource.prototype.getDragCoords=function(){return this._dragCoords},t.DragSource.prototype.getDragOffset=function(e,i){var n={},o=this.getDragOverFeedback(e,i);if(o){var r=t.DragAndDropUtils.getDragFeedbackBounds(o,this._context.getStage()),s=this.getDragObject();s&&s.afterDragOverFeedback&&s.afterDragOverFeedback(o),r&&(n.x=e-r.x,n.y=i-r.y,n.x+=t.DragSource.DRAG_FEEDBACK_MARGIN,n.y+=t.DragSource.DRAG_FEEDBACK_MARGIN)}else n.x=0,n.y=0;return n},t.DragSource.prototype.getPointerOffset=function(t,e){return{x:0,y:0}},t.DragSource.prototype.initiateDrag=function(){var e=this.getTouchManager();t.Agent.isTouchDevice()&&e&&e.cancelTouchHold()},t.DragSource.prototype.dragDropEnd=function(){this._dragCandidate=null,this._dragObj=null,this._dragCoords=null},t.DragSource.prototype.setTouchManager=function(t){this._touchManager=t},t.DragSource.prototype.getTouchManager=function(){return this._touchManager},t.Button=function(t,e,i,n,o,r,s,a){this.Init(t,e,i,n,o,r,s,a)},t.Obj.createSubclass(t.Button,t.Container),t.Button.STATE_ENABLED=0,t.Button.STATE_OVER=1,t.Button.STATE_DOWN=2,t.Button.STATE_DISABLED=3,t.Button.NO_EVENT_LISTENERS=!0,t.Button.prototype.Init=function(e,i,n,o,r,s,a,l){t.Button.superclass.Init.call(this,e,null,s),this.setCallback(a,l),this._bDuringInit=!0,this.setUpState(i),this.setOverState(n),this.setDownState(o),r&&this.setDisabledState(r),this.setEnabled(!0),this.drawUpState(),this._tooltip=null,this._bToggleEnabled=!1,this._bToggled=!1,this._bDuringInit=!1},t.Button.prototype.isEnabled=function(){return this._enabled},t.Button.prototype.setEnabled=function(e){if(this._enabled!=e){this._enabled=e;var i=t.Agent.isTouchDevice(),n=i?t.TouchEvent.TOUCHSTART:t.MouseEvent.CLICK,o=i?{capture:!1,passive:!1}:{capture:!1};e?(this.addEvtListener(t.MouseEvent.MOUSEOVER,this.OnMouseOver,!1,this),this.addEvtListener(t.MouseEvent.MOUSEOUT,this.OnMouseOut,!1,this),this.addEvtListener(t.MouseEvent.MOUSEDOWN,this.OnMouseDown,!1,this),this.addEvtListener(t.MouseEvent.MOUSEUP,this.OnMouseUp,!1,this),this.addEvtListener(n,this.OnClick,o,this),this.setCursor(t.SelectionEffectUtils.getSelectingCursor())):(this.removeEvtListener(t.MouseEvent.MOUSEOVER,this.OnMouseOver,!1,this),this.removeEvtListener(t.MouseEvent.MOUSEOUT,this.OnMouseOut,!1,this),this.removeEvtListener(t.MouseEvent.MOUSEDOWN,this.OnMouseDown,!1,this),this.removeEvtListener(t.MouseEvent.MOUSEUP,this.OnMouseUp,!1,this),this.removeEvtListener(n,this.OnClick,o,this),this.setCursor(null)),this.initState()}},t.Button.prototype.OnMouseOver=function(t){this._bToggled?this.drawOverDownState():this.drawOverState()},t.Button.prototype.OnMouseOut=function(t){this._bToggled?this.drawDownState():this.drawUpState()},t.Button.prototype.OnMouseDown=function(t){this.drawDownState()},t.Button.prototype.OnMouseUp=function(e){this._bToggled?t.Agent.isTouchDevice()?this.drawDownState():this.drawOverDownState():t.Agent.isTouchDevice()?this.drawUpState():this.drawOverState()},t.Button.prototype.OnClick=function(e){this._bToggleEnabled&&(this._bToggled=!this._bToggled,this._bToggled?t.Agent.isTouchDevice()?this.drawDownState():this.drawOverDownState():t.Agent.isTouchDevice()?this.drawUpState():this.drawOverState()),this._callback&&(this._callback.call(this._callbackObj,e,this),e.stopPropagation(),e.preventDefault())},t.Button.prototype.drawUpState=function(){this._enableButton(this.upState,!0),this._enableButton(this.downState,!1),this._enableButton(this.overState,!1),this._enableButton(this.disabledState,!1),this._enableButton(this.overDownState,!1)},t.Button.prototype.drawOverState=function(){this._enableButton(this.upState,!1),this._enableButton(this.downState,!1),this._enableButton(this.overState,!0),this._enableButton(this.disabledState,!1),this._enableButton(this.overDownState,!1)},t.Button.prototype.drawDownState=function(){this._enableButton(this.upState,!1),this._enableButton(this.downState,!0),this._enableButton(this.overState,!1),this._enableButton(this.disabledState,!1),this._enableButton(this.overDownState,!1)},t.Button.prototype.drawDisabledState=function(){this._enableButton(this.upState,!1),this._enableButton(this.overState,!1),this._enableButton(this.downState,!1),this._enableButton(this.disabledState,!0),this._enableButton(this.overDownState,!1)},t.Button.prototype.drawOverDownState=function(){this.overDownState?(this._enableButton(this.upState,!1),this._enableButton(this.overState,!1),this._enableButton(this.downState,!1),this._enableButton(this.disabledState,!1),this._enableButton(this.overDownState,!0)):this.drawDownState()},t.Button.prototype._enableButton=function(t,e){t&&t.setAlpha(e?1:0)},t.Button.prototype._enableMouseEvents=function(t,e){t.setMouseEnabled&&t.setMouseEnabled(e);for(var i=t.firstChild;null!=i;)this._enableMouseEvents(i,e),i=i.nextSibling},t.Button.prototype.setUpState=function(t){if(!this.upState||this.upState!=t){var e=!1;if(this.upState)e=this._isButtonEnabled(this.upState),this.removeChild(this.upState);else if(!this._bDuringInit){var i=!1,n=!1,o=!1;this.downState&&(i=this._isButtonEnabled(this.downState)),this.overState&&(n=this._isButtonEnabled(this.overState)),this.disabledState&&(o=this._isButtonEnabled(this.disabledState)),i||n||o||(e=!0)}t&&this.addChild(t),this.upState=t,this._enableButton(this.upState,e)}},t.Button.prototype.setDownState=function(t){if(!this.downState||this.downState!=t){var e=!1;this.downState&&(e=this._isButtonEnabled(this.downState),this.removeChild(this.downState)),t&&this.addChild(t),this.downState=t,this._enableButton(this.downState,e)}},t.Button.prototype.setOverState=function(t){if(!this.overState||this.overState!=t){var e=!1;this.overState&&(e=this._isButtonEnabled(this.overState),this.removeChild(this.overState)),t&&this.addChild(t),this.overState=t,this._enableButton(this.overState,e)}},t.Button.prototype.setDisabledState=function(t){if(!this.disabledState||this.disabledState==t){var e=!1;this.disabledState&&(e=this._isButtonEnabled(this.disabledState),this.removeChild(this.disabledState)),t&&this.addChild(t),this.disabledState=t,this._enableButton(this.disabledState,e)}},t.Button.prototype.setOverDownState=function(t){if(!this.overDownState||this.overDownState==t){var e=!1;this.overDownState&&(e=this._isButtonEnabled(this.overDownState),this.removeChild(this.overDownState)),t&&this.addChild(t),this.overDownState=t,this._enableButton(this.overDownState,e)}},t.Button.prototype.setCallback=function(t,e){this._callback=t,this._callbackObj=e},t.Button.prototype.setTooltip=function(t){this._tooltip=t,t&&(this.setAriaRole("button"),this.setAriaProperty("label",t))},t.Button.prototype.getTooltip=function(){return this._tooltip},t.Button.prototype.initState=function(){this.isEnabled()?this.drawUpState():this.drawDisabledState()},t.Button.prototype.setToggleEnabled=function(t){this._bToggleEnabled=t},t.Button.prototype.setToggled=function(t){this._bToggleEnabled&&(this._bToggled=t,this._bToggled?this.drawDownState():this.drawUpState())},t.Button.prototype.isToggled=function(){return this._bToggled},t.Button.prototype._isButtonEnabled=function(t){var e=!1;return t&&(e=t.getAlpha()>0),e},t.Button.prototype.showKeyboardFocusEffect=function(){this._keyboardFocusEffect||(this._keyboardFocusEffect=this.CreateKeyboardFocusEffect()),this._keyboardFocusEffect.show(),this._isShowingKeyboardFocusEffect=!0,this.getCtx().setActiveElement(this)},t.Button.prototype.hideKeyboardFocusEffect=function(){this._keyboardFocusEffect&&this._keyboardFocusEffect.hide(),this._isShowingKeyboardFocusEffect=!1},t.Button.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect},t.Button.prototype.CreateKeyboardFocusEffect=function(){return new t.KeyboardFocusEffect(this.getCtx(),this,this.getDimensions(),null,null,!0)},t.Button.prototype.handleKeyboardEvent=function(e){var i=e.keyCode;i!=t.KeyboardEvent.ENTER&&i!=t.KeyboardEvent.SPACE||this._callback&&(this._callback.call(this._callbackObj,e,this),e.stopPropagation(),e.preventDefault())},t.IconButton=function(t,e,i,n,o,r,s){this.Init(t,e,i,n,o,r,s)},t.Obj.createSubclass(t.IconButton,t.Container),t.IconButton.prototype.Init=function(e,i,n,o,r,s,a){t.IconButton.superclass.Init.call(this,e,null,r),this.setCallback(s,a),this._chroming=i,o||(o=this._createDefaultBackground(n.size));var l=o.copyShape();l.setClassName("oj-dvt-button-background"),this.addChild(l),this.addChild(o);var h=t.OutputText.createIcon(this.getCtx(),n);this.addChild(h),this._tooltip=null,this._bToggleEnabled=!1,this._bToggled=!1,this._bMouseOver=!1,this._bMouseDown=!1,this.setEnabled(!0)},t.IconButton.prototype._createDefaultBackground=function(e){var i=t.PathUtils.roundedRectangle(-4,-4,e+8,e+8,4,4,4,4),n=new t.Path(this.getCtx(),i);return n.setPixelHinting(t.Agent.getDevicePixelRatio()>1),n},t.IconButton.prototype.isEnabled=function(){return this._enabled},t.IconButton.prototype.setEnabled=function(e){if(this._enabled!=e){this._enabled=e;var i=t.Agent.isTouchDevice(),n=i?t.TouchEvent.TOUCHSTART:t.MouseEvent.CLICK,o=i?{capture:!1,passive:!1}:{capture:!1};e?(this.addEvtListener(t.MouseEvent.MOUSEOVER,this.OnMouseOver,!1,this),this.addEvtListener(t.MouseEvent.MOUSEOUT,this.OnMouseOut,!1,this),this.addEvtListener(t.MouseEvent.MOUSEDOWN,this.OnMouseDown,!1,this),this.addEvtListener(t.MouseEvent.MOUSEUP,this.OnMouseUp,!1,this),this.addEvtListener(n,this.OnClick,o,this),this.setCursor(t.SelectionEffectUtils.getSelectingCursor())):(this.removeEvtListener(t.MouseEvent.MOUSEOVER,this.OnMouseOver,!1,this),this.removeEvtListener(t.MouseEvent.MOUSEOUT,this.OnMouseOut,!1,this),this.removeEvtListener(t.MouseEvent.MOUSEDOWN,this.OnMouseDown,!1,this),this.removeEvtListener(t.MouseEvent.MOUSEUP,this.OnMouseUp,!1,this),this.removeEvtListener(n,this.OnClick,o,this),this.setCursor(null),this._bMouseOver=!1,this._bMouseDown=!1),this._updateClasses()}},t.IconButton.prototype.OnMouseOver=function(t){this._bMouseOver=!0,this._updateClasses()},t.IconButton.prototype.OnMouseOut=function(t){this._bMouseOver=!1,this._updateClasses()},t.IconButton.prototype.OnMouseDown=function(t){this._bMouseDown=!0,this._updateClasses()},t.IconButton.prototype.OnMouseUp=function(t){this._bMouseDown=!1,this._updateClasses()},t.IconButton.prototype.OnClick=function(t){this._bToggleEnabled&&this.setToggled(!this._bToggled),this._callback&&(this._callback.call(this._callbackObj,t,this),t.stopPropagation(),t.preventDefault())},t.IconButton.prototype.setCallback=function(t,e){this._callback=t,this._callbackObj=e},t.IconButton.prototype.setTooltip=function(t){this._tooltip=t,t&&(this.setAriaRole("button"),this.setAriaProperty("label",t))},t.IconButton.prototype.getTooltip=function(){return this._tooltip},t.IconButton.prototype.setToggleEnabled=function(t){this._bToggleEnabled=t,this._updateClasses()},t.IconButton.prototype.setToggled=function(t){this._bToggleEnabled&&(this._bToggled=t,this._updateClasses())},t.IconButton.prototype.isToggled=function(){return this._bToggled},t.IconButton.prototype.showKeyboardFocusEffect=function(){this._keyboardFocusEffect||(this._keyboardFocusEffect=this.CreateKeyboardFocusEffect()),this._keyboardFocusEffect.show(),this._isShowingKeyboardFocusEffect=!0,this.getCtx().setActiveElement(this)},t.IconButton.prototype.hideKeyboardFocusEffect=function(){this._keyboardFocusEffect&&this._keyboardFocusEffect.hide(),this._isShowingKeyboardFocusEffect=!1},t.IconButton.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect},t.IconButton.prototype.CreateKeyboardFocusEffect=function(){return new t.KeyboardFocusEffect(this.getCtx(),this,this.getDimensions(),null,null,!0)},t.IconButton.prototype.handleKeyboardEvent=function(e){var i=e.keyCode;i!=t.KeyboardEvent.ENTER&&i!=t.KeyboardEvent.SPACE||this._callback&&(this._callback.call(this._callbackObj,e,this),e.stopPropagation(),e.preventDefault())},t.IconButton.prototype._updateClasses=function(){this.getElem();var t=!1,e=!1,i=!1,n=this._bToggleEnabled&&this._bToggled,o=this._bToggleEnabled&&!this._bToggled;this._enabled?(e=this._bMouseOver,i=this._bMouseDown):t=!0,this.setClassName(`oj-dvt-button-${this._chroming}${n?" oj-selected":""}${o?" oj-unselected":""}${t?" oj-disabled":""}${e?" oj-hover":""}${i?" oj-active":""}`)},t.TransientButton=function(t,e,i,n,o){this.Init(t,e,i,n,o)},t.Obj.createSubclass(t.TransientButton,t.IconButton),t.TransientButton._DEFAULT_RADIUS=15.5,t.TransientButton.prototype.Init=function(e,i,n,o,r){var s=t.TransientButton._DEFAULT_RADIUS,a=new t.Circle(e,s,s,s);t.TransientButton.superclass.Init.call(this,e,"outlined",{style:i,size:n,pos:{x:s,y:s}},a,null,r,o);var l=e.getStage();l.addEvtListener(p.FOCUS,this._onFocus,!0,this),l.addEvtListener(p.BLUR,this._onBlur,!0,this),t.Agent.isTouchDevice()||("ie"===t.Agent.browser||"edge"===t.Agent.browser?(l.addEvtListener("mouseenter",this._onMouseOver,!1,this),l.addEvtListener("mouseleave",this._onMouseOut,!1,this)):(l.addEvtListener(t.MouseEvent.MOUSEOVER,this._onMouseOver,!1,this),l.addEvtListener(t.MouseEvent.MOUSEOUT,this._onMouseOut,!1,this)))},t.TransientButton.prototype.show=function(){this.setAlpha(1)},t.TransientButton.prototype.hide=function(){this.setAlpha(0)},t.TransientButton.prototype._onFocus=function(t){this._isFocused=!0,this.show()},t.TransientButton.prototype._onBlur=function(t){this._isFocused=!1,this._isMouseOver||this.hide()},t.TransientButton.prototype._onMouseOver=function(t){this._mouseOutTimer&&this._mouseOutTimer.isRunning()&&this._mouseOutTimer.stop(),this._isMouseOver=!0,this.show()},t.TransientButton.prototype._onMouseOut=function(e){this._mouseOutTimer||(this._mouseOutTimer=new t.Timer(this.getCtx(),10,this._onMouseOutTimerEnd,this,1)),this._mouseOutTimer.reset(),this._mouseOutTimer.start()},t.TransientButton.prototype._onMouseOutTimerEnd=function(){this._isMouseOver=!1,this._isFocused||this.hide()},t.TransientButton.prototype.OnMouseDown=function(e){t.TransientButton.superclass.OnMouseDown.call(this,e),e.stopPropagation()},t.TransientButton.prototype.OnMouseUp=function(e){t.TransientButton.superclass.OnMouseUp.call(this,e),e.stopPropagation()},t.CustomDatatipPeer=function(t,e,i,n){this.Init(t,e,i,n)},t.Obj.createSubclass(t.CustomDatatipPeer,t.Obj),t.CustomDatatipPeer.prototype.Init=function(t,e,i,n){this._tooltipManager=t,this._tooltipFunc=e,this._datatipColor=i,this._dataContext=n},t.CustomDatatipPeer.prototype.getDatatip=function(t){return this._tooltipManager.getCustomTooltip(this._tooltipFunc,this._dataContext)},t.CustomDatatipPeer.prototype.getDatatipColor=function(t){return this._datatipColor},t.SimpleObjPeer=function(t,e,i,n){this.Init(t,e,i,n)},t.Obj.createSubclass(t.SimpleObjPeer,t.Obj),t.SimpleObjPeer.prototype.Init=function(t,e,i,n){this._tooltip=t,this._datatip=e,this._datatipColor=i,this._params=n},t.SimpleObjPeer.prototype.getParams=function(){return this._params},t.SimpleObjPeer.prototype.getTooltip=function(t){return this._tooltip},t.SimpleObjPeer.prototype.getDatatip=function(t){return"function"==typeof this._datatip?this._datatip():this._datatip},t.SimpleObjPeer.prototype.getDatatipColor=function(t){return"function"==typeof this._datatipColor?this._datatipColor():this._datatipColor},t.Agent=function(){},t.Agent.setAgentInfo=function(t){S=t},t.Agent.getAgentInfo=function(){return S},Object.defineProperty(t.Agent,"browser",{enumerable:!0,get:function(){return t.Agent.getAgentInfo().browser}}),Object.defineProperty(t.Agent,"engine",{enumerable:!0,get:function(){return t.Agent.getAgentInfo().engine}}),Object.defineProperty(t.Agent,"version",{enumerable:!0,get:function(){return t.Agent.getAgentInfo().browserVersion}}),Object.defineProperty(t.Agent,"os",{enumerable:!0,get:function(){return t.Agent.getAgentInfo().os.toLowerCase()}}),t.Obj.createSubclass(t.Agent,t.Obj),t.Agent.FOCUS_COLOR_DEFAULT="#0645AD",t.Agent.FOCUS_COLOR_IE="#090909",t.Agent.deferAriaCreation=function(){return!t.Agent.isTouchDevice()&&!t.Agent.isEnvironmentTest()},t.Agent.getDevicePixelRatio=function(){return t.Agent._initialize(),t.Agent._devicePixelRatio},t.Agent.getElementPosition=function(e){return"ie"===t.Agent.browser||"edge"===t.Agent.browser?t.Agent._getElementPositionIE(e):t.Agent._getElementPositionDefault(e)},t.Agent.isRightToLeft=function(e){return t.Agent._initialize(),e&&null!=e.getReadingDirection()?"rtl"==e.getReadingDirection():t.Agent._bRtl},t.Agent.isTouchDevice=function(){return t.Agent._initialize(),t.Agent._bTouchDevice},t.Agent.setEnvironment=function(e){t.Agent._environment=e},t.Agent.isEnvironmentTest=function(){return"test"==t.Agent._environment},t.Agent.setHighContrast=function(e){t.Agent._highContrast=e},t.Agent.isHighContrast=function(){return!0===t.Agent._highContrast},t.Agent.workaroundFirefoxRepaint=function(e){if("firefox"===t.Agent.browser){var i=e.getParent();if(i){var n=i.getChildIndex(e);i.removeChildAt(n),i.addChildAt(e,n)}}},t.Agent._initialize=function(){t.Agent._bInitialized||(t.Agent._bRtl=!(!document||!document.documentElement)&&"rtl"==document.documentElement.dir,t.Agent._bTouchDevice=!("chrome"!==t.Agent.browser&&"safari"!==t.Agent.browser||"ios"!==t.Agent.os&&"android"!==t.Agent.os),t.Agent._devicePixelRatio=window&&null!=window.devicePixelRatio?window.devicePixelRatio:1,t.Agent._bInitialized=!0)},t.Agent._getElementPositionDefault=function(e){var i=e.getBoundingClientRect(),n=Math.round(i.top),o=i.left,r=e.ownerDocument.documentElement,s=e.ownerDocument.body;return o+=r.scrollLeft||s.scrollLeft,n+=r.scrollTop||s.scrollTop,new t.Point(o,n)},t.Agent._getElementPositionIE=function(e){var i=e.getBoundingClientRect(),n=i.top,o=i.left,r=e.ownerDocument.documentElement,s=r.scrollLeft;return o-=r.clientLeft-s,n-=r.clientTop-r.scrollTop,new t.Point(o,n)},t.Agent.getFocusColor=function(){if(t.Agent._initialize(),!t.Agent._focusColor){var e;if("blink"===t.Agent.engine||"safari"===t.Agent.browser){var i=document.getElementsByTagName("body")[0],n=document.createElement("div");i.appendChild(n),n.style.outline="-webkit-focus-ring-color",e=window.getComputedStyle(n).getPropertyValue("outline-color"),i.removeChild(n)}else"ie"!==t.Agent.browser&&"edge"!==t.Agent.browser||(e=t.Agent.FOCUS_COLOR_IE);t.Agent._focusColor=e||t.Agent.FOCUS_COLOR_DEFAULT}return t.Agent._focusColor},t.Automation=function(t){},t.Obj.createSubclass(t.Automation,t.Obj),t.Automation.TOOLTIP_SUBID="tooltip",t.Automation.prototype.getSubIdForDomElement=function(e){var i=t.Automation._findDisplayable(e);return!i||i instanceof Array?e&&this.IsTooltipElement(e)?t.Automation.TOOLTIP_SUBID:null:this.GetSubIdForDomElement(i)},t.Automation.prototype.GetSubIdForDomElement=function(t){return null},t.Automation.prototype.getDomElementForSubId=function(t){return null},t.Automation._findDisplayable=function(t){for(;t;){if(t._obj)return t._obj;t=t.parentNode}return null},t.Automation.prototype.GetTooltipElement=function(t,e){if(t){var i=t.getCtx().getTooltipManager(e).getTooltipElem();return"hidden"==i.style.visibility?null:i}return null},t.Automation.prototype.IsTooltipElement=function(e){var i=e.getAttribute("id");return!(!i||0!=i.indexOf(t.HtmlTooltipManager._TOOLTIP_DIV_ID))},t.SelectionHandler=function(t,e){this.Init(t,e)},t.Obj.createSubclass(t.SelectionHandler,t.Obj),t.SelectionHandler.TYPE_SINGLE="s",t.SelectionHandler.TYPE_MULTIPLE="m",t.SelectionHandler.prototype.Init=function(e,i){this._context=e,this._selection=[],this._type=i||t.SelectionHandler.TYPE_SINGLE,this._hiddenSelectedIds=[]},t.SelectionHandler.prototype.getType=function(){return this._type},t.SelectionHandler.prototype.getSelectedCount=function(){return this._selection.length},t.SelectionHandler.prototype.getSelection=function(){return this._selection.slice(0)},t.SelectionHandler.prototype.getSelectedIds=function(){for(var t=[],e=0;e<this._selection.length;e++)t.push(this._selection[e].getId());return t.concat(this._hiddenSelectedIds)},t.SelectionHandler.prototype.processInitialSelections=function(t,e){if(this.clearSelection(!0),t&&e){for(var i=new this._context.KeySetImpl(t),n=new Map,o=0,r=0;o!==t.length&&r<e.length;r++){if((a=e[r]).isSelectable&&a.isSelectable()){var s=i.get(a.getId());s!==i.NOT_A_KEY&&(o++,n.set(s,a))}}for(r=0;r<t.length;r++){var a;(a=n.get(t[r]))?this._addToSelection(a,!0,!0):this._hiddenSelectedIds.push(t[r])}}},t.SelectionHandler.prototype.processClick=function(e,i){if(e&&e.isUnrelatedToSelection&&e.isUnrelatedToSelection())return!1;var n=!1;return i&&this._type==t.SelectionHandler.TYPE_MULTIPLE?e&&e.isSelectable&&e.isSelectable()&&(n=e.isSelected()?this._removeFromSelection(e):this._addToSelection(e,!0)):n=e&&e.isSelectable&&e.isSelectable()?this._addToSelection(e,!1):this.clearSelection(),n},t.SelectionHandler.prototype.processGroupSelection=function(t,e){var i;e||this.clearSelection();for(var n=0;n<t.length;n++)(i=t[n])&&i.isUnrelatedToSelection&&i.isUnrelatedToSelection()||this._addToSelection(i,!0)},t.SelectionHandler.prototype.processMouseOver=function(t){t&&t.isSelectable&&t.isSelectable()&&t.showHoverEffect&&t.showHoverEffect()},t.SelectionHandler.prototype.processMouseOut=function(t){t&&t.isSelectable&&t.isSelectable()&&t.hideHoverEffect&&t.hideHoverEffect()},t.SelectionHandler.prototype._addToSelection=function(t,e,i){return!(t.isSelected()||t.isSelectable&&!t.isSelectable())&&(e||this.clearSelection(i),t.setSelected(!0,i),this._selection.push(t),!0)},t.SelectionHandler.prototype._removeFromSelection=function(t){if(!t.isSelected())return!1;t.setSelected(!1);for(var e=0;e<this._selection.length;e++)if(this._selection[e]==t){this._selection.splice(e,1);break}return!0},t.SelectionHandler.prototype.clearSelection=function(t){if(this._selection.length<=0&&this._hiddenSelectedIds.length<=0)return!1;for(;this._selection.length>0;){this._selection.pop().setSelected(!1,t)}return this._hiddenSelectedIds.length=0,!0},t.KeyboardHandler=function(t){this.Init(t)},t.Obj.createSubclass(t.KeyboardHandler,t.Obj),t.KeyboardHandler.prototype.Init=function(t){this._eventManager=t},t.KeyboardHandler.prototype.processKeyDown=function(e){var i=this._eventManager.getFocus();return i&&(this.isNavigationEvent(e)||this.isMultiSelectEvent(e))?(t.EventManager.consumeEvent(e),i.getNextNavigable(e)):null},t.KeyboardHandler.getNextNavigable=function(e,i,n,o,r){var s=null,a=0,l=0,h=i.keyCode;if(!e)return!n||n.length<1?null:n[0];for(var u,c=e.getKeyboardBoundingBox(r),p=0;p<n.length;p++){var _=n[p];e!==_&&(u=_.getKeyboardBoundingBox(r),(o||t.KeyboardHandler._isInBounds(c,u,h))&&(l=t.KeyboardHandler._computeDelta(c,u,h),((h==t.KeyboardEvent.UP_ARROW||h==t.KeyboardEvent.LEFT_ARROW)&&l<0&&(!s||l>a)||(h==t.KeyboardEvent.DOWN_ARROW||h==t.KeyboardEvent.RIGHT_ARROW)&&l>0&&(!s||l<a))&&(s=_,a=l)))}return s||e},t.KeyboardHandler.prototype.getDefaultNavigable=function(e){if(!e||e.length<=0)return null;for(var i,n,o=e[0],r=o.getKeyboardBoundingBox(),s=1;s<e.length;s++)(((n=(i=e[s]).getKeyboardBoundingBox()).x==r.x&&n.y<r.y||n.x<r.x)&&!t.Agent.isRightToLeft(this._eventManager.getCtx())||(n.x+n.w==r.x+r.w&&n.y<r.y||n.x+n.w>r.x+r.w)&&t.Agent.isRightToLeft(this._eventManager.getCtx()))&&(r=(o=i).getKeyboardBoundingBox());return o},t.KeyboardHandler.prototype.isNavigationEvent=function(e){switch(e.keyCode){case t.KeyboardEvent.UP_ARROW:case t.KeyboardEvent.DOWN_ARROW:case t.KeyboardEvent.LEFT_ARROW:case t.KeyboardEvent.RIGHT_ARROW:return!0}return!1},t.KeyboardHandler.prototype.isSelectionEvent=function(t){return!1},t.KeyboardHandler.prototype.isMultiSelectEvent=function(t){return!1},t.KeyboardHandler._isInBounds=function(e,i,n){if(n==t.KeyboardEvent.UP_ARROW||n==t.KeyboardEvent.DOWN_ARROW){var o=e.x,r=o+e.w,s=i.x;return!(o>=s+i.w||r<=s)}if(n==t.KeyboardEvent.LEFT_ARROW||n==t.KeyboardEvent.RIGHT_ARROW){var a=e.y,l=a+e.h,h=i.y;return!(a>=h+i.h||l<=h)}},t.KeyboardHandler._computeDelta=function(e,i,n){var o=0,r=e.getCenter().x,s=e.getCenter().y,a=i.getCenter().x,l=i.getCenter().y;return n==t.KeyboardEvent.UP_ARROW||n==t.KeyboardEvent.DOWN_ARROW?o=l-s:n!=t.KeyboardEvent.LEFT_ARROW&&n!=t.KeyboardEvent.RIGHT_ARROW||(o=a-r),o},t.KeyboardHandler.getNextAdjacentNavigable=function(e,i,n){var o=i.keyCode;if(!n)return null;if(!e)return n[0];for(var r=e,s=Number.MAX_VALUE,a=!1,l=!1,h=0;h<n.length;h++){var u=n[h];if(u!==e){if(t.KeyboardHandler._isValidDestination(u,e,o)){var c=t.KeyboardHandler._calcInContact(u,e,o);if(!a||c){var p=t.KeyboardHandler._calcDistanceAngleWeighted(u,e,o);(0!=p||l)&&(!a&&c||p<s&&(a&&c||!a))&&(s=p,r=u,a=c)}}}else l=!0}return r},t.KeyboardHandler._calcInContact=function(e,i,n){var o=e.getKeyboardBoundingBox(),r=i.getKeyboardBoundingBox();switch(n){case t.KeyboardEvent.UP_ARROW:return t.KeyboardHandler._isVerticallyAligned(o,r)&&(r.y<=o.y+o.h||t.KeyboardHandler._areEqualWithinTolerance(r.y,o.y+o.h));case t.KeyboardEvent.DOWN_ARROW:return t.KeyboardHandler._isVerticallyAligned(o,r)&&(o.y<=r.y+r.h||t.KeyboardHandler._areEqualWithinTolerance(o.y,r.y+r.h));case t.KeyboardEvent.RIGHT_ARROW:return t.KeyboardHandler._isHorizontallyAligned(o,r)&&(o.x<=r.x+r.w||t.KeyboardHandler._areEqualWithinTolerance(o.x,r.x+r.w));case t.KeyboardEvent.LEFT_ARROW:return t.KeyboardHandler._isHorizontallyAligned(o,r)&&(r.x<=o.x+o.w||t.KeyboardHandler._areEqualWithinTolerance(r.x,o.x+o.w))}return!1},t.KeyboardHandler._isVerticallyAligned=function(t,e){return t.x>=e.x&&t.x<=e.x+e.w||e.x>=t.x&&e.x<=t.x+t.w},t.KeyboardHandler._isHorizontallyAligned=function(t,e){return t.y>=e.y&&t.y<=e.y+e.h||e.y>=t.y&&e.y<=t.y+t.h},t.KeyboardHandler._calcDistanceAngleWeighted=function(e,i,n){var o=15/180*Math.PI,r=40/180*Math.PI,s=e.getKeyboardBoundingBox(),a=s.x+s.w/2,l=s.y+s.h/2,h=i.getKeyboardBoundingBox(),u=h.x+h.w/2,c=h.y+h.h/2,p=Math.abs(a-u),_=Math.abs(l-c),g=Math.atan2(_,p),d=Math.sqrt(p*p+_*_);return(g>o&&(n==t.KeyboardEvent.RIGHT_ARROW||n==t.KeyboardEvent.LEFT_ARROW)||g<t.Math.HALF_PI-o&&(n==t.KeyboardEvent.UP_ARROW||n==t.KeyboardEvent.DOWN_ARROW))&&(g>r&&(n==t.KeyboardEvent.RIGHT_ARROW||n==t.KeyboardEvent.LEFT_ARROW)||g<t.Math.HALF_PI-r&&(n==t.KeyboardEvent.UP_ARROW||n==t.KeyboardEvent.DOWN_ARROW)?d*=6:d*=2),d},t.KeyboardHandler._isValidDestination=function(e,i,n){var o=e.getKeyboardBoundingBox(),r=i.getKeyboardBoundingBox();switch(n){case t.KeyboardEvent.UP_ARROW:return o.y<r.y||t.KeyboardHandler._areEqualWithinTolerance(o.y,r.y);case t.KeyboardEvent.DOWN_ARROW:return o.y>r.y||t.KeyboardHandler._areEqualWithinTolerance(o.y,r.y);case t.KeyboardEvent.RIGHT_ARROW:return o.x>r.x||t.KeyboardHandler._areEqualWithinTolerance(o.x,r.x);case t.KeyboardEvent.LEFT_ARROW:return o.x<r.x||t.KeyboardHandler._areEqualWithinTolerance(o.x,r.x)}return!0},t.KeyboardHandler._areEqualWithinTolerance=function(t,e){return Math.abs(t-e)<=1e-7},t.MarqueeHandler=function(t,e,i,n,o,r,s,a,l){this.Init(t,e,i,n,o,r,s,a,l)},t.Obj.createSubclass(t.MarqueeHandler,t.Obj),t.MarqueeHandler.prototype.Init=function(e,i,n,o,r,s,a,l,h){this._context=e.getCtx(),this._container=e,this._bounds=i,this._fill=o,this._stroke=r,this._allowHoriz=null==s||s,this._allowVert=null==a||a,this._horizBounds=l,this._vertBounds=h,this._glassPane=new t.Rect(this._context,n.x,n.y,n.w,n.h),this._glassPane.setInvisibleFill(),this._marqueeOn=!1,this._marqueeDrawn=!1,this._resizeHoriz=!1,this._resizeVert=!1},t.MarqueeHandler.prototype.processDragStart=function(t,e){if(!this._marqueeOn){if(this._origPt=this._container.stageToLocal(t),this._resizeHoriz=this._allowHoriz,this._resizeVert=this._allowVert,!this._bounds.containsPoint(this._origPt.x,this._origPt.y))if(this._vertBounds&&this._vertBounds.containsPoint(this._origPt.x,this._origPt.y))this._resizeHoriz=!1;else{if(!this._horizBounds||!this._horizBounds.containsPoint(this._origPt.x,this._origPt.y))return null;this._resizeVert=!1}return this._marqueeOn=!0,this._marquee=null,this._createMarqueeEvent("start",e)}return null},t.MarqueeHandler.prototype.processDragMove=function(e,i){if(!this._marqueeOn)return null;this._marqueeDrawn||(this._container.addChild(this._glassPane),this._marquee=new t.Rect(this._context,this._bounds.x,this._bounds.y,this._bounds.w,this._bounds.h),this._marquee.getElem().setAttribute("pointer-events","none"),this._resizeHoriz&&(this._marquee.setX(this._origPt.x),this._marquee.setWidth(0)),this._resizeVert&&(this._marquee.setY(this._origPt.y),this._marquee.setHeight(0)),this._marquee.setClassName("oj-dvt-marquee"),this._marquee.setStyle({stroke:this._stroke.getColor(),fill:this._fill.getColor()}),this._marquee.setPixelHinting(!0),this._glassPane.addChild(this._marquee),this._marqueeDrawn=!0);var n=this._container.stageToLocal(e);return n.x=Math.max(n.x,this._bounds.x),n.x=Math.min(n.x,this._bounds.x+this._bounds.w),n.y=Math.max(n.y,this._bounds.y),n.y=Math.min(n.y,this._bounds.y+this._bounds.h),this._resizeHoriz&&(this._marquee.setWidth(Math.abs(n.x-this._origPt.x)),n.x<this._origPt.x?this._marquee.setX(n.x):this._marquee.setX(this._origPt.x)),this._resizeVert&&(this._marquee.setHeight(Math.abs(n.y-this._origPt.y)),n.y<this._origPt.y?this._marquee.setY(n.y):this._marquee.setY(this._origPt.y)),this._createMarqueeEvent("move",i)},t.MarqueeHandler.prototype.processDragEnd=function(t,e){return this._marqueeOn&&(this._marqueeOn=!1,this._marqueeDrawn)?(this._glassPane.removeChild(this._marquee),this._container.removeChild(this._glassPane),this._marqueeDrawn=!1,this._createMarqueeEvent("end",e)):null},t.MarqueeHandler.prototype.cancelMarquee=function(){return!(!this._marqueeOn||(this._marqueeOn=!1,!this._marqueeDrawn))&&(this._glassPane.removeChild(this._marquee),this._container.removeChild(this._glassPane),this._marqueeDrawn=!1,!0)},t.MarqueeHandler.prototype._createMarqueeEvent=function(e,i){var n=null,o=null,r=null,s=null;return this._resizeHoriz&&(n=this._marquee?this._marquee.getX():this._origPt.x,r=this._marquee?this._marquee.getWidth():0),this._resizeVert&&(o=this._marquee?this._marquee.getY():this._origPt.y,s=this._marquee?this._marquee.getHeight():0),new t.EventFactory.newMarqueeEvent(e,n,o,r,s,i)},t.MarqueeHandler.prototype.getCursor=function(t){var e=this._container.stageToLocal(t),i=this._bounds.containsPoint(e.x,e.y),n=this._vertBounds&&this._vertBounds.containsPoint(e.x,e.y),o=this._horizBounds&&this._horizBounds.containsPoint(e.x,e.y);return i||n||o?"crosshair":"inherit"},t.MarqueeHandler.prototype.getGlassPane=function(){return this._glassPane},t.PanZoomHandler=function(t,e,i,n){this.Init(t,e,i,n)},t.Obj.createSubclass(t.PanZoomHandler,t.Obj),t.PanZoomHandler.prototype.Init=function(e,i,n,o){this._context=e.getCtx(),this._container=e,this._bounds=i,this._zoomRate=o,this._glassPane=new t.Rect(this._context,n.x,n.y,n.w,n.h),this._glassPane.setInvisibleFill(),this._panOn=!1,this._glassPaneDrawn=!1,this._pinchOn=!1},t.PanZoomHandler.prototype.processDragStart=function(e){return this._panOn?null:(this._origPt=this._container.stageToLocal(e),this._lastPt=this._origPt,this._bounds.containsPoint(this._origPt.x,this._origPt.y)?(this._panOn=!0,t.EventFactory.newPanZoomEvent("panStart",0,0,0,0,0,0,0,0)):null)},t.PanZoomHandler.prototype.processDragMove=function(e){if(!this._panOn)return null;this._glassPaneDrawn||(this._container.addChild(this._glassPane),this._glassPaneDrawn=!0);var i=this._container.stageToLocal(e),n=i.x-this._lastPt.x,o=i.y-this._lastPt.y,r=i.x-this._origPt.x,s=i.y-this._origPt.y;return this._lastPt=i,t.EventFactory.newPanZoomEvent("panMove",-n,-n,-o,-o,-r,-r,-s,-s)},t.PanZoomHandler.prototype.processDragEnd=function(e){if(this._panOn&&(this._panOn=!1,this._glassPaneDrawn)){this._container.removeChild(this._glassPane),this._glassPaneDrawn=!1;var i=e?this._container.stageToLocal(e):this._lastPt,n=i.x-this._lastPt.x,o=i.y-this._lastPt.y,r=i.x-this._origPt.x,s=i.y-this._origPt.y;return this._lastPt=null,t.EventFactory.newPanZoomEvent("panEnd",-n,-n,-o,-o,-r,-r,-s,-s)}return null},t.PanZoomHandler.prototype.processMouseWheel=function(e,i){var n=this._container.stageToLocal(e);if(!this._bounds.containsPoint(n.x,n.y))return null;var o=(i*=this._zoomRate)*(n.x-this._bounds.x),r=-i*(this._bounds.x+this._bounds.w-n.x),s=i*(n.y-this._bounds.y),a=-i*(this._bounds.y+this._bounds.h-n.y);return t.EventFactory.newPanZoomEvent("zoom",o,r,s,a,o,r,s,a)},t.PanZoomHandler.prototype.processPinchStart=function(e,i){return this._pinchOn?null:(this._origPt1=this._container.stageToLocal(e),this._origPt2=this._container.stageToLocal(i),this._lastPt1=this._origPt1,this._lastPt2=this._origPt2,this._bounds.containsPoint(this._origPt1.x,this._origPt1.y)&&this._bounds.containsPoint(this._origPt2.x,this._origPt2.y)?(this._pinchOn=!0,t.EventFactory.newPanZoomEvent("pinchStart",0,0,0,0,0,0,0,0)):null)},t.PanZoomHandler.prototype.processPinchMove=function(e,i){if(!this._pinchOn)return null;var n=this._container.stageToLocal(e),o=this._container.stageToLocal(i),r=this._computePinchDeltas(n,o,this._lastPt1,this._lastPt2),s=this._computePinchDeltas(n,o,this._origPt1,this._origPt2);return this._lastPt1=n,this._lastPt2=o,t.EventFactory.newPanZoomEvent("pinchMove",r.dxMin,r.dxMax,r.dyMin,r.dyMax,s.dxMin,s.dxMax,s.dyMin,s.dyMax)},t.PanZoomHandler.prototype.processPinchEnd=function(){if(this._pinchOn){this._pinchOn=!1;var e=this._computePinchDeltas(this._lastPt1,this._lastPt2,this._origPt1,this._origPt2);return this._lastPt1=null,this._lastPt2=null,t.EventFactory.newPanZoomEvent("pinchEnd",0,0,0,0,e.dxMin,e.dxMax,e.dyMin,e.dyMax)}return null},t.PanZoomHandler.prototype._computePinchDeltas=function(t,e,i,n){var o=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y),s=Math.abs(i.x-n.x),a=Math.abs(i.y-n.y),l=o>r/2?s/o:1,h=r>o/2?a/r:1,u=(t.x+e.x)/2,c=(t.y+e.y)/2,p=u-(i.x+n.x)/2,_=c-(i.y+n.y)/2,g=(1-l)*(u-this._bounds.x),d=(l-1)*(this._bounds.x+this._bounds.w-u),S=(1-h)*(c-this._bounds.y),f=(h-1)*(this._bounds.y+this._bounds.h-c);return{dxMin:g-=p,dxMax:d-=p,dyMin:S-=_,dyMax:f-=_}},t.PanZoomHandler.prototype.zoomBy=function(e){var i=(1/e-1)/2,n=-i*this._bounds.w,o=i*this._bounds.w,r=-i*this._bounds.h,s=i*this._bounds.h;return t.EventFactory.newPanZoomEvent("zoom",n,o,r,s,n,o,r,s)},t.PanZoomHandler.prototype.panBy=function(e,i){var n=e*this._bounds.w*(t.Agent.isRightToLeft(this._context)?-1:1),o=i*this._bounds.h;return t.EventFactory.newPanZoomEvent("panEnd",n,n,o,o,n,n,o,o)},t.PanZoomHandler.prototype.getCursor=function(e){return null==e||this.isWithinBounds(e)?this._panOn?t.ToolkitUtils.getGrabbingCursor():t.ToolkitUtils.getGrabCursor():"inherit"},t.PanZoomHandler.prototype.isWithinBounds=function(t){var e=this._container.stageToLocal(t);return this._bounds.containsPoint(e.x,e.y)},t.CategoryRolloverHandler=function(e,i){this._callback=e,this._callbackObj=i,this._source=i,this._bHighlightMode=!1,this._hoverDelayCallback=null,this._highlightModeTimeout=null,this._hoverDelay=t.CategoryRolloverHandler._HOVER_DELAY},t.Obj.createSubclass(t.CategoryRolloverHandler,t.Obj),t.CategoryRolloverHandler._HOVER_DELAY=50,t.CategoryRolloverHandler._HOVER_TIMEOUT=1e3,t.CategoryRolloverHandler._ROLLOUT_TIMEOUT=250,t.CategoryRolloverHandler._FADE_OUT_OPACITY=.35,t.CategoryRolloverHandler.prototype.processEvent=function(e,i,n,o,r){if(e&&i&&0!=i.length){this._hoverDelayCallback&&(clearTimeout(this._hoverDelayCallback),this._hoverDelayCallback=null);var s=e._highlightType;if("over"==s){var a=this._bHighlightMode?this._hoverDelay:n;this._hoverDelayCallback=setTimeout(this.GetRolloverCallback(e,i,o,r),a),this._highlightModeTimeout&&(clearInterval(this._highlightModeTimeout),this._highlightModeTimeout=null)}else if("out"==s){var l=this._bHighlightMode?this._hoverDelay:t.CategoryRolloverHandler._ROLLOUT_TIMEOUT;this._hoverDelayCallback=setTimeout(this.GetRolloutCallback(e,i,o,r),l)}}},t.CategoryRolloverHandler.prototype.GetRolloverCallback=function(e,i,n,o){return t.Obj.createCallback(this,function(){this._bHighlightMode=!0,t.CategoryRolloverHandler.highlight(e.categories,i,n,o),this._callback&&this._callback.call(this._callbackObj,e,this._source)})},t.CategoryRolloverHandler.prototype.GetRolloutCallback=function(e,i,n,o){return t.Obj.createCallback(this,function(){t.CategoryRolloverHandler.highlight(e.categories,i,n,o),this.SetHighlightModeTimeout(),this._callback&&this._callback.call(this._callbackObj,e,this._source)})},t.CategoryRolloverHandler.highlight=function(e,i,n,o){if(i)for(var r=o||t.CategoryRolloverHandler._FADE_OUT_OPACITY,s=0;s<i.length;s++){var a=i[s];if(a&&a.getCategories){var l=n?t.CategoryRolloverHandler._hasAnyCategory(a,e):t.CategoryRolloverHandler._hasAllCategories(a,e),h=e&&e.length>0&&!l;t.CategoryRolloverHandler._highlightObj(a,h,r)}}},t.CategoryRolloverHandler._highlightObj=function(e,i,n){var o=i?n:1;if(e.highlight)e.highlight(i,o);else{var r=e.getDisplayables();t.CategoryRolloverHandler._updateAlpha(r,o)}},t.CategoryRolloverHandler._updateAlpha=function(t,e){if(t)for(var i=0;i<t.length;i++)t[i].setAlpha(e)},t.CategoryRolloverHandler._hasAnyCategory=function(e,i){return!(!e||!e.getCategories)&&t.ArrayUtils.hasAnyItem(e.getCategories(),i)},t.CategoryRolloverHandler._hasAllCategories=function(e,i){return!(!e||!e.getCategories)&&t.ArrayUtils.hasAllItems(e.getCategories(),i)},t.CategoryRolloverHandler.prototype.SetHighlightMode=function(t){this._bHighlightMode=t},t.CategoryRolloverHandler.prototype.SetHighlightModeTimeout=function(){var e=t.Obj.createCallback(this,function(){this.SetHighlightMode(!1)});this._highlightModeTimeout=setTimeout(e,t.CategoryRolloverHandler._HOVER_TIMEOUT)},t.CategoryRolloverHandler.prototype.setHoverDelay=function(t){this._hoverDelay=t},t.EventManager=function(t,e,i,n){this.Init(t,e,i)},t.Obj.createSubclass(t.EventManager,t.Obj),t.EventManager.CLEAR_SELECTION_ACTION_TYPE="clearSelectionActionType",t.EventManager.TOUCH_RESPONSE_TOUCH_START="touchStart",t.EventManager.TOUCH_RESPONSE_TOUCH_HOLD="touchHold",t.EventManager.TOUCH_RESPONSE_AUTO="auto",t.EventManager._TOUCH_RESPONSE_PADDING_CHECK=10,t.EventManager._EVENT_INFO_TOOLTIP_DISPLAYED_KEY="tooltipDisplayed",t.EventManager.prototype.Init=function(e,i,n,o){this._context=e,this._callback=i,this._callbackObj=n,this._component=o,this._touchMap={},this._selectionHandler=null,this.KeyboardHandler=null,this.RolloverHandler=this.CreateCategoryRolloverHandler(i,n),this.setTooltipsEnabled(!0);var r=e.getStage().getId();r||(r="undefinedId"),this.CustomTooltipManager=this._context.getCustomTooltipManager(),this.CustomTooltipManager.addTooltipEventListener("actionTooltipClosed",this.OnActionTooltipClosed,this),this.CustomTooltipManager.addTooltipEventListener("actionTooltipStarted",this.OnActionTooltipStarted,this),this.TouchManager=null,t.Agent.isTouchDevice()&&(this.TouchManager=new t.TouchManager("touchmanager",this._context,this)),this._focusedObj=null,this._shouldDisplayKeyboardFocus=!1,this._keyboardHandlers=[this],this._currentKeyboardHandlerIdx=-1,this._dndListeners={}},t.EventManager.prototype.getCtx=function(){return this._context},t.EventManager.prototype.associate=function(t,e,i){t&&(t._logicalObjects&&!i||(t._logicalObjects=[]),t._logicalObjects.push({logicalObject:e,eventManager:this}))},t.EventManager.prototype.addListeners=function(e){if(e&&(t.Agent.isTouchDevice()?(this.hideTooltip(),e.addEvtListener(t.TouchEvent.TOUCHSTART,this.OnTouchStartBubble,!1,this),e.addEvtListener(t.TouchEvent.TOUCHMOVE,this.OnTouchMoveBubble,!1,this),e.addEvtListener(t.TouchEvent.TOUCHEND,this.OnTouchEndBubble,!1,this),this.TouchManager.addTouchEventListener(t.ComponentTouchEvent.TOUCH_HOVER_START_TYPE,this.OnComponentTouchHoverStart,this),this.TouchManager.addTouchEventListener(t.ComponentTouchEvent.TOUCH_HOVER_MOVE_TYPE,this.OnComponentTouchHoverMove,this),this.TouchManager.addTouchEventListener(t.ComponentTouchEvent.TOUCH_HOVER_END_TYPE,this.OnComponentTouchHoverEnd,this),this.TouchManager.addTouchEventListener(t.ComponentTouchEvent.TOUCH_HOVER_OUT_TYPE,this.OnComponentTouchHoverOut,this),this.TouchManager.addTouchEventListener(t.ComponentTouchEvent.TOUCH_HOVER_OVER_TYPE,this.OnComponentTouchHoverOver,this),this.TouchManager.addTouchEventListener(t.ComponentTouchEvent.TOUCH_CLICK_TYPE,this.OnComponentTouchClick,this),this.TouchManager.addTouchEventListener(t.ComponentTouchEvent.TOUCH_DOUBLE_CLICK_TYPE,this.OnComponentTouchDblClick,this)):(e.addEvtListener(t.MouseEvent.CLICK,this._onClick,!1,this),e.addEvtListener(t.MouseEvent.DBLCLICK,this._onDblClick,!1,this),e.addEvtListener("contextmenu",this.OnContextMenu,!1,this),e.addEvtListener(t.MouseEvent.MOUSEMOVE,this.OnMouseMove,!1,this),e.addEvtListener(t.MouseEvent.MOUSEOVER,this.PreOnMouseOver,!1,this),e.addEvtListener(t.MouseEvent.MOUSEOUT,this.PreOnMouseOut,!1,this),e.addEvtListener(t.MouseEvent.MOUSEDOWN,this.PreOnMouseDown,!1,this),e.addEvtListener(t.MouseEvent.MOUSEUP,this.OnMouseUp,!1,this),e.addEvtListener(t.KeyboardEvent.KEYDOWN,this.OnKeyDown,!1,this),e.addEvtListener(t.KeyboardEvent.KEYUP,this.OnKeyUp,!1,this),e.addEvtListener(p.FOCUS,this.OnFocus,!1,this),e.addEvtListener(p.BLUR,this.OnBlur,!1,this)),this.isDndSupported())){var i=this.getCtx();this.setDragSource(new t.DragSource(i)),this._addDndListener("dragstart",this.OnDndDragStart),this._addDndListener("drag",this.OnDndDrag),this._addDndListener("dragend",this.OnDndDragEnd),this._addDndListener("dragenter",this.OnDndDragEnter),this._addDndListener("dragover",this.OnDndDragOver),this._addDndListener("dragleave",this.OnDndDragLeave),this._addDndListener("drop",this.OnDndDrop);var n=i.getContainer();for(var o in this._dndListeners)t.ToolkitUtils.addDomEventListener(n,o,this._dndListeners[o],!1);this._context.addDndEventManager(this)}},t.EventManager.prototype._addDndListener=function(e,i){var n=t.SvgDocumentUtils.createStaticCallback(this.getCtx(),i,this);this._dndListeners[e]=n},t.EventManager.prototype.removeListeners=function(t,e){t&&(e||this.hideTooltip(),this.RemoveListeners(t))},t.EventManager.prototype.RemoveListeners=function(e){if(t.Agent.isTouchDevice()?(e.removeEvtListener(t.TouchEvent.TOUCHSTART,this.OnTouchStartBubble,!1,this),e.removeEvtListener(t.TouchEvent.TOUCHMOVE,this.OnTouchMoveBubble,!1,this),e.removeEvtListener(t.TouchEvent.TOUCHEND,this.OnTouchEndBubble,!1,this),this.TouchManager.removeTouchEventListener(t.ComponentTouchEvent.TOUCH_HOVER_START_TYPE,this.OnComponentTouchHoverStart,this),this.TouchManager.removeTouchEventListener(t.ComponentTouchEvent.TOUCH_HOVER_MOVE_TYPE,this.OnComponentTouchHoverMove,this),this.TouchManager.removeTouchEventListener(t.ComponentTouchEvent.TOUCH_HOVER_END_TYPE,this.OnComponentTouchHoverEnd,this),this.TouchManager.removeTouchEventListener(t.ComponentTouchEvent.TOUCH_HOVER_OUT_TYPE,this.OnComponentTouchHoverOut,this),this.TouchManager.removeTouchEventListener(t.ComponentTouchEvent.TOUCH_HOVER_OVER_TYPE,this.OnComponentTouchHoverOver,this),this.TouchManager.removeTouchEventListener(t.ComponentTouchEvent.TOUCH_CLICK_TYPE,this.OnComponentTouchClick,this),this.TouchManager.removeTouchEventListener(t.ComponentTouchEvent.TOUCH_DOUBLE_CLICK_TYPE,this.OnComponentTouchDblClick,this)):(e.removeEvtListener(t.MouseEvent.CLICK,this._onClick,!1,this),e.removeEvtListener(t.MouseEvent.DBLCLICK,this._onDblClick,!1,this),e.removeEvtListener("contextmenu",this.OnContextMenu,!1,this),e.removeEvtListener(t.MouseEvent.MOUSEMOVE,this.OnMouseMove,!1,this),e.removeEvtListener(t.MouseEvent.MOUSEOVER,this.PreOnMouseOver,!1,this),e.removeEvtListener(t.MouseEvent.MOUSEOUT,this.PreOnMouseOut,!1,this),e.removeEvtListener(t.MouseEvent.MOUSEDOWN,this.PreOnMouseDown,!1,this),e.removeEvtListener(t.MouseEvent.MOUSEUP,this.OnMouseUp,!1,this),e.removeEvtListener(t.KeyboardEvent.KEYDOWN,this.OnKeyDown,!1,this),e.removeEvtListener(t.KeyboardEvent.KEYUP,this.OnKeyUp,!1,this),e.removeEvtListener(p.FOCUS,this.OnFocus,!1,this),e.removeEvtListener(p.BLUR,this.OnBlur,!1,this)),this.isDndSupported()){var i=this.getCtx().getContainer();for(var n in this._dndListeners)t.ToolkitUtils.removeDomEventListener(i,n,this._dndListeners[n],!1);this._dndListeners={},this._context.removeDndEventManager(this)}},t.EventManager.prototype.destroy=function(){this.CustomTooltipManager&&(this.CustomTooltipManager.removeTooltipEventListener("actionTooltipClosed",this.OnActionTooltipClosed,this),this.CustomTooltipManager.removeTooltipEventListener("actionTooltipStarted",this.OnActionTooltipStarted,this))},t.EventManager.prototype.PreEventBubble=function(t){this.TouchManager.preEventBubble(t)},t.EventManager.prototype.setSelectionHandler=function(t){this._selectionHandler=t},t.EventManager.prototype.getSelectionHandler=function(t){return this._selectionHandler},t.EventManager.prototype.getMarqueeGlassPane=function(){return null},t.EventManager.prototype.setDragSource=function(e){this.DragSource=e,t.Agent.isTouchDevice()&&this.DragSource.setTouchManager(this.TouchManager)},t.EventManager.prototype.setKeyboardHandler=function(e){t.Agent.isTouchDevice()||(this.KeyboardHandler=e)},t.EventManager.prototype.getKeyboardHandler=function(){return this.KeyboardHandler},t.EventManager.prototype.setFocusObj=function(t){var e=this.getFocus();if(t!=e&&(this.setFocus(t),e&&e.hideKeyboardFocusEffect(),this._currentKeyboardHandlerIdx>-1&&this._currentKeyboardHandlerIdx<this._keyboardHandlers.length)){var i=this._keyboardHandlers[this._currentKeyboardHandlerIdx];i!=this&&i.hideKeyboardFocusEffect()}this.setCurrentKeyboardHandler(this)},t.EventManager.prototype.setFocus=function(t){this.KeyboardHandler&&(this._focusedObj=t)},t.EventManager.prototype.getFocus=function(){return this.KeyboardHandler?this._focusedObj:null},t.EventManager.prototype.setFocused=function(t){var e=this.getFocus();e&&this.KeyboardHandler&&(t?this._shouldDisplayKeyboardFocus&&this._currentKeyboardHandlerIdx>=0&&this._currentKeyboardHandlerIdx<this._keyboardHandlers.length&&this._keyboardHandlers[this._currentKeyboardHandlerIdx]===this&&e.showKeyboardFocusEffect():e.hideKeyboardFocusEffect()),t||(this._shouldDisplayKeyboardFocus=!1)},t.EventManager.prototype.setTooltipsEnabled=function(t){this._tooltipsEnabled=t},t.EventManager.prototype.getTooltipsEnabled=function(t){return this._tooltipsEnabled},t.EventManager.prototype.GetLogicalObject=function(t,e){return this.GetLogicalObjectAndDisplayable(t,e).logicalObject},t.EventManager.prototype.GetLogicalObjectAndDisplayable=function(t,e){for(var i=t;i;){if(i._logicalObjects)for(var n=0;n<i._logicalObjects.length;n++){var o=i._logicalObjects[n];if(o.eventManager==this){var r={};return r.logicalObject=o.logicalObject,r.displayable=i,r}}i=e?null:i.getParent()}return{}},t.EventManager.prototype._getTooltipColor=function(t,e,i){if(t&&t.getDatatipColor)return t.getDatatipColor()},t.EventManager.prototype.FireEvent=function(t,e){this._callback&&this._callback.call(this._callbackObj,t,e)},t.EventManager.prototype.fireSelectionEvent=function(e){var i=this.getSelectionHandler(e);if(i){var n=i.getSelectedIds(),o=t.EventFactory.newSelectionEvent(n);this._callback.call(this._callbackObj,o)}},t.EventManager.prototype._onClick=function(e){if(this.IsDoubleClickable(e)){if(this._clickTimer&&this._clickTimer.isRunning()){var i=this._savedClickEvent;if(e.pageX==i.pageX&&e.pageY==i.pageY)return void this._savedClickCount++;this._clickTimer.stop(),this._onClickTimerEnd()}this._savedClickEvent=e,this._savedClickCount=1,this._clickTimer||(this._clickTimer=new t.Timer(this._context,250,this._onClickTimerEnd,this,1)),this._clickTimer.reset(),this._clickTimer.start()}else this.OnClick(e)},t.EventManager.prototype._onClickTimerEnd=function(){var t=this._savedClickEvent;this._savedClickEvent=null,this._savedClickCount=0,t&&this.OnClick(t)},t.EventManager.prototype.OnClick=function(t){var e=this.GetLogicalObject(t.target);if(this.OnClickInternal(t),this.ProcessSelectionEventHelper(e,t.ctrlKey),this._shouldDisplayKeyboardFocus=!1,e&&this.KeyboardHandler&&e.getNextNavigable){var i=e.getNextNavigable(t);this.setFocusObj(i)}},t.EventManager.prototype.IsDoubleClickable=function(t){var e=this.GetLogicalObject(t.target);return!!(e&&e.isDoubleClickable&&e.isDoubleClickable())},t.EventManager.prototype.ProcessSelectionEventHelper=function(t,e){var i=this.getSelectionHandler(t);i&&(i.processClick(t,e)&&this.fireSelectionEvent(t))},t.EventManager.prototype._onDblClick=function(t){var e=this.IsDoubleClickable(t);(e&&2===this._savedClickCount||!e)&&this.OnDblClick(t),this._savedClickCount=0},t.EventManager.prototype.OnDblClick=function(t){this._clickTimer&&this._clickTimer.isRunning()&&(this._clickTimer.stop(),this._savedClickEvent=null),this.OnDblClickInternal(t)},t.EventManager.prototype.OnContextMenu=function(t){var e=this.GetLogicalObject(t.target);e&&e.getNextNavigable&&this.setFocus(e),this._onContextMenuHelper(t,e)},t.EventManager.prototype._onContextMenuHelper=function(e,i){this._processActionPopup(e.target,new t.Point(e.pageX,e.pageY))&&e.preventDefault(),i&&i.isSelectable&&i.isSelectable()&&this.ProcessSelectionEventHelper(i,e.ctrlKey)},t.EventManager.prototype.OnKeyDown=function(e){this._bKeyDown=!0;var i,n,o=e.keyCode,r=!1;for(i=this._currentKeyboardHandlerIdx<0||this._currentKeyboardHandlerIdx>this._keyboardHandlers.length?o==t.KeyboardEvent.TAB&&e.shiftKey?this._keyboardHandlers.length-1:0:this._currentKeyboardHandlerIdx,n=o==t.KeyboardEvent.TAB&&e.shiftKey?-1:1;i>=0&&i<this._keyboardHandlers.length&&!r;i+=n){var s=this._keyboardHandlers[i];(r=s===this?this.ProcessKeyboardEvent(e):s.handleKeyboardEvent(e))&&(this._currentKeyboardHandlerIdx=i)}return r||e.keyCode!=t.KeyboardEvent.UP_ARROW&&e.keyCode!=t.KeyboardEvent.DOWN_ARROW&&e.keyCode!=t.KeyboardEvent.LEFT_ARROW&&e.keyCode!=t.KeyboardEvent.RIGHT_ARROW||t.EventManager.consumeEvent(e),r||o!=t.KeyboardEvent.TAB||(this._currentKeyboardHandlerIdx=-1),r},t.EventManager.prototype.handleKeyboardEvent=function(t){return this.OnKeyDown(t)},t.EventManager.prototype.hideKeyboardFocusEffect=function(){var t=this.getFocus();t&&t.isShowingKeyboardFocusEffect()&&t.hideKeyboardFocusEffect()},t.EventManager.prototype.ProcessKeyboardEvent=function(e){if(!this.KeyboardHandler)return!1;this.hideTooltip();var i,n,o=this.getFocus();return e.keyCode==t.KeyboardEvent.TAB&&o?o.isShowingKeyboardFocusEffect()?(this._bKeyDown=!1,o.hideKeyboardFocusEffect(),this.ProcessRolloverEvent(e,o,!1),!!(n=e.shiftKey?this._context.previousKeyboardFocus():this._context.nextKeyboardFocus())&&(n.FireListener(e,!1),t.EventManager.consumeEvent(e),!0)):(this.ShowFocusEffect(e,o),this.ProcessRolloverEvent(e,o,!0),t.EventManager.consumeEvent(e),!0):!!(i=this.KeyboardHandler.processKeyDown(e))&&(this.setFocus(i),this._shouldDisplayKeyboardFocus=!0,o&&(o.hideKeyboardFocusEffect(),this.ProcessRolloverEvent(e,o,!1)),this.KeyboardHandler.isSelectionEvent(e)?this.ProcessSelectionEventHelper(i,e.shiftKey):this.KeyboardHandler.isMultiSelectEvent(e)&&this.ProcessSelectionEventHelper(i,e.ctrlKey),this.ShowFocusEffect(e,i),this.ProcessRolloverEvent(e,i,!0),!0)},t.EventManager.prototype.ShowFocusEffect=function(t,e){e.showKeyboardFocusEffect();var i=e.getKeyboardTooltipLocation?e.getKeyboardTooltipLocation():e.getKeyboardBoundingBox(this.getCtx().getStage()).getCenter(),n=this.getCtx().stageToPageCoords(i.x,i.y);this.ProcessObjectTooltip(t,n.x,n.y,e,e.getTargetElem()),this.UpdateActiveElement(e)},t.EventManager.prototype.OnKeyUp=function(e){if(this._bKeyDown=!1,!0===this._handleExternalKeyboardFocus&&e.keyCode==t.KeyboardEvent.TAB&&(this._handleExternalKeyboardFocus=!1,document.createEvent)){var i=document.createEvent("KeyboardEvent"),n=e.keyCode,o=e.ctrlKey,r=e.shiftKey;void 0!==i.initKeyboardEvent?i.initKeyboardEvent(t.KeyboardEvent.KEYDOWN,!0,!0,window,o,!1,r,!1,n,n):i.initKeyEvent(t.KeyboardEvent.KEYDOWN,!0,!0,window,o,!1,!1,r,n,n);var s=t.DomEventFactory.newEvent(i);s.keyCode=n,s.ctrlKey=o,s.shiftKey=r;var a=this.getCtx().getStage().getSVGRoot().parentNode;t.HtmlKeyboardListenerUtils._bubbleListener.call(a,s)}},t.EventManager.prototype.OnMouseMove=function(t){var e=t.pageX,i=t.pageY,n=this.GetLogicalObjectAndDisplayable(t.target),o=n.logicalObject,r=n.displayable;o&&this.ProcessObjectTooltip(t,e,i,o,r)},t.EventManager.prototype.PreOnMouseOver=function(t){this.OnMouseOver(t)},t.EventManager.prototype.OnMouseOver=function(t){var e=this.GetLogicalObjectAndDisplayable(t.target),i=e.logicalObject,n=e.displayable;if(i){var o=this.getSelectionHandler(i);o&&o.processMouseOver(i),this.ProcessRolloverEvent(t,i,!0),this.UpdateActiveElement(i,n)}},t.EventManager.prototype.PreOnMouseOut=function(t){var e=this.GetLogicalObject(t.relatedTarget),i=this.GetLogicalObject(t.target);i&&i===e||this.OnMouseOut(t)},t.EventManager.prototype.OnMouseOut=function(t){var e=this.GetLogicalObject(t.target);if(e&&e!=this.GetLogicalObject(t.relatedTarget)){var i=this.getSelectionHandler(e);i&&i.processMouseOut(e),this.ProcessRolloverEvent(t,e,!1),this.hideTooltip()}},t.EventManager.prototype.PreOnMouseDown=function(t){this.OnMouseDown(t)},t.EventManager.prototype.OnMouseDown=function(t){this.isInActionPopup()&&this.CustomTooltipManager.closeActionTooltip();var e=this.GetLogicalObject(t.target);this.DragSource&&!t.dragSourceSet&&this.IsDragCandidate(e)&&(this.DragSource.setDragCandidate(e),t.dragSourceSet=!0)},t.EventManager.prototype.OnMouseUp=function(t){},t.EventManager.prototype._processTouchTooltip=function(e){var i=this.TouchManager.getTooltipInfo(),n=i.touchIds,o=i.tooltipTarget;if(this.GetEventInfo(e,t.EventManager._EVENT_INFO_TOOLTIP_DISPLAYED_KEY)||0!=n.length&&o){var r=this.TouchManager.calcAveragePosition(n),s=this.GetLogicalObject(o);this.ProcessObjectTooltip(e,r.x,r.y,s,null)}else this.hideTooltip()},t.EventManager.prototype.OnTouchStartBubble=function(e){if(this.PreEventBubble(e),e.isInitialTouch()&&(this._popupJustClosed=!1),this.DragSource){var i=this.GetLogicalObject(e.target);!e.dragSourceSet&&this.IsDragCandidate(i)&&(this.DragSource.setDragCandidate(i),e.dragSourceSet=!0)}this.isInActionPopup()&&(this.CustomTooltipManager.closeActionTooltip(),this.TouchManager.resetTouchHold()),this.HandleImmediateTouchStartInternal(e),this.TouchManager.fireLogicalEvents(e),this.TouchManager.postEventBubble(e),this.isTouchResponseTouchStart()?(this._touchResponseHandled=!0,this.TouchManager.processAssociatedTouchAttempt(e,t.EventManager.TOUCH_RESPONSE_TOUCH_START,this._saveTouchStart,this)):(this._touchResponseHandled=!1,this._processTouchTooltip(e))},t.EventManager.prototype.OnTouchMoveBubble=function(t){this.PreEventBubble(t),this.TouchManager&&(this._prevActionClear=!1,this.HandleImmediateTouchMoveInternal(t),this.TouchManager.fireLogicalEvents(t),this.TouchManager.postEventBubble(t),this._processTouchTooltip(t))},t.EventManager.prototype._handleTouchEndTimer=function(){for(var t=0;t<this._touchEndTimer.length;t++){var e=this._touchEndTimer[t];e.timer.stop();var i=e.event;this.TouchManager&&(this.HandleImmediateTouchEndInternal(i),this.TouchManager.fireLogicalEvents(i),this.TouchManager.postEventBubble(i))}this._touchEndTimer=new Array},t.EventManager.prototype.OnTouchEndBubble=function(e){this.PreEventBubble(e);var i=new t.Timer(this._context,0,this._handleTouchEndTimer,this,1);this._touchEndTimer||(this._touchEndTimer=new Array),this._touchEndTimer.push({event:e,timer:i}),i.start()},t.EventManager.prototype.HandleImmediateTouchStartInternal=function(t){},t.EventManager.prototype.HandleImmediateTouchMoveInternal=function(t){},t.EventManager.prototype.HandleImmediateTouchEndInternal=function(t){},t.EventManager.prototype.OnComponentTouchHoverStart=function(t){this.HandleTouchHoverStartInternal(t),this._touchResponseHandled||this.HandleTouchActionsStart(t)},t.EventManager.prototype.OnComponentTouchHoverMove=function(t){this.HandleTouchHoverMoveInternal(t),this._touchResponseHandled||this.HandleTouchActionsMove(t)},t.EventManager.prototype.OnComponentTouchHoverEnd=function(e){if(this.HandleTouchHoverEndInternal(e),this._callbackObj instanceof t.BaseComponent){var i=this.getCtx().getStageAbsolutePosition(),n=e.touch.pageX,o=e.touch.pageY;n<=i.x+this._callbackObj.getWidth()&&n>=i.x&&o<=i.y+this._callbackObj.getHeight()&&o>=i.y&&this._callback.call(this._callbackObj,t.EventFactory.newTouchHoldReleaseEvent(e.getNativeEvent()))}this._touchResponseHandled||this.HandleTouchActionsEnd(e)},t.EventManager.prototype.OnComponentTouchHoverOut=function(t){var e=this.GetLogicalObject(t.relatedTarget),i=this.GetLogicalObject(t.target);i&&i===e||(this.HandleTouchHoverOutInternal(t),this._touchResponseHandled||this.HandleTouchActionsOut(t))},t.EventManager.prototype.OnComponentTouchHoverOver=function(t){this.HandleTouchHoverOverInternal(t),this._touchResponseHandled||this.HandleTouchActionsOver(t)},t.EventManager.prototype.OnComponentTouchDblClick=function(t){this.HandleTouchDblClickInternal(t)},t.EventManager.prototype.OnComponentTouchClick=function(e){var i=this.GetLogicalObjectAndDisplayable(e.target),n=i.logicalObject,o=i.displayable,r=e.touch;this.HandleTouchClickInternal(e)||(this.isTouchResponseTouchStart()||this._processTouchSelection(n),this._popupJustClosed||this._processTouchSelectionClear(n),this.CustomTooltipManager.displayActionPopup()&&(this.UpdateActionTooltipLaunchedFeedback(o,new t.Point(r.pageX,r.pageY)),this.CustomTooltipManager.startActionPopupAtPosition(r.pageX,r.pageY,o)))},t.EventManager.prototype._processTouchSelection=function(t){var e=this.getSelectionHandler(t);e&&t&&t.isSelectable&&t.isSelectable()&&e.processClick(t,!0)&&this.fireSelectionEvent(t),this._prevActionClear=!1},t.EventManager.prototype._processTouchSelectionClear=function(e){var i=this.getSelectionHandler(e);if(i&&(!e||!e.isSelectable||!e.isSelectable())&&!this._prevActionClear){var n=!1;i.getType()==t.SelectionHandler.TYPE_MULTIPLE&&i.getSelectedCount()>1&&(n=!0),n?this.addClearAllActionItem():i.processClick(null,!1)&&this.fireSelectionEvent(e)}},t.EventManager.prototype.OnActionTooltipClosed=function(e){this._popupJustClosed=!0,this._isInActionPopup=!1,this.CustomTooltipManager.getActionTooltip().containsMenuId(t.EventManager.CLEAR_SELECTION_ACTION_TYPE)&&(this._prevActionClear=!0),this.CustomTooltipManager.clearActionTooltip(),this.UpdateActionTooltipClosedFeedback(e.target)},t.EventManager.prototype.OnActionTooltipStarted=function(t){this._isInActionPopup=!0},t.EventManager.prototype._getTooltipInfo=function(t,e,i,n){var o=null,r=!1;return e&&e.getDatatip&&(o=e.getDatatip(t,i,n))&&(r=!0),!o&&e&&e.getTooltip&&(o=e.getTooltip(t,i,n)),{text:o,isDatatip:r}},t.EventManager.prototype._processShowTooltip=function(t,e,i,n){if(this.getTooltipsEnabled(e)){var o=this._context.pageToStageCoords(i,n),r=o.x,s=o.y,a=this._getTooltipInfo(t,e,r,s),l=a.isDatatip,h=a.text;if(h){this.CustomTooltipManager.clearActionTooltip();var u=this._getTooltipColor(e,r,s),c=this._context.getTooltipManager();return l?c.showDatatip(i,n,h,u):c.showTooltip(i,n,h,null,!0,u),this.TooltipLaunched(h,u),this.DispatchElementEvent("tooltiplaunched"),!0}this.hideTooltip()}else this.hideTooltip();return!1},t.EventManager.prototype.hideTooltip=function(){var t=this._context.getTooltipManager();t&&t.hideTooltip(),this.TooltipHidden()},t.EventManager.prototype._processActionPopup=function(t,e){return this.CustomTooltipManager.displayActionPopup()?(this.SetupTouchTooltip(t),this.UpdateActionPopupShownFeedback(t),this.CustomTooltipManager.startActionPopupAtPosition(e.x,e.y,t),!0):(this.UpdateActionPopupHiddenFeedback(t),!1)},t.EventManager.prototype.TooltipLaunched=function(t,e){},t.EventManager.prototype.TooltipHidden=function(){},t.EventManager.prototype.SetupTouchTooltip=function(t){var e=this.GetLogicalObject(t),i=this.CustomTooltipManager.getActionTooltip();if(null==i.getTooltipBorderColor()){var n=this._getTooltipColor(e);i.setTooltipBorderColor(n)}},t.EventManager.prototype.OnClickInternal=function(t){},t.EventManager.prototype.OnDblClickInternal=function(t){},t.EventManager.prototype.HandleTouchHoverStartInternal=function(t){},t.EventManager.prototype.HandleTouchHoverMoveInternal=function(t){},t.EventManager.prototype.HandleTouchHoverEndInternal=function(t){},t.EventManager.prototype.HandleTouchHoverOverInternal=function(t){},t.EventManager.prototype.HandleTouchHoverOutInternal=function(t){},t.EventManager.prototype.HandleTouchClickInternal=function(t){return!1},t.EventManager.prototype.HandleTouchDblClickInternal=function(t){},t.EventManager.prototype.UpdateActionPopupShownFeedback=function(t){},t.EventManager.prototype.UpdateActionPopupHiddenFeedback=function(t){},t.EventManager.prototype.UpdateActionTooltipClosedFeedback=function(t){},t.EventManager.prototype.UpdateActionTooltipLaunchedFeedback=function(t,e){},t.EventManager.prototype.isInActionPopup=function(){return this._isInActionPopup},t.EventManager.prototype.GetClearSelectionText=function(){var t=this.getComponent();return t&&t.getOptions().translations.labelClearSelection},t.EventManager.prototype.addClearAllActionItem=function(){var e=this.CustomTooltipManager.getActionTooltip(),i=e.getMenuItems();e&&i.length>0&&i[i.length-1].getId()===t.EventManager.CLEAR_SELECTION_ACTION_TYPE||(this.addActionTooltipMenuItem(t.EventManager.CLEAR_SELECTION_ACTION_TYPE,this.GetClearSelectionText(),this._actionTooltipClearListener,this),e&&e.setTooltipBorderColor(v.DEFAULT_BORDER_COLOR))},t.EventManager.prototype.addActionTooltipMenuItem=function(t,e,i,n){this.CustomTooltipManager.getActionTooltip().addMenuItem(new m(this._context,t,e,i,n))},t.EventManager.prototype._actionTooltipClearListener=function(t){var e=this.GetLogicalObject(t.target);this.getSelectionHandler(e).processClick(null,!1)&&this.fireSelectionEvent(e)},t.EventManager.consumeEvent=function(t){t&&(t.preventDefault(),t.stopPropagation())},t.EventManager.prototype.addComponentKeyboardHandlerAt=function(t,e){e>this._keyboardHandlers.length||t&&(this._keyboardHandlers.splice(e,0,t),e<=this._currentKeyboardHandlerIdx&&this._currentKeyboardHandlerIdx++)},t.EventManager.prototype.removeComponentKeyboardHandler=function(t){if(t){var e=this._findHandler(t);e>-1&&(this._currentKeyboardHandlerIdx==e&&0==e?this._currentKeyboardHandlerIdx=0:e<=this._currentKeyboardHandlerIdx&&this._currentKeyboardHandlerIdx--,this._keyboardHandlers.splice(e,1))}},t.EventManager.prototype._findHandler=function(t){for(var e=-1,i=this._keyboardHandlers.length,n=0;n<i;n++)this._keyboardHandlers[n]===t&&(e=n);return e},t.EventManager.prototype.setCurrentKeyboardHandler=function(t){var e=this._findHandler(t);e>=0&&(this._currentKeyboardHandlerIdx=e)},t.EventManager.prototype.IsDragCandidate=function(t){return!0},t.EventManager.prototype.UpdateActiveElement=function(e,i){if(i||(i=e.getDisplayable?e.getDisplayable():e.getDisplayables?e.getDisplayables()[0]:e),i instanceof t.Displayable){if(e.getAriaLabel){var n=e.getAriaLabel();n&&i.setAriaProperty("label",n)}else for(;!i.getAriaRole()&&i.getParent();)i=i.getParent();i!=this.getCtx().getStage()&&this.getCtx().setActiveElement(i)}},t.EventManager.prototype.getTouchManager=function(){return this.TouchManager},t.EventManager.prototype.endDrag=function(){return null},t.EventManager.prototype._hasEventInfo=function(t){return null!=t&&!!t.getNativeEvent()._eventInfo},t.EventManager.prototype.GetEventInfo=function(t,e){return this._hasEventInfo(t)&&null!=e&&(i=this.StoreInfoByEventType(e)?t.getNativeEvent()._eventInfo[t.type]:t.getNativeEvent()._eventInfo)?i[e]:null;var i},t.EventManager.prototype.SetEventInfo=function(t,e,i){if(null!=t&&null!=e){var n=t.getNativeEvent();if(n._eventInfo||(n._eventInfo={}),this.StoreInfoByEventType(e)){var o=t.type;n._eventInfo[o]||(n._eventInfo[o]={}),n._eventInfo[o][e]=i}else n._eventInfo[e]=i}},t.EventManager.prototype.StoreInfoByEventType=function(e){return e!=t.EventManager._EVENT_INFO_TOOLTIP_DISPLAYED_KEY},t.EventManager.prototype.ProcessObjectTooltip=function(e,i,n,o,r){this.GetEventInfo(e,t.EventManager._EVENT_INFO_TOOLTIP_DISPLAYED_KEY)||this._processShowTooltip(r,o,i,n)&&this.SetEventInfo(e,t.EventManager._EVENT_INFO_TOOLTIP_DISPLAYED_KEY,!0)},t.EventManager.prototype._resetExternalKeyboardFocus=function(){this._handleExternalKeyboardFocus=!1},t.EventManager.prototype.OnFocus=function(e){this._handleExternalKeyboardFocus=!1,this._bKeyDown||e.isPropagationStopped()||(this._handleExternalKeyboardFocus=!0,this._keyboardFocusTimer||(this._keyboardFocusTimer=new t.Timer(this._context,200,this._resetExternalKeyboardFocus,this,1)),this._keyboardFocusTimer.reset(),this._keyboardFocusTimer.start(),e.stopPropagation())},t.EventManager.prototype.OnBlur=function(t){this._bKeyDown=!1;var e=this.getFocus();e&&e.isShowingKeyboardFocusEffect()&&e.hideKeyboardFocusEffect()},t.EventManager.prototype.ProcessRolloverEvent=function(t,e,i){},t.EventManager.prototype.CreateCategoryRolloverHandler=function(e,i){return new t.CategoryRolloverHandler(e,i)},t.EventManager.prototype.GetTouchResponse=function(){return t.EventManager.TOUCH_RESPONSE_TOUCH_START},t.EventManager.prototype.isTouchResponseTouchStart=function(){var e=this.GetTouchResponse();if(e===t.EventManager.TOUCH_RESPONSE_TOUCH_START)return!0;if(e===t.EventManager.TOUCH_RESPONSE_TOUCH_HOLD)return!1;for(var i=this.getCtx().getSvgDocument().parentElement.parentElement;i&&"HTML"!==i.nodeName;){var n=window.getComputedStyle(i);if("hidden"!==n.overflow&&(i.scrollWidth>i.clientWidth+t.EventManager._TOUCH_RESPONSE_PADDING_CHECK&&"hidden"!==n["overflow-x"]||i.scrollHeight>i.clientHeight+t.EventManager._TOUCH_RESPONSE_PADDING_CHECK&&"hidden"!==n["overflow-y"])||window.frameElement&&"IFRAME"==window.frameElement.nodeName)return!1;i=i.parentElement}return!0},t.EventManager.prototype._saveTouchStart=function(e,i){this.TouchManager.getTouchIdsForObj(t.EventManager.TOUCH_RESPONSE_TOUCH_START).length<=1&&(this.TouchManager.saveProcessedTouch(i.identifier,t.TouchManager.HOVER_TOUCH_KEY,null,t.TouchManager.HOVER_TOUCH_KEY,t.TouchManager.HOVER_TOUCH_KEY,this.HandleTouchActionsMove,this.HandleTouchActionsEnd,this),this.HandleTouchActionsStart(e))},t.EventManager.prototype.HandleTouchActionsStart=function(e){var i=this.GetLogicalObject(e.target),n=e instanceof t.ComponentTouchEvent?e.touch:e.touches[0];e instanceof t.ComponentTouchEvent||(this._touchMap[n.identifier]||(this._touchMap[n.identifier]={}),this._touchMap[n.identifier][t.TouchManager.PREV_HOVER_OBJ]=null,i&&this.HandleTouchActionsOver(e),this._touchMap[n.identifier][t.TouchManager.PREV_HOVER_OBJ]=i),i&&this.ProcessRolloverEvent(e,i,!0),this._processTouchTooltip(e),this._prevActionClear=!1},t.EventManager.prototype.HandleTouchActionsMove=function(e){var i,n=e instanceof t.ComponentTouchEvent?e.touch:e.touches[0];if(e instanceof t.ComponentTouchEvent)i=this.GetLogicalObject(e.target);else{e.preventDefault();var o=t.SvgDocumentUtils.elementFromTouch(n);i=this.GetLogicalObject(o);var r=this._touchMap[n.identifier][t.TouchManager.PREV_HOVER_OBJ];if(r!=i){var s;if(r)r.getDisplayable?s=r.getDisplayable():r.getDisplayables&&(s=r.getDisplayables()[0]),s&&(e.target=s,this.HandleTouchActionsOut(e,n));e.target=o,i&&this.HandleTouchActionsOver(e)}this._touchMap[n.identifier][t.TouchManager.PREV_HOVER_OBJ]=i}i&&this.ProcessRolloverEvent(e,i,!0)},t.EventManager.prototype.HandleTouchActionsEnd=function(e,i){var n,o;if(e instanceof t.ComponentTouchEvent){var r=this.GetLogicalObjectAndDisplayable(e.target);n=r.displayable,o=r.logicalObject,i=e.touch}else{var s;e.preventDefault(),n=t.SvgDocumentUtils.elementFromTouch(i),(o=this.GetLogicalObject(n))&&(o.getDisplayable?s=o.getDisplayable():o.getDisplayables&&(s=o.getDisplayables()[0])),s&&(e.target=s,this.HandleTouchActionsOut(e,i)),this._touchMap[i.identifier][t.TouchManager.PREV_HOVER_OBJ]=null}var a=i.pageX,l=i.pageY;this._processTouchSelection(o),this._processActionPopup(n,new t.Point(a,l))},t.EventManager.prototype.HandleTouchActionsOver=function(t){var e=this.GetLogicalObject(t.target);e&&this.ProcessRolloverEvent(t,e,!0);var i=this.getSelectionHandler(e);i&&i.processMouseOver(e)},t.EventManager.prototype.HandleTouchActionsOut=function(e,i){var n=this.GetLogicalObject(e.target);e instanceof t.ComponentTouchEvent&&e.touch,n&&this.ProcessRolloverEvent(e,n,!1);var o=this.getSelectionHandler(n);o&&o.processMouseOut(n)},t.EventManager.prototype.getComponent=function(){return this._component},t.EventManager.DROP_OFFSET_X_DATA_TYPE="text/_dvtDropOffsetX",t.EventManager.DROP_OFFSET_Y_DATA_TYPE="text/_dvtDropOffsetY",t.EventManager.prototype.isDndSupported=function(){return!1},t.EventManager.prototype.OnDndDragStart=function(e){var i=t.ToolkitUtils.getEventForSyntax(this._context,e),n=i.dataTransfer;if(!(i.dataTransfer.types&&i.dataTransfer.types.length>0)){var o=this._context.pageToStageCoords(e.pageX,e.pageY),r=this.DragSource.getDragTransferable(o.x,o.y),s=this.GetDragSourceType(e);if(null!=r&&null!=s){this._context.getTooltipManager().hideTooltip();var a=this._getDragOptions(e),l=a.dataTypes,h=a.dragStart;if(null!=l||h){var u=this.DragSource.getDragObject();if(this.ProcessSelectionEventHelper(u,!1),u.hideHoverEffect&&u.hideHoverEffect(),null!=l){Array.isArray(l)||(l=[l]);for(var c=this._getDragData(e),p=0;p<l.length;p++)n.setData(l[p],c)}var _=t.ToolkitUtils.getDragFeedback(this.DragSource.getDragOverFeedback(o.x,o.y),this._context.getStage()),g=_.svg,d=this.DragSource.getDragOffset(o.x,o.y);g.style.width=_.width+"px",g.style.height=_.height+"px",g.style.left=e.pageX-d.x+"px",g.style.top=e.pageY-d.y+"px",g.style.position="absolute",g.style.fontFamily=this._context.getDefaultFontFamily(),g.style.fontSize=this._context.getDefaultFontSize(),t.SvgDocumentUtils.disableMouseEvents(g),document.body.appendChild(g),t.Context.requestAnimationFrame(function(){document.body.removeChild(g)}),n.setDragImage(g,d.x,d.y);var S=this.GetDropOffset(e);if(S&&(n.setData(t.EventManager.DROP_OFFSET_X_DATA_TYPE,S.x),n.setData(t.EventManager.DROP_OFFSET_Y_DATA_TYPE,S.y)),h)h(i,this._getDragEventPayload(e))}else this._context.isLastDndEventManager(this)&&e.preventDefault()}else this._context.isLastDndEventManager(this)&&e.preventDefault()}},t.EventManager.prototype.OnDndDrag=function(t){this._handleDragSourceEvent(t,"drag")},t.EventManager.prototype.OnDndDragEnd=function(t){this.DragSource.setDragCandidate(null),this._handleDragSourceEvent(t,"dragEnd")},t.EventManager.prototype.GetDragSourceType=function(t){return null},t.EventManager.prototype.GetDragDataContexts=function(t){return[]},t.EventManager.prototype.GetDropOffset=function(t){return null},t.EventManager.prototype._getDragOptions=function(t){var e=this.GetDragSourceType(t);return this.getComponent().getOptions().dnd.drag[e]},t.EventManager.prototype._getDragEventPayload=function(t){var e={};return e[this.GetDragSourceType(t)]=this.GetDragDataContexts(),e},t.EventManager.prototype._getDragData=function(t){return JSON.stringify(this.GetDragDataContexts(!0))},t.EventManager.prototype._handleDragSourceEvent=function(e,i){if(null!=this.GetDragSourceType(e)){var n=this._getDragOptions(e)[i];if(n)n(t.ToolkitUtils.getEventForSyntax(this._context,e))}},t.EventManager.prototype.OnDndDragEnter=function(t){this._handleDropTargetEvent(t,"dragEnter",!0)},t.EventManager.prototype.OnDndDragOver=function(t){this._handleDropTargetEvent(t,"dragOver",!0)},t.EventManager.prototype.OnDndDragLeave=function(t){this._handleDropTargetEvent(t,"dragLeave",!1)},t.EventManager.prototype.OnDndDrop=function(t){this._handleDropTargetEvent(t,"drop",!1)},t.EventManager.prototype.GetDropTargetType=function(t){return null},t.EventManager.prototype.GetDropEventPayload=function(t){return null},t.EventManager.prototype.ShowDropEffect=function(t){},t.EventManager.prototype.ShowRejectedDropEffect=function(t){this.ClearDropEffect()},t.EventManager.prototype.ClearDropEffect=function(){},t.EventManager.prototype._getDropOptions=function(t){var e=this.GetDropTargetType(t);return this.getComponent().getOptions().dnd.drop[e]},t.EventManager.prototype._handleDropTargetEvent=function(t,e,i){var n=this._handleDropTargetEventHelper(t,e);n||t.preventDefault(),!n&&i?this.ShowDropEffect(t):n&&i?this.ShowRejectedDropEffect(t):this.ClearDropEffect()},t.EventManager.prototype._handleDropTargetEventHelper=function(e,i){if(null==this.GetDropTargetType(e))return!0;var n=t.ToolkitUtils.getEventForSyntax(this._context,e),o=this._getDropOptions(e),r=o[i];if(r){var s=r(n,this.GetDropEventPayload(e));if(e.getNativeEvent().defaultPrevented)return!1;if(null!=s&&!this._context.isCustomElement())return s}var a=o.dataTypes;if(null!=a){Array.isArray(a)||(a=[a]);for(var l=0;l<a.length;l++)if(n.dataTransfer.types&&n.dataTransfer.types.indexOf(a[l])>=0)return!1}return!0},t.EventManager.prototype.DispatchElementEvent=function(t,e){this.getCtx().getSvgDocument().dispatchEvent(new CustomEvent(t,{detail:e}))};var y=function(t,e){this.Init(t,e)};t.Obj.createSubclass(y,t.Obj),y.prototype.Init=function(t,e){this._context=t,this._id=e,this._actionTooltip=new v(this._context,this._id+"ActionPopup")},y.prototype.GetRichTooltipManager=function(){if(!this._RichTooltipManager){var t=this._id+"Tooltip";this._RichTooltipManager=new E(this._context,t),this._RichTooltipManager.InitializeTooltipElem();var e=this._RichTooltipManager.GetStoredContext();if(e)new T(e,this,null,null).addListeners(this._actionTooltip)}return this._RichTooltipManager},y.prototype.clearActionTooltip=function(){this._actionTooltip&&this._actionTooltip.clearContent()},y.prototype.getActionTooltip=function(){return this._actionTooltip},y.prototype.hideTooltip=function(){this.clearActionTooltip(),this._RichTooltipManager&&this._RichTooltipManager.hideTooltip()},y.prototype.closeActionTooltip=function(){var e=t.EventFactory.newActionTooltipEvent("actionTooltipClosed",this._actionPopupObj);this.FireListener(e),this._actionPopupObj=null,this.hideTooltip()},y.prototype.displayActionPopup=function(){var t=this.getActionTooltip();return!(!t||!t.hasMenuItems())},y.prototype.startActionPopupAtPosition=function(e,i,n,o){var r=this.getActionTooltip();if(r){this.GetRichTooltipManager().showRichElementAtPosition(e,i,r,!0,!1);var s=t.EventFactory.newActionTooltipEvent("actionTooltipStarted",n);this.FireListener(s),this._actionPopupObj=n}},y.prototype.addTooltipEventListener=function(t,e,i){var n=this._getListeners(t,!0);n.push(e),n.push(i)},y.prototype.removeTooltipEventListener=function(t,e,i){var n=this._getListeners(t,!1);if(null!==n)for(var o=0;o<n.length;o+=2)if(n[o]===e&&n[o+1]===i){n.splice(o,2);break}},y.prototype._getListeners=function(t,e){if(!this._listenerObj){if(!e)return null;this._listenerObj={}}var i=t,n=this._listenerObj[i];return!n&&e&&(n=[],this._listenerObj[i]=n),n},y.prototype.FireListener=function(t){var e=this._getListeners(t.type,!1);if(e)for(var i=0;i<e.length;i+=2){var n=e[i+1];e[i].call(n,t)}},y._formatTextString=function(t){var e="";if(!t)return e;var i=(t=t.replace(/\n/g,"<br>")).split("<br>");if(i){for(var n=new Array,o=0;o<i.length;o++){var r=i[o];null!=r&&""!=r&&n.push(r)}for(o=0;o<n.length;o++)e+=n[o],o<n.length-1&&(e+="\n")}return e};var T=function(t,e,i,n){this._customTooltipManager=e,this.Init(t,i,n)};t.Obj.createSubclass(T,t.EventManager),T.prototype.OnClickInternal=function(t){var e=t.target;this._handleMenuClick(e)},T.prototype.HandleImmediateTouchStartInternal=function(t,e){t.blockTouchHold(),this._handleMenuClick(t.target)},T.prototype.HandleTouchClickInternal=function(t){var e=t.target;this._handleMenuClick(e)},T.prototype._handleMenuClick=function(t){var e=this._customTooltipManager._actionPopupObj,i=t._menu;i&&(this._customTooltipManager.closeActionTooltip(),i.FireActionTooltipItem(e))};var v=function(t,e){this._Init(t,e)};t.Obj.createSubclass(v,t.Container),v.DEFAULT_BORDER_COLOR="gray",v.DEFAULT_BACKGROUND_COLOR="#ffffff",v.prototype._Init=function(e,i){this._context=e,v.superclass.Init.call(this,e),this._tooltipText=null,this._tooltipBorderColor=null,this._menuFontSize=11,this._tooltipFill=new t.SolidFill(v.DEFAULT_BACKGROUND_COLOR),this._fontSize=11},v.prototype.getRootDisplayable=function(){return this},v.prototype.UpdateTooltipSize=function(t,e){this._displayWidth=t,this._displayHeight=e},v.prototype.getDisplayWidth=function(){return this._displayWidth},v.prototype.getDisplayHeight=function(){return this._displayHeight},v.prototype.clearContent=function(){this.clearMenuItems(),this.setTooltipBorderColor(null),this.setTooltipText(null)},v.prototype.setTooltipBorderColor=function(t){this._tooltipBorderColor=t},v.prototype.getTooltipBorderColor=function(){return this._tooltipBorderColor},v.prototype.setTooltipText=function(t){this._tooltipText=t},v.prototype.addMenuItem=function(t){this.getMenuItems().push(t)},v.prototype.hasMenuItems=function(){var t=this.getMenuItems();return t&&t.length>0},v.prototype.clearMenuItems=function(){this._menuItems&&(this._menuItems=[])},v.prototype.getMenuItems=function(){return this._menuItems||(this._menuItems=new Array),this._menuItems},v.prototype.containsMenuId=function(t){for(var e=this.getMenuItems(),i=0;i<e.length;i++){if(e[i].getId()==t)return!0}return!1},v.prototype.Render=function(){var e=this.getRootDisplayable();if(e.removeChildren(),this.hasMenuItems()){var i=0,n=0;e.setAlpha(1);var o=new Array,r=new Array;i+=2.5;for(var s=this.getMenuItems(),a=0;a<s.length;a++){var l=s[a],h=new t.OutputText(this._context,l.getText(),0,0,null);h.alignBottom(),h.setFontSize(this._menuFontSize),h._menu=l;var u=h.getDimensions();u.y=5+i;var c=u.w;r.push(u),n=Math.max(c+21+10,n),h.setY(u.y),i+=u.h,a<s.length-1&&(i+=5),o.push(h),h.alignLeft(),h.alignTop()}var p=n+8+2,_=5+(i+=2.5)+4+1;this.UpdateTooltipSize(p+2,_+2),e.setTranslate(1,1);var g=new t.Rect(this._context,0,0,p,_);g.setSolidStroke("rgb(229,232,238)"),g.setFill(this._tooltipFill),e.addChildAt(g,0);for(a=0;a<o.length;a++){var d=o[a];e.addChild(d);c=r[a].w;if(d._menu){var S=new t.Rectangle(0,r[a].y-2.5,p,r[a].h+5),f=new t.Rect(this._context,S.x,S.y,S.w,S.h);f.setInvisibleFill(),f._menu=d._menu,e.addChild(f)}d.setTranslateX(21)}}};var m=function(t,e,i,n,o){this.Init(t,e,i,n,o)};t.Obj.createSubclass(m,t.Obj),m.prototype.Init=function(t,e,i,n,o){this._context=t,this._id=e,this._text=i,this._listener=n,this._listenerObj=o},m.prototype.getId=function(){return this._id},m.prototype.getText=function(){return this._text},m.prototype.FireActionTooltipItem=function(e){if(this._listenerObj&&this._listener){var i=new Object;i.target=e,i.menuItem=this._menuItem,this._menuItemTimer=new t.Timer(this._context,1,this._handleMenuTimer,this),this._menuItemTimer.evt=i,this._menuItemTimer.start()}},m.prototype._handleMenuTimer=function(){this._menuItemTimer&&this._menuItemTimer.stop(),this._listener.call(this._listenerObj,this._menuItemTimer.evt)},t.HtmlTooltipManager=function(t,e){this.Init(t,e)},t.Obj.createSubclass(t.HtmlTooltipManager,t.Obj),t.HtmlTooltipManager._TOOLTIP_DIV_ID="_dvtTooltip",t.HtmlTooltipManager._SHOW_DELAY=500,t.HtmlTooltipManager._BORDER_COLOR="#9ba2b0",t.HtmlTooltipManager._FONT_COLOR="#383a47",t.HtmlTooltipManager._VIEWPORT_BUFFER=15,t.HtmlTooltipManager.prototype.Init=function(e,i){this._context=e,this._domElementId=i||t.HtmlTooltipManager._TOOLTIP_DIV_ID,this._isTooltip=!0},t.HtmlTooltipManager.prototype.showDatatip=function(t,e,i,n,o){null==o&&(o=!0),this._isTooltip=!1,this._showTextAtPosition(t,e,i,n,o,"oj-dvt-datatip")},t.HtmlTooltipManager.prototype._showTextAtPosition=function(e,i,n,o,r,s){var a,l=this.getTooltipElem(),h=!0!==n;if(h)for(;l.hasChildNodes();)l.removeChild(l.firstChild);"string"==typeof n?(n=(n=n.replace(/(<|&#60;)/g,"&lt;")).replace(/(>|&#62;)/g,"&gt;"),n=t.HtmlTooltipManager._restoreTag(n,"b"),n=t.HtmlTooltipManager._restoreTag(n,"i"),n=t.HtmlTooltipManager._restoreTag(n,"table"),n=t.HtmlTooltipManager._restoreTag(n,"tr"),n=(n=(n=(n=t.HtmlTooltipManager._restoreTag(n,"td")).replace(/\n/g,"<br>")).replace(/\\n/g,"<br>")).replace(/&#92;n/g,"<br>"),n=t.HtmlTooltipManager._restoreTag(n,"br"),(a=document.createElement("span")).style.visibility="inherit",a.style.width=null,a.style.height=null,a.innerHTML=n):h&&(a=n),this._isCustomClassName||(l.className=s),this._isCustomClassName=!1,o||(o=t.HtmlTooltipManager._BORDER_COLOR),this._isCustomBorderColor||(this._isTooltip?l.style.borderColor=o:l.style.outlineColor=o),this._isCustomBorderColor=!1,l.style.position="absolute",l.style.zIndex=2147483647,null!=a&&(Array.isArray(a)?a.forEach(function(t){l.appendChild(t)}):l.appendChild(a)),this.PostElement(l,e,i,!0,r)},t.HtmlTooltipManager.prototype.PostElement=function(t,e,i,n,o){if(t.style["pointer-events"]=n?"none":"auto",t.style.width=null,t.style.height=null,t.style.left="0px",t.style.top="0px",o){var r=this._getOffsets(t);this.positionTip(e+r.x,i+r.y,e,i)}else this.positionTip(e,i,e,i);t.style.visibility="visible";var s=this._context.getTooltipAttachedCallback();s&&s(t)},t.HtmlTooltipManager.prototype.hideTooltip=function(){this.clearTooltip(),this._tooltipDisplayed=!1,this._timerIsRunning=!1;var e=document.getElementById(this._domElementId);e&&(e.style.visibility="hidden",e.style.overflow=null,e.style.width="0px",e.style.height="0px",t.Agent.isRightToLeft(this._context)?e.style.left=e.style.right:e.style.left="0px",e.style.top="0px","undefined"!=typeof $&&this._bCleanupChildren&&$(e).children().remove())},t.HtmlTooltipManager.prototype.getTooltipElem=function(){var t=document.getElementById(this._domElementId);return t||(t=this.InitializeTooltipElem()),t},t.HtmlTooltipManager.prototype.InitializeTooltipElem=function(){var t=document.createElement("div");return t.id=this._domElementId,t.style.visibility="hidden",document.body.appendChild(t),this.InitContent(t),t},t.HtmlTooltipManager.prototype.InitContent=function(t){},t.HtmlTooltipManager.prototype.showTooltip=function(e,i,n,o,r,s){if(n&&0!=n.length&&(this._x=e,this._y=i,this._text=n,this._trackMouse=r,!this._timerIsRunning)){var a=document.createElement("span");a.className="OraDVTTooltipText",a.innerHTML=n,a.style.color=t.HtmlTooltipManager._FONT_COLOR,s||(s=t.HtmlTooltipManager._BORDER_COLOR),this.getTooltipElem().style.borderColor=s,t.Agent.isTouchDevice()||this._tooltipDisplayed&&this._trackMouse?this._displayTooltip(this._x,this._y,this._text,this._borderColor):(this._timerIsRunning=!0,this._showTimerId=window.setTimeout(this._handleShowTimer.bind(this),t.HtmlTooltipManager._SHOW_DELAY))}},t.HtmlTooltipManager.prototype.clearTooltip=function(){this._showTimerId&&(window.clearTimeout(this._showTimerId),this._showTimerId=void 0,this._x=void 0,this._y=void 0,this._text=void 0,this._trackMouse=void 0),this._hideTimerId&&(window.clearTimeout(this._hideTimerId),this._hideTimerId=void 0)},t.HtmlTooltipManager.prototype._handleShowTimer=function(t){this._timerIsRunning=!1,this._displayTooltip(this._x,this._y,this._text,this._borderColor),this._tooltipDisplayed=!0},t.HtmlTooltipManager.prototype._displayTooltip=function(t,e,i,n){this._isTooltip=!0,this._showTextAtPosition(t,e,i,n,!0,"oj-dvt-tooltip")},t.HtmlTooltipManager.prototype._getOffsets=function(e){var i=this.getTooltipBounds(e);if(t.Agent.isTouchDevice())return new t.Point(0-i.w/2,-30-i.h);var n=-8-i.h,o=8;return this._isTooltip&&(n=22,o=0),t.Agent.isRightToLeft(this._context)&&(o=-o-i.w),new t.Point(o,n)},t.HtmlTooltipManager.prototype.getTooltipBounds=function(){var e=this.getTooltipElem();return e.style.height="auto",new t.Rectangle(parseInt(e.style.left),parseInt(e.style.top),e.offsetWidth,e.offsetHeight)},t.HtmlTooltipManager.prototype.positionTip=function(e,i){var n=this.getTooltipElem(),o=this.getTooltipBounds(),r=o.w,s=o.h,a=new t.Rectangle(window.pageXOffset+t.HtmlTooltipManager._VIEWPORT_BUFFER,window.pageYOffset+t.HtmlTooltipManager._VIEWPORT_BUFFER,window.innerWidth-2*t.HtmlTooltipManager._VIEWPORT_BUFFER,window.innerHeight-2*t.HtmlTooltipManager._VIEWPORT_BUFFER);r>a.w-2*t.HtmlTooltipManager._VIEWPORT_BUFFER&&(r=a.w-2*t.HtmlTooltipManager._VIEWPORT_BUFFER,n.style.width=r+"px");var l=e;l=Math.max(l,a.x),l=Math.min(l,a.x+a.w-r),Math.abs(a.x)>t.HtmlTooltipManager._VIEWPORT_BUFFER&&(n.style.width=Math.min(n.clientWidth,a.x+a.w-l)+"px",i+=s-n.offsetHeight,s=n.offsetHeight,n.style.overflow="hidden");var h=i;h=Math.min(h,a.y+a.h-s),h=Math.max(h,a.y),n.style.left=l+"px",n.style.top=h+"px"},t.HtmlTooltipManager.prototype.getCustomTooltip=function(t,e){for(var i=this.getTooltipElem();i.hasChildNodes();)i.removeChild(i.firstChild);e.parentElement=i,i.className="",i.style.borderColor="";var n=t(e=this._context.fixRendererContext(e));return i.className&&(this._isCustomClassName=!0),i.style.borderColor&&(this._isCustomBorderColor=!0),this._bCleanupChildren=null!=e._templateCleanup,!(n||!i.hasChildNodes())||n},t.HtmlTooltipManager._restoreTag=function(t,e){var i=new RegExp("&lt;(/?)"+e+"([^&]*)(/?)&gt;","g");return t.replace(i,"<$1"+e+"$2$3>")},t.HtmlTooltipManager.createElement=function(t,e,i,n){var o=document.createElement(t);if(e&&e.applyStylesToElement(o),n&&o.classList.add.apply(o.classList,n),null!=i)if(Array.isArray(i))for(var r=0;r<i.length;r++)o.appendChild(i[r]);else o.appendChild(document.createTextNode(i));return o},t.HtmlKeyboardListenerUtils=function(){},t.Obj.createSubclass(t.HtmlKeyboardListenerUtils,t.Obj),t.HtmlKeyboardListenerUtils.getListener=function(e){return e?t.HtmlKeyboardListenerUtils._captureListener:t.HtmlKeyboardListenerUtils._bubbleListener},t.HtmlKeyboardListenerUtils._bubbleListener=function(e){t.HtmlKeyboardListenerUtils._commonListener.call(this,e,!1)},t.HtmlKeyboardListenerUtils._captureListener=function(e){t.HtmlKeyboardListenerUtils._commonListener.call(this,e,!0)},t.HtmlKeyboardListenerUtils._commonListener=function(e,i){var n;if(this._currentObj){if("focus"==e.type)return void(this._focusEvent=e);var o=this._currentObj.getCtx();this._focusEvent&&(o.resetCurrentKeyboardFocus(e),n=t.DomEventFactory.newEvent(this._focusEvent,o),this._currentObj.FireListener(n,i),this._focusEvent=null),n=t.DomEventFactory.newEvent(e,o),this._currentObj.FireListener(n,i)}else if(Array.isArray(this._keyboardListeners))for(var r,s=this._keyboardListeners.length,a=0;a<s;a++)r=this._keyboardListeners[a],n=t.DomEventFactory.newEvent(e,r.getCtx()),r.FireListener(n,i)};var E=function(t,e){this.Init(t,e)};return t.Obj.createSubclass(E,t.HtmlTooltipManager),E.prototype.Init=function(t,e){this._storedContexts=new Object,E.superclass.Init.call(this,t,e)},E.prototype.InitContent=function(e){e.innerHTML="";var i=new t.Context(e,"DvtCustomTooltip");i.setJetProperties(this._context.getJetProperties()),this._storedContexts[this._domElementId]=i},E.prototype.GetStoredContext=function(){return this._storedContexts[this._domElementId]},E.prototype.showRichElement=function(t,e,i,n){this.showRichElementAtPosition(t,e,i,n,!1)},E.prototype.showRichElementAtPosition=function(e,i,n,o,r){var s=this.getTooltipElem();s.style.position="absolute",s.style.zIndex=2147483647;var a=this.GetStoredContext();if(a){var l=a.getStage();l.removeChildren();var h=n.getRootDisplayable();l.addChild(h),n&&n.Render&&n.Render();var u=l.getSVGRoot();t.ToolkitUtils.setAttrNullNS(u,"width",n.getDisplayWidth()),t.ToolkitUtils.setAttrNullNS(u,"height",n.getDisplayHeight()),this.PostElement(s,e,i,r,o)}},E.prototype.hideTooltip=function(){E.superclass.hideTooltip.call(this);var t=this.GetStoredContext();t&&t.getStage().removeChildren()},t}();
  return dvt;
});

/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdvt-base',["ojs/ojcore","jquery","ojs/ojcontext","ojs/ojconfig","ojs/ojcomponentcore","ojs/ojattributegrouphandler","ojs/ojlocaledata","ojs/internal-deps/dvt/DvtToolkit","ojs/ojkeysetimpl","ojs/ojmap","ojs/ojlogger","ojdnd"],function(e,t,n,r,i,s,o,a,l,h,d){"use strict";e.AttributeGroupHandler=s.AttributeGroupHandler,e.ColorAttributeGroupHandler=s.ColorAttributeGroupHandler,e.ShapeAttributeGroupHandler=s.ShapeAttributeGroupHandler;var u=function(e,t){this._component=e,this._configMap=t,this._init()};e.Object.createSubclass(u,e.Object,"DataProviderHandler"),u.prototype._init=function(){this._dataProviderEventListeners={},this._keyDataMap={},this._fetchedData={},this._eventListeners=[]},u.prototype._fetchCollection=function(e,t,n,r,i,s){var o=this,a={data:[],keys:[]};if(s<=-1)return Promise.resolve(a);this._clientId=this._clientId||Symbol();var l={clientId:this._clientId,size:-1},h=e.fetchFirst(l)[Symbol.asyncIterator](),d=this.isTreeDataProvider(e),u=function(e){for(var s=[],l=0;l<e.value.data.length;l++){var c=t({data:e.value.data[l],key:e.value.metadata[l].key},i);s.push(c)}return Promise.all(s).then(function(e){for(var t=0;t<e.length;t++){var s=e[t].data,l=e[t].key;a.data.push(s),a.keys.push(l),o._keyDataMap[n].set(d?l.value:l,{data:s,key:l,parentKey:r,depth:i})}}).then(function(){return e.done?Promise.resolve(a):h.next().then(u)})};return h.next().then(u)},u.prototype._getDPPostProcessor=function(e,t,n,r){var i=this,s=this.isTreeDataProvider(e);r=null==r?Number.MAX_VALUE:r;var o=function(s,a){var l={value:s.data},h={value:s.key};if(a<r&&n&&n.has(h.value)){var d=e.getChildDataProvider(h.value);if(d)return i._fetchCollection(d,o,t,h.value,a+1).then(function(e){return l.children=e.data,h.children=e.keys,{data:l,key:h}})}return Promise.resolve({data:l,key:h})};return s?o:function(e){return Promise.resolve(e)}},u.prototype.fetchAllData=function(e,t,n){if(n&&this._fetchedData[t])return Promise.resolve(this._fetchedData[t]);var r=this._configMap[t];return this.clear(t,!0),this._fetchCollection(e,this._getDPPostProcessor(e,t,r.expandedKeySet,r.maxFetchDepth),t,null,0,r.maxFetchDepth).then(function(r){return n&&(this._fetchedData[t]=r,this._addDPEventListeners(e,t)),r}.bind(this))},u.prototype._getDataProviderEventHandler=function(e){var t=this,n=function(e,t,n){if(!t)return[];var r=new l(t),i=new Map,s=function(e){for(var t=0;t<e.length;t++){var o=n?e[t].value:e[t],a=r.get(o);a!==r.NOT_A_KEY&&i.set(a,t),n&&e[t].children&&s(e[t].children)}};s(e.keys);var o=[];return t.forEach(function(e){o.push(i.get(e))}),o},r=function(n){Promise.all([n]).then(function(n){t._fireEvent("clearState",{dataProperty:e}),t._fetchedData[e]=n[0],t._fireEvent("dataUpdated",{data:n[0]})})};return function(i){t._fireEvent("notReady",{event:i});var s=this,o=t.isTreeDataProvider(s),a=t._keyDataMap[e];if("refresh"===i.type)r(t.fetchAllData(s,e));else if("mutate"===i.type){var l,h=i.detail.update,d=i.detail.remove,u=i.detail.add,c=t._fetchedData[e],_=function(n,r,i,l){var h=0,d=[],u=1===i&&!l;return r.keys.forEach(function(n){var i,c=l?null:r.data[h];if(o)if(u){var _=a.get(n);_&&(_.data.value=c,i=Promise.resolve({data:_.data,key:a.get(n).key}))}else{var p={value:c},f={value:n},m=s.getChildDataProvider(n);if(m&&!l)i=t.fetchAllData(m,e).then(function(e){return p.children=e.data,f.children=e.keys,{data:p,key:f}});else i=Promise.resolve({data:p,key:f});if(!l){var v=r.parentKeys?r.parentKeys[h]:null;a.set(f.value,{data:p,key:f,parentKey:v})}}else i=Promise.resolve({data:c,key:n}),a.set(n,{data:c,key:n});d.push(i),h+=1}),Promise.all(d).then(function(e){for(var t=0;t<e.length;t++){var r,s,h,d=o?e[t].key.value:e[t].key,_=a.get(d).parentKey;if(_){var p=a.get(_);p.data.children||u||(p.data.children=[],p.key.children=[]),r=p.data.children,s=p.key.children}else r=c.data,s=c.keys;if(l)h=n[t]-t,r.splice(h,i),s.splice(h,i);else{if(u)h=n[t];else h=0===n.length||null==n[t]?r.length:n[t];r.splice(h,i,e[t].data),s.splice(h,i,e[t].key)}}return c})},p=function(e){return s.fetchByKeys({keys:e}).then(function(t){var n=[];return t.results.size>0&&e.forEach(function(e){n.push(t.results.get(e).data)}),n})},f=Promise.resolve();h&&(l=h.indexes||n(c,h.keys,o),f=Array.isArray(h.data)?_(l,h,1):p(h.keys).then(function(e){var t=Object.create(h,{data:{value:e}});return _(l,t,1)})),f.then(function(){return d?(l=d.indexes||n(c,d.keys,o),_(l,d,1,!0)):Promise.resolve()}).then(function(){return u?(l=u.indexes||n(c,u.addBeforeKeys?u.addBeforeKeys:u.afterKeys,o),Array.isArray(u.data)?_(l,u,0):p(u.keys).then(function(e){var t=Object.create(u,{data:{value:e}});return _(l,t,0)})):Promise.resolve()}).then(function(){r(Promise.resolve(c))})}}},u.prototype._addDPEventListeners=function(e,t){if(!this._dataProviderEventListeners[t]){var n=this._getDataProviderEventHandler(t);e.addEventListener("mutate",n),e.addEventListener("refresh",n),this._dataProviderEventListeners[t]={dataProvider:e,listener:n}}},u.prototype.release=function(e){var t=function(e){var t=this._dataProviderEventListeners[e];if(t){var n=t.dataProvider,r=t.listener;n.removeEventListener("mutate",r),n.removeEventListener("refresh",r),this._dataProviderEventListeners[e]=null}}.bind(this);if(e)t(e),this.clear(e);else{for(var n=Object.keys(this._dataProviderEventListeners),r=0;r<n.length;r++)t(n[r]);this.clear()}},u.prototype.fetchChildrenData=function(e,t,n,r){var i=function(t,n,r){this._keyDataMap[e].get(t).data.children=n,this._keyDataMap[e].get(t).key.children=r}.bind(this),s=t.getChildDataProvider(n);if(s){var o=this._configMap[e].maxFetchDepth,a=this._keyDataMap[e].get(n).depth,l=this._getDPPostProcessor(t,e,r,o);return this._fetchCollection(s,l,e,n,a,o).then(function(e){return i(n,e.data,e.keys),e})}return Promise.resolve({data:[],keys:[]})},u.prototype.clear=function(e,t){e&&t?(this._keyDataMap[e]=this._keyDataMap[e]||new h,this._fireEvent("reset",{dataProperty:e})):e?this._fetchedData[e]=null:(this._fetchedData={},this._keyDataMap={})},u.prototype.isDataProvider=function(t){return e.DataProviderFeatureChecker.isDataProvider(t)},u.prototype.isTreeDataProvider=function(t){return e.DataProviderFeatureChecker.isTreeDataProvider(t)},u.prototype.addEventListener=function(e){this._eventListeners.push(e)},u.prototype._fireEvent=function(e,t){for(var n=0;n<this._eventListeners.length;n++)this._eventListeners[n]({type:e,detail:t})};var c={_SHAPE_REGEXP:/\d/,_SHAPE_ENUMS:{circle:!0,ellipse:!0,square:!0,rectangle:!0,diamond:!0,triangleUp:!0,triangleDown:!0,plus:!0,human:!0,star:!0},shapeParseFunction:function(e,t){var n=t||c._SHAPE_ENUMS;return function(t,r,i,s){if(e[r]){if(c._SHAPE_REGEXP.test(t))return t;if(n[t])return t;throw new Error("Found: '"+t+"'. Expected one of the following: "+Object.keys(n).toString())}return s(t)}}},_=function(e,t){this._path=t,this._root=e,this._delimiter="/"};_.prototype._resolveLeafObjectAndProperty=function(e,t,n,r){for(var i={};e&&t.indexOf(n)>-1;){var s=t.substring(0,t.indexOf(n));r&&void 0===e[s]&&(e[s]={}),e=e[s],t=t.substring(t.indexOf(n)+1,t.length)}return e&&(i.object=e,i.parameter=t),i},_.prototype._resolvePath=function(e){if(void 0===this._leaf){var t=this._resolveLeafObjectAndProperty(this._root,this._path,this._delimiter,e);this._leaf=t.object,this._param=t.parameter}},_.prototype.getValue=function(){return this._resolvePath(!1),void 0===this._leaf?void 0:this._leaf[this._param]},_.prototype.setValue=function(e,t){this._resolvePath(!0),!t&&this._leaf[this._param]||(this._leaf[this._param]=e)};var p={TEXT:function(e){var t={};return e&&(e.hasClass("oj-gauge-metric-label")?(t["font-size"]=!0,t.color=!0):e.hasClass("oj-treemap-node-header")&&(t["font-weight"]=!0)),p._buildTextCssPropertiesObject(e,t)},BACKGROUND:function(e,t,n,r){return p._buildCssBackgroundPropertiesObject(e)},ANIM_DUR:function(e){var t=e.css("animation-duration");if(t)return"ms"===t.slice(-2)?t=parseInt(t.slice(0,-2),10):"s"===t.slice(-1)&&(t=1e3*parseFloat(t.slice(0,-1))),t},_INHERITED_FONT_COLOR:"rgb(254, 0, 254)",_INHERITED_FONT_FAMILY:"Times",_INHERITED_FONT_SIZE:"1px",_INHERITED_FONT_WEIGHT:"1",_INHERITED_FONT_STYLE:"normal",_FONT_SIZE_BUFFER:4,_styleCache:{},defaultStyleProcessor:function(e,t){return e.css(t)},_buildCssBackgroundPropertiesObject:function(e){var t={};return e.css("border-top-color")&&(t.borderColor=e.css("border-top-color")),e.css("border-width")&&e.css("border-style")&&"none"!==e.css("border-style")&&(t.borderWidth=e.css("border-width")),e.css("background-color")&&(t.backgroundColor=e.css("background-color")),t},_buildTextCssPropertiesObject:function(e,t){var n={},r=e.css("font-family");return r&&r!==p._INHERITED_FONT_FAMILY&&(n.fontFamily=r.replace(/"/g,"'")),!(r=e.css("font-size"))||r.indexOf("px")>-1&&parseFloat(r)<p._FONT_SIZE_BUFFER||t["font-size"]||(n.fontSize=r),(r=e.css("font-weight"))&&r!==p._INHERITED_FONT_WEIGHT&&!t["font-weight"]&&(n.fontWeight=r),(r=e.css("color"))&&r!==p._INHERITED_FONT_COLOR&&!t.color&&(n.color=r),(r=e.css("font-style"))&&r!==p._INHERITED_FONT_STYLE&&(n.fontStyle=r),n},processStyles:function(e,n,r,i){var o,a=null,l=null,h=e.data("no-style-cache"),d="";for(o=0;o<r.length;o++)d=d+r[o]+" ";var u,c={},_={},f=Object.keys(i);for(o=0;o<f.length;o++){var m=i[u=f[o]];m instanceof Array||(m=[m]);var v=p._hasUncachedProperty(u,m)||h;l||a||!v||((a=t(document.createElement("div"))).css("display","none"),e.append(a),a.attr("class",d),t(document.body).append(a),(l=t(document.createElement("div"))).css("font-size",p._INHERITED_FONT_SIZE),l.css("color",p._INHERITED_FONT_COLOR),l.css("font-weight",p._INHERITED_FONT_WEIGHT),l.css("font-style",p._INHERITED_FONT_STYLE),a.append(l)),c[u]=m,v&&(_[u]=p._createStyleDivs(l,u,m))}var y=s.ColorAttributeGroupHandler.__createAttrDiv();for(o=0;o<f.length;o++)u=f[o],p._processStyle(_[u],n,u,c[u],h);y&&(s.ColorAttributeGroupHandler.__processAttrDiv(y),y.remove()),a&&a.remove()},_createStyleDivs:function(e,n,r){p._styleCache[n]||(p._styleCache[n]={});for(var i=null,s=0;s<r.length;s++){var o=r[s].property;if(o)void 0===p._styleCache[n][o]&&(i||((i=t(document.createElement("div"))).addClass(n),e.append(i)))}return i},_processStyle:function(e,t,n,r,i){for(var s=0;s<r.length;s++){var o=r[s],a=o.property;if(a){var l=p._styleCache[n][a];if(void 0===l&&e&&(l=p._resolveStyle(e,a),i||(p._styleCache[n][a]=l)),null!=l){var h=new _(t,o.path),d=h.getValue(),u="object"==typeof d;if(u&&d)for(var c=Object.keys(l),f=0;f<c.length;f++){var m=c[f];void 0===d[m]&&(d[m]=l[m])}else h.setValue(l,u)}}}},_resolveStyle:function(e,t){var n=p[t],r=n?n(e):p.defaultStyleProcessor(e,t);return null==r||"string"==typeof r&&""===r.replace(/^\s+/g,"")?null:r},_hasUncachedProperty:function(e,t){var n=p._styleCache[e];if(!n)return!0;for(var r=0;r<t.length;r++){var i=t[r].property;if(i)if(void 0===n[i])return!0}return!1}},f=function(e,t){this._component=e,this._configMap=t,this._init()};return e.Object.createSubclass(f,e.Object,"TemplateHandler"),f.prototype._init=function(){this._templateEnginePromise=null,this._templates=this.getTemplates(),this._templateResults={},this._templateNodeData={},this._componentResults={},this._eventListeners=[],this._queueNextEvent=!0,this._eventUpdates=[],this._templatePropertyMap={},this._propertyValidatorMap={}},f.prototype.getTemplateEngine=function(){return this._templateEnginePromise?this._templateEnginePromise:(this._templateEnginePromise=new Promise(function(e){r.__getTemplateEngine().then(function(t){e(t)},function(e){throw new Error("Error loading template engine: "+e)})}),this._templateEnginePromise)},f.prototype.getDataSet=function(e){var t=this.getTemplate(e);return t&&t.dataset},f.prototype.getTemplate=function(e){return this._templates[e]&&this._templates[e][0]},f.prototype.getDataSetBoolean=function(t,n){var r=this.getDataSet(t),i=e.__AttributeUtils.attributeToPropertyName(n),s=r&&r[i];return null!=s&&e.__AttributeUtils.coerceBooleanValue(this.getTemplate(t),n,s,"Boolean")},f.prototype.getTemplates=function(){return e.BaseCustomElementBridge.getSlotMap(this._component.element[0])},f.prototype._getPropertyValidator=function(t,n){if(!t)return null;var r=this._propertyValidatorMap[n];if(r)return r;var i=e.CustomElementBridge.getMetadata(n),s=t.content?t.content.children[0]:t.childNodes[1],o={};return r=function(t,n){var r=t.join("."),a=o[r];if(!a){a=i;for(var l=0;l<t.length;l++)a=a.properties[t[l]];o[r]=a}e.BaseCustomElementBridge.checkEnumValues(s,r,n,a),null!=n&&e.BaseCustomElementBridge.checkType(s,r,n,a)},this._propertyValidatorMap[n]=r,r},f.prototype._processAliasedPropertyNames=function(e,t,n){var r=this._configMap[e].getAliasedPropertyNames;if(r)for(var i=r(t),s=Object.keys(i),o=0;o<s.length;o++){var a=s[o];n[i[a]]=n[a],n[a]=void 0}return n},f.prototype._getTemplateElementProperties=function(e){var t=this._templatePropertyMap[e];return t||(t=this._component.getElementPropertyNames(e),this._templatePropertyMap[e]=t),t},f.prototype.processNodeTemplate=function(t,n,r,i,s,o){var a=this._configMap[t],l=r.getAttribute("slot"),d=this._component.options.as,u=this._component.element[0],c=this._getTemplateElementProperties(i),_="string"==typeof a.templateName?function(){return a.templateName}:a.templateName,p=this._getPropertyValidator(r,i),f=l===_()?t:l,m=function(r){return function(s){var a=this._processAliasedPropertyNames(t,i,s),h=this._templateNodeData[f];e.CollectionUtils.copyInto(h.get(r).data,a),this._eventUpdates.push({key:o,data:a}),this._queueNextEvent&&(this._fireEvent("notReady"),n.getThrottlePromise().then(function(){this._fireEvent("dataUpdated",{dataProperty:t,templateName:l,data:this._eventUpdates.slice(0)}),this._queueNextEvent=!0,this._eventUpdates=[]}.bind(this))),this._queueNextEvent=!1}.bind(this)}.bind(this),v=n.resolveProperties(u,r,i,c,s,d,p);v.subscribe(m(o));var y={data:this._processAliasedPropertyNames(t,i,v.peek()),node:v,context:s};return this._templateNodeData[f]||(this._templateNodeData[f]=new h),this._templateNodeData[f].set(o,y),y.data},f.prototype.processTemplates=function(e,t,n,r,i,s,o){if(s&&this._templateResults[e])return this._templateResults[e];var a,l,h=this._configMap[e],u=this;if(h){a=[],l=[];var c="string"==typeof h.templateName?function(){return h.templateName}:h.templateName,_="string"==typeof h.templateElementName?function(){return h.templateElementName}:h.templateElementName,p=h.resultPath,f=this._component.element[0],m=h.processChildrenData,v=h.processOptionData||function(e){return e},y=u._templateNodeData[e];if(c&&_&&p){var g,C=function(t,r,i,s,o){var a;try{s?a=u.processNodeTemplate(e,n,s,o,i,r):((a=Object.create(t))._noTemplate=!0,a._dvtNoClone=!0,y.set(r,{data:a,context:i})),a.id=r,a._itemData=t}catch(e){d.error(e)}return a},D=function(e,t,n){for(var i=e.data,s=e.keys,o=[],a=0;a<i.length;a++){var l=r?i[a].value:i[a],h=r?s[a].value:s[a],d={data:l,key:h,index:a,componentElement:f};r&&(d.parentData=t,d.parentKey=n);var v=c(i[a]),y=_(i[a]),g=u.getTemplate(v),P=C(l,h,d,g,y);if(r&&i[a].children){var E=t.slice(0);E.push(l);var b={data:i[a].children,keys:s[a].children},T=D(b,E,h);m?m(P,i[a],T):P[p]=T}o.push(P)}return o};a.push(p),i&&y.has(i)&&(g=y.get(i).context.parentData.concat(y.get(i).context.data));var P=D(t,g||[],i);l.push(v(P))}o&&(y.get(i).data[p]=l[0])}var E={paths:a,values:l};return s&&(this._templateResults[e]=E),E},f.prototype.release=function(e){var t;if(e){var n=this._configMap[e].derivedTemplates;t=n?[e].concat(n):[e]}else t=Object.keys(this._templateNodeData);for(var r=0;r<t.length;r++){var i=this._templateNodeData[t[r]];i&&(i.forEach(function(e){e.node&&e.node.dispose()}),this._templateNodeData[t[r]]=new h)}this.clear(e)},f.prototype.clear=function(e,t){if(e)for(var n,r=this._configMap[e].derivedTemplates,i=r?[e].concat(r):[e],s=0;s<i.length;s++)n=i[s],t?this._templateNodeData[n]=this._templateNodeData[n]||new h:(this._templateResults[n]=null,this._componentResults[n]=null);else this._templateResults={},this._componentResults={},this._templateNodeData={}},f.prototype.getComponentResults=function(e){return this._componentResults[e]},f.prototype.setComponentResults=function(e,t){this._componentResults[e]=t},f.prototype.addEventListener=function(e){this._eventListeners.push(e)},f.prototype._fireEvent=function(e,t){for(var n=0;n<this._eventListeners.length;n++)this._eventListeners[n]({type:e,detail:t})},e.__registerWidget("oj.dvtBaseComponent",t.oj.baseComponent,{options:{trackResize:"on"},_ComponentCreate:function(){this._super(),this._renderCount=0,this._numDeferredObjs=0,this._optionsCopy=null,this._dataValuePromise={},this._templateMap={},this._TemplateHandler=new f(this,this._GetSimpleDataProviderConfigs()),this._DataProviderHandler=new u(this,this._GetSimpleDataProviderConfigs()),this._DataProviderHandler.addEventListener(this._GetDPEventHandler()),this._TemplateHandler.addEventListener(this._GetDPEventHandler());for(var n=this._GetComponentStyleClasses(),r=0;r<n.length;r++)this.element.addClass(n[r]);this._referenceDiv=t(document.createElement("div")),this._referenceDiv.css("visibility","hidden"),this.element.append(this._referenceDiv),a.Agent.setAgentInfo(e.AgentUtils.getAgentInfo());var s=this.element[0].parentElement;s&&s._dvtcontext?this._context=s._dvtcontext:this._context=new a.Context(this.element[0],null,this._referenceDiv[0]);var d=Object.keys(this._GetSimpleDataProviderConfigs()),c={oj:e,KeySetImpl:l,ojMap:h,LocaleData:o,dataProviderProps:d};if(this._context.setJetProperties(c),this._context.setReadingDirection(this._GetReadingDirection()),this._context.setTooltipAttachedCallback(i.subtreeAttached),this._context.setOverlayAttachedCallback(i.subtreeAttached),this._context.setFixContextCallback(this._FixRendererContext.bind(this)),this._context.setCustomElement(this._IsCustomElement()),t(document.body).hasClass("oj-hicontrast")&&a.Agent.setHighContrast(!0),this._component=this._CreateDvtComponent(this._context,this._HandleEvent,this),a.Agent.isEnvironmentTest()){var _=this.element[0].getAttribute("data-oj-dvt-test-id");_&&_.length>0&&this._component.setId(_)}this._context.getStage().addChild(this._component),this._LoadResources(),this.options._environment="jet",this.options._widgetConstructor=i.__GetWidgetConstructor(this.element)},_AfterCreate:function(){this._super(),"off"!==this.options.trackResize&&this._addResizeListener(),this._ProcessOptions(),this._Render()},_SetLocaleHelpers:function(e,t){if(!1!==a.requireJS){var n={createNumberConverter:function(t){return new e.IntlNumberConverter(t)},isoToDateConverter:function(e){if("string"==typeof e){var n=t.IntlConverterUtils.isoToDate(e),r=n.toJSON()?t.IntlConverterUtils.dateToLocalIso(n):e;return t.IntlConverterUtils.isoToLocalDate(r)}return e},dateToIsoWithTimeZoneConverter:function(e){if(e instanceof Date){var n=-1*e.getTimezoneOffset(),r=n>=0?"+":"-",i=Math.floor(Math.abs(n)/60),s=Math.abs(n)%60,o=r+(2!==i.toString().length?"0"+i:i)+":"+(2!==s.toString().length?s+"0":s);return t.IntlConverterUtils.dateToLocalIso(e)+o}return e}};this._context.setLocaleHelpers(n)}},refresh:function(){this._super(),this._context.setReadingDirection(this._GetReadingDirection()),this._Render()},getNodeBySubId:function(e){var t=this._component&&this._component.getAutomation?this._component.getAutomation():null;if(t){var n=this._ConvertLocatorToSubId(e);return t.getDomElementForSubId(n)}return null},getSubIdByNode:function(e){var t=this._component&&this._component.getAutomation?this._component.getAutomation():null;if(t){var n=t.getSubIdForDomElement(e);return n?this._ConvertSubIdToLocator(n):null}return null},_ConvertLocatorToSubId:function(e){return null},_ConvertSubIdToLocator:function(e){return null},_ProcessStyles:function(){p.processStyles(this.element,this.options,this._GetComponentStyleClasses(),this._GetChildStyleClasses())},_GetComponentStyleClasses:function(){return["oj-dvtbase"]},_GetChildStyleClasses:function(){var e={"oj-dvt-no-data-message":{path:"_statusMessageStyle",property:"TEXT"}};return e},_GetEventTypes:function(){return[]},_VerifyConnectedForSetup:function(){return!0},_ReleaseResources:function(){this._super(),this._renderNeeded=!0,this._DataProviderHandler.release(),this._TemplateHandler.release(),this._dataValuePromise={}},_destroy:function(){this._context.hideTooltips(),this._context.destroy(),this._context=null;var e=this.element[0].parentElement;e&&e._dvtcontext&&(e._dvtcontext=null),this._component.destroy&&this._component.destroy(),this._component=null,this._removeResizeListener(),this._CleanAllTemplates(),this.element.children().remove(),this.element.removeAttr("role").removeAttr("tabIndex").removeAttr("aria-activedescendant");for(var t=this._GetComponentStyleClasses(),n=0;n<t.length;n++)this.element.removeClass(t[n]);this._MakeReady(),this._TemplateHandler.release(),this._DataProviderHandler.release(),this._dataValuePromise={},this._super()},_setOptions:function(e,n){this._superApply(arguments),this._OptionChangeHandler(e);var r=this.options.trackResize;if("off"===r&&this._resizeListener?this._removeResizeListener():"off"===r||this._resizeListener||this._addResizeListener(),this._ProcessOptions(),!this._bUserDrivenChange){var i=!1,s=this._GetEventTypes(),o=["highlightedCategories","selection","dataCursorPosition","scrollPosition"];t.each(e,function(e){if(s.indexOf(e)<0&&o.indexOf(e)<0)return i=!0,!1}),i?this._Render():(void 0!==e.highlightedCategories&&this._component.highlight(e.highlightedCategories),void 0!==e.selection&&this._component.select(e.selection),void 0!==e.dataCursorPosition&&this._component.positionDataCursor&&this._component.positionDataCursor(e.dataCursorPosition),void 0!==e.scrollPosition&&this._component.scroll(e.scrollPosition))}},_CreateDvtComponent:function(e,t,n){return null},_HandleEvent:function(e){var n=e.type;"selection"===n?this._UserOptionChange("selection",e.selection):"categoryHide"===n||"categoryShow"===n?this._UserOptionChange("hiddenCategories",e.hiddenCategories):"categoryHighlight"===n?this._UserOptionChange("highlightedCategories",e.categories):"optionChange"===n?this._UserOptionChange(e.key,e.value,e.optionMetadata):"touchHoldRelease"===n&&this._GetContextMenu()?this._OpenContextMenu(t.Event(e.nativeEvent),"touch"):"dvtRender"===n?this._Render():"ready"===n&&0===this._numDeferredObjs&&this._MakeReady()},_addResizeListener:function(){this._resizeListener||(this._resizeListener=this._handleResize.bind(this),e.DomUtils.addResizeListener(this.element[0],this._resizeListener,250))},_removeResizeListener:function(){this._resizeListener&&(e.DomUtils.removeResizeListener(this.element[0],this._resizeListener),this._resizeListener=null)},_handleResize:function(e,t){var n=this.element.width(),r=this.element.height();(null==this._width||null==this._height||Math.abs(n-this._width)+Math.abs(r-this._height)>=5)&&this._Render(!0)},_LoadResources:function(){},_Render:function(e){this._context.hideTooltips(),this._NotReady(),!this._context.isReadyToRender()||this._renderNeeded&&e?(this._renderNeeded=!0,this._MakeReady()):(this._width=this._IsFlowingLayoutSupported()?null:this.element.width(),this._height=this._IsFlowingLayoutSupported()?null:this.element.height(),this._context.setDefaultFontFamily(this._referenceDiv.css("font-family")),this.options._width=this._width,this.options._height=this._height,this.options._locale=r.getLocale(),this._IsDraggable()&&this.element.attr("draggable",!0),this._ProcessStyles(),e?0===this._numDeferredObjs&&(this._renderCount+=1,this._RenderComponent(this._optionsCopy,e)):(this._renderCount+=1,this._resolveDeferredDataItems()&&this._RenderComponent(this._optionsCopy)),this._renderNeeded=!1)},_IsDraggable:function(){return!!this.options.dnd},_NotifyShown:function(){this._super(),this._notifyShownAttached()},_NotifyAttached:function(){this._super(),this._notifyShownAttached()},_NotifyDetached:function(){this._super(),this._notifyHiddenDetached()},_NotifyHidden:function(){this._super(),this._notifyHiddenDetached()},_notifyShownAttached:function(){this._renderNeeded&&this._Render()},_notifyHiddenDetached:function(){this._context.hideTooltips(),this._MakeReady()},_UserOptionChange:function(e,t,n){this._bUserDrivenChange=!0,this.option(e,t,{_context:{writeback:!0,optionMetadata:n,internalSet:!0,skipEvent:"_"===e.charAt(0)}}),this._bUserDrivenChange=!1},_NotifyContextMenuGesture:function(e,t,n){if("touch"!==n)if("keyboard"===n){var r=this.element[0].getBoundingClientRect(),i=this._component.getKeyboardFocus()?this._component.getKeyboardFocus().getBoundingClientRect():null,s=i?"left+"+(i.left+.5*i.width-r.left)+" top+"+(i.top+.5*i.height-r.top):"center";this._OpenContextMenu(t,n,{position:{at:s}})}else this._super(e,t,n)},_GetDvtComponent:function(e){var t=i.__GetWidgetConstructor(e)("instance");return t?t._component:null},_GetStringFromIndexPath:function(e){for(var t="",n=0;n<e.length;n++)t+="["+e[n]+"]";return t},_GetIndexPath:function(e){for(var t=[],n=0;e.indexOf("[",n)>0;){var r=e.indexOf("[",n)+1,i=e.indexOf("]",n);t.push(Number(e.substring(r,i))),n=i+1}return t},_GetFirstIndex:function(e){return Number(this._GetFirstBracketedString(e))},_GetFirstBracketedString:function(e){var t=e.indexOf("[")+1,n=e.indexOf("]");return e.substring(t,n)},_GetComponentDeferredDataPaths:function(){return{}},_GetComponentNoClonePaths:function(){if(!this._noClonePaths){this._noClonePaths={};var e=this,t=this._GetComponentDeferredDataPaths().root;t&&t.forEach(function(t){e._noClonePaths[t]=!0})}return this._noClonePaths},_resolveDocumentFonts:function(){var e=document.fonts;if(e&&"loading"===e.status){this._numDeferredObjs+=1;var t=this._renderCount;e.ready.then(function(){this._renderDeferredData(t,null,[])}.bind(this))}},_resolveDeferredDataItems:function(){this._optionsCopy=a.JsonUtils.clone(this.options,null,this._GetComponentNoClonePaths()),this._numDeferredObjs=0,this._FixCustomRenderers(this._optionsCopy),this._resolveDocumentFonts();for(var e=this,t=this._GetComponentDeferredDataPaths(),n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];t[i].forEach(function(t){if("root"===i)e._resolveDeferredDataItem.bind(e)(e.options,e._optionsCopy,t);else{var n=e.options[i];if(n&&n instanceof Array)for(var r=0;r<n.length;r++)e._resolveDeferredDataItem.bind(e)(n[r],e._optionsCopy[i][r],t)}})}return 0===this._numDeferredObjs},_resolveDeferredDataItem:function(e,t,n){var r=new _(e,n),i=r.getValue(),s=this;if(i instanceof Function?i=Promise.resolve(i(this._GetDataContext(e))):this._IsCustomElement()&&Array.isArray(i)&&(i=Promise.resolve(i),r.setValue(i,!0)),i&&this._DataProviderHandler.isDataProvider(i)){var o=this._DataProviderHandler.isTreeDataProvider(i);i=s._dataValuePromise[n]||new Promise(function(e){var t=s._TemplateHandler.getTemplateEngine(),r=s._DataProviderHandler.fetchAllData(i,n,!0);Promise.all([t,r]).then(function(t){if(i===s._dataValuePromise[n]){var r=t[0],a=t[1],l=s._ProcessTemplates(n,a,r,o,null,!0);s._dataValuePromise[n]=null,e(l)}},function(){s._dataValuePromise[n]=null})}),s._dataValuePromise[n]=i}if(i instanceof Promise){var a=this._renderCount;i.then(function(e){var r=[n],i=[e];e.paths&&(r=e.paths,i=e.values),s._renderDeferredData(a,t,r,i)},function(){s._renderDeferredData(a,t,[n],[[]])}),this._numDeferredObjs+=1}},_renderDeferredData:function(e,t,n,r){if(this._context&&e===this._renderCount){this._numDeferredObjs-=1;for(var i=0;i<n.length;i++)new _(t,n[i]).setValue(r[i],!0);0===this._numDeferredObjs&&(this._RenderComponent(this._optionsCopy),this._optionsCopy=null)}},_ClearDataProviderState:function(e){this._DataProviderHandler.clear(e),this._TemplateHandler.release(e),this._dataValuePromise[e]=null},_OptionChangeHandler:function(e){for(var t=Object.keys(this._GetSimpleDataProviderConfigs()),n=0;n<t.length;n++){var r=t[n];Object.prototype.hasOwnProperty.call(e,r)&&this._ClearDataProviderState(r)}},getElementPropertyNames:function(t){var n=e.CustomElementBridge.getMetadata(t).properties,r=Object.keys(n).filter(function(e){return!n[e]._eventListener}),i=new Set;return r.forEach(function(e){i.add(e)}),i},_ProcessTemplates:function(e,t,n,r,i,s,o){return this._TemplateHandler.processTemplates(e,t,n,r,i,s,o)},_GetSimpleDataProviderConfigs:function(){return{}},_GetDPEventHandler:function(){return function(e){"notReady"===e.type?this._NotReady():"dataUpdated"===e.type?this._Render():"clearState"===e.type?this._ClearDataProviderState(e.detail.dataProperty):"reset"===e.type&&this._TemplateHandler.clear(e.detail.dataProperty,!0)}.bind(this)},_getFetchDataHandler:function(e){var t=this._GetSimpleDataProviderConfigs()[e].resultPath;return function(n,r,i,s){var o=this._DataProviderHandler.fetchChildrenData(e,n,s,r),a=this._TemplateHandler.getTemplateEngine();return Promise.all([o,a]).then(function(n){var r=this._ProcessTemplates(e,{data:n[0].data,keys:n[0].keys},n[1],!0,s,!1,!0).values[0];i&&(i[t]=r)}.bind(this))}.bind(this)},_RenderComponent:function(e,t){if(this._context.isReadyToRender()){this._CleanAllTemplates();var n=this._IsFlowingLayoutSupported()&&this._resizeListener;n&&this._removeResizeListener(),this._component.render(t?null:e,this._width,this._height),n&&this._addResizeListener(),this.element.attr("role")?this.element[0].hasAttribute("tabindex")||this.element.attr("tabindex",0):this.element.attr("tabindex",null)}else this._renderNeeded=!0,this._MakeReady()},_GetDataContext:function(e){return{}},_IsFlowingLayoutSupported:function(){return!1},whenReady:function(){if(this._ready)return Promise.resolve(!0);if(!this._promise){var e=this;this._promise=new Promise(function(t){e._promiseResolve=t})}return this._promise},_NotReady:function(){if(this._ready=!1,0===this._numDeferredObjs&&!this._readyResolveFunc){var e=n.getContext(this.element[0]).getBusyContext(),t={description:"The component identified by '"+this.element.attr("id")+"' is being loaded."};this._readyResolveFunc=e.addBusyState(t)}},_MakeReady:function(){this._promiseResolve&&(this._promiseResolve(!0),this._promiseResolve=null),this._ready=!0,this._promise=null,this._readyResolveFunc&&(this._readyResolveFunc(),this._readyResolveFunc=null)},_ProcessOptions:function(){a.Agent.isEnvironmentTest()&&(this.options=Object.assign(this.options,this.element[0].__dvtToolkit));var e=this.options.tooltip;e&&e._renderer&&(this.options.tooltip={renderer:this._GetTemplateRenderer(e._renderer,"tooltip")})},_WrapCustomElementRenderer:function(e){var t=this;return e?function(n){n._dvtcontext=t._context;var r=e(n);if(n._templateName&&n._templateCleanup&&t._AddTemplate(n._templateName,n._templateCleanup),r&&!0!==r.preventDefault&&r.insert){var i=r.insert;return i.classList&&i.classList.contains("oj-dvtbase")?t._GetDvtComponent(i):i}return null}:null},_FixCustomRenderers:function(e){if(this._IsCustomElement())for(var t=this._GetComponentRendererOptions(),n=0;n<t.length;n++){var r=t[n].path,i=t[n].slot,s=this._TemplateHandler.getTemplates();if(i&&s[i]&&s[i][0])this._ProcessInlineTemplateRenderer(e,r,s[i][0],i);else{var o=new _(e,r),a=o.getValue();a&&o.setValue(this._WrapCustomElementRenderer(a),!0)}}},_GetComponentRendererOptions:function(){return[{path:"tooltip/renderer",slot:"tooltipTemplate"}]},_GetTemplateRenderer:function(e,n){var r=this;return function(i){var s=document.createElement("div");s.style.display="none",e({parentElement:s,context:i});var o=s.children[0];return o?(r._AddTemplate(n,function(){t(s).remove()}),s.removeChild(o),t(s).remove(),o):null}},_GetTemplateDataRenderer:function(e,n){var r=this;return function(i){var s=document.createElement("div");s.style.display="none",s._dvtcontext=r._context,r.element.append(s),e({parentElement:s,data:i.data});var o=s.children[0];return o?(r._AddTemplate(n,function(){t(s).remove()}),"http://www.w3.org/2000/svg"===o.namespaceURI?(s.removeChild(o),t(s).remove(),o):r._GetDvtComponent(o)):null}},_WrapInlineTemplateRenderer:function(e,t,n){return e},_ProcessInlineTemplateRenderer:function(e,t,n,r){var i=this._renderCount;this._numDeferredObjs+=1,this._TemplateHandler.getTemplateEngine().then(function(s){var o=function(e){var t=s.execute(this.element[0],n,e);return t&&t.length>0?(Object.defineProperty(e,"_templateCleanup",{value:function(){t.forEach(function(e){s.clean(e)})},enumerable:!1}),Object.defineProperty(e,"_templateName",{value:r,enumerable:!1}),{insert:t}):{preventDefault:!0}}.bind(this);o=this._WrapInlineTemplateRenderer(o,r,t),this._renderDeferredData(i,e,[t],[this._WrapCustomElementRenderer(o)])}.bind(this))},_CleanAllTemplates:function(){for(var e=Object.keys(this._templateMap),t=0;t<e.length;t++){var n=e[t];this._CleanTemplate(n)}this._templateMap={}},_CleanTemplate:function(e){if(this._templateMap[e]){for(var t=this._templateMap[e].length,n=0;n<t;n++)this._templateMap[e][n]();this._templateMap[e]=[]}},_AddTemplate:function(e,t){this._templateMap[e]||(this._templateMap[e]=[]),this._templateMap[e].push(t)},_CompareOptionValues:function(t,n,r){switch(t){case"hiddenCategories":case"highlightedCategories":case"selection":return e.Object.compareValues(n,r);default:return this._super(t,n,r)}}},!0),c});
/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 */
define('ojs/internal-deps/dvt/DvtPanZoomCanvas',['./DvtToolkit'], function(dvt) {
  "use strict";
  // Internal use only.  All APIs and functionality are subject to change at any time.

!function(t){t.PanZoomComponent=function(t,n,a){this.Init(t,n,a)},t.Obj.createSubclass(t.PanZoomComponent,t.BaseComponent),t.PanZoomComponent.prototype.Init=function(n,a,o){t.PanZoomComponent.superclass.Init.call(this,n,a,o),this._bSupportsVectorEffects=!(("ie"===t.Agent.browser||"edge"===t.Agent.browser)&&t.Agent.version<=11),this._resourcesMap=null,this._panAnimator=null,this._panningInterrupted=!1},t.PanZoomComponent.prototype.getPanZoomCanvas=function(){return this._panZoomCanvas},t.PanZoomComponent.prototype.render=function(t,n,a){this.Width=n,this.Height=a,this._isResize=!t,this.IsResize()&&!this.getPanZoomCanvas()||(this.PreRender(),this.IsResize()||this.SetOptions(t),this.Render(t,n,a),this.UpdateAriaAttributes())},t.PanZoomComponent.prototype.supportsVectorEffects=function(){return this._bSupportsVectorEffects},t.PanZoomComponent.prototype.HandlePanEvent=function(t){},t.PanZoomComponent.prototype.HandleZoomEvent=function(t){},t.PanZoomComponent.prototype.IsResize=function(){return this._isResize},t.PanZoomComponent.prototype.PreRender=function(){},t.PanZoomComponent.prototype.Render=function(){this.IsResize()?this._panZoomCanvas.setSize(this.getWidth(),this.getHeight()):(this._panZoomCanvas&&(this.removeChild(this._panZoomCanvas),this._panZoomCanvas=null),this._panZoomCanvas=new t.PanZoomCanvas(this.getCtx(),this.getWidth(),this.getHeight(),this),this._panZoomCanvas.addEvtListener("dvtPan",this.HandlePanEvent,!1,this),this._panZoomCanvas.addEvtListener("dvtZoom",this.HandleZoomEvent,!1,this),this.addChild(this._panZoomCanvas));var n=new t.ClipPath("comp");n.addRect(this.getTranslateX(),this.getTranslateY(),this.getWidth(),this.getHeight()),this.setClipPath(n)},t.PanZoomComponent.prototype.SetOptions=function(t){this.Options=this.Defaults?this.Defaults.calcOptions(t):t},t.PanZoomComponent.prototype.destroy=function(){this._panZoomCanvas&&(this._panZoomCanvas.destroy(),this._panZoomCanvas=null),t.PanZoomComponent.superclass.destroy.call(this)},t.PanZoomComponent.prototype.ensureObjInViewport=function(n,a){if(this._panZoomCanvas.isPanningEnabled()){this._panAnimator&&(this._panningInterrupted=!0,this._panAnimator.stop());var o=this.Width,i=this.Height,e=a.getKeyboardBoundingBox(this.getCtx().getStage()),s=new t.Rectangle(0,0,o,i);if(!s.getUnion(e).equals(s)){var r=0,h=0,m=e.w,_=e.h,c=e.x,l=e.y;m<=o?c<0?r=c:c+m>o&&(r=c+m-o):r=c+.5*m-.5*o,_<=i?l<0?h=l:l+_>i&&(h=l+_-i):h=l+.5*_-.5*i;var u=new t.Animator(this.getCtx(),this.getAnimationDuration());this._panAnimator=u;var g=this;this.getPanZoomCanvas().panBy(-r,-h,u,function(){g._panAnimator=null,g.getEventManager().showFocusEffect(n,a),g._panningInterrupted=!1}),u.play()}}},t.PanZoomComponent.prototype.isPanning=function(){return null!=this._panAnimator||this._panningInterrupted},t.PanZoomCanvas=function(t,n,a,o){this.Init(t,n,a,o)},t.Obj.createSubclass(t.PanZoomCanvas,t.Container),t.PanZoomCanvas.DEFAULT_PAN_INCREMENT=15,t.PanZoomCanvas.DEFAULT_ZOOM_INCREMENT=.05,t.PanZoomCanvas.DEFAULT_ANIMATION_DURATION=.5,t.PanZoomCanvas.DEFAULT_PADDING=20,t.PanZoomCanvas.prototype.Init=function(n,a,o,i){t.PanZoomCanvas.superclass.Init.call(this,n),this._view=i,this._ww=a,this._hh=o,this._px=0,this._py=0,this._mx=0,this._my=0,this._minPanX=null,this._maxPanX=null,this._minPanY=null,this._maxPanY=null,this._minZoom=.1,this._maxZoom=1,this._panIncrement=t.PanZoomCanvas.DEFAULT_PAN_INCREMENT,this._zoomIncrement=t.PanZoomCanvas.DEFAULT_ZOOM_INCREMENT,this._zoomToFitPadding=t.PanZoomCanvas.DEFAULT_PADDING,this._bPanningEnabled=!0,this._panDirection="auto",this._bZoomingEnabled=!0,this._bZoomToFitEnabled=!0,this._backgroundPane=new t.Rect(this.getCtx(),0,0,this._ww,this._hh),this.addChild(this._backgroundPane),this._backgroundPane.setInvisibleFill(),this._contentPane=new t.Container(this.getCtx()),this.addChild(this._contentPane),this._contentPane.setMatrix(new t.Matrix),this._animationDuration=t.PanZoomCanvas.DEFAULT_ANIMATION_DURATION,this._eventManager=new t.PanZoomCanvasEventManager(n,this.FireListener,this),this._eventManager.addListeners(this),this._clipIdSuffix=1,this.SetClipRect(a,o),this._bElasticConstraints=!1,this._elasticConstraintsAnim=null},t.PanZoomCanvas.prototype.setSize=function(t,n,a){this._ww=t,this._hh=n,a||(this._backgroundPane.setWidth(t),this._backgroundPane.setHeight(n),this.SetClipRect(t,n))},t.PanZoomCanvas.prototype.getSize=function(){return new t.Dimension(this._ww,this._hh)},t.PanZoomCanvas.prototype.SetClipRect=function(n,a){var o=new t.ClipPath("pzc");o.addRect(this.getTranslateX(),this.getTranslateY(),n,a),this.setClipPath(o)},t.PanZoomCanvas.prototype.getContentPane=function(){return this._contentPane},t.PanZoomCanvas.prototype.setContentPane=function(t){this._contentPane=t},t.PanZoomCanvas.prototype.getBackgroundPane=function(){return this._backgroundPane},t.PanZoomCanvas.prototype.getContentPaneMatrix=function(t){if(t){var n=t.getDestVal(this._contentPane,this._contentPane.getMatrix);if(n)return n}return this._contentPane.getMatrix()},t.PanZoomCanvas.prototype.getZoom=function(t){return this.getContentPaneMatrix(t).getA()},t.PanZoomCanvas.prototype.getPanX=function(t){return this.getContentPaneMatrix(t).getTx()},t.PanZoomCanvas.prototype.getPanY=function(t){return this.getContentPaneMatrix(t).getTy()},t.PanZoomCanvas.prototype.setZoomToFitPadding=function(t){this._zoomToFitPadding=t},t.PanZoomCanvas.prototype.getZoomToFitPadding=function(){return this._zoomToFitPadding},t.PanZoomCanvas.prototype.panBy=function(n,a,o,i){if(this.isPanningEnabled()){var e=this.getPanX(o),s=this.getPanY(o),r="y"==this.getPanDirection()?e:this.ConstrainPanX(e+n),h="x"==this.getPanDirection()?s:this.ConstrainPanY(s+a),m=r-e,_=h-s,c=null;o&&(c=o.getDestVal(this._contentPane,this._contentPane.getMatrix)),c||(c=this._contentPane.getMatrix()),c=c.translate(m,_);var l=this,u=function(){l.FirePanEvent("panning",r,h,e,s,o)},g=function(){l.FirePanEvent("panned",r,h,e,s,o)};o?(o.addProp(t.Animator.TYPE_MATRIX,this._contentPane,this._contentPane.getMatrix,this._contentPane.setMatrix,c),t.Playable.prependOnInit(o,u),t.Playable.appendOnEnd(o,g),i&&t.Playable.appendOnEnd(o,i)):(u(),this._contentPane.setMatrix(c),g(),i&&i())}},t.PanZoomCanvas.prototype.panTo=function(t,n,a){if(this.isPanningEnabled()){var o=t-this.getPanX(a),i=n-this.getPanY(a);this.panBy(o,i,a)}},t.PanZoomCanvas.prototype.zoomBy=function(n,a,o,i){if(this.isZoomingEnabled()){a||0===a||(a=this._ww/2),o||0===o||(o=this._hh/2);var e=this.getZoom(i),s=this.ConstrainZoom(e*n),r=s/e,h=null;i&&(h=i.getDestVal(this._contentPane,this._contentPane.getMatrix)),h||(h=this._contentPane.getMatrix()),h=h.scale(r,r,a,o);var m=this.ConstrainPanX(h.getTx())-h.getTx(),_=this.ConstrainPanY(h.getTy())-h.getTy();this.FireZoomEvent("adjustPanConstraints",s,e,i,a,o,m,_),m=this.ConstrainPanX(h.getTx())-h.getTx(),_=this.ConstrainPanY(h.getTy())-h.getTy(),h=h.translate(m,_);var c=this,l=function(){c.FireZoomEvent("zooming",s,e,i,a,o,m,_)},u=function(){c.FireZoomEvent("zoomed",c.getZoom(),e,i,a,o,m,_)};i?(i.addProp(t.Animator.TYPE_MATRIX,this._contentPane,this._contentPane.getMatrix,this._contentPane.setMatrix,h),t.Playable.prependOnInit(i,l),t.Playable.appendOnEnd(i,u)):(l(),this._contentPane.setMatrix(h),u())}},t.PanZoomCanvas.prototype.zoomTo=function(t,n,a,o){if(this.isZoomingEnabled()){var i=t/this.getZoom(o);this.zoomBy(i,n,a,o)}},t.PanZoomCanvas.prototype.center=function(t,n){var a=this.isPanningEnabled(),o=this.getPanDirection();this.setPanningEnabled(!0),this.setPanDirection("auto");var i=n;i||(i=this._contentPane.getDimensions());var e=(i.x+i.w/2)*this.getZoom(),s=(i.y+i.h/2)*this.getZoom(),r=this._ww/2-e,h=this._hh/2-s;this.panTo(r,h,t),this.setPanningEnabled(a),this.setPanDirection(o)},t.PanZoomCanvas.prototype.zoomToFit=function(n,a){if(this.isZoomToFitEnabled()){var o=this.isPanningEnabled(),i=this.getPanDirection(),e=this.isZoomingEnabled();this.setPanningEnabled(!0),this.setPanDirection("auto"),this.setZoomingEnabled(!0);try{var s=a||this._contentPane.getDimensions();if(!s)return;var r=(this._ww-2*this._zoomToFitPadding)/s.w,h=(this._hh-2*this._zoomToFitPadding)/s.h,m=Math.min(r,h);m=this.ConstrainZoom(m);var _=(s.x+s.w/2)*m,c=(s.y+s.h/2)*m,l=this._ww/2-_,u=this._hh/2-c,g=this.getZoom(n),P=this,p=function(){P.FireZoomEvent("zoomToFitBegin",null,null,n)},v=function(){P.FireZoomEvent("zoomToFitEnd",P.getZoom(),g,n)};n?t.Playable.prependOnInit(n,p):p(),this.zoomTo(m,0,0,n),this.panTo(l,u,n),n?t.Playable.appendOnEnd(n,v):v()}finally{this.setPanningEnabled(o),this.setPanDirection(i),this.setZoomingEnabled(e)}}},t.PanZoomCanvas.prototype.calcZoomToFitScale=function(t){t||(t=this._contentPane.getDimensions());var n=(this._ww-2*this._zoomToFitPadding)/t.w,a=(this._hh-2*this._zoomToFitPadding)/t.h,o=Math.min(n,a);return o=this.ConstrainZoom(o)},t.PanZoomCanvas.prototype.calcZoomToFitBounds=function(){var t=this._contentPane.getDimensions();return t.x-=this._zoomToFitPadding,t.y-=this._zoomToFitPadding,t.w+=2*this._zoomToFitPadding,t.h+=2*this._zoomToFitPadding,t},t.PanZoomCanvas.prototype.getViewport=function(){var n=this.localToStage(new t.Point(0,0)),a=this.localToStage(new t.Point(this._ww,this._hh)),o=this.getContentPane().stageToLocal(n),i=this.getContentPane().stageToLocal(a);return new t.Rectangle(o.x,o.y,i.x-o.x,i.y-o.y)},t.PanZoomCanvas.prototype.SetElasticConstraints=function(n){if(this._bElasticConstraints=n,n)this._elasticConstraintsAnim&&(this._elasticConstraintsAnim.isRunning()&&this._elasticConstraintsAnim.stop(),this._elasticConstraintsAnim=null);else{var a=this.getPanX(),o=this.getPanY(),i=this.getZoom();this._bElasticPan=a!=this.ConstrainPanX(a)||o!=this.ConstrainPanY(o),this._bElasticZoom=i!=this.ConstrainZoom(i),(this._bElasticPan||this._bElasticZoom)&&(this._elasticConstraintsAnim=new t.Animator(this.getCtx(),.4),this._elasticConstraintsAnim.setEasing(t.Easing.cubicOut),this._bElasticZoom&&this.zoomBy(1,.5*this._ww,.5*this._hh,this._elasticConstraintsAnim),this._bElasticPan&&this.panBy(0,0,this._elasticConstraintsAnim),t.Playable.appendOnEnd(this._elasticConstraintsAnim,this._elasticConstraintsAnimOnEnd,this),this._bElasticPan&&this.FirePanEvent("elasticAnimBegin",null,null,null,null,this._elasticConstraintsAnim),this._bElasticZoom&&this.FireZoomEvent("elasticAnimBegin",null,null,null,null,this._elasticConstraintsAnim),this._elasticConstraintsAnim.play())}},t.PanZoomCanvas.prototype.IsElasticConstraints=function(){return this._bElasticConstraints},t.PanZoomCanvas.prototype._elasticConstraintsAnimOnEnd=function(){this._elasticConstraintsAnim=null,this._bElasticPan&&this.FirePanEvent("elasticAnimEnd"),this._bElasticZoom&&this.FireZoomEvent("elasticAnimEnd")},t.PanZoomCanvas.prototype._panDampingFunc=function(t,n){var a=.01*n;return Math.sqrt(4*a*t)},t.PanZoomCanvas.prototype._zoomDampingFunc=function(t,n){var a=.002*n;return Math.sqrt(4*a*t)},t.PanZoomCanvas.prototype.ConstrainPanX=function(t){var n=t;if(null!=this._minPanX&&n<this._minPanX)if(this.IsElasticConstraints()){var a=this._minPanX-n;n=this._minPanX-this._panDampingFunc(a,this._ww)}else n=this._minPanX;if(null!=this._maxPanX&&n>this._maxPanX)if(this.IsElasticConstraints()){a=n-this._maxPanX;n=this._maxPanX+this._panDampingFunc(a,this._ww)}else n=this._maxPanX;return n},t.PanZoomCanvas.prototype.ConstrainPanY=function(t){var n=t;if(null!=this._minPanY&&n<this._minPanY)if(this.IsElasticConstraints()){var a=this._minPanY-n;n=this._minPanY-this._panDampingFunc(a,this._hh)}else n=this._minPanY;if(null!=this._maxPanY&&n>this._maxPanY)if(this.IsElasticConstraints()){a=n-this._maxPanY;n=this._maxPanY+this._panDampingFunc(a,this._hh)}else n=this._maxPanY;return n},t.PanZoomCanvas.prototype.ConstrainZoom=function(t){var n=Math.max(0,t);if(this._minZoom&&n<this._minZoom)if(this.IsElasticConstraints()){var a=this._minZoom-n;n=this._minZoom-this._zoomDampingFunc(a,this._maxZoom-this._minZoom)}else n=this._minZoom;if(this._maxZoom&&n>this._maxZoom)if(this.IsElasticConstraints()){a=n-this._maxZoom;n=this._maxZoom+this._zoomDampingFunc(a,this._maxZoom-this._minZoom)}else n=this._maxZoom;return n},t.PanZoomCanvas.RoundFloatForCompare=function(t){return Math.round(1e5*t)},t.PanZoomCanvas.prototype.GetRelativeMousePosition=function(t){return this.getCtx().pageToStageCoords(t.pageX,t.pageY)},t.PanZoomCanvas.prototype.FirePanEvent=function(n,a,o,i,e,s){var r=t.EventFactory.newPanEvent(n,a,o,i,e,s);this.FireListener(r)},t.PanZoomCanvas.prototype.FireZoomEvent=function(n,a,o,i,e,s,r,h){var m=t.EventFactory.newZoomEvent(n,a,o,i,new t.Point(e,s),r,h);return this.FireListener(m),m},t.PanZoomCanvas.prototype.zoomAndCenter=function(){this.FireZoomEvent("zoomAndCenter")},t.PanZoomCanvas.prototype.getNextZoomLevel=function(t){var n=t;return(n+=this.getZoomIncrement())>this.getMaxZoom()&&(n=this.getMaxZoom()),n},t.PanZoomCanvas.prototype.getPrevZoomLevel=function(t){var n=t;return(n-=this.getZoomIncrement())<this.getMinZoom()&&(n=this.getMinZoom()),n},t.PanZoomCanvas.prototype.setZoomIncrement=function(t){this._zoomIncrement=t},t.PanZoomCanvas.prototype.getZoomIncrement=function(){return this._zoomIncrement},t.PanZoomCanvas.prototype.setPanIncrement=function(t){this._panIncrement=t},t.PanZoomCanvas.prototype.getPanIncrement=function(){return this._panIncrement},t.PanZoomCanvas.prototype.setMinZoom=function(t){this._minZoom=t},t.PanZoomCanvas.prototype.getMinZoom=function(){return this._minZoom},t.PanZoomCanvas.prototype.setMaxZoom=function(t){t<0&&(t=1),this._maxZoom=t},t.PanZoomCanvas.prototype.getMaxZoom=function(){return this._maxZoom},t.PanZoomCanvas.prototype.setMinPanX=function(t){this._minPanX=t},t.PanZoomCanvas.prototype.getMinPanX=function(){return this._minPanX},t.PanZoomCanvas.prototype.setMaxPanX=function(t){this._maxPanX=t},t.PanZoomCanvas.prototype.getMaxPanX=function(){return this._maxPanX},t.PanZoomCanvas.prototype.setMinPanY=function(t){this._minPanY=t},t.PanZoomCanvas.prototype.getMinPanY=function(){return this._minPanY},t.PanZoomCanvas.prototype.setMaxPanY=function(t){this._maxPanY=t},t.PanZoomCanvas.prototype.getMaxPanY=function(){return this._maxPanY},t.PanZoomCanvas.prototype.setAnimationDuration=function(t){this._animationDuration=t},t.PanZoomCanvas.prototype.getAnimationDuration=function(){return this._animationDuration},t.PanZoomCanvas.prototype.setPanningEnabled=function(t){this._bPanningEnabled=t},t.PanZoomCanvas.prototype.isPanningEnabled=function(){return this._bPanningEnabled},t.PanZoomCanvas.prototype.setPanDirection=function(t){this._panDirection=t},t.PanZoomCanvas.prototype.getPanDirection=function(){return this._panDirection},t.PanZoomCanvas.prototype.setZoomingEnabled=function(t){this._bZoomingEnabled=t},t.PanZoomCanvas.prototype.isZoomingEnabled=function(){return this._bZoomingEnabled},t.PanZoomCanvas.prototype.setZoomToFitEnabled=function(t){this._bZoomToFitEnabled=t},t.PanZoomCanvas.prototype.isZoomToFitEnabled=function(){return this._bZoomToFitEnabled},t.PanZoomCanvas.prototype.setCurrentTouchTargets=function(t){this._currTargets=t},t.PanZoomCanvas.prototype.getCurrentTouchTargets=function(){return this._currTargets},t.PanZoomCanvas.prototype.resetTouchTargets=function(){t.Agent.isTouchDevice()&&(this._currTargets=null,this._eventManager.TouchManager.reset())},t.PanZoomCanvas.prototype.panZoomEnd=function(){this._eventManager.PanZoomEnd()},t.PanZoomCanvas.prototype.setInteractionEnabled=function(t){t?this._eventManager.addListeners(this):this._eventManager.removeListeners(this)},t.PanZoomCanvas.prototype.destroy=function(){this._elasticConstraintsAnim&&(this._elasticConstraintsAnim.stop(!0),this._elasticConstraintsAnim=null),this._eventManager&&(this._eventManager.removeListeners(this),this._eventManager.destroy(),this._eventManager=null),t.PanZoomCanvas.superclass.destroy.call(this)},t.PanZoomCanvas.prototype.getCursor=function(n){return this._bPanningEnabled?n?t.ToolkitUtils.getGrabbingCursor():t.ToolkitUtils.getGrabCursor():"inherit"},t.PanZoomCanvasEventManager=function(t,n,a){this.Init(t,n,a)},t.Obj.createSubclass(t.PanZoomCanvasEventManager,t.EventManager),t.PanZoomCanvasEventManager.EVENT_INFO_PANNED_KEY="panned",t.PanZoomCanvasEventManager.prototype.Init=function(n,a,o){t.PanZoomCanvasEventManager.superclass.Init.call(this,n,a,o),this._pzc=o,this._zoomAnimator=null,this._bPanning=!1,this._bPanned=!1,this._bZooming=!1,this._bDragging=!1,this._bMomentumPanning=!0},t.PanZoomCanvasEventManager._PAN_TOUCH_KEY="panTouch",t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY="zoomTouch",t.PanZoomCanvasEventManager._MOMENTUM_START_TIMER_INTERVAL=50,t.PanZoomCanvasEventManager.prototype.addListeners=function(n){t.PanZoomCanvasEventManager.superclass.addListeners.call(this,n),n.addEvtListener(t.MouseEvent.MOUSEWHEEL,this.OnMouseWheel,!1,this)},t.PanZoomCanvasEventManager.prototype.RemoveListeners=function(n){t.PanZoomCanvasEventManager.superclass.RemoveListeners.call(this,n),n.removeEvtListener(t.MouseEvent.MOUSEWHEEL,this.OnMouseWheel,!1,this)},t.PanZoomCanvasEventManager.prototype.OnMouseDown=function(n){if(this._bDragging=!1,this._bPanned=!1,n.button!=t.MouseEvent.RIGHT_CLICK_BUTTON){var a=this._callbackObj.GetRelativeMousePosition(n);this._mx=a.x,this._my=a.y,this._px=this._mx,this._py=this._my,this._bDown=!0,this._origPanX=this._callbackObj.getPanX(),this._origPanY=this._callbackObj.getPanY(),this._origZoom=this._callbackObj.getZoom(),this._bMomentumPanning&&(this._currTime=(new Date).getTime())}this._momentumTimer&&this._momentumTimer.isRunning()&&(this._momentumTimer.stop(),this._momentumTimer.reset())},t.PanZoomCanvasEventManager.prototype.OnMouseMove=function(n){var a=this._callbackObj.GetRelativeMousePosition(n);if(!(Math.abs(a.x-this._px)<=3&&Math.abs(a.y-this._py)<=3)){if(this._bDown){this._bDragging=!0;var o=(a=this._callbackObj.GetRelativeMousePosition(n)).x,i=a.y;if(n.ctrlKey){this._bZooming||(this._callback.call(this._callbackObj,t.EventFactory.newZoomEvent("dragZoomBegin")),this._bZooming=!0,this._callbackObj.SetElasticConstraints(!0));var e=this._py>=i?1:-1,s=this._origZoom*Math.pow(1+.01*e,Math.abs(this._py-i));this._callbackObj.isPanningEnabled()?this._callbackObj.zoomTo(s,this._px,this._py):this._callbackObj.zoomTo(s,null,null)}else this._handlePanMove(o,i);this._mx=o,this._my=i}this._callbackObj.setCursor(this._callbackObj.getCursor(this._bDown))}},t.PanZoomCanvasEventManager.prototype.OnMouseUp=function(n){this.PanZoomEnd(),t.PanZoomCanvasEventManager.superclass.OnMouseUp.call(this,n)},t.PanZoomCanvasEventManager.prototype.OnClick=function(n){(this._bDragging||this._bPanned)&&(this._bDragging=!1,this._bPanned=!1,t.EventManager.consumeEvent(n))},t.PanZoomCanvasEventManager.prototype.OnMouseOut=function(n){this._bDown&&(this._bPanning||this._bZooming)&&(n.relatedTarget&&null!=n.relatedTarget||this.OnMouseUp(n)),t.PanZoomCanvasEventManager.superclass.OnMouseOut.call(this,n)},t.PanZoomCanvasEventManager.prototype.OnMouseWheel=function(n){if(n.wheelDelta&&0!==n.wheelDelta&&this._callbackObj.isZoomingEnabled()){var a=this._callbackObj.getZoom();if(this._zoomAnimator){var o=this._zoomAnimator;this._zoomAnimator.stop(),a=this._callbackObj.getZoom(o),this._zoomAnimator=null,o=null}this._zoomAnimator=null;var i=n.wheelDelta,e=a*(1+this._callbackObj.getZoomIncrement()*i/Math.abs(i)),s=this._callbackObj.GetRelativeMousePosition(n);n.stopPropagation(),n.preventDefault(),this._callbackObj.isPanningEnabled()?this._callbackObj.zoomTo(e,s.x,s.y,this._zoomAnimator):this._callbackObj.zoomTo(e,null,null,this._zoomAnimator),this._zoomAnimator&&(t.Playable.appendOnEnd(this._zoomAnimator,this._clearZoomAnimator,this),this._zoomAnimator.play())}},t.PanZoomCanvasEventManager.prototype._clearZoomAnimator=function(){this._zoomAnimator=null},t.PanZoomCanvasEventManager.prototype._handleMomentumStartTimer=function(){},t.PanZoomCanvasEventManager.prototype._handleMomentumTimer=function(){var t=1-.04*this._momentumIterCount;t*=t;var n=this._momentumTimer.getInterval(),a=t*this._momentumXperMS*n,o=t*this._momentumYperMS*n;this._momentumDx+=a,this._momentumDy+=o;var i=this._origPanX+this._mx-this._px+this._momentumDx,e=this._origPanY+this._my-this._py+this._momentumDy;this._callbackObj.panTo(i,e);var s=!1;if(this._momentumIterCount>=24)s=!0;else{var r=this._callbackObj.getPanX(),h=this._callbackObj.getPanY(),m=this._pzc.getPanDirection();(Math.abs(r-i)>Math.abs(a)&&"y"!=m||Math.abs(h-e)>Math.abs(o)&&"x"!=m)&&(s=!0)}s?(this._momentumTimer.stop(),this._momentumTimer.reset(),this._callbackObj.SetElasticConstraints(!1)):this._momentumIterCount++},t.PanZoomCanvasEventManager.prototype.HandleImmediateTouchStartInternal=function(n){this._callbackObj.isZoomingEnabled()&&this.TouchManager.processAssociatedTouchAttempt(n,t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY,this.ZoomStartTouch,this),this._callbackObj.isPanningEnabled()&&this.TouchManager.processAssociatedTouchAttempt(n,t.PanZoomCanvasEventManager._PAN_TOUCH_KEY,this.PanStartTouch,this)},t.PanZoomCanvasEventManager.prototype.HandleImmediateTouchMoveInternal=function(n){this._callbackObj.isZoomingEnabled()&&this.TouchManager.processAssociatedTouchMove(n,t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY),this._callbackObj.isPanningEnabled()&&this.TouchManager.processAssociatedTouchMove(n,t.PanZoomCanvasEventManager._PAN_TOUCH_KEY),(this._callbackObj.isZoomingEnabled()||this._callbackObj.isPanningEnabled())&&n.preventDefault()},t.PanZoomCanvasEventManager.prototype.HandleImmediateTouchEndInternal=function(n){this._callbackObj.isZoomingEnabled()&&this.TouchManager.processAssociatedTouchEnd(n,t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY),this._callbackObj.isPanningEnabled()&&this.TouchManager.processAssociatedTouchEnd(n,t.PanZoomCanvasEventManager._PAN_TOUCH_KEY)},t.PanZoomCanvasEventManager.prototype.ZoomStartTouch=function(n,a){var o=this.TouchManager.getTouchIdsForObj(t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY);o.length<=1&&(this.TouchManager.saveProcessedTouch(a.identifier,t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY,null,t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY,t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY,this.ZoomMoveTouch,this.ZoomEndTouch,this),this._mx=a.pageX,this._my=a.pageY,this._px=this._mx,this._py=this._my,this._origPanX=this._callbackObj.getPanX(),this._origPanY=this._callbackObj.getPanY(),this._origZoom=this._callbackObj.getZoom(),this._origDist=null,o=this.TouchManager.getTouchIdsForObj(t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY),this._callbackObj.setCurrentTouchTargets(this.TouchManager.getStartTargetsByIds(o))),this._momentumTimer&&this._momentumTimer.isRunning()&&(this._momentumTimer.stop(),this._momentumTimer.reset())},t.PanZoomCanvasEventManager.prototype.ZoomMoveTouch=function(n,a){var o=this.TouchManager.getTouchIdsForObj(t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY);if(2==o.length){var i=this.TouchManager.getMultiTouchData(o);if(i){this._bZooming||(this._bZooming=!0,this.TouchManager.blockTouchHold(),this._callback.call(this._callbackObj,t.EventFactory.newZoomEvent("dragZoomBegin"))),this._callbackObj.SetElasticConstraints(!0),null==this._origDist&&(this._origDist=i.dist-i.dz);var e=this._origZoom*(i.dist/this._origDist),s=this._pzc.getCtx().pageToStageCoords(i.cx,i.cy);this.hideTooltip(),this._callbackObj.setCurrentTouchTargets(this.TouchManager.getStartTargetsByIds(o)),this._callbackObj.zoomTo(e,s.x,s.y),this._callbackObj.panBy(i.dcx,i.dcy)}}},t.PanZoomCanvasEventManager.prototype.ZoomEndTouch=function(n,a){this._bZooming&&(this._origDist=null,this.TouchManager.unblockTouchHold(),this._handleZoomEnd());var o=this.TouchManager.getTouchIdsForObj(t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY);this._callbackObj.setCurrentTouchTargets(this.TouchManager.getStartTargetsByIds(o)),0==o.length&&this._callback.call(this._callbackObj,t.EventFactory.newZoomEvent("zoomEnd",this._callbackObj.getZoom(),this._origZoom))},t.PanZoomCanvasEventManager.prototype.PanStartTouch=function(n,a){this._bZooming||this.TouchManager.getTouchIdsForObj(t.PanZoomCanvasEventManager._PAN_TOUCH_KEY).length<=1&&(this.TouchManager.saveProcessedTouch(a.identifier,t.PanZoomCanvasEventManager._PAN_TOUCH_KEY,null,t.PanZoomCanvasEventManager._PAN_TOUCH_KEY,t.PanZoomCanvasEventManager._PAN_TOUCH_KEY,this.PanMoveTouch,this.PanEndTouch,this),this._mx=a.pageX,this._my=a.pageY,this._px=this._mx,this._py=this._my,this._origPanX=this._callbackObj.getPanX(),this._origPanY=this._callbackObj.getPanY(),this._origZoom=this._callbackObj.getZoom(),this._bMomentumPanning&&(this._currTime=(new Date).getTime()));this._momentumTimer&&this._momentumTimer.isRunning()&&(this._momentumTimer.stop(),this._momentumTimer.reset())},t.PanZoomCanvasEventManager.prototype.PanMoveTouch=function(n,a){if(!this._bZooming&&1==this.TouchManager.getTouchIdsForObj(t.PanZoomCanvasEventManager._PAN_TOUCH_KEY).length){var o=a.pageX,i=a.pageY;this._handlePanMove(o,i),this._mx=o,this._my=i}},t.PanZoomCanvasEventManager.prototype.PanEndTouch=function(t,n){!this._bZooming&&this._bPanning&&(this._handlePanEnd(),this.SetEventInfo(t,"panned",!0))},t.PanZoomCanvasEventManager.prototype._handleZoomEnd=function(){this._callback.call(this._callbackObj,t.EventFactory.newZoomEvent("dragZoomEnd")),this._bZooming=!1,this._callbackObj.SetElasticConstraints(!1)},t.PanZoomCanvasEventManager.prototype._handlePanMove=function(n,a){this._bPanning||(this._callback.call(this._callbackObj,t.EventFactory.newPanEvent("dragPanBegin")),this._bPanning=!0,this._callbackObj.SetElasticConstraints(!0),this._bMomentumPanning&&(this._arLastNMouseMoves=[])),this._callbackObj.panTo(this._origPanX+n-this._px,this._origPanY+a-this._py),this._bMomentumPanning&&(this._lastTime=this._currTime,this._currTime=(new Date).getTime(),this._momentumStartTimer?(this._momentumStartTimer.isRunning()&&this._momentumStartTimer.stop(),this._momentumStartTimer.reset()):this._momentumStartTimer=new t.Timer(this._context,t.PanZoomCanvasEventManager._MOMENTUM_START_TIMER_INTERVAL,this._handleMomentumStartTimer,this,1),this._arLastNMouseMoves.push({dt:this._currTime-this._lastTime,dx:n-this._mx,dy:a-this._my}),this._arLastNMouseMoves.length>5&&this._arLastNMouseMoves.splice(0,1),this._momentumStartTimer.start())},t.PanZoomCanvasEventManager.prototype._handlePanEnd=function(){if(this._callback.call(this._callbackObj,t.EventFactory.newPanEvent("dragPanEnd")),this._bPanning=!1,this._bPanned=!0,this._momentumStartTimer&&this._momentumStartTimer.isRunning()){this._momentumStartTimer.stop(),this._momentumStartTimer.reset(),this._momentumTimer?this._momentumTimer.reset():this._momentumTimer=new t.Timer(this._context,t.PanZoomCanvasEventManager._MOMENTUM_START_TIMER_INTERVAL,this._handleMomentumTimer,this);for(var n=0,a=0,o=0,i=this._arLastNMouseMoves.length;this._arLastNMouseMoves.length>0;){var e=this._arLastNMouseMoves.pop();n+=e.dt,a+=e.dx,o+=e.dy}this._arLastNMouseMoves=null,this._momentumXperMS=a/n,this._momentumYperMS=o/n,this._momentumTimer.setInterval(Math.ceil(n/i)),this._momentumIterCount=1,this._momentumDx=0,this._momentumDy=0,this._pzc.isPanningEnabled()&&this._momentumTimer.start()}else this._callbackObj.SetElasticConstraints(!1)},t.PanZoomCanvasEventManager.prototype.PanZoomEnd=function(){this._bDown=!1,this._bDragging=!1,this._bPanning&&this._handlePanEnd(),this._bZooming&&this._handleZoomEnd(),this._callbackObj.setCursor(this._callbackObj.getCursor(this._bDown))},t.PanZoomCanvasEventManager.prototype.GetTouchResponse=function(){return this._pzc.isPanningEnabled()||this._pzc.isZoomingEnabled()?t.EventManager.TOUCH_RESPONSE_TOUCH_HOLD:t.EventManager.TOUCH_RESPONSE_AUTO},t.PanZoomCanvasEventManager.prototype.StoreInfoByEventType=function(n){return n!=t.PanZoomCanvasEventManager.EVENT_INFO_PANNED_KEY&&t.PanZoomCanvasEventManager.superclass.StoreInfoByEventType.call(this,n)},t.PanZoomCanvasKeyboardHandler=function(t,n){this.Init(t,n)},t.Obj.createSubclass(t.PanZoomCanvasKeyboardHandler,t.KeyboardHandler),t.PanZoomCanvasKeyboardHandler.prototype.Init=function(n,a){t.PanZoomCanvasKeyboardHandler.superclass.Init.call(this,a),this._component=n},t.PanZoomCanvasKeyboardHandler.prototype.processKeyDown=function(n){var a=n.keyCode,o=this._component.getPanZoomCanvas();if(a==t.KeyboardEvent.PAGE_UP)n.ctrlKey||n.shiftKey?o.panBy(o.getPanIncrement(),0):o.panBy(0,o.getPanIncrement()),n.preventDefault();else if(a==t.KeyboardEvent.PAGE_DOWN)n.ctrlKey||n.shiftKey?o.panBy(-o.getPanIncrement(),0):o.panBy(0,-o.getPanIncrement()),n.preventDefault();else if(t.KeyboardEvent.isEquals(n)||t.KeyboardEvent.isPlus(n))o.zoomTo(o.getZoom()+o.getZoomIncrement());else if(t.KeyboardEvent.isMinus(n)||t.KeyboardEvent.isUnderscore(n))o.zoomTo(o.getZoom()-o.getZoomIncrement());else{if(a!=t.KeyboardEvent.ZERO&&a!=t.KeyboardEvent.NUMPAD_ZERO||n.ctrlKey||n.shiftKey)return t.PanZoomCanvasKeyboardHandler.superclass.processKeyDown.call(this,n);o.zoomToFit()}}}(dvt);
  return dvt;
});

/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 */
define('ojs/internal-deps/dvt/DvtOverview',['./DvtToolkit'], function(dvt) {
  "use strict";
  // Internal use only.  All APIs and functionality are subject to change at any time.

!function(t){t.OverviewUtils=new Object,t.OverviewUtils.supportsTouch=function(){return t.Agent.isTouchDevice()},t.Obj.createSubclass(t.OverviewUtils,t.Obj),t.OverviewUtils.getDatePosition=function(t,i,e,n){var o=(e-t)*n,r=i-t;return 0==o||0==r?0:o/r},t.OverviewUtils.getPositionDate=function(t,i,e,n){var o=e*(i-t);return 0==o||0==n?t:o/n+t},t.Overview=function(t,i,e){this.Init(t,i,e)},t.Obj.createSubclass(t.Overview,t.Container),t.Overview.MIN_WINDOW_SIZE=10,t.Overview.DEFAULT_VERTICAL_TIMEAXIS_SIZE=40,t.Overview.DEFAULT_HORIZONTAL_TIMEAXIS_SIZE=20,t.Overview.HANDLE_PADDING_SIZE=20,t.Overview.prototype.Init=function(i,n,o){t.Overview.superclass.Init.call(this,i),this.initDefaults(),this._callback=n,this._callbackObj=o,this._lastChildIndex=6,(null!=this._callback||null!=this._callbackObj)&&(this.EventManager=new e(this,i,n,o),this.EventManager.addListeners(this),t.OverviewUtils.supportsTouch()?(this.addEvtListener(t.TouchEvent.TOUCHSTART,this.HandleTouchStart,!1,this),this.addEvtListener(t.TouchEvent.TOUCHMOVE,this.HandleTouchMove,!1,this),this.addEvtListener(t.TouchEvent.TOUCHEND,this.HandleTouchEnd,!1,this),this.addEvtListener(t.MouseEvent.CLICK,this.HandleShapeClick,!1,this)):(this.addEvtListener(t.MouseEvent.MOUSEOVER,this.HandleShapeMouseOver,!1,this),this.addEvtListener(t.MouseEvent.MOUSEOUT,this.HandleShapeMouseOut,!1,this),this.addEvtListener(t.MouseEvent.CLICK,this.HandleShapeClick,!1,this)))},t.Overview.prototype.initDefaults=function(){this.Defaults=new i},t.Overview.prototype.setViewportRange=function(t,i,e,o){if(null!=t&&null!=i){var r=this.getDateXPosition(t),s=this.getDateXPosition(i);if(s>r){r<this.getMinimumPositionX()&&(r=this.getMinimumPositionX()),s>this.getMaximumPositionX()&&(s=this.getMaximumPositionX());var a=Math.max(s-r,this.getMinimumWindowWidth()),l=this.getSlidingWindow();this.isRTL()?this.setSlidingWindowPosX(l,this.Width-(r+a)):this.setSlidingWindowPosX(l,r),n._setSlidingWindowWidth(this,l,a)}}if(null!=e&&null!=o){var h=this.getDateYPosition(e),d=this.getDateYPosition(o);if(d>h){h<this.getMinimumPositionY()&&(h=this.getMinimumPositionY()),d>this.getMaximumPositionY()&&(d=this.getMaximumPositionY());var g=Math.max(d-h,this.getMinimumWindowHeight());l=this.getSlidingWindow(),this.setSlidingWindowPosY(l,h),n._setSlidingWindowHeight(this,l,g)}}n._updateBorderAroundSlidingWindow(this)},t.Overview.prototype.isFeatureOff=function(t){return null!=this._featuresOff&&-1!=this._featuresOff.indexOf(t)},t.Overview.prototype.isAnimationOnClick=function(){return!("off"===this._animationOnClick)},t.Overview.prototype.render=function(i,e,o){if(null!=e&&null!=o&&(this.Width=e,this.Height=o),null==i){var r=this.getSlidingWindow();if(this._xMin&&this._xMax){var s=this.getSlidingWindowPosX(r);null!=r&&0!=s&&(this._x1=t.OverviewUtils.getPositionDate(this._xMin,this._xMax,s,this.Width))}this._yMin&&this._yMax&&(s=this.getSlidingWindowPosY(r),null!=r&&0!=s&&(this._y1=t.OverviewUtils.getPositionDate(this._yMin,this._yMax,s,this.Height))),this.removeChildren()}else{this.SetOptions(i);var a=this.Parse(this.Options);this._applyParsedProperties(a)}n.renderOverview(this)},t.Overview.prototype.SetOptions=function(t){this.Options=this.Defaults.calcOptions(t)},t.Overview.prototype.getParser=function(i){return new t.OverviewParser(this)},t.Overview.prototype.Parse=function(t){return this.getParser(t).parse(t)},t.Overview.prototype._applyParsedProperties=function(i){this._xMin=i.xMin,this._xMax=i.xMax,this._x1=i.x1,this._x2=i.x2,this._yMin=i.yMin,this._yMax=i.yMax,this._y1=i.y1,this._y2=i.y2,this._currentTime=i.currentTime,this._animationOnClick=i.animationOnClick,this._leftMargin=Math.max(0,i.leftMargin),this._rightMargin=Math.max(0,i.rightMargin),isNaN(this._leftMargin)&&(this._leftMargin=0),isNaN(this._rightMargin)&&(this._rightMargin=0),this._orientation=i.orientation,this._isRtl=i.isRtl,null!=i.featuresOff&&(this._featuresOff=i.featuresOff.split(" ")),null!=i.minimumWindowSize&&i.minimumWindowSize>0&&(this._minimumWindowSize=i.minimumWindowSize),this._timeAxisInfo=i.timeAxisInfo,null!=i.timeAxisInfo&&(this._ticks=this._timeAxisInfo.ticks),this._formattedTimeRanges=i.formattedTimeRanges,this._borderTopStyle=o.getBorderTopStyle(this.Options),this._borderTopColor=o.getBorderTopColor(this.Options),this._windowBackgroundColor=o.getWindowBackgroundColor(this.Options),this._windowBackgroundAlpha=o.getWindowBackgroundAlpha(this.Options),this._windowBorderTopStyle=o.getWindowBorderTopStyle(this.Options),this._windowBorderRightStyle=o.getWindowBorderRightStyle(this.Options),this._windowBorderBottomStyle=o.getWindowBorderBottomStyle(this.Options),this._windowBorderLeftStyle=o.getWindowBorderLeftStyle(this.Options),this._windowBorderTopColor=o.getWindowBorderTopColor(this.Options),this._windowBorderRightColor=o.getWindowBorderRightColor(this.Options),this._windowBorderBottomColor=o.getWindowBorderBottomColor(this.Options),this._windowBorderLeftColor=o.getWindowBorderLeftColor(this.Options),this._handleTextureColor=o.getHandleTextureColor(this.Options),this._handleFillColor=o.getHandleFillColor(this.Options),this._horHandleBackgroundClass=o.getHandleBackgroundClass(this.Options,!1),this._horHandleSize=o.getHandleSize(this.Options,!1),this._vertHandleBackgroundClass=o.getHandleBackgroundClass(this.Options,!0),this._vertHandleSize=o.getHandleSize(this.Options,!0),this._overviewBackgroundColor=o.getOverviewBackgroundColor(this.Options),this._currentTimeIndicatorColor=o.getCurrentTimeIndicatorColor(this.Options),this._timeIndicatorColor=o.getTimeIndicatorColor(this.Options),this._timeAxisBarColor=o.getTimeAxisBarColor(this.Options),this._timeAxisBarOpacity=o.getTimeAxisBarAlpha(this.Options),this._leftFilterPanelColor=o.getLeftFilterPanelColor(this.Options),this._leftFilterPanelAlpha=o.getLeftFilterPanelAlpha(this.Options),this._rightFilterPanelColor=o.getRightFilterPanelColor(this.Options),this._rightFilterPanelAlpha=o.getRightFilterPanelAlpha(this.Options),this._labelStyle=new t.CSSStyle("font-weight:bold")},t.Overview.prototype.getDateXPosition=function(i){return Math.max(this.getMinimumPositionX(),t.OverviewUtils.getDatePosition(this._xMin,this._xMax,i,this.getOverviewWidth())+this._leftMargin)},t.Overview.prototype.getDateYPosition=function(i){return Math.max(this.getMinimumPositionY(),t.OverviewUtils.getDatePosition(this._yMin,this._yMax,i,this.getOverviewHeight()))},t.Overview.prototype.getXPositionDate=function(i){return t.OverviewUtils.getPositionDate(this._xMin,this._xMax,Math.max(this.getMinimumPositionX()-this._leftMargin,i-this._leftMargin),this.getOverviewWidth())},t.Overview.prototype.getYPositionDate=function(i){return t.OverviewUtils.getPositionDate(this._yMin,this._yMax,Math.max(this.getMinimumPositionY(),i),this.getOverviewHeight())},t.Overview.prototype.isRTL=function(){return"true"==this._isRtl},t.Overview.prototype.isHorizontalRTL=function(){return this.isRTL()&&!this.isVertical()},t.Overview.prototype.isVertical=function(){return"vertical"==this._orientation},t.Overview.prototype.isOverviewAbove=function(){return"above"==this.Options.overviewPosition},t.Overview.prototype.setMargins=function(t,i){!isNaN(t)&&null!=t&&t>0&&(this._leftMargin=t),!isNaN(i)&&null!=i&&i>0&&(this._rightMargin=i)},t.Overview.prototype.getOverviewSize=function(){return this.isVertical()?this.Height-this._leftMargin-this._rightMargin:this.Width-this._leftMargin-this._rightMargin},t.Overview.prototype.getOverviewWidth=function(){return this.Width-this._leftMargin-this._rightMargin},t.Overview.prototype.getOverviewHeight=function(){return this.Height},t.Overview.prototype.getMinimumPositionX=function(){return this._leftMargin},t.Overview.prototype.getMinimumPositionY=function(){return 0},t.Overview.prototype.getMaximumPositionX=function(){return this.Width-this._rightMargin},t.Overview.prototype.getMaximumPositionY=function(){return this.Height},t.Overview.prototype.getMinimumWindowWidth=function(){return null!=this._minWinSize?this._minWinSize:null!=this._minimumWindowSize?(this._minWinSize=t.OverviewUtils.getDatePosition(this._xMin,this._xMax,this._xMin+this._minimumWindowSize,this.getOverviewWidth()),this._minWinSize):t.Overview.MIN_WINDOW_SIZE},t.Overview.prototype.getMinimumWindowHeight=function(){return null!=this._minWinSize?this._minWinSize:null!=this._minimumWindowSize?(this._minWinSize=t.OverviewUtils.getDatePosition(this._yMin,this._yMax,this._yMin+this._minimumWindowSize,this.getOverviewHeight()),this._minWinSize):t.Overview.MIN_WINDOW_SIZE},t.Overview.prototype.getMaximumWindowWidth=function(){return this.Width},t.Overview.prototype.getMaximumWindowHeight=function(){return this.Height},t.Overview.prototype.getGrippySize=function(){return 10},t.Overview.prototype.getHandleStart=function(){return t.OverviewUtils.supportsTouch()?this.getHandleSize()/2:0},t.Overview.prototype.getHandleSize=function(){return t.OverviewUtils.supportsTouch()?30:10},t.Overview.prototype.isHandle=function(t){var i=t.getId();return"lh"==i||"rh"==i||"lhb"==i||"rhb"==i||"th"==i||"bh"==i||"thb"==i||"bhb"==i||"hgrpy"==i||"vgrpy"==i||"lbgrh"==i||"rbgrh"==i||null!=t.getParent()&&("hgrpy"==t.getParent().getId()||"vgrpy"==t.getParent().getId())},t.Overview.prototype.isLeftOrRightHandle=function(t){var i=t.getId();return"lh"==i||"rh"==i||"lhb"==i||"rhb"==i||"hgrpy"==i||"lbgrh"==i||"rbgrh"==i||null!=t.getParent()&&"hgrpy"==t.getParent().getId()},t.Overview.prototype.isTopOrBottomHandle=function(t){var i=t.getId();return"th"==i||"bh"==i||"thb"==i||"bhb"==i||"vgrpy"==i||null!=t.getParent()&&"vgrpy"==t.getParent().getId()},t.Overview.prototype.getTimeAxisWidth=function(){if(null==this._timeAxisInfo)return 0;if(null==this._timeAxisWidth){var i=parseInt(this._timeAxisInfo.width,10);!isNaN(i)&&i<this.Width?this._timeAxisWidth=i:this._timeAxisWidth=t.Overview.DEFAULT_VERTICAL_TIMEAXIS_SIZE}return this._timeAxisWidth},t.Overview.prototype.getTimeAxisHeight=function(){if(null==this._timeAxisInfo)return 0;if(null==this._timeAxisHeight){var i=parseInt(this._timeAxisInfo.height,10);!isNaN(i)&&i<this.Height?this._timeAxisHeight=i:this._timeAxisHeight=t.Overview.DEFAULT_HORIZONTAL_TIMEAXIS_SIZE}return this._timeAxisHeight},t.Overview.prototype.getPageX=function(i){return t.OverviewUtils.supportsTouch()&&null!=i.targetTouches?i.targetTouches.length>0?i.targetTouches[0].pageX:null:i.pageX},t.Overview.prototype.getPageY=function(i){return t.OverviewUtils.supportsTouch()&&null!=i.targetTouches?i.targetTouches.length>0?i.targetTouches[0].pageY:null:i.pageY},t.Overview.prototype.isBackgroundRendered=function(){return!0},t.Overview.prototype.isLeftAndRightFilterRendered=function(){return!1},t.Overview.prototype.getSlidingWindow=function(){return this.getChildAt(1)},t.Overview.prototype.getSlidingWindowWidth=function(){if(this.isHorizontalScrollingEnabled()){var i=Math.max(this.getMinimumPositionX(),t.OverviewUtils.getDatePosition(this._xMin,this._xMax,this._x1,this.Width));return Math.min(this.getMaximumPositionX(),Math.max(this.getMinimumPositionX(),t.OverviewUtils.getDatePosition(this._xMin,this._xMax,this._x2,this.Width)))-i}return this.Width},t.Overview.prototype.getSlidingWindowHeight=function(){if(this.isVerticalScrollingEnabled()){var i=Math.max(this.getMinimumPositionY(),t.OverviewUtils.getDatePosition(this._yMin,this._yMax,this._y1,this.Height));return Math.min(this.getMaximumPositionY(),Math.max(this.getMinimumPositionY(),t.OverviewUtils.getDatePosition(this._yMin,this._yMax,this._y2,this.Height)))-i}return this.Height},t.Overview.prototype.getLeftBackground=function(){return this.isLeftAndRightFilterRendered()?this.getChildAt(3):null},t.Overview.prototype.getRightBackground=function(){return this.isLeftAndRightFilterRendered()?this.getChildAt(4):null},t.Overview.prototype.getLeftBackgroundHandle=function(){return this.isLeftAndRightFilterRendered()&&!this.isFeatureOff("zoom")?this.getChildAt(5):null},t.Overview.prototype.getRightBackgroundHandle=function(){return this.isLeftAndRightFilterRendered()&&!this.isFeatureOff("zoom")?this.getChildAt(6):null},t.Overview.prototype.getLeftHandle=function(){return this._leftHandle},t.Overview.prototype.getRightHandle=function(){return this._rightHandle},t.Overview.prototype.getLeftTopBar=function(){var t=this._lastChildIndex-2;return this.getChildAt(this.getNumChildren()-t)},t.Overview.prototype.getRightTopBar=function(){var t=this._lastChildIndex-3;return this.getChildAt(this.getNumChildren()-t)},t.Overview.prototype.getBottomBar=function(){var t=this._lastChildIndex-4;return this.getChildAt(this.getNumChildren()-t)},t.Overview.prototype.getTopBar=function(){var t=this._lastChildIndex-5;return this.getChildAt(this.getNumChildren()-t)},t.Overview.prototype.setLinePos=function(t,i,e){this.isVertical()?(-1!=i&&t.setY1(i),-1!=e&&t.setY2(e)):(-1!=i&&t.setX1(i),-1!=e&&t.setX2(e))},t.Overview.prototype.setLinePosX=function(t,i,e){-1!=i&&t.setX1(i),-1!=e&&t.setX2(e)},t.Overview.prototype.setLinePosY=function(t,i,e){-1!=i&&t.setY1(i),-1!=e&&t.setY2(e)},t.Overview.prototype.getLinePos1=function(t){return this.isVertical()?t.getY1():t.getX1()},t.Overview.prototype._findDrawable=function(t){var i=t.target;if(null!=i){var e=i.getId();if(null==e)return null;if("_border"==e.substr(e.length-7))return this.getChildAfter(i);if("tick"!=e.substr(0,4)&&"ltb"!=e&&"rtb"!=e&&"bb"!=e&&"tab"!=e)return i}return null},t.Overview.prototype.isMovable=function(t){return!("window"!=t.getId()&&"ftr"!=t.getId()&&"sta"!=t.getId()&&!this.isHandle(t))},t.Overview.prototype.setRectPos=function(t,i){this.isVertical()?t.setY(i):t.setX(i)},t.Overview.prototype.getRectPos=function(t){return this.isVertical()?t.getY():t.getX()},t.Overview.prototype.getRectSize=function(t){return this.isVertical()?t.getHeight():t.getWidth()},t.Overview.prototype.setRectSize=function(t,i){this.isVertical()?t.setHeight(i):t.setWidth(i)},t.Overview.prototype.getSlidingWindowPos=function(t){return this.isVertical()?t.getTranslateY():t.getTranslateX()},t.Overview.prototype.getSlidingWindowPosX=function(t){return t.getTranslateX()},t.Overview.prototype.getSlidingWindowPosY=function(t){return t.getTranslateY()},t.Overview.prototype.setSlidingWindowPosX=function(i,e){if(e=Math.max(this.getMinimumPositionX(),e),i.setTranslateX(e),this.isLeftAndRightFilterRendered()){this.getLeftBackground().setWidth(e);var n=e+this.getSlidingWindowSize(i),o=this.getRightBackground();if(o.setX(n),o.setWidth(Math.max(0,this.Width-n)),t.OverviewUtils.supportsTouch()&&!this.isFeatureOff("zoom")){var r=this.getHandleStart();this.getLeftBackgroundHandle().setX(e-r),this.getRightBackgroundHandle().setX(n)}}},t.Overview.prototype.setSlidingWindowPosY=function(t,i){i=Math.max(this.getMinimumPositionY(),i),t.setTranslateY(i)},t.Overview.prototype.getSlidingWindowSize=function(t){return this.getRectSize(t)},t.Overview.prototype.renderData=function(t,i){},t.Overview.prototype.animateSlidingWindow=function(i,e){var n=this.getSlidingWindow();if(null!=i&&i!=this.getSlidingWindowPosX(n)||null!=e&&e!=this.getSlidingWindowPosY(n)){var o=this.getLeftHandle(),r=this.getRightHandle(),s=this.getLeftTopBar(),a=this.getRightTopBar(),l=this.getBottomBar(),h=this.getTopBar(),d=!1,g=this.isAnimationOnClick()?new t.Animator(this.getCtx(),.5,0,t.Easing.linear):null;if(this.isVerticalScrollingEnabled()&&null!=e){var u=n.getTranslateY,v=n.setTranslateY,w=o.getY1,c=o.setY1,p=o.getY2,_=o.setY2,f=r.getY1,m=r.setY1,P=r.getY2,S=r.setY2,y=l.getY1,C=l.setY1,O=l.getY2,x=l.setY2,T=h.getY1,W=h.setY1,M=h.getY2,H=h.setY2,b=this.getMinimumPositionY(),D=this.getMaximumPositionY(),B=n.getHeight();e=Math.max(b,Math.min(D-B,e)),this.animateProperty(g,n,u,v,e),this.isVertical()?(this.animateProperty(g,o,w,c,e),this.animateProperty(g,o,p,_,e),this.animateProperty(g,r,f,m,e+B),this.animateProperty(g,r,P,S,e+B),this.animateProperty(g,l,y,C,e),this.animateProperty(g,h,T,W,e),this.animateProperty(g,l,O,x,e+B),this.animateProperty(g,h,M,H,e+B),this.animateProperty(g,s,s.getY2,s.setY2,e+1),this.animateProperty(g,a,a.getY1,a.setY1,e+B-1)):(this.animateProperty(g,o,w,c,e),this.animateProperty(g,o,p,_,e+B),this.animateProperty(g,r,f,m,e),this.animateProperty(g,r,P,S,e+B),this.animateProperty(g,l,y,C,e+B),this.animateProperty(g,h,T,W,e),this.animateProperty(g,l,O,x,e+B),this.animateProperty(g,h,M,H,e)),d=!0}if(this.isHorizontalScrollingEnabled()&&null!=i){var X=n.getTranslateX,L=n.setTranslateX,A=o.getX1,E=o.setX1,R=o.getX2,Y=o.setX2,I=r.getX1,k=r.setX1,F=r.getX2,U=r.setX2,z=l.getX1,N=l.setX1,V=l.getX2,G=l.setX2,j=h.getX1,Z=h.setX1,K=h.getX2,q=h.setX2,J=this.getMinimumPositionX(),Q=this.getMaximumPositionX(),$=n.getWidth();i=Math.max(J,Math.min(Q-$,i)),this.animateProperty(g,n,X,L,i),this.animateProperty(g,o,A,E,i),this.animateProperty(g,o,R,Y,i),this.animateProperty(g,r,I,k,i+$),this.animateProperty(g,r,F,U,i+$),this.isVertical()||(this.animateProperty(g,s,s.getX2,s.setX2,i+1),this.animateProperty(g,a,a.getX1,a.setX1,i+$-1)),this.animateProperty(g,l,z,N,i),this.animateProperty(g,h,j,Z,i),this.animateProperty(g,l,V,G,i+$),this.animateProperty(g,h,K,q,i+$),d=!0}if(this.isLeftAndRightFilterRendered()){var tt=this.getLeftBackground(),it=tt.getWidth,et=tt.setWidth;this.animateProperty(g,tt,it,et,i);var nt=i+$,ot=this.getRightBackground(),rt=ot.getWidth,st=ot.setWidth,at=ot.getX,lt=ot.setX;if(this.animateProperty(g,ot,rt,st,this.Width-nt),this.animateProperty(g,ot,at,lt,nt),t.OverviewUtils.supportsTouch()&&!this.isFeatureOff("zoom")){var ht=this.getHandleStart(),dt=this.getLeftBackgroundHandle(),gt=dt.getX,ut=dt.setX,vt=this.getRightBackgroundHandle(),wt=vt.getX,ct=vt.setX;this.animateProperty(g,dt,gt,ut,i-ht),this.animateProperty(g,vt,wt,ct,nt)}d=!0}null!=g&&d&&g.play()}},t.Overview.prototype.animateProperty=function(i,e,n,o,r){null!=i?i.addProp(t.Animator.TYPE_NUMBER,e,n,o,r):o.call(e,r)},t.Overview.prototype.HandleShapeMouseOver=function(i){var e=this._findDrawable(i);if(e&&"bg"!=e.getId()&&"ocd"!=e.getId())if("label"==e.getId().substr(0,5)&&(e instanceof t.OutputText||e instanceof t.BackgroundOutputText))e.isTruncated()&&this.getCtx().getTooltipManager().showDatatip(i.pageX,i.pageY,e._rawText,"#000000");else if("window"!=e.getId()&&"ftr"!=e.getId()&&"arr"!=e.getId()&&!this.isHandle(e))return e},t.Overview.prototype.HandleShapeMouseOut=function(t){null==this._moveDrawable&&this.setCursor("default");var i=this._findDrawable(t);if(null!=i)return i},t.Overview.prototype.HandleShapeClick=function(i,e,n){i.stopPropagation();var o=this._findDrawable(i);if(o&&"window"!=o.getId()&&!this.isHandle(o)){if("bg"!=o.getId()&&"label"!=o.getId().substr(0,5)&&"ocd"!=o.getId()&&"lbg"!=o.getId()&&"rbg"!=o.getId())return o;null==e&&(e=i.pageX),null==n&&(n=i.pageY);var r=this.getCtx().pageToStageCoords(e,n);r=this.stageToLocal(r);var s,a,l,h,d=this.getSlidingWindow();if(this.isVerticalScrollingEnabled())var g=r.y,u=this.Height,v=g-d.getHeight()/2;if(this.isHorizontalScrollingEnabled()){var w=r.x,c=this.Width,p=w-d.getWidth()/2;this.isRTL()&&(w=c-w)}if(this.animateSlidingWindow(p,v),null!=p){var _=d.getWidth();p=Math.max(this.getMinimumPositionX(),Math.min(p,c-_)),this.isRTL()?(s=this.getXPositionDate(c-(p+_)),a=this.getXPositionDate(c-p)):(s=this.getXPositionDate(p),a=this.getXPositionDate(p+_))}if(null!=v){var f=d.getHeight();v=Math.max(this.getMinimumPositionY(),Math.min(v,u-f)),l=this.getYPositionDate(v),h=this.getYPositionDate(v+f)}var m=t.EventFactory.newOverviewEvent("scrollTime",s,a,l,h);this.dispatchEvent(m)}},t.Overview.prototype.beginDragPan=function(i,e,n){var o=this._findDrawable(i);if(null!=o&&this.isMovable(o)){if("ftr"!=o.getId()&&"sta"!=o.getId()||(o=this.getSlidingWindow()),this._initX=e,this._initY=n,this.isHandle(o)){var r=this.getSlidingWindow();"hgrpy"!=o.getParent().getId()&&"vgrpy"!=o.getParent().getId()||(o=o.getParent());var s=o.getId();"hgrpy"!=s&&"vgrpy"!=s||(s=(o=r.getChildBefore(o)).getId()),"lh"!=s&&"rh"!=s&&"th"!=s&&"bh"!=s||(s=(o=r.getChildBefore(o)).getId()),"lbgrh"==s&&(o=r.getChildAt(0)),"rbgrh"==s&&(o=r.getChildAt(r.getNumChildren()-3)),this.isLeftOrRightHandle(o)?(this._isHorizontalResize=!0,this.isRTL()?(this._oldEndPosX=this.Width-r.getX(),this._oldStartPosX=this._oldEndPosX-r.getWidth()):(this._oldStartPosX=r.getX(),this._oldEndPosX=this._oldStartPosX+r.getWidth()),t.OverviewUtils.supportsTouch()||(o.setX(0-t.Overview.HANDLE_PADDING_SIZE),o.setWidth(2*(o.getWidth()+t.Overview.HANDLE_PADDING_SIZE)))):(this._isHorizontalResize=!1,this._oldStartPosY=r.getY(),this._oldEndPosY=this._oldStartPosY+r.getHeight(),t.OverviewUtils.supportsTouch()||(o.setY(0-t.Overview.HANDLE_PADDING_SIZE),o.setHeight(2*(o.getHeight()+t.Overview.HANDLE_PADDING_SIZE)))),this.overrideCursors(o.getCursor())}this._moveDrawable=o;var a=t.EventFactory.newOverviewEvent("dropCallback");return this.dispatchEvent(a),!0}return!1},t.Overview.prototype.overrideCursors=function(t){var i=this.getSlidingWindow();if(null!=i&&i.setCursor(t),this.isLeftAndRightFilterRendered()){var e=this.getLeftBackground(),n=this.getRightBackground();null!=e&&null!=n&&(e.setCursor(t),n.setCursor(t))}},t.Overview.prototype.resetCursors=function(){var t=this.getSlidingWindow();if(null!=t&&t.setCursor("move"),this.isLeftAndRightFilterRendered()){var i=this.getLeftBackground(),e=this.getRightBackground();null!=i&&null!=e&&(i.setCursor("default"),e.setCursor("default"))}},t.Overview.prototype.endDragPan=function(){null!=this._moveDrawable&&1==this._isDragPanning&&("window"==this._moveDrawable.getId()?this.handleWindowDrag("scrollEnd"):this.isHandle(this._moveDrawable)&&(this.finishHandleDrag(0,0),t.OverviewUtils.supportsTouch()||(this.isTopOrBottomHandle(this._moveDrawable)?(this._moveDrawable.setY(0),this._moveDrawable.setHeight(this.getHandleSize())):this.isLeftOrRightHandle(this._moveDrawable)&&(this._moveDrawable.setX(0),this._moveDrawable.setWidth(this.getHandleSize()))),this.resetCursors()),this._isDragPanning=!1,this._moveDrawable=null,this._initX=-1)},t.Overview.prototype.contDragPan=function(t,i,e){if(null!=this._moveDrawable&&-1!=this._initX){this._isDragPanning=!0;var n=i-this._initX,o=e-this._initY;this._initX=i,this._initY=e,"window"==this._moveDrawable.getId()?this.handleWindowDrag("scrollPos",n,o):"lh"==this._moveDrawable.getId()||"lhb"==this._moveDrawable.getId()?this.handleLeftOrRightHandleDragPositioning(t,n,!0):"rh"==this._moveDrawable.getId()||"rhb"==this._moveDrawable.getId()?this.handleLeftOrRightHandleDragPositioning(t,n,!1):"th"==this._moveDrawable.getId()||"thb"==this._moveDrawable.getId()?this.handleTopOrBottomHandleDragPositioning(t,o,!0):"bh"!=this._moveDrawable.getId()&&"bhb"!=this._moveDrawable.getId()||this.handleTopOrBottomHandleDragPositioning(t,o,!1)}},t.Overview.prototype.HandleTouchStart=function(t){var i=t.touches;this._touchStartX=i[0].pageX,this._touchStartY=i[0].pageY,2==i.length&&(t.preventDefault(),this._touchStartX2=i[1].pageX,this._touchStartY2=i[1].pageY,Math.abs(this._touchStartY-this._touchStartY2)<20?this._counter=0:(this._touchStartX=null,this._touchStartY=null,this._touchStartX2=null,this._touchStartY2=null))},t.Overview.prototype.HandleTouchMove=function(t){t.preventDefault();var i=t.touches;if(null!=this._touchStartX2&&null!=this._touchStartY2){if(this._counter<50)return void this._counter++;var e=i[1].pageX-this._touchStartX2;this.handleRightHandleDragPositioning(null,e,0),this._touchStartX2=i[1].pageX,this._counter=0}else{var n=Math.abs(this._touchStartX-i[0].pageX),o=Math.abs(this._touchStartY-i[0].pageY);(n>3||o>3)&&(this._touchStartX=null,this._touchStartY=null)}},t.Overview.prototype.HandleTouchEnd=function(t){null!=this._touchStartX2&&null!=this._touchStartY2?this.finishHandleDrag(0,0):null!=this._touchStartX&&null!=this._touchStartY&&this.HandleShapeClick(t,this._touchStartX,this._touchStartY),this._touchStartX=null,this._touchStartY=null,this._touchStartX2=null,this._touchStartY2=null},t.Overview.prototype.stopDragAction=function(){this.endDragPan()},t.Overview.prototype.handleWindowDrag=function(t,i,e){var o,r,s,a,l=this.getSlidingWindow(),h=!1,d=this.getSlidingWindowPosX(l),g=this.getSlidingWindowPosY(l),u=l.getWidth(),v=l.getHeight();if("scrollPos"===t){if(this.isHorizontalScrollingEnabled()&&0!==i){var w=this.getMinimumPositionX(),c=this.getMaximumPositionX();d+i<=w?this.setSlidingWindowPosX(l,w):d+u+i>=c?this.setSlidingWindowPosX(l,c-u):this.setSlidingWindowPosX(l,d+i);var p=this.getSlidingWindowPosX(l);p!==d&&(d=p,h=!0)}if(this.isVerticalScrollingEnabled()&&0!==e){var _=this.getMinimumPositionY(),f=this.getMaximumPositionY();g+e<=_?this.setSlidingWindowPosY(l,_):g+v+e>=f?this.setSlidingWindowPosY(l,f-v):this.setSlidingWindowPosY(l,g+e);var m=this.getSlidingWindowPosY(l);m!==g&&(g=m,h=!0)}h&&n._updateBorderAroundSlidingWindow(this)}this.isHorizontalScrollingEnabled()&&(this.isRTL()?(o=this.getXPositionDate(this.Width-(d+u)),r=this.getXPositionDate(this.Width-d)):(o=this.getXPositionDate(d),r=this.getXPositionDate(d+u))),this.isVerticalScrollingEnabled()&&(s=this.getYPositionDate(g),a=this.getYPositionDate(g+v)),this.fireScrollEvent(t,o,r,s,a)},t.Overview.prototype.fireScrollEvent=function(i,e,n,o,r){var s,a,l,h;this.isHorizontalScrollingEnabled()&&(s=e,a=n),this.isVerticalScrollingEnabled()&&(l=o,h=r);var d=t.EventFactory.newOverviewEvent(i,s,a,l,h);this.dispatchEvent(d)},t.Overview.prototype.handleLeftOrRightHandleDragPositioning=function(i,e,o){if(0!=e){var r=this.getSlidingWindow(),s=this.getSlidingWindowPosX(r),a=r.getWidth();if(o){if(a-e<=this.getMinimumWindowWidth())return;if(s+e<=this.getMinimumPositionX())return;var l=this.getCtx().pageToStageCoords(this.getPageX(i),this.getPageY(i)).x;if(l=this.stageToLocal(l),e>0&&l<=s)return;if(e<0&&l>=s)return;this.setSlidingWindowPosX(r,s+e),n._setSlidingWindowWidth(this,r,a-e)}else{if(a+e<=this.getMinimumWindowWidth())return;if(s+a+e>=this.getMaximumPositionX())return;if(l=this.getCtx().pageToStageCoords(this.getPageX(i),this.getPageY(i)).x,l=this.stageToLocal(l),e>0&&l<=s+a)return;if(e<0&&l>=s+a)return;n._setSlidingWindowWidth(this,r,a+e)}if(n._updateBorderAroundSlidingWindow(this),this.isRangeChangingSupported()){var h,d;this.isRTL()?(h=this.getXPositionDate(this.Width-(this.getSlidingWindowPosX(r)+r.getWidth())),d=this.getXPositionDate(this.Width-this.getSlidingWindowPosX(r))):(h=this.getXPositionDate(this.getSlidingWindowPosX(r)),d=this.getXPositionDate(this.getSlidingWindowPosX(r)+r.getWidth()));var g=t.EventFactory.newOverviewEvent("rangeChanging",h,d);this.dispatchEvent(g)}}},t.Overview.prototype.handleTopOrBottomHandleDragPositioning=function(i,e,o){if(0!=e){var r=this.getSlidingWindow(),s=this.getSlidingWindowPosY(r),a=r.getHeight();if(o){if(a-e<=this.getMinimumWindowHeight())return;if(s+e<=this.getMinimumPositionY())return;var l=this.getCtx().pageToStageCoords(this.getPageX(i),this.getPageY(i)).y;if(l=this.stageToLocal(l),e>0&&l<=s)return;if(e<0&&l>=s)return;this.setSlidingWindowPosY(r,s+e),n._setSlidingWindowHeight(this,r,a-e)}else{if(a+e<=this.getMinimumWindowHeight())return;if(s+a+e>=this.getMaximumPositionY())return;if(l=this.getCtx().pageToStageCoords(this.getPageX(i),this.getPageY(i)).y,l=this.stageToLocal(l),e>0&&l<=s+a)return;if(e<0&&l>=s+a)return;n._setSlidingWindowHeight(this,r,a+e)}if(n._updateBorderAroundSlidingWindow(this),this.isRangeChangingSupported()){var h=this.getYPositionDate(this.getSlidingWindowPosY(r)),d=this.getYPositionDate(this.getSlidingWindowPosY(r)+r.getHeight()),g=t.EventFactory.newOverviewEvent("rangeChanging",void 0,void 0,h,d);this.dispatchEvent(g)}}},t.Overview.prototype.isHorizontalScrollingEnabled=function(){return null!=this._xMin&&null!=this._xMax},t.Overview.prototype.isVerticalScrollingEnabled=function(){return null!=this._yMin&&null!=this._yMax},t.Overview.prototype.isRangeChangingSupported=function(){return!0},t.Overview.prototype.finishHandleDrag=function(i,e){var n,o=this.getSlidingWindow();if(this._isHorizontalResize){var r=this.getXPositionDate(this._oldStartPosX),s=this.getXPositionDate(this._oldEndPosX);if(this.isRTL())var a=this.getXPositionDate(this.Width-(this.getSlidingWindowPosX(o)+o.getWidth())),l=this.getXPositionDate(this.Width-this.getSlidingWindowPosX(o));else a=this.getXPositionDate(this.getSlidingWindowPosX(o)),l=this.getXPositionDate(this.getSlidingWindowPosX(o)+o.getWidth());n=t.EventFactory.newOverviewEvent("rangeChange",a,l,void 0,void 0,r,s)}else{var h=this.getYPositionDate(this._oldStartPosY),d=this.getYPositionDate(this._oldEndPosY),g=this.getYPositionDate(this.getSlidingWindowPosY(o)),u=this.getYPositionDate(this.getSlidingWindowPosY(o)+o.getHeight());n=t.EventFactory.newOverviewEvent("rangeChange",void 0,void 0,g,u,void 0,void 0,h,d)}this.dispatchEvent(n)},t.Overview.prototype.dispatchEvent=function(t){this._callback.call(this._callbackObj,t,this)},t.Overview.prototype.destroy=function(){this.EventManager&&(this.EventManager.removeListeners(this),this.EventManager.destroy(),this.EventManager=null),t.OverviewUtils.supportsTouch()?(this.removeEvtListener(t.TouchEvent.TOUCHSTART,this.HandleTouchStart,!1,this),this.removeEvtListener(t.TouchEvent.TOUCHMOVE,this.HandleTouchMove,!1,this),this.removeEvtListener(t.TouchEvent.TOUCHEND,this.HandleTouchEnd,!1,this),this.removeEvtListener(t.MouseEvent.CLICK,this.HandleShapeClick,!1,this)):(this.removeEvtListener(t.MouseEvent.MOUSEOVER,this.HandleShapeMouseOver,!1,this),this.removeEvtListener(t.MouseEvent.MOUSEOUT,this.HandleShapeMouseOut,!1,this),this.removeEvtListener(t.MouseEvent.CLICK,this.HandleShapeClick,!1,this),this.removeEvtListener(t.KeyboardEvent.KEYDOWN,this.HandleKeyDown,!1,this),this.removeEvtListener(t.KeyboardEvent.KEYUP,this.HandleKeyUp,!1,this)),t.Overview.superclass.destroy.call(this)};var i=function(){this.Init({alta:i.VERSION_1})};t.Obj.createSubclass(i,t.BaseComponentDefaults),i.VERSION_1={overviewPosition:"below",style:{currentTimeIndicatorColor:"#c000d1",handleFillColor:"#ffffff",handleTextureColor:"#b3c6db",leftFilterPanelAlpha:.7,leftFilterPanelColor:"#ffffff",overviewBackgroundColor:"#e6ecf3",rightFilterPanelAlpha:.7,rightFilterPanelColor:"#ffffff",timeAxisBarColor:"#e5e5e5",timeAxisBarAlpha:1,timeIndicatorColor:"#bcc7d2",windowBackgroundAlpha:1,windowBackgroundColor:"#ffffff",windowBorderBottomColor:"#4f4f4f",windowBorderBottomStyle:"solid",windowBorderLeftColor:"#4f4f4f",windowBorderLeftStyle:"solid",windowBorderRightColor:"#4f4f4f",windowBorderRightStyle:"solid",windowBorderTopColor:"#4f4f4f",windowBorderTopStyle:"solid"}},t.OverviewParser=function(t){this.Init(t)},t.Obj.createSubclass(t.OverviewParser,t.Obj),t.OverviewParser.prototype.Init=function(t){this._view=t},t.OverviewParser.prototype.parse=function(t){var i=t;return this.ParseRootAttributes(i)},t.OverviewParser.prototype.ParseRootAttributes=function(i){var e=new Object;return e.animationOnClick=i.animationOnClick,null!=i.xMin&&(e.xMin=i.xMin),null!=i.xMax&&(e.xMax=i.xMax),null!=i.x1&&(e.x1=i.x1),null!=i.x2&&(e.x2=i.x2),null!=i.yMin&&(e.yMin=i.yMin),null!=i.yMax&&(e.yMax=i.yMax),null!=i.y1&&(e.y1=i.y1),null!=i.y2&&(e.y2=i.y2),null!=i.currentTime&&(e.currentTime=i.currentTime),e.orientation="horizontal",null!=i.orientation&&(e.orientation=i.orientation),e.featuresOff=i.featuresOff,e.minimumWindowSize=i.minimumWindowSize,e.leftMargin=i.leftMargin,e.rightMargin=i.rightMargin,e.overviewPosition="below",e.selectionMode="none",e.isRtl=t.Agent.isRightToLeft(this._view.getCtx()).toString(),null!=i.rtl&&(e.isRtl=i.rtl.toString()),e},t.OverviewParser.prototype.calculateWidth=function(t,i,e,n,o){var r=o*(i-t),s=n-e;return 0==r||0==s?0:r/s};var e=function(t){this.Init(t.getCtx(),t.processEvent,t),this._overview=t};t.Obj.createSubclass(e,t.EventManager),e.prototype.addListeners=function(i){t.SvgDocumentUtils.addDragListeners(this._overview,this._onDragStart,this._onDragMove,this._onDragEnd,this)},e.prototype._onDragStart=function(i){return t.Agent.isTouchDevice()?this._onTouchDragStart(i):this._onMouseDragStart(i)},e.prototype._onDragMove=function(i){return t.Agent.isTouchDevice()?this._onTouchDragMove(i):this._onMouseDragMove(i)},e.prototype._onDragEnd=function(i){return t.Agent.isTouchDevice()?this._onTouchDragEnd(i):this._onMouseDragEnd(i)},e.prototype._getRelativePosition=function(i,e){return this._stageAbsolutePosition||(this._stageAbsolutePosition=this._context.getStageAbsolutePosition()),new t.Point(i-this._stageAbsolutePosition.x,e-this._stageAbsolutePosition.y)},e.prototype._onMouseDragStart=function(i){if(i.button!=t.MouseEvent.RIGHT_CLICK_BUTTON){var e=this._getRelativePosition(i.pageX,i.pageY);return this._overview.beginDragPan(i,e.x,e.y)}return!1},e.prototype._onMouseDragMove=function(t){var i=this._getRelativePosition(t.pageX,t.pageY);return this._overview.contDragPan(t,i.x,i.y),!0},e.prototype._onMouseDragEnd=function(t){this._overview.endDragPan(),this._stageAbsolutePosition=null},e.prototype._onTouchDragStart=function(t){var i=t.touches;if(t.stopPropagation(),1==i.length){var e=this._getRelativePosition(i[0].pageX,i[0].pageY);return t.preventDefault(),this._overview.beginDragPan(t,e.x,e.y)}return!1},e.prototype._onTouchDragMove=function(t){var i=t.touches;if(1==i.length){var e=this._getRelativePosition(i[0].pageX,i[0].pageY);this._overview.contDragPan(t,e.x,e.y),t.preventDefault()}t.stopPropagation()},e.prototype._onTouchDragEnd=function(i){this._overview.endDragPan(),t.EventManager.consumeEvent(i),this._stageAbsolutePosition=null};var n=new Object;t.Obj.createSubclass(n,t.Obj),n.renderOverview=function(t){t.isBackgroundRendered()&&n._renderBackground(t);var i=null!=t._callback||null!=t._callbackObj;i&&n._renderSlidingWindow(t),n._renderTimeAxis(t),n._parseFilledTimeRanges(t),n._updateCurrentTime(t),t.renderData(t.Width,t.Height),i&&(n._createBorderAroundSlidingWindow(t),n._updateSlidingWindow(t))},n._renderBackground=function(i){var e=new t.Rect(i.getCtx(),0,0,i.Width,i.Height,"bg");e.setSolidFill(i._overviewBackgroundColor),e.setPixelHinting(!0),i.addChild(e)},n._renderSlidingWindow=function(i){var e=i.Width,o=i.Height,r=new t.Rect(i.getCtx(),0,0,e,o,"window");if(r.setSolidFill(i._windowBackgroundColor,i._windowBackgroundAlpha),r.setPixelHinting(!0),!i.isFeatureOff("zoom")){var s=i.getHandleSize(),a=i.getHandleStart(),l=i.getGrippySize();if(i.isVerticalScrollingEnabled()){var h=i.getSlidingWindowWidth(),d=t.PathUtils.moveTo(0,0)+t.PathUtils.quadTo(3,6,8,8)+t.PathUtils.lineTo(28,8)+t.PathUtils.quadTo(33,6,36,0);t.PathUtils.closePath();var g=t.PathUtils.moveTo(0,0)+t.PathUtils.quadTo(3,-6,8,-8)+t.PathUtils.lineTo(28,-8)+t.PathUtils.quadTo(33,-6,36,0);t.PathUtils.closePath();var u=new t.Rect(i.getCtx(),0,0,h,s,"thb"),v=new t.Rect(i.getCtx(),0,0,h,s,"bhb");if(C="row-resize",i._vertHandleBackgroundClass)var w=n._createGrippyImage(i,h,l,!0),c=n._createGrippyImage(i,h,l,!0);else w=n._createGrippy(i,!0),c=n._createGrippy(i,!0);u.setSolidFill(i._windowBackgroundColor,0),v.setSolidFill(i._windowBackgroundColor,0),u.setPixelHinting(!0),v.setPixelHinting(!0);var p=new t.Path(i.getCtx(),d,"th"),_=new t.Path(i.getCtx(),g,"bh");p.setSolidFill(i._handleFillColor),p.setSolidStroke(i._handleFillColor),_.setSolidFill(i._handleFillColor),_.setSolidStroke(i._handleFillColor),i._windowBackgroundColor==i._handleFillColor&&(p.setPixelHinting(!0),_.setPixelHinting(!0)),u.setCursor(C),v.setCursor(C),p.setCursor(C),_.setCursor(C),w.setCursor(C),c.setCursor(C),r.addChild(u),i._windowTopHandleBackground=u,r.addChild(p),i._windowTopHandle=p,r.addChild(w),i._windowTopGrippy=w,r.addChild(v),i._windowBottomHandleBackground=v,r.addChild(_),i._windowBottomHandle=_,r.addChild(c),i._windowBottomGrippy=c}if(i.isHorizontalScrollingEnabled()){var f=i.getSlidingWindowHeight(),m=t.PathUtils.moveTo(0,0)+t.PathUtils.quadTo(6,3,8,8)+t.PathUtils.lineTo(8,28)+t.PathUtils.quadTo(6,33,0,36);t.PathUtils.closePath();var P=t.PathUtils.moveTo(0,0)+t.PathUtils.quadTo(-6,3,-8,8)+t.PathUtils.lineTo(-8,28)+t.PathUtils.quadTo(-6,33,0,36);t.PathUtils.closePath();var S=new t.Rect(i.getCtx(),0-a,0,s,f,"lhb"),y=new t.Rect(i.getCtx(),a,0,s,f,"rhb"),C="col-resize";if(i._horHandleBackgroundClass)var O=n._createGrippyImage(i,l,f,!1),x=n._createGrippyImage(i,l,f,!1);else O=n._createGrippy(i,!1),x=n._createGrippy(i,!1);S.setSolidFill(i._windowBackgroundColor,0),y.setSolidFill(i._windowBackgroundColor,0),S.setPixelHinting(!0),y.setPixelHinting(!0);var T=new t.Path(i.getCtx(),m,"lh"),W=new t.Path(i.getCtx(),P,"rh");T.setSolidFill(i._handleFillColor),T.setSolidStroke(i._handleFillColor),W.setSolidFill(i._handleFillColor),W.setSolidStroke(i._handleFillColor),i._windowBackgroundColor==i._handleFillColor&&(T.setPixelHinting(!0),W.setPixelHinting(!0)),S.setCursor(C),y.setCursor(C),T.setCursor(C),W.setCursor(C),O.setCursor(C),x.setCursor(C),r.addChild(S),i._windowLeftHandleBackground=S,r.addChild(T),i._windowLeftHandle=T,r.addChild(O),i._windowLeftGrippy=O,r.addChild(y),i._windowRightHandleBackground=y,r.addChild(W),i._windowRightHandle=W,r.addChild(x),i._windowRightGrippy=x}}r.setCursor("move"),i.addChild(r),n._renderTimeAxisTopBar(i),n._renderLeftAndRightFilters(i,a)},n._createGrippyImage=function(i,e,n,o){var r=i.getCtx();if(o){var s=n/2;h=t.ToolkitUtils.getIconStyle(r,i._vertHandleBackgroundClass);(a=t.OutputText.createIcon(r,{style:h,size:i._vertHandleSize,pos:{x:0,y:s}})).setId("vgrpy")}else{var a,l=e/2,h=t.ToolkitUtils.getIconStyle(r,i._horHandleBackgroundClass);(a=t.OutputText.createIcon(r,{style:h,size:i._horHandleSize,pos:{x:l,y:0}})).setId("hgrpy")}a.setMouseEnabled(!1);var d=new t.Container(r);return d.addChild(a),d},n._createGrippy=function(i,e){var n=i._handleTextureColor;if(e){for(var o=new t.Container(i.getCtx(),"vgrpy"),r=8,s=3,a=0;a<9;a++){var l=new t.Line(i.getCtx(),r+2*a,s,r+2*a+1,s,"dot1"+a);l.setSolidStroke(n),o.addChild(l),s+=2,(l=new t.Line(i.getCtx(),r+1+2*a,s,r+1+2*a+1,s,"dot2"+a)).setSolidStroke(n),o.addChild(l),s+=2,(l=new t.Line(i.getCtx(),r+2*a,s,r+2*a+1,s,"dot3"+a)).setSolidStroke(n),o.addChild(l),s=3}(l=new t.Line(i.getCtx(),r+18,s,r+18+1,s,"dot4")).setSolidStroke(n),o.addChild(l),s+=4,(l=new t.Line(i.getCtx(),r+18,s,r+18+1,s,"dot5")).setSolidStroke(n),o.addChild(l)}else{for(o=new t.Container(i.getCtx(),"hgrpy"),r=3,s=8,a=0;a<9;a++)(l=new t.Line(i.getCtx(),r,s+2*a,r,s+2*a+1,"dot1"+a)).setSolidStroke(n),o.addChild(l),r+=2,(l=new t.Line(i.getCtx(),r,s+1+2*a,r,s+1+2*a+1,"dot2"+a)).setSolidStroke(n),o.addChild(l),r+=2,(l=new t.Line(i.getCtx(),r,s+2*a,r,s+2*a+1,"dot3"+a)).setSolidStroke(n),o.addChild(l),r=3;(l=new t.Line(i.getCtx(),r,s+18,r,s+18+1,"dot4")).setSolidStroke(n),o.addChild(l),r+=4,(l=new t.Line(i.getCtx(),r,s+18,r,s+18+1,"dot5")).setSolidStroke(n),o.addChild(l)}return o.setPixelHinting(!0),o},n._createBorderAroundSlidingWindow=function(i){var e=i.Width,n=i.Height,r=i.getSlidingWindow(),s=o._DEFAULT_WINDOW_BORDER_WIDTH/2;if(i.isVertical())var a=r.getY(),l=a+s,h=a+r.getHeight(),d=h-s,g=0,u=s,v=e,w=v-s,c=new t.Line(i.getCtx(),g,l,e,l,"lh"),p=new t.Line(i.getCtx(),g,d,e,d,"rh"),_=new t.Line(i.getCtx(),u,0,u,a,"ltb"),f=new t.Line(i.getCtx(),u,h,u,n,"rtb"),m=new t.Line(i.getCtx(),w,a,w,h,"bb"),P=new t.Line(i.getCtx(),u,a,u,h,"tb");else l=(a=0)+s,d=(h=n)-s,u=(g=r.getX())+s,w=(v=g+r.getWidth())-s,c=new t.Line(i.getCtx(),u,a,u,h,"lh"),p=new t.Line(i.getCtx(),w,a,w,h,"rh"),_=new t.Line(i.getCtx(),0,l,g+1,l,"ltb"),f=new t.Line(i.getCtx(),v-1,l,e,l,"rtb"),m=new t.Line(i.getCtx(),g,d,v,d,"bb"),P=new t.Line(i.getCtx(),g,l,v,l,"tb");c.setPixelHinting(!0),p.setPixelHinting(!0),_.setPixelHinting(!0),f.setPixelHinting(!0),m.setPixelHinting(!0),P.setPixelHinting(!0),"none"!=i._windowBorderLeftStyle&&c.setSolidStroke(i._windowBorderLeftColor),i.addChild(c),i._leftHandle=c,"none"!=i._windowBorderRightStyle&&p.setSolidStroke(i._windowBorderRightColor),i.addChild(p),i._rightHandle=p,"none"!=i._borderTopStyle&&i._borderTopColor&&(_.setSolidStroke(i._borderTopColor),f.setSolidStroke(i._borderTopColor)),i.addChild(_),i.addChild(f),"none"!=i._windowBorderBottomStyle&&m.setSolidStroke(i._windowBorderBottomColor),i.addChild(m),"none"!=i._windowBorderTopStyle&&P.setSolidStroke(i._windowBorderTopColor),i.addChild(P)},n._updateBorderAroundSlidingWindow=function(t){var i=t.getSlidingWindow(),e=o._DEFAULT_WINDOW_BORDER_WIDTH/2,n=t.getLeftHandle(),r=t.getRightHandle(),s=t.getLeftTopBar(),a=t.getRightTopBar(),l=t.getBottomBar(),h=t.getTopBar();if(t.isVertical()){if(t.isHorizontalScrollingEnabled()){var d=i.getWidth(),g=t.getSlidingWindowPosX(i),u=g+e,v=g+d-e;t.setLinePosX(n,u,v),t.setLinePosX(r,u,v),t.setLinePosX(h,u,u),t.setLinePosX(l,v,v)}if(t.isVerticalScrollingEnabled()){var w=i.getHeight(),c=t.getSlidingWindowPosY(i),p=c+e,_=c+w-e;t.setLinePosY(n,p,p),t.setLinePosY(r,_,_),t.setLinePosY(h,p,_),t.setLinePosY(l,p,_)}}else t.isHorizontalScrollingEnabled()&&(d=i.getWidth(),u=(g=t.getSlidingWindowPosX(i))+e,v=g+d-e,t.setLinePosX(n,u,u),t.setLinePosX(r,v,v),t.setLinePosX(h,u,v),t.setLinePosX(l,u,v)),t.isVerticalScrollingEnabled()&&(w=i.getHeight(),p=(c=t.getSlidingWindowPosY(i))+e,_=c+w-e,t.setLinePosY(n,p,_),t.setLinePosY(r,p,_),t.setLinePosY(h,p,p),t.setLinePosY(l,_,_));t.setLinePos(s,-1,t.getSlidingWindowPos(i)),t.setLinePos(a,t.getLinePos1(r),-1)},n._updateSlidingWindow=function(i){var e=i.getSlidingWindow(),o=i.Width,r=i.Height;if(i.isHorizontalScrollingEnabled()){var s=Math.max(i.getMinimumPositionX(),t.OverviewUtils.getDatePosition(i._xMin,i._xMax,i._x1,o)),a=Math.min(i.getMaximumPositionX(),Math.max(i.getMinimumPositionX(),t.OverviewUtils.getDatePosition(i._xMin,i._xMax,i._x2,o)));i.isRTL()?i.setSlidingWindowPosX(e,o-a):i.setSlidingWindowPosX(e,s),n._setSlidingWindowWidth(i,e,a-s)}else n._setSlidingWindowWidth(i,e,o);if(i.isVerticalScrollingEnabled()){var l=Math.max(i.getMinimumPositionY(),t.OverviewUtils.getDatePosition(i._yMin,i._yMax,i._y1,r)),h=Math.min(i.getMaximumPositionY(),Math.max(i.getMinimumPositionY(),t.OverviewUtils.getDatePosition(i._yMin,i._yMax,i._y2,r)));i.setSlidingWindowPosY(e,l),n._setSlidingWindowHeight(i,e,h-l)}else n._setSlidingWindowHeight(i,e,r);n._updateBorderAroundSlidingWindow(i)},n._setSlidingWindowWidth=function(i,e,n){if(n=Math.min(i.getMaximumWindowWidth(),Math.max(i.getMinimumWindowWidth(),n)),e.setWidth(n),i.isLeftAndRightFilterRendered()){var o=i.getSlidingWindowPosX(e)+n,r=i.getRightBackground();if(r.setX(o),r.setWidth(Math.max(0,i.Width-o)),t.OverviewUtils.supportsTouch()&&!i.isFeatureOff("zoom"))i.getRightBackgroundHandle().setX(o)}if(!i.isFeatureOff("zoom")){if(i.isHorizontalScrollingEnabled()){var s=i._windowRightHandleBackground,a=i._windowRightHandle,l=i._windowRightGrippy;a.setTranslateX(n),s.setTranslateX(n-i.getHandleSize()),l.setTranslateX(n-i.getGrippySize())}if(i.isVerticalScrollingEnabled()){var h=(e.getWidth()-36)/2;if(i._vertHandleBackgroundClass)var d=n/2;else d=h;var g=i._windowTopHandleBackground,u=i._windowTopHandle,v=i._windowTopGrippy;u.setTranslateX(h),g.setWidth(n),v.setTranslateX(d);var w=i._windowBottomHandleBackground,c=i._windowBottomHandle,p=i._windowBottomGrippy;c.setTranslateX(h),w.setWidth(n),p.setTranslateX(d)}}},n._setSlidingWindowHeight=function(t,i,e){if(e=Math.min(t.getMaximumWindowHeight(),Math.max(t.getMinimumWindowHeight(),e)),i.setHeight(e),!t.isFeatureOff("zoom")){if(t.isHorizontalScrollingEnabled()){var n=(e-36)/2;if(t._horHandleBackgroundClass)var o=e/2;else o=n;var r=t._windowLeftHandleBackground,s=t._windowLeftHandle,a=t._windowLeftGrippy;s.setTranslateY(n),r.setHeight(e),a.setTranslateY(o);var l=t._windowRightHandleBackground,h=t._windowRightHandle,d=t._windowRightGrippy;h.setTranslateY(n),l.setHeight(e),d.setTranslateY(o)}if(t.isVerticalScrollingEnabled()){var g=t._windowBottomHandleBackground,u=t._windowBottomHandle,v=t._windowBottomGrippy;u.setTranslateY(e),g.setTranslateY(e-t.getHandleSize()),v.setTranslateY(e-t.getGrippySize())}}},n._renderTimeAxisTopBar=function(i){var e=i.Width,n=i.Height;if(i.isVertical())if(i.isRTL())var o=new t.Line(i.getCtx(),i.getTimeAxisWidth(),0,i.getTimeAxisWidth(),n,"tab");else o=new t.Line(i.getCtx(),e-i.getTimeAxisWidth(),0,e-i.getTimeAxisWidth(),n,"tab");else o=i.isOverviewAbove()?new t.Line(i.getCtx(),0,i.getTimeAxisHeight(),e,i.getTimeAxisHeight(),"tab"):new t.Line(i.getCtx(),0,n-i.getTimeAxisHeight(),e,n-i.getTimeAxisHeight(),"tab");o.setSolidStroke(i._timeAxisBarColor,i._timeAxisBarOpacity),o.setPixelHinting(!0),i._timeAxisTopBar=o,i.addChild(o)},n._renderLeftAndRightFilters=function(i,e){var n=i.Width,o=i.Height;if(i.isLeftAndRightFilterRendered()){if(i.isVertical())var r=new t.Rect(i.getCtx(),0,0,n,0,"lbg"),s=new t.Rect(i.getCtx(),0,0,n,0,"rbg");else r=new t.Rect(i.getCtx(),0,0,0,o,"lbg"),s=new t.Rect(i.getCtx(),0,0,0,o,"rbg");if(r.setSolidFill(i._leftFilterPanelColor,i._leftFilterPanelAlpha),i.addChild(r),s.setSolidFill(i._rightFilterPanelColor,i._rightFilterPanelAlpha),i.addChild(s),t.OverviewUtils.supportsTouch()&&null!=e){if(i.isVertical())var a=new t.Rect(i.getCtx(),0,0,n,e,"lbgrh"),l=new t.Rect(i.getCtx(),0,0,n,e,"rbgrh");else a=new t.Rect(i.getCtx(),0,0,e,o,"lbgrh"),l=new t.Rect(i.getCtx(),0,0,e,o,"rbgrh");a.setSolidFill(i._leftFilterPanelColor,0),i.addChild(a),l.setSolidFill(i._rightFilterPanelColor,0),i.addChild(l)}}},n._renderTimeAxis=function(t){if(null!=t._ticks)for(var i=t.Width,e=t.Height,r=t.isVertical(),s=t.getOverviewSize(),a=0;a<t._ticks.length;a++){var l=t._ticks[a],h=parseInt(l.time,10);if(r)var d=t.getDateYPosition(h);else d=t.getDateXPosition(h);var g=l.label,u=0;if(a+1<t._ticks.length){var v=parseInt(t._ticks[a+1].time,10);if(r)var w=t.getDateYPosition(v);else w=t.getDateXPosition(v);u=w-d}else u=s-d;t.isHorizontalRTL()&&(d=s-d),r&&(u=i),u-=2*o._DEFAULT_AXIS_LABEL_PADDING,n._addTick(t,d,i,e,"tick"+a),n._addLabel(t,d,g,e,u,"label"+a,t._labelStyle)}},n._addTick=function(i,e,n,o,r){if(i.isVertical())var s=new t.Line(i.getCtx(),0,e,n,e,r);else s=new t.Line(i.getCtx(),e,0,e,o,r);var a=new t.Stroke(i._timeIndicatorColor,1,1,!1,{dashArray:"3"});s.setStroke(a),s.setPixelHinting(!0),i.addChild(s)},n._addLabel=function(i,e,n,r,s,a,l){if(i.isVertical()){var h=new t.OutputText(i.getCtx(),n,4,e,a);if(h.setCSSStyle(l),i.isRTL()){var d=h.getDimensions();h.setX(Math.max(4,i.Width-d.w-4))}}else{if(i.isOverviewAbove())var g=2;else g=r-i.getTimeAxisHeight()+2;var u=o._DEFAULT_AXIS_LABEL_PADDING;(h=new t.OutputText(i.getCtx(),n,e+u,g,a)).setCSSStyle(l),i.isHorizontalRTL()&&(d=h.getDimensions(),h.setX(e-Math.min(d.w,s)-u))}t.TextUtils.fitText(h,s,1/0,i),h._rawText=h.getUntruncatedTextString()},n._parseFilledTimeRanges=function(t){if(null!=t._formattedTimeRanges)for(var i=0;i<t._formattedTimeRanges.length;i++){var e=t._formattedTimeRanges[i];n._addFilledTimeRange(t,e,t.Width,t.Height)}},n._addFilledTimeRange=function(i,e,n,o){var r=parseInt(e.rs,10),s=parseInt(e.re,10);if(null!=r&&null!=s){var a=e.c,l=i.getOverviewSize();if(i.isVertical())h=i.getDateYPosition(r),d=i.getDateYPosition(s);else var h=i.getDateXPosition(r),d=i.getDateXPosition(s);var g=d-h;if(i.isHorizontalRTL()&&(h=l-h-g,d=l-d-g),i.isVertical())var u=new t.Rect(i.getCtx(),0,h,n-i.getTimeAxisWidth(),g,"ftr");else u=new t.Rect(i.getCtx(),h,i.isOverviewAbove()?i.getTimeAxisHeight():0,g,o-i.getTimeAxisHeight(),"ftr");null!=a&&u.setSolidFill(a,.4),u.setCursor("move"),u.setPixelHinting(!0),i.addChild(u)}},n._updateCurrentTime=function(i){var e=i.Width,n=i.Height;if(!(null==i._currentTime||isNaN(i._currentTime)||i._currentTime<i._xMin||i._currentTime>i._xMax)){if(i.isVertical())var o=i.getDateYPosition(i._currentTime),r=new t.Line(i.getCtx(),0,o,e,o,"ocd");else o=i.getDateXPosition(i._currentTime),i.isRTL()&&(o=e-o),r=new t.Line(i.getCtx(),o,0,o,n,"ocd");r.setSolidStroke(i._currentTimeIndicatorColor),r.setPixelHinting(!0),i.addChild(r)}};var o=new Object;t.Obj.createSubclass(o,t.Obj),o._DEFAULT_AXIS_LABEL_PADDING=5,o._DEFAULT_WINDOW_BORDER_WIDTH=1,o.getHandleFillColor=function(t){return null!=t._hfc?t._hfc:t.style.handleFillColor},o.getHandleTextureColor=function(t){return null!=t._htc?t._htc:t.style.handleTextureColor},o.getHandleBackgroundClass=function(t,i){return i?null!=t._vhbc?t._vhbc:t.style.vertHandleBackgroundClass:null!=t._hbc?t._hbc:t.style.handleBackgroundClass},o.getHandleSize=function(t,i){return i?null!=t._vhs?t._vhs:t.style.vertHandleSize:null!=t._hs?t._hs:t.style.handleSize},o.getBorderTopColor=function(t){return null!=t._btc?t._btc:t.style.borderTopColor},o.getBorderTopStyle=function(t){return null!=t._bts?t._bts:t.style.borderTopStyle},o.getWindowBackgroundColor=function(t){return null!=t._wbc?t._wbc:t.style.windowBackgroundColor},o.getWindowBackgroundAlpha=function(t){return t.style.windowBackgroundAlpha},o.getWindowBorderTopStyle=function(t){return null!=t._wbts?t._wbts:t.style.windowBorderTopStyle},o.getWindowBorderRightStyle=function(t){return null!=t._wbrs?t._wbrs:t.style.windowBorderRightStyle},o.getWindowBorderBottomStyle=function(t){return null!=t._wbbs?t._wbbs:t.style.windowBorderBottomStyle},o.getWindowBorderLeftStyle=function(t){return null!=t._wbls?t._wbls:t.style.windowBorderLeftStyle},o.getWindowBorderTopColor=function(t){return null!=t._wbtc?t._wbtc:t.style.windowBorderTopColor},o.getWindowBorderRightColor=function(t){return null!=t._wbrc?t._wbrc:t.style.windowBorderRightColor},o.getWindowBorderBottomColor=function(t){return null!=t._wbbc?t._wbbc:t.style.windowBorderBottomColor},o.getWindowBorderLeftColor=function(t){return null!=t._wblc?t._wblc:t.style.windowBorderLeftColor},o.getOverviewBackgroundColor=function(t){return null!=t._obc?t._obc:t.style.overviewBackgroundColor},o.getCurrentTimeIndicatorColor=function(t){return null!=t._ctic?t._ctic:t.style.currentTimeIndicatorColor},o.getTimeAxisBarColor=function(t){return null!=t._tabc?t._tabc:t.style.timeAxisBarColor},o.getTimeAxisBarAlpha=function(t){return null!=t._tabo?t._tabo:t.style.timeAxisBarAlpha},o.getTimeIndicatorColor=function(t){return null!=t._tic?t._tic:t.style.timeIndicatorColor},o.getLeftFilterPanelColor=function(t){return t.style.leftFilterPanelColor},o.getLeftFilterPanelAlpha=function(t){return t.style.leftFilterPanelAlpha},o.getRightFilterPanelColor=function(t){return t.style.rightFilterPanelColor},o.getRightFilterPanelAlpha=function(t){return t.style.rightFilterPanelAlpha}}(dvt);
  return dvt;
});

/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 */
define('ojs/internal-deps/dvt/DvtDiagram',['jquery','./DvtToolkit', './DvtPanZoomCanvas','./DvtOverview'], function($, dvt) {
  "use strict";
  // Internal use only.  All APIs and functionality are subject to change at any time.

!function(t){var e=function(t){this.Init(t)};t.Obj.createSubclass(e,t.Obj,"DvtDiagramLayoutContext"),e.prototype.Init=function(t){this._nodeCount=0,this._linkCount=0,this._bLocaleR2L=!1,this._nodes=new t.ojMap,this._links=new t.ojMap,this._arNodes=[],this._arLinks=[],this._dirtyContext=new t.ojMap,this.Context=t},e.prototype.setLayout=function(t){this._layout=t},e.prototype.getLayout=function(){return this._layout},e.prototype.setLayoutAttributes=function(t){this._layoutAttrs=t},e.prototype.getLayoutAttributes=function(){return this._layoutAttrs},e.prototype.addNode=function(t){this.getNodeById(t.getId())||(this._nodeCount++,this._arNodes.push(t)),this._nodes.set(t.getId(),t)},e.prototype.addNodeToMap=function(t){this._nodes.set(t.getId(),t)},e.prototype.removeNode=function(e,n){n&&(e?t.ArrayUtils.removeItem(e.getChildNodes(),n):(t.ArrayUtils.removeItem(this._arNodes,n),this._nodeCount--),this._nodes.delete(n.getId()))},e.prototype.getNodeById=function(t){return this._nodes.get(t)},e.prototype.getNodeByIndex=function(t){return this._arNodes[t]},e.prototype.getNodeCount=function(){return this._nodeCount},e.prototype.addLink=function(t){this.getLinkById(t.getId())||(this._linkCount++,this._arLinks.push(t)),this._links.set(t.getId(),t)},e.prototype.removeLink=function(e){e&&(this.getLinkById(e.getId())&&(t.ArrayUtils.removeItem(this._arLinks,e),this._linkCount--),this._links.delete(e.getId()))},e.prototype.getLinkById=function(t){return this._links.get(t)},e.prototype.getLinkByIndex=function(t){return this._arLinks[t]},e.prototype.getLinkCount=function(){return this._linkCount},e.prototype.localToGlobal=function(e,n){var i=this.GetGlobalOffset(n);return new t.DiagramPoint(e.x+i.x,e.y+i.y)},e.prototype.GetGlobalOffset=function(e){for(var n=new t.DiagramPoint(0,0);e;){n.x+=e.ContentOffset.x+e.getPosition().x,n.y+=e.ContentOffset.y+e.getPosition().y;var i=e.getContainerId();if(i){if((e=this.getNodeById(i))&&e.isDisclosed()){var o=e.getContainerPadding();o&&(n.x+=o.left,n.y+=o.top)}}else e=null}return n},e.prototype.setLocaleR2L=function(t){this._bLocaleR2L=t},e.prototype.isLocaleR2L=function(){return this._bLocaleR2L},e.prototype.setComponentSize=function(t){this._componentSize=t},e.prototype.getComponentSize=function(){return this._componentSize},e.prototype.setViewport=function(t){this._viewport=t},e.prototype.getViewport=function(){return this._viewport},e.prototype.setContainerId=function(t){this._containerId=t},e.prototype.getContainerId=function(){return this._containerId},e.prototype.setContainerPadding=function(t,e,n,i){this.getContainerId()&&(this._containerPadding={},"number"!=typeof t&&"string"!=typeof t&&(i=t.left,e=t.right,n=t.bottom,t=t.top),this._containerPadding.top=t,this._containerPadding.right=e,this._containerPadding.bottom=n,this._containerPadding.left=i)},e.prototype.getContainerPadding=function(){return this._containerPadding},e.prototype.setCurrentViewport=function(t){this._currentViewport=t},e.prototype.getCurrentViewport=function(){return this._currentViewport},e.prototype.getCommonContainer=function(e,n){for(var i=function(t,e){for(var n=[],i=e.getNodeById(t)?e.getNodeById(t).getContainerId():null;i;)n.push(i),i=e.getNodeById(i)?e.getNodeById(i).getContainerId():null;return n.reverse(),n},o=i(e,this),a=i(n,this),r=null,s=0;s<o.length&&s<a.length&&t.BaseDiagram.compareValues(this.Context,o[s],a[s]);s++)r=o[s];return r},e.prototype.getEventData=function(){return this._eventData},e.prototype.setEventData=function(t){this._eventData=t},e.prototype.setDirtyContext=function(t){this._dirtyContext=t},e.prototype.getDirtyContext=function(){return this._dirtyContext};var n=function(){this.Init()};t.Obj.createSubclass(n,t.Obj,"DvtDiagramLayoutContextLink"),n.prototype.Init=function(){this._startConnectorOffset=0,this._endConnectorOffset=0,this._linkWidth=1,this._selected=!1,this._bPromoted=!1},n.prototype.setId=function(t){this._id=t},n.prototype.getId=function(){return this._id},n.prototype.setStartId=function(t){this._startId=t},n.prototype.getStartId=function(){return this._startId},n.prototype.setEndId=function(t){this._endId=t},n.prototype.getEndId=function(){return this._endId},n.prototype.setPoints=function(e){this._points="string"==typeof e?t.PathUtils.createPathArray(e):e,this.setDirty()},n.prototype.getPoints=function(){return this._points},n.prototype.setLabelPosition=function(t){this._labelPosition=t,this.setDirty()},n.prototype.getLabelPosition=function(){return this._labelPosition},n.prototype.setLabelBounds=function(t){this._labelBounds=t},n.prototype.getLabelBounds=function(){return this._labelBounds},n.prototype.setStartConnectorOffset=function(t){this._startConnectorOffset=t},n.prototype.getStartConnectorOffset=function(){return this._startConnectorOffset},n.prototype.setEndConnectorOffset=function(t){this._endConnectorOffset=t},n.prototype.getEndConnectorOffset=function(){return this._endConnectorOffset},n.prototype.setLinkWidth=function(t){this._linkWidth=t},n.prototype.getLinkWidth=function(){return this._linkWidth},n.prototype.setLayoutAttributes=function(t){this._layoutAttrs=t},n.prototype.getLayoutAttributes=function(){return this._layoutAttrs},n.prototype.setSelected=function(t){this._selected=t},n.prototype.getSelected=function(){return this._selected},n.prototype.setLabelRotationAngle=function(t){this._labelRotAngle=t,this.setDirty()},n.prototype.getLabelRotationAngle=function(){return this._labelRotAngle},n.prototype.setLabelRotationPoint=function(t){this._labelRotPoint=t,this.setDirty()},n.prototype.getLabelRotationPoint=function(){return this._labelRotPoint},n.prototype.setPromoted=function(t){this._bPromoted=t},n.prototype.isPromoted=function(){return this._bPromoted},n.prototype.setLabelValign=function(t){this._labelValign=t,this.setDirty()},n.prototype.setLabelHalign=function(t){this._labelHalign=t,this.setDirty()},n.prototype.getLabelValign=function(){return this._labelValign},n.prototype.getLabelHalign=function(){return this._labelHalign},n.prototype.setCoordinateSpace=function(t){this._coordinateContainerId=t,this.setDirty()},n.prototype.getCoordinateSpace=function(){return this._coordinateContainerId},n.prototype.setData=function(t){this._data=t},n.prototype.getData=function(){return this._data},n.prototype.setDirty=function(){this.LayoutContext&&this.LayoutContext.getDirtyContext().set(this.getId(),!0)},n.prototype.copyFrom=function(t){t&&(this.setPoints(t.getPoints()),this.setLabelPosition(t.getLabelPosition()),this.setLabelRotationAngle(t.getLabelRotationAngle()),this.setLabelRotationPoint(t.getLabelRotationPoint()),this.setLabelValign(t.getLabelValign()),this.setLabelHalign(t.getLabelHalign()),this.setCoordinateSpace(t.getCoordinateSpace()))};var i=function(){this.Init()};t.Obj.createSubclass(i,t.Obj,"DvtDiagramLayoutContextNode"),i.prototype.Init=function(){this._bReadOnly=!1,this._selected=!1,this._bDisclosed=!1,this.IsRendered=!0,this.ContentOffset=new t.DiagramPoint(0,0)},i.prototype.setId=function(t){this._id=t},i.prototype.getId=function(){return this._id},i.prototype.setBounds=function(t){this._bounds=t,this._origBounds=t},i.prototype.getBounds=function(){return!this._bounds&&this.Component&&this.Component.updateNodeDims(this),this._bounds},i.prototype.setContentBounds=function(t){this._contentBounds=t,this._origContentBounds=t},i.prototype.getContentBounds=function(){return!this._contentBounds&&this.Component&&this.Component.updateNodeDims(this),this._contentBounds},i.prototype.setPosition=function(t){this._position=t,this.UpdateParentNodes(),this.setDirty()},i.prototype.getPosition=function(){return this._position},i.prototype.getRelativePosition=function(e){var n=this.LayoutContext;if(n){for(var i=new t.DiagramPoint(0,0),o=this,a=!1;o;){var r=o.getContainerId();if(r){var s=n.getNodeById(r);s&&this.Component&&!s.IsRendered&&this.Component.renderNodeFromContext(s,!0)}if(i.x+=o.ContentOffset.x+o.getPosition().x,i.y+=o.ContentOffset.y+o.getPosition().y,t.BaseDiagram.compareValues(n.Context,r,e))a=!0,o=null;else if((o=n.getNodeById(r))&&o.isDisclosed()){var l=o.getContainerPadding();l&&(i.x+=l.left,i.y+=l.top)}else o=null}return a||(i=null),i}},i.prototype.setLabelPosition=function(t){this._labelPosition=t,this.setDirty()},i.prototype.getLabelPosition=function(){return this._labelPosition},i.prototype.setLabelBounds=function(t){this._labelBounds=t},i.prototype.getLabelBounds=function(){return!this._labelBounds&&this.Component&&this.Component.updateNodeDims(this),this._labelBounds},i.prototype.setLayoutAttributes=function(t){this._layoutAttrs=t},i.prototype.getLayoutAttributes=function(){return this._layoutAttrs},i.prototype.setReadOnly=function(t){this._bReadOnly=t},i.prototype.isReadOnly=function(){return this._bReadOnly},i.prototype.setContainerId=function(t){this._containerId=t},i.prototype.getContainerId=function(){return this._containerId},i.prototype.setSelected=function(t){this._selected=t},i.prototype.getSelected=function(){return this._selected},i.prototype.setLabelRotationAngle=function(t){this._labelRotAngle=t,this.setDirty()},i.prototype.getLabelRotationAngle=function(){return this._labelRotAngle},i.prototype.setLabelRotationPoint=function(t){this._labelRotPoint=t,this.setDirty()},i.prototype.getLabelRotationPoint=function(){return this._labelRotPoint},i.prototype.SetContainerPaddingObj=function(e){this.isDisclosed()&&(this._containerPadding=e,e&&(this._origBounds&&(this._origBounds=new t.DiagramRectangle(this._origBounds.x,this._origBounds.y,this._origBounds.w-(e.left+e.right),this._origBounds.h-(e.top+e.bottom))),this._origContentBounds&&(this._origContentBounds=new t.DiagramRectangle(this._origContentBounds.x,this._origContentBounds.y,this._origContentBounds.w-(e.left+e.right),this._origContentBounds.h-(e.top+e.bottom)))))},i.prototype.setContainerPadding=function(e,n,i,o){this.isDisclosed()&&(this._containerPadding={},"number"!=typeof e&&"string"!=typeof e&&(o=e.left,n=e.right,i=e.bottom,e=e.top),this._containerPadding.top=e,this._containerPadding.right=n,this._containerPadding.bottom=i,this._containerPadding.left=o,this._origBounds&&(this._bounds=new t.DiagramRectangle(this._origBounds.x,this._origBounds.y,this._origBounds.w+o+n,this._origBounds.h+e+i)),this._origContentBounds&&(this._contentBounds=new t.DiagramRectangle(this._origContentBounds.x,this._origContentBounds.y,this._origContentBounds.w+o+n,this._origContentBounds.h+e+i)),this.setDirty())},i.prototype.getContainerPadding=function(){return this._containerPadding},i.prototype.setDisclosed=function(t){this._bDisclosed=t},i.prototype.isDisclosed=function(){return this._bDisclosed},i.prototype.setChildNodes=function(t){this._childNodes=t},i.prototype.getChildNodes=function(){return this._childNodes},i.prototype.setParentNode=function(t){this._parentNode=t},i.prototype.getParentNode=function(){return this._parentNode},i.prototype.UpdateParentNodes=function(){var t=this.getParentNode();t&&t.IsRendered&&(t.Reset(),t.UpdateParentNodes())},i.prototype.Reset=function(){this.IsRendered=!1,this.setBounds(null),this.setContentBounds(null),this.setLabelBounds(null),this.setDirty()},i.prototype.setLabelValign=function(t){this._labelValign=t,this.setDirty()},i.prototype.setLabelHalign=function(t){this._labelHalign=t,this.setDirty()},i.prototype.getLabelValign=function(){return this._labelValign},i.prototype.getLabelHalign=function(){return this._labelHalign},i.prototype.setData=function(t){this._data=t},i.prototype.getData=function(){return this._data},i.prototype.setDirty=function(){this.LayoutContext&&this.LayoutContext.getDirtyContext().set(this.getId(),!0)},i.prototype.copyFrom=function(t){t&&(this.setPosition(t.getPosition()),this.setLabelPosition(t.getLabelPosition()),this.setLabelRotationAngle(t.getLabelRotationAngle()),this.setLabelRotationPoint(t.getLabelRotationPoint()),this.setLabelValign(t.getLabelValign()),this.setLabelHalign(t.getLabelHalign()),t.getContainerPadding()&&this.setContainerPadding(t.getContainerPadding()))};var o=function(t,e){this.Init(t,e)};t.Obj.createSubclass(o,t.Obj,"DvtDiagramPoint"),o.prototype.Init=function(t,e){this.x=null===t||isNaN(t)?0:t,this.y=null===e||isNaN(e)?0:e};var a=function(t,e,n,i){this.Init(t,e,n,i)};t.Obj.createSubclass(a,t.Obj,"DvtDiagramRectangle"),a.prototype.Init=function(t,e,n,i){this.x=null===t||isNaN(t)?0:t,this.y=null===e||isNaN(e)?0:e,this.w=null===n||isNaN(n)?0:n,this.h=null===i||isNaN(i)?0:i},t.DiagramPoint=o,t.DiagramRectangle=a,t.BaseDiagram=function(t,e,n){this.Init(t,e,n)},t.Obj.createSubclass(t.BaseDiagram,t.PanZoomComponent,"dvt.BaseDiagram"),t.BaseDiagram.prototype.Init=function(e,n,i){t.BaseDiagram.superclass.Init.call(this,e,n,i),this.getCtx().getStage().getElem().setAttributeNS(null,"text-rendering","geometricPrecision"),this._linksPane=new t.Container(e),this._nodesPane=new t.Container(e),this._topPane=new t.Container(e),t.Agent.isTouchDevice()&&(this._touchEventPane=new t.Container(e),this._touchEventPane.setStyle({display:"none"})),this.InitializeZoomLimits()},t.BaseDiagram.prototype.InitComponentInternal=function(){var t=this.getPanZoomCanvas();t.setMinZoom(this.getMinZoom()),t.setMaxZoom(this.getMaxZoom()),t.setAnimationDuration(this.getAnimationDuration()),t.getContentPane().addChild(this._linksPane),t.getContentPane().addChild(this._nodesPane),t.getContentPane().addChild(this._topPane),this._touchEventPane&&t.getContentPane().addChild(this._touchEventPane)},t.BaseDiagram.prototype.getAnimationDuration=function(){return t.PanZoomCanvas.DEFAULT_ANIMATION_DURATION},t.BaseDiagram.prototype.setMaxZoom=function(t){this._maxZoom=t,this.getPanZoomCanvas()&&this.getPanZoomCanvas().setMaxZoom(t)},t.BaseDiagram.prototype.getMaxZoom=function(){return this._maxZoom},t.BaseDiagram.prototype.setMinZoom=function(t){this._minZoom=t,this.getPanZoomCanvas()&&this.getPanZoomCanvas().setMinZoom(t)},t.BaseDiagram.prototype.getMinZoom=function(){return this._minZoom},t.BaseDiagram.prototype.InitializeZoomLimits=function(){this.setMaxZoom(2),this.setMinZoom(0)},t.BaseDiagram.prototype.getNodeById=function(t){return null},t.BaseDiagram.prototype.getLinkById=function(t){return null},t.BaseDiagram.prototype.GetAllLinks=function(){return[]},t.BaseDiagram.prototype.GetAllNodes=function(){return[]},t.BaseDiagram.prototype.GetAllRoots=function(){return[]},t.BaseDiagram.prototype.RefreshEmptyText=function(e){if(e&&this.getEmptyText())this._emptyTextDisplay?(this._emptyTextDisplay.setX(this.Width/2),this._emptyTextDisplay.setY(this.Height/2),t.TextUtils.fitText(this._emptyTextDisplay,this.getWidth()-2*t.TextUtils.EMPTY_TEXT_BUFFER,1/0,this)):this._emptyTextDisplay=this.CreateEmptyText(this.getEmptyText());else if(this._emptyTextDisplay){var n=this._emptyTextDisplay.getParent();n&&n.removeChild(this._emptyTextDisplay),this._emptyTextDisplay=null}},t.BaseDiagram.prototype.CreateEmptyText=function(e){var n=this.getOptions();return t.TextUtils.renderEmptyText(this,e,new t.Rectangle(0,0,this.getWidth(),this.getHeight()),this.getEventManager(),n._statusMessageStyle)},t.BaseDiagram.prototype.setEmptyText=function(t){this._emptyText=t},t.BaseDiagram.prototype.getEmptyText=function(){return this._emptyText},t.BaseDiagram.prototype.SetPanningEnabled=function(t){this._panningEnabled=t},t.BaseDiagram.prototype.IsPanningEnabled=function(){return this._panningEnabled},t.BaseDiagram.prototype.setPanDirection=function(t){this._panDirection=t,this.getPanZoomCanvas()&&this.getPanZoomCanvas().setPanDirection(t)},t.BaseDiagram.prototype.getPanDirection=function(){return this._panDirection},t.BaseDiagram.prototype.SetZoomingEnabled=function(t){this._zoomingEnabled=t},t.BaseDiagram.prototype.IsZoomingEnabled=function(){return this._zoomingEnabled},t.BaseDiagram.prototype.getSelectionHandler=function(){return this._selectionHandler},t.BaseDiagram.prototype.setSelectionMode=function(e){this._selectionHandler="single"==e?new t.SelectionHandler(this.getCtx(),t.SelectionHandler.TYPE_SINGLE):"multiple"==e?new t.SelectionHandler(this.getCtx(),t.SelectionHandler.TYPE_MULTIPLE):null,this.getEventManager().setSelectionHandler(this._selectionHandler)},t.BaseDiagram.prototype.getSelectionMode=function(){return this._selectionHandler?this._selectionHandler.getType():null},t.BaseDiagram.prototype.isSelectionSupported=function(){return!!this._selectionHandler},t.BaseDiagram.prototype.getNodesPane=function(){return this._nodesPane},t.BaseDiagram.prototype.setNodesPane=function(t){this._nodesPane=t},t.BaseDiagram.prototype.getLinksPane=function(){return this._linksPane},t.BaseDiagram.prototype.setLinksPane=function(t){this._linksPane=t},t.BaseDiagram.prototype.getTopPane=function(){return this._topPane},t.BaseDiagram.prototype.setTopPane=function(t){this._topPane=t},t.BaseDiagram.prototype.getTouchEventPane=function(){return this._touchEventPane||null},t.BaseDiagram.prototype.getBottomPane=function(){this._bottomPane||(this._bottomPane=new t.Container(this.getCtx()),this.getPanZoomCanvas().getContentPane().addChildAt(this._bottomPane,0));return this._bottomPane},t.BaseDiagram.prototype.CreateEmptyLayoutContext=function(){var n=new e(this.getCtx());return n.setLocaleR2L(t.Agent.isRightToLeft(this.getCtx())),n.setComponentSize(new t.DiagramRectangle(0,0,this.getWidth(),this.getHeight())),n},t.BaseDiagram.prototype.CreateLayoutContextNode=function(e,n,o,a){var r=new i;r.setId(e.getId?e.getId():e.getData().getId()),r.setBounds(t.DiagramLayoutUtils.convertRectToDiagramRect(e.getLayoutBounds())),r.setContentBounds(t.DiagramLayoutUtils.convertRectToDiagramRect(e.getContentBounds()));var s=e.getLayoutAttributes?e.getLayoutAttributes(n):e.getData()._itemData;return r.setLayoutAttributes(s),r.setData(s),r.setLabelBounds(t.DiagramLayoutUtils.convertRectToDiagramRect(e.getLabelBounds())),r.setLabelPosition(t.DiagramLayoutUtils.convertPointToDiagramPoint(e.getLabelPosition())),r.setSelected(1==e.isSelected()),e.isDisclosed()&&(r.setDisclosed(!0),r.SetContainerPaddingObj(t.BaseDiagram.getLayoutContainerPadding(e.getContainerPadding()))),r.setContainerId(e.getGroupId()),r.Component=this,r.IsRendered=!o,r.LayoutContext=a,r},t.BaseDiagram.prototype.CreateLayoutContextLink=function(e,i,o,a,r){var s,l=new n;return l.setId(e.getId?e.getId():e.getData().getId()),l.setStartId(i||e.getData().getStartId()),l.setEndId(o||e.getData().getEndId()),e.isPromoted()?(s=e.getData()._links,this.isDataProviderMode()&&(s=s.map(function(t){return t._itemData}))):s=e.getData()._itemData,l.setLayoutAttributes(s),l.setData(s),l.setLabelBounds(t.DiagramLayoutUtils.convertRectToDiagramRect(e.getLabelBounds())),l.setLabelPosition(t.DiagramLayoutUtils.convertPointToDiagramPoint(e.getLabelPosition())),l.setStartConnectorOffset(e.getStartConnectorOffset()),l.setEndConnectorOffset(e.getEndConnectorOffset()),l.setLinkWidth(e.getLinkWidth()),l.setSelected(1==e.isSelected()),l.setPromoted(1==e.isPromoted()),l.LayoutContext=r,l},t.BaseDiagram.prototype.ApplyLayoutContext=function(e,n){var i=e.getContainerPadding();if(i){var o=e.getContainerId();if(o){var a=this.getNodeById(o);a&&a.setContainerPadding(t.BaseDiagram.getContainerPadding(i))}}for(var r=Number.MAX_VALUE,s=Number.MAX_VALUE,l=0;l<e.getNodeCount();l++){(D=(_=e.getNodeByIndex(l)).getPosition())&&(r=Math.min(r,D.x),s=Math.min(s,D.y));var g=_.getLabelBounds(),u=_.getLabelPosition();g&&u&&(r=Math.min(r,u.x+g.x),s=Math.min(s,u.y+g.y))}for(var d=0;d<e.getLinkCount();d++){if(k=(B=e.getLinkByIndex(d)).getPoints())for(var h=t.DiagramLinkUtils.GetControlPoints(k),c=0;c<h.length;c++){var p=h[c];r=Math.min(r,p.x),s=Math.min(s,p.y)}g=B.getLabelBounds(),u=B.getLabelPosition();g&&u&&(r=Math.min(r,u.x+g.x),s=Math.min(s,u.y+g.y))}var y=new t.Point(-r,-s),m=y.x,C=y.y,f=e.getDirtyContext();for(l=0;l<e.getNodeCount();l++){var _;if((_=e.getNodeByIndex(l)).getContainerId()&&(_.ContentOffset=new t.DiagramPoint(y.x,y.y)),f.has(_.getId())){var D,L=this.getNodeById(_.getId());if((D=_.getPosition())&&L.SetPosition(D.x+m,D.y+C),this.ApplyLabelPosition(_,L,t.DiagramLayoutUtils.convertDiagramPointToPoint(D)),L.isDisclosed()){var b=_.getContainerPadding();b&&L.setContainerPadding(t.BaseDiagram.getContainerPadding(b))}}}for(d=0;d<e.getLinkCount();d++){var B=e.getLinkByIndex(d);if(f.has(B.getId())){var k,P=this.getLinkById(B.getId()),N=this.GetLinkTranslationOffset(P,B,y),x=N.x,v=N.y;(k=B.getPoints())&&P.setPoints(k),P.setTranslate(x,v),this.ApplyLabelPosition(B,P,new t.Point(0,0))}}var R=e.getViewport();R&&(this._layoutViewport=new t.Rectangle(R.x+m,R.y+C,R.w,R.h)),n&&(this._layoutOffset=new t.Point(m,C))},t.BaseDiagram.prototype.GetLinkTranslationOffset=function(e,n,i){var o=new t.Point(0,0),a=this.getCtx();if(e.getGroupId()){if(!t.BaseDiagram.compareValues(a,e.getGroupId(),n.getCoordinateSpace())){for(var r=n.getCoordinateSpace(),s=this.getNodeById(e.getGroupId());s;){var l=s.getContainerPadding();o.x-=l.left-s.GetPosition().x,o.y-=l.top-s.GetPosition().y;var g=s.getGroupId();s=t.BaseDiagram.compareValues(a,g,r)?null:this.getNodeById(g)}r||(o.x+=i.x,o.y+=i.y)}}else o=i;return o},t.BaseDiagram.prototype.GetLayoutViewport=function(){return this._layoutViewport},t.BaseDiagram.prototype.IsLayoutViewport=function(){return!!this._layoutViewport},t.BaseDiagram.prototype.ClearLayoutViewport=function(){this._layoutViewport=null},t.BaseDiagram.prototype.AdjustMinZoom=function(){if(0==this.getMinZoom()){var t=this.getPanZoomCanvas(),e=this.GetViewBounds(),n=this.CalculateMinimumScale(e);return t.setMinZoom(this.GetMinZoomFactor()*Math.min(n,t.getMaxZoom())),e}return null},t.BaseDiagram.prototype.GetMinZoomFactor=function(){return 1},t.BaseDiagram.prototype.CalculateMinimumScale=function(t){if(!t)return 0;var e=this.getPanZoomCanvas(),n=(this.Width-2*e.getZoomToFitPadding())/t.w,i=(this.Height-2*e.getZoomToFitPadding())/t.h;return Math.min(n,i)},t.BaseDiagram.prototype.GetViewBounds=function(){if(this._cachedViewBounds)return this._cachedViewBounds;for(var t,e,n,i,o,a,r,s,l,g=null,u=this.GetAllRoots(),d=0;d<u.length;d++)o=u[d],(i=this.getNodeById(o))&&i.getVisible()&&(t=i.GetNodeBounds(),e=i.getTranslateX(),n=i.getTranslateY(),t.x+=e,t.y+=n,g?(s=g.x,l=g.y,g.x=Math.min(g.x,t.x),g.y=Math.min(g.y,t.y),g.w=Math.max(s+g.w,t.x+t.w)-g.x,g.h=Math.max(l+g.h,t.y+t.h)-g.y):g=t);var h=this.GetAllLinks();for(d=0;d<h.length;d++)if(r=h[d],(a=this.getLinkById(r))&&a.getVisible()){if(a.getGroupId())continue;t=a.GetLinkBounds(),e=a.getTranslateX(),n=a.getTranslateY(),t.x+=e,t.y+=n,g?(s=g.x,l=g.y,g.x=Math.min(g.x,t.x),g.y=Math.min(g.y,t.y),g.w=Math.max(s+g.w,t.x+t.w)-g.x,g.h=Math.max(l+g.h,t.y+t.h)-g.y):g=t}return g},t.BaseDiagram.RotateBounds=function(e,n,i){if(null==n&&!i)return e;var o=new t.Point(e.x,e.y),a=new t.Point(e.x+e.w,e.y),r=new t.Point(e.x,e.y+e.h),s=new t.Point(e.x+e.w,e.y+e.h),l=new t.Matrix;null!=n&&(i&&(l=l.translate(-i.x,-i.y)),l=l.rotate(n),i&&(l=l.translate(i.x,i.y)));var g=l.transformPoint(o),u=l.transformPoint(a),d=l.transformPoint(r),h=l.transformPoint(s),c=Math.min(Math.min(g.x,u.x),Math.min(d.x,h.x)),p=Math.max(Math.max(g.x,u.x),Math.max(d.x,h.x)),y=Math.min(Math.min(g.y,u.y),Math.min(d.y,h.y)),m=Math.max(Math.max(g.y,u.y),Math.max(d.y,h.y));return new t.Rectangle(c,y,p-c,m-y)},t.BaseDiagram.prototype.ConstrainPanning=function(t,e,n,i,o){var a,r,s,l,g=this.getPanZoomCanvas();if("fixed"===this.Options.panning){var u=g.getMinZoom(),d=(g.getSize().w-n*u)/2-t*u,h=(g.getSize().h-i*u)/2-e*u,c=o/u;a=g.getSize().w-g.getSize().w*c+d*c,s=g.getSize().h-g.getSize().h*c+h*c,r=d*c,l=h*c}else{var p=g.getSize().w/2,y=g.getSize().h/2;a=p-(n+t)*o,s=y-(i+e)*o,r=p-t*o,l=y-e*o}if(this.IsLayoutViewport()){var m,C,f=this.GetLayoutViewport();-f.x*o<a?(a-=m=a+f.x*o,r+=m):-f.x*o>r&&(a-=m=-f.x*o-r,r+=m),-f.y*o<s?(s-=C=s+f.y*o,l+=C):-f.y*o>l&&(s-=C=-f.y*o-l,l+=C)}g.setMinPanX(a),g.setMinPanY(s),g.setMaxPanX(r),g.setMaxPanY(l),this.Overview&&this.Overview.updateConstraints(a,s,r,l)},t.BaseDiagram.getContainerPadding=function(t){var e=new Object;return e.top=t.top,e.right=t.right,e.bottom=t.bottom,e.left=t.left,e},t.BaseDiagram.getLayoutContainerPadding=function(t){var e=new Object;return e.top=t.top,e.right=t.right,e.bottom=t.bottom,e.left=t.left,e},t.BaseDiagram.prototype.ApplyLabelPosition=function(e,n,i){var o=e.getLabelBounds();o=t.DiagramLayoutUtils.convertDiagramRectToRect(o);var a=e.getLabelPosition();if(o&&a){var r=new t.Point(a.x-i.x,a.y-i.y),s=e.getLabelRotationAngle(),l=t.DiagramLayoutUtils.convertDiagramPointToPoint(e.getLabelRotationPoint());n.setLabelBounds(o),n.setLabelPosition(r),n.setLabelAlignments(e.getLabelHalign(),e.getLabelValign()),null!=s&&n.setLabelRotationAngle(s),l&&n.setLabelRotationPoint(l)}},t.BaseDiagram.prototype.getLayoutOffset=function(){return this._layoutOffset?this._layoutOffset:new t.Point(0,0)},t.BaseDiagram.prototype.getCustomObjKeyboardBoundingBox=function(e){var n=e.getElem().getBoundingClientRect(),i=this.getPanZoomCanvas().getContentPane().getElem().getBoundingClientRect(),o=this.getPanZoomCanvas().getContentPane().getMatrix();return new t.Rectangle(n.left-i.left+o.getTx(),n.top-i.top+o.getTy(),n.width,n.height)},t.BaseDiagram.compareValues=function(e,n,i){return!n&&!i||t.Obj.compareValues(e,n,i)},t.BaseDiagramKeyboardHandler=function(t,e){this.Init(t,e)},t.Obj.createSubclass(t.BaseDiagramKeyboardHandler,t.PanZoomCanvasKeyboardHandler,"dvt.BaseDiagramKeyboardHandler"),t.BaseDiagramKeyboardHandler._OUTGOING=0,t.BaseDiagramKeyboardHandler._INGOING=1,t.BaseDiagramKeyboardHandler.prototype.Init=function(e,n){t.BaseDiagramKeyboardHandler.superclass.Init.call(this,e,n),this._diagram=e},t.BaseDiagramKeyboardHandler.prototype.GetDiagram=function(){return this._diagram},t.BaseDiagramKeyboardHandler.prototype.isSelectionEvent=function(e){return e.keyCode!=t.KeyboardEvent.TAB&&(this.isNavigationEvent(e)&&!e.ctrlKey)},t.BaseDiagramKeyboardHandler.prototype.isMultiSelectEvent=function(e){return e.keyCode==t.KeyboardEvent.SPACE&&e.ctrlKey},t.BaseDiagramKeyboardHandler.prototype.getFirstNavigableLink=function(e,n,i){var o=n.keyCode;if(!i||i.length<1||!e)return null;for(var a=i[0],r=e.getKeyboardBoundingBox(),s=r.x+r.w/2,l=0;l<i.length;l++){var g=i[l],u=g.getKeyboardBoundingBox(),d=u.x+u.w/2;if(o==t.KeyboardEvent.OPEN_ANGLED_BRACKET&&d<=s||o==t.KeyboardEvent.CLOSE_ANGLED_BRACKET&&d>=s){a=g;break}}return a},t.BaseDiagramKeyboardHandler.prototype.getNextNavigableLink=function(e,n,i,o){if(!o)return null;if(!n)return o[0];if(!e)return n;this._addSortingAttributes(e,o),o.sort(this._getLinkComparator()),this._removeSortingAttributes(o);for(var a=i.keyCode==t.KeyboardEvent.DOWN_ARROW,r=0,s=0;s<o.length;s++){if(o[s]===n){r=a?s==o.length-1?0:s+1:0==s?o.length-1:s-1;break}}return o[r]},t.BaseDiagramKeyboardHandler.prototype.GetVisibleNode=function(t){return null},t.BaseDiagramKeyboardHandler.prototype._getClockwiseAngle=function(t,e){var n=this.GetVisibleNode(e.getStartId?e.getStartId():e.getData().getStartId()),i=this.GetVisibleNode(e.getEndId?e.getEndId():e.getData().getEndId()),o=t==n?i:n,a=this._getNodeCenter(t),r=this._getNodeCenter(o),s=Math.atan2(r.y-a.y,r.x-a.x);return s=s<0?s+2*Math.PI:s},t.BaseDiagramKeyboardHandler.prototype._getNodeCenter=function(e){var n=e.getKeyboardBoundingBox();return new t.Point(n.x+n.w/2,n.y+n.h/2)},t.BaseDiagramKeyboardHandler.prototype._getNodesDistance=function(t){var e=this.GetVisibleNode(t.getStartId?t.getStartId():t.getData().getStartId()),n=this.GetVisibleNode(t.getEndId?t.getEndId():t.getData().getEndId()),i=this._getNodeCenter(e),o=this._getNodeCenter(n);return Math.sqrt(Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2))},t.BaseDiagramKeyboardHandler.prototype._getLinkDirection=function(e,n){return e==this.GetVisibleNode(n.getEndId?n.getEndId():n.getData().getEndId())?t.BaseDiagramKeyboardHandler._INGOING:t.BaseDiagramKeyboardHandler._OUTGOING},t.BaseDiagramKeyboardHandler.prototype._getLinkComparator=function(){return function(e,n){var i=e.__angle,o=n.__angle,a=-1;return!t.BaseDiagramKeyboardHandler._anglesAreEqualWithinTolerance(i,o)&&i>o?a=1:t.BaseDiagramKeyboardHandler._anglesAreEqualWithinTolerance(i,o)&&(e.__distance>n.__distance?a=1:n.__distance==e.__distance&&e.__direction>n.__direction?a=1:n.__distance==e.__distance&&e.__direction==n.__direction&&(a=0)),a}},t.BaseDiagramKeyboardHandler.prototype._removeSortingAttributes=function(t){for(var e=0;e<t.length;e++){var n=t[e];n.__angle=void 0,n.__distance=void 0,n.__direction=void 0}},t.BaseDiagramKeyboardHandler.prototype._addSortingAttributes=function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.__angle=this._getClockwiseAngle(t,i),i.__distance=this._getNodesDistance(i),i.__direction=this._getLinkDirection(t,i)}},t.BaseDiagramKeyboardHandler._anglesAreEqualWithinTolerance=function(t,e){var n=Math.abs(t-e)<=1e-7;return n||(n=Math.abs(2*Math.PI+Math.min(t,e)-Math.max(t,e))<=1e-7),n},t.BaseDiagramNode=function(t,e,n){this.Init(t,e,n)},t.Obj.createSubclass(t.BaseDiagramNode,t.Container,"dvt.BaseDiagramNode"),t.BaseDiagramNode.prototype.Init=function(e,n,i){t.BaseDiagramNode.superclass.Init.call(this,e,null,n),this._diagram=i,this._bDisclosed=!1,this._selected=!1,this._selectable=!0},t.BaseDiagramNode.prototype.getDisplayable=function(){return this},t.BaseDiagramNode.prototype.GetDiagram=function(){return this._diagram},t.BaseDiagramNode.prototype.getData=function(){return null},t.BaseDiagramNode.prototype.getLayoutBounds=function(t){return this.getContentBounds(t)},t.BaseDiagramNode.prototype.getContentBounds=function(t){return null},t.BaseDiagramNode.prototype.setLabelPosition=function(e){e&&(this._labelPos=e,t.BaseDiagramNode.PositionLabel(this._labelObj,e,this.getLabelBounds(!0),this.getLabelRotationAngle(),this.getLabelRotationPoint()))},t.BaseDiagramNode.prototype.getLabelPosition=function(){return this._labelPos},t.BaseDiagramNode.prototype.getLabelBounds=function(t){return null},t.BaseDiagramNode.prototype.setLabelBounds=function(t){},t.BaseDiagramNode.prototype.getContainerPadding=function(){return null},t.BaseDiagramNode.prototype.setContainerPadding=function(t,e,n,i){},t.BaseDiagramNode.prototype.isDisclosed=function(){return this._bDisclosed},t.BaseDiagramNode.prototype.setDisclosed=function(t){this._bDisclosed=t},t.BaseDiagramNode.prototype.isSelected=function(){return this._selected},t.BaseDiagramNode.prototype.setSelected=function(t){this._selected=t},t.BaseDiagramNode.prototype.setSelectable=function(t){this._selectable=t},t.BaseDiagramNode.prototype.isSelectable=function(){return this.GetDiagram().isSelectionSupported()&&this._selectable},t.BaseDiagramNode.prototype.setLabelRotationAngle=function(e){this._labelRotAngle=e,t.BaseDiagramNode.PositionLabel(this._labelObj,this.getLabelPosition(),this.getLabelBounds(!0),e,this.getLabelRotationPoint())},t.BaseDiagramNode.prototype.getLabelRotationAngle=function(){return this._labelRotAngle},t.BaseDiagramNode.prototype.setLabelRotationPoint=function(e){this._labelRotPoint=e,t.BaseDiagramNode.PositionLabel(this._labelObj,this.getLabelPosition(),this.getLabelBounds(!0),this.getLabelRotationAngle(),e)},t.BaseDiagramNode.prototype.getLabelRotationPoint=function(){return this._labelRotPoint},t.BaseDiagramNode.prototype.GetNodeBounds=function(){var e=this.getLayoutBounds(!0),n=new t.Rectangle(e.x,e.y,e.w,e.h),i=i=this.getLabelPosition(),o=this.getLabelRotationAngle(),a=this.getLabelRotationPoint(),r=this.getLabelBounds(!0);return i&&r&&(null!=o&&(r=t.BaseDiagram.RotateBounds(r,o,a)),n.x=Math.min(e.x,r.x+i.x),n.y=Math.min(e.y,r.y+i.y),n.w=Math.max(e.x+e.w,r.x+i.x+r.w)-n.x,n.h=Math.max(e.y+e.h,r.y+i.y+r.h)-n.y),n},t.BaseDiagramNode.CalcLabelMatrix=function(e,n,i,o){var a=new t.Matrix;return null!=i&&(o&&(a=a.translate(-o.x,-o.y)),a=a.rotate(i),o&&(a=a.translate(o.x,o.y))),e&&(a=a.translate(e.x,e.y)),a},t.BaseDiagramNode.PositionLabel=function(e,n,i,o,a){if(e){var r=t.BaseDiagramNode.CalcLabelMatrix(n,i,o,a);e.setMatrix(r)}},t.BaseDiagramNode.prototype.SetPosition=function(t,e){this.setTranslate(t,e)},t.BaseDiagramNode.prototype.GetPosition=function(){return new t.Point(this.getTranslateX(),this.getTranslateY())},t.BaseDiagramNode.prototype.getNextNavigable=function(t){return null},t.BaseDiagramNode.prototype.getKeyboardBoundingBox=function(e){if(this._customNodeContent)return this._diagram.getCustomObjKeyboardBoundingBox(this);var n=this.getContentBounds(e),i=this.localToStage(new t.Point(n.x,n.y)),o=this.localToStage(new t.Point(n.x+n.w,n.y+n.h));return new t.Rectangle(i.x,i.y,o.x-i.x,o.y-i.y)},t.BaseDiagramNode.prototype.getTargetElem=function(){return this.getElem()},t.BaseDiagramNode.prototype.showKeyboardFocusEffect=function(){},t.BaseDiagramNode.prototype.hideKeyboardFocusEffect=function(){},t.BaseDiagramNode.prototype.isShowingKeyboardFocusEffect=function(){},t.BaseDiagramNode.prototype.getCategories=function(){return null},t.BaseDiagramNode.prototype.addOutLinkId=function(t){this._outLinkIds||(this._outLinkIds=[]),this._outLinkIds.push(t)},t.BaseDiagramNode.prototype.removeOutLinkId=function(t){if(this._outLinkIds){var e=this._outLinkIds.indexOf(t);-1!=e&&this._outLinkIds.splice(e,1)}},t.BaseDiagramNode.prototype.getOutLinkIds=function(){return this._outLinkIds},t.BaseDiagramNode.prototype.addInLinkId=function(t){this._inLinkIds||(this._inLinkIds=[]),this._inLinkIds.push(t)},t.BaseDiagramNode.prototype.removeInLinkId=function(t){if(this._inLinkIds){var e=this._inLinkIds.indexOf(t);-1!=e&&this._inLinkIds.splice(e,1)}},t.BaseDiagramNode.prototype.getInLinkIds=function(){return this._inLinkIds},t.BaseDiagramNode.prototype.setLabelAlignments=function(t,e){},t.BaseDiagramNode.prototype.getGroupId=function(){return null},t.BaseDiagramLink=function(t,e,n){this.Init(t,e,n)},t.Obj.createSubclass(t.BaseDiagramLink,t.Container,"dvt.BaseDiagramLink"),t.BaseDiagramLink.prototype.Init=function(e,n,i){t.BaseDiagramLink.superclass.Init.call(this,e,null,n),this._diagram=i,this._selected=!1,this._selectable=!0},t.BaseDiagramLink.prototype.getDisplayable=function(){return this},t.BaseDiagramLink.prototype.GetDiagram=function(){return this._diagram},t.BaseDiagramLink.prototype.setEndConnectorType=function(t){},t.BaseDiagramLink.prototype.getEndConnectorType=function(){return null},t.BaseDiagramLink.prototype.setStartConnectorType=function(t){},t.BaseDiagramLink.prototype.setStartConnector=function(t){this._startConnector=t},t.BaseDiagramLink.prototype.getStartConnector=function(){return this._startConnector},t.BaseDiagramLink.prototype.setEndConnector=function(t){this._endConnector=t},t.BaseDiagramLink.prototype.getEndConnector=function(){return this._endConnector},t.BaseDiagramLink.prototype.setShape=function(t){this._shape=t},t.BaseDiagramLink.prototype.getShape=function(){return this._shape},t.BaseDiagramLink.prototype.setLabelRotationAngle=function(e){this._labelRotAngle=e,t.BaseDiagramLink.PositionLabel(this._labelObj,this.getLabelPosition(),this.getLabelBounds(),e,this.getLabelRotationPoint())},t.BaseDiagramLink.prototype.getLabelRotationAngle=function(){return this._labelRotAngle},t.BaseDiagramLink.prototype.setLabelRotationPoint=function(e){this._labelRotPoint=e,t.BaseDiagramLink.PositionLabel(this._labelObj,this.getLabelPosition(),this.getLabelBounds(),this.getLabelRotationAngle(),e)},t.BaseDiagramLink.prototype.getLabelRotationPoint=function(){return this._labelRotPoint},t.BaseDiagramLink.prototype.getLabelPosition=function(){return this._labelPos},t.BaseDiagramLink.prototype.setLabelPosition=function(e){e&&(this._labelPos=e,t.BaseDiagramLink.PositionLabel(this._labelObj,e,this.getLabelBounds(),this.getLabelRotationAngle(),this.getLabelRotationPoint()))},t.BaseDiagramLink.prototype.getLabelBounds=function(){return null},t.BaseDiagramLink.prototype.setLabelBounds=function(t){},t.BaseDiagramLink.prototype.getStartConnectorOffset=function(){return 0},t.BaseDiagramLink.prototype.getEndConnectorOffset=function(){return 0},t.BaseDiagramLink.prototype.setSelectable=function(t){this._selectable=t},t.BaseDiagramLink.prototype.isSelectable=function(){return this.GetDiagram().isSelectionSupported()&&this._selectable},t.BaseDiagramLink.prototype.isSelected=function(){return this._selected},t.BaseDiagramLink.prototype.setSelected=function(t){this._selected=t},t.BaseDiagramLink.prototype.setPromoted=function(t){this._bPromoted=t},t.BaseDiagramLink.prototype.isPromoted=function(){return this._bPromoted},t.BaseDiagramLink.prototype.setLinkWidth=function(t){},t.BaseDiagramLink.prototype.getLinkWidth=function(){return 1},t.BaseDiagramLink.prototype.setLinkStyle=function(t){},t.BaseDiagramLink.prototype.getLinkStyle=function(){return"solid"},t.BaseDiagramLink.prototype.setLinkColor=function(t){},t.BaseDiagramLink.prototype.getLinkColor=function(){return null},t.BaseDiagramLink.prototype.getConnectorTemplate=function(t){return null},t.BaseDiagramLink.prototype.GetAppliedLinkStyle=function(){return this.getLinkStyle()},t.BaseDiagramLink.prototype.GetAppliedLinkWidth=function(){return this.getLinkWidth()},t.BaseDiagramLink.prototype.GetAppliedLinkColor=function(){return this.getLinkColor()},t.BaseDiagramLink.prototype.CreateConnector=function(e,n,i,o){if(n||o){var a;if(!o){var r=this._shape.getStroke();a=new t.Stroke(r.getColor(),r.getAlpha(),r.getWidth())}var s=t.DiagramLinkConnectorUtils.CreateConnectorShape(this.getCtx(),n,o,a,this);return s&&(this._shape.addChild(s),t.DiagramLinkConnectorUtils.TransformConnector(s,n,o,e,i)),s}},t.BaseDiagramLink.prototype.GetLinkBounds=function(){var e=new t.Rectangle(Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),n=this.getPoints();if(n)for(var i,o,a,r,s,l=t.DiagramLinkUtils.GetControlPoints(n),g=0;g<l.length;g++)i=l[g],o=Math.max(e.x+e.w,i.x),a=Math.max(e.y+e.h,i.y),r=Math.min(e.x,i.x),s=Math.min(e.y,i.y),e.x=r,e.y=s,e.w=o-r,e.h=a-s;var u=new t.Rectangle(e.x,e.y,e.w,e.h),d=this.getLabelPosition(),h=this.getLabelRotationAngle(),c=this.getLabelRotationPoint(),p=this.getLabelBounds();return d&&p&&(null!=h&&(p=t.BaseDiagram.RotateBounds(p,h,c)),u.x=Math.min(e.x,p.x+d.x),u.y=Math.min(e.y,p.y+d.y),u.w=Math.max(e.x+e.w,p.x+d.x+p.w)-u.x,u.h=Math.max(e.y+e.h,p.y+d.y+p.h)-u.y),u},t.BaseDiagramLink.prototype.setPoints=function(e){this._arPoints=e,t.DiagramLinkUtils.IsPath(e)?(this._pathCmds=e,this._points=t.DiagramLinkUtils.ConvertToPoints(e)):(this._points=e,this._pathCmds=t.DiagramLinkUtils.ConvertToPath(e)),this._shape&&this._shape instanceof t.Path&&(this._shape.setCommandsArray(this._pathCmds),this._endConnector?t.DiagramLinkConnectorUtils.TransformConnector(this._endConnector,this.getEndConnectorType(),this.getConnectorTemplate(t.DiagramLinkConnectorUtils.END_CONNECTOR),this._points,1):this._endConnector=this.CreateConnector(this._points,this.getEndConnectorType(),1,this.getConnectorTemplate(t.DiagramLinkConnectorUtils.END_CONNECTOR)),this._startConnector?t.DiagramLinkConnectorUtils.TransformConnector(this._startConnector,this.getStartConnectorType(),this.getConnectorTemplate(t.DiagramLinkConnectorUtils.START_CONNECTOR),this._points,0):this._startConnector=this.CreateConnector(this._points,this.getStartConnectorType(),0,this.getConnectorTemplate(t.DiagramLinkConnectorUtils.START_CONNECTOR)));var n=null,i=null;this._linkUnderlay&&this._linkUnderlay.getUnderlay()instanceof t.Path&&this._linkUnderlay.getUnderlay().setCommandsArray(this._pathCmds),this._linkUnderlay&&(n=this._linkUnderlay.getUnderlayStart())&&t.DiagramLinkConnectorUtils.TransformConnector(n,this.getStartConnectorType(),this.getConnectorTemplate(t.DiagramLinkConnectorUtils.START_CONNECTOR),this._points,0),this._linkUnderlay&&(i=this._linkUnderlay.getUnderlayEnd())&&t.DiagramLinkConnectorUtils.TransformConnector(i,this.getEndConnectorType(),this.getConnectorTemplate(t.DiagramLinkConnectorUtils.END_CONNECTOR),this._points,1),this._hitDetectionUnderlay&&this._hitDetectionUnderlay.getUnderlay()instanceof t.Path&&this._hitDetectionUnderlay.getUnderlay().setCommandsArray(this._pathCmds),this._startHandle&&this._startHandle.setPosition(this.getLinkStart()),this._endHandle&&this._endHandle.setPosition(this.getLinkEnd())},t.BaseDiagramLink.prototype.getPoints=function(){return this._arPoints},t.BaseDiagramLink.prototype.getLinkStart=function(){if(!this._points)return null;var e=this._points[0],n=this._points[1];return new t.Point(e,n)},t.BaseDiagramLink.prototype.getLinkEnd=function(){if(!this._points)return null;var e=this._points.length,n=this._points[e-2],i=this._points[e-1];return new t.Point(n,i)},t.BaseDiagramLink.CalcLabelMatrix=function(e,n,i,o){var a=new t.Matrix;return null!=i&&(o&&(a=a.translate(-o.x,-o.y)),a=a.rotate(i),o&&(a=a.translate(o.x,o.y))),e&&(a=a.translate(e.x,e.y)),a},t.BaseDiagramLink.PositionLabel=function(e,n,i,o,a){if(e){var r=t.BaseDiagramLink.CalcLabelMatrix(n,i,o,a);e.setMatrix(r)}},t.BaseDiagramLink.prototype.CreateUnderlay=function(e,n,i,o,a){n||0==n||(n=1),i||0==i||(i=0);var s=this.GetAppliedLinkWidth()+i,l=new t.Stroke(e,n,s,!0);return new r(this.getCtx(),this._pathCmds,l,o,a)},t.BaseDiagramLink.prototype.CreateFeedbackUnderlay=function(e,n,i,o,a){var r=this.CreateUnderlay(e,n,i,o,a);return this._startConnector&&this.getStartConnectorType()&&r.addUnderlayStart(this._points,this.getStartConnectorType(),this.getConnectorTemplate(t.DiagramLinkConnectorUtils.START_CONNECTOR),this),this._endConnector&&this.getEndConnectorType()&&r.addUnderlayEnd(this._points,this.getEndConnectorType(),this.getConnectorTemplate(t.DiagramLinkConnectorUtils.END_CONNECTOR),this),r},t.BaseDiagramLink.prototype.GetStyledLinkStroke=function(e,n,i){var o,a=this.GetAppliedLinkStyle();return"solid"!==strokeType&&(o={dashArray:t.DiagramLinkUtils.GetStrokeDash(a,!0),dashOffset:t.DiagramLinkUtils.GetStrokeDashOffset(a,!0)}),new t.Stroke(n,e.getAlpha(),i,!0,o)},t.BaseDiagramLink.prototype.ReplaceConnectorColor=function(e,n){if(e){var i=null;if(n.getColor&&(i=n.getColor()),i){var o=e.getStroke(),a=e.getFill();o&&e.setStroke(new t.Stroke(i,o.getAlpha(),o.getWidth(),o.isFixedWidth(),o.getDashProps())),a&&e.setSolidFill(i)}}},t.BaseDiagramLink.prototype.getNextNavigable=function(t){return null},t.BaseDiagramLink.prototype.getKeyboardBoundingBox=function(t){return this.getGroupId()&&this._diagram.getOptions().renderer?this._diagram.getCustomObjKeyboardBoundingBox(this):this.getDimensions(t)},t.BaseDiagramLink.prototype.getTargetElem=function(){return this.getElem()},t.BaseDiagramLink.prototype.showKeyboardFocusEffect=function(){},t.BaseDiagramLink.prototype.hideKeyboardFocusEffect=function(){},t.BaseDiagramLink.prototype.isShowingKeyboardFocusEffect=function(){},t.BaseDiagramLink.prototype.setKeyboardFocusNode=function(t){this._keyboardNavNode=t},t.BaseDiagramLink.prototype.getKeyboardFocusNode=function(){return this._keyboardNavNode},t.BaseDiagramLink.prototype.getCategories=function(){return null},t.BaseDiagramLink.prototype.setLabelAlignments=function(t,e){},t.BaseDiagramLink.prototype.getGroupId=function(){return null},t.DiagramLayoutUtils={},t.Obj.createSubclass(t.DiagramLayoutUtils,t.Obj,"dvt.DiagramLayoutUtils"),t.DiagramLayoutUtils.convertRectToDiagramRect=function(e){return void 0===e||null==e?null:new t.DiagramRectangle(e.x,e.y,e.w,e.h)},t.DiagramLayoutUtils.convertPointToDiagramPoint=function(e){return void 0===e||null==e?null:new t.DiagramPoint(e.x,e.y)},t.DiagramLayoutUtils.convertDiagramRectToRect=function(e){return e?new t.Rectangle(e.x,e.y,e.w,e.h):null},t.DiagramLayoutUtils.convertDiagramPointToPoint=function(e){return e?new t.Point(e.x,e.y):null};var r=function(t,e,n,i,o){r.superclass.Init.call(this,t),this.Init(t,e,n,i,o)};t.Obj.createSubclass(r,t.Container,"DvtDiagramLinkUnderlay"),r.prototype.Init=function(e,n,i,o,a){n||(n=["M",0,0,"L",1,0]),this._stroke=i,this._stroke||(this._stroke=new t.Stroke("#ffffff",1,1,!0)),this._underlay=new t.Path(e,n),this._underlay.setStroke(this._stroke),this._underlay.setFill(null),this._underlay.setStyle(o).setClassName(a),this.addChild(this._underlay),this._underlayStart=null,this._underlayStartType=null,this._underlayEnd=null,this._underlayEndType=null},r.prototype.addUnderlayStart=function(t,e,n,i){var o=this.CreateConnectorUnderlay(t,e,n,i,0);this._underlayStart&&this.removeChild(this._underlayStart),this._underlayStart=o,this._underlayStartType=e,this.addChild(this._underlayStart)},r.prototype.addUnderlayEnd=function(t,e,n,i){var o=this.CreateConnectorUnderlay(t,e,n,i,1);this._underlayEnd&&this.removeChild(this._underlayEnd),this._underlayEnd=o,this._underlayEndType=e,this.addChild(this._underlayEnd)},r.prototype.CreateConnectorUnderlay=function(e,n,i,o,a){var r=new t.Stroke(this._stroke.getColor(),this._stroke.getAlpha(),this._stroke.getWidth(),!1,this._stroke.getDashProps()),s=t.DiagramLinkConnectorUtils.CreateConnectorShape(this.getCtx(),n,i,r,o);return t.DiagramLinkConnectorUtils.TransformConnector(s,n,i,e,a),s},r.prototype.getUnderlay=function(){return this._underlay},r.prototype.getUnderlayStart=function(){return this._underlayStart},r.prototype.getUnderlayEnd=function(){return this._underlayEnd},r.prototype.setStroke=function(e,n){var i,o;(this._stroke=e,this._underlay.setStroke(e),this._underlayStart)&&(this._underlayStartType==t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW||this._underlayStartType==t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW_CONCAVE?(i=new t.Stroke(e.getColor(),e.getAlpha(),n),this._underlayStart.setSolidFill(e.getColor())):i=new t.Stroke(e.getColor(),e.getAlpha(),e.getWidth()),this._underlayStart.setStroke(i));this._underlayEnd&&(this._underlayEndType==t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW||this._underlayEndType==t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW_CONCAVE?(o=new t.Stroke(e.getColor(),e.getAlpha(),n),this._underlayEnd.setSolidFill(e.getColor())):o=new t.Stroke(e.getColor(),e.getAlpha(),e.getWidth()),this._underlayEnd.setStroke(o))},r.prototype.getStroke=function(){return this._stroke},r.prototype.hideUnderlayStart=function(){this._underlayStart&&this.removeChild(this._underlayStart)},r.prototype.hideUnderlayEnd=function(){this._underlayEnd&&this.removeChild(this._underlayEnd)},r.prototype.showUnderlayStart=function(){this._underlayStart&&this.addChild(this._underlayStart)},r.prototype.showUnderlayEnd=function(){this._underlayEnd&&this.addChild(this._underlayEnd)},t.DiagramLinkUtils={},t.Obj.createSubclass(t.DiagramLinkUtils,t.Obj,"dvt.DiagramLinkUtils"),t.DiagramLinkUtils.GetStrokeDash=function(t,e){return"solid"==t?null:"dash"===t?e?"8,2":"6,4":"dot"===t?e?"4,1":"2,3":"dashDot"===t?e?"10,1,4,1":"8,3,2,3":void 0},t.DiagramLinkUtils.GetStrokeDashOffset=function(t,e){return e&&"solid"!=t?1:null},t.DiagramLinkUtils.getStrokeObject=function(e,n){return{_type:e,strokeDasharray:t.DiagramLinkUtils.GetStrokeDash(e,n),strokeDashoffset:t.DiagramLinkUtils.GetStrokeDashOffset(e,n)}},t.DiagramLinkUtils.processStrokeDashArray=function(t){if(t){var e=t.split(/[\s,]+/);return e.length%2>0&&(e=e.concat(e)),e.toString()}return t},t.DiagramLinkUtils.getCustomUnderlay=function(e){if(e){for(var n=e.split(/[\s,]+/),i="",o=0;o<n.length;o++){var a=t.CSSStyle.toNumber(n[o].trim());i+=o%2==0?a+2:a>=2?a-2:0,o<n.length-1&&(i+=", ")}return i}return null},t.DiagramLinkUtils.ConvertToPath=function(t){var e=[];if(t)for(var n=0;n<t.length;n+=2)0==n?e.push("M"):e.push("L"),e.push(t[n]),e.push(t[n+1]);return e},t.DiagramLinkUtils.ConvertToPoints=function(t){var e=[];if(t)for(var n=0;n<t.length;n++)isNaN(t[n])||e.push(t[n]);return e},t.DiagramLinkUtils.IsPath=function(t){return!!(t&&t.length>0)&&isNaN(t[0])},t.DiagramLinkUtils.GetControlPoints=function(e){var n,i=[];n=t.DiagramLinkUtils.IsPath(e)?t.DiagramLinkUtils.ConvertToPoints(e):e;for(var o=0;o<n.length;o+=2)i.push(new t.Point(n[o],n[o+1]));return i},t.DiagramLinkConnectorUtils={},t.Obj.createSubclass(t.DiagramLinkConnectorUtils,t.Obj,"dvt.DiagramLinkConnectorUtils"),t.DiagramLinkConnectorUtils.END_CONNECTOR="endConnector",t.DiagramLinkConnectorUtils.START_CONNECTOR="startConnector",t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW_OPEN="arrowOpen",t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW="arrow",t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW_CONCAVE="arrowConcave",t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_RECTANGLE="rectangle",t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_RECTANGLE_ROUNDED="rectangleRounded",t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_CIRCLE="circle",t.DiagramLinkConnectorUtils.CreateConnectorShape=function(e,n,i,o,a){if(i)return t.DiagramLinkConnectorUtils.CreateCustomConnector(e,i,a);var r=a.GetAppliedLinkWidth();switch(n){case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW:return t.DiagramLinkConnectorUtils.CreateFilledArrowConnector(e,r,a.getLinkColor());case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW_CONCAVE:return t.DiagramLinkConnectorUtils.CreateFilledConcaveArrowConnector(e,r,a.getLinkColor());case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW_OPEN:return t.DiagramLinkConnectorUtils.CreateOpenArrowConnector(e,r,o);case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_CIRCLE:return t.DiagramLinkConnectorUtils.CreateCircleConnector(e,r,o);case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_RECTANGLE:return t.DiagramLinkConnectorUtils.CreateRectangleConnector(e,r,o);case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_RECTANGLE_ROUNDED:return t.DiagramLinkConnectorUtils.CreateRoundedRectangleConnector(e,r,o)}return null},t.DiagramLinkConnectorUtils.TransformConnector=function(e,n,i,o,a){var r=t.DiagramLinkConnectorUtils.CalcConnectorTransform(e,n,i,o,a);e.setMatrix(r)},t.DiagramLinkConnectorUtils.CalcConnectorTransform=function(e,n,i,o,a){var r=-1,s=0,l=0,g=0;if(o){var u=o.length;1===a?(u>=2&&(l=o[u-2],g=o[u-1]),u>=4?(r=o[u-4],s=o[u-3]):(r=l-1e-4,s=g)):(u>=2&&(l=o[0],g=o[1]),u>=4?(r=o[2],s=o[3]):(r=l+1e-4,s=g))}else;var d=l,h=g,c=t.DiagramLinkConnectorUtils.CalcConnectorRotation(r,s,l,g),p=e._connectorOrigMat;p||(p=e.getMatrix(),e._connectorOrigMat=p);var y=new t.Matrix;if(i){var m=t.DiagramLinkConnectorUtils._getCachedDims(e),C=e.getScaleX(),f=e.getScaleY(),_=m.w*C*-.5,D=m.h*f*-.5;y=y.translate(_,D)}return(y=(y=y.rotate(c)).translate(d,h)).concat(p)},t.DiagramLinkConnectorUtils._getCachedDims=function(t){var e=t._cachedDims;return e||(e=t.getDimensions(),t._cachedDims=e),e},t.DiagramLinkConnectorUtils.CalcConnectorRotation=function(t,e,n,i){var o=i-e,a=n-t;return Math.atan2(o,a)},t.DiagramLinkConnectorUtils.CreateFilledConcaveArrowConnector=function(e,n,i){var o=6*t.DiagramLinkConnectorUtils._getReduce(n,.5),a=.8*o,r=[-.22*o,-.5*a,.78*o,0,-.22*o,.5*a,0,0],s=new t.Polygon(e,r);return s.setSolidFill(i),s},t.DiagramLinkConnectorUtils.CreateFilledArrowConnector=function(e,n,i){var o=5*t.DiagramLinkConnectorUtils._getReduce(n,.5),a=.8*o,r=[0,-.5*a,o,0,0,.5*a],s=new t.Polygon(e,r);return s.setSolidFill(i),s},t.DiagramLinkConnectorUtils._getReduce=function(t,e){if(t<=1)return t;var n=t-1;return 1+(n*=e)},t.DiagramLinkConnectorUtils.CreateOpenArrowConnector=function(e,n,i){var o=3*n,a=i.getWidth(),r=[-o+a*Math.sqrt(2)/2,-o,a*Math.sqrt(2)/2,0,-o+a*Math.sqrt(2)/2,o],s=new t.Polyline(e,r);return s.setStroke(i),s.setFill(null),s},t.DiagramLinkConnectorUtils.getCircleRadius=function(t){return 2*t},t.DiagramLinkConnectorUtils.getRectangleLength=function(t){return 3*t},t.DiagramLinkConnectorUtils.CreateCircleConnector=function(e,n,i){var o=t.DiagramLinkConnectorUtils.getCircleRadius(n),a=new t.Circle(e,o,0,o);return a.setStroke(i),a.setFill(null),a},t.DiagramLinkConnectorUtils.CreateRectangleConnector=function(e,n,i){var o=t.DiagramLinkConnectorUtils.getRectangleLength(n),a=new t.Rect(e,0,-o/2,o,o);return a.setStroke(i),a.setFill(null),a},t.DiagramLinkConnectorUtils.CreateRoundedRectangleConnector=function(e,n,i){var o=t.DiagramLinkConnectorUtils.CreateRectangleConnector(e,n,i);return o.setCornerRadius(n),o},t.DiagramLinkConnectorUtils.CreateCustomConnector=function(e,n,i){var o=i.GetDiagram().createAfContext();return o.setELContext(i.getData().getElAttributes()),o.setContextCallback(i,i.eventContextCallback),o.setTabStopsArray(i.getTabStopsArray()),t.AfComponentFactory.parseAndLayout(o,n,i)},t.DiagramLinkConnectorUtils.GetConnectorOffset=function(e,n,i,o,a){if(i){var r=t.DiagramLinkConnectorUtils._getCachedDims(e),s=e.getScaleX();return r.w*s*.5}return t.DiagramLinkConnectorUtils.getStandardConnectorOffset(n,a.GetAppliedLinkWidth(),o.getWidth())},t.DiagramLinkConnectorUtils.getStandardConnectorOffset=function(e,n,i){switch(e){case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW_OPEN:return i*Math.sqrt(2);case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW:return 5*t.DiagramLinkConnectorUtils._getReduce(n,.5);case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW_CONCAVE:return.78*(6*t.DiagramLinkConnectorUtils._getReduce(n,.5));case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_CIRCLE:return 2*t.DiagramLinkConnectorUtils.getCircleRadius(i)+i/2;case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_RECTANGLE:case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_RECTANGLE_ROUNDED:return t.DiagramLinkConnectorUtils.getRectangleLength(i)+i/2;default:return 0}}}(dvt);
!function(t){var e=new Object;t.Obj.createSubclass(e,t.Obj),e.prepareNodeStyle=function(e,i){!e||null==e[i]||e[i]instanceof Object||(e[i]=t.CSSStyle.cssStringToObject(e[i]))},e.prepareLinkStyle=function(e,i){e&&null!=e[i]&&(e[i]instanceof Object?null==e[i]._type&&(e[i]._type=g.CUSTOM_STYLE):e[i]=t.DiagramLinkUtils.getStrokeObject(e[i]))},e.getNodeDefaultStyles=function(t){var i=t.getOptions().styleDefaults.nodeDefaults;return e.prepareNodeStyle(i,"backgroundStyle"),e.prepareNodeStyle(i,"containerStyle"),i},e.getNodeStyles=function(i,n,o){if(i.isDataProviderMode())return t.JsonUtils.merge(n,o,{_itemData:!0,id:!0,nodes:!0});var a=c.ConvertNodeData(n);if(i.getOptions().nodeProperties){var s=t.JsonUtils.clone(i.getOptions().nodeProperties(n));e.prepareNodeStyle(s,"backgroundStyle"),e.prepareNodeStyle(s,"containerStyle"),a=t.JsonUtils.merge(a,s,{_itemData:!0})}return t.JsonUtils.merge(a,o,{_itemData:!0})},e.getLinkDefaultStyles=function(i,n){var o=i.getOptions().styleDefaults[n];e.prepareLinkStyle(o,"style");var a=i.getCtx().isCustomElement()?"svgStyle":"style";return o[a]=t.JsonUtils.merge(o[a],o._style),i.getCtx().isCustomElement()&&["_type"].forEach(function(t){delete o[a][t]}),o},e.getLinkStyles=function(i,n,o){if(i.isDataProviderMode())return t.JsonUtils.merge(n,o,{_itemData:!0,id:!0});var a=g.ConvertLinkData(n);if(i.getOptions().linkProperties){var s=t.JsonUtils.clone(i.getOptions().linkProperties(n));e.prepareLinkStyle(s,"style"),a=t.JsonUtils.merge(a,s,{_itemData:!0})}return t.JsonUtils.merge(a,o,{_itemData:!0})},e.getAnimationDuration=function(e){return t.CSSStyle.getTimeMilliseconds(e.getOptions().styleDefaults.animationDuration)/1e3},e.getAnimationOnDisplay=function(t){return t.getOptions().animationOnDisplay},e.getAnimationOnDataChange=function(t){return t.getOptions().animationOnDataChange};var i=new Object;t.Obj.createSubclass(i,t.Obj),i.GetCollapsedContainers=function(t,e){for(var i=[];e.length>0;){var n=e.shift();if(n.nodes)n.nodes.forEach(function(t){e.push(t)});else{var o=t.getChildDataProvider(n.id);!o||"yes"===o.isEmpty()||"disjoint"===n.descendantsConnectivity||i.push(n)}}return i},i.GetNodeOption=function(e,i){for(var n=[i.getId()];i&&i.getGroupId();){var o=i.getGroupId();n.push(o),i=e.getNodeById(o)}for(var a=n.pop(),s=[e.getOptions()],r=e.getCtx();a&&s[0].nodes;)s=s[0].nodes.filter(function(e){return t.BaseDiagram.compareValues(r,e.id,a)}),a=n.pop();return s[0]};var n={};t.Obj.createSubclass(n,t.Obj,"DvtDiagramOverviewUtils"),n.CalcViewportFromMatrix=function(e){var i=e.getPanZoomCanvas().getContentPaneMatrix(),n=new t.Rectangle(0,0,e.getWidth(),e.getHeight()),o=i.getTx(),a=i.getTy(),s=i.getA(),r=n.x-o/s,d=n.y-a/s,h=n.w/s,l=n.h/s;return new t.Rectangle(r,d,h,l)},n.CreateOverviewWindow=function(e){var i=new t.Container(e.getCtx()),a=new o(e);i.addChild(a),e.addChild(i),a.render(),n._positionOverviewWindow(e,a);var s=a.getOverviewWidth(),r=a.getOverviewHeight(),d=new t.ClipPath(e.getId()+"dgr_ovClip");d.addRect(a.getTranslateX()-1,a.getTranslateY()-1,s+2,r+2),a.setClipPath(d),a.UpdateViewport();var h=e.Options.styleDefaults._overviewStyles,l=new t.Rect(e.getCtx(),0,0,s,r);return l.setInvisibleFill(),l.setStroke(new t.Stroke(h.overview.backgroundColor,1,1)),l.setMouseEnabled(!1),i.addChild(l),a},n.CreateOverviewContent=function(e,i,o,a){var s=new t.Container(e.getCtx());s.setMouseEnabled(!1),i.Nodes=new(e.getCtx().ojMap);var r=e.GetViewBounds();i.ContentBounds=r?r.clone():null,i.StretchFactor={h:1,v:1};var d=e.GetRootNodeObjects();return d.length>0&&(d.forEach(function(t){n.CreateOverviewNode(e,i,t,s)}),n._adjustNodePositionsForAspectRatio(e,i,o,a),n.ZoomToFitOverviewContent(e,i,s,o,a)),s},n.CreateOverviewNode=function(e,i,o,a){if(o){var s=n._createOverviewNodeShape(e,o);if(n._positionOverviewNode(o,s),i.Nodes.set(o.getId(),s),a.addChild(s),o.isDisclosed()){s._ovChildNodePane=new t.Container(e.getCtx()),s.addChild(s._ovChildNodePane);var r=o.getContainerPadding();s._ovChildNodePane.setTranslate(r.left,r.top),o.getChildNodeIds().forEach(function(t){var o=e.getNodeById(t);n.CreateOverviewNode(e,i,o,s._ovChildNodePane)})}}},n.RemoveOverviewWindow=function(t,e){if(e){e.setClipPath(null);var i=e.getParent();t.removeChild(i)}},n.UpdateOverviewWindow=function(e,i){i.ContentBounds=e.GetViewBounds(),n._positionOverviewWindow(e,i),n._updateOverviewNodes(e,i),i.Nodes.size>0&&n.ZoomToFitOverviewContent(e,i,i.Content,i.Width,i.Height),i.UpdateViewport();var o=i.getOverviewWidth(),a=i.getOverviewHeight();i.setClipPath(null);var s=new t.ClipPath(e.getId()+"dgr_ovClip");s.addRect(i.getTranslateX()-1,i.getTranslateY()-1,o+2,a+2),i.setClipPath(s);var r=i.getParent().getChildIndex(1);r instanceof t.Rect&&(r.setWidth(o),r.setHeight(a))},n.UpdateOverviewContent=function(t,e,i,o){var a=o.data.nodes;if(a&&0!==a.length){var s=o.parentId,r=s?t.getNodeById(s):null,d=[];if("add"==i)if(r){var h=n._findRootNode(t,r);n._removeNode(t,e,h.getId()),d.push(h)}else a.forEach(function(e){d.push(t.getNodeById(e.id))});else if("change"==i){var l=new(t.getCtx().ojMap);a.forEach(function(e){var i=n._findRootNode(t,t.getNodeById(e.id));i&&l.set(i.getId(),i)}),l.forEach(function(i,o,a){n._removeNode(t,e,o),d.push(i)})}else if("remove"==i)if(r){h=n._findRootNode(t,r);n._removeNode(t,e,h.getId()),d.push(h)}else a.forEach(function(i){n._removeNode(t,e,i.id)});d.forEach(function(i){n.CreateOverviewNode(t,e,i,e.Content)})}},n.TransformFromContentToViewportCoords=function(e,i,n){var o=n.Content,a=o.getTranslateX(),s=o.getTranslateY(),r=o.getScaleX(),d=o.getScaleY(),h=e*r*n.StretchFactor.h+a,l=i*d*n.StretchFactor.v+s;return new t.Point(h,l)},n.TransformFromViewportToContentCoords=function(e,i,n){var o=n.Content,a=o.getTranslateX(),s=o.getTranslateY(),r=o.getScaleX(),d=o.getScaleY(),h=(e-a)/r/n.StretchFactor.h,l=(i-s)/d/n.StretchFactor.v;return new t.Point(h,l)},n.ZoomToFitOverviewContent=function(t,e,i,o,a){var s=e.ContentBounds,r=n._calcOverviewScale(t,s,o,a,e);i.setScale(r,r);var d=(o-s.w*r)/2-s.x*r,h=(a-s.h*r)/2-s.y*r;i.setTranslate(d,h)},n._adjustNodePositionsForAspectRatio=function(e,i,o,a){if("meet"!==e.Options.overview.preserveAspectRatio){var s=e.GetViewBounds(),r=2*t.CSSStyle.toNumber(e.Options.styleDefaults._overviewStyles.overviewContent.padding);if("canvas"===e.Options.overview.fitArea)var d=n._getCanvasDimensions(e),h=d.w/d.h;else h=s.w/s.h;var l=(o-r)/(a-r);if(l==h)return;var g=l>h?l/h:1,c=l<h?h/l:1;i.ContentBounds=s.clone(),i.ContentBounds.w=i.ContentBounds.w*g,i.ContentBounds.h=i.ContentBounds.h*c,i.StretchFactor={h:g,v:c};var u=e.GetRootNodeObjects();if(u.length>0){var p=n._getNodesStretchFactor(i,u,i.StretchFactor);if(1===p.h&&1===p.v)return i.ContentBounds=s.clone(),void(i.StretchFactor={h:1,v:1});u.forEach(function(t){n._adjustNodePosition(i.Nodes.get(t.getId()),p)})}}},n._getCanvasDimensions=function(e){var i;if("fixed"===e.Options.panning||"none"===e.Options.panning)i=new t.Dimension(e.Width,e.Height);else{var n=e.GetViewBounds(),o=e.getPanZoomCanvas().getMinZoom();i=new t.Dimension(2*n.w*o,2*n.h*o)}return i},n._adjustNodePosition=function(t,e){var i=t.getCenterDimensions(),n=t.getTranslateX(),o=t.getTranslateY();if(e.h>1){var a=(n+i.x-e.tx)*e.h+e.tx;t.setTranslateX(a-.5*i.w)}else if(e.v>1){var s=(o+i.y-e.ty)*e.v+e.ty;t.setTranslateY(s-.5*i.h)}},n._getNodesStretchFactor=function(t,e,i){var n={h:1,v:1};if(i.h>1){var o=Number.MAX_VALUE,a=-Number.MAX_VALUE;e.forEach(function(t){var e=t.getContentBounds(),i=t.getTranslateX()+e.x+.5*e.w;d=i<o?e:d,h=i>a?e:h,o=Math.min(i,o),a=Math.max(i,a)});var s=.5*d.w,r=.5*h.w;n={h:a===o?1:(t.ContentBounds.w-s-r)/(a-o),v:1,tx:s}}if(i.v>1){var d,h,l=Number.MAX_VALUE,g=-Number.MAX_VALUE;e.forEach(function(t){var e=t.getContentBounds(),i=t.getTranslateY()+e.y+.5*e.h;d=i<l?e:d,h=i>g?e:h,l=Math.min(i,l),g=Math.max(i,g)});s=.5*d.h,r=.5*h.h;n={h:1,v:g===l?1:(t.ContentBounds.h-s-r)/(g-l),ty:s}}return n},n._calcOverviewScale=function(e,i,o,a,s){var r=2*t.CSSStyle.toNumber(e.Options.styleDefaults._overviewStyles.overviewContent.padding),d=o-r,h=a-r;if("canvas"===e.Options.overview.fitArea){var l=e.GetViewBounds(),g=e.getPanZoomCanvas().getMinZoom(),c=n._getCanvasDimensions(e),u=Math.min((c.h-l.h*g)/2,(c.w-l.w*g)/2),p=s.StretchFactor.h,_=s.StretchFactor.v,f=d/c.w*p,m=h/c.h*_,v=Math.min(f,m);d-=2*u*p*v,h-=2*u*_*v}var C=d/i.w,y=h/i.h;return Math.min(C,y)},n._createOverviewNodeShape=function(e,i){var n=e.Options.styleDefaults._overviewStyles.node;i.getData().overview&&(n=t.JsonUtils.merge(i.getData().overview.icon,n));var o=n.shape;i.isDisclosed()||e.Options.renderer&&"inherit"==o?o="rectangle":"inherit"==o&&(o=i.getData().icon.shape);var a=i.getLayoutBounds(),s=a.w,r=a.h,d=new t.SimpleMarker(e.getCtx(),o,s/2,r/2,s,r,0),h=i.isDisclosed()?"oj-diagram-overview-container-node":"oj-diagram-overview-node";return n.svgClassName&&(h+=" "+n.svgClassName),d.setStyle(n.svgStyle).setClassName(h),d},n._findRootNode=function(t,e){for(var i=e,n=e?e.getGroupId():null;n;)n=(i=t.getNodeById(n)?t.getNodeById(n):i).getGroupId();return i},n._positionOverviewNode=function(t,e){var i=t.getTranslateX(),n=t.getTranslateY();e.setTranslate(i,n)},n._positionOverviewWindow=function(e,i){var n=e.Options.overview.halign,o=e.Options.overview.valign,a=t.CSSStyle.toNumber(e.Options.styleDefaults._overviewStyles.overview.padding),s=i.getOverviewWidth(),r=i.getOverviewHeight(),d=e.Width,h=e.Height;switch(n){case"start":n=t.Agent.isRightToLeft(e.getCtx())?"right":"left";break;case"end":n=t.Agent.isRightToLeft(e.getCtx())?"left":"right"}var l="center"==n?(d-s)/2:"right"==n?d-s-a:a,g="middle"==o?(h-r)/2:"bottom"==o?h-r-a:a;i.getParent().setTranslate(l,g)},n._removeNode=function(t,e,i){var n=e.Nodes.get(i);n&&n.getParent().removeChild(n)},n._updateOverviewNodes=function(t,e){e.Nodes.forEach(function(i,o,a){var s=t.getNodeById(o);s&&i?n._positionOverviewNode(s,i):i&&!s&&e.Nodes.delete(o)}),n._adjustNodePositionsForAspectRatio(t,e,e.Width,e.Height)};var o=function(t){this.Init(t.getCtx(),t.processEvent,t),this.Diagram=t,this._id=t.getId()+"_overview"};t.Obj.createSubclass(o,t.Overview),o.prototype.renderData=function(t,e){this.Content=n.CreateOverviewContent(this.Diagram,this,t,e),this.addChild(this.Content),this.Content.setMouseEnabled(!1)},o.prototype.render=function(){var t=Math.min(this.Diagram.Width,this.Diagram.Options.overview.width),e=Math.min(this.Diagram.Height,this.Diagram.Options.overview.height),i=this.Diagram.Options.styleDefaults._overviewStyles,n={xMin:0,xMax:t,yMin:0,yMax:e,x1:0,x2:t,y1:0,y2:e,style:{overviewBackgroundColor:i.overview.backgroundColor,windowBackgroundColor:i.viewport.backgroundColor,windowBorderTopColor:i.viewport.borderColor,windowBorderRightColor:i.viewport.borderColor,windowBorderBottomColor:i.viewport.borderColor,windowBorderLeftColor:i.viewport.borderColor,timeAxisBarColor:"#00000000"},animationOnClick:"off",featuresOff:"zoom"},a=0===this.Diagram.GetAllRoots().length;this._viewportConstraints={xMin:a?0:-Number.MAX_VALUE,yMin:a?0:-Number.MAX_VALUE,xMax:a?t:Number.MAX_VALUE,yMax:a?e:Number.MAX_VALUE},this.Diagram.IsPanningEnabled()||this.setMouseEnabled(!1),o.superclass.render.call(this,n,t,e)},o.prototype.animateUpdate=function(e,i){this.Content.setAlpha(0),e.add(new t.AnimFadeIn(this.getCtx(),this.Content,e.getAnimationDuration()),d.UPDATE);var n=this.getChildIndex(this.Content);this.addChildAt(i.Content,n+1);var o=new t.AnimFadeOut(this.getCtx(),i.Content,e.getAnimationDuration());t.Playable.appendOnEnd(o,function(){i.Content.getParent().removeChild(i.Content)}),e.add(o,d.UPDATE);var a=new t.CustomAnimation(this.getCtx(),null,e.getAnimationDuration()),s=i.GetAnimationParams(),r=this.GetAnimationParams();this.SetAnimationParams(s),a.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this.GetAnimationParams,this.SetAnimationParams,r),e.add(a,d.UPDATE)},o.prototype.updateConstraints=function(t,e,i,o){var a=this.Diagram.getPanZoomCanvas().getZoom(),s=n.TransformFromContentToViewportCoords(-i/a,-o/a,this),r=n.TransformFromContentToViewportCoords(-t/a,-e/a,this),d=this._viewportPosition.x2-this._viewportPosition.x1,h=this._viewportPosition.y2-this._viewportPosition.y1,l=this.Diagram.getPanDirection();this._viewportConstraints={xMin:"y"===l?this._viewportPosition.x1:s.x,xMax:"y"===l?this._viewportPosition.x2:r.x+d,yMin:"x"===l?this._viewportPosition.y1:s.y,yMax:"x"===l?this._viewportPosition.y2:r.y+h}},o.prototype.getMinimumPositionX=function(){return this._viewportConstraints.xMin},o.prototype.getMinimumPositionY=function(){return this._viewportConstraints.yMin},o.prototype.getMaximumPositionX=function(){return this._viewportConstraints.xMax},o.prototype.getMaximumPositionY=function(){return this._viewportConstraints.yMax},o.prototype.getMinimumWindowWidth=function(){return 0},o.prototype.getMaximumWindowWidth=function(){return Number.MAX_VALUE},o.prototype.getMinimumWindowHeight=function(){return 0},o.prototype.getMaximumWindowHeight=function(){return Number.MAX_VALUE},o.prototype.UpdateViewport=function(){if(!this._bCancelUpdateViewport){var t=n.CalcViewportFromMatrix(this.Diagram),e=n.TransformFromContentToViewportCoords(t.x,t.y,this),i=n.TransformFromContentToViewportCoords(t.x+t.w,t.y+t.h,this);this._viewportPosition={x1:e.x,x2:i.x,y1:e.y,y2:i.y},this.setViewportRange(e.x,i.x,e.y,i.y)}},o.prototype.HandleViewportChange=function(t){var e=void 0!==t.newX1?t.newX1:this._viewportPosition.x1,i=void 0!==t.newY1?t.newY1:this._viewportPosition.y1,o=n.TransformFromViewportToContentCoords(this._viewportPosition.x1,this._viewportPosition.y1,this),a=n.TransformFromViewportToContentCoords(e,i,this);this._viewportPosition.x1=e,this._viewportPosition.y1=i;var s=this.Diagram.getPanZoomCanvas().getZoom(),r=(a.x-o.x)*s,d=(a.y-o.y)*s;0===r&&0===d||(this._bCancelUpdateViewport=!0,this.Diagram.getPanZoomCanvas().panBy(-r,-d),this._bCancelUpdateViewport=!1)},o.prototype.GetAnimationParams=function(){var t=[],e=this.getSlidingWindow(),i=this.getLeftHandle(),n=this.getRightHandle(),o=this.getBottomBar(),a=this.getTopBar();return t.push(e.getTranslateX()),t.push(e.getTranslateY()),t.push(e.getWidth()),t.push(e.getHeight()),t.push(i.getX1()),t.push(i.getY1()),t.push(i.getX2()),t.push(i.getY2()),t.push(n.getX1()),t.push(n.getY1()),t.push(n.getX2()),t.push(n.getY2()),t.push(o.getX1()),t.push(o.getY1()),t.push(o.getX2()),t.push(o.getY2()),t.push(a.getX1()),t.push(a.getY1()),t.push(a.getX2()),t.push(a.getY2()),t},o.prototype.SetAnimationParams=function(t){var e=this.getSlidingWindow(),i=this.getLeftHandle(),n=this.getRightHandle(),o=this.getBottomBar(),a=this.getTopBar(),s=0;e.setTranslateX(t[s++]),e.setTranslateY(t[s++]),e.setWidth(t[s++]),e.setHeight(t[s++]),i.setX1(t[s++]),i.setY1(t[s++]),i.setX2(t[s++]),i.setY2(t[s++]),n.setX1(t[s++]),n.setY1(t[s++]),n.setX2(t[s++]),n.setY2(t[s++]),o.setX1(t[s++]),o.setY1(t[s++]),o.setX2(t[s++]),o.setY2(t[s++]),a.setX1(t[s++]),a.setY1(t[s++]),a.setX2(t[s++]),a.setY2(t[s++])},o.prototype.CreateAnimationClone=function(){var e=this.getCtx(),i=new t.Container(e,this.getId());i.ContentBounds=this.Diagram.GetViewBounds(),i.setMouseEnabled(!1);var o=new t.Container(e,"ovContentClone");i.addChild(o),i.Content=o,i.Nodes=new e.ojMap,i.Diagram=this.Diagram;var a=this.Diagram.GetRootNodeObjects();a.length>0&&(a.forEach(function(t){n.CreateOverviewNode(i.Diagram,i,t,o)}),n.ZoomToFitOverviewContent(i.Diagram,i,o,this.Width,this.Height));var s=this.GetAnimationParams();return i.GetAnimationParams=function(){return s},i},t.Diagram=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.Diagram,t.BaseDiagram),t.Diagram.prototype.Init=function(e,i,n){t.Diagram.superclass.Init.call(this,e,i,n),this.Defaults=new s(e),this.EventManager=new h(e,this.processEvent,this),this.EventManager.addListeners(this),t.Agent.isTouchDevice()||this.EventManager.setKeyboardHandler(new l(this,this.EventManager)),this._nodes=new e.ojMap,this._arNodeIds=[],this._arRootIds=[],this._links=new e.ojMap,this._arLinkIds=[],this._renderCount=0,this._deferredObjCount=0,this._allNodeIdsMap=new e.ojMap,this._unresolvedNodeIds=[],this._nodesToResolve=[],this._touchEventContentDiagramObjRef=null,this.setId("diagram")},t.Diagram.newInstance=function(e,i,n){return new t.Diagram(e,i,n)},t.Diagram.prototype.PreRender=function(){!this.IsResize()&&this._bRendered&&("none"!=e.getAnimationOnDataChange(this)&&(this._oldDataAnimState=new r(this)),this._currentViewport=this.getPanZoomCanvas().getViewport(),this._bRendered=!1,this._oldPanZoomCanvas=this.getPanZoomCanvas(),this._setDataSourceListeners(this.getOptions().data,!1)),this.IsResize()?this._layoutContext&&(this._layoutContext.setEventData(null),this._layoutContext.setComponentSize(new t.DiagramRectangle(0,0,this.getWidth(),this.getHeight())),this._layoutContext.setCurrentViewport(null)):(this.ResetNodesAndLinks(),this._oldLayoutContext=this._layoutContext,this._layoutContext=null)},t.Diagram.prototype.ResetNodesAndLinks=function(){var e=this.getCtx();this.setLinksPane(new t.Container(e)),this.setNodesPane(new t.Container(e)),this.setTopPane(new t.Container(e)),this._nodes=new e.ojMap,this._arNodeIds=[],this._arRootIds=[],this._links=new e.ojMap,this._arLinkIds=[],this._highlightedObjects=null,this._promotedLinksMap=null,this._linkToPromotedMap=null,this._collapsedNodes=null,this.isDataProviderMode()||(this.getOptions().nodes=[],this.getOptions().links=[]),this._allNodeIdsMap=new e.ojMap,this._unresolvedNodeIds=[],n.RemoveOverviewWindow(this,this.Overview),this.Overview=null},t.Diagram.prototype._onAnimationEnd=function(){this._deleteContainer&&(this.removeChild(this._deleteContainer),this._deleteContainer.destroy()),this._deleteContainer=null,this.Animation&&this.getEventManager().addListeners(this),this.AnimationStopped||this.RenderComplete(),this.Animation=null,this.AnimationStopped=!1,this._bRendered&&(this._oldDataAnimState=null)},t.Diagram.prototype.animateUpdate=function(e,i){var n=new t.CustomAnimation(this.getCtx(),null,e.getAnimationDuration()),o=i.PanZoomMatrix,a=this.getPanZoomCanvas().getContentPane().getMatrix();o.equals(a)||(this.getPanZoomCanvas().getContentPane().setMatrix(o),n.getAnimator().addProp(t.Animator.TYPE_MATRIX,this.getPanZoomCanvas().getContentPane(),this.getPanZoomCanvas().getContentPane().getMatrix,this.getPanZoomCanvas().getContentPane().setMatrix,a));var s=i.IsPartialUpdate?i.getNewNodes():this.GetRootNodeObjects(),r=i.IsPartialUpdate?i.getNewLinks():this.GetAllLinkObjects();e.constructAnimation(i.getNodes(),s),e.constructAnimation(i.getLinks(),r),e.constructAnimation([i.Overview],[this.Overview]),e.add(n,d.UPDATE)},t.Diagram.prototype._resolveDeferredData=function(t,e){if(null==e||this._isNodeDisclosed(e.id)||this._discoverLinks(t,e)){var i=t.getData(e);this._deferredObjCount++;var n=this,o=this._renderCount;i.then(function(i){n._renderDeferredData(o,t,e||n.getOptions(),i)},function(i){n._renderDeferredData(o,t,e||n.getOptions(),null)})}},t.Diagram.prototype._renderDeferredData=function(t,e,i,n){if(t===this._renderCount&&this.getCtx().isReadyToRender()){if(null!=n){if(i.nodes=n.nodes,Array.isArray(n.links)&&(this.getOptions().links=this.getOptions().links.concat(n.links)),this._findUnresolvedLinks(n),Array.isArray(i.nodes))for(this._nodesToResolve=this._nodesToResolve.concat(i.nodes);this._nodesToResolve.length>0;)this._resolveDeferredData(e,this._nodesToResolve.shift())}else i.nodes=null;this._deferredObjCount--,0===this._deferredObjCount&&this.RenderComponentInternal()}},t.Diagram.prototype._findUnresolvedLinks=function(t,e){if(!("none"===this.getOptions().promotedLinkBehavior||this.isDataProviderMode()&&"lazy"===this.getOptions().promotedLinkBehavior)){var i=function(t,n){Array.isArray(t.nodes)&&t.nodes.forEach(function(t){n.set(t.id,!0),e&&i(t,n)})};i(t,this._allNodeIdsMap);for(var n=this._unresolvedNodeIds.length-1;n>=0;n--)this._allNodeIdsMap.has(this._unresolvedNodeIds[n])&&this._unresolvedNodeIds.splice(n,1);if(Array.isArray(t.links))for(n=0;n<t.links.length;n++){var o=t.links[n];this._allNodeIdsMap.has(o.startNode)||this._unresolvedNodeIds.push(o.startNode),this._allNodeIdsMap.has(o.endNode)||this._unresolvedNodeIds.push(o.endNode)}}},t.Diagram.prototype._discoverLinks=function(t,e){var i=this.getOptions().promotedLinkBehavior;return!("none"===i||0==this._unresolvedNodeIds.length||"lazy"==i&&t.getChildCount(e)<=0)&&"disjoint"!=t.getDescendantsConnectivity(e)},t.Diagram.prototype._setDataSourceListeners=function(t,e){t&&(this._dataSourceAddEventHandler||(this._dataSourceAddEventHandler=this.handleDataSourceChangeEvent.bind(this,"add")),this._dataSourceRemoveEventHandler||(this._dataSourceRemoveEventHandler=this.handleDataSourceChangeEvent.bind(this,"remove")),this._dataSourceChangeEventHandler||(this._dataSourceChangeEventHandler=this.handleDataSourceChangeEvent.bind(this,"change")),e?(t.on("add",this._dataSourceAddEventHandler),t.on("remove",this._dataSourceRemoveEventHandler),t.on("change",this._dataSourceChangeEventHandler)):(t.off("add",this._dataSourceAddEventHandler),t.off("remove",this._dataSourceRemoveEventHandler),t.off("change",this._dataSourceChangeEventHandler)))},t.Diagram.prototype.addDataSourceEventListeners=function(){this._setDataSourceListeners(this.getOptions().data,!0)},t.Diagram.prototype.removeDataSourceEventListeners=function(){this._setDataSourceListeners(this.getOptions().data,!1)},t.Diagram.prototype._fetchDataProviderData=function(t,e){var n=this.isTreeDataProvider()?i.GetCollapsedContainers(t,e,[]):[];if(n.length>0){var o=this,a=n.map(function(e){return o.Options._fetchDataHandler(t,o._context.KeySetImpl([e.id]),e,e.id)}),s=this._renderCount;Promise.all(a).then(function(i){if(s===o._renderCount&&o.getCtx().isReadyToRender()){e=[],i.forEach(function(t){Array.isArray(t)&&t.forEach(function(t){o._allNodeIdsMap.set(t.id,!0),e.push(t)})});for(var n=o._unresolvedNodeIds.length-1;n>=0;n--)o._allNodeIdsMap.has(o._unresolvedNodeIds[n])&&o._unresolvedNodeIds.splice(n,1);o._unresolvedNodeIds.length>0?o._fetchDataProviderData(t,e):o.RenderComponentInternal()}})}else this.RenderComponentInternal()},t.Diagram.prototype.isDataProviderMode=function(){return!!this.getOptions().nodeData},t.Diagram.prototype.isTreeDataProvider=function(){var t=this.getOptions().nodeData;return!(!t||!t.getChildDataProvider)},t.Diagram.prototype.Render=function(){if(t.Diagram.superclass.Render.call(this),this.InitComponentInternal(),this._deferredObjCount=0,this._nodesToResolve=[],this._bRendered||this.IsResize())0===this._deferredObjCount&&this.RenderComponentInternal();else if(this._renderCount++,this.isDataProviderMode()){this._findUnresolvedLinks({nodes:this.Options.nodes,links:this.Options.links},!0);var e=this._unresolvedNodeIds.length>0?this.Options.nodes.slice():[];this._fetchDataProviderData(this.Options.nodeData,e)}else if(this.getOptions().data){var i=this.getOptions().data;this._setDataSourceListeners(i,!1),this._resolveDeferredData(i,null)}else this.RenderComponentInternal()},t.Diagram.prototype.RenderComponentInternal=function(){var t;if(this._bRendered||this.IsResize()||(this._setDataSourceListeners(this.getOptions().data,!0),this.prepareNodes(this.getOptions().nodes),this.renderLinks(this.getOptions().links),this.getCtx().setKeyboardFocusArray([this])),t=0===this._nodes.size)this._processContent(t);else{this.contains(this._oldPanZoomCanvas)||this.addChild(this._oldPanZoomCanvas);var e=this.layout(),i=this,n=this._renderCount;e.then(function(){n===i._renderCount&&i._processContent(t)},function(){n===i._renderCount&&(i.removeChild(i._oldPanZoomCanvas),i._oldPanZoomCanvas=null,i._bRendered=!0,this._currentViewport=null)})}},t.Diagram.prototype._processContent=function(i){var o;if(i||(this.removeChild(this._oldPanZoomCanvas),this._processHighlighting(),this._processInitialSelections(),this._updateKeyboardFocusEffect(),(o=null==this._cachedViewBounds)&&(this._cachedViewBounds=this.GetViewBounds()),this._fitContent()),!this._bRendered){var a=this.getPanZoomCanvas();a.setPanningEnabled(this.IsPanningEnabled()),a.setPanDirection(this.getPanDirection()),a.setZoomingEnabled(this.IsZoomingEnabled()),a.setZoomToFitEnabled(this.IsZoomingEnabled())}!this.Overview&&this.Options.overview&&"on"==this.Options.overview.rendered?this.Overview=n.CreateOverviewWindow(this):this.Overview&&n.UpdateOverviewWindow(this,this.Overview),this._oldPanZoomCanvas=null,this.StopAnimation(!0);var s=e.getAnimationOnDisplay(this),r=e.getAnimationOnDataChange(this);if(this._bRendered||"none"===s||this._oldDataAnimState){if("none"!==r&&this._oldDataAnimState){this._deleteContainer=new t.Container(this.getCtx(),"Delete Container"),this.addChild(this._deleteContainer);var h=new d(this.getCtx(),this._deleteContainer,this._oldDataAnimState,this);h.constructAnimation([this._oldDataAnimState],[this]),this.Animation=h.getAnimation()}}else this.Animation=t.BlackBoxAnimationHandler.getInAnimation(this.getCtx(),t.BlackBoxAnimationHandler.ALPHA_FADE,this,null,e.getAnimationDuration(this));if(this.Animation?(this.getEventManager().hideTooltip(),this.getEventManager().removeListeners(this),this.Animation.setOnEnd(this._onAnimationEnd,this),this.Animation.play()):this._onAnimationEnd(),this._bRendered=!0,this._currentViewport=null,this.RefreshEmptyText(i),this.IsPanningEnabled()){var l=this._cachedViewBounds;if(null!=l){var g=this.getPanZoomCanvas().getZoom();this.ConstrainPanning(l.x,l.y,l.w,l.h,g)}}this.ClearLayoutViewport(),o&&(this._cachedViewBounds=null)},t.Diagram.prototype._fitContent=function(){var e=this.getPanZoomCanvas();if(this._bRendered){if(this.IsResize()||this._partialUpdate){var i=this.AdjustMinZoom();o=(n=this.IsLayoutViewport())?this.GetLayoutViewport():i||this._cachedViewBounds;e.setZoomToFitPadding(n?0:t.PanZoomCanvas.DEFAULT_PADDING),e.setZoomToFitEnabled(!0),e.zoomToFit(null,o),e.setZoomToFitEnabled(this.IsZoomingEnabled())}}else{this.AdjustMinZoom();var n,o=(n=this.IsLayoutViewport())?this.GetLayoutViewport():this._cachedViewBounds;n&&e.setZoomToFitPadding(0),e.zoomToFit(null,o)}},t.Diagram.prototype.SetOptions=function(e){t.Diagram.superclass.SetOptions.call(this,e),this.isDataProviderMode()||(this.Options.nodes=[],this.Options.links=[]),this.SetPanningEnabled("none"!=this.Options.panning),this.SetZoomingEnabled("none"!=this.Options.zooming),this.setSelectionMode(this.Options.selectionMode),this.setEmptyText(this.Options.emptyText?this.Options.emptyText:this.Options.translations.labelNoData)},t.Diagram.getDefaults=function(t){return(new s).getDefaults(t)},t.Diagram.prototype.getMaxZoom=function(){var t=this.getOptions().maxZoom,e=parseFloat(t);return e>0?e:1},t.Diagram.prototype.getMinZoom=function(){var t=this.getOptions().minZoom;if(t){var e=parseFloat(t);return e>0&&(t=Math.min(e,this.getMaxZoom())),t}return 0},t.Diagram.prototype.getPanDirection=function(){return this.getOptions().panDirection},t.Diagram.prototype.getAnimationDuration=function(){return e.getAnimationDuration(this)},t.Diagram.prototype.processEvent=function(t,e){var i=t.type;if("categoryHighlight"==i)this._processHighlighting(!0);else if("selection"==i)this.getOptions().selection=t.selection;else if("overview"==i){var n=t.subtype;return void("scrollPos"!=n&&"scrollTime"!=n||this.Overview.HandleViewportChange(t))}t&&this.dispatchEvent(t)},t.Diagram.prototype.prepareNodes=function(t){if(t){this._prepareNodes(null,t);var e=this.getOptions().expanded;e&&(e.has||this.DisclosedNodes)||(this.DisclosedNodes=e?"all"===e?this._arNodeIds.slice(0):e:[])}},t.Diagram.prototype.renderLinks=function(i){if(i){for(var n=e.getLinkDefaultStyles(this,"linkDefaults"),o=0;o<i.length;o++){var a=i[o];if(!this._isLinkPromoted(a)){a=e.getLinkStyles(this,a,n);var s=g.newInstance(this,a,!1),r=s.getId();if(this._arLinkIds.push(r),!s.isHidden()){var d=this.getNodeById(s.getStartId()),h=this.getNodeById(s.getEndId());d.addOutLinkId(r),h.addInLinkId(r),s.render(),this._links.set(r,s)}}}if(this._promotedLinksMap){var l=e.getLinkDefaultStyles(this,"promotedLink"),c=this;this._promotedLinksMap.forEach(function(e,i,n){if(!c._links.has(i)){var o=t.JsonUtils.merge(e,l),a=g.newInstance(c,o,!0),s=a.getId(),r=c.getNodeById(a.getStartId()),d=c.getNodeById(a.getEndId());r.addOutLinkId(s),d.addInLinkId(s),a.render(),c._arLinkIds.push(s),c._links.set(s,a)}})}}},t.Diagram.prototype.layout=function(){var e=this.getOptions().layout,i=this._getLayoutContext();if(i.setDirtyContext(new(this.getCtx().ojMap)),this._currentViewport){var n=this._currentViewport,o=this.getLayoutOffset(),a=new t.DiagramRectangle(n.x-o.x,n.y-o.y,n.w,n.h);i.setCurrentViewport(a)}if(null!=this.Options.panZoomState){var s=this.Options.panZoomState.centerX,r=this.Options.panZoomState.centerY,d=this.Options.panZoomState.zoom,h=s-.5*this.Width/d,l=r-.5*this.Height/d,g=this.Width/d,c=this.Height/d,u=new t.Rectangle(h,l,g,c);i.setViewport(u)}if(e&&"function"==typeof e){for(var p=i.getNodeCount(),_=0;_<p;_++){var f=i.getNodeByIndex(_);this.renderLeafNodeFromContext(f)}var m=this,v=e(i);v||(v={then:function(t,e){t()}}),this.setAlphas(0);var C=this._renderCount;return v.then(function(t){if(m._renderCount===C||m.IsResize()){m.setAlphas(1),m._oldDataAnimState&&m._oldDataAnimState.updateStateFromLayoutContext(i);for(var e=i.getNodeCount(),n=0;n<e;n++){var o=i.getNodeByIndex(n);m.renderNodeFromContext(o,!0)}m.ApplyLayoutContext(i,!0)}},function(t){}),v}this.Log("dvt.Diagram: Layout function is not defined",1)},t.Diagram.prototype.setAlphas=function(t){this._bRendered||(this.getLinksPane().setAlpha(t),this.getNodesPane().setAlpha(t))},t.Diagram.prototype.getNodeById=function(t){return this._nodes.get(t)},t.Diagram.prototype.getLinkById=function(t){return this._links.get(t)},t.Diagram.prototype.GetAllLinks=function(){return this._arLinkIds},t.Diagram.prototype.GetAllLinksMap=function(){var t=new(this.getCtx().ojMap);return this._links&&this._links.forEach(function(e,i,n){t.set(i,e)}),t},t.Diagram.prototype.GetAllLinkObjects=function(){var t=[];return this._links&&this._links.forEach(function(e,i,n){t.push(e)}),t},t.Diagram.prototype.GetAllNodes=function(){return this._arNodeIds},t.Diagram.prototype.GetAllNodesMap=function(){var t=new(this.getCtx().ojMap);return this._nodes&&this._nodes.forEach(function(e,i,n){t.set(i,e)}),t},t.Diagram.prototype.GetAllNodeObjects=function(){var t=[];return this._nodes&&this._nodes.forEach(function(e,i,n){t.push(e)}),t},t.Diagram.prototype.GetAllRoots=function(){return this._arRootIds},t.Diagram.prototype.GetRootNodeObjects=function(){for(var t=[],e=0;this._arRootIds&&e<this._arRootIds.length;e++){var i=this._nodes.get(this._arRootIds[e]);i&&t.push(i)}return t},t.Diagram.prototype.HandlePanEvent=function(e){t.Diagram.superclass.HandlePanEvent.call(this,e),this.Overview&&this.Overview.UpdateViewport()},t.Diagram.prototype.HandleZoomEvent=function(e){switch(t.Diagram.superclass.HandleZoomEvent.call(this,e),this.Overview&&this.Overview.UpdateViewport(),e.subtype){case"adjustPanConstraints":if(this.IsPanningEnabled()){var i=e.newZoom,n=this.GetViewBounds();this.ConstrainPanning(n.x,n.y,n.w,n.h,i)}break;case"zoomed":var o=this.getOptions().nodeContent||{};!t.Agent.isTouchDevice()&&o.zoomRenderer&&e.oldZoom!==e.newZoom&&this._nodes.forEach(function(t,i,n){t.rerenderOnZoom(e)});break;case"zoomToFitEnd":case"zoomEnd":o=this.getOptions().nodeContent||{};t.Agent.isTouchDevice()&&o.zoomRenderer&&e.oldZoom!==e.newZoom&&this._nodes.forEach(function(t,i,n){t.rerenderOnZoom(e)})}},t.Diagram.prototype.getNavigableLinksForNodeId=function(t){var e=[];return this._links.forEach(function(i,n,o){var a=i.getStartId(),s=i.getEndId();a!=t&&s!=t||!i.getVisible()||e.push(i)}),e},t.Diagram.prototype._processInitialSelections=function(){if(this.Options.selection&&this.isSelectionSupported()){var t=[];this._nodes.forEach(function(e,i,n){t.push(e)}),this._links.forEach(function(e,i,n){t.push(e)}),this.getSelectionHandler().processInitialSelections(this.Options.selection,t)}},t.Diagram.prototype._processHighlighting=function(e){e&&this.EventManager.removeListeners(this,!0),this._highlightedObjects&&(this._updateAlphas(!1,this._highlightedObjects),this._highlightedObjects=null);var i=this.Options.highlightedCategories;if(i&&0!==i.length){var n="any"==this.Options.highlightMatch;this._highlightedObjects=new(this.getCtx().ojMap);var o=[],a=this;this._nodes.forEach(function(e,s,r){(n?t.ArrayUtils.hasAnyItem(e.getCategories(),i):t.ArrayUtils.hasAllItems(e.getCategories(),i))&&(a._highlightedObjects.set(s,e),o.push(e))}),this._processNodeConnections(o);var s=[];if(this._links.forEach(function(e,o,r){(n?t.ArrayUtils.hasAnyItem(e.getCategories(),i):t.ArrayUtils.hasAllItems(e.getCategories(),i))&&(a._highlightedObjects.set(o,e),s.push(e))}),"linkAndNodes"==this.Options.linkHighlightMode&&this._processLinkConnections(s),this._updateAlphas(!0,this._highlightedObjects),e){a=this;setTimeout(function(){a.getEventManager().addListeners(a)},0)}}else e&&this.EventManager.addListeners(this)},t.Diagram.prototype._processNodeConnections=function(t){var e=this.Options.nodeHighlightMode;if("node"!=e){for(var i="nodeAndIncomingLinks"==e||"nodeAndLinks"==e,n="nodeAndOutgoingLinks"==e||"nodeAndLinks"==e,o=[],a=0;a<t.length;a++){var s=t[a],r=i&&s.getInLinkIds()?s.getInLinkIds():[];r=n&&s.getOutLinkIds()?r.concat(s.getOutLinkIds()):r;for(var d=0;d<r.length;d++){var h=r[d];this._highlightedObjects.set(h,this.getLinkById(h)),o.push(this.getLinkById(h))}}this._processLinkConnections(o)}},t.Diagram.prototype._processLinkConnections=function(t){for(var e=0;e<t.length;e++){var i=t[e],n=i.getStartId(),o=i.getEndId();this._highlightedObjects.set(n,this.getNodeById(n)),this._highlightedObjects.set(o,this.getNodeById(o))}},t.Diagram.prototype._updateAlphas=function(t,e){var i=this._nodes.size+this._links.size;if(e.size!==i)if(this._arNodeIds.length==this._arRootIds.length){var n=t?this.Options.styleDefaults._highlightAlpha:1,o=this.getLinksPane(),a=this.getNodesPane();if(e.size>.5*i){var s=this.getBottomPane();s.setAlpha(n),this._links.forEach(function(i,n,a){var r=e.get(n);!r&&t?s.addChild(i):r||o.addChild(i)}),this._nodes.forEach(function(i,n,o){var r=e.get(n);!r&&t?s.addChild(i):r||a.addChild(i)})}else{var r=this.getTopPane();o.setAlpha(n),a.setAlpha(n);var d=[],h=[];e.forEach(function(t,e,i){t instanceof g?d.push(t):t instanceof c&&h.push(t)});for(var l=0;l<d.length;l++)t?r.addChild(d[l]):o.addChild(d[l]);for(l=0;l<h.length;l++)t?r.addChild(h[l]):a.addChild(h[l])}}else t?(e.forEach(function(t,e,i){t.highlight(!0)}),this._nodes.forEach(function(t,i,n){e.has(i)||t.highlight(!1)}),this._links.forEach(function(t,i,n){e.has(i)||t.highlight(!1)})):(this._nodes.forEach(function(t,e,i){t.highlight(!0)}),this._links.forEach(function(t,e,i){t.highlight(!0)}))},t.Diagram.prototype.highlight=function(e){this.Options.highlightedCategories=t.JsonUtils.clone(e),this._processHighlighting()},t.Diagram.prototype.select=function(e){this.Options.selection=t.JsonUtils.clone(e),this._processInitialSelections()},t.Diagram.prototype.getAutomation=function(){return this.Automation||(this.Automation=new u(this)),this.Automation},t.Diagram.prototype.Log=function(t,e){var i=this.getOptions()._logger;if(i)switch(e){case 1:i.error&&i.error(t);break;case 2:i.warn&&i.warn(t);break;case 3:i.info&&i.info(t);break;default:i.log&&i.log(t)}},t.Diagram.prototype.processDefaultHoverEffect=function(t,e){var i=this.getNodeById(t);i&&i.processDefaultHoverEffect(e)},t.Diagram.prototype.processDefaultSelectionEffect=function(t,e){var i=this.getNodeById(t);i&&i.processDefaultSelectionEffect(e)},t.Diagram.prototype.processDefaultFocusEffect=function(t,e){var i=this.getNodeById(t);i&&i.processDefaultFocusEffect(e)},t.Diagram.prototype.updateNodeDims=function(e){if(e.IsRendered){var i=this.getNodeById(e.getId());e.setBounds(t.DiagramLayoutUtils.convertRectToDiagramRect(i.getLayoutBounds(!0))),e.setContentBounds(t.DiagramLayoutUtils.convertRectToDiagramRect(i.getContentBounds(!0))),e.setLabelBounds(t.DiagramLayoutUtils.convertRectToDiagramRect(i.getLabelBounds(!0)))}else this.renderNodeFromContext(e,!0)},t.Diagram.prototype.renderLeafNodeFromContext=function(t){if(this.getNodeById(t.getId()).isDisclosed())for(var e=t.getChildNodes(),i=0;i<e.length;i++){var n=e[i];this.renderLeafNodeFromContext(n)}else this.renderNodeFromContext(t,!1)},t.Diagram.prototype.renderNodeFromContext=function(e,i){if(!e.IsRendered){var n=this.getNodeById(e.getId());if(n.isDisclosed()){var o=this.CreateEmptyLayoutContext();o.setDirtyContext(e.LayoutContext?e.LayoutContext.getDirtyContext():null),this._oldDataAnimState&&this._oldDataAnimState.updateStateFromLayoutContext(o);for(var a=e.getChildNodes(),s=0;s<a.length;s++){var r=a[s];this.renderNodeFromContext(r,!1),o.addNode(r)}for(s=0;s<a.length;s++)this.updateNodeDims(a[s]);this.ApplyLayoutContext(o)}n.render();var d=n.isDisclosed()?n.getContainerPadding():null;d&&e.setContainerPadding(d.top,d.right,d.bottom,d.left),e.setBounds(t.DiagramLayoutUtils.convertRectToDiagramRect(n.getLayoutBounds(i))),e.setContentBounds(t.DiagramLayoutUtils.convertRectToDiagramRect(n.getContentBounds(i))),e.setLabelBounds(t.DiagramLayoutUtils.convertRectToDiagramRect(n.getLabelBounds(i))),e.IsRendered=!0}},t.Diagram.prototype._prepareNodes=function(t,i){if(i)for(var n=e.getNodeDefaultStyles(this),o=0;o<i.length;o++){var a=e.getNodeStyles(this,i[o],n),s=c.newInstance(this,a),r=s.getId();t?(t.addChildNodeId(r),s.setGroupId(t.getId())):this._arRootIds.push(r),this._arNodeIds.push(r),a.nodes&&a.nodes.length>0&&(this._isNodeDisclosed(r)?(s.setDisclosed(!0),this._prepareNodes(s,a.nodes)):this._addToCollapsedArray(s)),s.isHidden()||(t&&t.GetChildNodePane()?t.GetChildNodePane().addChild(s):this.getNodesPane().addChild(s),this._nodes.set(r,s))}},t.Diagram.prototype.setNodeDisclosed=function(e,i){i!=this._isNodeDisclosed(e)&&this.dispatchEvent(new t.EventFactory.newEvent(i?"beforeExpand":"beforeCollapse",e))},t.Diagram.prototype.expand=function(e){var n=!1,o=this.getOptions().expanded;o&&o.has&&!o.has(e)?(n=!0,o=o.add([e]),this.applyOptions({expanded:o},this.Defaults.getNoCloneObject())):(this.DisclosedNodes||(this.DisclosedNodes=[]),this.DisclosedNodes.indexOf(e)<0&&(this.DisclosedNodes.push(e),n=!0));if(n){var a=this.getNodeById(e);if(this.isDataProviderMode()&&!a.getData().nodes){var s=i.GetNodeOption(this,a),r=this,d=this._renderCount;this.getOptions()._fetchDataHandler(this.getOptions().nodeData,o,s,e).then(function(i){d===r._renderCount&&(r.render(r.getOptions(),r.Width,r.Height),r.dispatchEvent(new t.EventFactory.newEvent("expand",e)))})}else this.render(this.getOptions(),this.Width,this.Height),this.dispatchEvent(new t.EventFactory.newEvent("expand",e))}},t.Diagram.prototype.collapse=function(e){var i=!1,n=this.getOptions().expanded;if(n&&n.has&&n.has(e))i=!0,n=n.delete([e]),this.applyOptions({expanded:n},this.Defaults.getNoCloneObject());else{var o=-1;this.DisclosedNodes&&(o=this.DisclosedNodes.indexOf(e)),o>-1&&(this.DisclosedNodes.splice(o,1),i=!0)}i&&(this.render(this.getOptions(),this.Width,this.Height),this.dispatchEvent(new t.EventFactory.newEvent("collapse",e)))},t.Diagram.prototype._addLayoutContextForChildNodes=function(t,e,i,n){if(t.isDisclosed()){var o=t.getChildNodeIds(),a=this._createLayoutContextForChildNodes(e,i,o,n);e.setChildNodes(a)}},t.Diagram.prototype._appendLayoutContextForChildNodes=function(e,i,n,o,a){if(e.isDisclosed()){var s=o.reduce(function(t,e){return t.push(e.id),t},[]),r=this._createLayoutContextForChildNodes(i,n,s,!0),d=i.getChildNodes()||[];r=t.ArrayUtils.insert(d,r,a),i.setChildNodes(r),i.setDisclosed(!0),i.SetContainerPaddingObj(t.BaseDiagram.getLayoutContainerPadding(e.getContainerPadding())),i.UpdateParentNodes()}},t.Diagram.prototype._createLayoutContextForChildNodes=function(t,e,i,n){for(var o=[],a=0;a<i.length;a++){var s=this.getNodeById(i[a]);if(s.getVisible()){var r=this.CreateLayoutContextNode(s,null,n,e);r.copyFrom(this._oldLayoutContext?this._oldLayoutContext.getNodeById(i[a]):null),e.addNodeToMap(r),r.setParentNode(t),o.push(r),this._addLayoutContextForChildNodes(s,r,e,n)}}return o},t.Diagram.prototype._isNodeDisclosed=function(t){var e=this.getOptions().expanded;if(e&&e.has)return e.has(t);var i=this.DisclosedNodes?this.DisclosedNodes:e;return i&&i.indexOf(t)>-1||i&&i.indexOf("all")>-1},t.Diagram.prototype._isLinkPromoted=function(t){var e=this.getNodeById(t.startNode),i=this.getNodeById(t.endNode);if(e&&i||!this._collapsedNodes)return!1;if("none"===this.getOptions().promotedLinkBehavior)return!0;var n=e?e.getId():this._findFirstVisibleAncestor(t.startNode),o=i?i.getId():this._findFirstVisibleAncestor(t.endNode);if(!n||!o)return!1;if(n===o)return!1;var a=g.GetPromotedLinkId(this,n,o);return this._promotedLinksMap||(this._promotedLinksMap=new(this.getCtx().ojMap)),this._promotedLinksMap.has(a)?this._promotedLinksMap.get(a)._links.push(t):this._promotedLinksMap.set(a,{id:a,startNode:n,endNode:o,_links:[t]}),this._linkToPromotedMap||(this._linkToPromotedMap=new(this.getCtx().ojMap)),this._linkToPromotedMap.set(t.id,a),!0},t.Diagram.prototype._addToCollapsedArray=function(t){this._collapsedNodes||(this._collapsedNodes=[]),this._collapsedNodes.push(t)},t.Diagram.prototype._findFirstVisibleAncestor=function(e){for(var i=this.getCtx(),n=function(e,o){if(e)for(var a=0;a<e.length;a++)if(t.BaseDiagram.compareValues(i,e[a].id,o)||n(e[a].nodes,o))return!0;return!1},o=0;o<this._collapsedNodes.length;o++){var a=this._collapsedNodes[o];if(n(a.getData().nodes,e))return a.getId()}return null},t.Diagram.prototype._updateKeyboardFocusEffect=function(){var t,e=this.getEventManager().getFocus(),i=!1;e&&(e instanceof c?t=this.getNodeById(e.getId()):e instanceof g&&(t=this.getLinkById(e.getId())),i=e.isShowingKeyboardFocusEffect(),t&&i&&t.showKeyboardFocusEffect(),this.getEventManager().setFocus(t))},t.Diagram.prototype.clearDisclosedState=function(){this.DisclosedNodes=null},t.Diagram.prototype.ShowLinkCreationFeedback=function(i){if(this.getEventManager().LinkCreationStarted){var n=this._context.pageToStageCoords(i.pageX,i.pageY),o=this.getPanZoomCanvas().getContentPane().stageToLocal({x:n.x,y:n.y});if(this._linkCreationFeedBack){var a=this._linkCreationFeedBack.GetCreationFeedbackPoints(o);this._linkCreationFeedBack.setPoints(a)}else{var s=this.getEventManager().DragSource.getDragObject();if(s instanceof c){var r=this.getEventManager().DragSource.getDragCoords(),d=this.getPanZoomCanvas().getContentPane().stageToLocal({x:r.x,y:r.y}),h=this.getOptions().styleDefaults.linkDefaults;e.prepareLinkStyle(h,"style");var l=this.getOptions().dnd.drag.ports.linkStyle;if(l&&"function"==typeof l){var u=l({dataContext:s.getDataContext(),portElement:s.__dragPort});u&&(h.style=t.JsonUtils.merge(u.svgStyle,h.style),h.svgClassName=u.svgClassName||h.className)}var p={id:"linkFeedback",startNode:s.getId(),endNode:s.getId()};p=t.JsonUtils.merge(p,h);var _=g.newInstance(this,p,!1);this.getNodesPane().addChild(_),_.setMouseEnabled(!1),_.setPoints([d.x,d.y,o.x,o.y]),this._linkCreationFeedBack=_}}}},t.Diagram.prototype.HideLinkCreationFeedback=function(){this.getNodesPane().removeChild(this._linkCreationFeedBack),this._linkCreationFeedBack=null},t.Diagram.prototype.handleDataSourceChangeEvent=function(i,n){if("none"!==e.getAnimationOnDataChange(this)&&(this.dispatchEvent(t.EventFactory.newEvent("notready")),this._oldDataAnimState=new r(this,i,n)),this._currentViewport=this.getPanZoomCanvas().getViewport(),this.IsPanningEnabled()){var o=this.getPanZoomCanvas();o.setMinPanY(null),o.setMaxPanY(null),o.setMinPanX(null),o.setMaxPanX(null)}var a,s,d=n.data.nodes,h=n.data.links;if("add"==i){if(s=(a=n.parentId)?this.getNodeById(a):null,"all"===this.getOptions().expanded&&d){var l=this.DisclosedNodes,g=function(t){for(var e=0;e<t.length;e++)l.push(t[e].id),t[e].nodes&&g(t[e].nodes)};g(d)}s?(s.appendChildNodesData(d,n.index),this._isNodeDisclosed(a)&&(s.setDisclosed(!0),this._prepareNodes(s,d))):this._prepareNodes(null,d),this.renderLinks(h)}else if("change"==i){if(d)for(var c=e.getNodeDefaultStyles(this),u=0;u<d.length;u++){var p=this.getNodeById(d[u].id);if(p){var _=e.getNodeStyles(this,d[u],c);p.setData(_)}}h&&(this._removeLinks(h),this.renderLinks(h))}else"remove"==i&&((s=(a=n.parentId)?this.getNodeById(a):null)?(this._removeNodes(s,d),s.removeChildNodesData(d),s.getData().nodes&&0!==s.getData().nodes.length||s.setDisclosed(!1)):this._removeNodes(null,d),this._removeLinks(h));this._oldDataAnimState&&this._oldDataAnimState.updateStateFromEvent(i,n),this._updateLayoutContext(i,n);var f=0===this.GetAllNodes().length;if(f)this._processContent(f);else{this._renderCount++;var m=this.layout(),v=this,C=this._renderCount;m.then(function(){C===v._renderCount&&(v._partialUpdate=!0,v._updateOverview(i,n),v._processContent(!1),v._partialUpdate=!1)},function(){C===v._renderCount&&(v.removeChild(v._oldPanZoomCanvas),v._oldPanZoomCanvas=null,v._bRendered=!0,this._currentViewport=null)})}},t.Diagram.prototype._updateOverview=function(t,e){this.Overview&&n.UpdateOverviewContent(this,this.Overview,t,e)},t.Diagram.prototype._updateLayoutContext=function(t,e){this._layoutContext||(this._layoutContext=this.CreateEmptyLayoutContext());var i=this._layoutContext;i.setEventData({type:t,data:e});var n,o,a,s,r,d,h=e.data.nodes,l=e.data.links;if(e.parentId&&(s=i.getNodeById(e.parentId),r=this.getNodeById(e.parentId)),"add"==t){if(h)if(s&&r)s.Reset(),this._appendLayoutContextForChildNodes(r,s,i,h,e.index);else for(n=0;n<h.length;n++)a=h[n].id,this.getNodeById(a)&&(o=this.CreateLayoutContextNode(this.getNodeById(a),null,!0,i),this._addLayoutContextForChildNodes(this.getNodeById(a),o,i,!0),i.addNode(o));if(l)for(n=0;n<l.length;n++){if(d=l[n].id,p=this.getLinkById(d)||this.getLinkById(this._linkToPromotedMap.get(d))){if(i.getLinkById(p.getId()))continue;var g=p.getData().startNode,c=p.getData().endNode;i.getNodeById(g)&&i.getNodeById(c)&&i.addLink(this.CreateLayoutContextLink(p,g,c,null,i))}}}else if("change"==t){if(h)for(n=0;n<h.length;n++)a=h[n].id,(o=i.getNodeById(a))&&(o.Reset(),o.UpdateParentNodes());if(l){for(n=i.getLinkCount()-1;n>=0;n--){var u=i.getLinkByIndex(n);this._links.get(u.getId())||i.removeLink(u)}for(n=0;n<l.length;n++){var p;if(d=l[n].id,p=this.getLinkById(d)||this.getLinkById(this._linkToPromotedMap.get(d))){i.removeLink(i.getLinkById(p.getId()));g=p.getData().startNode,c=p.getData().endNode;i.getNodeById(g)&&i.getNodeById(c)&&i.addLink(this.CreateLayoutContextLink(p,g,c,null,i))}}}}else if("remove"==t){if(h){for(n=0;n<h.length;n++)a=h[n].id,o=i.getNodeById(a),i.removeNode(s,o);s&&r&&(s.Reset(),s.UpdateParentNodes(),s.setDisclosed(r.isDisclosed()))}for(n=i.getLinkCount()-1;n>=0;n--){u=i.getLinkByIndex(n);this._links.get(u.getId())||i.removeLink(u)}}},t.Diagram.prototype._getLayoutContext=function(){if(!this._layoutContext){for(var t=this.CreateEmptyLayoutContext(),e=0;e<this._arRootIds.length;e++){var i=this._arRootIds[e];if(this.getNodeById(i)){var n=!this._bRendered,o=this.getNodeById(i),a=this.CreateLayoutContextNode(o,null,n,t);a.copyFrom(this._oldLayoutContext?this._oldLayoutContext.getNodeById(i):null),this._addLayoutContextForChildNodes(o,a,t,n),t.addNode(a)}}var s=this;this._links.forEach(function(e,i,n){var o=e.getData().startNode,a=e.getData().endNode;if(t.getNodeById(o)&&t.getNodeById(a)){var r=s.CreateLayoutContextLink(e,o,a,null,t);r.copyFrom(s._oldLayoutContext?s._oldLayoutContext.getLinkById(i):null),t.addLink(r)}}),this._layoutContext=t,this._oldLayoutContext=null}return this._layoutContext},t.Diagram.prototype._removeNodes=function(e,i){if(i&&(!e||e.isDisclosed())){for(var n=[],o=0;o<i.length;o++){var a=i[o].id,s=this.getNodeById(a);this._removeNodes(s,s.getData().nodes),this._links.forEach(function(t,e,i){t.getStartId()!=a&&t.getEndId()!=a||n.push(t.getData())}),e?e.removeChildNode(s):(t.ArrayUtils.removeItem(this._arRootIds,a),this.getNodesPane().removeChild(s)),t.ArrayUtils.removeItem(this._arNodeIds,a),this._nodes.delete(a)}this._removeLinks(n)}},t.Diagram.prototype._removeLinks=function(e){if(e&&0!=e.length)for(var i=0;i<e.length;i++){var n=e[i].id,o=this.getLinkById(n);if(o){o.getParent().removeChild(o);var a=this.getNodeById(o.getStartId()),s=this.getNodeById(o.getEndId());a&&a.removeOutLinkId(n),s&&s.removeInLinkId(n),t.ArrayUtils.removeItem(this._arLinkIds,n),this._links.delete(n)}else if(this._linkToPromotedMap&&this._linkToPromotedMap.has(n)){var r=this._linkToPromotedMap.get(n),d=this._links.get(r),h=d?d.getData()._links:null;if(h&&1==h.length&&h[0].id==n){d.getParent().removeChild(d);a=this.getNodeById(d.getStartId()),s=this.getNodeById(d.getEndId());a&&a.removeOutLinkId(r),s&&s.removeInLinkId(r),t.ArrayUtils.removeItem(this._arLinkIds,d.getId()),this._links.delete(d.getId()),this._promotedLinksMap.delete(d.getId()),this._linkToPromotedMap.delete(n)}else if(h){for(i=0;i<h.length;i++)t.BaseDiagram.compareValues(this.getCtx(),h[i].id,n)&&h.splice(i,1);this._linkToPromotedMap.delete(n)}}}},t.Diagram.prototype.handleTouchStart=function(){},t.Diagram.prototype.handleTouchEnd=function(){this._clearTouchEventContent(),this._touchEventContentDiagramObjRef&&this._touchEventContentDiagramObjRef.handleTouchEnd&&(this._touchEventContentDiagramObjRef.handleTouchEnd(),this._touchEventContentDiagramObjRef=null)},t.Diagram.prototype.storeTouchEventContent=function(e,i){this.getTouchEventPane()&&e&&(this._touchEventContentDiagramObjRef=i,e.namespaceURI===t.ToolkitUtils.SVG_NS?t.ToolkitUtils.appendChildElem(this.getTouchEventPane().getElem(),e):Array.isArray(e)&&e.forEach(function(e){t.ToolkitUtils.appendChildElem(this.getTouchEventPane().getElem(),e)}.bind(this)))},t.Diagram.prototype._clearTouchEventContent=function(){if(this.getTouchEventPane())for(var t=this.getTouchEventPane().getElem();t.firstChild;)t.removeChild(t.firstChild)};var a=function(t,e){a.superclass.constructor.call(this,t,e),this.setHoverDelay(a._HOVER_DELAY),this._diagram=e};t.Obj.createSubclass(a,t.CategoryRolloverHandler,"DvtDiagramCategoryRolloverHandler"),a._HOVER_DELAY=100,a.prototype.GetRolloverCallback=function(e,i,n,o){return t.Obj.createCallback(this,function(){this.SetHighlightMode(!0),this._diagram.processEvent(e)})},a.prototype.GetRolloutCallback=function(e,i,n,o){return t.Obj.createCallback(this,function(){this.SetHighlightModeTimeout(),this._diagram.processEvent(e)})};var s=function(t){this.Init({alta:s.SKIN_ALTA},t)};t.Obj.createSubclass(s,t.BaseComponentDefaults,"DvtDiagramDefaults"),s.SKIN_ALTA={skin:t.CSSStyle.SKIN_ALTA,emptyText:null,selectionMode:"none",animationOnDataChange:"none",animationOnDisplay:"none",maxZoom:1,highlightMatch:"all",nodeHighlightMode:"node",linkHighlightMode:"link",panning:"none",overview:{fitArea:"content",preserveAspectRatio:"meet"},touchResponse:"auto",zooming:"none",promotedLinkBehavior:"lazy",_statusMessageStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA),dnd:{drag:{nodes:{},ports:{}},drop:{background:{},nodes:{},links:{},ports:{}}},styleDefaults:{animationDuration:500,hoverBehaviorDelay:200,_highlightAlpha:.1,_overviewStyles:{overview:{backgroundColor:"rgb(228,229,230)"},overviewContent:{padding:"10px"},viewport:{backgroundColor:"rgb(255,255,255)",borderColor:"rgb(74,76,78)"},node:{shape:"inherit"}},nodeDefaults:{_containerStyle:new t.CSSStyle("border-color:#abb3ba;background-color:#f9f9f9;border-width:.5px;border-radius:1px;padding-top:20px;padding-left:20px;padding-bottom:20px;padding-right:20px;"),labelStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD_12+"color:#383A47"),hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",icon:{width:10,height:10,fillPattern:"none",shape:"circle"}},linkDefaults:{startConnectorType:"none",endConnectorType:"none",width:1,_style:{_type:"solid"},hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",labelStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD_12+"color:#383A47"),_hitDetectionOffset:10},promotedLink:{startConnectorType:"none",endConnectorType:"none",width:1,_style:{_type:"dot",strokeDasharray:"2,3"},color:"#778999",hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",_hitDetectionOffset:10}}},s.prototype.getNoCloneObject=function(){return{data:!0,nodeData:!0,linkData:!0,nodes:!0,links:!0}};var r=function(t,e,i){this.Init(t,e,i)};t.Obj.createSubclass(r,t.Obj,"DvtDiagramDataAnimationState"),r.prototype.Init=function(t,e,i){this._diagram=t,this._context=t.getCtx(),this._nodes=[],this._newNodes=[],this._links=[],this._newLinks=[],this._processedObjMap=new this._context.ojMap,this.PanZoomMatrix=this._diagram.getPanZoomCanvas().getContentPane().getMatrix(),this.IsPartialUpdate=!(!e||!i),t.Overview&&(this.Overview=this.IsPartialUpdate?t.Overview.CreateAnimationClone():t.Overview),this.NodesMap=this._diagram.GetAllNodesMap(),this.LinksMap=this._diagram.GetAllLinksMap(),this._setNodes(e,i),this._setLinks(e,i)},r.prototype.getId=function(){return this._diagram.getId()},r.prototype.getOptions=function(){return this._diagram.getOptions()},r.prototype.getNodes=function(){return this._nodes},r.prototype.getLinks=function(){return this._links},r.prototype.getNewNodes=function(){return this._newNodes},r.prototype.getNewLinks=function(){return this._newLinks},r.prototype.updateStateFromEvent=function(t,e){if(e){var i,n,o,a=e.data.nodes,s=e.data.links;if("add"==t){for(i=0;a&&i<a.length;i++){var r=this._diagram.getNodeById(a[i].id);r&&(!0===this._wasParentDisclosed&&this._newNodes.push(r),this._processedObjMap.set(r.getId(),!0))}for(i=0;s&&i<s.length;i++)o=s[i].id,(n=this._diagram.getLinkById(o)||this._diagram._linkToPromotedMap&&this._diagram.getLinkById(this._diagram._linkToPromotedMap[o]))&&(this._newLinks.push(n),this._processedObjMap.set(n.getId(),!0))}else if("change"==t)for(i=0;s&&i<s.length;i++)o=s[i].id,(n=this._diagram.getLinkById(o)||this._diagram._linkToPromotedMap&&this._diagram.getLinkById(this._diagram._linkToPromotedMap[o]))&&(this._newLinks.push(n),this._processedObjMap.set(n.getId(),!0))}},r.prototype.updateStateFromLayoutContext=function(t){if(this.IsPartialUpdate){var e=this;t.getDirtyContext().forEach(function(t,i,n){e._processedObjMap.has(i)||((t=e._diagram.getNodeById(i)||e._diagram.getLinkById(i))instanceof c?(e._nodes.push(t.getAnimationState()),e._newNodes.push(t),e._processedObjMap.set(i,!0)):t instanceof g&&(e._links.push(t.getAnimationState()),e._newLinks.push(t),e._processedObjMap.set(i,!0)))})}},r.prototype._setNodes=function(t,e){if(this.IsPartialUpdate){var i=e.data.nodes,n=e.parentId;if("add"==t)this._addAncestorStates(n);else if("change"==t)for(var o=0;i&&o<i.length;o++){(a=this._diagram.getNodeById(i[o].id))&&(this._addAncestorStates(a.getGroupId()),this._nodes.push(a.getAnimationState()),this._newNodes.push(a),this._processedObjMap.set(a.getId(),!0))}else if("remove"==t&&(this._addAncestorStates(n),i&&!n))for(o=0;o<i.length;o++){var a;(a=this._diagram.getNodeById(i[o].id))&&(this._nodes.push(a),this._processedObjMap.set(a.getId(),!0))}}else this._nodes=this._diagram.GetRootNodeObjects()},r.prototype._setLinks=function(t,e){if(this.IsPartialUpdate){var i,n,o,a=e.data.links;if(!a)return;if("change"==t)for(i=0;i<a.length;i++)o=a[i].id,(n=this._diagram.getLinkById(o)||this._diagram._linkToPromotedMap&&this._diagram.getLinkById(this._diagram._linkToPromotedMap[o]))&&(this._links.push(n.getAnimationState()),this._processedObjMap.set(n.getId(),!0));else if("remove"==t)for(i=0;i<a.length;i++)o=a[i].id,(n=this._diagram.getLinkById(o)||this._diagram._linkToPromotedMap&&this._diagram.getLinkById(this._diagram._linkToPromotedMap[o]))&&(this._links.push(n),this._processedObjMap.set(n.getId(),!0))}else this._links=this._diagram.GetAllLinkObjects()},r.prototype._addAncestorStates=function(e){var i=e?this._diagram.getNodeById(e):null;for(this._wasParentDisclosed=!i||i.isDisclosed();i;){var n=t.BaseDiagram.compareValues(this._context,i.getId(),e)||i.isDisclosed()&&this._diagram.getOptions().renderer,o=i.getAnimationState(n);this._nodes.push(o),this._newNodes.push(i),this._processedObjMap.set(i.getId(),!0),i=i.getGroupId()?this._diagram.getNodeById(i.getGroupId()):null}};var d=function(t,e,i,n){this.Init(t,e,i,n)};t.Obj.createSubclass(d,t.DataAnimationHandler,"DvtDiagramDataAnimationHandler"),d.DELETE=0,d.UPDATE=1,d.INSERT=2,d.prototype.Init=function(t,e,i,n){d.superclass.Init.call(this,t,e),this._oldDiagram=i,this._newDiagram=n},d.prototype.getOldDiagram=function(){return this._oldDiagram},d.prototype.getNewDiagram=function(){return this._newDiagram},d.prototype.getAnimationDuration=function(){return e.getAnimationDuration(this._oldDiagram)},d.prototype.constructAnimation=function(t,e){var i=!1;if(e&&e.length>0&&(i=e[0]instanceof g),i&&!this.getCtx().isOffscreen()){var n,o,a=this.getCtx(),s=d._expandLinksArrayToMap(a,t),r=d._expandLinksArrayToMap(a,e),h=new a.ojMap,l=this;s.forEach(function(t,e,i){if(n=t,o=r.get(e))if(n.isPromoted()||o.isPromoted()){var a=n.isPromoted()?n.getData()._links.length:1,d=o.isPromoted()?o.getData()._links.length:1;a>d&&!h.has(n.getId())?l._constructExpandCollapseAnimation(n,r,h,!0):a<d&&!h.has(o.getId())?l._constructExpandCollapseAnimation(o,s,h,!1):a!=d||h.has(o.getId())||(o.animateUpdate(l,n),h.set(o.getId(),!0))}else o.animateUpdate(l,n);else-1==l.getNewDiagram().GetAllLinks().indexOf(n.getId())&&n.animateDelete(l)}),r.forEach(function(t,e,i){n=s.get(e),o=t,n||l.getOldDiagram().LinksMap.has(o.getId())||o.animateInsert(l)})}else d.superclass.constructAnimation.call(this,t,e)},d.prototype._constructExpandCollapseAnimation=function(t,e,i,n){for(var o=[],a=t.getData()._links,s=0;s<a.length;s++){var r=e.get(a[s].id);r&&-1===o.indexOf(r)&&o.push(r)}o.length>0&&(n?t.animateExpand(this,o):t.animateCollapse(this,o),i.set(t.getId(),!0))},d._expandLinksArrayToMap=function(t,e){for(var i=new t.ojMap,n=0;n<e.length;n++){var o=e[n];if(o)if(o.isPromoted())for(var a=o.getData()._links,s=0;s<a.length;s++)i.set(a[s].id,o);else i.set(o.getId(),o)}return i};var h=function(t,e,i){this.Init(t,e,i,i),this._diagram=i,this._linkDragSelector=null,this._linkDropSelector=null,this._prevRolloverEvent=null};t.Obj.createSubclass(h,t.EventManager,"DvtDiagramEventManager"),h.prototype.showFocusEffect=function(t,e){this.ShowFocusEffect(t,e)},h.prototype.ShowFocusEffect=function(t,e){this._diagram.isPanning()||h.superclass.ShowFocusEffect.call(this,t,e)},h.prototype.ProcessRolloverEvent=function(e,i,n){var o=this._diagram.getOptions();if("dim"==o.hoverBehavior&&(!this._prevRolloverEvent||this._prevRolloverEvent.obj!==i||this._prevRolloverEvent.bOver!==n)){var a=i.getCategories?i.getCategories():[];o.highlightedCategories=n?a.slice():null;var s=t.EventFactory.newCategoryHighlightEvent(o.highlightedCategories,n),r=t.CSSStyle.getTimeMilliseconds(o.styleDefaults.hoverBehaviorDelay);this.RolloverHandler.processEvent(s,this._diagram.GetAllNodeObjects(),r,"any"==o.highlightMatch),this._prevRolloverEvent={obj:i,bOver:n}}},h.prototype.CreateCategoryRolloverHandler=function(t,e){return new a(t,e)},h.prototype.ProcessKeyboardEvent=function(i){var n=!0,o=i.keyCode,a=this.getFocus(),s=a instanceof c?a._customNodeContent:null;if(o!=t.KeyboardEvent.TAB&&this._bPassOnEvent)s.fireKeyboardListener(i),i.preventDefault();else if(o==t.KeyboardEvent.TAB&&s instanceof t.BaseComponent)!i.shiftKey&&a.isShowingKeyboardFocusEffect()?(a.hideKeyboardFocusEffect(),s.fireKeyboardListener(i),i.preventDefault(),this._bPassOnEvent=!0):i.shiftKey&&this._bPassOnEvent?(this.ShowFocusEffect(i,a),i.preventDefault(),this._bPassOnEvent=!1):(this._bPassOnEvent&&a.showKeyboardFocusEffect(),n=h.superclass.ProcessKeyboardEvent.call(this,i),this._bPassOnEvent=!1);else if(o==t.KeyboardEvent.SPACE&&i.ctrlKey&&i.shiftKey)a&&a.HandleKeyboardEvent&&a.HandleKeyboardEvent(i);else if((o==t.KeyboardEvent.ZERO||o==t.KeyboardEvent.NUMPAD_ZERO)&&i.ctrlKey&&i.altKey){if(a){var r=this._diagram.getPanZoomCanvas(),d=a.getKeyboardBoundingBox(this.getCtx().getStage()),l=r.getContentPane().stageToLocal({x:d.x,y:d.y}),g=r.getContentPane().stageToLocal({x:d.x+d.w,y:d.y+d.h}),u={x:l.x,y:l.y,w:g.x-l.x,h:g.y-l.y},p="none"!=e.getAnimationOnDataChange(this._diagram)?new t.Animator(this.getCtx(),this._diagram.getAnimationDuration()):null;r.zoomToFit(p,u),p&&p.play()}}else o==t.KeyboardEvent.TAB&&a&&this._diagram.ensureObjInViewport(i,a),n=h.superclass.ProcessKeyboardEvent.call(this,i);return n},h.prototype.GetTouchResponse=function(){var e=this._diagram.getOptions();return"none"!==e.panning||"none"!==e.zooming?t.EventManager.TOUCH_RESPONSE_TOUCH_HOLD:e.touchResponse===t.EventManager.TOUCH_RESPONSE_TOUCH_START?t.EventManager.TOUCH_RESPONSE_TOUCH_START:t.EventManager.TOUCH_RESPONSE_AUTO},h.prototype.HandleTouchClickInternal=function(e){return this.GetEventInfo(e,t.PanZoomCanvasEventManager.EVENT_INFO_PANNED_KEY)},h.prototype.StoreInfoByEventType=function(e){return e!=t.PanZoomCanvasEventManager.EVENT_INFO_PANNED_KEY&&h.superclass.StoreInfoByEventType.call(this,e)},h.prototype.isDndSupported=function(){return!0},h.prototype.GetDragSourceType=function(t){var e,i=this.DragSource.getDragObject();return i&&i.__dragType?i.__dragType:i instanceof c?(null===this._linkDragSelector&&(this._linkDragSelector=this._diagram.getOptions().dnd.drag.ports.selector),this._linkDragSelector&&(e=this._getPortElement(document.elementFromPoint(t.getNativeEvent().clientX,t.getNativeEvent().clientY),this._linkDragSelector))&&(this.LinkCreationStarted=!0,i.__dragPort=e),i.__dragType=e?"ports":"nodes",i.__dragType):null},h.prototype.GetDragDataContexts=function(e){var i=this.DragSource.getDragObject();if(this._diagram.isSelectionSupported()&&this._diagram.getSelectionHandler().getSelectedCount()>1){for(var n=this._diagram.getSelectionHandler().getSelection(),o=this._getTopLeftContentCorner(n),a=this._diagram.getPanZoomCanvas().getZoom(),s=[],r=0;r<n.length;r++)if(n[r]instanceof c){var d=n[r].getDataContext(),h=n[r].getDimensions(this._context.getStage());d.nodeOffset=new t.Point((h.x-o.x)/a,(h.y-o.y)/a),e&&t.ToolkitUtils.cleanDragDataContext(d),s.push(d)}return s}if(i instanceof c){d=i.getDataContext();return e&&t.ToolkitUtils.cleanDragDataContext(d),"ports"===i.__dragType&&i.__dragPort?e?{dataContext:d}:{dataContext:d,portElement:i.__dragPort}:(d.nodeOffset=new t.Point(0,0),[d])}return[]},h.prototype.GetDropOffset=function(e){var i;if(this._diagram.isSelectionSupported()&&this._diagram.getSelectionHandler().getSelectedCount()>1)i=this._getTopLeftContentCorner(this._diagram.getSelectionHandler().getSelection());else{var n=this.DragSource.getDragObject();n instanceof c&&(i=n.getDimensions(this._context.getStage()))}if(i){var o=this._context.pageToStageCoords(e.pageX,e.pageY),a=this._diagram.getPanZoomCanvas().getZoom();return new t.Point((i.x-o.x)/a,(i.y-o.y)/a)}return null},h.prototype._getTopLeftContentCorner=function(e){if(!e)return null;for(var i=Number.MAX_VALUE,n=Number.MAX_VALUE,o=0;o<e.length;o++)if(e[o]instanceof c){var a=e[o].getDimensions(this._context.getStage());i=a?Math.min(a.x,i):i,n=a?Math.min(a.y,n):n}return new t.Point(i,n)},h.prototype.OnDndDragStart=function(t){var e=this.DragSource.getDragObject();e&&e.__dragType&&(e.__dragType=null,e.__dragPort=null),this.LinkCreationStarted=!1,h.superclass.OnDndDragStart.call(this,t)},h.prototype.OnDndDragOver=function(t){h.superclass.OnDndDragOver.call(this,t),this.LinkCreationStarted&&this._diagram.ShowLinkCreationFeedback(t)},h.prototype.OnDndDragEnd=function(t){h.superclass.OnDndDragEnd.call(this,t),this.LinkCreationStarted&&(this._diagram.HideLinkCreationFeedback(),this.LinkCreationStarted=!1),this._diagram.getPanZoomCanvas().panZoomEnd(),this._setPanningEnabled(!0)},h.prototype._setPanningEnabled=function(t){this._diagram.IsPanningEnabled()&&this._diagram.getPanZoomCanvas().setPanningEnabled(t)},h.prototype.IsDragSupported=function(){if(!this._isDragSupported){var t=this._diagram.getOptions();this._isDragSupported=this.isDndSupported()&&(t.dnd.drag.nodes.dataTypes||t.dnd.drag.ports.dataTypes)}return this._isDragSupported},h.prototype.OnMouseDown=function(t){var e=this.GetLogicalObject(t.target);this.IsDragSupported()&&e instanceof c&&this._setPanningEnabled(!1),h.superclass.OnMouseDown.call(this,t)},h.prototype.OnMouseUp=function(t){h.superclass.OnMouseUp.call(this,t),this._setPanningEnabled(!0)},h.prototype.HandleImmediateTouchStartInternal=function(t){var e=this.GetLogicalObject(t.target);this.IsDragSupported()&&1==t.targetTouches.length&&e instanceof c&&this._setPanningEnabled(!1),(e instanceof c||e instanceof g)&&e.handleTouchStart(),this._diagram.handleTouchStart()},h.prototype.HandleImmediateTouchEndInternal=function(t){var e=this.GetLogicalObject(t.target);this.IsDragSupported()&&this._setPanningEnabled(!0),(e instanceof c||e instanceof g)&&e.handleTouchEnd(),this._diagram.handleTouchEnd()},h.prototype.GetDropTargetType=function(t){var e,i=this.GetLogicalObject(t.target);return this._diagram.getCache().putToCache("dropTarget",i),i?i instanceof c?(null===this._linkDropSelector&&(this._linkDropSelector=this._diagram.getOptions().dnd.drop.ports.selector),this._linkDropSelector&&(e=this._getPortElement(t.getNativeEvent().target,this._linkDropSelector)),i.__dropPort=e,e?"ports":"nodes"):i instanceof g?"links":null:"background"},h.prototype.GetDropEventPayload=function(e){var i=e.getNativeEvent().dataTransfer,n=Number(i.getData(t.EventManager.DROP_OFFSET_X_DATA_TYPE))||0,o=Number(i.getData(t.EventManager.DROP_OFFSET_Y_DATA_TYPE))||0,a=this._diagram.getPanZoomCanvas().getContentPane().stageToLocal(this.getCtx().pageToStageCoords(e.pageX,e.pageY)),s=this._diagram.getLayoutOffset(),r={x:a.x-s.x+n,y:a.y-s.y+o},d=this.GetLogicalObject(e.target);if(d instanceof c){d.__dropPort?(r.dataContext=d.getDataContext(),r.portElement=d.__dropPort):r.nodeContext=d.getDataContext();var h=d.getDimensions(this._context.getStage()),l=h?this._diagram.getPanZoomCanvas().getContentPane().stageToLocal({x:h.x,y:h.y}):null;r.nodeX=l?a.x-l.x+n:null,r.nodeY=l?a.y-l.y+o:null}else d instanceof g&&(r.linkContext=d.getDataContext());return r},h.prototype.ShowDropEffect=function(e){var i=this.GetDropTargetType(e),n=this._diagram.getCache().getFromCache("dropTarget");"background"===i?this._diagram.getPanZoomCanvas().getBackgroundPane().setClassName("oj-active-drop"):"nodes"===i||"links"===i?n&&n.ShowDropEffect&&n.ShowDropEffect():n&&"ports"===i&&n.__dropPort&&t.ToolkitUtils.addClassName(n.__dropPort,"oj-active-drop")},h.prototype.ShowRejectedDropEffect=function(e){var i=this.GetDropTargetType(e),n=this._diagram.getCache().getFromCache("dropTarget");"background"===i?this._diagram.getPanZoomCanvas().getBackgroundPane().setClassName("oj-invalid-drop"):"nodes"===i||"links"===i?n&&n.ShowRejectedDropEffect&&n.ShowRejectedDropEffect():n&&"ports"===i&&n.__dropPort&&t.ToolkitUtils.addClassName(n.__dropPort,"oj-invalid-drop")},h.prototype.ClearDropEffect=function(){this._diagram.getPanZoomCanvas().getBackgroundPane().setClassName(null);var e=this._diagram.getCache().getFromCache("dropTarget");e&&e.ClearDropEffect&&e.ClearDropEffect(),e&&e.__dropPort&&(t.ToolkitUtils.removeClassName(e.__dropPort,"oj-active-drop"),t.ToolkitUtils.removeClassName(e.__dropPort,"oj-invalid-drop")),this._diagram.getCache().putToCache("dropTarget",null)},h.prototype._getPortElement=function(t,e){return t&&t.closest?t.closest(e):null};var l=function(t,e){this.Init(t,e)};t.Obj.createSubclass(l,t.BaseDiagramKeyboardHandler,"DvtDiagramKeyboardHandler"),l.prototype.isNavigationEvent=function(e){var i=!1;switch(e.keyCode){case t.KeyboardEvent.OPEN_BRACKET:case t.KeyboardEvent.CLOSE_BRACKET:i=!0;break;case t.KeyboardEvent.OPEN_ANGLED_BRACKET:case t.KeyboardEvent.CLOSE_ANGLED_BRACKET:i=!!e.altKey;break;default:i=l.superclass.isNavigationEvent.call(this,e)}return i},l.prototype.processKeyDown=function(e){if(e.keyCode==t.KeyboardEvent.TAB){var i=this._eventManager.getFocus();if(i)return t.EventManager.consumeEvent(e),i;var n=this.GetDiagram().GetRootNodeObjects();if(n.length>0){t.EventManager.consumeEvent(e);var o=this.getDefaultNavigable(n);return this.GetDiagram().ensureObjInViewport(e,o),o}}return l.superclass.processKeyDown.call(this,e)},l.prototype.GetVisibleNode=function(t){return this.GetDiagram().getNodeById(t)};var g=function(t,e,i,n){this.Init(t,e,i,n)};t.Obj.createSubclass(g,t.BaseDiagramLink,"DvtDiagramLink"),g.CUSTOM_STYLE="customStyle",g.newInstance=function(t,e,i){return new g(t.getCtx(),t,e,i)},g.prototype.Init=function(e,i,n,o){g.superclass.Init.call(this,e,n.id,i),this._data=n,this._isHighlighted=!0,this._hasContentBoundToTouchEvent=!1,this._contentStoredInTouchEventContainer=null,this.setPromoted(o),this.isSelectable()&&this.setCursor(t.SelectionEffectUtils.getSelectingCursor()),this.setGroupId(g._getCommonAncestorId(this,i))},g.prototype.getData=function(){return this._data},g.prototype.setData=function(t){this._data=t},g.prototype.getId=function(){return this.getData().id},g.prototype.getStartId=function(){return this.getData().startNode},g.prototype.getEndId=function(){return this.getData().endNode},g.prototype.getLabelBounds=function(){var t=null;return this._labelObj&&(t=this._labelObj.getDimensions()),t},g.prototype.getLinkStyle=function(){return this.getData().svgStyle||this.getData().style},g.prototype.getLinkWidth=function(){return this.getData().width},g.prototype.getLinkColor=function(){return this.getData().color},g.prototype.getStartConnectorType=function(){return this.getData().startConnectorType},g.prototype.getEndConnectorType=function(){return this.getData().endConnectorType},g.prototype.getStartConnectorOffset=function(){return this.getStartConnectorType()?t.DiagramLinkConnectorUtils.getStandardConnectorOffset(this.getStartConnectorType(),this.GetAppliedLinkWidth(),this.GetAppliedLinkWidth()):0},g.prototype.getEndConnectorOffset=function(){return this.getEndConnectorType()?t.DiagramLinkConnectorUtils.getStandardConnectorOffset(this.getEndConnectorType(),this.GetAppliedLinkWidth(),this.GetAppliedLinkWidth()):0},g.prototype.render=function(){var e=this.GetDiagram(),i=this.getGroupId(),n=e.getNodeById(this.getStartId()).getGroupId(),o=e.getNodeById(this.getEndId()).getGroupId();if(i){var a=this.getCtx(),s=e.getNodeById(i).GetChildNodePane();t.BaseDiagram.compareValues(a,i,n)&&t.BaseDiagram.compareValues(a,i,o)?s.addChildAt(this,0):s.addChild(this)}else n||o?e.getNodesPane().addChild(this):e.getLinksPane().addChild(this);g._renderLinkLabels(e,this.getData(),this),this.setAriaRole("img"),this.UpdateAriaLabel(),this._diagram.getEventManager().associate(this,this)},g.prototype.setPoints=function(t){var e=this.GetDiagram(),i=this._getCustomRenderer("renderer");i?(this._customPoints=t,this._applyCustomLinkContent(i,this._getState(),null)):(!this._pathCmds&&t&&g._renderLinkShape(e,this.getData(),this),g.superclass.setPoints.call(this,t))},g.prototype._getState=function(){return{hovered:this._isShowingHoverEffect,selected:this.isSelected(),focused:this._isShowingKeyboardFocusEffect}},g.prototype._applyCustomLinkContent=function(e,i,n){var o=this._diagram.getOptions()._contextHandler;if(o){var a=e(o(this.isPromoted()?"promotedLink":"link",this.getElem(),this._customLinkContent,null,this.getDataContext(),i,n,this._customPoints));if(a||!this._customLinkContent){var s=g._processLinkContent(a);if(this._customLinkContent&&s!=this._customLinkContent)this._checkAndMoveContents()||(this._customLinkContent.namespaceURI===t.ToolkitUtils.SVG_NS?this.getContainerElem().removeChild(this._customLinkContent):Array.isArray(this._customLinkContent)&&this._customLinkContent.forEach(function(t){this.getContainerElem().removeChild(t)}.bind(this))),this._customLinkContent=null;s===this._contentStoredInTouchEventContainer&&(this._hasContentBoundToTouchEvent=!0),this._customLinkContent||(s&&s.namespaceURI===t.ToolkitUtils.SVG_NS?(g._insertCustomElem(this,s,this._labelObj),this._customLinkContent=s):s&&Array.isArray(s)?(s.forEach(function(t){g._insertCustomElem(this,t,this._labelObj)}.bind(this)),this._customLinkContent=s):this._diagram.Log("dvt.Diagram: could not add custom link content for the link "+this.getId()+a,1)),g._fixLinkPath(this)}}else this._diagram.Log("dvt.Diagram: could not add custom link content - context handler is undefined",1)},g._renderLinkShape=function(e,i,n){var o=n._pathCmds;o||(o=["M",0,0,"L",0,0]);var a=i.id,s=i.color,r=i.width,d=i.svgStyle||i.style,h=t.CSSStyle.toNumber(i._hitDetectionOffset);n._hitDetectionUnderlay=n.CreateUnderlay("#000000",0,h),n.addChildAt(n._hitDetectionUnderlay,0);var l,c=new t.Path(n.getCtx(),o,a),u=i.svgClassName||i.className;if(c.setFill(null),c.setClassName(u),n.getCtx().isCustomElement())c.setStyle(d);else if(d&&d instanceof Object){d._type==g.CUSTOM_STYLE&&d.strokeDasharray&&(d.strokeDasharray=t.DiagramLinkUtils.processStrokeDashArray(d.strokeDasharray)),l={dashArray:d.strokeDasharray,dashOffset:d.strokeDashoffset};var p=t.JsonUtils.clone(d);["_type","strokeDasharray","strokeDashoffset"].forEach(function(t){delete p[t]}),c.setStyle(p)}else"solid"!==d&&(l={dashArray:t.DiagramLinkUtils.GetStrokeDash(d),dashOffset:t.DiagramLinkUtils.GetStrokeDashOffset(d)});var _=new t.Stroke(s,1,r,!0,l);c.setStroke(_),n.setShape(c),n.addChildAt(c,1)},g._renderLinkLabels=function(e,i,n){var o=i.label;if(o){var a=t.Agent.isRightToLeft(e.getCtx()),s=o.indexOf("\n")>0,r=s?a?t.MultilineText.H_ALIGN_RIGHT:t.MultilineText.H_ALIGN_LEFT:a?t.OutputText.H_ALIGN_RIGHT:t.OutputText.H_ALIGN_LEFT,d=s?t.MultilineText.V_ALIGN_TOP:t.OutputText.V_ALIGN_TOP,h=g.createText(e.getCtx(),o,i.labelStyle,r,d,s),l=i.labelStyle.getMaxWidth()||i.labelStyle.getWidth(),c=t.CSSStyle.toNumber(l);l?c>0&&t.TextUtils.fitText(h,c,1/0,n)&&(n._labelObj=h):(n.addChild(h),n._labelObj=h)}},g.createText=function(e,i,n,o,a,s){var r;return n.hasBackgroundStyles()?r=s?new t.BackgroundMultilineText(e,i,0,0,n,null,!0):new t.BackgroundOutputText(e,i,0,0,n):(r=s?new t.MultilineText(e,i,0,0,null,!0):new t.OutputText(e,i,0,0)).setCSSStyle(n),r.setHorizAlignment(o),r.setVertAlignment(a),r},g.prototype.setSelected=function(t){var e=this._getState();g.superclass.setSelected.call(this,t);var i=this._getCustomRenderer("selectionRenderer");i?this._applyCustomLinkContent(i,this._getState(),e):t?this._showFeedback(this._isShowingHoverEffect,!0):this._hideFeedback(),this.UpdateAriaLabel()},g.prototype.isSelectable=function(){return this.GetDiagram().isSelectionSupported()&&"off"!=this.getData().selectable},g.prototype._showFeedback=function(e,i){if(e){this._savedStroke||(this._savedStroke=this.getShape().getStroke());var n=this.getShape().getStroke(),o=new t.Stroke(this.getData().hoverInnerColor,n.getAlpha(),n.getWidth(),n.isFixedWidth(),n.getDashProps());this.getShape().setStroke(o),this.ReplaceConnectorColor(this.getStartConnector(),o),this.ReplaceConnectorColor(this.getEndConnector(),o)}else this._savedStroke&&(this.getShape().setStroke(this._savedStroke),this.ReplaceConnectorColor(this.getStartConnector(),this._savedStroke),this.ReplaceConnectorColor(this.getEndConnector(),this._savedStroke),this._savedStroke=null);this._linkUnderlay||(this._linkUnderlay=this.CreateFeedbackUnderlay("#000000",1,0,this.getData().svgStyle,this.getData().svgClassName),this.addChildAt(this._linkUnderlay,0));var a=i?this.getData().selectionColor:this.getData().hoverOuterColor,s=this._linkUnderlay.getStroke(),r=2+this.GetAppliedLinkWidth(),d=this.GetStyledLinkStroke(s,a,r);this._linkUnderlay.setStroke(d,2)},g.prototype._hideFeedback=function(){this._savedStroke&&(this.getShape().setStroke(this._savedStroke),this.ReplaceConnectorColor(this.getStartConnector(),this._savedStroke),this.ReplaceConnectorColor(this.getEndConnector(),this._savedStroke),this._savedStroke=null),this._linkUnderlay&&(this.removeChild(this._linkUnderlay),this._linkUnderlay.destroy&&this._linkUnderlay.destroy(),this._linkUnderlay=null)},g.prototype.GetStyledLinkStroke=function(e,i,n){if(this.getCtx().isCustomElement())return new t.Stroke(i,e.getAlpha(),n,e.isFixedWidth());var o=this.GetAppliedLinkStyle();if(o&&o instanceof Object){var a,s=o._type;if(s==g.CUSTOM_STYLE){var r=null!=o.strokeDashoffset?t.CSSStyle.toNumber(o.strokeDashoffset)+1:1;a={dashArray:t.DiagramLinkUtils.getCustomUnderlay(o.strokeDasharray),dashOffset:r}}else a={dashArray:t.DiagramLinkUtils.GetStrokeDash(s,!0),dashOffset:t.DiagramLinkUtils.GetStrokeDashOffset(s,!0)};return new t.Stroke(i,e.getAlpha(),n,!0,a)}return g.superclass.GetStyledLinkStroke.call(this,e,i,n)},g.prototype.handleTouchStart=function(){this._hasContentBoundToTouchEvent=!0},g.prototype.handleTouchEnd=function(){this._hasContentBoundToTouchEvent=!1,this._contentStoredInTouchEventContainer=null},g.prototype.showHoverEffect=function(){if(!this._isShowingHoverEffect){var t=this._getState();this._isShowingHoverEffect=!0;var e=this._getCustomRenderer("hoverRenderer");e?this._applyCustomLinkContent(e,this._getState(),t):this._showFeedback(!0,this.isSelected())}},g.prototype.hideHoverEffect=function(){var t=this._getState();this._isShowingHoverEffect=!1;var e=this._getCustomRenderer("hoverRenderer");e?this._applyCustomLinkContent(e,this._getState(),t):this.isSelected()?this._showFeedback(!1,!0):this._hideFeedback()},g.prototype.highlight=function(t){if(this._isHighlighted!==t){var e=t?1:this._diagram.getOptions().styleDefaults._highlightAlpha;this.setAlpha(e),this._isHighlighted=t}},g.prototype.getDatatip=function(t,e,i){var n=this.GetDiagram().getOptions().tooltip,o=n?n.renderer:null;return o?this.GetDiagram().getCtx().getTooltipManager().getCustomTooltip(o,this.getDataContext()):this.getShortDesc()},g.prototype.getShortDesc=function(){var e=this.GetDiagram().getOptions().translations;if(this.isPromoted()){var i=this.getData()._links.length;return t.ResourceUtils.format(e[i>1?"promotedLinks":"promotedLink"],[i])}return this.getData().shortDesc},g.prototype.getDataContext=function(){var t,e;this.GetDiagram().isDataProviderMode()?this.isPromoted()?(t=this.getData()._links.map(function(t){return t._itemData}),e=this.getData()._links[0]._noTemplate?t:this.getData()._links):(e=this.getData(),t=this.getData()._itemData):e=this.isPromoted()?this.getData()._links:this.getData()._itemData;var i={id:this.getId(),type:this.isPromoted()?"promotedLink":"link",label:this.getData().label,data:e,itemData:t,component:this.GetDiagram().getOptions()._widgetConstructor};return this.getCtx().fixRendererContext(i)},g.prototype.getAriaLabel=function(){var e=[],i=this.GetDiagram().getOptions().translations;return this.isSelectable()&&e.push(i[this.isSelected()?"stateSelected":"stateUnselected"]),this.isPromoted()&&e.push(i.promotedLinkAriaDesc),t.Displayable.generateAriaLabel(this.getShortDesc(),e)},g.prototype.UpdateAriaLabel=function(){if(!t.Agent.deferAriaCreation()){var e=this.getAriaLabel();e&&this.setAriaProperty("label",e)}},g.prototype.getNextNavigable=function(e){if(e.keyCode==t.KeyboardEvent.SPACE&&e.ctrlKey)return this;if(e.keyCode==t.KeyboardEvent.UP_ARROW||e.keyCode==t.KeyboardEvent.DOWN_ARROW){(s=this.getKeyboardFocusNode())||(s=this.GetDiagram().getNodeById(this.getStartId()));var i=this,n=this.GetDiagram().getNavigableLinksForNodeId(s.getId()),o=this.GetDiagram().getEventManager().getKeyboardHandler();return o&&o.getNextNavigableLink&&(i=o.getNextNavigableLink(s,this,e,n)),i.setKeyboardFocusNode(s),this._diagram.ensureObjInViewport(e,i),i}if(e.keyCode==t.KeyboardEvent.RIGHT_ARROW||e.keyCode==t.KeyboardEvent.LEFT_ARROW){var a;a=this._movingToStart(e.keyCode)?this.getStartId():this.getEndId();var s=this.GetDiagram().getNodeById(a);return this._diagram.ensureObjInViewport(e,s),s}return e.type==t.MouseEvent.CLICK?this:null},g.prototype._movingToStart=function(e){var i=this.getLinkStart(),n=this.getLinkEnd(),o=i.x<n.x;return!(e==t.KeyboardEvent.RIGHT_ARROW&&o||e==t.KeyboardEvent.LEFT_ARROW&&!o)},g.prototype.showKeyboardFocusEffect=function(){var t=this._getState();this._isShowingKeyboardFocusEffect=!0;var e=this._getCustomRenderer("focusRenderer");e?this._applyCustomLinkContent(e,this._getState(),t):this.showHoverEffect()},g.prototype.hideKeyboardFocusEffect=function(){var t=this._getState();this._isShowingKeyboardFocusEffect=!1;var e=this._getCustomRenderer("focusRenderer");e?this._applyCustomLinkContent(e,this._getState(),t):this.hideHoverEffect()},g.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect},g.prototype.getCategories=function(){return this.getData().categories?this.getData().categories:[this.getId()]},g.prototype.isHidden=function(){var e=this.GetDiagram().getOptions().hiddenCategories;return!(!e||!t.ArrayUtils.hasAnyItem(e,this.getCategories()))||(!this.GetDiagram().getNodeById(this.getStartId())||!this.GetDiagram().getNodeById(this.getEndId()))},g.prototype.animateUpdate=function(e,i,n){var o=i.getPoints(),a=this.getPoints(),s=new t.CustomAnimation(this.getCtx(),null,e.getAnimationDuration());if(!t.ArrayUtils.equals(o,a)){this.setPoints(o);var r=t.Animator.TYPE_POLYLINE;a.length>0&&isNaN(a[0])&&(r=t.Animator.TYPE_PATH),s.getAnimator().addProp(r,this,this.getPoints,this.setPoints,a)}if(i._labelObj&&this._labelObj){var h=i._labelObj.getMatrix(),l=this._labelObj.getMatrix();h.equals(l)||(this._labelObj.setMatrix(h),s.getAnimator().addProp(t.Animator.TYPE_MATRIX,this._labelObj,this._labelObj.getMatrix,this._labelObj.setMatrix,l))}if(i.getShape()&&this.getShape()){var c=i.getShape().getStroke(),u=this.getShape().getStroke();c&&u&&c instanceof t.Stroke&&u instanceof t.Stroke&&(c.getColor()!=u.getColor()||c.getWidth()!=u.getWidth())&&(this.getShape().setStroke(c),s.getAnimator().addProp(t.Animator.TYPE_STROKE,this.getShape(),this.getShape().getStroke,this.getShape().setStroke,u))}var p=i.getTranslateX(),_=i.getTranslateY(),f=this.getTranslateX(),m=this.getTranslateY();if(p!=f&&(this.setTranslateX(p),s.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getTranslateX,this.setTranslateX,f)),_!=m&&(this.setTranslateY(_),s.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getTranslateY,this.setTranslateY,m)),this._getCustomRenderer("renderer")){var v=i.getContainerElem().querySelector(".oj-diagram-link-path"),C=this.getContainerElem().querySelector(".oj-diagram-link-path");if(v&&C){o=t.ToolkitUtils.getAttrNullNS(v,"d"),a=t.ToolkitUtils.getAttrNullNS(C,"d");t.ToolkitUtils.setAttrNullNS(C,"d",o);s.getAnimator().addProp(t.Animator.TYPE_PATH,C,function(e){var i=t.ToolkitUtils.getAttrNullNS(C,"d");return t.PathUtils.createPathArray(i)},function(e){t.ToolkitUtils.setAttrNullNS(C,"d",e.join(" "))},t.PathUtils.createPathArray(a))}for(var y=g._getFadeInCustomItems(this._customLinkContent,C,v),S=new t.CustomAnimation(this.getCtx(),null,e.getAnimationDuration()),D=0;D<y.length;D++){var E=y[D];t.ToolkitUtils.setAttrNullNS(E,"opacity","0");var k=function(e){t.ToolkitUtils.setAttrNullNS(this,"opacity",e)}.bind(E),N=function(){var e=t.ToolkitUtils.getAttrNullNS(this,"opacity");return Number(e)}.bind(E);S.getAnimator().addProp(t.Animator.TYPE_NUMBER,E,N,k,1)}e.add(S,d.INSERT)}if(n){var b=this;t.Playable.appendOnEnd(s,function(){b.getParent().removeChild(b)})}e.add(s,d.UPDATE)},g.prototype.animateDelete=function(e,i){this.GetDiagram().getLinksPane().addChild(this);var n=this,o=new t.AnimFadeOut(this.getCtx(),this,e.getAnimationDuration());t.Playable.appendOnEnd(o,function(){n.getParent().removeChild(n),n.destroy()}),e.add(o,d.DELETE)},g.prototype.animateInsert=function(e){this.setAlpha(0),e.add(new t.AnimFadeIn(this.getCtx(),this,e.getAnimationDuration()),d.INSERT)},g.prototype.animateCollapse=function(e,i){if(i&&0!=i.length){var n=this._customPoints?this._customPoints:this.getPoints();Array.isArray(n)&&(n=n.slice());var o=this.getTranslateX(),a=this.getTranslateY();this.animateUpdate(e,i[0]);for(var s=1;s<i.length;s++){var r={id:"_fakeLink"+s+this.getId()};r=t.JsonUtils.merge(r,this.getData());var d=new g(this.GetDiagram().getCtx(),this.GetDiagram(),r,!0);d.render(),d.setPoints(n),d.setTranslate(o,a),d.animateUpdate(e,i[s],!0)}}},g.prototype.animateExpand=function(t,e){if(e&&0!=e.length)for(var i=0;i<e.length;i++)e[i].animateUpdate(t,this)},g.prototype.setLabelAlignments=function(e,i){var n=this._labelObj instanceof t.MultilineText||this._labelObj instanceof t.BackgroundMultilineText;"baseline"==i&&(i=n?t.MultilineText.V_ALIGN_TOP:t.OutputText.V_ALIGN_AUTO),this._labelObj.setHorizAlignment(e),this._labelObj.setVertAlignment(i)},g.prototype.setGroupId=function(t){this._groupId=t},g.prototype.getGroupId=function(){return this._groupId},g._getCommonAncestorId=function(t,e){for(var i=function(t,e){for(var i=[],n=e.getNodeById(t)?e.getNodeById(t).getGroupId():null;n;)i.push(n),n=e.getNodeById(n)?e.getNodeById(n).getGroupId():null;return i},n=i(t.getStartId(),e),o=i(t.getEndId(),e),a=0;a<n.length;a++)if(o.indexOf(n[a])>-1)return n[a];return null},g.GetPromotedLinkId=function(t,e,i){return t.isDataProviderMode()?{name:"_promoted",startId:e,endId:i}:"_plL"+e+"_L"+i},g.prototype.ShowDropEffect=function(){this._dropEffect||this._createDropEffect("oj-diagram-link oj-active-drop")},g.prototype.ShowRejectedDropEffect=function(){this._dropEffect||this._createDropEffect("oj-diagram-link oj-invalid-drop")},g.prototype.ClearDropEffect=function(){this._dropEffect&&(this.removeChild(this._dropEffect),this._dropEffect=null)},g.prototype._createDropEffect=function(e){var i=t.CSSStyle.toNumber(this.getData()._hitDetectionOffset);this._dropEffect=this.CreateFeedbackUnderlay("#000000",0,i,null,e),this._dropEffect.setMouseEnabled(!1),this.addChild(this._dropEffect)},g.ConvertLinkData=function(t){return{id:t.id,startNode:t.startNode,endNode:t.endNode,label:t.label,selectable:t.selectable,shortDesc:t.shortDesc,categories:t.categories,_itemData:t}},g.prototype.getAnimationState=function(){var t,e,i;this._labelObj&&((t={matrix:this._labelObj.getMatrix()}).getMatrix=function(){return t.matrix}),this.getShape()&&((e={stroke:this.getShape().getStroke()}).getStroke=function(){return e.stroke});var n=this.isPromoted()?this.getData()._links:null;return(i={partialUpdate:!0,id:this.getId(),promoted:this.isPromoted(),includedLinks:n,points:this.getPoints(),shape:e,tx:this.getTranslateX(),ty:this.getTranslateY(),_labelObj:t}).getId=function(){return i.id},i.isPromoted=function(){return i.promoted},i.getData=function(){return{_links:i.includedLinks}},i.getPoints=function(){return i.points},i.getShape=function(){return i.shape},i.getTranslateX=function(){return i.tx},i.getTranslateY=function(){return i.ty},i},g._fixLinkPath=function(e){var i=e.getContainerElem().querySelector(".oj-diagram-link-path");if(i){var n=e._customPoints,o=t.DiagramLinkUtils.IsPath(n)?n:t.DiagramLinkUtils.ConvertToPath(n);i.setAttributeNS(null,"d",t.PathUtils.getPathString(o))}},g._getFadeInCustomItems=function(t,e,i){var n,o=[];if(e&&i){var a=t;Array.isArray(t)&&t.forEach(function(t){t.contains(e)?a=t:o.push(t)});for(var s=e;s!==a;)o=o.concat(function(t,e){for(var i=[];t;)1===t.nodeType&&t!==e&&i.push(t),t=t.nextSibling;return i}((n=s).parentNode.firstChild,n)),s=s.parentNode}else t&&(o=Array.isArray(t)?t:[t]);return o},g._insertCustomElem=function(t,e,i){var n=i?i.getOuterElem():null;t&&t.getContainerElem().insertBefore(e,n)},g.prototype._getCustomRenderer=function(t){var e=this._diagram.getOptions().linkContent,i=null;if(e){var n=e.renderer;i=e[t],i=n&&i?i:n}return i},g.prototype.GetCreationFeedbackPoints=function(t){var e=this._customPoints?this._customPoints:this.getPoints();return[e[0],e[1],t.x,t.y]},g._processLinkContent=function(e){var i=null;if(e.namespaceURI===t.ToolkitUtils.SVG_NS&&"svg"===e.tagName)i=[],Array.prototype.forEach.call(e.childNodes,function(t){i.push(t)});else if(e.namespaceURI===t.ToolkitUtils.SVG_NS)i=e;else if(Array.isArray(e)){i=[];for(var n=0;n<e.length;n++){if(e[n].namespaceURI===t.ToolkitUtils.SVG_NS&&"svg"===e[n].tagName){Array.prototype.forEach.call(e[n].childNodes,function(t){i.push(t)});break}e[n].namespaceURI===t.ToolkitUtils.SVG_NS&&i.push(e[n])}}return Array.isArray(i)&&0===i.length?null:i},g.prototype._checkAndMoveContents=function(){return!!this._hasContentBoundToTouchEvent&&(this.GetDiagram().storeTouchEventContent(this._customLinkContent,this),this._contentStoredInTouchEventContainer=this._customLinkContent,this._hasContentBoundToTouchEvent=!1,!0)};var c=function(t,e,i){this.Init(t,e,i)};t.Obj.createSubclass(c,t.BaseDiagramNode,"DvtDiagramNode"),c.LTR_BUTTON_PATH="M1 0 19 0 A 1 1 0 0 1 19 1 L 1 19 A 1 1 0 0 1 0 19 L 0 1 A 1 1 0 0 1 1 0z",c.RTL_BUTTON_PATH="M1 0 19 0 A 1 1 0 0 1 20 1 L 20 19 A 1 1 0 0 1 19 19 L 1 1 A 1 1 0 0 1 1 0z",c.newInstance=function(t,e){return new c(t.getCtx(),t,e)},c.prototype.Init=function(e,i,n){c.superclass.Init.call(this,e,n.id,i),this._data=n,this._isHighlighted=!0,this._hasContentBoundToTouchEvent=!1,this._contentStoredInTouchEventContainer=null,this.isSelectable()&&this.setCursor(t.SelectionEffectUtils.getSelectingCursor())},c.prototype.getData=function(){return this._data},c.prototype.setData=function(t){this._data=t},c.prototype.getId=function(){return this._data.id},c.prototype.getContentBounds=function(t){return!this._contentDims&&t&&(this._contentDims=this._calcContentDims()),this._contentDims},c.prototype.getLabelBounds=function(t){var e=null;return this._labelObj&&t&&(e=this._labelObj.getDimensions()),e},c.prototype.setSelected=function(t){var e=this._getState();c.superclass.setSelected.call(this,t);var i=this._getCustomRenderer("selectionRenderer");i?this._applyCustomNodeContent(i,this._getState(),e):this.processDefaultSelectionEffect(t),this.UpdateAriaLabel()},c.prototype.processDefaultSelectionEffect=function(t){this.getSelectionShape()&&this.getSelectionShape().setSelected(t)},c.prototype.isSelectable=function(){return this.GetDiagram().isSelectionSupported()&&"off"!=this.getData().selectable},c.prototype.GetIcon=function(){return this._shape},c.prototype.render=function(){this._cleanUp();var t=this.getData(),e=this._getCustomRenderer("renderer");if(e){if(this._applyCustomNodeContent(e,this._getState(),null),this.isDisclosed()){var i=this.GetDiagram().getPanZoomCanvas().getZoom(),n=this.getElem().getBoundingClientRect(),o=this._childNodePane?this._childNodePane.getElem().getBoundingClientRect():null;this._containerPadding={left:(o.left-n.left)/i,right:(n.right-o.right)/i,top:(o.top-n.top)/i,bottom:(n.bottom-o.bottom)/i}}this._selectionShape&&(this.removeChild(this._selectionShape),this._selectionShape=null)}else this.isDisclosed()?c._renderContainer(this._diagram,t,this):(c._renderNodeBackground(this._diagram,t,this),c._renderNodeIcon(this._diagram,t,this)),c._addHoverSelectionDefaultStrokes(this.getSelectionShape(),t);c._renderNodeLabels(this._diagram,t,this),this._setDraggableStyleClass(),c._renderContainerButton(this._diagram,t,this),this.setAriaRole("img"),this.UpdateAriaLabel(),this._diagram.getEventManager().associate(this,this)},c.prototype._applyCustomNodeContent=function(e,i,n){var o=this._diagram.getOptions()._contextHandler;if(o){var a=this.getDataContext(),s=null;if(this.isDisclosed()){var r=this.GetChildNodePane(),d=r.getDimensions();s={element:r.getElem(),w:d?d.w-d.x:null,h:d?d.h-d.y:null}}var h=e(o("node",this.getElem(),this._customNodeContent,s,a,i,n));if(h||!this._customNodeContent||!this.getCtx().isCustomElement()){if(this._customNodeContent&&h!=this._customNodeContent)this._checkAndMoveContents()||(this._customNodeContent.namespaceURI===t.ToolkitUtils.SVG_NS?this.getContainerElem().removeChild(this._customNodeContent):Array.isArray(this._customNodeContent)?this._customNodeContent.forEach(function(t){this.getContainerElem().removeChild(t)}.bind(this)):this.removeChild(h)),this._customNodeContent=null;h===this._contentStoredInTouchEventContainer&&(this._hasContentBoundToTouchEvent=!0),h&&h.namespaceURI===t.ToolkitUtils.SVG_NS?this._customNodeContent||(t.ToolkitUtils.appendChildElem(this.getContainerElem(),h),this._customNodeContent=h):h&&Array.isArray(h)?this._customNodeContent||(h.forEach(function(e){t.ToolkitUtils.appendChildElem(this.getContainerElem(),e)}.bind(this)),this._customNodeContent=h):h instanceof t.BaseComponent?this._customNodeContent||(this.addChild(h),this._customNodeContent=h):h&&this._diagram.Log("dvt.Diagram: could not add custom node content for the node "+this.getId()+h,1)}}else this._diagram.Log("dvt.Diagram: could not add custom node content - context handler is undefined",1)},c._renderNodeBackground=function(e,i,n){if(!e.getCtx().isCustomElement()){var o=i.backgroundSvgStyle||i.backgroundStyle,a=t.JsonUtils.clone(o),s=[t.CSSStyle.WIDTH,t.CSSStyle.HEIGHT,t.CSSStyle.BACKGROUND_COLOR,t.CSSStyle.BORDER_COLOR,t.CSSStyle.BORDER_WIDTH,t.CSSStyle.BORDER_RADIUS];if(!(o=c._getNodeCSSStyle(a,i._backgroundStyle,s)).isEmpty()){var r=t.CSSStyle.toNumber(o.getStyle(t.CSSStyle.WIDTH)),d=t.CSSStyle.toNumber(o.getStyle(t.CSSStyle.HEIGHT)),h=o.getStyle(t.CSSStyle.BACKGROUND_COLOR),l=o.getStyle(t.CSSStyle.BORDER_COLOR),g=t.CSSStyle.toNumber(o.getStyle(t.CSSStyle.BORDER_WIDTH)),u=t.CSSStyle.toNumber(o.getStyle(t.CSSStyle.BORDER_RADIUS)),p=new t.Rect(e.getCtx(),0,0,r,d);p.setSolidFill(h),u&&(p.setRx(u),p.setRy(u)),l&&p.setStroke(new t.Stroke(l,1,g)),a&&s.forEach(function(e){delete a[t.CSSStyle.cssStringToObjectProperty(e)]});var _=i.backgroundSvgClassName||i.backgroundClassName;p.setStyle(a).setClassName(_),n.addChild(p),n.setSelectionShape(p),n._background=p}}},c._renderNodeIcon=function(e,i,n){var o=i.icon;if(o){var a,s=o.width,r=o.height,d=o.color,h=o.borderRadius;a=o.source?new t.ImageMarker(e.getCtx(),s/2,r/2,s,r,h,o.source,o.sourceSelected,o.sourceHover,o.sourceHoverSelected):new t.SimpleMarker(e.getCtx(),o.shape,s/2,r/2,s,r,h),"none"!=o.fillPattern?a.setFill(new t.PatternFill(o.fillPattern,d,d)):a.setSolidFill(d),null!=o.opacity&&a.setAlpha(o.opacity),o.borderColor&&a.setStroke(new t.Stroke(o.borderColor,1,o.borderWidth));var l=o.svgStyle||o.style,g=o.svgClassName||o.className;a.setStyle(l).setClassName(g),n.addChild(a),n._shape=a,c._setIconPosition(e,i,n),n._background||n.setSelectionShape(a)}},c._setIconPosition=function(e,i,n){if(n._background){var o=i.icon,a=n._background.getWidth(),s=n._background.getHeight(),r=o.width,d=o.height,h=.5*(a-r),l=.5*(s-d);if(void 0!==o.positionX)h=parseFloat(o.positionX),t.Agent.isRightToLeft(n.getCtx())&&(h=a-h-r);else{var g=o.halign;"start"==g?g=t.Agent.isRightToLeft(n.getCtx())?"right":"left":"end"==g&&(g=t.Agent.isRightToLeft(n.getCtx())?"left":"right"),h="left"==g?0:"right"==g?a-r:h}void 0!==o.positionY?l=parseFloat(o.positionY):"top"==o.valign?l=0:"bottom"==o.valign&&(l=s-d),n._shape.setTranslate(h,l)}},c._renderNodeLabels=function(e,i,n){var o=i.label;if(o){var a=t.Agent.isRightToLeft(e.getCtx()),s=o.indexOf("\n")>0,r=s?a?t.MultilineText.H_ALIGN_RIGHT:t.MultilineText.H_ALIGN_LEFT:a?t.OutputText.H_ALIGN_RIGHT:t.OutputText.H_ALIGN_LEFT,d=s?t.MultilineText.V_ALIGN_TOP:t.OutputText.V_ALIGN_TOP,h=c.createText(e.getCtx(),o,i.labelStyle,r,d,s),l=i.labelStyle.getMaxWidth()||i.labelStyle.getWidth(),g=t.CSSStyle.toNumber(l);l?g>0&&t.TextUtils.fitText(h,g,1/0,n)&&(n._labelObj=h):(n.addChild(h),n._labelObj=h)}},c.createText=function(e,i,n,o,a,s){var r;return n.hasBackgroundStyles()?r=s?new t.BackgroundMultilineText(e,i,0,0,n,null,!0):new t.BackgroundOutputText(e,i,0,0,n):(r=s?new t.MultilineText(e,i,0,0,null,!0):new t.OutputText(e,i,0,0)).setCSSStyle(n),r.setHorizAlignment(o),r.setVertAlignment(a),r},c._addHoverSelectionDefaultStrokes=function(e,i){var n=i.hoverInnerColor,o=i.hoverOuterColor,a=i.selectionColor,s=new t.Stroke(n,1,4,!0),r=new t.Stroke(o,1,8,!0),d=new t.Stroke(n,1,2,!0),h=new t.Stroke(a,1,6,!0),l=new t.Stroke(n,1,4,!0),g=new t.Stroke(a,1,8,!0);e.setHoverStroke(s,r).setSelectedStroke(d,h).setSelectedHoverStroke(l,g)},c._addHoverSelectionOuterStrokes=function(e,i){var n=i.hoverInnerColor,o=i.hoverOuterColor,a=i.selectionColor,s=new t.Stroke(n,1,2,!0),r=new t.Stroke(o,1,2,!0),d=new t.Stroke(n,1,1,!0),h=new t.Stroke(a,1,2,!0),l=new t.Stroke(n,1,2,!0),g=new t.Stroke(a,1,2,!0);e.setHoverStroke(s,r).setSelectedStroke(d,h).setSelectedHoverStroke(l,g)},c.prototype.setSelectionShape=function(t){this._selectionShape=t},c.prototype.getSelectionShape=function(){if(!this._selectionShape){var e=this.getContentBounds(!0);if(e){var i=new t.Rect(this._diagram.getCtx(),e.x,e.y,e.w,e.h);i.setInvisibleFill(),i.setStrokeAlignment("outer"),this.setSelectionShape(i),this.addChildAt(i,0),c._addHoverSelectionOuterStrokes(i,this.getData()),this._selectionShape=i}}return this._selectionShape},c.prototype.handleTouchStart=function(){this._hasContentBoundToTouchEvent=!0},c.prototype.handleTouchEnd=function(){this._hasContentBoundToTouchEvent=!1,this._contentStoredInTouchEventContainer=null},c.prototype.showHoverEffect=function(){if(!this._isShowingHoverEffect){var t=this._getState();this._isShowingHoverEffect=!0;var e=this._getCustomRenderer("hoverRenderer");e?this._applyCustomNodeContent(e,this._getState(),t):this.processDefaultHoverEffect(!0)}},c.prototype.hideHoverEffect=function(){if(this._isShowingHoverEffect){var t=this._getState();this._isShowingHoverEffect=!1;var e=this._getCustomRenderer("hoverRenderer");e?this._applyCustomNodeContent(e,this._getState(),t):this.processDefaultHoverEffect(!1)}},c.prototype.processDefaultHoverEffect=function(t){this.getSelectionShape()&&(t?this.getSelectionShape().showHoverEffect():this.getSelectionShape().hideHoverEffect())},c.prototype.getDatatip=function(t,e,i){var n=this.GetDiagram().getOptions().tooltip,o=n?n.renderer:null;return o?this.GetDiagram().getCtx().getTooltipManager().getCustomTooltip(o,this.getDataContext()):this.getShortDesc()},c.prototype.getShortDesc=function(){return this.getData().shortDesc},c.prototype.getDataContext=function(){var t=this.getData(),e={id:this.getId(),type:"node",label:t.label,data:this.GetDiagram().isDataProviderMode()?t._noTemplate?t._itemData:t:t._itemData,itemData:this.GetDiagram().isDataProviderMode()?t._itemData:null,component:this.GetDiagram().getOptions()._widgetConstructor};return this.getCtx().fixRendererContext(e)},c.prototype.getAriaLabel=function(){var e=[],i=this.GetDiagram().getOptions().translations;return this.isSelectable()&&e.push(i[this.isSelected()?"stateSelected":"stateUnselected"]),this.isContainer()&&e.push(i[this.isDisclosed()?"stateExpanded":"stateCollapsed"]),t.Displayable.generateAriaLabel(this.getShortDesc(),e)},c.prototype.UpdateAriaLabel=function(){if(!t.Agent.deferAriaCreation()){var e=this.getAriaLabel();e&&this.setAriaProperty("label",e)}},c.prototype.getNextNavigable=function(e){var i=null;if(e.keyCode==t.KeyboardEvent.SPACE&&e.ctrlKey)i=this;else if((e.keyCode==t.KeyboardEvent.OPEN_ANGLED_BRACKET||t.KeyboardEvent.CLOSE_ANGLED_BRACKET)&&e.altKey){var n=this.GetDiagram().getNavigableLinksForNodeId(this.getId()),o=this.GetDiagram().getEventManager().getKeyboardHandler();o&&o.getFirstNavigableLink&&(i=o.getFirstNavigableLink(this,e,n)),i?i.setKeyboardFocusNode(this):i=this}else if(e.keyCode==t.KeyboardEvent.OPEN_BRACKET){if(this.isDisclosed())i=this.getChildNodes()[0];else i=this}else if(e.keyCode==t.KeyboardEvent.CLOSE_BRACKET){i=(a=this.getGroupId()?this.GetDiagram().getNodeById(this.getGroupId()):null)||this}else if(e.type==t.MouseEvent.CLICK)i=this;else{var a,s=(a=this.getGroupId()?this.GetDiagram().getNodeById(this.getGroupId()):null)?a.getChildNodes():this.GetDiagram().GetRootNodeObjects();i=t.KeyboardHandler.getNextAdjacentNavigable(this,e,s)}return e instanceof t.KeyboardEvent&&this._diagram.ensureObjInViewport(e,i),i},c.prototype.HandleKeyboardEvent=function(e){e.keyCode==t.KeyboardEvent.SPACE&&e.ctrlKey&&e.shiftKey&&this.isContainer()&&this.GetDiagram().setNodeDisclosed(this.getId(),!this.isDisclosed())},c.prototype.isContainer=function(){if(this._diagram.isTreeDataProvider()){var t=this._diagram.getOptions().nodeData.getChildDataProvider(this.getId());return!!t&&"yes"!==t.isEmpty()}return!this._diagram.isDataProviderMode()&&0!=this.GetDiagram().getOptions().data.getChildCount(this.getData())},c.prototype.showKeyboardFocusEffect=function(){if(!this.isShowingKeyboardFocusEffect()){var t=this._getState();this._isShowingKeyboardFocusEffect=!0;var e=this._getCustomRenderer("focusRenderer");e?this._applyCustomNodeContent(e,this._getState(),t):this.processDefaultFocusEffect(!0)}},c.prototype.hideKeyboardFocusEffect=function(){if(this.isShowingKeyboardFocusEffect()){var t=this._getState();this._isShowingKeyboardFocusEffect=!1;var e=this._getCustomRenderer("focusRenderer");e?this._applyCustomNodeContent(e,this._getState(),t):this.processDefaultFocusEffect(!1)}},c.prototype.processDefaultFocusEffect=function(t){this.processDefaultHoverEffect(t)},c.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect},c.prototype.getCategories=function(){return this.getData().categories?this.getData().categories:[this.getId()]},c.prototype.isHidden=function(){var e=this.GetDiagram().getOptions().hiddenCategories;return!(!e||!t.ArrayUtils.hasAnyItem(e,this.getCategories()))},c.prototype._calcContentDims=function(){var e,i=null;if(this._customNodeContent)if(this._customNodeContent instanceof t.BaseComponent)(e=this._customNodeContent.getDimensions())&&(i=new t.Rectangle(e.x,e.y,e.w,e.h));else{var n=this._customNodeContent;if(Array.isArray(n))for(var o=0;o<n.length;o++)if(n[o].namespaceURI===t.ToolkitUtils.SVG_NS){n=n[o];break}(e=n.getBBox())&&(i=new t.Rectangle(e.x,e.y,e.width,e.height))}else this.isDisclosed()?i=this._containerShape.GetDimensionsWithStroke(this):(i=this._background?this._background.GetDimensionsWithStroke(this):null)&&this._shape?i=i.getUnion(this._shape.GetDimensionsWithStroke(this)):!i&&this._shape&&(i=this._shape.GetDimensionsWithStroke(this));return i},c.prototype.animateUpdate=function(e,i){var n=new t.CustomAnimation(this.getCtx(),null,e.getAnimationDuration());if(this.isDisclosed()||i.isDisclosed())if(this.isDisclosed()&&i.isDisclosed()){if(i._labelObj&&this._labelObj){p=i._labelObj.getMatrix(),_=this._labelObj.getMatrix();p.equals(_)||(this._labelObj.setMatrix(p),n.getAnimator().addProp(t.Animator.TYPE_MATRIX,this._labelObj,this._labelObj.getMatrix,this._labelObj.setMatrix,_))}if(this._getCustomRenderer("renderer"))this._animateCustomUpdate(e,i);else{if(c._animatePosition(n,i,this),c._animateContainer(n,i._containerShape,this._containerShape),t.Agent.isRightToLeft(this.getCtx())&&i._containerButton&&this._containerButton){var o=i._containerButton.getTranslateX(),a=this._containerButton.getTranslateX();o!=a&&(this._containerButton.setTranslateX(o),n.getAnimator().addProp(t.Animator.TYPE_NUMBER,this._containerButton,this._containerButton.getTranslateX,this._containerButton.setTranslateX,a))}if(!i.partialUpdate){for(var s=[],r=[],h=this.getChildNodeIds(),l=0;l<h.length;l++)s.push(this.GetDiagram().getNodeById(h[l]));var g=i.getChildNodeIds(),u=e.getOldDiagram().NodesMap;for(l=0;l<g.length;l++)r.push(u.get(g[l]));e.constructAnimation(r,s)}}}else this._animateCustomUpdate(e,i);else{if(c._animatePosition(n,i,this),i._shape&&this._shape&&(n.getAnimator().addProp(t.Animator.TYPE_RECTANGLE,this._shape,this._shape.getCenterDimensions,this._shape.setCenterDimensions,this._shape.getCenterDimensions()),this._shape.setCenterDimensions(i._shape.getCenterDimensions())),i._labelObj&&this._labelObj){var p=i._labelObj.getMatrix(),_=this._labelObj.getMatrix();p.equals(_)||(this._labelObj.setMatrix(p),n.getAnimator().addProp(t.Animator.TYPE_MATRIX,this._labelObj,this._labelObj.getMatrix,this._labelObj.setMatrix,_))}c._animateFill(n,i._background,this._background),c._animateFill(n,i._shape,this._shape)}e.add(n,d.UPDATE)},c.prototype._animateCustomUpdate=function(e,i){var n=i.getContentBounds(),o=this.getContentBounds();if(n.equals(o)){var a=new t.CustomAnimation(this.getCtx(),null,e.getAnimationDuration());return c._animatePosition(a,i,this),void e.add(a,d.UPDATE)}var s=o.w/n.w,r=n.w/o.w,h=(a=new t.CustomAnimation(this.getCtx(),null,e.getAnimationDuration()),new t.Point(i.getTranslateX()+.5*n.w,i.getTranslateY()+.5*n.h)),l=this.getTranslateX(),g=this.getTranslateY();this.setTranslateX(h.x-o.w*r*.5),this.setTranslateY(h.y-o.w*r*.5),a.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getTranslateX,this.setTranslateX,l),a.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getTranslateY,this.setTranslateY,g),e.add(a,d.UPDATE),this.setScaleX(r),this.setScaleY(r);var u=new t.AnimScaleTo(this.getCtx(),this,new t.Point(1,1),e.getAnimationDuration());e.add(u,d.UPDATE);var p=i.partialUpdate?i.origContent:i;if(p){this.getParent().addChild(p);var _=new t.Point(this.getTranslateX()+.5*o.w,this.getTranslateY()+.5*o.h);a.getAnimator().addProp(t.Animator.TYPE_NUMBER,p,i.getTranslateX,p.setTranslateX,_.x-n.w*s*.5),a.getAnimator().addProp(t.Animator.TYPE_NUMBER,p,i.getTranslateY,p.setTranslateY,_.y-n.h*s*.5);var f=new t.AnimScaleTo(this.getCtx(),p,new t.Point(s,s),e.getAnimationDuration());e.add(f,d.UPDATE);var m=new t.AnimFadeOut(this.getCtx(),p,e.getAnimationDuration());e.add(m,d.UPDATE);var v=this;t.Playable.appendOnEnd(m,function(){v.getParent().removeChild(p)}),this.setAlpha(0);var C=new t.AnimFadeIn(this.getCtx(),this,e.getAnimationDuration());e.add(C,d.UPDATE)}},c._animatePosition=function(e,i,n){if(n&&i){var o=i.getTranslateX(),a=i.getTranslateY(),s=n.getTranslateX(),r=n.getTranslateY();o!=s&&(n.setTranslateX(o),e.getAnimator().addProp(t.Animator.TYPE_NUMBER,n,n.getTranslateX,n.setTranslateX,s)),a!=r&&(n.setTranslateY(a),e.getAnimator().addProp(t.Animator.TYPE_NUMBER,n,n.getTranslateY,n.setTranslateY,r))}},c._animateContainer=function(e,i,n){n&&i&&(c._animateFill(e,i,n),e.getAnimator().addProp(t.Animator.TYPE_NUMBER,n,n.getWidth,n.setWidth,n.getWidth()),n.setWidth(i.getWidth()),e.getAnimator().addProp(t.Animator.TYPE_NUMBER,n,n.getHeight,n.setHeight,n.getHeight()),n.setHeight(i.getHeight()))},c._animateFill=function(e,i,n){i&&n&&n.getFill()instanceof t.SolidFill&&!n.getFill().equals(i.getFill())&&(e.getAnimator().addProp(t.Animator.TYPE_FILL,n,n.getFill,n.setFill,n.getFill()),n.setFill(i.getFill()))},c.prototype.animateDelete=function(e,i){this.GetDiagram().getNodesPane().addChild(this);var n=this,o=new t.AnimFadeOut(this.getCtx(),this,e.getAnimationDuration());t.Playable.appendOnEnd(o,function(){n.getParent().removeChild(n),n.destroy()}),e.add(o,d.DELETE)},c.prototype.animateInsert=function(e){this.setAlpha(0),e.add(new t.AnimFadeIn(this.getCtx(),this,e.getAnimationDuration()),d.INSERT)},c.prototype._getState=function(t){return{hovered:this._isShowingHoverEffect,selected:this.isSelected(),focused:this._isShowingKeyboardFocusEffect,zoom:t||this.GetDiagram().getPanZoomCanvas().getZoom(),expanded:this.isDisclosed()}},c.prototype.rerenderOnZoom=function(t){var e=this._getCustomRenderer("zoomRenderer");if(e){var i=this._getState(t.oldZoom),n=this._getState(t.newZoom);this._applyCustomNodeContent(e,n,i)}},c.prototype.highlight=function(t){if(this._isHighlighted!==t){this._isHighlighted=t;var e=t?1:this._diagram.getOptions().styleDefaults._highlightAlpha;!this._customNodeContent&&this.isDisclosed()?(this._containerShape&&this._containerShape.setAlpha(e),this._containerButton&&this._containerButton.setAlpha(e),this._labelObj&&this._labelObj.setAlpha(e),this._selectionShape&&this._selectionShape.setAlpha(e)):this.setAlpha(e)}},c.prototype.setLabelAlignments=function(e,i){var n=this._labelObj instanceof t.MultilineText||this._labelObj instanceof t.BackgroundMultilineText;"baseline"==i&&(i=n?t.MultilineText.V_ALIGN_TOP:t.OutputText.V_ALIGN_AUTO),this._labelObj.setHorizAlignment(e),this._labelObj.setVertAlignment(i)},c.prototype.getContainerPadding=function(){if(!this._containerPadding&&this._getCustomRenderer("renderer")){var t=this.GetDiagram().getPanZoomCanvas().getZoom(),e=this.getElem().getBoundingClientRect(),i=this._childNodePane?this._childNodePane.getElem().getBoundingClientRect():null;this._containerPadding={left:(i.left-e.left)/t,right:(e.right-i.right)/t,top:(i.top-e.top)/t,bottom:(e.bottom-i.bottom)/t}}else if(!this._containerPadding){var n=this._data.containerSvgStyle||this._data.containerStyle,o=c._getNodeCSSStyle(n,this._data._containerStyle,["padding-left","padding-right","padding-top","padding-bottom"]);this._containerPadding={left:o.getPadding("padding-left"),right:o.getPadding("padding-right"),top:o.getPadding("padding-top"),bottom:o.getPadding("padding-bottom")}}return this._containerPadding},c.prototype.getChildNodeIds=function(){return this._childNodeIds},c.prototype.addChildNodeId=function(t){this._childNodeIds||(this._childNodeIds=[]),this._childNodeIds.push(t)},c.prototype.removeChildNodeId=function(e){this._childNodeIds&&t.ArrayUtils.removeItem(this._childNodeIds,e)},c.prototype.removeChildNode=function(t){t&&(this.removeChildNodeId(t.getId()),this._childNodePane.removeChild(t))},c.prototype.getChildNodes=function(){for(var t=[],e=this._childNodeIds?this._childNodeIds.length:-1,i=0;i<e;i++){var n=this.GetDiagram().getNodeById(this._childNodeIds[i]);n&&t.push(n)}return t},c.prototype.setGroupId=function(t){this._groupId=t},c.prototype.getGroupId=function(){return this._groupId},c.prototype.GetChildNodePane=function(){return this._childNodePane||(this._childNodePane=new t.Container(this.getCtx()),this.addChild(this._childNodePane)),this._childNodePane},c.prototype.handleDisclosure=function(e){t.EventManager.consumeEvent(e),this._diagram.setNodeDisclosed(this.getId(),!this.isDisclosed())},c._renderContainer=function(e,i,n){var o=e.getCtx().isCustomElement()?null:i.containerSvgStyle||i.containerStyle,a=t.JsonUtils.clone(o),s=[t.CSSStyle.BACKGROUND_COLOR,t.CSSStyle.BORDER_COLOR,t.CSSStyle.BORDER_WIDTH,t.CSSStyle.BORDER_RADIUS],r=c._getNodeCSSStyle(a,i._containerStyle,s),d=r.getStyle(t.CSSStyle.BACKGROUND_COLOR),h=r.getStyle(t.CSSStyle.BORDER_COLOR),l=t.CSSStyle.toNumber(r.getStyle(t.CSSStyle.BORDER_WIDTH)),g=t.CSSStyle.toNumber(r.getStyle(t.CSSStyle.BORDER_RADIUS)),u=n.GetChildNodePane(),p=n.getContainerPadding();u.setTranslate(p.left,p.top);var _=u.getDimensionsWithStroke(),f=new t.Rect(e.getCtx(),0,0,_.w+p.left+p.right,_.h+p.top+p.bottom);f.setSolidFill(d),g&&(f.setRx(g),f.setRy(g)),h&&f.setStroke(new t.Stroke(h,1,l)),a&&s.forEach(function(e){delete a[t.CSSStyle.cssStringToObjectProperty(e)]});var m=e.getCtx().isCustomElement()?null:i.containerSvgClassName||i.containerClassName;f.setStyle(a).setClassName(m),n.addChildAt(f,0),n.setSelectionShape(f),n._containerShape=f},c._getNodeCSSStyle=function(e,i,n){var o=new t.CSSStyle;return n.forEach(function(n){var a=null,s=t.CSSStyle.cssStringToObjectProperty(n);e&&null!=e[s]?a=e[s]:i&&(a=i.getStyle(n)),o.setStyle(n,a)}),o},c._renderContainerButton=function(e,i,n){if(n.isContainer()&&"off"!=i.showDisclosure){var o=e.getCtx(),a=t.Agent.isRightToLeft(o),s=e.getOptions(),r=a?c.RTL_BUTTON_PATH:c.LTR_BUTTON_PATH,d=new t.Path(o,r),h=s._resources[n.isDisclosed()?"collapse":"expand"],l=t.ToolkitUtils.getIconStyle(o,h.icon),g=h.width/2+1,u=a?20-g:g,p=new t.IconButton(e.getCtx(),"outlined",{style:l,size:h.width,pos:{x:u,y:g}},d,null,n.handleDisclosure,n);n.addChild(p);var _=n.getContentBounds(!0);if(_){var f=a?_.x+_.w-20-.5:_.x+.5,m=_.y+.5;p.setTranslate(f,m)}n._containerButton=p}},c.prototype.isDragAvailable=function(t){return!0},c.prototype.getDragTransferable=function(t,e){return this._isDraggable()?[this.getId()]:null},c.prototype.getDragFeedback=function(t,e){if(this._diagram.getEventManager().LinkCreationStarted)return null;if(this._diagram.isSelectionSupported()&&this._diagram.getSelectionHandler().getSelectedCount()>1){for(var i=this._diagram.getSelectionHandler().getSelection(),n=[],o=0;o<i.length;o++)n.push(i[o]);return n}return this},c.prototype.ShowDropEffect=function(){this._dropEffect||this._createDropEffect("oj-diagram-node oj-active-drop")},c.prototype.ShowRejectedDropEffect=function(){this._dropEffect||this._createDropEffect("oj-diagram-node oj-invalid-drop")},c.prototype.ClearDropEffect=function(){this._dropEffect&&(this.removeChild(this._dropEffect),this._dropEffect=null)},c.prototype._createDropEffect=function(e){var i;if(this._customNodeContent||this.isDisclosed()||this._background||this._shape&&this._shape instanceof t.ImageMarker){var n=this.getContentBounds(!0);if(n){i=new t.Rect(this._diagram.getCtx(),n.x,n.y,n.w,n.h);var o=this._customNodeContent?null:this.isDisclosed()?this._containerShape.getRx():this._background?this._background.getRx():null;o&&(i.setRx(o),i.setRy(o))}}else this._shape&&this._shape instanceof t.SimpleMarker&&(i=this._shape.copyShape());i.setInvisibleFill(),i.setClassName(e),i.setMouseEnabled(!1),this.addChild(i),this._dropEffect=i},c.prototype._setDraggableStyleClass=function(){if(this._diagram.getEventManager().IsDragSupported()&&this._isDraggable()){var e=this._customNodeContent?this:this.isDisclosed()?this._containerShape:this._background?this._background:this._shape,i=e.getElem()?e.getElem():e;t.ToolkitUtils.addClassName(i,"oj-diagram-node"),t.ToolkitUtils.addClassName(i,"oj-draggable")}},c.prototype._isDraggable=function(){return"off"!==this.getData().draggable&&!1!==this.getData().draggable},c.ConvertNodeData=function(t){return{id:t.id,label:t.label,selectable:t.selectable,shortDesc:t.shortDesc,categories:t.categories,nodes:t.nodes,_itemData:t}},c.prototype._cleanUp=function(e){if(this._containerShape&&(this.removeChild(this._containerShape),e&&e.addChild(this._containerShape),this._containerShape=null),this._background&&(this.removeChild(this._background),e&&e.addChild(this._background),this._background=null),this._shape&&(this.removeChild(this._shape),e&&e.addChild(this._shape),this._shape=null),this._labelObj&&(this.removeChild(this._labelObj),e&&e.addChild(this._labelObj),this._labelObj=null),this._containerButton&&(this.removeChild(this._containerButton),e&&e.addChild(this._containerButton),this._containerButton=null),this._customNodeContent){if(this._childNodePane&&(this._childNodePane.setParent(null),this.addChild(this._childNodePane)),this._customNodeContent.namespaceURI===t.ToolkitUtils.SVG_NS)this.getContainerElem().removeChild(this._customNodeContent),e&&t.ToolkitUtils.appendChildElem(e.getContainerElem(),this._customNodeContent);else if(Array.isArray(this._customNodeContent))for(var i=0;i<this._customNodeContent.length;i++)this.getContainerElem().removeChild(this._customNodeContent[i]),e&&t.ToolkitUtils.appendChildElem(e.getContainerElem(),this._customNodeContent[i]);else this._customNodeContent instanceof t.BaseComponent&&(this.removeChild(this._customNodeContent),e&&e.addChild(this._customNodeContent));this._customNodeContent=null}this._contentDims=null},c.prototype.getAnimationState=function(e){var i,n,o,a,s,r=this.getContentBounds();return this._shape&&((i={centerDimensions:this._shape.getCenterDimensions(),fill:this._shape.getFill()}).getCenterDimensions=function(){return i.centerDimensions},i.getFill=function(){return i.fill}),this._labelObj&&((n={matrix:this._labelObj.getMatrix()}).getMatrix=function(){return n.matrix}),this.isDisclosed()&&this._containerShape&&((o={fill:this._containerShape.getFill(),width:this._containerShape.getWidth(),height:this._containerShape.getHeight()}).getFill=function(){return o.fill},o.getWidth=function(){return o.width},o.getHeight=function(){return o.height}),e&&(s=new t.Container(this.getCtx()),this._cleanUp(s),s.setTranslate(this.getTranslateX(),this.getTranslateY())),(a={partialUpdate:!0,id:this.getId(),disclosed:this.isDisclosed(),tx:this.getTranslateX(),ty:this.getTranslateY(),contentBounds:r,origContent:s,_shape:i,_labelObj:n,_containerShape:o}).getId=function(){return a.id},a.isDisclosed=function(){return a.disclosed},a.getTranslateX=function(){return a.tx},a.getTranslateY=function(){return a.ty},a.getContentBounds=function(){return a.contentBounds},a},c.prototype.appendChildNodesData=function(e,i){this._data.nodes instanceof Array||(this._data.nodes=[]),this._data.nodes=t.ArrayUtils.insert(this._data.nodes,e,i)},c.prototype.removeChildNodesData=function(t){if(this._data.nodes instanceof Array)for(var e=0;e<t.length;e++)for(var i=t[e].id,n=0;n<this._data.nodes.length;n++)if(this._data.nodes[n].id===i){this._data.nodes.splice(n,1);break}},c.prototype._getCustomRenderer=function(t){var e=this._diagram.getOptions().nodeContent,i=null;if(e){var n=e.renderer;i=e[t],i=n&&i?i:null}return i},c.prototype._checkAndMoveContents=function(){return!!this._hasContentBoundToTouchEvent&&(this.GetDiagram().storeTouchEventContent(this._customNodeContent,this),this._contentStoredInTouchEventContainer=this._customNodeContent,this._hasContentBoundToTouchEvent=!1,!0)};var u=function(t){this.Init(t)};t.Obj.createSubclass(u,t.Automation,"DvtDiagramAutomation"),u.prototype.Init=function(t){this._diagram=t},u.prototype.GetSubIdForDomElement=function(t){var e=this._diagram.getEventManager().GetLogicalObject(t);return e&&e instanceof c?"node["+this._diagram.GetAllNodes().indexOf(e.getId())+"]":e&&e instanceof g?"link["+this._diagram.GetAllLinks().indexOf(e.getId())+"]":null},u.prototype.getDomElementForSubId=function(e){if(e==t.Automation.TOOLTIP_SUBID)return this.GetTooltipElement(this._diagram);var i=this._parseSubId(e),n=i.component,o=i.index,a=null;return"node"==n?a=this._getNode(o):"link"==n&&(a=this._getLink(o)),a?a.getElem():null},u.prototype._parseSubId=function(t){var e=t,i=-1,n=t.substring(0,t.indexOf("["));return n&&(e="node"==n||"link"==n?n:null,i=parseInt(t.substring(t.indexOf("[")+1,t.indexOf("]")))),{component:e,index:i}},u.prototype.getNodeCount=function(){return this._diagram.GetAllNodes().length},u.prototype.getLinkCount=function(){return this._diagram.GetAllLinks().length},u.prototype.getNode=function(e){var i=this._getNode(e);if(i){var n={};n.id=i.getId(),n.selected=i.isSelected(),n.tooltip=i.getShortDesc(),n.label=i.getData().label;var o=i.getData().backgroundStyle;return o&&o instanceof Object&&(o=t.CSSStyle.cssObjectToString(o)),n.background=o,n.icon=this._getMarkerData(i.GetIcon()),n.expanded=i.isDisclosed(),n}return null},u.prototype.getLink=function(e){var i=this._getLink(e);if(i){var n={};return n.id=i.getId(),n.selected=i.isSelected(),n.tooltip=i.getShortDesc(),n.label=i.getData().label,n.color=i.getLinkColor(),n.width=i.getLinkWidth(),n.style=this._getLinkStyleFromObject(i.getLinkStyle()),n.startNode=i.getStartId(),n.endNode=i.getEndId(),n.startConnectorType=i.getStartConnectorType(),n.endConnectorType=i.getEndConnectorType(),n.promoted=i.isPromoted(),i.isPromoted()&&(n.links=t.JsonUtils.clone(i.getData()._links)),n}return null},u.prototype.getPromotedLink=function(t,e){var i=this._getNode(t),n=this._getNode(e);if(!i||!n)return null;var o=g.GetPromotedLinkId(this._diagram,i.getId(),n.getId()),a=this._diagram.getLinkById(o);if(a){var s={};return s.id=a.getId(),s.selected=a.isSelected(),s.tooltip=a.getShortDesc(),s.color=a.getLinkColor(),s.width=a.getLinkWidth(),s.style=this._getLinkStyleFromObject(a.getLinkStyle()),s.startNode=a.getStartId(),s.endNode=a.getEndId(),s.startConnectorType=a.getStartConnectorType(),s.endConnectorType=a.getEndConnectorType(),s.count=a.getData()._links.length,s}return null},u.prototype._getLinkStyleFromObject=function(e){if(this._diagram.getCtx().isCustomElement())return t.CSSStyle.cssObjectToString(e);if(e&&e instanceof Object){if(e._type==g.CUSTOM_STYLE){var i=t.JsonUtils.clone(e);return delete i._type,t.CSSStyle.cssObjectToString(i)}return e._type}return e},u.prototype.getExpanded=function(){return this._diagram.DisclosedNodes},u.prototype._getMarkerData=function(e){if(e){var i={};return i.shape=e instanceof t.SimpleMarker?e.getType():"none",e.getFill()&&(i.color=e.getFill().getColor()),i}return null},u.prototype._getNode=function(t){var e=this._diagram.GetAllNodes();return t>=0&&t<e.length?this._diagram.getNodeById(e[t]):null},u.prototype._getLink=function(t){var e=this._diagram.GetAllLinks();return t>=0&&t<e.length?this._diagram.getLinkById(e[t]):null}}(dvt);
  return dvt;
});

/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdiagram-utils',["ojs/ojmap"],function(t){"use strict";var e=function(){};return e.getLayout=function(t){return function(o){var n;if(t.nodes&&o.getNodeCount()>0){var a=e._dataArrayToMap(t.nodes);n=t.nodeDefaults&&t.nodeDefaults.labelLayout?t.nodeDefaults.labelLayout:null;for(var i=0;i<o.getNodeCount();i++){var l=o.getNodeByIndex(i),s=a.get(l.getId());e._positionChildNodes(l.getChildNodes(),s?s.nodes:null,o,n),e._positionNodeAndLabel(l,s,o,n)}}if(t.links&&o.getLinkCount()>0){var r=e._dataArrayToMap(t.links),u=t.linkDefaults&&t.linkDefaults.path?t.linkDefaults.path:null;n=t.linkDefaults&&t.linkDefaults.labelLayout?t.linkDefaults.labelLayout:null;for(var d=0;d<o.getLinkCount();d++){var f=o.getLinkByIndex(d),L=r.get(f.getId());L&&L.path?f.setPoints(L.path):u&&u instanceof Function&&f.setPoints(u(o,f)),L&&L.coordinateSpace&&f.setCoordinateSpace(L.coordinateSpace),L&&L.labelLayout?e._setLabelPosition(f,L.labelLayout):n&&n instanceof Function&&e._setLabelPosition(f,n(o,f))}}if(t.viewport){var g=t.viewport;g instanceof Function?o.setViewport(g(o)):o.setViewport(g)}}},e._dataArrayToMap=function(e){var o=new t;if(e)for(var n=0;n<e.length;n++)o.set(e[n].id,e[n]);return o},e._positionChildNodes=function(t,o,n,a){if(t&&o)for(var i=e._dataArrayToMap(o),l=0;l<t.length;l++){var s=t[l],r=i.get(s.getId());e._positionChildNodes(s.getChildNodes(),r?r.nodes:null,n,a),e._positionNodeAndLabel(s,r,n,a)}},e._positionNodeAndLabel=function(t,o,n,a){t&&o&&(t.setPosition({x:o.x,y:o.y}),o.labelLayout?e._setLabelPosition(t,o.labelLayout):a&&a instanceof Function?e._setLabelPosition(t,a(n,t)):a&&e._setLabelPosition(t,a,t.getPosition()))},e._setLabelPosition=function(t,e,o){var n=o||{x:0,y:0};t.setLabelPosition({x:e.x+n.x,y:e.y+n.y});var a=e.rotationPointX,i=e.rotationPointY;isNaN(a)||isNaN(i)||t.setLabelRotationPoint({x:a+n.x,y:i+n.y}),t.setLabelRotationAngle(e.angle),t.setLabelHalign(e.halign),t.setLabelValign(e.valign)},e});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdatasource-common',["ojs/ojcore","jquery"],function(a,e){"use strict";
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */a.DataSource=function(a){this.data=a,this.Init()},a.Object.createSubclass(a.DataSource,a.EventSource,"oj.DataSource"),a.DataSource.prototype.Init=function(){a.DataSource.superclass.Init.call(this)},a.TreeDataSource=function(e){a.TreeDataSource.superclass.constructor.call(this,e)},a.Object.createSubclass(a.TreeDataSource,a.DataSource,"oj.TreeDataSource"),
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
a.TableDataSource=function(e,t){if(this.constructor===a.TableDataSource){var r=a.TableDataSource._LOGGER_MSG._ERR_TABLE_DATASOURCE_INSTANTIATED_SUMMARY,o=a.TableDataSource._LOGGER_MSG._ERR_TABLE_DATASOURCE_INSTANTIATED_DETAIL;throw new Error(r+"\n"+o)}this.data=e,this.options=t,this.isFetching=!1,this._startIndex=0,this.Init()},a.Object.createSubclass(a.TableDataSource,a.DataSource,"oj.TableDataSource"),a.TableDataSource.prototype.Init=function(){a.TableDataSource.superclass.Init.call(this)},a.TableDataSource.prototype.sortCriteria=null,a.TableDataSource.prototype.totalSizeConfidence=function(){return"actual"},a.TableDataSource.EventType={ADD:"add",REMOVE:"remove",RESET:"reset",REFRESH:"refresh",SORT:"sort",CHANGE:"change",REQUEST:"request",SYNC:"sync",ERROR:"error"},a.TableDataSource._LOGGER_MSG={_ERR_TABLE_DATASOURCE_INSTANTIATED_SUMMARY:"oj.TableDataSource constructor called.",_ERR_TABLE_DATASOURCE_INSTANTIATED_DETAIL:"Please do not instantiate oj.TableDataSource. Please use one of the subclasses instead such as oj.ArrayTableDataSource or oj.CollectionTableDataSource.",_ERR_DATA_INVALID_TYPE_SUMMARY:"Invalid data type.",_ERR_DATA_INVALID_TYPE_DETAIL:"Please specify the appropriate data type."},a.DataGridDataSource=function(e){a.DataGridDataSource.superclass.constructor.call(this,e)},a.Object.createSubclass(a.DataGridDataSource,a.DataSource,"oj.DataGridDataSource"),a.DiagramDataSource=function(e){a.DiagramDataSource.superclass.constructor.call(this,e)},a.Object.createSubclass(a.DiagramDataSource,a.DataSource,"oj.DiagramDataSource"),a.DiagramDataSource.EventType={ADD:"add",REMOVE:"remove",CHANGE:"change"};var t={};return t.DataGridDataSource=a.DataGridDataSource,t});
/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdiagram',["ojs/ojcore","jquery","ojs/ojconfig","ojs/ojcomponentcore","ojs/ojdvt-base","ojs/internal-deps/dvt/DvtDiagram","ojs/ojdiagram-utils","ojs/ojlogger","ojs/ojkeyset","ojs/ojdatasource-common"],function(e,t,n,o,r,a,i,s,l){"use strict";var p={properties:{animationOnDataChange:{type:"string",enumValues:["auto","none"],value:"none"},animationOnDisplay:{type:"string",enumValues:["auto","none"],value:"none"},as:{type:"string",value:""},data:{type:"object"},dnd:{type:"object",properties:{drag:{type:"object",properties:{nodes:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},drag:{type:"function"},dragEnd:{type:"function"},dragStart:{type:"function"}}},ports:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},drag:{type:"function"},dragEnd:{type:"function"},dragStart:{type:"function"},linkStyle:{type:"function"},selector:{type:"string"}}}}},drop:{type:"object",properties:{background:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"}}},links:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"}}},nodes:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"}}},ports:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"},selector:{type:"string"}}}}}}},expanded:{type:"KeySet",writeback:!0},focusRenderer:{type:"function"},hiddenCategories:{type:"Array<string>",writeback:!0,value:[]},highlightMatch:{type:"string",enumValues:["all","any"],value:"all"},highlightedCategories:{type:"Array<string>",writeback:!0,value:[]},hoverBehavior:{type:"string",enumValues:["dim","none"],value:"none"},hoverRenderer:{type:"function"},layout:{type:"function"},linkContent:{type:"object",properties:{focusRenderer:{type:"function"},hoverRenderer:{type:"function"},renderer:{type:"function"},selectionRenderer:{type:"function"}}},linkData:{type:"object"},linkHighlightMode:{type:"string",enumValues:["link","linkAndNodes"],value:"link"},linkProperties:{type:"function"},maxZoom:{type:"number",value:1},minZoom:{type:"number",value:0},nodeContent:{type:"object",properties:{focusRenderer:{type:"function"},hoverRenderer:{type:"function"},renderer:{type:"function"},selectionRenderer:{type:"function"},zoomRenderer:{type:"function"}}},nodeData:{type:"object"},nodeHighlightMode:{type:"string",enumValues:["node","nodeAndIncomingLinks","nodeAndLinks","nodeAndOutgoingLinks"],value:"node"},nodeProperties:{type:"function"},overview:{type:"object",properties:{fitArea:{type:"string",enumValues:["canvas","content"],value:"content"},halign:{type:"string",enumValues:["center","end","start"],value:"end"},height:{type:"number",value:100},preserveAspectRatio:{type:"string",enumValues:["meet","none"],value:"meet"},rendered:{type:"string",enumValues:["off","on"],value:"off"},valign:{type:"string",enumValues:["bottom","middle","top"],value:"bottom"},width:{type:"number",value:200}}},panDirection:{type:"string",enumValues:["auto","x","y"],value:"auto"},panning:{type:"string",enumValues:["auto","centerContent","fixed","none"],value:"none"},promotedLinkBehavior:{type:"string",enumValues:["full","lazy","none"],value:"lazy"},renderer:{type:"function"},selection:{type:"Array<any>",writeback:!0,value:[]},selectionMode:{type:"string",enumValues:["multiple","none","single"],value:"none"},selectionRenderer:{type:"function"},styleDefaults:{type:"object",properties:{animationDuration:{type:"number"},hoverBehaviorDelay:{type:"number",value:200},linkDefaults:{type:"object",properties:{color:{type:"string"},endConnectorType:{type:"string",enumValues:["arrow","arrowConcave","arrowOpen","circle","none","rectangle","rectangleRounded"],value:"none"},labelStyle:{type:"object"},startConnectorType:{type:"string",enumValues:["arrow","arrowConcave","arrowOpen","circle","none","rectangle","rectangleRounded"],value:"none"},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},width:{type:"number",value:1}}},nodeDefaults:{type:"object",properties:{icon:{type:"object",properties:{borderColor:{type:"string"},borderRadius:{type:"string"},borderWidth:{type:"number"},color:{type:"string"},height:{type:"number",value:10},pattern:{type:"string",enumValues:["largeChecker","largeCrosshatch","largeDiagonalLeft","largeDiagonalRight","largeDiamond","largeTriangle","none","smallChecker","smallCrosshatch","smallDiagonalLeft","smallDiagonalRight","smallDiamond","smallTriangle"],value:"none"},shape:{type:"string",value:"circle"},source:{type:"string"},sourceHover:{type:"string"},sourceHoverSelected:{type:"string"},sourceSelected:{type:"string"},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},width:{type:"number",value:10}}},labelStyle:{type:"object",value:{}},showDisclosure:{type:"string",enumValues:["off","on"],value:"on"}}},promotedLink:{type:"object",properties:{color:{type:"string"},endConnectorType:{type:"string",enumValues:["arrow","arrowConcave","arrowOpen","circle","none","rectangle","rectangleRounded"],value:"none"},startConnectorType:{type:"string",enumValues:["arrow","arrowConcave","arrowOpen","circle","none","rectangle","rectangleRounded"],value:"none"},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},width:{type:"number",value:1}}}}},tooltip:{type:"object",properties:{renderer:{type:"function"}}},touchResponse:{type:"string",enumValues:["auto","touchStart"],value:"auto"},trackResize:{type:"string",enumValues:["off","on"],value:"on"},translations:{type:"object",value:{},properties:{componentName:{type:"string"},labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelInvalidData:{type:"string"},labelNoData:{type:"string"},promotedLink:{type:"string"},promotedLinkAriaDesc:{type:"string"},promotedLinks:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"}}},zoomRenderer:{type:"function"},zooming:{type:"string",enumValues:["auto","none"],value:"none"}},methods:{getNodeCount:{},getNode:{},getLinkCount:{},getLink:{},getPromotedLink:{},getContextByNode:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojBeforeExpand:{},ojExpand:{},ojBeforeCollapse:{},ojCollapse:{}},extension:{}},u={properties:{categories:{type:"Array<string>"},color:{type:"string"},endConnectorType:{type:"string",enumValues:["arrow","arrowConcave","arrowOpen","circle","none","rectangle","rectangleRounded"]},endNode:{type:"any"},label:{type:"string",value:""},labelStyle:{type:"object"},selectable:{type:"string",enumValues:["auto","off"],value:"auto"},shortDesc:{type:"string",value:""},startConnectorType:{type:"string",enumValues:["arrow","arrowConcave","arrowOpen","circle","none","rectangle","rectangleRounded"]},startNode:{type:"any"},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},width:{type:"number"}},extension:{}},d={properties:{categories:{type:"Array<string>"},descendantsConnectivity:{type:"string",enumValues:["connected","disjoint","unknown"],value:"unknown"},icon:{type:"object",value:{},properties:{borderColor:{type:"string"},borderRadius:{type:"string"},borderWidth:{type:"number"},color:{type:"string"},height:{type:"number"},opacity:{type:"number"},pattern:{type:"string"},shape:{type:"string"},source:{type:"string"},sourceHover:{type:"string"},sourceHoverSelected:{type:"string"},sourceSelected:{type:"string"},svgClassName:{type:"string"},svgStyle:{type:"object"},width:{type:"number"}}},label:{type:"string",value:""},labelStyle:{type:"object"},overview:{type:"object",value:{},properties:{icon:{type:"object",properties:{shape:{type:"string"},svgClassName:{type:"string"},svgStyle:{type:"object"}}}}},selectable:{type:"string",enumValues:["auto","off"],value:"auto"},shortDesc:{type:"string",value:""},showDisclosure:{type:"string",enumValues:["off","on"]}},extension:{}};e.ConversionDiagramDataSource=function(t,n){this.childDataCallback=n?n.childData:null,e.ConversionDiagramDataSource.superclass.constructor.call(this,t)},e.Object.createSubclass(e.ConversionDiagramDataSource,e.DiagramDataSource,"oj.ConversionDiagramDataSource"),e.ConversionDiagramDataSource.prototype.getData=function(e){if(e){var t=e.nodes;if(void 0===t&&this.childDataCallback){var n=this.childDataCallback(e);return Promise.resolve(n).then(function(e){return Promise.resolve({nodes:e})},function(){return Promise.resolve({nodes:[]})})}return Promise.resolve({nodes:t})}var o=this.data.nodes,r=this.data.links;return o instanceof Function&&(o=o()),r instanceof Function&&(r=r()),Promise.all([o,r]).then(function(e){return Promise.resolve({nodes:e[0],links:e[1]})},function(){return Promise.resolve({nodes:[],links:[]})})},e.ConversionDiagramDataSource.prototype.getChildCount=function(e){if(e){var t=e.nodes;return Array.isArray(t)?t.length:void 0===t&&this.childDataCallback?-1:0}return-1},e.ConversionDiagramDataSource.prototype.getDescendantsConnectivity=function(e){return"unknown"},e.DiagramUtils=i,e.__registerWidget("oj.ojDiagram",t.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{animationOnDataChange:"none",animationOnDisplay:"none",dnd:{drag:null,drop:null},expanded:new e.KeySetImpl,selection:[],selectionMode:"none",panning:"none",panDirection:"auto",tooltip:{renderer:null},zooming:"none",minZoom:0,maxZoom:1,hiddenCategories:[],hoverBehavior:"none",highlightedCategories:[],highlightMatch:"all",nodeHighlightMode:"node",linkHighlightMode:"link",linkContent:{renderer:null,hoverRenderer:null,selectionRenderer:null,focusRenderer:null},nodeContent:{renderer:null,hoverRenderer:null,selectionRenderer:null,focusRenderer:null,zoomRenderer:null},renderer:null,hoverRenderer:null,selectionRenderer:null,focusRenderer:null,zoomRenderer:null,data:null,linkData:null,nodeData:null,as:"",linkProperties:null,nodeProperties:null,promotedLinkBehavior:"lazy",overview:{rendered:"off",fitArea:"content",preserveAspectRatio:"meet",width:200,height:100,halign:"end",valign:"bottom"},styleDefaults:{hoverBehaviorDelay:200,nodeDefaults:{labelStyle:{},showDisclosure:"on",icon:{pattern:"none",shape:"circle",width:10,height:10,svgClassName:""}},linkDefaults:{svgClassName:"",width:1,labelStyle:{},startConnectorType:"none",endConnectorType:"none"},promotedLink:{color:"#778999",svgClassName:"",width:1,startConnectorType:"none",endConnectorType:"none"}},touchResponse:"auto",beforeExpand:null,expand:null,beforeCollapse:null,collapse:null},_InitOptions:function(e,t){this._super(e,t);var n=this.options.styleDefaults;this.options.styleDefaults=n},_ProcessOptions:function(){this._super(),this.options._logger=s,this.options.renderer&&!this.options.nodeContent.renderer&&(this.options.nodeContent={renderer:this.options.renderer,hoverRenderer:this.options.hoverRenderer,selectionRenderer:this.options.selectionRenderer,focusRenderer:this.options.focusRenderer,zoomRenderer:this.options.zoomRenderer}),this.options._templateFunction&&(this.options.nodeContent.renderer=this._GetTemplateDataRenderer(this.options._templateFunction,"node")),(this.options.renderer||this._TemplateHandler.getTemplates().nodeContentTemplate||this.options.linkContent||this._TemplateHandler.getTemplates().linkContentTemplate)&&(this.options._contextHandler=this._getContextHandler()),this.options.nodeData&&(this.options._fetchDataHandler=this._getFetchDataHandler("nodeData")),this.options.nodes&&(this.options.nodeProperties=this.options.nodeProperties?this.options.nodeProperties:function(e){return e},this.options.linkProperties=this.options.linkProperties?this.options.linkProperties:function(e){return e},this.options.data=new e.ConversionDiagramDataSource({nodes:this.options.nodes,links:this.options.links},{childData:this.options.childNodes})),this.options.expanded||(this.options.expanded=new e.KeySetImpl),this.options.dnd.drag||(this.options.dnd.drag={nodes:{},ports:{}}),this.options.dnd.drop||(this.options.dnd.drop={background:{},nodes:{},links:{},ports:{}})},_IsDraggable:function(){var e=this.options.dnd?this.options.dnd.drag:null;return e.nodes&&Object.keys(e.nodes).length>0||e.ports&&Object.keys(e.ports).length>0},_GetComponentRendererOptions:function(){return[{path:"tooltip/renderer",slot:"tooltipTemplate"},{path:"nodeContent/renderer",slot:"nodeContentTemplate"},{path:"nodeContent/focusRenderer",slot:"nodeContentTemplate"},{path:"nodeContent/hoverRenderer",slot:"nodeContentTemplate"},{path:"nodeContent/selectionRenderer",slot:"nodeContentTemplate"},{path:"nodeContent/zoomRenderer",slot:"nodeContentTemplate"},{path:"linkContent/renderer",slot:"linkContentTemplate"},{path:"linkContent/focusRenderer",slot:"linkContentTemplate"},{path:"linkContent/hoverRenderer",slot:"linkContentTemplate"},{path:"linkContent/selectionRenderer",slot:"linkContentTemplate"}]},_SetupResources:function(){this._super(),this._component&&this._component.addDataSourceEventListeners()},_ReleaseResources:function(){this._super(),this._component&&this._component.removeDataSourceEventListeners()},_getContextHandler:function(){var e=this;return function(t,n,r,a,i,s,l,p){var u={component:o.__GetWidgetConstructor(e.element),parentElement:n,rootElement:r,content:a,data:i.data,itemData:i.itemData,state:s,previousState:l,id:i.id,type:t,label:i.label,points:p};return"node"===t&&e._IsCustomElement()&&(u.renderDefaultHover=e.renderDefaultHover.bind(e,u),u.renderDefaultSelection=e.renderDefaultSelection.bind(e,u),u.renderDefaultFocus=e.renderDefaultFocus.bind(e,u)),e._FixRendererContext(u)}},renderDefaultHover:function(e){e.previousState&&e.state.hovered===e.previousState.hovered||this._GetDvtComponent(this.element).processDefaultHoverEffect(e.id,e.state.hovered)},renderDefaultSelection:function(e){e.previousState&&e.state.selected===e.previousState.selected||this._GetDvtComponent(this.element).processDefaultSelectionEffect(e.id,e.state.selected)},renderDefaultFocus:function(e){e.previousState&&e.state.focused===e.previousState.focused||this._GetDvtComponent(this.element).processDefaultFocusEffect(e.id,e.state.focused)},_CreateDvtComponent:function(e,t,n){return a.Diagram.newInstance(e,t,n)},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-diagram-link"===t?t="link["+e.index+"]":"oj-diagram-node"===t?t="node["+e.index+"]":"oj-diagram-tooltip"===t&&(t="tooltip"),t},_ConvertSubIdToLocator:function(e){var t={};return 0===e.indexOf("link")?(t.subId="oj-diagram-link",t.index=this._GetFirstIndex(e)):0===e.indexOf("node")?(t.subId="oj-diagram-node",t.index=this._GetFirstIndex(e)):"tooltip"===e&&(t.subId="oj-diagram-tooltip"),t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-diagram"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-dvtbase oj-diagram"]={path:"styleDefaults/animationDuration",property:"ANIM_DUR"},e["oj-diagram-node-label"]={path:"styleDefaults/nodeDefaults/labelStyle",property:"TEXT"},e["oj-diagram-node oj-selected"]={path:"styleDefaults/nodeDefaults/selectionColor",property:"border-color"},e["oj-diagram-node oj-hover"]=[{path:"styleDefaults/nodeDefaults/hoverOuterColor",property:"border-top-color"},{path:"styleDefaults/nodeDefaults/hoverInnerColor",property:"border-bottom-color"}],e["oj-diagram-link"]=[{path:"styleDefaults/linkDefaults/color",property:"color"},{path:"styleDefaults/linkDefaults/_hitDetectionOffset",property:"padding"},{path:"styleDefaults/promotedLink/_hitDetectionOffset",property:"padding"}],e["oj-diagram-link-label"]={path:"styleDefaults/linkDefaults/labelStyle",property:"TEXT"},e["oj-diagram-link oj-selected"]={path:"styleDefaults/linkDefaults/selectionColor",property:"border-color"},e["oj-diagram-link oj-hover"]=[{path:"styleDefaults/linkDefaults/hoverOuterColor",property:"border-top-color"},{path:"styleDefaults/linkDefaults/hoverInnerColor",property:"border-bottom-color"}],e["oj-diagram-overview"]=[{path:"styleDefaults/_overviewStyles/overview/backgroundColor",property:"background-color"},{path:"styleDefaults/_overviewStyles/overview/padding",property:"padding"}],e["oj-diagram-overview-content"]=[{path:"styleDefaults/_overviewStyles/overviewContent/padding",property:"padding"}],e["oj-diagram-overview-viewport"]=[{path:"styleDefaults/_overviewStyles/viewport/borderColor",property:"border-color"},{path:"styleDefaults/_overviewStyles/viewport/backgroundColor",property:"background-color"}],e},_GetEventTypes:function(){return["optionChange","beforeExpand","beforeCollapse","expand","collapse"]},_HandleEvent:function(e){var t=e.type;"beforeExpand"===t?this.expand(e.id,!0):"beforeCollapse"===t?this.collapse(e.id,!0):"expand"===t||"collapse"===t?this._trigger(t,null,{nodeId:e.id}):"notready"===t?this._NotReady():this._super(e)},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources;e.panUp="oj-chart-pan-icon",e.panUpHover="oj-chart-pan-icon oj-hover",e.panDown="oj-chart-pan-icon oj-active",e.collapse={icon:"oj-fwk-icon oj-fwk-icon-minus",width:10,height:10},e.expand={icon:"oj-fwk-icon oj-fwk-icon-plus",width:10,height:10}},_GetComponentNoClonePaths:function(){var e=this._super();return e.data=!0,e.nodes=!0,e.links=!0,e},_GetComponentDeferredDataPaths:function(){return{root:["nodeData","linkData"]}},_GetSimpleDataProviderConfigs:function(){var e={nodeData:{templateName:"nodeTemplate",templateElementName:"oj-diagram-node",resultPath:"nodes"},linkData:{templateName:"linkTemplate",templateElementName:"oj-diagram-link",resultPath:"links"}};return Object.defineProperty(e.nodeData,"expandedKeySet",{get:function(){return this.options.expanded}.bind(this)}),e},_WrapInlineTemplateRenderer:function(e,t,n){var o=this._TemplateHandler.getDataSet(t),r=function(e,t){for(var n=0;n<t.length;n++)if(e<t[n])return n;return t.length},a=function(t){return function(n){return n[t](),e(n)}};if("focusRenderer"===n&&this._TemplateHandler.getDataSetBoolean(t,"oj-default-focus"))return a("renderDefaultFocus");if("hoverRenderer"===n&&this._TemplateHandler.getDataSetBoolean(t,"oj-default-hover"))return a("renderDefaultHover");if("selectionRenderer"===n&&this._TemplateHandler.getDataSetBoolean(t,"oj-default-selection"))return a("renderDefaultSelection");if("zoomRenderer"===n){if(o.ojZoomThresholds)try{var i=JSON.parse(o.ojZoomThresholds);return function(t){if(function(e,t,n){return r(e,n)!==r(t,n)}(t.state.zoom,t.previousState.zoom,i))return e(t)}}catch(e){s.error(e)}return null}return e},_OptionChangeHandler:function(e){var t=Object.prototype.hasOwnProperty.bind(e);(t("expanded")||t("data"))&&this._component.clearDisclosedState(),t("expanded")&&this._ClearDataProviderState("nodeData"),this._super(e)},collapse:function(e,t){var n=this._trigger("beforeCollapse",null,{nodeId:e});t&&!1===n||(this._NotReady(),this._component.collapse(e))},expand:function(e,t){var n=this._trigger("beforeExpand",null,{nodeId:e});t&&!1===n||(this._NotReady(),this._component.expand(e))},getNodeCount:function(){return this._component.getAutomation().getNodeCount()},getNode:function(e){return this._component.getAutomation().getNode(e)},getLinkCount:function(){return this._component.getAutomation().getLinkCount()},getLink:function(e){return this._component.getAutomation().getLink(e)},getPromotedLink:function(e,t){return this._component.getAutomation().getPromotedLink(e,t)},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-diagram-tooltip"!==t.subId?t:null}}),o.setDefaultOptions({ojDiagram:{styleDefaults:o.createDynamicPropertyGetter(function(e){return e.isCustomElement?{linkDefaults:{svgStyle:{}},nodeDefaults:{icon:{svgStyle:{}}},promotedLink:{svgStyle:{}}}:{}})}}),p.extension._WIDGET_NAME="ojDiagram",e.CustomElementBridge.register("oj-diagram",{metadata:p,parseFunction:r.shapeParseFunction({"style-defaults.node-defaults.icon.shape":!0})}),function(){d.extension._CONSTRUCTOR=function(){};var t=r.shapeParseFunction({"icon.shape":!0}),n=r.shapeParseFunction({"overview.icon.shape":!0},{circle:!0,diamond:!0,ellipse:!0,human:!0,plus:!0,rectangle:!0,square:!0,star:!0,triangleDown:!0,triangleUp:!0,inherit:!0});e.CustomElementBridge.register("oj-diagram-node",{metadata:d,parseFunction:function(e,o,r,a){return"icon.shape"===o?t(e,o,r,a):"overview.icon.shape"===o?n(e,o,r,a):a(e)}})}(),u.extension._CONSTRUCTOR=function(){},e.CustomElementBridge.register("oj-diagram-link",{metadata:u})});
var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var o={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(o[t]=e[t]);return o.default=e,o};define('viewModels/x-points-to-exploration',["require","exports","ojs/ojarraydataprovider","knockout","ojs/ojattributegrouphandler","../app/pointstograph-layout","../app/util","../app/format","../app/debug","ojs/ojdiagram"],(function(require,e,o,t,a,s,n,i,r){"use strict";t=__importStar(t),a=__importStar(a);var l=new r.DebugContext,c=function(e){var n,r,l,c,d=this,p=null===(n=e.tile.contextualData)||void 0===n?void 0:n.entryPointName,f=p?null===(r=e.tile.section.pointsTo)||void 0===r?void 0:r.methodNameIndex[p]:void 0;if(f){var h={nodes:t.observableArray(),links:t.observableArray()},N=new u(h,null!==(c=null===(l=e.tile.section.pointsTo)||void 0===l?void 0:l.pointsToGraph)&&void 0!==c?c:{});N.createExploredNode(f,new i.EntryPointReason),this.id="points-to-exploration-"+e.tile.id,this.layoutFunc=function(e){s.PointsToGraphLayout.layout(e,N.explorationDegrees)},this.colorHandler=new a.ColorAttributeGroupHandler,this.nodeDataProvider=new o(h.nodes,{keyAttributes:"id"}),this.linkDataProvider=new o(h.links,{keyAttributes:"id"}),this.selectedNode=t.observable([]),this.selectedNode.subscribe((function(e){e&&e.length>0&&(N.exploreNode(e[0]),setTimeout((function(){return d.selectedNode([])}),1e3))}))}},d=function(){function e(){}return e.explorationId=function(e,o){return e+"@"+o.stringify()},e}(),p=function(){function e(e){this._shortened=e}return e.prototype.className=function(e){return this._shortened?n.util.simplifyQualifiedName(e,0):e},e.prototype._fieldOrMethodName=function(e){return this._shortened?n.util.simplifyQualifiedName(e,1):e},e.prototype.fieldName=function(e){return this._fieldOrMethodName(e)},e.prototype.methodName=function(e){return this._fieldOrMethodName(e)},e.extractClassName=function(e){var o=e.indexOf("("),t=e.substring(0,o);return o=t.lastIndexOf("."),t.substring(0,o)},e}(),u=function(){function e(e,o){this._graph=e,this.pointsToGraph=o,this.explorationNodes={},this.explorationEdges={},this.explorationDegrees={}}return e.prototype.createExploredNode=function(e,o){var t=this._createNode(e,o,!0);return this._createUnexploredNeighbours(t,o),t},e.prototype.exploreNode=function(e){var o=this.explorationNodes[e];if(o)if(o.isExplored()){var t=o.pointstoNode.info.codeLocation;t&&n.util.openOrDownloadFile([t],"sourceline.gds","graalvm/dashboard/pointto-sourceline")}else o.isExplored(!0),this._createUnexploredNeighbours(o,o.reason)},e.prototype._createNode=function(e,o,t,a){var s=d.explorationId(e,o);null==a&&null==(a=this.explorationDegrees[s])&&(a=0),void 0!==this.explorationDegrees[s]&&null!=this.explorationDegrees[s]||(this.explorationDegrees[s]=a);var n=this.explorationNodes[s];if(n)return n;var i=this.pointsToGraph[e],r=new f(s,i,this.pointsToGraph,o,t);return this.explorationNodes[s]=r,this._graph.nodes.push(r.forUI()),r},e.prototype._createEdge=function(e,o,t){var a=new h(e,o,t),s=this.explorationEdges[a.id];return s||(this.explorationEdges[a.id]=a,this._graph.links.push(a.forUI()),a)},e.prototype._createUnexploredNeighbours=function(e,o){var t=this,a=this.explorationDegrees[e.id]+1;switch(0!==a&&1!==a&&console.log(),e.pointstoNode.flowType){case"method":switch(o.constructor.name){case i.EntryPointReason.prototype.constructor.name:e.pointstoNode.info.inputs.forEach((function(o){var s=t.pointsToGraph[o];if(null!=s){var n=s.flowType,r=new i.TypeReason(p.extractClassName(e.pointstoNode.info.qualifiedName));if("callsite"===n){var l=t._createNode(s.id,r,!1,a);t._createEdge(e,l,r)}else console.debug("Unexpected input flow type, method: "+n)}else console.debug("Node with ID "+o+"not found,  was input to "+e.pointstoNode.id)}))}break;case"callsite":e.pointstoNode.info.inputs.forEach((function(s){var n=t.pointsToGraph[s];if(null!=n)switch(n.flowType){case"instanceFieldLoad":case"staticFieldLoad":var r=t._createNode(n.id,o,!1,a);t._createEdge(e,r,o);break;case"method":var l=new i.EntryPointReason;r=t._createNode(n.id,l,!1,a);t._createEdge(e,r,l);break;case"nullCheck":r=t._createNode(n.id,o,!1,a);t._createEdge(e,r,o);break;case"dynamicAlloc":case"alloc":r=t._createNode(n.id,o,!1,a);t._createEdge(e,r,o);break;default:console.debug("Unexpected input flow type: "+n.flowType)}else console.debug("Node with ID "+s+"not found,  was input to "+e.pointstoNode.id)}));break;case"dynamicAlloc":case"alloc":e.pointstoNode.info.inputs.forEach((function(s){var n=t.pointsToGraph[s],r="method"===n.flowType?new i.EntryPointReason:o,l=t._createNode(n.id,r,!1,a);t._createEdge(e,l,r)}));break;case"field":e.pointstoNode.info.inputs.forEach((function(s){var n,i=t.pointsToGraph[s];if(null!=i)switch(i.flowType){case"instanceFieldStore":case"staticFieldStore":if(null===(n=i.info.types)||void 0===n?void 0:n.includes(o.className)){var r=t._createNode(i.id,o,!1,a);t._createEdge(e,r,o)}break;default:console.debug("Unexpected input flow type: "+i.flowType)}else console.debug("Node with ID "+s+"not found,  was input to "+e.pointstoNode.id)}));break;case"instanceFieldStore":case"staticFieldStore":case"instanceFieldLoad":case"staticFieldLoad":e.pointstoNode.info.inputs.forEach((function(s){var n=t.pointsToGraph[s],r=o;"formalReceiver"===n.flowType&&(r=new i.TypeReason(n.info.qualifiedName));var l=t._createNode(n.id,r,!1,a);t._createEdge(e,l,r)}));break;case"formalParam":case"actualParam":case"actualReturn":case"formalReturn":case"atomicRead":case"atomicWrite":case"nullCheck":case"arrayCopy":case"box":case"clone":case"compareAndSwap":case"filter":case"formalReceiver":case"instanceOf":case"loadIndexed":case"monitorEnter":case"proxy":case"source":case"storeIndexed":case"unsafeLoad":case"unsafeStore":this._exploreAllNeighborsCanonical(e,o,a);break;case"merge":this._exploreRelevantNeighborsCanonical(e,o,a);break;default:console.debug("Unknown flow type "+e.pointstoNode.flowType)}},e.prototype._exploreAllNeighborsCanonical=function(e,o,t){var a=this;e.pointstoNode.info.inputs.forEach((function(s){var n=a.pointsToGraph[s],i=a._createNode(n.id,o,!1,t);a._createEdge(e,i,o)}))},e.prototype._exploreRelevantNeighborsCanonical=function(e,o,t){var a=this;e.pointstoNode.info.inputs.forEach((function(s){var n,i=a.pointsToGraph[s];if(void 0===i.info.types&&console.debug("Ignoring "+i.flowType+" node - does not have a type state."),null===(n=i.info.types)||void 0===n?void 0:n.includes(o.className)){var r=a._createNode(i.id,o,!1,t);a._createEdge(e,r,o)}}))},e}(),f=function(){function e(e,o,a,s,n){this.id=e,this.pointstoNode=o,this.pointsToGraph=a,this.reason=s,this.isExplored=t.observable(n),this.shortLabel=m.createNodeLabel(this,!0),this.longLabel=m.createNodeLabel(this,!1),(l.showCodeLocationForAllTypes()||l.showCodeLocationForTypes().includes(o.flowType))&&null!=o.info.codeLocation&&(this.longLabel+="\n("+o.info.codeLocation+")"),l.showPointstoNodeIds()&&l.showExplorationNodeIds()?this.label+=" (ptId="+o.id+", expId="+e+")":l.showPointstoNodeIds()?this.label+=" (ptId="+o.id+")":l.showExplorationNodeIds()&&(this.label+=" (expId="+e+")")}return e.prototype.forUI=function(){var e=this;return{id:this.id,label:this.shortLabel,longLabel:this.longLabel,category:t.computed((function(){return e.isExplored()?"0":"1"}))}},e}(),h=function(){function e(e,o,t){this.id=e.id+"-"+o.id,this.source=e.id,this.target=o.id,this.reason=t,this.longLabel=m.createEdgeLabel(e,o,t,!1),this.shortLabel=m.createEdgeLabel(e,o,t,!0),l.showEdgeLabels()||(this.shortLabel=""),l.showEdgeLabels()&&l.edgeLabelsReasonOnly()&&(this.shortLabel=this.reason.stringify()),this.type=m.findEdgeType(e,o)}return e.prototype.forUI=function(){return{id:this.id,start:this.source,end:this.target,longLabel:"string"==typeof this.longLabel?this.longLabel:this.longLabel.stringify(),category:"0"}},e}(),N={CALLER:0,RECEIVER:1,TYPE:2,FIELD:3};Object.freeze(N);var m=function(){function e(){}return e.createNodeLabel=function(e,o){var t=new p(o),a=e.pointstoNode;switch(a.flowType){case"method":return"Method "+t.methodName(a.info.qualifiedName);case"callsite":var s=n.util.findRelevantCallee(a,e.reason);return console.assert(null!=s,"Callsite should have callee matching reason type."),e.relevantCalleeName=s,"Call to "+t.methodName(s)+" occurred";case"instanceFieldLoad":case"staticFieldLoad":return"Type "+t.className(e.reason.className)+" was loaded from field "+t.fieldName(a.info.qualifiedName);case"field":return"Field "+t.fieldName(a.info.qualifiedName)+" can have type "+t.className(e.reason.className);case"instanceFieldStore":case"staticFieldStore":return"Type "+t.className(e.reason.className)+" can be stored to field "+t.fieldName(a.info.qualifiedName);case"formalParam":var i=e.pointsToGraph[a.info.enclosingMethod];return"Method "+t.methodName(i.info.qualifiedName)+" can receive "+t.className(e.reason.className)+" as parameter";case"actualParam":return"Type "+t.className(e.reason.className)+" can be passed to a method";case"formalReturn":i=e.pointsToGraph[a.info.enclosingMethod].info.qualifiedName;return"Method "+t.methodName(i)+" can return "+t.className(e.reason.className);case"actualReturn":return"A method call can return "+t.className(e.reason.className);case"dynamicAlloc":case"alloc":return"Type "+t.className(e.reason.className)+" gets allocated";case"nullCheck":return"null check";case"formalReceiver":return"The receiver is "+t.className(a.info.qualifiedName);case"merge":return"merge";default:return console.debug("Unexpected flow type: "+a.flowType),a.flowType}},e.findEdgeType=function(e,o){switch(e.pointstoNode.flowType){case"method":return N.CALLER;case"callsite":switch(o.pointstoNode.flowType){case"method":return N.CALLER;default:return N.RECEIVER}case"instanceFieldLoad":case"staticFieldLoad":switch(o.pointstoNode.flowType){case"field":return N.FIELD;default:return N.RECEIVER}case"instanceFieldStore":case"staticFieldStore":switch(o.pointstoNode.flowType){case"formalReceiver":return N.RECEIVER;default:return N.TYPE}default:return N.TYPE}},e.createEdgeLabel=function(e,o,t,a){var s=new p(a);switch(t.constructor.name){case i.EntryPointReason.prototype.constructor.name:switch(e.pointstoNode.flowType){case"callsite":switch(o.pointstoNode.flowType){case"method":return"Where does callsite of "+s.className(e.relevantCalleeName)+" happen?";default:return console.debug("Unexpected target flow type: "+o.pointstoNode.flowType),t}case"dynamicAlloc":case"alloc":switch(o.pointstoNode.flowType){case"method":case"callsite":return"Where does alloc happen?";case"formalReturn":case"formalReceiver":return"Where does allocated value go?";default:return console.debug("Unexpected target flow type: "+o.pointstoNode.flowType),t}case"instanceFieldLoad":case"staticFieldLoad":case"nullCheck":return o.pointstoNode.flowType,console.debug("Unexpected target flow type: "+o.pointstoNode.flowType),t;case"formalReceiver":return"Where does receiver come from?";case"formalReturn":return"Where does return value come from?";default:return console.debug("Unexpected source flow type: "+e.pointstoNode.flowType),t}case i.TypeReason.prototype.constructor.name:switch(e.pointstoNode.flowType){case"method":switch(o.pointstoNode.flowType){case"callsite":return"Why is method "+s.className(e.pointstoNode.info.qualifiedName)+" included?";default:return console.debug("Unexpected target flow type: "+o.pointstoNode.flowType),t}case"callsite":var r=e.pointstoNode.info.calleeNames[0];return"Why is receiver of "+n.util.extractMethodName(r)+" "+s.className(t.className)+"?";case"instanceFieldLoad":case"staticFieldLoad":switch(o.pointstoNode.flowType){case"field":return"Why can "+s.className(t.className)+" be loaded from "+s.fieldName(o.pointstoNode.info.qualifiedName)+"?";case"formalReceiver":return"Who is the receiver of this load?";default:return console.debug("Unexpected target flow type: "+o.pointstoNode.flowType),t}case"field":switch(o.pointstoNode.flowType){case"instanceFieldStore":case"staticFieldStore":return"Why can "+s.fieldName(e.pointstoNode.info.qualifiedName)+" have type "+s.className(t.className)+"?";default:return console.debug("Unexpected target flow type: "+o.pointstoNode.flowType),t}case"instanceFieldStore":case"staticFieldStore":switch(o.pointstoNode.flowType){case"formalReceiver":return"Who is the receiver of this store?";default:return"Why can this store have type "+s.className(t.className)+"?"}case"formalReturn":o.pointstoNode.flowType;var l=e.pointstoNode.info.enclosingMethod,c=e.pointsToGraph[l].info.qualifiedName;return"Why can "+s.methodName(c)+" return "+s.className(t.className)+"?";case"actualReturn":switch(o.pointstoNode.flowType){case"formalReturn":return"Why can type "+s.className(t.className)+" be returned?";default:return console.debug("Unexpected target flow type: "+o.pointstoNode.flowType),t}case"formalParam":case"actualParam":return o.pointstoNode.flowType,"Where can param be "+s.className(t.className)+"?";case"merge":return o.pointstoNode.flowType,"Which branches can be "+s.className(t.className)+"?";case"nullCheck":return o.pointstoNode.flowType,"Where does checked value come from?";case"formalReceiver":return"Why is the receiver "+s.className(e.pointstoNode.info.qualifiedName)+"?";default:return console.debug("Unexpected source flow type: "+e.pointstoNode.flowType),t}default:return console.debug("Unexpected reason: "+t.constructor.name),t}},e}();return c}));
/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 */
define('ojs/internal-deps/dvt/DvtTreeView',['./DvtToolkit'], function(dvt) {
  "use strict";
  // Internal use only.  All APIs and functionality are subject to change at any time.

!function(t){t.Breadcrumbs=function(t,e,i,s){this.Init(t,e,i,s)},t.Obj.createSubclass(t.Breadcrumbs,t.Container),t.Breadcrumbs.prototype.Init=function(e,s,n,o){t.Breadcrumbs.superclass.Init.call(this,e),this.setOptions(o),this._eventHandler=new i(this,e,s,n),this._eventHandler.addListeners(this),this.setId("breadcrumbs1000"+Math.floor(1e9*Math.random())),this._curCrumbIdx=-1,this._keyboardFocusRect=null,this._crumbs=null},t.Breadcrumbs.prototype.setOptions=function(t){this._options=e.calcOptions(t)},t.Breadcrumbs.prototype.render=function(e,i){this._data=e?t.JsonUtils.clone(e):this._data,this.removeChildren(),this.SetCrumbs(null),n.render(this,this,i)},t.Breadcrumbs.prototype.__getData=function(){return this._data?this._data:{}},t.Breadcrumbs.prototype.__getOptions=function(){return this._options},t.Breadcrumbs.prototype.getEventManager=function(){return this._eventHandler},t.Breadcrumbs.prototype.hideKeyboardFocusEffect=function(){var t=this._curCrumbIdx;this._curCrumbIdx=-1,this._updateKeyboardFocusEffect(t,this._curCrumbIdx)},t.Breadcrumbs.prototype.getCurrentCrumbIndex=function(){return this._curCrumbIdx},t.Breadcrumbs.prototype.getNumCrumbs=function(){return this._data.items.length},t.Breadcrumbs.prototype.updateCrumbFocus=function(t){var e=this._curCrumbIdx;return this._curCrumbIdx=this._getUpdatedCrumbIndex(e,!t),this._updateKeyboardFocusEffect(e,this._curCrumbIdx),this._curCrumbIdx},t.Breadcrumbs.prototype._getUpdatedCrumbIndex=function(t,e){return-1==t?e?0:this._data.items.length-2:e?t==this._data.items.length-2?-1:++t:0==t?-1:--t},t.Breadcrumbs.prototype._updateKeyboardFocusEffect=function(e,i){var s=this._keyboardFocusRect,n=null,o=this.getCrumb(i);if(o){var a=this._eventHandler.GetLogicalObject(o);if(a&&a.isDrillable&&a.isDrillable()){var r=this.getCtx(),l=o.getDimensions(),h=o.getMatrix();n=new t.KeyboardFocusEffect(r,this,l,h),this._keyboardFocusRect=n}else this._keyboardFocusRect=null}s&&s.hide(),n&&n.show()},t.Breadcrumbs.prototype.getCrumb=function(t){var e=this.GetCrumbs();return t<0||!e||t>=e.length?null:e[t]},t.Breadcrumbs.prototype.getCrumbIndex=function(t){for(var e=this.GetCrumbs(),i=0;i<e.length;i++)if(e[i]==t)return i},t.Breadcrumbs.prototype.SetCrumbs=function(t){this._crumbs=t},t.Breadcrumbs.prototype.GetCrumbs=function(){return this._crumbs};var e=new Object;t.Obj.createSubclass(e,t.Obj),e.VERSION_1={labelStyle:t.BaseComponentDefaults.FONT_FAMILY_ALTA_11+"color: #003286;",disabledLabelStyle:t.BaseComponentDefaults.FONT_FAMILY_ALTA_11,__labelGap:4,__labelSeparator:">"},e.calcOptions=function(i){var s=e._getDefaults(i);return i?t.JsonUtils.merge(i,s):s},e._getDefaults=function(i){return t.JsonUtils.clone(e.VERSION_1)},e.getGapSize=function(t,e){return Math.ceil(e*t.layout.gapRatio)};var i=function(t,e,i,s){this.Init(e,i,s),this._breadcrumbs=t};t.Obj.createSubclass(i,t.EventManager),i.prototype.OnClick=function(t){i.superclass.OnClick.call(this,t),this._processBreadcrumbs(this.GetLogicalObject(t.target))},i.prototype.HandleTouchClickInternal=function(t){this._processBreadcrumbs(this.GetLogicalObject(t.target))},i.prototype._processBreadcrumbs=function(e){if(e&&e instanceof s&&e.isDrillable()){var i=t.EventFactory.newBreadcrumbsDrillEvent(e.getId());this.FireEvent(i,this._breadcrumbs)}},i.prototype.handleKeyboardEvent=function(e){var i=!0,s=e.keyCode;if(s==t.KeyboardEvent.TAB){var n=this._breadcrumbs.updateCrumbFocus(e.shiftKey);-1==n?i=!1:this.UpdateActiveElement(this._breadcrumbs.getCrumb(n))}else if(s==t.KeyboardEvent.ENTER){var o=this._breadcrumbs.getCrumb(this._breadcrumbs.getCurrentCrumbIndex());this._processBreadcrumbs(this.GetLogicalObject(o))}return i&&t.EventManager.consumeEvent(e),i};var s=function(t,e,i){this.Init(),this._id=t,this._bDrillable=!1,this._displayable=e,this._displayableText=i,this._truncated=!1};t.Obj.createSubclass(s,t.SimpleObjPeer),s.prototype.getId=function(){return this._id},s.prototype.isDrillable=function(){return this._bDrillable},s.prototype.setDrillable=function(t){this._bDrillable=t},s.prototype.getDisplayable=function(){return this._displayable},s.prototype.getTooltip=function(t){return this._truncated?this._displayableText:null},s.prototype.setTruncated=function(t){this._truncated=t};var n=new Object;t.Obj.createSubclass(n,t.Obj),n._TOUCH_BUFFER=3,n.render=function(e,i,o){for(var a=e.getCtx(),r=e.__getData().items?e.__getData().items:[],l=e.__getOptions(),h=e.getEventManager(),_=[],d=[],u=0;u<r.length;u++){var c=r[u];if(c){var p=c.label?c.label:"",g=n._createLabel(a,p,l,u<r.length-1);_.push(g);var f=new s(c.id,g,p);h.associate(g,f),d.push(f),u<r.length-1&&f.setDrillable(!0)}}e.SetCrumbs(_),t.Agent.isRightToLeft(a)?n._positionLabelsBidi(e,i,o,_,d):n._positionLabels(e,i,o,_,d)},n._createButtonState=function(e,i,s){var n=new t.OutputText(e,i,0,0);n.setMouseEnabled(!1),n.setCSSStyle(s);var o=s.getPadding(t.CSSStyle.PADDING_TOP),a=s.getPadding(t.CSSStyle.PADDING_RIGHT),r=s.getPadding(t.CSSStyle.PADDING_BOTTOM),l=s.getPadding(t.CSSStyle.PADDING_LEFT),h=t.DisplayableUtils.getDimensionsForced(e,n),_=new t.Rect(e,0,0,h.w+l+a,h.h+o+r);return _.setInvisibleFill(),_.setCSSStyle(s),n.setTranslate(l,o),_.addChild(n),_},n._createLabel=function(e,i,s,o){var a;if(o&&(s.labelStyleOver||s.labelStyleDown)){var r=new t.CSSStyle(s.labelStyle),l=new t.CSSStyle(s.labelStyleOver),h=new t.CSSStyle(s.labelStyleDown),_=n._createButtonState(e,i,r),d=n._createButtonState(e,i,l),u=n._createButtonState(e,i,h);(a=new t.Button(e,_,d,u)).setAriaRole("link"),a.setAriaProperty("label",i)}else{var c=o?s.labelStyle:s.disabledLabelStyle,p=new t.CSSStyle(c);p.getPadding(t.CSSStyle.PADDING_LEFT)||p.getPadding(t.CSSStyle.PADDING_RIGHT)||p.getPadding(t.CSSStyle.PADDING_TOP)||p.getPadding(t.CSSStyle.PADDING_BOTTOM)?a=n._createButtonState(e,i,p):(a=new t.OutputText(e,i,0,0)).setCSSStyle(p)}return a},n._getLabelTextString=function(e){return e instanceof t.Button?e.upState.getChildAt(0).getTextString():e instanceof t.Rect?e.getChildAt(0).getTextString():e.getTextString()},n._truncateLabels=function(e,i){if(e instanceof t.Button){var s=e.upState.getChildAt(0);return t.TextUtils.fitText(s,Math.max(i-s.getTranslateX(),0),1/0,s.getParent()),s=e.overState.getChildAt(0),t.TextUtils.fitText(s,Math.max(i-s.getTranslateX(),0),1/0,s.getParent()),s=e.downState.getChildAt(0),void t.TextUtils.fitText(s,Math.max(i-s.getTranslateX(),0),1/0,s.getParent())}if(e instanceof t.Rect){s=e.getChildAt(0);t.TextUtils.fitText(s,Math.max(i-s.getTranslateX(),0),1/0,s.getParent())}else t.TextUtils.fitText(e,i,1/0,e.getParent())},n._positionLabels=function(e,i,s,o,a){for(var r=e.__getOptions(),l=e.getEventManager(),h=[],_=0,d=0;d<o.length;d++){i.addChild(o[d]);var u=o[d].getDimensions();h[d]=u,_=Math.max(u.h,_),i.removeChild(o[d])}var c=0;for(d=0;d<o.length;d++){i.addChild(o[d]);u=h[d];if(o[d].setTranslate(c,.5*(_-u.h)),t.Agent.isTouchDevice()){var p=new t.Rect(i.getCtx(),-n._TOUCH_BUFFER,-n._TOUCH_BUFFER,u.w+2*n._TOUCH_BUFFER,u.h+2*n._TOUCH_BUFFER);p.setInvisibleFill(),o[d].addChild(p),d<a.length&&l.associate(p,a[d])}if(c+u.w>s){var g=n._getLabelTextString(o[d]);return n._truncateLabels(o[d],s-c),void(d<a.length?a[d].setTruncated(!0):l.associate(o[d],new t.SimpleObjPeer(g)))}if(c+=u.w+r.__labelGap,d<o.length-1){var f=n._newSeparator(e);i.addChild(f);var y=f.getDimensions();f.setTranslate(c,.5*(_-y.h));var S=y.w;if(c+S>s)return void i.removeChild(f);c+=S+r.__labelGap}}},n._positionLabelsBidi=function(e,i,s,o,a){for(var r=e.__getOptions(),l=e.getEventManager(),h=s,_=0;_<o.length;_++){i.addChild(o[_]);var d=o[_].getDimensions();if(t.Agent.isTouchDevice()){var u=new t.Rect(i.getCtx(),-n._TOUCH_BUFFER,-n._TOUCH_BUFFER,d.w+2*n._TOUCH_BUFFER,d.h+2*n._TOUCH_BUFFER);u.setInvisibleFill(),o[_].addChild(u),_<a.length&&l.associate(u,a[_])}if(h-d.w<0){var c=n._getLabelTextString(o[_]);return n._truncateLabels(o[_],h),o[_].setTranslateX(0),void(_<a.length?a[_].setTruncated(!0):l.associate(o[_],new t.SimpleObjPeer(c)))}if(o[_].setTranslateX(h-d.w),h-=d.w+r.__labelGap,_<o.length-1){var p=n._newSeparator(e);i.addChild(p);var g=p.getDimensions().w;if(h-g<0)return void i.removeChild(p);p.setTranslateX(h-g),h-=g+r.__labelGap}}},n._newSeparator=function(e){var i=e.__getOptions(),s=new t.OutputText(e.getCtx(),i.__labelSeparator,0,0);return s.setCSSStyle(new t.CSSStyle(i.labelStyle)),s};var o=function(){};t.Obj.createSubclass(o,t.BaseComponent),o.prototype.Init=function(t,e,i){o.superclass.Init.call(this,t,e,i),this.EventManager=this.CreateEventManager(this,t,this.dispatchEvent,this),this.EventManager.addListeners(this),this._legend=null,this._hasFocus=!1,this._navigableIdToFocus=null},o.prototype.SetOptions=function(e){if(e){if(this.Options=this.Defaults.calcOptions(e),t.Agent.isEnvironmentTest()&&(this.Options.animationOnDisplay="none",this.Options.animationOnDataChange="none"),this.Options._nodes=this.Options.nodes,this.Options.rootNode){this.Options._ancestors=null;var i=p.findRootAndAncestors(this.getCtx(),this.Options.nodes,this.Options.rootNode,[]);i&&i.root&&(this.Options.nodes=[i.root]),i&&i.ancestors&&(this.Options._ancestors=i.ancestors)}}else this.Options||(this.Options=this.GetDefaults())},o.prototype.render=function(e,i,s){var n=e||!this.Options;this.SetOptions(e);var o=this._processNodes();this.ApplyParsedProperties({root:o}),isNaN(i)||isNaN(s)||(this.Width=i,this.Height=s),this.EventManager&&this.EventManager.hideTooltip();var r=new t.Rectangle(0,0,this.Width,this.Height);this.Layout(r);var l=new t.Container(this.getCtx());this.addChild(l),this._templates&&(this._afContext=new t.AfContext(this.getCtx(),this.EventManager),this._afContext.setRmIfNotFit(!0)),this.Render(l,r),this.StopAnimation();var h=this.getOptions().animationOnDataChange,_=new t.Rectangle(0,0,this.Width,this.Height),d=!1;if(this._container){if(h&&n)if(t.BlackBoxAnimationHandler.isSupported(h))this.Animation=t.BlackBoxAnimationHandler.getCombinedAnimation(this.getCtx(),h,this._container,l,_,this.AnimationDuration),d=!0;else if(this._oldRoot&&"auto"==h){this._deleteContainer=this.GetDeleteContainer(),this.addChild(this._deleteContainer);var u=new a(this.getCtx(),this._deleteContainer);u.animate(this._oldRoot,this._root,this._oldAncestors,this._ancestors),this.Animation=u.getAnimation(!0)}}else this.Animation=this.GetDisplayAnimation(l,_);this._oldRoot=null,this._oldAncestors=null,this.Animation&&(this.EventManager.removeListeners(this),this.Animation.setOnEnd(this.OnAnimationEnd,this),this.Animation.play()),d?this._oldContainer=this._container:this._container&&this.removeChild(this._container),this._container=l,n?this._processInitialSelections():this.ReselectNodes(),this._processInitialFocus(!this.Animation),this.Animation||this._processInitialHighlighting(),this.UpdateAriaAttributes(),this.Animation||this.RenderComplete()},o.prototype.Parse=function(t){return null},o.prototype.Layout=function(t){},o.prototype.Render=function(t,e){},o.prototype.RenderBackground=function(e,i){var s=new t.Rect(this.getCtx(),0,0,this.Width,this.Height);s.setInvisibleFill(),e.addChild(s)},o.prototype.LayoutBreadcrumbs=function(t){if(this._ancestors.length>0){var e=this._root?this._root.getLabel():null;this._breadcrumbs&&this.EventManager.removeComponentKeyboardHandler(this._breadcrumbs.getEventManager()),this._breadcrumbs=_.render(this,t,this._ancestors,e),this.EventManager.addComponentKeyboardHandlerAt(this._breadcrumbs.getEventManager(),0)}else this._breadcrumbs&&this.EventManager.removeComponentKeyboardHandler(this._breadcrumbs.getEventManager()),this._breadcrumbs=null},o.prototype.RenderBreadcrumbs=function(t){this._breadcrumbs&&t.addChild(this._breadcrumbs)},o.prototype.LayoutLegend=function(t){this._legend=d.render(this,t,this._legendSource)},o.prototype.RenderLegend=function(t){this._legend&&(t.addChild(this._legend),this._legend=null)},o.prototype.RenderEmptyText=function(e){var i=this.getOptions(),s=i.emptyText;s||(s=i.translations.labelNoData),t.TextUtils.renderEmptyText(e,s,new t.Rectangle(0,0,this.Width,this.Height),this.getEventManager(),i._statusMessageStyle)},o.prototype.HasValidData=function(){return this._root&&this._root.getSize()>0},o.prototype.GetDisplayAnimation=function(e,i){var s=this.getOptions().animationOnDisplay;return t.BlackBoxAnimationHandler.isSupported(s)?t.BlackBoxAnimationHandler.getInAnimation(this.getCtx(),s,e,i,this.AnimationDuration):null},o.prototype.OnAnimationEnd=function(){this._deleteContainer&&(this.removeChild(this._deleteContainer),this._deleteContainer=null),this._oldContainer&&(this.removeChild(this._oldContainer),this._oldContainer=null),this.EventManager.addListeners(this),this._processInitialFocus(!0),this._processInitialHighlighting(),this.AnimationStopped||this.RenderComplete(),this.Animation=null,this.AnimationStopped=!1},o.prototype.GetDeleteContainer=function(){return new t.Container(this.getCtx())},o.prototype.CreateKeyboardHandler=function(t){return new u(t)},o.prototype.CreateEventManager=function(t,e,i,s){return new r(t,e,i,s)},o.prototype.GetInitialFocusedItem=function(t){if(t&&t.isArtificialRoot()){var e=t.getChildNodes();if(e&&e.length>0)return e[0]}return t},o.prototype.highlight=function(e){this.getOptions().highlightedCategories=t.JsonUtils.clone(e),t.CategoryRolloverHandler.highlight(e,p.getAllNodes(this._root),"any"==this.getOptions().highlightMatch)},o.prototype.select=function(e){var i=this.getOptions();if(i.selection=t.JsonUtils.clone(e),this._selectionHandler){var s=p.getAllNodes(this._root);this._selectionHandler.processInitialSelections(i.selection,s)}},o.prototype.__getMaxDepth=function(){return this._maxDepth},o.prototype.__getNodeCount=function(){return this._nodeCount},o.prototype.ApplyParsedProperties=function(e){var i=this.getOptions();this._oldRoot=this._root,this._oldAncestors=this._ancestors,this._root=e.root,this._ancestors=i._ancestors?i._ancestors:[],this._nodeCount=this._root?p.calcNodeCount(this._root):0,this._maxDepth=this._root?p.calcMaxDepth(this._root,0):0,this.AnimationDuration=t.CSSStyle.getTimeMilliseconds(i.animationDuration)/1e3,this._styles=e.styles?e.styles:{},"none"==i.selectionMode?this._nodeSelection=null:"single"==i.selectionMode?this._nodeSelection=t.SelectionHandler.TYPE_SINGLE:this._nodeSelection=t.SelectionHandler.TYPE_MULTIPLE,this._nodeSelection?(this._selectionHandler=new t.SelectionHandler(this.getCtx(),this._nodeSelection),this._initialSelection=i.selection):this._selectionHandler=null,this.EventManager.setSelectionHandler(this._selectionHandler),this.EventManager.setKeyboardHandler(this.CreateKeyboardHandler(this.EventManager)),this._legendSource=null;var s=i._templates;if(s)for(var n in this._templates={},s){var o=t.AfComponentFactory.parseJsonElement(s[n]);this._templates[n]=o}},o.prototype.ReselectNodes=function(){for(var t=this._selectionHandler?this._selectionHandler.getSelection():new Array,e=0;e<t.length;e++)t[e].setSelected(!0)},o.prototype._processInitialSelections=function(){if(this._selectionHandler&&this._initialSelection){var t=p.getAllNodes(this._root);this._selectionHandler.processInitialSelections(this._initialSelection,t),this._initialSelection=null}},o.prototype._processInitialHighlighting=function(){var t=this.getOptions().highlightedCategories;t&&t.length>0&&this.highlight(t)},o.prototype._processInitialFocus=function(t){var e=null,i=this.__getNavigableIdToFocus();i&&(e=l.getNodeById(this._root,i),this.EventManager.setFocus(e)),t&&this.__setNavigableIdToFocus(null),e||(e=this.GetInitialFocusedItem(this._root),this.EventManager.setFocus(e)),t&&this.setFocused(this.isFocused())},o.prototype.setFocused=function(t){this._hasFocus=t,this.EventManager.setFocused(t)},o.prototype.isFocused=function(){return this._hasFocus},o.prototype.__getAnimationDuration=function(){return this.AnimationDuration},o.prototype.__getTemplate=function(t){return this._templates?this._templates[t]:null},o.prototype.__getAfContext=function(){return this._afContext},o.prototype.__getNodeUnderPoint=function(t,e){return this._root.getNodeUnderPoint(t,e)},o.prototype.__isDragAvailable=function(t){return this._selectionHandler?t[0]:null},o.prototype.__getDragTransferable=function(t){t.isSelected()||(this._selectionHandler.processClick(t,!1),this.EventManager.fireSelectionEvent());for(var e=[],i=this._selectionHandler.getSelection(),s=0;s<i.length;s++)e.push(i[s].getId());return e},o.prototype.__getDragFeedback=function(){for(var t=[],e=this._selectionHandler.getSelection(),i=0;i<e.length;i++)t.push(e[i].getDisplayable());return t},o.prototype.__showDropSiteFeedback=function(t){if(this._dropSiteFeedback&&(this.removeChild(this._dropSiteFeedback),this._dropSiteFeedback=null),t&&(this._dropSiteFeedback=t.getDropSiteFeedback(),this._dropSiteFeedback)){var e=this.getOptions().styleDefaults;this._dropSiteFeedback.setSolidFill(e._dropSiteFillColor,e._dropSiteOpacity),this._dropSiteFeedback.setSolidStroke(e._dropSiteBorderColor),this.addChild(this._dropSiteFeedback)}return this._dropSiteFeedback},o.prototype.__processBreadcrumbsEvent=function(t){"breadcrumbsDrill"===t.type&&this.__drill(t.id,!1)},o.prototype.__drill=function(e,i){var s=this.getOptions()._widgetConstructor;i&&this._root&&e==this._root.getId()&&this._ancestors.length>0?(this.__setNavigableIdToFocus(e),this.dispatchEvent(t.EventFactory.newTreeDrillEvent(this._ancestors[0].id,p.findRootAndAncestors(this.getCtx(),this.getOptions()._nodes,this._ancestors[0].id,[]).root,s))):i||this.dispatchEvent(t.EventFactory.newTreeDrillEvent(e,p.findRootAndAncestors(this.getCtx(),this.getOptions()._nodes,e,[]).root,s)),this.getCtx().getTooltipManager().hideTooltip()},o.prototype.getLogicalObject=function(t){return this.EventManager.GetLogicalObject(t)},o.prototype.getRootNode=function(){return this._root},o.prototype.__getNavigableIdToFocus=function(){return this._navigableIdToFocus},o.prototype.__setNavigableIdToFocus=function(t){this._navigableIdToFocus=t},o.prototype.__getNodeSelection=function(){return this._nodeSelection},o.prototype.CreateNode=function(t){return null},o.prototype.getAutomation=function(){return new g(this)},o.prototype.getBreadcrumbs=function(){return this._breadcrumbs},o.prototype._processNodes=function(){var e=this.getOptions();if(null==e.nodes||0==e.displayLevels)return null;var i=[],s=t.ArrayUtils.createBooleanMap(e.hiddenCategories);for(r=0;r<e.nodes.length;r++){var n=e.nodes[r];n._index=r;var o=this._processNode(s,n,e.displayLevels);o&&i.push(o)}if(1==i.length)return i[0];for(var a=0,r=0;r<i.length;r++)a+=i[r].getSize();var l={value:a,bArtificialRoot:!0,id:this._id},h=this.CreateNode(l);return h.setChildNodes(i),h},o.prototype._processNode=function(t,e,i){if(p.isHiddenNode(t,e))return null;var s=this.CreateNode(e);if(s.isDisclosed()&&i>1){for(var n=[],o=e.nodes?e.nodes:[],a=0;a<o.length;a++){var r=o[a];r._index=a;var l=this._processNode(t,r,null!=i?i-1:i);l&&n.push(l)}s.setChildNodes(n)}return s},o.prototype.UpdateAriaNavigation=function(e){if(t.Agent.isTouchDevice()||t.Agent.isEnvironmentTest())for(var i=p.getAllVisibleNodes(e),s=0;s<i.length-1;s++){var n=this.getId()+(i[s+1].getId()?i[s+1].getId():i[s+1].getLabel());n=n.replace(/\s+/g,""),i[s+1].getDisplayable().setId(n,!0),i[s].getDisplayable().setAriaProperty("flowto",n)}},o.prototype.hasDataProvider=function(){return!!this.getOptions().data};var a=function(t,e){this.Init(t,e)};t.Obj.createSubclass(a,t.DataAnimationHandler),a.prototype.animate=function(t,e,i,s){if(this._bDrill=!1,this._oldRoot=t,this._oldAncestors=i,a._isAncestor(s,t)||a._isAncestor(i,e)){this._bDrill=!0;var n=t.getDescendantNodes(),o=e.getDescendantNodes();n.push(t),o.push(e),this.constructAnimation(n,o)}else this.constructAnimation([t],[e])},a.prototype.isDrillAnimation=function(){return this._bDrill},a.prototype.isAncestorInsert=function(e){return!!this._bDrill&&(t.Obj.compareValues(this.getCtx(),this._oldRoot.getId(),e.getId())||a._isAncestor(this._oldAncestors,e))},a._isAncestor=function(t,e){if(!e||!t)return!1;for(var i=0;i<t.length;i++)if(t[i].id==e.getId())return!0;return!1};var r=function(t,e,i,s){this.Init(e,i,s,t),this._view=t};t.Obj.createSubclass(r,t.EventManager),r.prototype.GetView=function(){return this._view},r.prototype.OnDblClickInternal=function(t){var e=this.GetLogicalObject(t.target);e&&e.isSelectable&&e.isSelectable()&&this._processDrill(e,t.shiftKey)},r.prototype.OnClick=function(t){r.superclass.OnClick.call(this,t);var e=this.GetLogicalObject(t.target);this._processNodeLabel(e),!e||e.isSelectable&&e.isSelectable()||this._processDrill(e,t.shiftKey)},r.prototype.OnMouseOver=function(t){r.superclass.OnMouseOver.call(this,t);var e=this.GetLogicalObject(t.target);e&&e.handleMouseOver&&e.handleMouseOver()},r.prototype.OnMouseOut=function(e){r.superclass.OnMouseOut.call(this,e);var i=this.GetLogicalObject(e.target);if(i&&i.handleMouseOut){var s=this.GetLogicalObject(e.relatedTarget),n=s&&s.getId?s.getId():null;null!=i.getId()&&t.Obj.compareValues(this.getCtx(),n,i.getId())||i.handleMouseOut()}},r.prototype.ProcessKeyboardEvent=function(e){var i=!1,s=e.keyCode,n=this.getFocus();return s!=t.KeyboardEvent.ENTER||e.ctrlKey?i=r.superclass.ProcessKeyboardEvent.call(this,e):((n=this.getFocus()).isDrillReplaceEnabled&&n.isDrillReplaceEnabled()&&(e.shiftKey&&(n=this._view.getRootNode()),this._view.__drill(n.getId(),e.shiftKey)),t.EventManager.consumeEvent(e),i=!0),i},r.prototype.HandleTouchClickInternal=function(t){var e=t.target,i=this.GetLogicalObject(e);this._processNodeLabel(i),this._currentHoverItem&&this._currentHoverItem!=i&&(this._currentHoverItem.handleMouseOut(),this._currentHoverItem=null),i&&(i instanceof l&&this._currentHoverItem!=i&&(this._currentHoverItem=i,i.handleMouseOver()),i.isSelectable&&i.isSelectable()||this._processDrill(i,t.shiftKey))},r.prototype.HandleTouchDblClickInternal=function(t){var e=t.target,i=this.GetLogicalObject(e);i&&i.isSelectable&&i.isSelectable()&&this._processDrill(i,!1)},r.prototype._processNodeLabel=function(t){t&&t instanceof h&&t.isDrillable()&&this._view.__drill(t.getId(),!1)},r.prototype._processDrill=function(t,e){t.isDrillReplaceEnabled&&t.isDrillReplaceEnabled()&&this._view.__drill(t.getId(),e)},r.prototype.ProcessRolloverEvent=function(e,i,s){var n=this._view.getOptions();if("dim"==n.hoverBehavior){var o=i.getCategories?i.getCategories():[];n.highlightedCategories=s?o.slice():null;var a=t.EventFactory.newCategoryHighlightEvent(n.highlightedCategories,s),r=p.getAllNodes(this.GetView().getRootNode()),l=t.CSSStyle.getTimeMilliseconds(n.hoverBehaviorDelay);this.RolloverHandler.processEvent(a,r,l,"any"==n.highlightMatch)}},r.prototype.GetTouchResponse=function(){return this._view.getOptions().touchResponse};var l=function(){};t.Obj.createSubclass(l,t.Obj),l._ANIMATION_DELETE_PRIORITY=0,l._ANIMATION_UPDATE_PRIORITY=1,l._ANIMATION_INSERT_PRIORITY=2,l._DEFAULT_FILL_COLOR="#000000",l._DEFAULT_TEXT_SIZE=11,l.__NODE_SELECTED_SHADOW=new t.Shadow(Math.sqrt(2),Math.sqrt(2),5/3,"rgba(0, 0, 0, 0.5)"),l.prototype.Init=function(e,i){this._view=e,this._options=i;var s=this._view.getOptions();this._id=i.id||i.label,this._color=i.color?i.color:l._DEFAULT_FILL_COLOR,this._textStr=i.label,this._labelStyle=i.labelStyle?new t.CSSStyle(i.labelStyle):null,this._pattern=i.pattern,this._selectable=i.selectable,this._shortDesc=i.shortDesc?i.shortDesc:i.tooltip,this._size=i.value;var n=i.drilling;this._drilling="on"==n||"off"==n?n:s.drilling,this._stampId=i.S,this._bArtificialRoot=i.bArtificialRoot,this._alpha=1,this._lastVisitedChild=null,this._isShowingKeyboardFocusEffect=!1,this.IsHover=!1},l.prototype.setChildNodes=function(t){if(null!=t)for(var e=0;e<t.length;e++)t[e]._parent=this;this._children=t},l.prototype.getChildNodes=function(){return this._children?this._children:[]},l.prototype.getDescendantNodes=function(){var t,e,i=[];if(!this.hasChildren())return i;for(var s=0;s<this._children.length;s++)t=(e=this._children[s]).getDescendantNodes(),i.push(e),i=i.concat(t);return i},l.prototype.SetLastVisitedChild=function(t){this._lastVisitedChild=t},l.prototype.GetLastVisitedChild=function(){return this._lastVisitedChild},l.prototype.MarkAsLastVisitedChild=function(){var t=this.GetParent();t&&t.SetLastVisitedChild(this)},l.prototype.isDescendantOf=function(t){return!(!t||!this.GetParent())&&(this.GetParent()==t||this.GetParent().isDescendantOf(t))},l.prototype.GetNodesAtDepth=function(t,e){var i=[];if(e<0)return i;if(0==e)return[this];if(t.hasChildren())for(var s,n=t.getChildNodes(),o=0;o<n.length;o++)s=n[o],i=i.concat(s.GetNodesAtDepth(s,e-1));return i},l.getNodeById=function(e,i){if(t.Obj.compareValues(e.getView().getCtx(),e.getId(),i))return e;for(var s=null,n=e.getChildNodes(),o=n.length,a=null,r=0;r<o;r++)if(a=n[r],s=l.getNodeById(a,i))return s;return null},l.prototype.getView=function(){return this._view},l.prototype.getStampId=function(){return this._stampId},l.prototype.getOptions=function(){return this._options},l.prototype.getCategories=function(){if(this.isArtificialRoot())return[];var t=this.getOptions().categories;if(!t&&!this.getView().hasDataProvider()){var e=this.GetParent(),i=e?e.getCategories():null;(t=i?i.slice():[]).push(this.getId())}return t},l.prototype.getId=function(){return this._id},l.prototype.getSize=function(){return this._size},l.prototype.getColor=function(){return this._color},l.prototype.getDatatip=function(){var t=this._view.getOptions().tooltip,e=t?t.renderer:null;return e?this.getView().getCtx().getTooltipManager().getCustomTooltip(e,this.getDataContext()):this._shortDesc},l.prototype.getDatatipColor=function(){return this._color},l.prototype.getShortDesc=function(){return this._shortDesc},l.prototype.getDataContext=function(){var e,i=this.getOptions(),s=i;return i._noTemplate?(e=i._itemData,s=i._itemData):i._itemData&&(e=i._itemData,s=i=t.JsonUtils.clone(i),delete i._itemData),{id:this.getId(),label:this.getLabel(),value:this.getSize(),color:this.getColor(),data:s,itemData:e,component:this.getView().getOptions()._widgetConstructor}},l.prototype.getIndex=function(){return this.getOptions()._index},l.prototype.getAlpha=function(){return this._alpha},l.prototype.setAlpha=function(t){this._alpha=t,this._shape&&this._shape.setAlpha(this._alpha)},l.prototype.setDisclosed=function(t){this.getOptions()._expanded=t},l.prototype.isDisclosed=function(){return!1!==this.getOptions()._expanded},l.prototype.isArtificialRoot=function(){return this._bArtificialRoot},l.prototype.isDrillReplaceEnabled=function(){return"on"==this._drilling},l.prototype.render=function(t){},l.prototype.renderChildren=function(t){var e=this.getChildNodes();if(null!=e)for(var i=0;i<e.length;i++)e[i].render(t)},l.prototype.getNextNavigable=function(t){return this.MarkAsLastVisitedChild(),this},l.prototype.getKeyboardBoundingBox=function(e){return new t.Rectangle(0,0,0,0)},l.prototype.getTargetElem=function(){return null},l.prototype.showKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!0,this.showHoverEffect(),this.handleMouseOver&&this.handleMouseOver()},l.prototype.hideKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect&&(this._isShowingKeyboardFocusEffect=!1,this.hideHoverEffect()),this.handleMouseOut&&this.handleMouseOut()},l.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect},l.prototype.handleMouseOver=function(){this.IsHover=!0},l.prototype.handleMouseOut=function(){this.IsHover=!1},l.prototype.isSelectable=function(){return"off"!=this._selectable&&null!=this.getView().__getNodeSelection()},l.prototype.isSelected=function(){return this._selected},l.prototype.setSelected=function(t){this._selected=t,this.UpdateAriaLabel()},l.prototype.showHoverEffect=function(){},l.prototype.hideHoverEffect=function(){},l.prototype.highlight=function(t,e){this.setAlpha(e)},l.prototype.isDragAvailable=function(t){return this.getView().__isDragAvailable(t)},l.prototype.getDragTransferable=function(t,e){return this.getView().__getDragTransferable(this)},l.prototype.getDragFeedback=function(t,e){return this.getView().__getDragFeedback()},l.prototype.getDropSiteFeedback=function(){return null},l.prototype.contains=function(t,e){return!1},l.prototype.getNodeUnderPoint=function(t,e){return null},l.prototype.GetAnimationParams=function(){return[]},l.prototype.SetAnimationParams=function(t){},l.prototype.animateUpdate=function(e,i){e.isDrillAnimation()||e.constructAnimation(i.getChildNodes(),this.getChildNodes());var s,n=this.GetAnimationParams(),o=i.GetAnimationParams(n);if(!t.ArrayUtils.equals(o,n)){(s=new t.CustomAnimation(this.getView().getCtx(),this,this.getView().__getAnimationDuration())).getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this.GetAnimationParams,this.SetAnimationParams,n),e.add(s,l._ANIMATION_UPDATE_PRIORITY);var a=this._size!=i._size,r=t.ColorUtils.getRGBA(this._color)!=t.ColorUtils.getRGBA(i._color);this.SetAnimationParams(o);var h=this._view.getOptions().animationUpdateColor;h&&(a||r)&&(this._color=h)}},l.prototype.animateInsert=function(e){if(!e.isDrillAnimation()||!e.isAncestorInsert(this)){this.setAlpha(0);var i=new t.AnimFadeIn(this.getView().getCtx(),this,this.getView().__getAnimationDuration());if(e.add(i,l._ANIMATION_INSERT_PRIORITY),this.hasChildren())for(var s=0;s<this._children.length;s++)this._children[s].animateInsert(e)}},l.prototype.animateDelete=function(e,i){i.addChild(this._shape);var s=new t.AnimFadeOut(this.getView().getCtx(),this,this.getView().__getAnimationDuration());if(e.add(s,l._ANIMATION_DELETE_PRIORITY),!e.isDrillAnimation()&&this.hasChildren())for(var n=0;n<this._children.length;n++)this._children[n].animateDelete(e,i)},l.prototype.hasChildren=function(){return null!=this._children&&this._children.length>0},l.prototype.hasDPChildren=function(){var t=this.getView().getOptions().data;if(t){var e=t.getChildDataProvider(this.getId());return!!e&&"yes"!==e.isEmpty()}return!1},l.prototype.hasPattern=function(){return this._pattern&&"none"!=this._pattern},l.prototype.GetParent=function(){return this._parent},l.prototype.GetDepth=function(){for(var t=0,e=this.GetParent();e;)t++,e=e.GetParent();return t},l.prototype.GetFill=function(){return this.hasPattern()?new t.PatternFill(this._pattern,this._color):new t.SolidFill(this._color)},l.GetNodeTextColor=function(e){return e.hasPattern()?"#000000":t.ColorUtils.getContrastingTextColor(e._color)},l.prototype.ApplyLabelTextStyle=function(e){var i=l.GetNodeTextColor(this);e.setSolidFill(i),e.setCSSStyle(this.getMergedLabelTextStyle()),t.Agent.isHighContrast()&&e.setSolidFill(i)},l.prototype.getMergedLabelTextStyle=function(){var e=new Array;return e.push(this._view.getOptions().nodeDefaults.labelStyle),this._labelStyle&&e.push(this._labelStyle),t.CSSStyle.mergeStyles(e)},l.prototype.GetTextSize=function(){var t=l._DEFAULT_TEXT_SIZE,e=this._view.getOptions().nodeDefaults.labelStyle.getFontSize();return e&&(t=parseFloat(e)),t},l.prototype.getLabelBackgroundColor=function(){var t=this._labelStyle,e=t?t.getStyle("background-color"):null;return e||this._view.getOptions().nodeDefaults.labelStyle.getStyle("background-color")},l.prototype.getDisplayable=function(){return this._shape},l.prototype.getLabel=function(){return this._textStr},l.prototype.GetAfContext=function(){return this.getView().__getAfContext()},l.prototype.GetElAttributes=function(){return this.getOptions()._cf},l.prototype.GetTemplate=function(){return this.getView().__getTemplate(this.getStampId())},l.prototype.isDoubleClickable=function(){return this.isDrillReplaceEnabled()},l.prototype.UpdateAriaLabel=function(){},l.prototype.isRootNode=function(){return t.Obj.compareValues(this.getView().getCtx(),this.getId(),this.getView().getRootNode().getId())||this.isArtificialRoot()};var h=function(t,e,i,s,n){this.Init(i,s,n),this._node=t,this._id=e,this._bDrillable=!1};t.Obj.createSubclass(h,t.SimpleObjPeer),h.prototype.getId=function(){return this._id},h.prototype.isDrillable=function(){return this._bDrillable},h.prototype.setDrillable=function(t){this._bDrillable=t},h.prototype.handleMouseOver=function(){this._node&&this._node.handleMouseOver&&this._node.handleMouseOver()},h.prototype.handleMouseOut=function(){this._node&&this._node.handleMouseOut&&this._node.handleMouseOut()};var _=function(){};t.Obj.createSubclass(_,t.Obj),_._COMPONENT_GAP=6,_._ENABLED_INLINE_STYLE="color: #003286;",_.render=function(e,i,s,n){var o=e.getCtx(),a=e.getOptions().styleDefaults,r=new Array;r.push(new t.CSSStyle(_._ENABLED_INLINE_STYLE)),r.push(a._drillTextStyle);var l=t.CSSStyle.mergeStyles(r).toString(),h=l+"text-decoration: underline;",d=new Array;d.push(a._currentTextStyle);var u={labelStyle:l,labelStyleOver:h,labelStyleDown:h,disabledLabelStyle:t.CSSStyle.mergeStyles(d).toString()},c=new t.Breadcrumbs(o,e.__processBreadcrumbsEvent,e,u);e.addChild(c);var p=s.slice(0).reverse();p.push({label:n});var g={items:p};c.render(g,i.w);var f=c.getDimensions();c.setTranslate(i.x,i.y);var y=f.h+_._COMPONENT_GAP;return i.y+=y,i.h-=y,e.removeChild(c),c};var d=function(){};t.Obj.createSubclass(d,t.Obj),d._LEGEND_GAP=4,d._LEGEND_LABEL_GAP=7,d._LEGEND_SECTION_GAP=24,d._LABEL_SIZE=11,d._LABEL_COLOR="#636363",d._LABEL_INLINE_STYLE="color:"+d._LABEL_COLOR+";",d.render=function(e,i){var s=e.getOptions(),n=s.sizeLabel,o=s.colorLabel;if(null!=n||null!=o){var a=e.getCtx(),r=(e.getEventManager(),new t.Container(a));e.addChild(r);var l=d._renderLabels(a,e,r,i.w,n,o);(new Array).push(s.styleDefaults._labelStyle);var h=l?l.getDimensions():null;l&&l.setTranslateX(i.y+(i.w-h.w)/2);var _=r.getDimensions();return r.setTranslateY(i.y+i.h-_.h),i.h-=_.h+d._LEGEND_GAP,e.removeChild(r),r}},d._renderLabels=function(e,i,s,n,o,a){var r=t.Agent.isRightToLeft(e),l=i.getEventManager(),h=i.getOptions().styleDefaults,_=null;if(o||a){_=new t.Container(e),s.addChild(_);var u=new Array;u.push(h._attributeTypeTextStyle);var c=t.CSSStyle.mergeStyles(u);(u=new Array).push(h._attributeValueTextStyle);var p,g,f,y,S,E,v,C,b=t.CSSStyle.mergeStyles(u),T=0;if(o){var A=i.getOptions().translations.labelSize;(p=new t.OutputText(e,A,0,0)).setCSSStyle(c),_.addChild(p),f=p.getDimensions().w,(g=new t.OutputText(e,o,0,0)).setCSSStyle(b),_.addChild(g),T=f+(y=g.getDimensions().w)+d._LEGEND_LABEL_GAP}var O=0;if(a){var R=i.getOptions().translations.labelColor;(S=new t.OutputText(e,R,0,0)).setCSSStyle(c),_.addChild(S),v=S.getDimensions().w,(E=new t.OutputText(e,a,0,0)).setCSSStyle(b),_.addChild(E),O=v+(C=E.getDimensions().w)+d._LEGEND_LABEL_GAP}if(T+O>(n-=d._LEGEND_SECTION_GAP)){var I=n/2;if(T>I&&O>I){var m=I-f-d._LEGEND_LABEL_GAP;t.TextUtils.fitText(g,m,1/0,_)?(y=g.getDimensions().w,l.associate(g,new t.SimpleObjPeer(o))):(_.removeChild(p),_.removeChild(g),g=null,y=0);var x=I-v-d._LEGEND_LABEL_GAP;t.TextUtils.fitText(E,x,1/0,_)?(C=E.getDimensions().w,l.associate(E,new t.SimpleObjPeer(a))):(_.removeChild(S),_.removeChild(E),E=null,C=0)}else T>O?t.TextUtils.fitText(g,n-O-f-d._LEGEND_LABEL_GAP,1/0,_)?(y=g.getDimensions().w,l.associate(g,new t.SimpleObjPeer(o))):(_.removeChild(p),_.removeChild(g),g=null,y=0):t.TextUtils.fitText(E,n-T-v-d._LEGEND_LABEL_GAP,1/0,_)?(C=E.getDimensions().w,l.associate(E,new t.SimpleObjPeer(a))):(_.removeChild(S),_.removeChild(E),E=null,C=0)}var D=0;r?(E&&(E.setX(D),D+=C+d._LEGEND_LABEL_GAP,S.setX(D),D+=v+d._LEGEND_SECTION_GAP),g&&(g.setX(D),D+=y+d._LEGEND_LABEL_GAP,p.setX(D))):(g&&(p.setX(D),D+=f+d._LEGEND_LABEL_GAP,g.setX(D),D+=y+d._LEGEND_SECTION_GAP),E&&(S.setX(D),D+=v+d._LEGEND_LABEL_GAP,E.setX(D)))}return _};var u=function(t){this.Init(t)};t.Obj.createSubclass(u,t.KeyboardHandler),u.prototype.isSelectionEvent=function(t){return this.isNavigationEvent(t)&&!t.ctrlKey},u.prototype.isMultiSelectEvent=function(e){return e.keyCode==t.KeyboardEvent.SPACE&&e.ctrlKey};var c=function(){};t.Obj.createSubclass(c,t.BaseComponentDefaults),c.SKIN_ALTA={skin:t.CSSStyle.SKIN_ALTA,animationDuration:500,animationOnDataChange:"none",animationOnDisplay:"none",drilling:"off",displayLevels:Number.MAX_VALUE,highlightMatch:"all",hoverBehavior:"none",hoverBehaviorDelay:200,nodeDefaults:{labelStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_11),labelMinLength:1},selectionMode:"multiple",sorting:"off",_statusMessageStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA),styleDefaults:{_attributeTypeTextStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD_12+"color:#4F4F4F"),_attributeValueTextStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_12),_currentTextStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_12),_drillTextStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_12),_labelStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA)},touchResponse:"auto",_resources:{}},c.prototype.Init=function(e,i){var s={alta:t.JsonUtils.merge(e.alta,c.SKIN_ALTA)};c.superclass.Init.call(this,s,i)},c.prototype.getAnimationDuration=function(t){return t.animationDuration};var p={};t.Obj.createSubclass(p,t.Obj),p.calcMaxDepth=function(t,e){var i=e,s=t.getChildNodes();if(s)for(var n=0;n<s.length;n++){var o=p.calcMaxDepth(s[n],e+1);i=Math.max(i,o)}return i},p.calcNodeCount=function(t){var e=1,i=t.getChildNodes();if(i)for(var s=0;s<i.length;s++)e+=p.calcNodeCount(i[s]);return e},p.getAllNodes=function(t){var e=[];return p._addNodesToArray(t,e),e},p.getAllVisibleNodes=function(t){var e=[];return p._addNodesToArray(t,e,!1,!0),e},p.getLeafNodes=function(t){var e=[];return p._addNodesToArray(t,e,!0),e},p.isHiddenNode=function(e,i){return t.ArrayUtils.hasAnyMapItem(e,i.categories)},p._addNodesToArray=function(t,e,i,s){if(t){var n=t.getChildNodes(),o=n?n.length:0;i&&0!=o||s&&!t.getDisplayable()||e.push(t);for(var a=0;a<o;a++)p._addNodesToArray(n[a],e,i,s)}},p.findRootAndAncestors=function(e,i,s,n){for(var o=0;o<i.length;o++){if(t.Obj.compareValues(e,i[o].id,s))return{root:i[o],ancestors:n};if(i[o].nodes){n.unshift(i[o]);var a=p.findRootAndAncestors(e,i[o].nodes,s,n);if(null!=a)return a;n.shift()}}return null};var g=function(t){this._treeView=t};t.Obj.createSubclass(g,t.Automation),g.NODE_ID_PREFIX="node",g.BREADCRUMBS_PREFIX="breadcrumbs",g.DISCLOSURE_SUFFIX="disclosure",g.ISOLATE_SUFFIX="isolate",g.RESTORE="restore",g.prototype.GetSubIdForDomElement=function(e){var i,s=this._treeView.getLogicalObject(e),n=this._treeView.getRootNode(),o=e instanceof t.Button||e instanceof t.IconButton;if(((i=e.getParent())instanceof t.Button||i instanceof t.IconButton)&&(e=i,o=!0),!s)return(i=e.getParent())instanceof t.Breadcrumbs?g.BREADCRUMBS_PREFIX+"["+i.getCrumbIndex(e)+"]":null;var a=null;if(s instanceof h&&o){var r=s._node;return a=this.GetSubIdForDomElement(r.getDisplayable()),this._getSubIdForButton(a,r,e)}if(s instanceof l){var _=s,d="";if(!n.isArtificialRoot()){if(_==n)return g.NODE_ID_PREFIX+"[0]";d+="[0]"}var u=this._getIndicesFromNode(_,n.getChildNodes());return(d=u?d+u:d).length>0&&(a=g.NODE_ID_PREFIX+d),o?this._getSubIdForButton(a,s,e):a}return null},g.prototype._getSubIdForButton=function(t,e,i){if(t){if(e instanceof f){var s=i.getAriaProperty("label"),n=options.translations.stateIsolated;return s.indexOf(n)>=0?g.RESTORE:t+":"+g.ISOLATE_SUFFIX}if(e instanceof T)return t+":"+g.DISCLOSURE_SUFFIX}return null},g.prototype._getIndicesFromNode=function(t,e){if(e&&e.length>0)for(var i=0;i<e.length;i++){if(e[i]==t)return"["+i+"]";var s=this._getIndicesFromNode(t,e[i].getChildNodes());if(s)return"["+i+"]"+s}return null},g.prototype.getDomElementForSubId=function(e){if(!e)return null;var i=this._treeView.getRootNode();if(e==t.Automation.TOOLTIP_SUBID)return this.GetTooltipElement(this._treeView);if(0==e.indexOf(g.BREADCRUMBS_PREFIX)){var s=e.substring(e.indexOf("[")+1,e.indexOf("]")),n=i.getView().getBreadcrumbs().getCrumb(s);return n?n.getElem():null}if(e==g.RESTORE){var o=this._treeView._restoreNode||this._treeView.__getLastIsolatedNode();if(o)return o.getIsolateRestoreButton().getElem()}i.isArtificialRoot()||(e=e.substring(0,e.indexOf("["))+e.substring(e.indexOf("]")+1));var a=-1==e.indexOf("[")?i:this._getNodeFromSubId(i,e);if(a){var r=e.indexOf(":");if(!(r>=0))return a.getDisplayable().getElem();if(e=e.substring(r+1),a instanceof T&&e==g.DISCLOSURE_SUFFIX){var l=a.getExpandCollapseButton();if(l)return l.getElem()}if(a instanceof f&&e==g.ISOLATE_SUFFIX){var h=a.getIsolateRestoreButton();if(h)return h.getElem()}}return null},g.prototype._getNodeFromSubId=function(t,e){var i=e.indexOf("["),s=e.indexOf("]");if(i>=0&&s>=0){var n=e.substring(i+1,s),o=(e=e.substring(s+1)).indexOf("["),a=e.indexOf("]"),r=g._getNodeByIndex(t.getChildNodes(),n);return r&&o>=0&&a>=0?this._getNodeFromSubId(r,e):r}},g.prototype._getNodeFromPath=function(t,e){var i=e.shift(),s=g._getNodeByIndex(t.getChildNodes(),i);return 0==e.length?s:e.length>0?this._getNodeFromPath(s,e):null},g.prototype.getNode=function(t){var e=this._treeView.getRootNode();if(!e)return null;e.isArtificialRoot()||0!=t[0]||t.shift();var i=0==t.length?e:this._getNodeFromPath(e,t);return i?{color:i.getColor(),label:i.getLabel(),selected:null!=i.isSelected()&&i.isSelected(),size:i.getSize(),tooltip:i.getShortDesc()}:null},g._getNodeByIndex=function(t,e){for(var i=0;i<t.length;i++)if(e==t[i].getIndex())return t[i];return null},t.Treemap=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.Treemap,o),t.Treemap._BUFFER_SPACE=7,t.Treemap._MIN_BUFFER_SPACE=1,t.Treemap._BACKGROUND_FILL_COLOR="#EBEFF5",t.Treemap._BACKGROUND_BORDER_COLOR="#DBE0EA",t.Treemap._BACKGROUND_INLINE_DEFAULT="background-color:"+t.Treemap._BACKGROUND_FILL_COLOR+";border-color:"+t.Treemap._BACKGROUND_BORDER_COLOR+";border-width:2px",t.Treemap.newInstance=function(e,i,s){return new t.Treemap(e,i,s)},t.Treemap.prototype.Init=function(e,i,s){t.Treemap.superclass.Init.call(this,e,i,s),this.Defaults=new b(e),this._nodeContent={},this.setId("treemap1000"+Math.floor(1e9*Math.random()))},t.Treemap.prototype.ApplyParsedProperties=function(e){t.Treemap.superclass.ApplyParsedProperties.call(this,e);var i=this.getOptions();"sliceAndDiceHorizontal"==i.layout?this._layout=new E(!0):"sliceAndDiceVertical"==i.layout?this._layout=new E(!1):this._layout=new S,this._isolatedNodes=[],this._processInitialIsolate(i.isolatedNode),"auto"==i.animationOnDisplay&&(i.animationOnDisplay="alphaFade")},t.Treemap.prototype.Layout=function(e){var i="jet"!=this.getOptions()._environment?t.Treemap._BUFFER_SPACE:t.Treemap._MIN_BUFFER_SPACE;i=Math.max(Math.ceil(i*Math.min(e.w,e.h)/400),t.Treemap._MIN_BUFFER_SPACE),e.x+=i,e.y+=i,e.w-=2*i,e.h-=2*i;var s=this._layout.getGapSize(this,1);e.x+=s,e.w-=2*s,this.LayoutBreadcrumbs(e),this.LayoutLegend(e),e.x-=s,e.w+=2*s;var n=this._isolatedNodes.length;if(n>0&&this._isolateRestoreLayout){var o=this._isolatedNodes[n-1];this._layout.layout(this,o,e.x,e.y,e.w,e.h,!0)}else{this._root&&this._layout.layout(this,this._root,e.x,e.y,e.w,e.h,!1);for(var a=0;a<n;a++){var r=this._isolatedNodes[a];this._layout.layout(this,r,e.x,e.y,e.w,e.h,!0)}}},t.Treemap.prototype.Render=function(e,i){if(this.RenderBackground(e,t.Treemap._BACKGROUND_INLINE_DEFAULT),this.RenderBreadcrumbs(e),this.RenderLegend(e),this.HasValidData()){this._groupTextLayer=new t.Container(this.getCtx()),e.addChild(this._groupTextLayer),this._isolatedNode?this._isolatedNode.render(e):this._root.hasChildren()?(this._root.renderChildren(e),this.UpdateAriaNavigation(this._root)):this._root.render(e),this._isolatedLayer=new t.Container(this.getCtx()),e.addChild(this._isolatedLayer),this._selectedLayer=new t.Container(this.getCtx()),e.addChild(this._selectedLayer),e.addChild(this._groupTextLayer),this._hoverEffect=new t.Rect(this.getCtx(),0,0,0,0),this._hoverEffect.setVisible(!1),this._hoverEffect.setMouseEnabled(!1),this._hoverEffect.setPixelHinting(!0),this._hoverEffect.setInvisibleFill(),e.addChild(this._hoverEffect);for(var s=0;s<this._isolatedNodes.length;s++){var n=this._isolatedNodes[s].getDisplayable();this._isolatedLayer.addChild(n)}}else this.RenderEmptyText(e)},t.Treemap.prototype.OnAnimationEnd=function(){if(!this.AnimationStopped){this._container.removeChildren();var e=new t.Rectangle(0,0,this.Width,this.Height);this.Layout(e),this.Render(this._container),this.ReselectNodes()}t.Treemap.superclass.OnAnimationEnd.call(this)},t.Treemap.prototype.ReselectNodes=function(){for(var t=this._selectionHandler?this._selectionHandler.getSelection():new Array,e=0;e<t.length;e++)if(this._isolatedNodes.length>0){var i=this._isolatedNodes[this._isolatedNodes.length-1];(t[e]==i||t[e].isDescendantOf(i))&&t[e].setSelected(!0)}else t[e].setSelected(!0)},t.Treemap.prototype.CreateKeyboardHandler=function(t){return new v(t)},t.Treemap.prototype.CreateEventManager=function(t,e,i,s){return new C(t,e,i,s)},t.Treemap.prototype.GetInitialFocusedItem=function(t){var e=this.__getLastIsolatedNode();return e?this.__getDefaultNavigable(p.getLeafNodes(e)):t?this.__getDefaultNavigable(p.getLeafNodes(t)):null},t.Treemap.prototype.__showHoverEffect=function(t,e,i,s,n){this._hoverEffect.setX(t).setY(e).setWidth(i).setHeight(s),this._hoverEffect.setStroke(n),this._hoverEffect.setVisible(!0)},t.Treemap.prototype.__hideHoverEffect=function(){this._hoverEffect.setVisible(!1)},t.Treemap.prototype.__getGroupTextLayer=function(){return this._groupTextLayer},t.Treemap.prototype.__moveToSelectedLayer=function(t){for(var e=0,i=this._selectedLayer.getNumChildren(),s=0;s<i;s++){var n=this._selectedLayer.getChildAt(s);t.zIndex>n.zIndex&&(e=s+1)}e<i?this._selectedLayer.addChildAt(t,e):this._selectedLayer.addChild(t)},t.Treemap.prototype.__getNodeUnderPoint=function(t,e){return this._isolatedNodes.length>0?this._isolatedNodes[this._isolatedNodes.length-1].getNodeUnderPoint(t,e):this._root.getNodeUnderPoint(t,e)},t.Treemap.prototype.__isolate=function(e){var i=this.getEventManager().getFocus();i&&i.hideKeyboardFocusEffect(),this._isolatedNodes.push(e),this.getOptions().isolatedNode=e.getId(),this.dispatchEvent(t.EventFactory.newTreemapIsolateEvent(e.getId())),this._isolateRestoreLayout=!0,this.Layout(new t.Rectangle(0,0,this.Width,this.Height)),this._isolateRestoreLayout=!1;var s=e.getDisplayable();this._isolatedLayer.addChild(s),this._renderIsolateRestore(e)},t.Treemap.prototype.__restore=function(){this._restoreNode=this._isolatedNodes.pop(),this.getOptions().isolatedNode=this._isolatedNodes.length>0?this._isolatedNodes[this._isolatedNodes.length-1].getId():null;var e=this.getEventManager().getFocus();e&&e.hideKeyboardFocusEffect(),this.__setNavigableIdToFocus(this._restoreNode.getId()),this.dispatchEvent(t.EventFactory.newTreemapIsolateEvent()),this._isolateRestoreLayout=!0,this.Layout(new t.Rectangle(0,0,this.Width,this.Height)),this._isolateRestoreLayout=!1,this._renderIsolateRestore(this._restoreNode),this._restoreNode=null},t.Treemap.prototype.__getLastIsolatedNode=function(){return this._isolatedNodes&&this._isolatedNodes.length>0?this._isolatedNodes[this._isolatedNodes.length-1]:null},t.Treemap.prototype._renderIsolateRestore=function(e){if("none"!=this.getOptions().animationOnDataChange){for(var i=this._selectionHandler?this._selectionHandler.getSelection():new Array,s=0;s<i.length;s++)i[s].setSelected(!1);var n=e.getIsolateAnimation();this.Animation=new t.ParallelPlayable(this.getCtx(),n),this.Animation.setOnEnd(this.OnAnimationEnd,this),this.getEventManager().removeListeners(this),this.Animation.play()}else this.render(null,this.Width,this.Height,!0)},t.Treemap.prototype._processInitialIsolate=function(e){if(e&&this._root){var i=this._root.getDescendantNodes();i.push(this._root);for(var s=0;s<i.length;s++)if(t.Obj.compareValues(this.getCtx(),i[s].getId(),e))return void this._isolatedNodes.push(i[s])}},t.Treemap.prototype.__getDefaultNavigable=function(t){var e=this.getEventManager().getKeyboardHandler();return e?e.getDefaultNavigable(t):t&&t.length>0?t[0]:null},t.Treemap.prototype.CreateNode=function(t){return new f(this,t)},t.Treemap.prototype.getIsolatedNodes=function(){return this._isolatedNodes},t.Treemap.prototype.getNodeContent=function(){return this._nodeContent};var f=function(e,i){this.Init(e,i);var s=this._view.getOptions(),n=s.nodeDefaults,o=n.header,a=i.header?i.header:{};this._groupLabelDisplay=i.groupLabelDisplay?i.groupLabelDisplay:n.groupLabelDisplay,this._labelDisplay=i.labelDisplay?i.labelDisplay:n.labelDisplay,this._labelHalign=i.labelHalign?i.labelHalign:n.labelHalign,this._labelValign=i.labelValign?i.labelValign:n.labelValign,this._headerHalign=a.labelHalign?a.labelHalign:o.labelHalign,this._headerLabelStyle=a.labelStyle?new t.CSSStyle(a.labelStyle):null,this._bHeaderUseNodeColor="on"==(a.useNodeColor?a.useNodeColor:o.useNodeColor),this._className=i.className||i.svgClassName,this._style=i.style||i.svgStyle,this._isolate=a.isolate?a.isolate:o.isolate,"auto"==this._isolate&&(this._isolate=t.Agent.isTouchDevice()?"off":"on"),this._bIsolated=null!=s.isolatedNode&&t.Obj.compareValues(this.getView().getCtx(),s.isolatedNode,this.getId())};t.Obj.createSubclass(f,l),f.TEXT_STYLE_HEADER="header",f.TEXT_STYLE_NODE="node",f.TEXT_STYLE_OFF="off",f.TEXT_BUFFER_HORIZ=5,f.TEXT_BUFFER_VERT=2,f.MIN_TEXT_BUFFER=2,f._LINE_FUDGE_FACTOR=1,f._ANIMATION_ISOLATE_DURATION=.3,f._MIN_TITLE_BAR_HEIGHT=22,f._MIN_TITLE_BAR_HEIGHT_ISOLATE=22,f.DEFAULT_HEADER_BORDER_WIDTH=1,f.DEFAULT_HEADER_WITH_NODE_COLOR_ALPHA=.5,f._ISOLATE_ICON_SIZE=12,f._ISOLATE_GAP_SIZE=4,f._ISOLATE_TOUCH_BUFFER=3,f.DEFAULT_NODE_TOP_BORDER_COLOR="#FFFFFF",f.DEFAULT_NODE_BOTTOM_BORDER_COLOR="#000000",f.DEFAULT_NODE_BORDER_WIDTH=1,f.DEFAULT_NODE_BORDER_OPACITY=.3,f.DEFAULT_NODE_PATTERN_BORDER_OPACITY=.15,f.MIN_SIZE_FOR_BORDER=2*f.DEFAULT_NODE_BORDER_WIDTH,f.GROUP_HOVER_INNER_OPACITY=.8,f.GROUP_HOVER_INNER_WIDTH=3,f.NODE_HOVER_OPACITY=1,f.NODE_SELECTION_WIDTH=2,f.prototype.render=function(e){if(this._hasLayout){var i;if(this._shape=this._createShapeNode(),e.addChild(this._shape),this.hasChildren()?(this._childNodeGroup=new t.Container(this.getView().getCtx()),this._shape.addChild(this._childNodeGroup),this.renderChildren(this._childNodeGroup)):i=this.GetTemplate(),i){var s=this.GetElAttributes(),n=this.GetAfContext();n.setELContext(s);var o=f.DEFAULT_NODE_BORDER_WIDTH+f._LINE_FUDGE_FACTOR,a=f.TEXT_BUFFER_HORIZ,r=f.TEXT_BUFFER_VERT,l=this._width-2*a-o,h=this._height-2*r-o;if(l>0&&h>0){n.setAvailableWidth(l),n.setAvailableHeight(h),n.setFontSize(this.GetTextSize());var _,d=t.AfComponentFactory.parseAndLayout(n,i,this._shape);if(this._contentRoot=d,t.Agent.isRightToLeft(e.getCtx())){var u=d.getDimensions();_=this._x+this._width-a-.5*o-u.w}else _=this._x+a+.5*o;d.setTranslate(_,this._y+r+.5*o)}}else if(!this._createCustomNodeContent()&&(this._text=this._createTextNode(this._shape),null!=this._text)){var c=this.getLabelBackgroundColor();if(this._textStyle!=f.TEXT_STYLE_HEADER&&(this.hasPattern()||c)){var p=this._text.getDimensions();this._textBackground=new t.Rect(this.getView().getCtx(),p.x,p.y,p.w,p.h),c?this._textBackground.setSolidFill(c):this._textBackground.setSolidFill("#FFFFFF"),this._textBackground.setMouseEnabled(!1),this._shape.addChild(this._textBackground),this._addChildText(this._text)}}this.hasChildren()?this._shape.setAriaRole("group"):this._shape.setAriaRole("img"),this.UpdateAriaLabel()}},f.prototype.setSelected=function(e){if(f.superclass.setSelected.call(this,e),this._shape){var i=this.getView().getOptions().nodeDefaults,s=i.header;if(this.isSelected()){var n=this._x,o=this._y+f._LINE_FUDGE_FACTOR,a=Math.max(this._width-f._LINE_FUDGE_FACTOR,0),r=Math.max(this._height-f._LINE_FUDGE_FACTOR,0);"safari"!==t.Agent.browser&&"blink"!==t.Agent.engine||(o-=f._LINE_FUDGE_FACTOR),this._removeChildShape(this._selectionOuter),this._removeChildShape(this._selectionInner),this._selectionOuter=null,this._selectionInner=null,this._selectionOuter=new t.Rect(this.getView().getCtx(),n,o,a,r),this._selectionOuter.setMouseEnabled(!1),this._selectionOuter.setFill(null),this._selectionOuter.setPixelHinting(!0),this._shape.addChild(this._selectionOuter);var h=Math.max(a-2,0),_=Math.max(r-2,0);this._selectionInner=new t.Rect(this.getView().getCtx(),n+1,o+1,h,_),this._selectionInner.setMouseEnabled(!1),this._selectionInner.setFill(null),this._selectionInner.setPixelHinting(!0),this._shape.addChild(this._selectionInner),this._textStyle==f.TEXT_STYLE_HEADER?(this.IsHover||this.isShowingKeyboardFocusEffect()?this._innerShape.setSolidFill(s.hoverBackgroundColor):(this._innerShape.setSolidFill(s.selectedBackgroundColor),this._text&&this.ApplyHeaderTextStyle(this._text,"_selectedLabelStyle")),this._selectionOuter.setSolidStroke(s.selectedOuterColor),this._selectionInner.setSolidStroke(s.selectedInnerColor),t.Agent.isTouchDevice()&&(this._isolateButton=this._createIsolateRestoreButton(this._shape))):(this._selectionOuter.setSolidStroke(i.selectedOuterColor),this._selectionInner.setSolidStroke(i.selectedInnerColor),"safari"!==t.Agent.browser&&"firefox"!==t.Agent.browser&&this._shape.addDrawEffect(l.__NODE_SELECTED_SHADOW),this.getView().__moveToSelectedLayer(this._shape))}else if(this._removeChildShape(this._selectionInner),this._selectionInner=null,t.Agent.isTouchDevice()&&this._removeIsolateRestoreButton(),this._textStyle==f.TEXT_STYLE_HEADER)this.IsHover||this.isShowingKeyboardFocusEffect()?this._innerShape.setSolidFill(s.hoverBackgroundColor):(this.ApplyHeaderStyle(this._shape,this._innerShape),this._text&&(this.isDrillReplaceEnabled()?this.ApplyHeaderTextStyle(this._text,"_drillableLabelStyle"):this.ApplyHeaderTextStyle(this._text,"labelStyle"))),this._selectionOuter&&(this.IsHover||this.isShowingKeyboardFocusEffect()?this._selectionOuter.setSolidStroke(s.hoverOuterColor):(this._removeChildShape(this._selectionOuter),this._selectionOuter=null));else{this._shape.removeAllDrawEffects(),this._selectionOuter&&(this._removeChildShape(this._selectionOuter),this._selectionOuter=null);var d=this.GetParent();d&&d._childNodeGroup&&d._childNodeGroup.addChild(this._shape)}}},f.prototype.showHoverEffect=function(){if(this._shape&&this._hasLayout){var e,i,s,n,o,a=this.getView().getOptions().nodeDefaults,r=a.header,l=this._view.__getLastIsolatedNode();if(null==l||l==this||this.isDescendantOf(l))this._textStyle==f.TEXT_STYLE_HEADER?(this._innerShape.setSolidFill(r.hoverBackgroundColor),this._selectionOuter||(i=this._x,s=this._y,n=this._width-f._LINE_FUDGE_FACTOR,o=this._height-f._LINE_FUDGE_FACTOR,this._selectionOuter=new t.Rect(this.getView().getCtx(),i,s,n,o),this._selectionOuter.setMouseEnabled(!1),this._selectionOuter.setFill(null),this._selectionOuter.setPixelHinting(!0),this._shape.addChild(this._selectionOuter)),this._selectionOuter.setSolidStroke(this.isSelected()?r.selectedOuterColor:r.hoverOuterColor),i=this._x+f.GROUP_HOVER_INNER_WIDTH/2,s=this._y+this._titleBarHeight+f.GROUP_HOVER_INNER_WIDTH/2,n=this._width-f.GROUP_HOVER_INNER_WIDTH-f._LINE_FUDGE_FACTOR,o=this._height-this._titleBarHeight-f.GROUP_HOVER_INNER_WIDTH-f._LINE_FUDGE_FACTOR,e=new t.Stroke(r.hoverInnerColor,f.GROUP_HOVER_INNER_OPACITY,f.GROUP_HOVER_INNER_WIDTH),this._text&&(this.isDrillReplaceEnabled()?this.ApplyHeaderTextStyle(this._text,"_drillableHoverLabelStyle"):this.ApplyHeaderTextStyle(this._text,"_hoverLabelStyle"))):(i=this._x+f.NODE_SELECTION_WIDTH/2,s=this._y+f.NODE_SELECTION_WIDTH/2,n=this._width-f.NODE_SELECTION_WIDTH-f._LINE_FUDGE_FACTOR,o=this._height-f.NODE_SELECTION_WIDTH-f._LINE_FUDGE_FACTOR,e=new t.Stroke(a.hoverColor,f.NODE_HOVER_OPACITY,f.NODE_SELECTION_WIDTH)),o=Math.max(o,0),n=Math.max(n,0),this.getView().__showHoverEffect(i,s,n,o,e)}},f.prototype.hideHoverEffect=function(){if(this._shape&&this._hasLayout){var t=this.getView().getOptions().nodeDefaults.header;this._textStyle==f.TEXT_STYLE_HEADER&&(this.isSelected()?(this._innerShape.setSolidFill(t.selectedBackgroundColor),this._selectionOuter.setSolidStroke(t.selectedOuterColor),this._text&&(this.isDrillReplaceEnabled()?this.ApplyHeaderTextStyle(this._text,"_drillableSelectedLabelStyle"):this.ApplyHeaderTextStyle(this._text,"_selectedLabelStyle"))):(this.ApplyHeaderStyle(this._shape,this._innerShape),this._selectionOuter&&(this._shape.removeChild(this._selectionOuter),this._selectionOuter=null),this._text&&(this.isDrillReplaceEnabled()?this.ApplyHeaderTextStyle(this._text,"_drillableLabelStyle"):this.ApplyHeaderTextStyle(this._text,"labelStyle")))),this.getView().__hideHoverEffect()}},f.prototype.highlight=function(t,e){this.hasChildren()?(this._text&&this._text.setAlpha(e),this._textStyle==f.TEXT_STYLE_HEADER&&this._bHeaderUseNodeColor&&this._innerShape&&this._innerShape.setAlpha(e)):f.superclass.highlight.call(this,t,e)},f.prototype.isIsolateEnabled=function(){return"off"!=this._isolate&&this._textStyle==f.TEXT_STYLE_HEADER},f.prototype.getNextNavigable=function(e){var i,s;if(e.type==t.MouseEvent.CLICK)return f.superclass.getNextNavigable.call(this,e);if((i=e.keyCode)==t.KeyboardEvent.SPACE&&e.ctrlKey)return this;if(i==t.KeyboardEvent.UP_ARROW&&e.altKey||i==t.KeyboardEvent.CLOSE_BRACKET)(a=this.GetParent())&&a.getId()!=this.getView().getRootNode().getId()?(s=a,a.MarkAsLastVisitedChild()):s=this;else if(i==t.KeyboardEvent.DOWN_ARROW&&e.altKey||i==t.KeyboardEvent.OPEN_BRACKET)s=this.GetLastVisitedChild()||(this.hasChildren()?this.getView().__getDefaultNavigable(this.getChildNodes()):this);else{var n=this.getView().__getLastIsolatedNode(),o=0;if(n)if(this==n)o=0;else{var a=this.GetParent();for(o=1;n!=a;)o++,a=a.GetParent()}else{for(n=this;n.GetParent();)n=n.GetParent();o=this.GetDepth()}var r=this.GetNodesAtDepth(n,o);s=t.KeyboardHandler.getNextNavigable(this,e,r)}return s.MarkAsLastVisitedChild(),s},f.prototype.getKeyboardBoundingBox=function(e){return new t.Rectangle(this._x,this._y,this._width,this._height)},f.prototype.getTargetElem=function(){return this._shape?this._shape.getElem():null},f.prototype.setZIndex=function(t){this._zIndex=t},f.prototype.setLayoutParams=function(e,i,s,n){if(!(s<=0||n<=0)){if(this._hasLayout=!0,this._oldState=this.GetAnimationParams(),this._x=e,this._y=i,this._width=s||0,this._height=n||0,this.hasChildren()?this._textStyle=this._groupLabelDisplay:this._textStyle=this._labelDisplay,this._textStr||(this._textStyle=f.TEXT_STYLE_OFF),this._textStyle==f.TEXT_STYLE_HEADER){this._titleBarHeight=f._MIN_TITLE_BAR_HEIGHT;var o=new t.OutputText(this.getView().getCtx(),this._textStr);o.setFontSize(this.GetTextSize()),this.ApplyHeaderTextStyle(o,"labelStyle");var a=o.getDimensions().h;o=null,this._titleBarHeight=Math.max(this._titleBarHeight,a),this.isIsolateEnabled()&&(this._titleBarHeight=Math.max(this._titleBarHeight,f._MIN_TITLE_BAR_HEIGHT_ISOLATE));var r=this._x,l=this._y+this._titleBarHeight,h=this._width,_=this._height-this._titleBarHeight;if(h>=0&&_>=0)return new t.Rectangle(r,l,h,_);this._textStyle=null}return new t.Rectangle(this._x,this._y,this._width,this._height)}},f.prototype.getNodeUnderPoint=function(t,e){if(this.contains(t,e)||!this._hasLayout){for(var i=this.getChildNodes(),s=0;s<i.length;s++)if(i[s].contains(t,e))return i[s].getNodeUnderPoint(t,e);if(this._hasLayout)return this}return null},f.prototype.contains=function(t,e){return t>=this._x&&t<=this._x+this._width&&e>=this._y&&e<=this._y+this._height},f.prototype.GetAnimationParams=function(){var e=t.ColorUtils.getRed(this._color),i=t.ColorUtils.getGreen(this._color),s=t.ColorUtils.getBlue(this._color);return[this._x,this._y,this._width,this._height,e,i,s,this.hasChildren()?0:Math.random()]},f.prototype.SetAnimationParams=function(e){this.setLayoutParams(e[0],e[1],e[2],e[3]);var i=Math.round(e[4]),s=Math.round(e[5]),n=Math.round(e[6]);this._color=t.ColorUtils.makeRGB(i,s,n),this._updateShapes()},f.prototype.getIsolateAnimation=function(){for(var t=[this._getIsolateAnimation()],e=this.getDescendantNodes(),i=0;i<e.length;i++)t.push(e[i]._getIsolateAnimation());return t},f.prototype._getIsolateAnimation=function(){if(this._oldState){var e=new t.CustomAnimation(this.getView().getCtx(),this,f._ANIMATION_ISOLATE_DURATION);return e.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this.GetAnimationParams,this.SetAnimationParams,this.GetAnimationParams()),this.SetAnimationParams(this._oldState),e}return null},f.prototype.animateUpdate=function(t,e){return this._removeAllNodeContent(),0==this.GetDepth()||e._hasLayout&&e._width>0&&e._height>0?f.superclass.animateUpdate.call(this,t,e):this.animateInsert(t)},f.prototype.animateInsert=function(t,e){this._removeAllNodeContent(),f.superclass.animateInsert.call(this,t,e)},f.prototype.animateDelete=function(t,e){this._removeAllNodeContent(),f.superclass.animateDelete.call(this,t,e)},f.prototype._createShapeNode=function(){var e,i=this.getView().getCtx(),s="gaps"==this.getView().getOptions().nodeSeparators;if(this._textStyle==f.TEXT_STYLE_HEADER){if(s){var n=this._getGeometriesWithGaps();e=new t.Rect(i,n._shape.x,n._shape.y,n._shape.w,n._shape.h),this._innerShape=new t.Rect(i,n._innerShape.x,n._innerShape.y,n._innerShape.w,n._innerShape.h),this._backgroundShape=new t.Rect(i,n._backgroundShape.x,n._backgroundShape.y,n._backgroundShape.w,n._backgroundShape.h),this._backgroundShape.setSolidFill("#FFFFFF"),e.addChild(this._backgroundShape)}else e=new t.Rect(i,this._x,this._y,this._width,this._height),this._innerShape=new t.Rect(i,this._x+1,this._y+1,this._width-2,this._height-2);this.ApplyHeaderStyle(e,this._innerShape),this._innerShape.setMouseEnabled(!1),e.addChild(this._innerShape),this.__isIsolated()&&(this._isolateButton=this._createIsolateRestoreButton(e))}else{var o=this.GetFill();if(s){n=this._getGeometriesWithGaps();(e=new t.Rect(i,n._shape.x,n._shape.y,n._shape.w,n._shape.h)).setFill(this.hasChildren()?t.SolidFill.invisibleFill():o)}else{if(e=new t.Rect(i,this._x,this._y,this._width,this._height),(this.getView().__getNodeCount()<1e3||!t.Agent.isTouchDevice())&&this._width>=f.MIN_SIZE_FOR_BORDER&&this._height>=f.MIN_SIZE_FOR_BORDER){new t.Stroke(f.DEFAULT_NODE_TOP_BORDER_COLOR),new t.Stroke(f.DEFAULT_NODE_BOTTOM_BORDER_COLOR,f.DEFAULT_NODE_BORDER_OPACITY);this.hasPattern()&&new t.Stroke(this._color,f.DEFAULT_NODE_PATTERN_BORDER_OPACITY);var a=this.getColor(),r=t.ColorUtils.interpolateColor(f.DEFAULT_NODE_TOP_BORDER_COLOR,a,1-f.DEFAULT_NODE_BORDER_OPACITY),l=t.ColorUtils.interpolateColor(f.DEFAULT_NODE_BOTTOM_BORDER_COLOR,a,1-f.DEFAULT_NODE_BORDER_OPACITY),h=Math.min(this._width,this._height);h>=4?(e.setSolidFill(l),this._topLeftShape=new t.Rect(i,this._x,this._y,this._width-1,this._height-1),this._topLeftShape.setSolidFill(r),this._topLeftShape.setMouseEnabled(!1),e.addChild(this._topLeftShape),this._fillShape=new t.Rect(i,this._x+1,this._y+1,this._width-2,this._height-2),this._fillShape.setFill(o),this._fillShape.setMouseEnabled(!1),e.addChild(this._fillShape)):h>=2?(e.setSolidFill(l),this._fillShape=new t.Rect(i,this._x,this._y,this._width-1,this._height-1),this._fillShape.setFill(o),this._fillShape.setMouseEnabled(!1),e.addChild(this._fillShape)):e.setFill(o)}else e.setFill(o)}e.setStyle(this._style),e.setClassName(this._className)}return this.getView().getEventManager().associate(e,this),this.isSelectable()?e.setSelectable(!0):this.isDrillReplaceEnabled()?e.setCursor("pointer"):e.setCursor("default"),e.zIndex=this._zIndex,e},f.prototype._createIsolateRestoreButton=function(e){if(this._textStyle!=f.TEXT_STYLE_HEADER||!this.isIsolateEnabled())return null;var i=null,s=this._x,n=this._x+this._width-f._LINE_FUDGE_FACTOR,o=this._y+f._LINE_FUDGE_FACTOR,a=this._y+this._titleBarHeight;if(n-s-2*f._ISOLATE_GAP_SIZE>f._ISOLATE_ICON_SIZE){var r;if(i=this.__isIsolated()?this._getRestoreButton():this._getIsolateButton(),r=t.Agent.isRightToLeft(e.getCtx())?s+f._ISOLATE_GAP_SIZE:n-f._ISOLATE_ICON_SIZE-f._ISOLATE_GAP_SIZE,i.setTranslate(r,(a+o-f._ISOLATE_ICON_SIZE)/2),e.addChild(i),t.Agent.isTouchDevice()){var l=new t.Rect(e.getCtx(),-f._ISOLATE_TOUCH_BUFFER,-f._ISOLATE_TOUCH_BUFFER,f._ISOLATE_ICON_SIZE+2*f._ISOLATE_TOUCH_BUFFER,f._ISOLATE_ICON_SIZE+2*f._ISOLATE_TOUCH_BUFFER);l.setInvisibleFill(),i.addChild(l)}this.getView().getEventManager().associate(i,this)}return i},f.prototype._removeIsolateRestoreButton=function(){this._isolateButton&&(this._removeChildShape(this._isolateButton),this._isolateButton=null)},f.prototype._createTextNode=function(e){var i=t.Agent.isRightToLeft(e.getCtx());if(!this._textStr||!e||!this._textStyle||this._textStyle==f.TEXT_STYLE_OFF)return null;var s=this._height;if((p=this.GetTextSize())>s)return null;var n=this._textStyle==f.TEXT_STYLE_NODE?this._labelHalign:this._headerHalign;i&&("start"==n?n="end":"end"==n&&(n="start"));var o,a=this._width-(f.TEXT_BUFFER_HORIZ+f.MIN_TEXT_BUFFER),r=0;if(this.isIsolateEnabled()&&(r=f._ISOLATE_ICON_SIZE+f._ISOLATE_GAP_SIZE,a-="center"==n?2*r:r),a<=0)return null;var l=this.getMergedLabelTextStyle();if(o=this._textStyle==f.TEXT_STYLE_NODE&&s>2*p&&"nowrap"!=l.getStyle(t.CSSStyle.WHITE_SPACE)&&t.TextUtils.getTextStringWidth(this.getView().getCtx(),this._textStr,l)>a?new t.MultilineText(this.getView().getCtx(),this._textStr):new t.OutputText(this.getView().getCtx(),this._textStr),"start"==n?(i?o.setX(this._x+f.TEXT_BUFFER_HORIZ+r):o.setX(this._x+f.TEXT_BUFFER_HORIZ),o.alignLeft()):"center"==n?(o.setX(this._x+this._width/2),o.alignCenter()):"end"==n&&(i?o.setX(this._x+this._width-f.TEXT_BUFFER_HORIZ):o.setX(this._x+this._width-f.TEXT_BUFFER_HORIZ-r),o.alignRight()),this._textStyle==f.TEXT_STYLE_NODE)this.ApplyLabelTextStyle(o),s=this._height-2*f.TEXT_BUFFER_VERT;else if(this._textStyle==f.TEXT_STYLE_HEADER){var _="safari"===t.Agent.browser||"blink"===t.Agent.engine?f._LINE_FUDGE_FACTOR:0;o.setY(this._y+f.DEFAULT_HEADER_BORDER_WIDTH+this._titleBarHeight/2+_),o.alignMiddle(),this.ApplyHeaderTextStyle(o,"labelStyle")}if(null!=o){if(this._textStyle==f.TEXT_STYLE_HEADER&&this.isDrillReplaceEnabled()){this.ApplyHeaderTextStyle(o,"_drillableLabelStyle"),o.setCursor("pointer");var d=new h(this,this.getId(),null,this.getDatatip.bind(this),this.getDatatipColor.bind(this));d.setDrillable(!0),this.getView().getEventManager().associate(o,d)}else o.setMouseEnabled(!1);var u=this.getView().getOptions().nodeDefaults.labelMinLength,c=t.TextUtils.fitText(o,a,s,e,u);if(this._textStyle==f.TEXT_STYLE_NODE){var p=o.getDimensions().h;"top"==this._labelValign?o.setY(this._y+f.TEXT_BUFFER_VERT):"center"==this._labelValign?o.setY(this._y+this._height/2-p/2):"bottom"==this._labelValign&&o.setY(this._y+this._height-f.TEXT_BUFFER_VERT-p)}return c?o:null}},f.prototype.ApplyHeaderStyle=function(e,i){var s=this.getView().getOptions().nodeDefaults.header;if(this._bHeaderUseNodeColor){var n=this.getColor();i.setSolidFill(n);var o=t.ColorUtils.interpolateColor(s.borderColor,n,1-f.DEFAULT_HEADER_WITH_NODE_COLOR_ALPHA);e.setSolidFill(o)}else e.setSolidFill(s.borderColor),i.setSolidFill(s.backgroundColor);this._backgroundShape&&this._backgroundShape.setFill(i.getFill())},f.prototype.ApplyHeaderTextStyle=function(e,i){var s=[];this.GetDepth()<=1&&this.getView().__getMaxDepth()>=3&&s.push(new t.CSSStyle("font-weight:bold;")),s.push(this.getView().getOptions().nodeDefaults.header._labelStyle),s.push(this.getView().getOptions().nodeDefaults.header[i]),this._headerLabelStyle&&s.push(this._headerLabelStyle),s.push(new t.CSSStyle(this.getView().getOptions().nodeDefaults.header.labelStyle)),!this._bHeaderUseNodeColor||"labelStyle"!=i&&"_drillableLabelStyle"!=i||s.push(new t.CSSStyle("color: "+l.GetNodeTextColor(this))),e.setCSSStyle(t.CSSStyle.mergeStyles(s))},f.prototype.handleMouseOver=function(){this._isolateButton||t.Agent.isTouchDevice()||(this._isolateButton=this._createIsolateRestoreButton(this._shape)),f.superclass.handleMouseOver.call(this)},f.prototype.handleMouseOut=function(){!0===this.__isIsolated()||t.Agent.isTouchDevice()||this._removeIsolateRestoreButton(),f.superclass.handleMouseOut.call(this)},f.prototype._getGeometriesWithGaps=function(){var e={};if(this._textStyle==f.TEXT_STYLE_HEADER){e._shape=new t.Rectangle(this._x,this._y,this._width-1,this._titleBarHeight),e._innerShape=new t.Rectangle(this._x+1,this._y+1,this._width-3,this._titleBarHeight-1);var i=Math.max(this._width-1,0),s=Math.max(this._height-this._titleBarHeight-1,0);e._backgroundShape=new t.Rectangle(this._x,this._y+this._titleBarHeight,i,s)}else if(this.hasChildren())e._shape=new t.Rectangle(this._x,this._y,0,0);else{var n=Math.max(this._width-1,0),o=Math.max(this._height-1,0);e._shape=new t.Rectangle(this._x,this._y,n,o)}return e},f.prototype._updateShapes=function(){if(this._shape){var t=this.getView().getOptions();if("gaps"==t.nodeSeparators){var e=this._getGeometriesWithGaps();this._shape.setRect(e._shape),this._innerShape&&this._innerShape.setRect(e._innerShape),this._backgroundShape&&this._backgroundShape.setRect(e._backgroundShape)}else this._shape.setRect(this._x,this._y,this._width,this._height),this._innerShape&&this._innerShape.setRect(this._x+1,this._y+1,this._width-2,this._height-2);(this._textStyle!=f.TEXT_STYLE_HEADER||this._bHeaderUseNodeColor)&&this._shape.setFill(this.GetFill()),this.isSelected()&&this.setSelected(!1),this._removeChildShape(this._fillShape),this._removeChildShape(this._topLeftShape),this._fillShape=null,this._topLeftShape=null,this._removeIsolateRestoreButton(),this.GetTemplate()?(this._removeChildShape(this._contentRoot),this._contentRoot=null):t.nodeContent&&t.nodeContent.renderer&&this._textStyle!=f.TEXT_STYLE_HEADER?this._removeAllNodeContent():(this._removeChildShape(this._textBackground),this._textBackground=null,this._text&&this._text.getParent().removeChild(this._text),this._text=this._createTextNode(this._shape))}},f.prototype.getDropSiteFeedback=function(){return this._shape?new t.Rect(this.getView().getCtx(),this._shape.getX(),this._shape.getY(),this._shape.getWidth(),this._shape.getHeight()):null},f.prototype._addChildText=function(t){this._textStyle==f.TEXT_STYLE_NODE&&this.hasChildren()?this.getView().__getGroupTextLayer().addChild(t):this._shape.addChild(t)},f.prototype._removeChildShape=function(t){t&&this._shape.removeChild(t)},f.prototype._getIsolateButton=function(){return this._getButtonHelper("isolate",this.__isolateNode)},f.prototype._getRestoreButton=function(){return this._getButtonHelper("restore",this.__restoreNode)},f.prototype._getButtonHelper=function(e,i){var s=this.getView().getCtx(),n=this.getView().getOptions()._resources[e],o=t.ToolkitUtils.getIconStyle(s,n),a=new t.IconButton(s,"borderless",{style:o,size:f._ISOLATE_ICON_SIZE});return a.addEvtListener(t.MouseEvent.CLICK,i,!1,this),a},f.prototype.__isIsolated=function(){return this._bIsolated},f.prototype.__isolateNode=function(t){this._bIsolated=!0,this._removeAllNodeContent(),this.hideHoverEffect(),this.getView().__isolate(this),this._removeIsolateRestoreButton(),this.UpdateAriaLabel(),t&&t.stopPropagation()},f.prototype.__restoreNode=function(t){this._bIsolated=!1,this.hideHoverEffect(),this.getView().__restore(),this._removeIsolateRestoreButton(),this.UpdateAriaLabel(),t&&t.stopPropagation()},f.prototype.getIsolateRestoreButton=function(){return this._isolateButton},f.prototype.getDatatip=function(e,i,s){return e&&e instanceof t.IconButton?null:f.superclass.getDatatip.call(this,e,i,s)},f.prototype.getDatatipColor=function(e){return e&&e instanceof t.IconButton?null:f.superclass.getDatatipColor.call(this,e)},f.prototype.getTooltip=function(e){return e&&e instanceof t.IconButton?this.getView().getOptions().translations[this.__isIsolated()?"tooltipRestore":"tooltipIsolate"]:null},f.prototype.getAriaLabel=function(){var e=this.getView().getOptions().translations,i=[];return this.isSelectable()&&i.push(e[this.isSelected()?"stateSelected":"stateUnselected"]),this.__isIsolated()&&i.push(e.stateIsolated),this.isDrillReplaceEnabled()&&i.push(e.stateDrillable),t.Displayable.generateAriaLabel(this.getShortDesc(),i)},f.prototype.UpdateAriaLabel=function(){!t.Agent.deferAriaCreation()&&this._shape&&this._shape.setAriaProperty("label",this.getAriaLabel())},f.prototype._createCustomNodeContent=function(){var e=this.getView(),i=e.getOptions(),s=this.getId();this._removeNodeContent(s);var n=i.nodeContent.renderer;if(!n||this.hasChildren())return!1;var o=e.getIsolatedNodes();if(o.length<=0||this.isDescendantOf(o[e._isolatedNodes.length-1])){var a,r=e.getCtx(),l=i=this.getOptions();i._noTemplate?(a=i._itemData,l=i._itemData):i._itemData&&(a=i._itemData,l=i=t.JsonUtils.clone(i),delete i._itemData);var h={bounds:{x:this._x,y:this._y,width:this._width-f.DEFAULT_NODE_BORDER_WIDTH,height:this._height-f.DEFAULT_NODE_BORDER_WIDTH},id:s,data:l,itemData:a,component:i._widgetConstructor};h=r.fixRendererContext(h);var _=r.getContainer(),d=n(h);if(!d)return;var u=r.createOverlayDiv();Array.isArray(d)?d.forEach(function(t){u.appendChild(t)}):u.appendChild(d),e.getNodeContent()[s]=u,_.appendChild(u);var c=r.getOverlayAttachedCallback();c&&c(u)}return!0},f.prototype._removeNodeContent=function(t){var e=this.getView(),i=e.getNodeContent(),s=i[t];s&&(e.getCtx().getContainer().removeChild(s),delete i[t])},f.prototype._removeAllNodeContent=function(){for(var t in this.getView().getNodeContent())this._removeNodeContent(t)};var y=function(){this.Init()};t.Obj.createSubclass(y,t.Obj),y._GROUP_GAP=2,y.prototype.Init=function(){this._zIndex=0},y.prototype.layout=function(t,e,i,s,n,o,a){},y.prototype.setNodeBounds=function(e,i,s,n,o,a){if(e.setZIndex(this._zIndex),this._zIndex++,!a||!e.hasChildren()){var r=this.getGapSize(e.getView(),e.GetDepth()),l=Math.round(i+r),h=Math.round(s+r),_=Math.round(i+n-r)-l,d=Math.round(s+o-r)-h,u=e.setLayoutParams(l,h,_,d);if(u)return u}return new t.Rectangle(i,s,n,o)},y.prototype.getGapSize=function(t,e){var i=t.getOptions().groupGaps;return"outer"==i?1==e&&t.__getMaxDepth()>=2?y._GROUP_GAP:0:"all"==i&&e<t.__getMaxDepth()?y._GROUP_GAP:0};var S=function(){this.Init()};t.Obj.createSubclass(S,y),S.prototype.layout=function(t,e,i,s,n,o,a){var r=!a;this._layout(e,i,s,n,o,r)},S.prototype._layout=function(e,i,s,n,o,a){var r=this.setNodeBounds(e,i,s,n,o,a),l=e.getChildNodes();if(null!=l&&l.length>0){this._calcPixelSize(l,r.w*r.h),l=l.slice(0).sort(function(t,e){return t.getSize()-e.getSize()});var h=Math.min(r.w,r.h),_=new t.Rectangle(r.x,r.y,r.w,r.h);this._squarify(l,new Array,h,_,1/0)}},S.prototype._calcPixelSize=function(t,e){var i=0,s=0;for(s=0;s<t.length;s++)i+=t[s].getSize()>0?t[s].getSize():0;var n=0==e?0:e/i;for(s=0;s<t.length;s++){var o=t[s];o.__pxSize=o.getSize()*n}},S.prototype._squarify=function(t,e,i,s,n){if(null!=t&&0!=t.length)for(;t.length>0;){var o=t.pop();if(o.__pxSize<0)return void this._layoutRow(e,i,s);e.push(o);var a=this._getWorst(e,i);if(a>n)return t.push(o),e.pop(),s=this._layoutRow(e,i,s),void this._squarify(t,new Array,Math.min(s.w,s.h),s,1/0);if(0==t.length)return void this._layoutRow(e,i,s);n=a}else this._layoutRow(e,i,s)},S.prototype._getWorst=function(t,e){for(var i=0,s=1/0,n=-1/0,o=0;o<t.length;o++)i+=t[o].__pxSize,s=Math.min(s,t[o].__pxSize),n=Math.max(n,t[o].__pxSize);var a=i*i,r=e*e;return Math.max(r*n/a,a/(r*s))},S.prototype._layoutRow=function(e,i,s){var n,o=0;for(n=0;n<e.length;n++)o+=e[n].__pxSize;var a,r,l=s.x,h=s.y;if(i==s.w){for(r=0==i?0:o/i,n=0;n<e.length;n++)a=e[n].__pxSize/r,this._layout(e[n],l,h,a,r,!1),l+=a;return new t.Rectangle(s.x,s.y+r,s.w,s.h-r)}for(a=0==i?0:o/i,n=0;n<e.length;n++)r=e[n].__pxSize/a,this._layout(e[n],l,h,a,r,!1),h+=r;return new t.Rectangle(s.x+a,s.y,s.w-a,s.h)};var E=function(t){this.Init(),this._isHoriz=t};t.Obj.createSubclass(E,y),E.prototype.layout=function(t,e,i,s,n,o,a){var r=!a;this._layout(this._isHoriz,t,e,i,s,n,o,r)},E.prototype._layout=function(e,i,s,n,o,a,r,l){var h=i.getOptions(),_=this.setNodeBounds(s,n,o,a,r,l),d=s.getChildNodes();if(null!=d){var u,c=_.x,p=_.y,g=_.w,f=_.h,y=0;for(u=0;u<d.length;u++)y+=d[u].getSize()>0?d[u].getSize():0;for("on"==h.sorting&&(d=d.slice(0)).sort(function(t,e){return e.getSize()-t.getSize()}),e&&t.Agent.isRightToLeft(i.getCtx())&&(d=d.slice(0).reverse()),u=0;u<d.length;u++){var S=d[u];if(!(S.getSize()<=0)){var E=S.getSize()/y;e?g=_.w*E:f=_.h*E,this._layout(!e,i,S,c,p,g,f,!1),e?c+=g:p+=f}}}};var v=function(t){this.Init(t)};t.Obj.createSubclass(v,u),v.prototype.isNavigationEvent=function(e){var i=v.superclass.isNavigationEvent.call(this,e);if(!i){var s=e.keyCode;s!=t.KeyboardEvent.OPEN_BRACKET&&s!=t.KeyboardEvent.CLOSE_BRACKET||(i=!0)}return i};var C=function(t,e,i,s){r.call(this,t,e,i,s)};t.Obj.createSubclass(C,r),C.prototype.ProcessKeyboardEvent=function(e){var i=!0;if(e.keyCode==t.KeyboardEvent.ENTER&&e.ctrlKey){var s=this.getFocus();s.isIsolateEnabled()&&(s.__isIsolated()?s.__restoreNode():s.__isolateNode()),t.EventManager.consumeEvent(e)}else i=C.superclass.ProcessKeyboardEvent.call(this,e);return i};var b=function(t){this.Init({alta:b.SKIN_ALTA},t)};t.Obj.createSubclass(b,c),b.SKIN_ALTA={groupGaps:"outer",nodeDefaults:{header:{backgroundColor:"#FFFFFF",borderColor:"#d6dfe6",hoverBackgroundColor:"#ebeced",hoverOuterColor:"#ebeced",hoverInnerColor:"#d6d7d8",isolate:"auto",labelHalign:"start",_labelStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_12+"color:#252525;"),selectedBackgroundColor:"#dae9f5",selectedInnerColor:"#FFFFFF",selectedOuterColor:"#000000",useNodeColor:"off",_hoverLabelStyle:new t.CSSStyle("color:#252525;"),_selectedLabelStyle:new t.CSSStyle("color:#252525;"),_drillableLabelStyle:new t.CSSStyle("color:#145c9e;"),_drillableHoverLabelStyle:new t.CSSStyle("color:#145c9e;"),_drillableSelectedLabelStyle:new t.CSSStyle("color:#145c9e;")},hoverColor:"#ebeced",groupLabelDisplay:"header",labelDisplay:"node",labelHalign:"center",labelValign:"center",selectedInnerColor:"#FFFFFF",selectedOuterColor:"#000000"},nodeSeparators:"gaps",nodeContent:{}},t.Sunburst=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.Sunburst,o),t.Sunburst._ROTATION_SHAPE_RADIUS=15,t.Sunburst._ROTATION_SHAPE_RADIUS_TOUCH=60,t.Sunburst._ANIMATION_TYPE_FAN="fan",t.Sunburst._BACKGROUND_INLINE_DEFAULT="",t.Sunburst._BUFFER_SPACE=3,t.Sunburst._MIN_BUFFER_SPACE=2,t.Sunburst.LARGE_DATASET_THRESHOLD=1e3,t.Sunburst.newInstance=function(e,i,s){return new t.Sunburst(e,i,s)},t.Sunburst.prototype.Init=function(e,i,s){t.Sunburst.superclass.Init.call(this,e,i,s),this.Defaults=new R(e),this._angleExtent=2*Math.PI,this.setId("sunburst")},t.Sunburst.prototype.ApplyParsedProperties=function(e){t.Sunburst.superclass.ApplyParsedProperties.call(this,e);var i=this.getOptions();"ie"===t.Agent.browser||"edge"===t.Agent.browser?this._rotateCursor="url("+i._resources.rotateCursor+"), auto":this._rotateCursor="url("+i._resources.rotateCursor+") 8 8, auto",this._startAngle=(360-i.startAngle)*T.TWO_PI/360,this._startAngle>Math.PI&&(this._startAngle-=T.TWO_PI),"auto"==i.animationOnDisplay&&(i.animationOnDisplay="fan")},t.Sunburst.prototype.Layout=function(e){var i=Math.max(Math.ceil(t.Sunburst._BUFFER_SPACE*Math.min(e.w,e.h)/400),t.Sunburst._MIN_BUFFER_SPACE);e.x+=i,e.y+=i,e.w-=2*i,e.h-=2*i,this.LayoutBreadcrumbs(e),this.LayoutLegend(e),this._totalRadius=Math.floor(Math.min(e.w,e.h)/2),this._root&&A.layout(this._totalRadius,this._root,this._startAngle,this._angleExtent,this.getOptions().sorting)},t.Sunburst.prototype.Render=function(e,i){if(this.RenderBackground(e,t.Sunburst._BACKGROUND_INLINE_DEFAULT),this.RenderBreadcrumbs(e),this.RenderLegend(e),this._translatePt=new t.Point(i.x+i.w/2,i.y+i.h/2),this.__isRotationEnabled()&&this.HasValidData()){var s=t.Agent.isTouchDevice()?t.Sunburst._ROTATION_SHAPE_RADIUS_TOUCH:t.Sunburst._ROTATION_SHAPE_RADIUS,n=new t.Circle(this.getCtx(),i.x+i.w/2,i.y+i.h/2,this._totalRadius+s);n.setInvisibleFill(),n.setCursor(this._rotateCursor),e.addChild(n),this.getEventManager().associate(n,new h(null,O.ROTATION_ID))}var o=new t.Container(this.getCtx());if(o.setTranslate(this._translatePt.x,this._translatePt.y),e.addChild(o),this.HasValidData()){var a=new t.Container(this.getCtx());o.addChild(a),this._root.render(a),this.UpdateAriaNavigation(this._root),this._selectedLayer=new t.Container(this.getCtx()),o.addChild(this._selectedLayer),this._hoverLayer=new t.Container(this.getCtx()),o.addChild(this._hoverLayer)}else this.RenderEmptyText(e)},t.Sunburst.prototype.CreateEventManager=function(t,e,i,s){return new O(t,e,i,s)},t.Sunburst.prototype.GetDisplayAnimation=function(e,i){if(this.getOptions().animationOnDisplay===t.Sunburst._ANIMATION_TYPE_FAN&&this.HasValidData()){this._animateAngleExtent(0);var s=new t.CustomAnimation(this.getCtx(),this,this.AnimationDuration);return s.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.__getAngleExtent,this._animateAngleExtent,2*Math.PI),s}return t.Sunburst.superclass.GetDisplayAnimation.call(this,e,i)},t.Sunburst.prototype.GetDeleteContainer=function(){var e=t.Sunburst.superclass.GetDeleteContainer.call(this);return e&&e.setTranslate(this._translatePt.x,this._translatePt.y),e},t.Sunburst.prototype.OnAnimationEnd=function(){if(!this.AnimationStopped){this._container.removeChildren();var e=new t.Rectangle(0,0,this.Width,this.Height);this.Layout(e),this.Render(this._container,e);for(var i=this._selectionHandler?this._selectionHandler.getSelection():new Array,s=0;s<i.length;s++)i[s].setSelected(!0)}this._angleExtent<2*Math.PI&&this._animateAngleExtent(2*Math.PI),t.Sunburst.superclass.OnAnimationEnd.call(this)},t.Sunburst.prototype.__moveToHoverLayer=function(t){this._hoverLayer.addChild(t)},t.Sunburst.prototype.__moveToSelectedLayer=function(e){this._selectedLayer.addChild(e),"safari"!==t.Agent.browser&&"firefox"!==t.Agent.browser&&(this._selectedLayer.removeAllDrawEffects(),this._selectedLayer.addDrawEffect(l.__NODE_SELECTED_SHADOW))},t.Sunburst.prototype.__getAngleExtent=function(){return this._angleExtent},t.Sunburst.prototype._animateAngleExtent=function(e){this._angleExtent=e;var i=new t.Rectangle(0,0,this.Width,this.Height);this.Layout(i),this._root&&this._root.updateShapes(!0)},t.Sunburst.prototype.__startRotation=function(t,e){this.__setRotationAnchor(this._calcAngle(t,e))},t.Sunburst.prototype.__setRotationAnchor=function(e){this._currentAngle=e,this._rotationMask=new t.Rect(this.getCtx(),0,0,this.Width,this.Height),this._rotationMask.setInvisibleFill(),this._rotationMask.setCursor(this._rotateCursor),this.addChild(this._rotationMask),this.getEventManager().associate(this._rotationMask,new h(null,O.ROTATION_ID))},t.Sunburst.prototype.__continueRotation=function(t,e){this.__rotate(this._calcAngle(t,e))},t.Sunburst.prototype.__rotate=function(e){var i=e-this._currentAngle;this._currentAngle=e,this._updateStartAngle(i);var s=360-Math.round(180*this._startAngle/Math.PI);this.dispatchEvent(t.EventFactory.newSunburstRotationEvent(s,!1))},t.Sunburst.prototype.__endRotation=function(){this._currentAngle=null,this.removeChild(this._rotationMask),this._rotationMask=null;var e=360-Math.round(180*this._startAngle/Math.PI);this.dispatchEvent(t.EventFactory.newSunburstRotationEvent(e,!1)),this.dispatchEvent(t.EventFactory.newSunburstRotationEvent(e,!0))},t.Sunburst.prototype.SetOptions=function(e){t.Sunburst.superclass.SetOptions.call(this,e),this.Options.expanded instanceof Array&&(this.Options._expandedNodes=t.ArrayUtils.createBooleanMap(this.Options.expanded))},t.Sunburst.prototype.expandCollapseNode=function(e){var i=this.getRootNode(),s=!l.getNodeById(i,e).isDisclosed(),n=this.getOptions().expanded;if("all"==n){for(var o=p.getAllNodes(this._root),a=0;a<o.length;a++)o[a]=o[a].getId();n=o}if(n instanceof Array)if(s)n.push(e);else{var r=n.indexOf(e);r>-1&&n.splice(r,1)}else n.has&&(n=s?n.add([e]):n.delete([e]));this.dispatchEvent(new t.EventFactory.newExpandCollapseEvent(s?"expand":"collapse",e,p.findRootAndAncestors(this.getCtx(),this.getOptions()._nodes,e,[]).root,this.getOptions()._widgetConstructor,n)),this.__setNavigableIdToFocus(e)},t.Sunburst.prototype._calcAngle=function(t,e){return Math.atan2(e-this._translatePt.y,t-this._translatePt.x)},t.Sunburst.prototype._updateStartAngle=function(e){this._startAngle+=e,this._startAngle<-Math.PI?this._startAngle+=2*Math.PI:this._startAngle>Math.PI&&(this._startAngle-=2*Math.PI);var i=new t.Rectangle(0,0,this.Width,this.Height);this.Layout(i),this._root&&this._root.updateShapes(!0)},t.Sunburst.prototype.__getNodeUnderPoint=function(t,e){return this._root.getNodeUnderPoint(t-this._translatePt.x,e-this._translatePt.y)},t.Sunburst.prototype.__showDropSiteFeedback=function(e){var i=t.Sunburst.superclass.__showDropSiteFeedback.call(this,e);return i&&i.setTranslate(this._translatePt.x,this._translatePt.y),i},t.Sunburst.prototype.__isRotationEnabled=function(){return"off"!=this.getOptions().rotation},t.Sunburst.prototype.CreateNode=function(t){return new T(this,t)},t.Sunburst.prototype.getCenterPoint=function(){return this._translatePt};var T=function(t,e){this.Init(t,e);var i=this._view.getOptions().nodeDefaults;this._labelDisplay=e.labelDisplay?e.labelDisplay:i.labelDisplay,this._evaluateExpanded(t,e),this._labelHalign=e.labelHalign?e.labelHalign:i.labelHalign,this._radius=e.radius,this._className=e.className||e.svgClassName,this._style=e.style||e.svgStyle,this._showDisclosure="on"==e.showDisclosure||"off"!=e.showDisclosure&&"on"==i.showDisclosure};t.Obj.createSubclass(T,l),T.TEXT_BUFFER_HORIZ=6,T._EXPAND_ICON_SIZE=16,T._ROOT_NODE_MARGIN=2,T._MIN_ARC_LENGTH=1.5,T._MIN_ANGLE_EXTENT=6e-4,T.TWO_PI=2*Math.PI,T._CENTER_ARTIFICIAL_ROOT_RADIUS=.25,T._CENTER_NODE_RADIUS=.5,T._CENTER_WITH_CONTENT_RADIUS=1,T.prototype.render=function(e){if(this._hasLayout){this._nodeContainer=e,this._shape=this._createShapeNode(),e.addChild(this._shape);var i=this.GetTemplate();if(this._showRootContent()&&i){var s=Math.sqrt(2),n=this._outerRadius*s-2*T._ROOT_NODE_MARGIN,o=n;this._x=-this._outerRadius/s+T._ROOT_NODE_MARGIN,this._y=-this._outerRadius/s+T._ROOT_NODE_MARGIN;var a=this.GetElAttributes(),r=this.GetAfContext();if(r.setELContext(a),n>0&&o>0){r.setAvailableWidth(n),r.setAvailableHeight(o),r.setFontSize(this.GetTextSize());var l=t.AfComponentFactory.parseAndLayout(r,i,this._shape);this._contentRoot=l;var h=l.getDimensions();l.setTranslate(this._x+(n-h.w)/2,this._y+(o-h.h)/2)}}else if(!(this.isRootNode()&&this._createRootNodeContent()||(this._text=this._createTextNode(this._shape),null==this._text))){this._shape.addChild(this._text);var _=this.getLabelBackgroundColor();if(this.hasPattern()||_){h=this._text.getDimensions();this._textBackground=new t.Rect(this.getView().getCtx(),h.x,h.y,h.w,h.h),_?this._textBackground.setSolidFill(_):this._textBackground.setSolidFill("#FFFFFF"),this._textBackground.setMouseEnabled(!1),this._shape.addChild(this._textBackground);var d=this._text.getMatrix();d.isIdentity()||this._textBackground.setMatrix(d),this._shape.addChild(this._text)}}this._shape.setAriaRole("img"),this._shape.setStyle(this._style),this._shape.setClassName(this._className),this.UpdateAriaLabel(),this.renderChildren(e)}},T.prototype.renderChildren=function(e){var i=this.getChildNodes(),s=this.getView().__getNodeCount()>=t.Sunburst.LARGE_DATASET_THRESHOLD;if(null!=i)for(var n=0,o=0;o<i.length;o++){var a=i[o]._angleExtent;if(!(a<T._MIN_ANGLE_EXTENT)){if(s){var r=i[o]._getOuterRadius(),l=a*r,h=(i[o]._startAngle+a)*r;if(l<T._MIN_ARC_LENGTH&&Math.abs(n-h)<T._MIN_ARC_LENGTH)continue;n=h}i[o].render(e)}}},T.prototype.setSelected=function(e){T.superclass.setSelected.call(this,e),null!=this._shape&&(this.isSelected()?(this._shape.setSelected(!0),this.getView().__moveToSelectedLayer(this._shape)):(this._shape.setSelected(!1),t.Agent.isTouchDevice()&&this._expandButton?this.getView().__moveToSelectedLayer(this._shape):this._nodeContainer&&this._nodeContainer.addChild(this._shape)))},T.prototype.showHoverEffect=function(){this._shape&&this._hasLayout&&(this._shape.showHoverEffect(),this.isSelected()?this.getView().__moveToSelectedLayer(this._shape):this.getView().__moveToHoverLayer(this._shape))},T.prototype.hideHoverEffect=function(){this._shape&&this._hasLayout&&!this.isShowingKeyboardFocusEffect()&&(this._shape.hideHoverEffect(),!this.isSelected()&&this._nodeContainer&&this._nodeContainer.addChild(this._shape))},T.prototype.isExpandCollapseEnabled=function(){return this._showDisclosure},T.prototype.getNextNavigable=function(e){var i,s,n,o,a;if(e.type==t.MouseEvent.CLICK)return T.superclass.getNextNavigable.call(this,e);if((i=e.keyCode)==t.KeyboardEvent.SPACE&&e.ctrlKey)return this;for(a=this;a.GetParent();)a=a.GetParent();n=this.GetNodesAtDepth(a,this.GetDepth()),o=T._findNodeIndex(this,n);var r,l,h=this._startAngle+this._angleExtent/2;switch(h=T._normalizedRadToDeg(h),i){case t.KeyboardEvent.UP_ARROW:if(this===a||h>180){if((r=this.GetLastVisitedChild())&&(l=r._startAngle+r._angleExtent/2,(l=T._normalizedRadToDeg(l))>180))return r;s=t.KeyboardHandler.getNextAdjacentNavigable(this,e,this.getDescendantNodes())}else s=this._navigateToParent();break;case t.KeyboardEvent.DOWN_ARROW:if(this===a||h>=0&&h<=180){if((r=this.GetLastVisitedChild())&&(l=r._startAngle+r._angleExtent/2,(l=T._normalizedRadToDeg(l))>=0&&l<=180))return r;s=t.KeyboardHandler.getNextAdjacentNavigable(this,e,this.getDescendantNodes())}else s=this._navigateToParent();break;case t.KeyboardEvent.LEFT_ARROW:s=1==n.length?this:0==o?n[n.length-1]:n[o-1];break;case t.KeyboardEvent.RIGHT_ARROW:s=1==n.length?this:o==n.length-1?n[0]:n[o+1];break;default:s=this}return s.MarkAsLastVisitedChild(),s},T.prototype._navigateToParent=function(){var t,e=this.GetParent();return e?(t=e,e.MarkAsLastVisitedChild()):t=this,t.MarkAsLastVisitedChild(),t},T._normalizedRadToDeg=function(e){var i=t.Math.radsToDegrees(e);return i<0?i+=360:i>360&&(i-=360),i},T.prototype.getKeyboardBoundingBox=function(e){if(this._shape){var i=this._shape.getDimensions(),s=new t.Point(i.x,i.y);return s=this._shape.localToStage(s),i.x=s.x,i.y=s.y,i}return new t.Rectangle(0,0,0,0)},T.prototype.getTargetElem=function(){return this._shape?this._shape.getElem():null},T.prototype.setLayoutParams=function(t,e,i,s){this._innerRadius=t,this._outerRadius=e,this._startAngle=i,this._angleExtent=s,this._hasLayout=!0},T.prototype.GetFill=function(){return this.isArtificialRoot()?t.SolidFill.invisibleFill():T.superclass.GetFill.call(this)},T.prototype.GetAnimationParams=function(e){var i=t.ColorUtils.getRed(this._color),s=t.ColorUtils.getGreen(this._color),n=t.ColorUtils.getBlue(this._color),o=this._startAngle;if(e&&!isNaN(e[2])){var a=e[2];a-this._startAngle>Math.PI?o+=T.TWO_PI:this._startAngle-a>Math.PI&&(o-=T.TWO_PI)}return[this._innerRadius,this._outerRadius,o,this._angleExtent,i,s,n]},T.prototype.SetAnimationParams=function(e){this.setLayoutParams(e[0],e[1],e[2],e[3]);var i=Math.round(e[4]),s=Math.round(e[5]),n=Math.round(e[6]);this._color=t.ColorUtils.makeRGB(i,s,n),this.updateShapes(!1)},T.prototype.animateUpdate=function(t,e){!this.isRootNode()||e._getOuterRadius()==this._getOuterRadius()&&e.getId()==this.getId()||this._removeRootNodeContentOverlay(),e._hasLayout&&e._angleExtent>0?T.superclass.animateUpdate.call(this,t,e):this.animateInsert(t)},T.prototype.animateInsert=function(t,e){this.isRootNode()&&this._removeRootNodeContentOverlay(),T.superclass.animateInsert.call(this,t,e)},T.prototype.animateDelete=function(t,e){this.isRootNode()&&this._removeRootNodeContentOverlay(),T.superclass.animateDelete.call(this,t,e)},T.prototype.getNodeUnderPoint=function(t,e){if(this.contains(t,e))return this;for(var i=this.getChildNodes(),s=0;s<i.length;s++){var n=i[s].getNodeUnderPoint(t,e);if(n)return n}return null},T.prototype.contains=function(t,e){var i=T._calcRadius(t,e),s=T._calcAngle(t,e);return this.ContainsRadius(i)&&this.ContainsAngle(s)},T.prototype.ContainsAngle=function(t){for(;t<this._startAngle;)t+=T.TWO_PI;for(;t-this._startAngle>T.TWO_PI;)t-=T.TWO_PI;return t>=this._startAngle&&t<=this._startAngle+this._angleExtent},T.prototype.ContainsRadius=function(t){return t>=this._innerRadius&&t<=this._outerRadius},T._calcPointOnArc=function(t,e){return{x:Math.cos(e)*t,y:Math.sin(e)*t}},T._calcAngle=function(t,e){var i=Math.atan2(e,t);return i<0?i+=T.TWO_PI:i>T.TWO_PI&&(i-=T.TWO_PI),i},T._calcRadius=function(t,e){return Math.sqrt(t*t+e*e)},T.prototype._createShapeNode=function(){if(!this._angleExtent||this._angleExtent<=0)return null;var e=this._createPathCmd(),i=new t.Path(this.getView().getCtx(),e);this.getView().getEventManager().associate(i,this),i.setAlpha(this.getAlpha()),i.setFill(this.GetFill());var s=this._view.getOptions().nodeDefaults,n=this.getOptions(),o=n.borderColor||s.borderColor,a=n.borderWidth||s.borderWidth;return i.setStroke(new t.Stroke(o,1,a)),i.setHoverStroke(new t.Stroke(s.hoverColor,1,3)),i.setSelectedStroke(new t.Stroke(s.selectedInnerColor,1,1.5),new t.Stroke(s.selectedOuterColor,1,3.5)),i.setSelectedHoverStroke(new t.Stroke(s.hoverColor,1,3)),i.setSelectable(this.isSelectable()),this.isDrillReplaceEnabled()&&i.setCursor("pointer"),this.isArtificialRoot()&&(i.setAlpha(.001),i.setMouseEnabled(!1)),i},T.prototype._createPathCmd=function(){var e,i,s,n,o;return this._angleExtent<T.TWO_PI?(i=T._calcPointOnArc(this._outerRadius,this._startAngle),s=T._calcPointOnArc(this._outerRadius,this._startAngle+this._angleExtent),n=T._calcPointOnArc(this._innerRadius,this._startAngle+this._angleExtent),o=T._calcPointOnArc(this._innerRadius,this._startAngle),e=t.PathUtils.moveTo(i.x,i.y)+t.PathUtils.arcTo(this._outerRadius,this._outerRadius,this._angleExtent,1,s.x,s.y)+t.PathUtils.lineTo(n.x,n.y)+t.PathUtils.arcTo(this._innerRadius,this._innerRadius,this._angleExtent,0,o.x,o.y)+t.PathUtils.closePath()):(i=T._calcPointOnArc(this._outerRadius,this._startAngle),s=T._calcPointOnArc(this._outerRadius,this._startAngle+this._angleExtent/2),n=T._calcPointOnArc(this._innerRadius,this._startAngle),o=T._calcPointOnArc(this._innerRadius,this._startAngle+this._angleExtent/2),e=t.PathUtils.moveTo(i.x,i.y)+t.PathUtils.arcTo(this._outerRadius,this._outerRadius,this._angleExtent/2,1,s.x,s.y)+t.PathUtils.arcTo(this._outerRadius,this._outerRadius,this._angleExtent/2,1,i.x,i.y),this._innerRadius>0&&(e+=t.PathUtils.moveTo(o.x,o.y)+t.PathUtils.arcTo(this._innerRadius,this._innerRadius,this._angleExtent/2,0,n.x,n.y)+t.PathUtils.arcTo(this._innerRadius,this._innerRadius,this._angleExtent/2,0,o.x,o.y)),e+=t.PathUtils.closePath()),e},T.prototype._createExpandCollapseButton=function(t){var e=this.isDisclosed();if(!t||!this.isExpandCollapseEnabled()||!this.hasChildren()&&e||this.getView().hasDataProvider()&&!this.hasDPChildren())return null;var i=e?this._getCollapseButton():this._getExpandButton();this._positionButton(i),t.addChild(i);var s=this.getView().getOptions().translations[this.isDisclosed()?"tooltipCollapse":"tooltipExpand"];return this.getView().getEventManager().associate(i,new h(this,this.getId(),s)),i},T.prototype._positionButton=function(t){var e=T._calcPointOnArc(this._outerRadius,this._startAngle+this._angleExtent/2);t.setTranslate(e.x-T._EXPAND_ICON_SIZE/2,e.y-T._EXPAND_ICON_SIZE/2)},T.prototype._createTextNode=function(e){if(!this._textStr||!e||!this._labelDisplay||"off"==this._labelDisplay)return null;if(this==this.getView().getRootNode()&&this._angleExtent<T.TWO_PI)return null;var i=!1;return"auto"==this._labelDisplay?i="ie"===t.Agent.browser||"edge"===t.Agent.browser||"windows"!=t.Agent.os:"rotated"==this._labelDisplay&&(i=!0),i&&this._angleExtent<this.getView().__getAngleExtent()?this._createTextRotated(e):this._createTextHoriz(e)},T.prototype._createTextHoriz=function(e){var i;if(0==this._innerRadius)i={x:0,y:0};else{i=T._calcPointOnArc((this._innerRadius+this._outerRadius)/2,this._startAngle+this._angleExtent/2);var s=3*this.GetTextSize()/2,n=T._calcAngle(i.x-s/2,i.y),o=T._calcAngle(i.x+s/2,i.y);this.ContainsAngle(n)&&this.ContainsAngle(o)||(i=null)}if(i){var a=new t.OutputText(this.getView().getCtx(),this._textStr,i.x,i.y,null);a.setFontSize(this.GetTextSize()),this.ApplyLabelTextStyle(a),a.alignCenter(),a.alignMiddle(),a.setMouseEnabled(!1);for(var r=a.getDimensions(),l=i.x,h=i.x,_=i.y-r.h/2,d=i.y+r.h/2,u=!0;this.contains(l,_)&&this.contains(l,d)&&u;)l--,this._angleExtent>Math.PI&&i.x-l>=r.w&&(u=!1);for(var c=!0;this.contains(h,_)&&this.contains(h,d)&&c;)h++,this._angleExtent>Math.PI&&h-i.x>=r.w&&(c=!1);l+=3,h-=3;var p=2*Math.min(i.x-l,h-i.x);p<r.w&&(a.setX((l+h)/2),p=h-l);var g=this.getView().getOptions().nodeDefaults.labelMinLength;return t.TextUtils.fitText(a,p,r.h,e,g)?a:null}},T.prototype._createTextRotated=function(e){var i=Math.max(this._innerRadius,10),s=this._outerRadius-i-T.TEXT_BUFFER_HORIZ,n=this._angleExtent*(i+T.TEXT_BUFFER_HORIZ)*1.1;if(n<=6)return null;var o=new t.OutputText(this.getView().getCtx(),this._textStr,0,0);if(o.setFontSize(this.GetTextSize()),this.ApplyLabelTextStyle(o),!t.TextUtils.fitText(o,s,n,e))return null;var a=(i+this._outerRadius)/2;if("inner"==this._labelHalign||"outer"==this._labelHalign){e.addChild(o);var r=o.getDimensions().w,l=.75*T.TEXT_BUFFER_HORIZ;"inner"==this._labelHalign?a=i+l+r/2:"outer"==this._labelHalign&&(a=this._outerRadius-l-r/2)}var h=T._calcPointOnArc(a,this._startAngle+this._angleExtent/2);o.alignCenter(),o.alignMiddle();var _=this._startAngle+this._angleExtent/2;return(_=(_=_>=T.TWO_PI?_-T.TWO_PI:_)<0?_+T.TWO_PI:_)>.5*Math.PI&&_<1.5*Math.PI&&(_+=Math.PI),o.setRotation(_),o.setTranslate(h.x,h.y),o.setMouseEnabled(!1),o},T._findNodeIndex=function(t,e){for(var i=0;i<e.length;i++)if(t===e[i])return i;return-1},T.prototype.handleMouseOver=function(){this._expandButton||(this._expandButton=this._createExpandCollapseButton(this._shape)),T.superclass.handleMouseOver.call(this)},T.prototype.handleMouseOut=function(){this._expandButton&&this._shape&&(this._shape.removeChild(this._expandButton),this._expandButton=null),T.superclass.handleMouseOut.call(this)},T.prototype.updateShapes=function(e){if(this._shape){var i=this._createPathCmd();if(this._shape.setCmds(i),!this._showRootContent()){this._text&&this._shape.removeChild(this._text),this._text=this._createTextNode(this._shape);var s=this.getLabelBackgroundColor();if(this._text&&(this.hasPattern()||s)){var n=this._text.getDimensions();this._textBackground?this._textBackground.setRect(n.x,n.y,n.w,n.h):(this._textBackground=new t.Rect(this.getView().getCtx(),n.x,n.y,n.w,n.h),s?this._textBackground.setSolidFill(s):this._textBackground.setSolidFill("#FFFFFF"),this._textBackground.setMouseEnabled(!1),this._shape.addChild(this._textBackground));var o=this._text.getMatrix();o.isIdentity()||this._textBackground.setMatrix(o)}else this._textBackground&&(this._shape.removeChild(this._textBackground),this._textBackground=null)}if(t.Agent.isTouchDevice()&&this._expandButton&&this._positionButton(this._expandButton),this._shape.setFill(this.GetFill()),e)for(var a=this.getChildNodes(),r=0;r<a.length;r++)a[r].updateShapes(!0)}},T.prototype.getDropSiteFeedback=function(){return this._shape instanceof t.Circle?new t.Circle(this.getView().getCtx(),this._shape.getCx(),this._shape.getCy(),this._shape.getRadius()):this._shape instanceof t.Path?new t.Path(this.getView().getCtx(),this._shape.getCmds()):null},T.prototype._getExpandButton=function(){return this._getButtonHelper("expand")},T.prototype._getCollapseButton=function(){return this._getButtonHelper("collapse")},T.prototype._getButtonHelper=function(e){var i=this.getView().getCtx(),s=T._EXPAND_ICON_SIZE/2,n=new t.Circle(i,s,s,s+2),o=this.getView().getOptions()._resources[e],a=t.ToolkitUtils.getIconStyle(i,o);return new t.IconButton(i,"outlined",{style:a,size:T._EXPAND_ICON_SIZE},n,null,this.expandCollapse,this)},f.prototype.__isIsolated=function(){return this._bIsolated},T.prototype.expandCollapse=function(t){this.getView().expandCollapseNode(this.getId()),t.stopPropagation()},T.prototype.getExpandCollapseButton=function(){return this._expandButton},T.prototype._showRootContent=function(){return!this._parent&&0==this._innerRadius&&this._angleExtent==T.TWO_PI},T.prototype.hasRootContent=function(){return!!this.GetTemplate()},T.prototype.__getRadius=function(){return null!=this._radius?Number(this._radius):this.GetParent()?1:this.isArtificialRoot()?T._CENTER_ARTIFICIAL_ROOT_RADIUS:this.hasRootContent()?T._CENTER_WITH_CONTENT_RADIUS:T._CENTER_NODE_RADIUS},T.prototype.getAriaLabel=function(){var e=this.getView().getOptions().translations,i=[];return this.isSelectable()&&i.push(e[this.isSelected()?"stateSelected":"stateUnselected"]),this.isExpandCollapseEnabled()&&i.push(e[this.isDisclosed()?"stateExpanded":"stateCollapsed"]),this.isDrillReplaceEnabled()&&i.push(e.stateDrillable),t.Displayable.generateAriaLabel(this.getShortDesc(),i)},T.prototype.UpdateAriaLabel=function(){!t.Agent.deferAriaCreation()&&this._shape&&this._shape.setAriaProperty("label",this.getAriaLabel())},T.prototype.getDataContext=function(){var t=T.superclass.getDataContext.call(this);return t.radius=this.__getRadius(),t},T.prototype._createRootNodeContent=function(){var e=this.getView(),i=e.getOptions(),s=i.rootNodeContent.renderer;if(this._removeRootNodeContentOverlay(),!s)return!1;var n,o=e.getCtx(),a=e.getCenterPoint(),r=this._outerRadius,l=r*Math.sqrt(2),h=this.getOptions(),_=h;h._noTemplate?(n=h._itemData,_=h._itemData):h._itemData&&(n=h._itemData,_=h=t.JsonUtils.clone(h),delete h._itemData);var d={outerBounds:{x:a.x-r,y:a.y-r,width:2*r,height:2*r},innerBounds:{x:a.x-l/2,y:a.y-l/2,width:l,height:l},id:this._id,data:_,itemData:n,component:i._widgetConstructor};d=o.fixRendererContext(d);var u=o.getContainer(),c=s(d);if(c){var p=o.createOverlayDiv();Array.isArray(c)?c.forEach(function(t){p.appendChild(t)}):p.appendChild(c),e.rootNodeContent=p,u.appendChild(p);var g=o.getOverlayAttachedCallback();return g&&g(p),!0}},T.prototype._getOuterRadius=function(){return this._outerRadius},T.prototype._removeRootNodeContentOverlay=function(){var t=this.getView(),e=t.rootNodeContent;e&&t.getCtx().getContainer().removeChild(e),t.rootNodeContent=null},T.prototype._evaluateExpanded=function(e,i){var s=e.getOptions(),n=s.expanded;i.bArtificialRoot||i._expanded||(n.has?n.has(i.id)||this.setDisclosed(!1):n instanceof Array&&!t.ArrayUtils.hasAnyMapItem(s._expandedNodes,[i.id])&&this.setDisclosed(!1))};var A=new Object;t.Obj.createSubclass(A,t.Obj),A.layout=function(t,e,i,s,n){var o=t/A._calcLargestRadius(e);A._layout(o,e,i,s,n,0)},A._layout=function(e,i,s,n,o,a){var r=a+i.__getRadius()*e;i.setLayoutParams(a,r,s,n);var l=i.getChildNodes();if(null!=l&&i.isDisclosed()){var h,_=s;"on"==o&&(l=l.slice(0)).sort(function(t,e){return e.getSize()-t.getSize()}),t.Agent.isRightToLeft(i.getView().getCtx())&&(l=l.slice(0).reverse());var d=0;for(h=0;h<l.length;h++)d+=l[h].getSize()>0?l[h].getSize():0;for(h=0;h<l.length;h++){var u=l[h];if(!(u.getSize()<=0)){var c=u.getSize()/d*n;A._layout(e,u,_,c,o,r),_+=c}}}},A._calcLargestRadius=function(t){var e=0,i=t.getChildNodes();if(i&&i.length>0){for(var s=0;s<i.length;s++){var n=A._calcLargestRadius(i[s]);e=Math.max(e,n)}return e+t.__getRadius()}return t.__getRadius()};var O=function(t,e,i,s){r.call(this,t,e,i,s)};t.Obj.createSubclass(O,r),O.ROTATION_ID="_rotationShape",O.prototype.OnMouseDown=function(t){var e=this.GetLogicalObject(t.target);if(e&&e.getId&&e.getId()==O.ROTATION_ID&&!this._bRotating){this._bRotating=!0;var i=this._context.pageToStageCoords(t.pageX,t.pageY);this.GetView().__startRotation(i.x,i.y)}else O.superclass.OnMouseDown.call(this,t)},O.prototype.OnMouseMove=function(t){if(this._bRotating){var e=this._context.pageToStageCoords(t.pageX,t.pageY);this.GetView().__continueRotation(e.x,e.y)}else O.superclass.OnMouseMove.call(this,t)},O.prototype.OnMouseUp=function(t){this._bRotating?(this._bRotating=!1,this.GetView().__endRotation()):O.superclass.OnMouseUp.call(this,t)},O.prototype.ProcessKeyboardEvent=function(e){var i=!0,s=e.keyCode,n=this.getFocus(),o=this.GetView();if(n.isExpandCollapseEnabled()&&(t.KeyboardEvent.isPlus(e)&&!n.isDisclosed()||t.KeyboardEvent.isMinus(e)&&n.isDisclosed()||e.ctrlKey&&s==t.KeyboardEvent.ENTER))o.expandCollapseNode(n.getId()),t.EventManager.consumeEvent(e);else if(o&&o.__isRotationEnabled()&&(s==t.KeyboardEvent.LEFT_ARROW||s==t.KeyboardEvent.RIGHT_ARROW)&&!e.ctrlKey&&e.altKey&&e.shiftKey){var a;a=s==t.KeyboardEvent.LEFT_ARROW?Math.PI/180*-5:Math.PI/180*5,o.__setRotationAnchor(0),o.__rotate(a),o.__endRotation(),t.EventManager.consumeEvent(e)}else i=O.superclass.ProcessKeyboardEvent.call(this,e);return i},O.ROTATE_KEY="rotateKey",O.prototype.HandleImmediateTouchStartInternal=function(t){var e=this.GetLogicalObject(t.target);e&&e.getId&&e.getId()==O.ROTATION_ID&&this.TouchManager.processAssociatedTouchAttempt(t,O.ROTATE_KEY,this.RotateStartTouch,this)},O.prototype.HandleImmediateTouchMoveInternal=function(t){this.TouchManager.processAssociatedTouchMove(t,O.ROTATE_KEY)},O.prototype.HandleImmediateTouchEndInternal=function(t){this.TouchManager.processAssociatedTouchEnd(t,O.ROTATE_KEY)},O.prototype.RotateStartTouch=function(t,e){if(this.TouchManager.getTouchIdsForObj(O.ROTATE_KEY).length<=1){this.TouchManager.saveProcessedTouch(e.identifier,O.ROTATE_KEY,null,O.ROTATE_KEY,O.ROTATE_KEY,this.RotateMoveTouch,this.RotateEndTouch,this),this.TouchManager.setTooltipEnabled(e.identifier,!1);var i=this._context.pageToStageCoords(e.pageX,e.pageY);this.GetView().__startRotation(i.x,i.y),t.blockTouchHold()}},O.prototype.RotateMoveTouch=function(t,e){var i=this._context.pageToStageCoords(e.pageX,e.pageY);this.GetView().__continueRotation(i.x,i.y),t.preventDefault()},O.prototype.RotateEndTouch=function(t,e){this.GetView().__endRotation()};var R=function(t){this.Init({alta:R.SKIN_ALTA},t)};t.Obj.createSubclass(R,c),R.SKIN_ALTA={nodeDefaults:{borderColor:"rgba(255,255,255,0.3)",borderWidth:1,hoverColor:"#FFFFFF",labelDisplay:"auto",labelHalign:"center",selectedInnerColor:"#FFFFFF",selectedOuterColor:"#000000"},rootNodeContent:{},rotation:"on",expanded:"all",startAngle:90}}(dvt);
  return dvt;
});

/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojtreemap',["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojdvt-base","ojs/internal-deps/dvt/DvtTreeView","ojs/ojkeyset"],function(e,t,o,r,a,n){"use strict";var l={properties:{animationDuration:{type:"number"},animationOnDataChange:{type:"string",enumValues:["auto","none"],value:"none"},animationOnDisplay:{type:"string",enumValues:["auto","none"],value:"none"},animationUpdateColor:{type:"string",value:""},as:{type:"string",value:""},colorLabel:{type:"string",value:""},data:{type:"object"},displayLevels:{type:"number",value:1.7976931348623157e308},drilling:{type:"string",enumValues:["off","on"],value:"off"},groupGaps:{type:"string",enumValues:["all","none","outer"],value:"outer"},hiddenCategories:{type:"Array<string>",writeback:!0,value:[]},highlightMatch:{type:"string",enumValues:["all","any"],value:"all"},highlightedCategories:{type:"Array<string>",writeback:!0,value:[]},hoverBehavior:{type:"string",enumValues:["dim","none"],value:"none"},hoverBehaviorDelay:{type:"number",value:200},isolatedNode:{type:"any",writeback:!0,value:""},layout:{type:"string",enumValues:["sliceAndDiceHorizontal","sliceAndDiceVertical","squarified"],value:"squarified"},nodeContent:{type:"object",properties:{renderer:{type:"function"}}},nodeDefaults:{type:"object",properties:{groupLabelDisplay:{type:"string",enumValues:["header","node","off"],value:"header"},header:{type:"object",properties:{backgroundColor:{type:"string"},borderColor:{type:"string"},hoverBackgroundColor:{type:"string"},hoverInnerColor:{type:"string"},hoverOuterColor:{type:"string"},isolate:{type:"string",enumValues:["off","on"],value:"on"},labelHalign:{type:"string",enumValues:["center","end","start"],value:"start"},labelStyle:{type:"object"},selectedBackgroundColor:{type:"string"},selectedInnerColor:{type:"string"},selectedOuterColor:{type:"string"},useNodeColor:{type:"string",enumValues:["off","on"],value:"off"}}},hoverColor:{type:"string"},labelDisplay:{type:"string",enumValues:["node","off"],value:"node"},labelHalign:{type:"string",enumValues:["center","end","start"],value:"center"},labelMinLength:{type:"number",value:1},labelStyle:{type:"object"},labelValign:{type:"string",enumValues:["bottom","center","top"],value:"center"},selectedInnerColor:{type:"string"},selectedOuterColor:{type:"string"}}},nodeSeparators:{type:"string",enumValues:["bevels","gaps"],value:"gaps"},nodes:{type:"Array<Object>|Promise"},rootNode:{type:"any",value:""},selection:{type:"Array<any>",writeback:!0,value:[]},selectionMode:{type:"string",enumValues:["multiple","none","single"],value:"multiple"},sizeLabel:{type:"string",value:""},sorting:{type:"string",enumValues:["off","on"],value:"off"},tooltip:{type:"object",properties:{renderer:{type:"function"}}},touchResponse:{type:"string",enumValues:["auto","touchStart"],value:"auto"},trackResize:{type:"string",enumValues:["off","on"],value:"on"},translations:{type:"object",value:{},properties:{componentName:{type:"string"},labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelColor:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelInvalidData:{type:"string"},labelNoData:{type:"string"},labelSize:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"},tooltipIsolate:{type:"string"},tooltipRestore:{type:"string"}}}},methods:{getNode:{},getContextByNode:{},refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojBeforeDrill:{},ojDrill:{}},extension:{}},i={properties:{categories:{type:"Array<string>",value:[]},color:{type:"string",value:"#000000"},drilling:{type:"string",enumValues:["inherit","off","on"],value:"inherit"},groupLabelDisplay:{type:"string",enumValues:["header","node","off"]},header:{type:"object",properties:{isolate:{type:"string",enumValues:["off","on"]},labelHalign:{type:"string",enumValues:["center","end","start"]},labelStyle:{type:"object"},useNodeColor:{type:"string",enumValues:["off","on"]}}},label:{type:"string",value:""},labelDisplay:{type:"string",enumValues:["node","off"]},labelHalign:{type:"string",enumValues:["center","end","start"]},labelStyle:{type:"object",value:{}},labelValign:{type:"string",enumValues:["bottom","center","top"]},pattern:{type:"string",enumValues:["largeChecker","largeCrosshatch","largeDiagonalLeft","largeDiagonalRight","largeDiamond","largeTriangle","none","smallChecker","smallCrosshatch","smallDiagonalLeft","smallDiagonalRight","smallDiamond","smallTriangle"],value:"none"},selectable:{type:"string",enumValues:["auto","off"],value:"auto"},shortDesc:{type:"string",value:""},svgClassName:{type:"string",value:""},svgStyle:{type:"object",value:{}},value:{type:"number"}},extension:{}};e.__registerWidget("oj.ojTreemap",t.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{animationDuration:void 0,animationOnDataChange:"none",animationOnDisplay:"none",animationUpdateColor:"",as:"",data:null,hiddenCategories:[],highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",hoverBehaviorDelay:200,nodeContent:{renderer:null},tooltip:{renderer:null},groupGaps:"outer",displayLevels:Number.MAX_VALUE,layout:"squarified",nodes:null,nodeDefaults:{labelStyle:void 0,labelDisplay:"node",groupLabelDisplay:"header",labelHalign:"center",labelMinLength:1,labelValign:"center",hoverColor:void 0,selectedInnerColor:void 0,selectedOuterColor:void 0,header:{backgroundColor:void 0,borderColor:void 0,hoverBackgroundColor:void 0,hoverInnerColor:void 0,hoverOuterColor:void 0,selectedBackgroundColor:void 0,selectedInnerColor:void 0,selectedOuterColor:void 0,labelHalign:"start",labelStyle:void 0,isolate:"on",useNodeColor:"off"}},nodeSeparators:"gaps",selectionMode:"multiple",sorting:"off",colorLabel:"",sizeLabel:"",drilling:"off",rootNode:"",selection:[],isolatedNode:"",touchResponse:"auto",beforeDrill:null,drill:null},_CreateDvtComponent:function(e,t,o){return a.Treemap.newInstance(e,t,o)},_GetSimpleDataProviderConfigs:function(){return{data:{templateName:"nodeTemplate",templateElementName:"oj-treemap-node",resultPath:"nodes",expandedKeySet:new e.AllKeySetImpl}}},_OptionChangeHandler:function(e){Object.prototype.hasOwnProperty.call(e,"displayLevels")&&this._ClearDataProviderState("data"),this._super(e)},_ConvertLocatorToSubId:function(e){var t=e.subId;return"oj-treemap-node"===t?t="node"+this._GetStringFromIndexPath(e.indexPath):"oj-treemap-tooltip"===t&&(t="tooltip"),t},_ConvertSubIdToLocator:function(e){var t={};return 0===e.indexOf("node")?(t.subId="oj-treemap-node",t.indexPath=this._GetIndexPath(e)):"tooltip"===e&&(t.subId="oj-treemap-tooltip"),t},_GetComponentStyleClasses:function(){var e=this._super();return e.push("oj-treemap"),e},_GetChildStyleClasses:function(){var e=this._super();return e["oj-dvtbase oj-treemap"]={path:"animationDuration",property:"ANIM_DUR"},e["oj-treemap-attribute-type-text"]={path:"styleDefaults/_attributeTypeTextStyle",property:"TEXT"},e["oj-treemap-attribute-value-text"]={path:"styleDefaults/_attributeValueTextStyle",property:"TEXT"},e["oj-treemap-drill-text "]={path:"styleDefaults/_drillTextStyle",property:"TEXT"},e["oj-treemap-current-drill-text "]={path:"styleDefaults/_currentTextStyle",property:"TEXT"},e["oj-treemap-node"]={path:"nodeDefaults/labelStyle",property:"TEXT"},e["oj-treemap-node oj-hover"]={path:"nodeDefaults/hoverColor",property:"border-top-color"},e["oj-treemap-node oj-selected"]=[{path:"nodeDefaults/selectedOuterColor",property:"border-top-color"},{path:"nodeDefaults/selectedInnerColor",property:"border-bottom-color"}],e["oj-treemap-node-header"]=[{path:"nodeDefaults/header/backgroundColor",property:"background-color"},{path:"nodeDefaults/header/borderColor",property:"border-top-color"},{path:"nodeDefaults/header/_labelStyle",property:"TEXT"}],e["oj-treemap-node-header oj-hover"]=[{path:"nodeDefaults/header/hoverBackgroundColor",property:"background-color"},{path:"nodeDefaults/header/hoverOuterColor",property:"border-top-color"},{path:"nodeDefaults/header/hoverInnerColor",property:"border-bottom-color"},{path:"nodeDefaults/header/_hoverLabelStyle",property:"TEXT"}],e["oj-treemap-node-header oj-selected"]=[{path:"nodeDefaults/header/selectedBackgroundColor",property:"background-color"},{path:"nodeDefaults/header/selectedOuterColor",property:"border-top-color"},{path:"nodeDefaults/header/selectedInnerColor",property:"border-bottom-color"},{path:"nodeDefaults/header/_selectedLabelStyle",property:"TEXT"}],e},_GetEventTypes:function(){return["optionChange","drill","beforeDrill"]},_HandleEvent:function(e){var o=e.type;if("isolate"===o){var r=this.options._isolatedNodes;r||(this.options._isolatedNodes=[],r=this.options._isolatedNodes);var a=e.id;a?(r.push(a),this._UserOptionChange("isolatedNode",a)):(a=r.pop(),this._UserOptionChange("isolatedNode",r.length>0?r[r.length]:null))}else if("drill"===o){var n,l=e.data;l&&l._noTemplate?(n=l._itemData,l=l._itemData):l&&l._itemData&&(n=l._itemData,delete(l=t.extend({},e.data))._itemData);var i={id:e.id,data:l,itemData:n};this._IsCustomElement()||(i.component=e.component),e.id&&this._trigger("beforeDrill",null,i)&&(this._UserOptionChange("rootNode",e.id),this._Render(),this._trigger("drill",null,i))}else this._super(e)},_GetComponentRendererOptions:function(){return[{path:"tooltip/renderer",slot:"tooltipTemplate"},{path:"nodeContent/renderer",slot:"nodeContentTemplate"}]},_ProcessOptions:function(){this._super();var e=this.options.nodeContent;e&&e._renderer&&(e.renderer=this._GetTemplateRenderer(e._renderer,"nodeContent"))},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources;e.isolate="oj-fwk-icon oj-fwk-icon-maximize",e.restore="oj-fwk-icon oj-fwk-icon-minimize"},getNode:function(e){return this._component.getAutomation().getNode(e)},getContextByNode:function(e){var t=this.getSubIdByNode(e);return t&&"oj-treemap-tooltip"!==t.subId?t:null},_GetComponentDeferredDataPaths:function(){return{root:["nodes","data"]}}}),l.extension._WIDGET_NAME="ojTreemap",e.CustomElementBridge.register("oj-treemap",{metadata:l}),i.extension._CONSTRUCTOR=function(){},e.CustomElementBridge.register("oj-treemap-node",{metadata:i})});
var __importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};define('viewModels/x-tree-map-histogram',["require","exports","ojs/ojarraytreedataprovider","knockout","ojs/ojattributegrouphandler","../app/util","../app/view-stack","ojs/ojtreemap"],(function(require,t,e,i,r,n,o){"use strict";i=__importStar(i),r=__importStar(r);return function(t){var a,u=this,l=new r.ColorAttributeGroupHandler,d=new o.ViewStack;d.push(null===(a=t.tile.section.treeMap)||void 0===a?void 0:a.root());var v=i.observableArray();i.computed((function(){var t=d.currentViewRoot();v(t?[s(t,2,"*")]:[])})),this.id="tree-map-"+t.tile.id,this.treemapData=new e(v,{keyAttributes:"id",childrenAttribute:"nodes"}),this.getColor=function(t){if(t.length>0)return l.getValue(t[t.length-1].id)},this.breadcrumbs=i.pureComputed((function(){var t=[],e=d.currentViewRoot();return e&&e.isGroup()?d.stack().forEach((function(e){t.push({name:n.util.truncateCenter(e.name,25,"...")})})):d.stack().forEach((function(e){e.isGroup()||t.push({name:n.util.truncateCenter(e.name,25,"...")})})),t})),this.breadcrumbId=function(e){return"breadcrumb-"+t.tile.id+"-"+e},this.breadcrumbButtonClick=function(e){var i=parseInt(e.currentTarget.id.slice(("breadcrumb-"+t.tile.id+"-").length));return d.size()>i&&d.stack.splice(i+1,d.size()-i),!0},this.zoomIn=function(e){var i;if(e.target.id!==u.id&&(i=document.getElementById(u.id).getContextByNode(e.target)),i){var r=i.indexPath[1],n=d.currentViewRoot(),o=n?n.groupedChildren(d,2,.02)[r]:void 0;if(o)if(o.isLeafNode()){if("code-breakdown"===t.tile.sectionName){var a=t.tile.dataSource,l=a.sectionFor("points-to");if(l){var v=o.getFullPath(),c={entryPointName:v.substring(2,v.lastIndexOf(")")+1)},s=a.componentFor("points-to");t.model.addTile(s,a,"points-to",l,c)}}}else d.push(o)}},this.zoomOut=function(){var t=d.currentViewRoot();t&&!t.isRoot&&d.pop()},this.reset=function(){var e;d.isEmpty()||d.clear(),d.push(null===(e=t.tile.section.treeMap)||void 0===e?void 0:e.root())};var c=document.createElement("div");function s(t,e,i){var r={id:t.getFullPath(),path:i,label:p(t),value:t.cumulativeValue()};return e>0&&(r.nodes=t.groupedChildren(d,2,.02).map((function(t,r){return s(t,e-1,i+"-"+r)}))),r}function p(t){var e=h(t.cumulativeValue(),0);return t.isLeafNode()?t.getFullPath()+" ("+e+")":n.util.truncate(t.getFullPath(),50,"...")+" ("+e+")"}function m(t){return t=t.replace("<","&lt;").replace(">","&gt;"),t=n.util.truncateCenter(t,20,"...")}function f(t,e,i){return void 0===i&&(i=""),t<1e3?t+" "+i:t<1e6?n.util.roundAndFormat(t/1e3,e)+" k"+i:t<1e9?n.util.roundAndFormat(t/1e6,e)+" M"+i:n.util.roundAndFormat(t/1e9,e)+" G"+i}function h(t,e){return f(t,e,"B")}c.className="x-tree-map-histogram-tooltip",this.tooltip=function(e){var i=d.currentViewRoot();if(e.itemData.path.split("-").forEach((function(t){null!=i&&"*"!==t&&(i=i.groupedChildren(d,2,.02)[parseInt(t)])})),i)return c.innerHTML=function(e){var i,r,o,a,u,l,d,v,c,s,p,g,b,P,G,V,C,F,w,A,k=m(e.name),_="<div class='x-tree-map-histogram-tooltip-title'><b>"+function(t,e,i,r,o){var a=t.split(";,"),u="";e=Math.min(e,a.length);for(var l=0;l<e;++l)u+=n.util.truncate(a[l].replace("<","&lt;").replace(">","&gt;"),i,r)+"</br>";return e<a.length&&(u+=o+"</br>"),u}(e.getFullPath(),6,50,"...","...")+"</b></div>";_+="<div class='x-tree-map-histogram-tooltip-divider'></div>";var x=e.relativeCumulativeValue(1,!0);if(x>=0){x=n.util.roundAndFormat(100*x,1);var y=m(null!==(r=null===(i=e.nonGroupParent())||void 0===i?void 0:i.name)&&void 0!==r?r:"noParent");_+="<div>'"+k+"' in '"+y+"': "+x+"%</div>"}var M=e.relativeCumulativeValue(2,!0);if(M>=0){M=n.util.roundAndFormat(100*M,1);var j=m(null!==(a=null===(o=e.nonGroupGrandparent())||void 0===o?void 0:o.name)&&void 0!==a?a:"noGrandParent");_+="<div>'"+k+"' in '"+j+"': "+M+"%</div>"}var z=e.cumulativeValue()/(null!==(d=null===(l=null===(u=t.tile.section.treeMap)||void 0===u?void 0:u.root())||void 0===l?void 0:l.cumulativeValue())&&void 0!==d?d:0);if(z=n.util.roundAndFormat(100*z,1),_+="<div>'"+k+"' in image: "+z+"%</div>",_+="<div class='x-tree-map-histogram-tooltip-divider'></div>",null!=e.nonGroupGrandparent()){var E=null!==(c=null===(v=e.nonGroupParent())||void 0===v?void 0:v.relativeCumulativeValue(1,!0))&&void 0!==c?c:0;E=n.util.roundAndFormat(100*E,1),y=m(null!==(p=null===(s=e.nonGroupParent())||void 0===s?void 0:s.name)&&void 0!==p?p:"noParent"),j=m(null!==(b=null===(g=e.nonGroupGrandparent())||void 0===g?void 0:g.name)&&void 0!==b?b:"noGrandParent"),_+="<div>'"+y+"' in '"+j+"': "+E+"%</div>"}if(null!=e.nonGroupParent()){var I=(null!==(G=null===(P=e.nonGroupParent())||void 0===P?void 0:P.cumulativeValue())&&void 0!==G?G:0)/(null!==(F=null===(C=null===(V=t.tile.section.treeMap)||void 0===V?void 0:V.root())||void 0===C?void 0:C.cumulativeValue())&&void 0!==F?F:0);I=n.util.roundAndFormat(100*I,1),y=m(null!==(A=null===(w=e.nonGroupParent())||void 0===w?void 0:w.name)&&void 0!==A?A:"noParent"),_+="<div>'"+y+"' in image: "+I+"%</div>"}if(_+="<div class='x-tree-map-histogram-tooltip-divider'></div>",e.count()){var N=h(e.cumulativeValue(),3);_+="<div>heap data size: "+N+"</div>";var R=function(t,e){return f(t,e)}(e.cumulativeCount(),1);_+="<div>number of instances: "+R+"</div>"}else{var S=h(e.cumulativeValue(),3);_+="<div>machine code size: "+S+"</div>"}return _}(i),{insert:c}}}}));
!function(){var e,s=-1!==(e=navigator.userAgent).indexOf("MSIE")||!!e.match(/Trident.*rv:11./);requirejs.config({baseUrl:"js",paths:{knockout:"libs/knockout/knockout-3.5.1",jquery:"libs/jquery/jquery-3.5.1.min","jqueryui-amd":"libs/jquery/jqueryui-amd-1.12.1.min",promise:"libs/es6-promise/es6-promise.min",hammerjs:"libs/hammer/hammer-2.0.8.min",ojdnd:"libs/dnd-polyfill/dnd-polyfill-1.0.2.min",ojs:"libs/oj/v9.1.0/min",ojL10n:"libs/oj/v9.1.0/ojL10n",ojtranslations:"libs/oj/v9.1.0/resources",persist:"libs/persist/min",text:"libs/require/text",signals:"libs/js-signals/signals.min",touchr:"libs/touchr/touchr","regenerator-runtime":"libs/regenerator-runtime/runtime",corejs:"libs/corejs/shim.min",customElements:"libs/webcomponents/custom-elements.min",proj4:"libs/proj4js/dist/proj4",css:"libs/require-css/css.min",marked:"libs/marked/marked"+(s?".esm":""),"css-builder":"libs/require-css/css-builder",normalize:"libs/require-css/normalize"}})}(),require(["ojs/ojbootstrap","knockout","appController","ojs/ojknockout","ojs/ojmodule","ojs/ojnavigationlist","ojs/ojbutton","./app/model","./app/util","./app/format","./app/bgv-parse","./app/tree-map","./app/pointstograph-layout","./app/view-stack","./viewModels/x-dashboard","./viewModels/x-data-source-list","./viewModels/x-help","./viewModels/x-modal","./viewModels/x-mosaic","./viewModels/x-points-to-exploration","./viewModels/x-tree-map-histogram"],(function(e,s,i){e.whenDocumentReady().then((function(){function e(){s.applyBindings(i,document.getElementById("globalBody"))}document.body.classList.contains("oj-hybrid")?document.addEventListener("deviceready",e):e()}))}));
define("bundle-temp", function(){});

</script>

</body>

</html>
